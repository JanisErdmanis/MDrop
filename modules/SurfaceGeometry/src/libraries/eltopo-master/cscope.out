cscope 15 $HOME/Dropbox/Cebers/CodeBase/Packages/v0.4/SurfaceGeometry/src/libraries/eltopo-master               0001265277
	@common/array1.h

1 #i‚de‡
ARRAY1_H


2 
	#ARRAY1_H


	)

4 
	~<Æg‹ôhm
>

5 
	~<ˇs£π
>

6 
	~<˛imôs
>

7 
	~<c°dlib
>

8 
	~<c°rög
>

9 
	~<io°ªam
>

10 
	~<°dex˚±
>

11 
	~<ve˘‹
>

23 
	sAºay1True
 {};

24 
	sAºay1FÆ£
 {};

25 
	gãm∂©e
<
ty≥«me
 
	gT
> 
	sAºay1IsI¡egøl
{ 
Aºay1FÆ£
 
	tty≥
; };

26 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<
	gboﬁ
>{ 
Aºay1True
 
	tty≥
; };

27 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

28 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<sig√d >{ 
Aºay1True
 
	tty≥
; };

29 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

30 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

31 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

32 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

33 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

34 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

35 
	gãm∂©e
<> 
	gAºay1IsI¡egøl
<>{ 
Aºay1True
 
	tty≥
; };

40 
	gãm∂©e
<
ty≥«me
 
	gT
>

41 
	sAºay1


45 
T
* 
	tôî©‹
;

46 c⁄° 
	tT
* 
	tc⁄°_ôî©‹
;

47 
	tsize_ty≥
;

48 
	tdif„ªn˚_ty≥
;

49 
	mT
& 
	tª„ªn˚
;

50 c⁄° 
	tT
& 
	tc⁄°_ª„ªn˚
;

51 
T
 
	tvÆue_ty≥
;

52 
T
* 
	tpoöãr
;

53 c⁄° 
	tT
* 
	tc⁄°_poöãr
;

54 
	m°d
::
	tªvî£_ôî©‹
<
	tôî©‹
>Ñeverse_iterator;

55 
	m°d
::
	tªvî£_ôî©‹
<
	tc⁄°_ôî©‹
> 
	tc⁄°_ªvî£_ôî©‹
;

59 
	mn
;

60 
	mmax_n
;

61 
T
* 
	md©a
;

65 
Aºay1
()

66 : 
n
(0), 
max_n
(0), 
d©a
(0)

70 
Aºay1
(
n_
)

71 : 
n
(0), 
max_n
(0), 
d©a
(0)

73 if(
	mn_
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

74 
	md©a
=(
T
*)
°d
::
ˇŒoc
(
n_
, (T));

75 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

76 
	mn
=
n_
;

77 
	mmax_n
=
n_
;

80 
Aºay1
(
n_
, c⁄° 
T
& 
vÆue
)

81 : 
n
(0), 
max_n
(0), 
d©a
(0)

83 if(
	mn_
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

84 
	md©a
=(
T
*)
°d
::
ˇŒoc
(
n_
, (T));

85 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

86 
	mn
=
n_
;

87 
	mmax_n
=
n_
;

88 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
;

91 
Aºay1
(
n_
, c⁄° 
T
& 
vÆue
, 
max_n_
)

92 : 
n
(0), 
max_n
(0), 
d©a
(0)

94 
as£π
(
n_
<=
max_n_
);

95 if(
	mmax_n_
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

96 
	md©a
=(
T
*)
°d
::
ˇŒoc
(
max_n_
, (T));

97 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

98 
	mn
=
n_
;

99 
	mmax_n
=
max_n_
;

100 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
;

103 
Aºay1
(
n_
, c⁄° 
T
* 
d©a_
)

104 : 
n
(0), 
max_n
(0), 
d©a
(0)

106 if(
	mn_
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

107 
	md©a
=(
T
*)
°d
::
ˇŒoc
(
n_
, (T));

108 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

109 
	mn
=
n_
;

110 
	mmax_n
=
n_
;

111 
as£π
(
d©a_
);

112 
	m°d
::
mem˝y
(
d©a
, 
d©a_
, 
n
*(
T
));

115 
Aºay1
(
n_
, c⁄° 
T
* 
d©a_
, 
max_n_
)

116 : 
n
(0), 
max_n
(0), 
d©a
(0)

118 
as£π
(
n_
<=
max_n_
);

119 if(
	mmax_n_
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

120 
	md©a
=(
T
*)
°d
::
ˇŒoc
(
max_n_
, (T));

121 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

122 
	mmax_n
=
max_n_
;

123 
	mn
=
n_
;

124 
as£π
(
d©a_
);

125 
	m°d
::
mem˝y
(
d©a
, 
d©a_
, 
n
*(
T
));

128 
Aºay1
(c⁄° Aºay1<
T
> &
x
)

129 : 
n
(0), 
max_n
(0), 
d©a
(0)

131 
	md©a
=(
T
*)
°d
::
mÆloc
(
x
.
n
*(T));

132 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

133 
	mn
=
x
.
n
;

134 
	mmax_n
=
x
.
n
;

135 
	m°d
::
mem˝y
(
d©a
, 
x
.d©a, 
n
*(
T
));

138 ~
Aºay1
()

140 
	m°d
::
‰ì
(
d©a
);

141 #i‚de‡
NDEBUG


142 
	md©a
=0;

143 
	mn
=
max_n
=0;

147 c⁄° 
	mT
& 
	m›î©‹
[](
	mi
) const

148 {  
	md©a
[
i
]; }

150 
	mT
& 
	m›î©‹
[](
	mi
)

151 {  
	md©a
[
i
]; }

154 c⁄° 
	mT
& 
›î©‹
()(
	mi
) const

156 
as£π
(
i
<
n
);

157  
	md©a
[
i
];

160 
	mT
& 
›î©‹
()(
	mi
)

162 
as£π
(
i
<
n
);

163  
	md©a
[
i
];

166 
	mAºay1
<
	mT
>& 
	m›î©‹
=(c⁄° 
Aºay1
<
T
>& 
x
)

168 if(
max_n
<
x
.
n
){

169 
T
* 
√w_d©a
=(T*)
°d
::
mÆloc
(
x
.
n
*(T));

170 if(!
	m√w_d©a
Ë
throw
 
	m°d
::
bad_Æloc
();

171 
	m°d
::
‰ì
(
d©a
);

172 
	md©a
=
√w_d©a
;

173 
	mmax_n
=
x
.
n
;

175 
	mn
=
x
.
n
;

176 
	m°d
::
mem˝y
(
d©a
, 
x
.d©a, 
n
*(
T
));

177  *
	mthis
;

180 
boﬁ
 
	m›î©‹
==(c⁄° 
Aºay1
<
T
>& 
x
) const

182 if(
n
!=
x
.nË 
Ál£
;

183 
	mi
=0; i<
	mn
; ++iËif(!(
	md©a
[
i
]==
x
.
d©a
[i])Ë 
Ál£
;

184  
	måue
;

187 
boﬁ
 
	m›î©‹
!=(c⁄° 
Aºay1
<
T
>& 
x
) const

189 if(
n
!=
x
.nË 
åue
;

190 
	mi
=0; i<
	mn
; ++iËif(
	md©a
[
i
]!=
x
.
d©a
[i]Ë 
åue
;

191  
	mÁl£
;

194 
boﬁ
 
	m›î©‹
<(c⁄° 
	mAºay1
<
	mT
>& 
	mx
) const

196 
	mi
=0; i<
	mn
 && i<
	mx
.n; ++i){

197 if(
	md©a
[
i
]<
	mx
[i]Ë 
	måue
;

198 if(
	mx
[
i
]<
	md©a
[i]Ë 
	mÁl£
;

200  
	mn
<
	mx
.n;

203 
boﬁ
 
	m›î©‹
>(c⁄° 
	mAºay1
<
	mT
>& 
	mx
) const

205 
	mi
=0; i<
	mn
 && i<
	mx
.n; ++i){

206 if(
	md©a
[
i
]>
	mx
[i]Ë 
	måue
;

207 if(
	mx
[
i
]>
	md©a
[i]Ë 
	mÁl£
;

209  
	mn
>
	mx
.n;

212 
boﬁ
 
	m›î©‹
<=(c⁄° 
Aºay1
<
T
>& 
x
) const

214 
i
=0; 
	mi
<
	mn
 && i<
	mx
.n; ++i){

215 if(
	md©a
[
i
]<
	mx
[i]Ë 
	måue
;

216 if(
	mx
[
i
]<
	md©a
[i]Ë 
	mÁl£
;

218  
	mn
<=
x
.
n
;

221 
boﬁ
 
	m›î©‹
>=(c⁄° 
Aºay1
<
T
>& 
x
) const

223 
i
=0; 
	mi
<
	mn
 && i<
	mx
.n; ++i){

224 if(
	md©a
[
i
]>
	mx
[i]Ë 
	måue
;

225 if(
	mx
[
i
]>
	md©a
[i]Ë 
	mÁl£
;

227  
	mn
>=
x
.
n
;

230 
add_unique
(c⁄° 
T
& 
vÆue
)

232 
	mi
=0; i<
	mn
; ++iËif(
	md©a
[
i
]==
vÆue
) ;

233 if(
	mn
==
max_n
Ë
grow
();

234 
	md©a
[
n
++]=
vÆue
;

237 
assign
(c⁄° 
T
& 
vÆue
)

238 { 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
; }

240 
assign
(
num
, c⁄° 
T
& 
vÆue
)

241 { 
fûl
(
num
, 
vÆue
); }

245 
assign
(
num
, c⁄° 
T
* 
c›yd©a
)

247 
as£π
(
num
==0 || 
c›yd©a
);

248 if(
	mnum
>
	mmax_n
){

249 if(
	mnum
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

250 
	m°d
::
‰ì
(
d©a
);

251 
	md©a
=(
T
*)
°d
::
mÆloc
(
num
*(T));

252 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

253 
	mmax_n
=
num
;

255 
	mn
=
num
;

256 
	m°d
::
mem˝y
(
d©a
, 
c›yd©a
, 
n
*(
T
));

259 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

260 
assign
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
)

261 { 
assign_
(
fú°
, 
œ°
, 
ty≥«me
 
Aºay1IsI¡egøl
<
I≈utIãøt‹
>::
ty≥
()); }

263 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

264 
assign_
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
, 
Aºay1True
 )

265 { 
fûl
(
fú°
, 
œ°
); }

267 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

268 
assign_
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
, 
Aºay1FÆ£
 )

270 
	mi
=0;

271 
I≈utIãøt‹
 
	mp
=
fú°
;

272 ; 
	mp
!=
œ°
; ++p, ++
	mi
){

273 if(
	mi
==
max_n
Ë
grow
();

274 
	md©a
[
i
]=*
p
;

276 
	mn
=
i
;

279 c⁄° 
	mT
& 
©
(
i
) const

281 
as£π
(
i
<
n
);

282  
	md©a
[
i
];

285 
	mT
& 
©
(
i
)

287 
as£π
(
i
<
n
);

288  
	md©a
[
i
];

291 c⁄° 
	mT
& 
back
() const

293 
as£π
(
d©a
 && 
n
>0);

294  
	md©a
[
n
-1];

297 
	mT
& 
back
()

299 
as£π
(
d©a
 && 
n
>0);

300  
	md©a
[
n
-1];

303 c⁄° 
T
* 
begö
() const

304 {  
	md©a
; }

306 
T
* 
begö
()

307 {  
	md©a
; }

309 
ˇ∑côy
() const

310 {  
	mmax_n
; }

312 
˛ór
()

314 
	m°d
::
‰ì
(
d©a
);

315 
	md©a
=0;

316 
	mmax_n
=0;

317 
	mn
=0;

320 
boﬁ
 
em±y
() const

321 {  
	mn
==0; }

323 c⁄° 
T
* 
íd
() const

324 {  
	md©a
+
	mn
; }

326 
T
* 
íd
()

327 {  
	md©a
+
	mn
; }

329 
îa£
(
ödex
)

331 
as£π
(
ödex
<
n
);

332 
	mi
=
ödex
; i<
	mn
-1; ++i)

333 
	md©a
[
i
]=
d©a
[i-1];

334 
p›_back
();

337 
fûl
(
num
, c⁄° 
T
& 
vÆue
)

339 if(
	mnum
>
	mmax_n
){

340 if(
	mnum
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

341 
	m°d
::
‰ì
(
d©a
);

342 
	md©a
=(
T
*)
°d
::
mÆloc
(
num
*(T));

343 if(!
	md©a
Ë
throw
 
	m°d
::
bad_Æloc
();

344 
	mmax_n
=
num
;

346 
	mn
=
num
;

347 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
;

350 c⁄° 
	mT
& 
‰⁄t
() const

352 
as£π
(
n
>0);

353  *
	md©a
;

356 
	mT
& 
‰⁄t
()

358 
as£π
(
n
>0);

359  *
	md©a
;

362 
grow
()

364 
	m√w_size
=(
max_n
*(
T
)<
ULONG_MAX
/2 ? 2*max_n+1 : ULONG_MAX/(T));

365 
T
 *
	m√w_d©a
=(T*)
°d
::
ªÆloc
(
d©a
, 
√w_size
*(T));

366 if(!
	m√w_d©a
Ë
throw
 
	m°d
::
bad_Æloc
();

367 
	md©a
=
√w_d©a
;

368 
	mmax_n
=
√w_size
;

371 
ö£π
(
ödex
, c⁄° 
T
& 
íåy
)

373 
as£π
(
ödex
<=
n
);

374 
push_back
(
back
());

375 
	mi
=
n
-1; i>
	mödex
; --i)

376 
	md©a
[
i
]=
d©a
[i-1];

377 
	md©a
[
ödex
]=
íåy
;

380 
max_size
() const

381 {  
	mULONG_MAX
/(
	mT
); }

383 
p›_back
()

385 
as£π
(
n
>0);

386 --
	mn
;

389 
push_back
(c⁄° 
T
& 
vÆue
)

391 if(
	mn
==
max_n
Ë
grow
();

392 
	md©a
[
n
++]=
vÆue
;

395 
ªvî£_ôî©‹
 
rbegö
()

396 {  
ªvî£_ôî©‹
(
íd
()); }

398 
c⁄°_ªvî£_ôî©‹
 
rbegö
() const

399 {  
c⁄°_ªvî£_ôî©‹
(
íd
()); }

401 
ªvî£_ôî©‹
 
ªnd
()

402 {  
ªvî£_ôî©‹
(
begö
()); }

404 
c⁄°_ªvî£_ôî©‹
 
ªnd
() const

405 {  
c⁄°_ªvî£_ôî©‹
(
begö
()); }

407 
ª£rve
(
r
)

409 if(
	mr
>
	mULONG_MAX
/(
	mT
)Ë
throw
 
	m°d
::
bad_Æloc
();

410 
T
 *
	m√w_d©a
=(T*)
°d
::
ªÆloc
(
d©a
, 
r
*(T));

411 if(!
	m√w_d©a
Ë
throw
 
	m°d
::
bad_Æloc
();

412 
	md©a
=
√w_d©a
;

413 
	mmax_n
=
r
;

416 
ªsize
(
n_
)

418 if(
	mn_
>
	mmax_n
Ë
ª£rve
(
n_
);

419 
	mn
=
n_
;

422 
ªsize
(
n_
, c⁄° 
T
& 
vÆue
)

424 if(
	mn_
>
	mmax_n
Ë
ª£rve
(
n_
);

425 if(
	mn
<
	mn_
Ë
	mi
=
n
; i<n_; ++iË
	md©a
[
i
]=
vÆue
;

426 
	mn
=
n_
;

429 
£t_zîo
()

430 { 
	m°d
::
mem£t
(
d©a
, 0, 
n
*(
T
)); }

432 
size
() const

433 {  
	mn
; }

435 
sw≠
(
Aºay1
<
T
>& 
x
)

437 
	m°d
::
sw≠
(
n
, 
x
.n);

438 
	m°d
::
sw≠
(
max_n
, 
x
.max_n);

439 
	m°d
::
sw≠
(
d©a
, 
x
.data);

444 
åim
()

446 if(
	mn
==
max_n
) ;

447 
T
 *
	m√w_d©a
=(T*)
°d
::
mÆloc
(
n
*(T));

448 if(!
	m√w_d©a
) ;

449 
	m°d
::
mem˝y
(
√w_d©a
, 
d©a
, 
n
*(
T
));

450 
	m°d
::
‰ì
(
d©a
);

451 
	md©a
=
√w_d©a
;

452 
	mmax_n
=
n
;

458 
	gAºay1
<> 
	tAºay1d
;

459 
	gAºay1
<> 
	tAºay1f
;

462 
	gAºay1
<> 
	tAºay1i
;

463 
	gAºay1
<> 
	tAºay1ui
;

464 
	gAºay1
<> 
	tAºay1s
;

465 
	gAºay1
<> 
	tAºay1us
;

466 
	gAºay1
<> 
	tAºay1c
;

467 
	gAºay1
<> 
	tAºay1uc
;

470 
	gãm∂©e
<
ty≥«me
 
	gT
>

471 
	sWøpAºay1


475 
T
* 
	tôî©‹
;

476 c⁄° 
	tT
* 
	tc⁄°_ôî©‹
;

477 
	tsize_ty≥
;

478 
	tdif„ªn˚_ty≥
;

479 
	mT
& 
	tª„ªn˚
;

480 c⁄° 
	tT
& 
	tc⁄°_ª„ªn˚
;

481 
T
 
	tvÆue_ty≥
;

482 
T
* 
	tpoöãr
;

483 c⁄° 
	tT
* 
	tc⁄°_poöãr
;

484 
	m°d
::
	tªvî£_ôî©‹
<
	tôî©‹
>Ñeverse_iterator;

485 
	m°d
::
	tªvî£_ôî©‹
<
	tc⁄°_ôî©‹
> 
	tc⁄°_ªvî£_ôî©‹
;

489 
	mn
;

490 
	mmax_n
;

491 
T
* 
	md©a
;

495 
WøpAºay1
()

496 : 
n
(0), 
max_n
(0), 
d©a
(0)

499 
WøpAºay1
(
n_
, 
T
* 
d©a_
)

500 : 
n
(
n_
), 
max_n
“_), 
d©a
(
d©a_
)

501 { 
as£π
(
d©a
 || 
max_n
==0); }

503 
WøpAºay1
(
n_
, 
T
* 
d©a_
, 
max_n_
)

504 : 
n
(
n_
), 
max_n
(
max_n_
), 
d©a
(
d©a_
)

506 
as£π
(
n
<=
max_n
);

507 
as£π
(
d©a
 || 
max_n
==0);

513 
WøpAºay1
(
Aºay1
<
T
>& 
a
)

514 : 
n
(
a
.n), 
max_n
◊.max_n), 
d©a
(a.data)

517 
WøpAºay1
(
°d
::
ve˘‹
<
T
>& 
a
)

518 : 
n
(
a
.
size
()), 
max_n
◊.
ˇ∑côy
()), 
d©a
(&a[0])

521 
öô
(
n_
, 
T
* 
d©a_
, 
max_n_
)

523 
as£π
(
n_
<=
max_n_
);

524 
as£π
(
d©a_
 || 
max_n_
==0);

525 
	mn
=
n_
;

526 
	mmax_n
=
max_n_
;

527 
	md©a
=
d©a_
;

530 c⁄° 
	mT
& 
	m›î©‹
[](
	mi
) const

531 {  
	md©a
[
i
]; }

533 
	mT
& 
	m›î©‹
[](
	mi
)

534 {  
	md©a
[
i
]; }

537 c⁄° 
	mT
& 
›î©‹
()(
	mi
) const

539 
as£π
(
i
<
n
);

540  
	md©a
[
i
];

543 
	mT
& 
›î©‹
()(
	mi
)

545 
as£π
(
i
<
n
);

546  
	md©a
[
i
];

549 
boﬁ
 
	m›î©‹
==(c⁄° 
WøpAºay1
<
T
>& 
x
) const

551 if(
n
!=
x
.nË 
Ál£
;

552 
	mi
=0; i<
	mn
; ++iËif(!(
	md©a
[
i
]==
x
.
d©a
[i])Ë 
Ál£
;

553  
	måue
;

556 
boﬁ
 
	m›î©‹
!=(c⁄° 
WøpAºay1
<
T
>& 
x
) const

558 if(
n
!=
x
.nË 
åue
;

559 
	mi
=0; i<
	mn
; ++iËif(
	md©a
[
i
]!=
x
.
d©a
[i]Ë 
åue
;

560  
	mÁl£
;

563 
boﬁ
 
	m›î©‹
<(c⁄° 
	mWøpAºay1
<
	mT
>& 
	mx
) const

565 
	mi
=0; i<
	mn
 && i<
	mx
.n; ++i){

566 if(
	md©a
[
i
]<
	mx
[i]Ë 
	måue
;

567 if(
	mx
[
i
]<
	md©a
[i]Ë 
	mÁl£
;

569  
	mn
<
	mx
.n;

572 
boﬁ
 
	m›î©‹
>(c⁄° 
	mWøpAºay1
<
	mT
>& 
	mx
) const

574 
	mi
=0; i<
	mn
 && i<
	mx
.n; ++i){

575 if(
	md©a
[
i
]>
	mx
[i]Ë 
	måue
;

576 if(
	mx
[
i
]>
	md©a
[i]Ë 
	mÁl£
;

578  
	mn
>
	mx
.n;

581 
boﬁ
 
	m›î©‹
<=(c⁄° 
WøpAºay1
<
T
>& 
x
) const

583 
i
=0; 
	mi
<
	mn
 && i<
	mx
.n; ++i){

584 if(
	md©a
[
i
]<
	mx
[i]Ë 
	måue
;

585 if(
	mx
[
i
]<
	md©a
[i]Ë 
	mÁl£
;

587  
	mn
<=
x
.
n
;

590 
boﬁ
 
	m›î©‹
>=(c⁄° 
WøpAºay1
<
T
>& 
x
) const

592 
i
=0; 
	mi
<
	mn
 && i<
	mx
.n; ++i){

593 if(
	md©a
[
i
]>
	mx
[i]Ë 
	måue
;

594 if(
	mx
[
i
]>
	md©a
[i]Ë 
	mÁl£
;

596  
	mn
>=
x
.
n
;

599 
add_unique
(c⁄° 
T
& 
vÆue
)

601 
	mi
=0; i<
	mn
; ++iËif(
	md©a
[
i
]==
vÆue
) ;

602 
as£π
(
n
<
max_n
);

603 
	md©a
[
n
++]=
vÆue
;

606 
assign
(c⁄° 
T
& 
vÆue
)

607 { 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
; }

609 
assign
(
num
, c⁄° 
T
& 
vÆue
)

610 { 
fûl
(
num
, 
vÆue
); }

614 
assign
(
num
, c⁄° 
T
* 
c›yd©a
)

616 
as£π
(
num
==0 || 
c›yd©a
);

617 
as£π
(
num
<=
max_n
);

618 
	mn
=
num
;

619 
	m°d
::
mem˝y
(
d©a
, 
c›yd©a
, 
n
*(
T
));

622 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

623 
assign
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
)

624 { 
assign_
(
fú°
, 
œ°
, 
ty≥«me
 
Aºay1IsI¡egøl
<
I≈utIãøt‹
>::
ty≥
()); }

626 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

627 
assign_
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
, 
Aºay1True
 )

628 { 
fûl
(
fú°
, 
œ°
); }

630 
	mãm∂©e
<
ty≥«me
 
	mI≈utIãøt‹
>

631 
assign_
(
I≈utIãøt‹
 
fú°
, I≈utIãøt‹ 
œ°
, 
Aºay1FÆ£
 )

633 
	mi
=0;

634 
I≈utIãøt‹
 
	mp
=
fú°
;

635 ; 
	mp
!=
œ°
; ++p, ++
	mi
){

636 
as£π
(
i
<
max_n
);

637 
	md©a
[
i
]=*
p
;

639 
	mn
=
i
;

642 c⁄° 
	mT
& 
©
(
i
) const

644 
as£π
(
i
<
n
);

645  
	md©a
[
i
];

648 
	mT
& 
©
(
i
)

650 
as£π
(
i
<
n
);

651  
	md©a
[
i
];

654 c⁄° 
	mT
& 
back
() const

656 
as£π
(
d©a
 && 
n
>0);

657  
	md©a
[
n
-1];

660 
	mT
& 
back
()

662 
as£π
(
d©a
 && 
n
>0);

663  
	md©a
[
n
-1];

666 c⁄° 
T
* 
begö
() const

667 {  
	md©a
; }

669 
T
* 
begö
()

670 {  
	md©a
; }

672 
ˇ∑côy
() const

673 {  
	mmax_n
; }

675 
˛ór
()

676 { 
	mn
=0; }

678 
boﬁ
 
em±y
() const

679 {  
	mn
==0; }

681 c⁄° 
T
* 
íd
() const

682 {  
	md©a
+
	mn
; }

684 
T
* 
íd
()

685 {  
	md©a
+
	mn
; }

687 
îa£
(
ödex
)

689 
as£π
(
ödex
<
n
);

690 
	mi
=
ödex
; i<
	mn
-1; ++i)

691 
	md©a
[
i
]=
d©a
[i-1];

692 
p›_back
();

695 
fûl
(
num
, c⁄° 
T
& 
vÆue
)

697 
as£π
(
num
<=
max_n
);

698 
	mn
=
num
;

699 
	mi
=0; i<
	mn
; ++iË
	md©a
[
i
]=
vÆue
;

702 c⁄° 
	mT
& 
‰⁄t
() const

704 
as£π
(
n
>0);

705  *
	md©a
;

708 
	mT
& 
‰⁄t
()

710 
as£π
(
n
>0);

711  *
	md©a
;

714 
ö£π
(
ödex
, c⁄° 
T
& 
íåy
)

716 
as£π
(
ödex
<=
n
);

717 
push_back
(
back
());

718 
	mi
=
n
-1; i>
	mödex
; --i)

719 
	md©a
[
i
]=
d©a
[i-1];

720 
	md©a
[
ödex
]=
íåy
;

723 
max_size
() const

724 {  
	mmax_n
; }

726 
p›_back
()

728 
as£π
(
n
>0);

729 --
	mn
;

732 
push_back
(c⁄° 
T
& 
vÆue
)

734 
as£π
(
n
<
max_n
);

735 
	md©a
[
n
++]=
vÆue
;

738 
ªvî£_ôî©‹
 
rbegö
()

739 {  
ªvî£_ôî©‹
(
íd
()); }

741 
c⁄°_ªvî£_ôî©‹
 
rbegö
() const

742 {  
c⁄°_ªvî£_ôî©‹
(
íd
()); }

744 
ªvî£_ôî©‹
 
ªnd
()

745 {  
ªvî£_ôî©‹
(
begö
()); }

747 
c⁄°_ªvî£_ôî©‹
 
ªnd
() const

748 {  
c⁄°_ªvî£_ôî©‹
(
begö
()); }

750 
ª£rve
(
r
)

751 { 
as£π
(
r
<=
max_n
); }

753 
ªsize
(
n_
)

755 
as£π
(
n_
<=
max_n
);

756 
	mn
=
n_
;

759 
ªsize
(
n_
, c⁄° 
T
& 
vÆue
)

761 
as£π
(
n_
<=
max_n
);

762 if(
	mn
<
	mn_
Ë
	mi
=
n
; i<n_; ++iË
	md©a
[
i
]=
vÆue
;

763 
	mn
=
n_
;

767 
£t_zîo
()

768 { 
	m°d
::
mem£t
(
d©a
, 0, 
n
*(
T
)); }

770 
size
() const

771 {  
	mn
; }

773 
sw≠
(
WøpAºay1
<
T
>& 
x
)

775 
	m°d
::
sw≠
(
n
, 
x
.n);

776 
	m°d
::
sw≠
(
max_n
, 
x
.max_n);

777 
	m°d
::
sw≠
(
d©a
, 
x
.data);

783 
	gWøpAºay1
<> 
	tWøpAºay1d
;

784 
	gWøpAºay1
<> 
	tWøpAºay1f
;

787 
	gWøpAºay1
<> 
	tWøpAºay1i
;

788 
	gWøpAºay1
<> 
	tWøpAºay1ui
;

789 
	gWøpAºay1
<> 
	tWøpAºay1s
;

790 
	gWøpAºay1
<> 
	tWøpAºay1us
;

791 
	gWøpAºay1
<> 
	tWøpAºay1c
;

792 
	gWøpAºay1
<> 
	tWøpAºay1uc
;

	@common/array2.h

1 #i‚de‡
ARRAY2_H


2 
	#ARRAY2_H


	)

4 
	~<Æg‹ôhm
>

5 
	~<¨øy1.h
>

6 
	~<ˇs£π
>

7 
	~<ve˘‹
>

9 
	gãm∂©e
<
˛ass
 
	gT
, cœs†
	gAºayT
=
°d
::
ve˘‹
<
T
> >

10 
	sAºay2


14 
ty≥«me
 
	tAºayT
::
	tôî©‹
 iterator;

15 
ty≥«me
 
	tAºayT
::
	tc⁄°_ôî©‹
 const_iterator;

16 
ty≥«me
 
	tAºayT
::
	tsize_ty≥
 size_type;

17 
	tdif„ªn˚_ty≥
;

18 
	mT
& 
	tª„ªn˚
;

19 c⁄° 
	tT
& 
	tc⁄°_ª„ªn˚
;

20 
T
 
	tvÆue_ty≥
;

21 
T
* 
	tpoöãr
;

22 c⁄° 
	tT
* 
	tc⁄°_poöãr
;

23 
ty≥«me
 
	tAºayT
::
	tªvî£_ôî©‹
Ñeverse_iterator;

24 
ty≥«me
 
	tAºayT
::
	tc⁄°_ªvî£_ôî©‹
 const_reverse_iterator;

28 
±rdiff_t
 
	mni
, 
	mnj
;

29 
AºayT
 
	ma
;

33 
Aºay2
()

34 : 
ni
(0), 
nj
(0), 
a
(0)

37 
Aºay2
(
ni_
, 
nj_
)

38 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
(ni_*nj_)

39 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

41 
Aºay2
(
ni_
, 
nj_
, 
AºayT
& 
a_
)

42 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
(
a_
)

43 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

45 
Aºay2
(
ni_
, 
nj_
, c⁄° 
T
& 
vÆue
)

46 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
“i_*nj_, 
vÆue
)

47 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

49 
Aºay2
(
ni_
, 
nj_
, c⁄° 
T
& 
vÆue
, 
size_ty≥
 
max_n_
)

50 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
“i_*nj_, 
vÆue
, 
max_n_
)

51 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

53 
Aºay2
(
ni_
, 
nj_
, 
T
* 
d©a_
)

54 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
“i_*nj_, 
d©a_
)

55 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

57 
Aºay2
(
ni_
, 
nj_
, 
T
* 
d©a_
, 
size_ty≥
 
max_n_
)

58 : 
ni
(
ni_
), 
nj
(
nj_
), 
a
“i_*nj_, 
d©a_
, 
max_n_
)

59 { 
as£π
(
ni_
>=0 && 
nj
>=0); }

61 
	mãm∂©e
<
˛ass
 
	mOthîAºayT
>

62 
Aºay2
(Aºay2<
T
, 
OthîAºayT
>& 
Ÿhî
)

63 : 
ni
(
Ÿhî
.ni), 
nj
(Ÿhî.nj), 
a
(other.a)

66 ~
Aºay2
()

68 #i‚de‡
NDEBUG


69 
	mni
=
nj
=0;

85 c⁄° 
	mT
& 
›î©‹
()(
±rdiff_t
 
	mi
,Öådiff_à
	mj
) const

87 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
);

88  
	ma
[
i
+
ni
*
j
];

91 
	mT
& 
›î©‹
()(
±rdiff_t
 
	mi
,Öådiff_à
	mj
)

93 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
);

94  
	ma
[
i
+
ni
*
j
];

97 
boﬁ
 
	m›î©‹
==(c⁄° 
Aºay2
<
T
>& 
x
) const

98 {  
ni
==
x
.nò&& 
nj
==x.nj && 
a
==x.a; }

100 
boﬁ
 
	m›î©‹
!=(c⁄° 
Aºay2
<
T
>& 
x
) const

101 {  
ni
!=
x
.nò|| 
nj
!=x.nj || 
a
!=x.a; }

103 
boﬁ
 
	m›î©‹
<(c⁄° 
	mAºay2
<
	mT
>& 
	mx
) const

105 if(
	mni
<
	mx
.niË 
	måue
; if“i>x.niË 
	mÁl£
;

106 if(
	mnj
<
	mx
.njË 
	måue
; if“j>x.njË 
	mÁl£
;

107  
	ma
<
	mx
.a;

110 
boﬁ
 
	m›î©‹
>(c⁄° 
	mAºay2
<
	mT
>& 
	mx
) const

112 if(
	mni
>
	mx
.niË 
	måue
; if“i<x.niË 
	mÁl£
;

113 if(
	mnj
>
	mx
.njË 
	måue
; if“j<x.njË 
	mÁl£
;

114  
	ma
>
	mx
.a;

117 
boﬁ
 
	m›î©‹
<=(c⁄° 
Aºay2
<
T
>& 
x
) const

119 if(
ni
<
x
.niË 
åue
; if(
	mni
>
	mx
.niË 
	mÁl£
;

120 if(
	mnj
<
	mx
.njË 
	måue
; if“j>x.njË 
	mÁl£
;

121  
	ma
<=
x
.
a
;

124 
boﬁ
 
	m›î©‹
>=(c⁄° 
Aºay2
<
T
>& 
x
) const

126 if(
ni
>
x
.niË 
åue
; if(
	mni
<
	mx
.niË 
	mÁl£
;

127 if(
	mnj
>
	mx
.njË 
	måue
; if“j<x.njË 
	mÁl£
;

128  
	ma
>=
x
.
a
;

131 
assign
(c⁄° 
T
& 
vÆue
)

132 { 
	ma
.
assign
(
vÆue
); }

134 
assign
(
ni_
, 
nj_
, c⁄° 
T
& 
vÆue
)

136 
	ma
.
assign
(
ni_
*
nj_
, 
vÆue
);

137 
	mni
=
ni_
;

138 
	mnj
=
nj_
;

141 
assign
(
ni_
, 
nj_
, c⁄° 
T
* 
c›yd©a
)

143 
	ma
.
assign
(
ni_
*
nj_
, 
c›yd©a
);

144 
	mni
=
ni_
;

145 
	mnj
=
nj_
;

148 c⁄° 
	mT
& 
©
(
i
, 
j
) const

150 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
);

151  
	ma
[
i
+
ni
*
j
];

154 
	mT
& 
©
(
i
, 
j
)

156 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
);

157  
	ma
[
i
+
ni
*
j
];

160 c⁄° 
	mT
& 
back
() const

162 
as£π
(
a
.
size
());

163  
	ma
.
back
();

166 
	mT
& 
back
()

168 
as£π
(
a
.
size
());

169  
	ma
.
back
();

172 
c⁄°_ôî©‹
 
begö
() const

173 {  
	ma
.
begö
(); }

175 
ôî©‹
 
begö
()

176 {  
	ma
.
begö
(); }

178 
size_ty≥
 
ˇ∑côy
() const

179 {  
	ma
.
ˇ∑côy
(); }

181 
˛ór
()

183 
	ma
.
˛ór
();

184 
	mni
=
nj
=0;

187 
boﬁ
 
em±y
() const

188 {  
	ma
.
em±y
(); }

190 
c⁄°_ôî©‹
 
íd
() const

191 {  
	ma
.
íd
(); }

193 
ôî©‹
 
íd
()

194 {  
	ma
.
íd
(); }

196 
fûl
(
ni_
, 
nj_
, c⁄° 
T
& 
vÆue
)

198 
	ma
.
fûl
(
ni_
*
nj_
, 
vÆue
);

199 
	mni
=
ni_
;

200 
	mnj
=
nj_
;

203 c⁄° 
	mT
& 
‰⁄t
() const

205 
as£π
(
a
.
size
());

206  
	ma
.
‰⁄t
();

209 
	mT
& 
‰⁄t
()

211 
as£π
(
a
.
size
());

212  
	ma
.
‰⁄t
();

215 
size_ty≥
 
max_size
() const

216 {  
	ma
.
max_size
(); }

218 
ªvî£_ôî©‹
 
rbegö
()

219 {  
ªvî£_ôî©‹
(
íd
()); }

221 
c⁄°_ªvî£_ôî©‹
 
rbegö
() const

222 {  
c⁄°_ªvî£_ôî©‹
(
íd
()); }

224 
ªvî£_ôî©‹
 
ªnd
()

225 {  
ªvî£_ôî©‹
(
begö
()); }

227 
c⁄°_ªvî£_ôî©‹
 
ªnd
() const

228 {  
c⁄°_ªvî£_ôî©‹
(
begö
()); }

230 
ª£rve
(
ª£rve_ni
, 
ª£rve_nj
)

231 { 
	ma
.
ª£rve
(
ª£rve_ni
*
ª£rve_nj
); }

233 
ªsize
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
)

235 
as£π
(
ni_
>=0 && 
nj_
>=0);

236 
	ma
.
ªsize
(
ni_
*
nj_
);

237 
	mni
=
ni_
;

238 
	mnj
=
nj_
;

241 
ªsize
(
size_t
 
ni_
, size_à
nj_
, c⁄° 
T
& 
vÆue
)

243 
as£π
(
ni_
>=0 && 
nj_
>=0);

244 
	ma
.
ªsize
(
ni_
*
nj_
, 
vÆue
);

245 
	mni
=
ni_
;

246 
	mnj
=
nj_
;

249 
£t_zîo
()

250 { 
	ma
.
£t_zîo
(); }

252 
size_ty≥
 
size
() const

253 {  
	ma
.
size
(); }

255 
sw≠
(
Aºay2
<
T
>& 
x
)

257 
	m°d
::
sw≠
(
ni
, 
x
.ni);

258 
	m°d
::
sw≠
(
nj
, 
x
.nj);

259 
	ma
.
sw≠
(
x
.
a
);

262 
åim
()

263 { 
	ma
.
åim
(); }

266 
sub2öd
–
i
, 
j
 )

268  
	mi
+
ni
*
	mj
;

271 
öd2sub
–
sub
, & 
i
, &
j
 )

273 
	mj
 = 
sub
 / 
ni
;

274 
	mi
 = 
sub
 - 
ni
 * 
j
;

281 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2d
;

282 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2f
;

285 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2i
;

286 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2ui
;

287 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2s
;

288 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2us
;

289 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2c
;

290 
	gAºay2
<, 
	tAºay1
<> > 
	tAºay2uc
;

294 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2d
;

295 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2f
;

298 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2i
;

299 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2ui
;

300 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2s
;

301 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2us
;

302 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2c
;

303 
	gAºay2
<, 
	tWøpAºay1
<> > 
	tWøpAºay2uc
;

	@common/array2_utils.h

1 #i‚de‡
ARRAY2_UTILS_H


2 
	#ARRAY2_UTILS_H


	)

4 
	~<vec.h
>

5 
	~<¨øy2.h
>

6 
	~<utû.h
>

8 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

9 
T
 
öãΩﬁ©e_vÆue
(c⁄° 
Vec
<2,
S
>& 
poöt
, c⁄° 
Aºay2
<T, 
Aºay1
<T> >& 
grid
) {

10 
±rdiff_t
 
	gi
,
	gj
;

11 
S
 
	gfx
,
	gfy
;

13 
gë_b¨y˚¡ric
(
poöt
[0], 
i
, 
fx
, 0, 
grid
.
ni
);

14 
gë_b¨y˚¡ric
(
poöt
[1], 
j
, 
fy
, 0, 
grid
.
nj
);

16  
bûîp
(

17 
grid
(
i
,
j
), grid(i+1,j),

18 
grid
(
i
,
j
+1), grid(i+1,j+1),

19 
fx
, 
fy
);

22 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

23 
öãΩﬁ©e_gødõ¡
(
Vec
<2,
T
>& 
gødõ¡
, c⁄° Vec<2,
S
>& 
poöt
, c⁄° 
Aºay2
<T, 
Aºay1
<T> >& 
grid
) {

24 
±rdiff_t
 
	gi
,
	gj
;

25 
S
 
	gfx
,
	gfy
;

26 
gë_b¨y˚¡ric
(
poöt
[0], 
i
, 
fx
, 0, 
grid
.
ni
);

27 
gë_b¨y˚¡ric
(
poöt
[1], 
j
, 
fy
, 0, 
grid
.
nj
);

29 
T
 
	gv00
 = 
grid
(
i
,
j
);

30 
T
 
	gv01
 = 
grid
(
i
,
j
+1);

31 
T
 
	gv10
 = 
grid
(
i
+1,
j
);

32 
T
 
	gv11
 = 
grid
(
i
+1,
j
+1);

34 
T
 
	gddy0
 = (
v01
 - 
v00
);

35 
T
 
	gddy1
 = (
v11
 - 
v10
);

37 
T
 
	gddx0
 = (
v10
 - 
v00
);

38 
T
 
	gddx1
 = (
v11
 - 
v01
);

40 
	ggødõ¡
[0] = 
ÀΩ
(
ddx0
,
ddx1
,
fy
);

41 
	ggødõ¡
[1] = 
ÀΩ
(
ddy0
,
ddy1
,
fx
);

44  
bûîp
(
v00
, 
v10
, 
v01
, 
v11
, 
fx
, 
fy
);

47 
	gãm∂©e
<
˛ass
 
	gT
>

48 
wrôe_m©œb_¨øy
(
°d
::
o°ªam
 &
ouçut
, 
Aºay2
<
T
, 
Aºay1
<T> >&
a
, c⁄° *
v¨übÀ_«me
, 
boﬁ
 
å™•o£
=
Ál£
)

50 
ouçut
<<
v¨übÀ_«me
<<"=[";

51 
	gj
 = 0; j < 
	ga
.
	gnj
; ++j) {

52 
	gi
 = 0; i < 
	ga
.
	gni
; ++i) {

53 
	gouçut
<<
a
(
i
,
j
)<<" ";

55 
	gouçut
<<";";

57 
	gouçut
<<"]";

58 if(
	gå™•o£
)

59 
	gouçut
<<"'";

60 
	gouçut
<<";"<<
	g°d
::
ídl
;

	@common/array3.h

1 #i‚de‡
ARRAY3_H


2 
	#ARRAY3_H


	)

4 
	~<Æg‹ôhm
>

5 
	~<¨øy1.h
>

6 
	~<ˇs£π
>

7 
	~<ve˘‹
>

8 
	~<c°ddef
>

10 
	gãm∂©e
<
˛ass
 
	gT
, cœs†
	gAºayT
=
°d
::
ve˘‹
<
T
> >

11 
	sAºay3


15 
ty≥«me
 
	tAºayT
::
	tôî©‹
 iterator;

16 
ty≥«me
 
	tAºayT
::
	tc⁄°_ôî©‹
 const_iterator;

17 
ty≥«me
 
	tAºayT
::
	tsize_ty≥
 size_type;

18 
	tdif„ªn˚_ty≥
;

19 
	mT
& 
	tª„ªn˚
;

20 c⁄° 
	tT
& 
	tc⁄°_ª„ªn˚
;

21 
T
 
	tvÆue_ty≥
;

22 
T
* 
	tpoöãr
;

23 c⁄° 
	tT
* 
	tc⁄°_poöãr
;

24 
ty≥«me
 
	tAºayT
::
	tªvî£_ôî©‹
Ñeverse_iterator;

25 
ty≥«me
 
	tAºayT
::
	tc⁄°_ªvî£_ôî©‹
 const_reverse_iterator;

29 
±rdiff_t
 
	mni
, 
	mnj
, 
	mnk
;

30 
AºayT
 
	ma
;

34 
Aºay3
()

35 : 
ni
(0), 
nj
(0), 
nk
(0), 
a
(0)

38 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
)

39 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
(ni_*nj_*nk_)

40 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

42 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, 
AºayT
& 
a_
)

43 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
(
a_
)

44 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

46 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, c⁄° 
T
& 
vÆue
)

47 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
“i_*nj_*nk_, 
vÆue
)

48 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

50 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, c⁄° 
T
& 
vÆue
, 
size_ty≥
 
max_n_
)

51 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
“i_*nj_*nk_, 
vÆue
, 
max_n_
)

52 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

54 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, 
T
* 
d©a_
)

55 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
“i_*nj_*nk_, 
d©a_
)

56 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

58 
Aºay3
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, 
T
* 
d©a_
, 
size_ty≥
 
max_n_
)

59 : 
ni
(
ni_
), 
nj
(
nj_
), 
nk
(
nk_
), 
a
“i_*nj_*nk_, 
d©a_
, 
max_n_
)

60 { 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0); }

62 ~
Aºay3
()

64 #i‚de‡
NDEBUG


65 
	mni
=
nj
=0;

81 c⁄° 
	mT
& 
›î©‹
()(
±rdiff_t
 
	mi
,Öådiff_à
	mj
,Öådiff_à
	mk
) const

83 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
 && 
k
>=0 && k<
nk
);

84  
	ma
[
i
+
ni
*(
j
+
nj
*
k
)];

87 
	mT
& 
›î©‹
()(
±rdiff_t
 
	mi
,Öådiff_à
	mj
,Öådiff_à
	mk
)

89 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
 && 
k
>=0 && k<
nk
);

90  
	ma
[
i
+
ni
*(
j
+
nj
*
k
)];

93 
boﬁ
 
	m›î©‹
==(c⁄° 
Aºay3
<
T
>& 
x
) const

94 {  
ni
==
x
.nò&& 
nj
==x.nj && 
nk
==x.nk && 
a
==x.a; }

96 
boﬁ
 
	m›î©‹
!=(c⁄° 
Aºay3
<
T
>& 
x
) const

97 {  
ni
!=
x
.nò|| 
nj
!=x.nj || 
nk
!=x.nk || 
a
!=x.a; }

99 
boﬁ
 
	m›î©‹
<(c⁄° 
	mAºay3
<
	mT
>& 
	mx
) const

101 if(
	mni
<
	mx
.niË 
	måue
; if“i>x.niË 
	mÁl£
;

102 if(
	mnj
<
	mx
.njË 
	måue
; if“j>x.njË 
	mÁl£
;

103 if(
	mnk
<
	mx
.nkË 
	måue
; if“k>x.nkË 
	mÁl£
;

104  
	ma
<
	mx
.a;

107 
boﬁ
 
	m›î©‹
>(c⁄° 
	mAºay3
<
	mT
>& 
	mx
) const

109 if(
	mni
>
	mx
.niË 
	måue
; if“i<x.niË 
	mÁl£
;

110 if(
	mnj
>
	mx
.njË 
	måue
; if“j<x.njË 
	mÁl£
;

111 if(
	mnk
>
	mx
.nkË 
	måue
; if“k<x.nkË 
	mÁl£
;

112  
	ma
>
	mx
.a;

115 
boﬁ
 
	m›î©‹
<=(c⁄° 
Aºay3
<
T
>& 
x
) const

117 if(
ni
<
x
.niË 
åue
; if(
	mni
>
	mx
.niË 
	mÁl£
;

118 if(
	mnj
<
	mx
.njË 
	måue
; if“j>x.njË 
	mÁl£
;

119 if(
	mnk
<
	mx
.nkË 
	måue
; if“k>x.nkË 
	mÁl£
;

120  
	ma
<=
x
.
a
;

123 
boﬁ
 
	m›î©‹
>=(c⁄° 
Aºay3
<
T
>& 
x
) const

125 if(
ni
>
x
.niË 
åue
; if(
	mni
<
	mx
.niË 
	mÁl£
;

126 if(
	mnj
>
	mx
.njË 
	måue
; if“j<x.njË 
	mÁl£
;

127 if(
	mnk
>
	mx
.nkË 
	måue
; if“k<x.nkË 
	mÁl£
;

128  
	ma
>=
x
.
a
;

131 
assign
(c⁄° 
T
& 
vÆue
)

132 { 
	ma
.
assign
(
vÆue
); }

134 
assign
(
ni_
, 
nj_
, 
nk_
, c⁄° 
T
& 
vÆue
)

136 
	ma
.
assign
(
ni_
*
nj_
*
nk_
, 
vÆue
);

137 
	mni
=
ni_
;

138 
	mnj
=
nj_
;

139 
	mnk
=
nk_
;

142 
assign
(
ni_
, 
nj_
, 
nk_
, c⁄° 
T
* 
c›yd©a
)

144 
	ma
.
assign
(
ni_
*
nj_
*
nk_
, 
c›yd©a
);

145 
	mni
=
ni_
;

146 
	mnj
=
nj_
;

147 
	mnk
=
nk_
;

150 c⁄° 
	mT
& 
©
(
i
, 
j
, 
k
) const

152 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
 && 
k
>=0 && k<
nk
);

153  
	ma
[
i
+
ni
*(
j
+
nj
*
k
)];

156 
	mT
& 
©
(
i
, 
j
, 
k
)

158 
as£π
(
i
>=0 && i<
ni
 && 
j
>=0 && j<
nj
 && 
k
>=0 && k<
nk
);

159  
	ma
[
i
+
ni
*(
j
+
nj
*
k
)];

162 c⁄° 
	mT
& 
back
() const

164 
as£π
(
a
.
size
());

165  
	ma
.
back
();

168 
	mT
& 
back
()

170 
as£π
(
a
.
size
());

171  
	ma
.
back
();

174 
c⁄°_ôî©‹
 
begö
() const

175 {  
	ma
.
begö
(); }

177 
ôî©‹
 
begö
()

178 {  
	ma
.
begö
(); }

180 
size_ty≥
 
ˇ∑côy
() const

181 {  
	ma
.
ˇ∑côy
(); }

183 
˛ór
()

185 
	ma
.
˛ór
();

186 
	mni
=
nj
=
nk
=0;

189 
boﬁ
 
em±y
() const

190 {  
	ma
.
em±y
(); }

192 
c⁄°_ôî©‹
 
íd
() const

193 {  
	ma
.
íd
(); }

195 
ôî©‹
 
íd
()

196 {  
	ma
.
íd
(); }

198 
fûl
(
ni_
, 
nj_
, 
nk_
, c⁄° 
T
& 
vÆue
)

200 
	ma
.
fûl
(
ni_
*
nj_
*
nk_
, 
vÆue
);

201 
	mni
=
ni_
;

202 
	mnj
=
nj_
;

203 
	mnk
=
nk_
;

206 c⁄° 
	mT
& 
‰⁄t
() const

208 
as£π
(
a
.
size
());

209  
	ma
.
‰⁄t
();

212 
	mT
& 
‰⁄t
()

214 
as£π
(
a
.
size
());

215  
	ma
.
‰⁄t
();

218 
size_ty≥
 
max_size
() const

219 {  
	ma
.
max_size
(); }

221 
ªvî£_ôî©‹
 
rbegö
()

222 {  
ªvî£_ôî©‹
(
íd
()); }

224 
c⁄°_ªvî£_ôî©‹
 
rbegö
() const

225 {  
c⁄°_ªvî£_ôî©‹
(
íd
()); }

227 
ªvî£_ôî©‹
 
ªnd
()

228 {  
ªvî£_ôî©‹
(
begö
()); }

230 
c⁄°_ªvî£_ôî©‹
 
ªnd
() const

231 {  
c⁄°_ªvî£_ôî©‹
(
begö
()); }

233 
ª£rve
(
ª£rve_ni
, 
ª£rve_nj
, 
ª£rve_nk
)

234 { 
	ma
.
ª£rve
(
ª£rve_ni
*
ª£rve_nj
*
ª£rve_nk
); }

236 
ªsize
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
)

238 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0);

239 
	ma
.
ªsize
(
ni_
*
nj_
*
nk_
);

240 
	mni
=
ni_
;

241 
	mnj
=
nj_
;

242 
	mnk
=
nk_
;

245 
ªsize
(
±rdiff_t
 
ni_
,Öådiff_à
nj_
,Öådiff_à
nk_
, c⁄° 
T
& 
vÆue
)

247 
as£π
(
ni_
>=0 && 
nj_
>=0 && 
nk_
>=0);

248 
	ma
.
ªsize
(
ni_
*
nj_
*
nk_
, 
vÆue
);

249 
	mni
=
ni_
;

250 
	mnj
=
nj_
;

251 
	mnk
=
nk_
;

254 
£t_zîo
()

255 { 
	ma
.
£t_zîo
(); }

257 
size_ty≥
 
size
() const

258 {  
	ma
.
size
(); }

260 
sw≠
(
Aºay3
<
T
>& 
x
)

262 
	m°d
::
sw≠
(
ni
, 
x
.ni);

263 
	m°d
::
sw≠
(
nj
, 
x
.nj);

264 
	m°d
::
sw≠
(
nk
, 
x
.nk);

265 
	ma
.
sw≠
(
x
.
a
);

268 
åim
()

269 { 
	ma
.
åim
(); }

274 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3d
;

275 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3f
;

278 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3i
;

279 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3ui
;

280 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3s
;

281 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3us
;

282 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3c
;

283 
	gAºay3
<, 
	tAºay1
<> > 
	tAºay3uc
;

	@common/array3_utils.h

1 #i‚de‡
ARRAY3_UTILS_H


2 
	#ARRAY3_UTILS_H


	)

4 
	~<¨øy3.h
>

5 
	~<utû.h
>

6 
	~<vec.h
>

8 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

9 
T
 
cubic_öãΩﬁ©e_vÆue
(c⁄° 
Vec
<3,
S
>& 
poöt
, c⁄° 
Aºay3
<T, 
Aºay1
<T> >& 
grid
)

11 
±rdiff_t
 
	gi
,
	gj
,
	gk
;

12 
S
 
	gfi
,
	gfj
,
	gfk
;

14 
gë_b¨y˚¡ric
(
poöt
[0], 
i
, 
fi
, 0, 
grid
.
ni
);

15 
gë_b¨y˚¡ric
(
poöt
[1], 
j
, 
fj
, 0, 
grid
.
nj
);

16 
gë_b¨y˚¡ric
(
poöt
[2], 
k
, 
fk
, 0, 
grid
.
nk
);

18  
åicubic_öãΩ
–
grid
, 
i
-1, 
j
-1, 
k
-1, 
fi
, 
fj
, 
fk
 );

23 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

24 
T
 
öãΩﬁ©e_vÆue
(c⁄° 
Vec
<3,
S
>& 
poöt
, c⁄° 
Aºay3
<T, 
Aºay1
<T> >& 
grid
) {

25 
±rdiff_t
 
	gi
,
	gj
,
	gk
;

26 
S
 
	gfi
,
	gfj
,
	gfk
;

28 
gë_b¨y˚¡ric
(
poöt
[0], 
i
, 
fi
, 0, 
grid
.
ni
);

29 
gë_b¨y˚¡ric
(
poöt
[1], 
j
, 
fj
, 0, 
grid
.
nj
);

30 
gë_b¨y˚¡ric
(
poöt
[2], 
k
, 
fk
, 0, 
grid
.
nk
);

32  
åûîp
(

33 
grid
(
i
,
j
,
k
), grid(i+1,j,k), grid(i,j+1,k), grid(i+1,j+1,k),

34 
grid
(
i
,
j
,
k
+1), grid(i+1,j,k+1), grid(i,j+1,k+1), grid(i+1,j+1,k+1),

35 
fi
,
fj
,
fk
);

38 
	gãm∂©e
<
˛ass
 
	gS
,˛as†
	gT
>

39 
T
 
öãΩﬁ©e_gødõ¡
(
Vec
<3,T>& 
gødõ¡
, c⁄° Vec<3,
S
>& 
poöt
, c⁄° 
Aºay3
<T, 
Aºay1
<T> >& 
grid
) {

40 
±rdiff_t
 
	gi
,
	gj
,
	gk
;

41 
S
 
	gfx
,
	gfy
,
	gfz
;

43 
gë_b¨y˚¡ric
(
poöt
[0], 
i
, 
fx
, 0, 
grid
.
ni
);

44 
gë_b¨y˚¡ric
(
poöt
[1], 
j
, 
fy
, 0, 
grid
.
nj
);

45 
gë_b¨y˚¡ric
(
poöt
[2], 
k
, 
fz
, 0, 
grid
.
nk
);

47 
T
 
	gv000
 = 
grid
(
i
,
j
,
k
);

48 
T
 
	gv001
 = 
grid
(
i
,
j
,
k
+1);

49 
T
 
	gv010
 = 
grid
(
i
,
j
+1,
k
);

50 
T
 
	gv011
 = 
grid
(
i
,
j
+1,
k
+1);

51 
T
 
	gv100
 = 
grid
(
i
+1,
j
,
k
);

52 
T
 
	gv101
 = 
grid
(
i
+1,
j
,
k
+1);

53 
T
 
	gv110
 = 
grid
(
i
+1,
j
+1,
k
);

54 
T
 
	gv111
 = 
grid
(
i
+1,
j
+1,
k
+1);

56 
T
 
	gddx00
 = (
v100
 - 
v000
);

57 
T
 
	gddx10
 = (
v110
 - 
v010
);

58 
T
 
	gddx01
 = (
v101
 - 
v001
);

59 
T
 
	gddx11
 = (
v111
 - 
v011
);

60 
T
 
	gdv_dx
 = 
bûîp
(
ddx00
,
ddx10
,
ddx01
,
ddx11
, 
fy
,
fz
);

62 
T
 
	gddy00
 = (
v010
 - 
v000
);

63 
T
 
	gddy10
 = (
v110
 - 
v100
);

64 
T
 
	gddy01
 = (
v011
 - 
v001
);

65 
T
 
	gddy11
 = (
v111
 - 
v101
);

66 
T
 
	gdv_dy
 = 
bûîp
(
ddy00
,
ddy10
,
ddy01
,
ddy11
, 
fx
,
fz
);

68 
T
 
	gddz00
 = (
v001
 - 
v000
);

69 
T
 
	gddz10
 = (
v101
 - 
v100
);

70 
T
 
	gddz01
 = (
v011
 - 
v010
);

71 
T
 
	gddz11
 = (
v111
 - 
v110
);

72 
T
 
	gdv_dz
 = 
bûîp
(
ddz00
,
ddz10
,
ddz01
,
ddz11
, 
fx
,
fy
);

74 
	ggødõ¡
[0] = 
dv_dx
;

75 
	ggødõ¡
[1] = 
dv_dy
;

76 
	ggødõ¡
[2] = 
dv_dz
;

79  
åûîp
(

80 
v000
, 
v100
,

81 
v010
, 
v110
,

82 
v001
, 
v101
,

83 
v011
, 
v111
,

84 
fx
, 
fy
, 
fz
);

	@common/bfstream.cpp

1 
	~<bf°ªam.h
>

3 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, 
	gboﬁ
 &
	gd
)

4 { 
	gd
=(
boﬁ
)
öput
.
gë
();  
	göput
; }

6 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

7 { 
	gd
=()
öput
.
gë
();  
	göput
; }

9 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, sig√d &
	gd
)

10 { 
	gd
=(sig√d )
öput
.
gë
();  
	göput
; }

12 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

13 { 
	gd
=()
öput
.
gë
();  
	göput
; }

15 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

16 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

18 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

19 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

21 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

22 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

24 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

25 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

27 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

28 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

30 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

31 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

33 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

34 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

36 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
)

37 {  
	göput
.
ãm∂©ed_ªad
(
d
); }

41 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° 
	gboﬁ
 &
	gd
)

42 { 
	gouçut
.
put
(()
d
);  output; }

44 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

45 { 
	gouçut
.
put
(
d
);  output; }

47 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° sig√d &
	gd
)

48 { 
	gouçut
.
put
(()
d
);  output; }

50 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

51 { 
	gouçut
.
put
(()
d
);  output; }

53 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

54 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

56 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

57 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

59 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

60 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

62 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

63 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

65 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

66 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

68 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

69 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

71 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

72 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

74 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
)

75 {  
	gouçut
.
ãm∂©ed_wrôe
(
d
); }

	@common/bfstream.h

1 #i‚de‡
BFSTREAM_H


2 
	#BFSTREAM_H


	)

4 
	~<ˇs£π
>

5 
	~<c°d¨g
>

6 
	~<c°dlib
>

7 
	~<f°ªam
>

9 #ifde‡
__BIG_ENDIAN__


10 #ifde‡
__LITTLE_ENDIAN__


11 #îr‹ 
C™nŸ
 
be
 
bŸh
 
big
 
™d
 
lôée
 
ídün


14 #i‚de‡
__LITTLE_ENDIAN__


15 #îr‹ 
Nìd
 
to
 
deföe
 
eôhî
 
big
 
‹
 
lôée
 
ídün


20 
	gãm∂©e
<
˛ass
 
	gT
> 
ölöe
 
	$sw≠_ídünôy
(
T
 &
x
)

22 
	`as£π
((
T
)<=8);

23 
T
 
ﬁd
=
x
;

24 
k
=0; k<(
T
); ++k)

25 ((*)&
x
)[
k
] = ((*)&
ﬁd
)[(
T
)-1-k];

26 
	}
}

30 
	sbif°ªam


32 
	m°d
::
if°ªam
 
öput
;

33 
boﬁ
 
	mbig_ídün
;

35 
bif°ªam
() :

36 
öput
(),

37 #ifde‡
__BIG_ENDIAN__


38 
big_ídün
(
åue
)

40 
big_ídün
(
Ál£
)

43 
as£π_c‹ª˘_ídünôy
();

46 
bif°ªam
(c⁄° *
fûíame_f‹m©
, ...) :

47 
öput
(),

48 #ifde‡
__BIG_ENDIAN__


49 
big_ídün
(
åue
)

51 
big_ídün
(
Ál£
)

54 #ifde‡
_MSC_VER


55 
va_li°
 
	m≠
;

56 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

57 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

59 *
	mfûíame
=
√w
 [
Àn
];

60 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

61 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

62 
	mdñëe
[] 
	mfûíame
;

63 
va_íd
(
≠
);

65 
va_li°
 
	m≠
;

66 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

67 *
	mfûíame
;

68 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

69 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

70 
	m°d
::
‰ì
(
fûíame
);

71 
va_íd
(
≠
);

75 
as£π_c‹ª˘_ídünôy
()

77 
	mã°
=1;

78 #ifde‡
__BIG_ENDIAN__


79 
as£π
(*(*)&
ã°
 == 0);

81 
as£π
(*(*)&
ã°
 == 1);

85 
›í
(c⁄° *
fûíame_f‹m©
, ...)

87 #ifde‡
_MSC_VER


88 
va_li°
 
	m≠
;

89 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

90 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

92 *
	mfûíame
=
√w
 [
Àn
];

93 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

94 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

95 
	mdñëe
[] 
	mfûíame
;

96 
va_íd
(
≠
);

98 
va_li°
 
	m≠
;

99 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

100 *
	mfûíame
;

101 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

102 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

103 
	m°d
::
‰ì
(
fûíame
);

104 
va_íd
(
≠
);

108 
v›í
(c⁄° *
fûíame_f‹m©
, 
va_li°
 
≠
)

110 #ifde‡
_MSC_VER


111 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

113 *
	mfûíame
=
√w
 [
Àn
];

114 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

115 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

116 
	mdñëe
[] 
	mfûíame
;

118 *
	mfûíame
;

119 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

120 
	möput
.
›í
(
fûíame
, 
°d
::
if°ªam
::
bö¨y
);

121 
	m°d
::
‰ì
(
fûíame
);

125 
boﬁ
 
good
()

126 {  
	möput
.
good
(); }

128 
boﬁ
 
Áû
()

129 {  
	möput
.
Áû
(); }

131 
˛o£
()

132 { 
	möput
.
˛o£
(); }

134 
£t_big_ídün
()

135 { 
	mbig_ídün
=
åue
; }

137 
£t_lôée_ídün
()

138 { 
	mbig_ídün
=
Ál£
; }

140 
ªad_ídünôy
()

141 { (*
	mthis
)>>
	mbig_ídün
; }

143 
skù
(
numbyãs
)

144 { 
	möput
.
£ekg
(
numbyãs
, 
°d
::
ios_ba£
::
cur
); }

146 
£ek
(
posôi⁄
)

147 { 
	möput
.
£ekg
(
posôi⁄
); }

149 
gë
()

150 {  
	möput
.
gë
(); }

152 
	m¥iv©e
:

153 
ãm∂©e
<
˛ass
 
T
>

154 
bif°ªam
 &
ãm∂©ed_ªad
(
T
 &
d
)

156 
öput
.
ªad
((*)&
d
, (
T
));

157 #ifde‡
__BIG_ENDIAN__


158 if(!
	mbig_ídün
)

160 if(
	mbig_ídün
)

162 
sw≠_ídünôy
(
d
);

163  *
	mthis
;

165 
	mpublic
:

167 
ãm∂©e
<
˛ass
 
T
>

168 
ªad
(
T
 *
d
, 
num
)

170 
as£π
(
d
!=0);

171 
	mi
=0; i<
	mnum
; ++iË(*
	mthis
)>>
	md
[
i
];

174 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bif°ªam &, 
	mboﬁ
 &);

175 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

176 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

177 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

178 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

179 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

180 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

181 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

182 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

183 
‰õnd
 
	mbif°ªam
 &
	m›î©‹
>>(bifstream &, &);

187 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, 
	gboﬁ
 &
	gd
);

188 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

189 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, sig√d &
	gd
);

190 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

191 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

192 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

193 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

194 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

195 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

196 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

197 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

198 
	gbif°ªam
 &
	g›î©‹
>>(bif°ªam &
	göput
, &
	gd
);

202 
	sbof°ªam


204 
	m°d
::
of°ªam
 
ouçut
;

205 
boﬁ
 
	mbig_ídün
;

207 
bof°ªam
() :

208 
ouçut
(),

209 #ifde‡
__BIG_ENDIAN__


210 
big_ídün
(
åue
)

212 
big_ídün
(
Ál£
)

215 
as£π_c‹ª˘_ídünôy
();

218 
bof°ªam
(c⁄° *
fûíame_f‹m©
, ...) :

219 
ouçut
(),

220 #ifde‡
__BIG_ENDIAN__


221 
big_ídün
(
åue
)

223 
big_ídün
(
Ál£
)

226 
as£π_c‹ª˘_ídünôy
();

227 #ifde‡
_MSC_VER


228 
va_li°
 
	m≠
;

229 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

230 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

232 *
	mfûíame
=
√w
 [
Àn
];

233 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

234 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

235 
	mdñëe
[] 
	mfûíame
;

236 
va_íd
(
≠
);

238 
va_li°
 
	m≠
;

239 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

240 *
	mfûíame
;

241 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

242 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

243 
	m°d
::
‰ì
(
fûíame
);

244 
va_íd
(
≠
);

248 
as£π_c‹ª˘_ídünôy
()

250 
	mã°
=1;

251 #ifde‡
__BIG_ENDIAN__


252 
as£π
(*(*)&
ã°
 == 0);

254 
as£π
(*(*)&
ã°
 == 1);

258 
›í
(c⁄° *
fûíame_f‹m©
, ...)

260 #ifde‡
_MSC_VER


261 
va_li°
 
	m≠
;

262 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

263 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

265 *
	mfûíame
=
√w
 [
Àn
];

266 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

267 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

268 
	mdñëe
[] 
	mfûíame
;

269 
va_íd
(
≠
);

271 
va_li°
 
	m≠
;

272 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

273 *
	mfûíame
;

274 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

275 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

276 
	m°d
::
‰ì
(
fûíame
);

277 
va_íd
(
≠
);

281 
v›í
(c⁄° *
fûíame_f‹m©
, 
va_li°
 
≠
)

284 #ifde‡
_MSC_VER


285 
	mÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

287 *
	mfûíame
=
√w
 [
Àn
];

288 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

289 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

290 
	mdñëe
[] 
	mfûíame
;

292 *
	mfûíame
;

293 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

294 
	mouçut
.
›í
(
fûíame
, 
°d
::
of°ªam
::
bö¨y
);

295 
	m°d
::
‰ì
(
fûíame
);

299 
boﬁ
 
good
()

300 {  
	mouçut
.
good
(); }

302 
boﬁ
 
Áû
()

303 {  
	mouçut
.
Áû
(); }

305 
˛o£
()

306 { 
	mouçut
.
˛o£
(); }

308 
£t_big_ídün
()

309 { 
	mbig_ídün
=
åue
; }

311 
£t_lôée_ídün
()

312 { 
	mbig_ídün
=
Ál£
; }

314 
wrôe_ídünôy
()

315 { (*
	mthis
)<<
	mbig_ídün
; }

317 
wrôe_zîo
(
numbyãs
)

318 { 
	mi
=0; i<
	mnumbyãs
; ++iË
	mouçut
.
put
(0); }

320 
put
(
byã
)

321 { 
	mouçut
.
put
(
byã
); }

323 
	m¥iv©e
:

324 
ãm∂©e
<
˛ass
 
T
>

325 
bof°ªam
 &
ãm∂©ed_wrôe
(c⁄° 
T
 &
d
)

327 #ifde‡
__BIG_ENDIAN__


328 if(!
big_ídün
)

330 if(
big_ídün
)

333 
T
 
sw≠≥d_c›y
=
d
;

334 
sw≠_ídünôy
(
sw≠≥d_c›y
);

335 
	mouçut
.
wrôe
((c⁄° *)&
sw≠≥d_c›y
, (
T
));

337 
	mouçut
.
wrôe
((c⁄° *)&
d
, (
T
));

338  *
	mthis
;

340 
	mpublic
:

342 
ãm∂©e
<
˛ass
 
T
>

343 
wrôe
(c⁄° 
T
 *
d
, 
num
)

345 
as£π
(
d
!=0);

346 
	mi
=0; i<
	mnum
; ++iË(*
	mthis
)<<
	md
[
i
];

349 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bof°ªam &, c⁄° 
	mboﬁ
 &);

350 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

351 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

352 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

353 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

354 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

355 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

356 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

357 
‰õnd
 
	mbof°ªam
 &
	m›î©‹
<<(bofstream &, const &);

360 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° 
	gboﬁ
 &
	gd
);

361 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

362 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° sig√d &
	gd
);

363 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

364 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

365 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

366 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

367 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

368 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

369 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

370 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

371 
	gbof°ªam
 &
	g›î©‹
<<(bof°ªam &
	gouçut
, c⁄° &
	gd
);

	@common/blas_wrapper.h

1 #i‚de‡
BLAS_WRAPPER_H


2 
	#BLAS_WRAPPER_H


	)

4 
	~<ˇs£π
>

5 
	~<cm©h
>

6 
	~<c°rög
>

7 
	~<ve˘‹
>

33 
«me•a˚
 
	gBLAS
{

35 
	gãm∂©e
<
˛ass
 
	gT
>

36 
ölöe
 
£t_zîo
(
n
, 
T
 *
x
)

37 { 
	g°d
::
mem£t
(
x
, 0, 
n
*(
T
)); }

42 #ifde‡
USE_FORTRAN_BLAS


45 
dsdŸ_
(const *, const *, const *, const *, const *);

46 
sdŸ_
(const *, const *, const *, const *, const *);

47 
ddŸ_
(const *, const *, const *, const *, const *);

48 
¢rm2_
(const *, const *, const *);

49 
dƒm2_
(const *, const *, const *);

50 
ßsum_
(const *, const *, const *);

51 
dasum_
(const *, const *, const *);

52 
ißmax_
(const *, const *, const *);

53 
idamax_
(const *, const *, const *);

54 
ssw≠_
(const *, *, const *, *, const *);

55 
dsw≠_
(const *, *, const *, *, const *);

56 
sc›y_
(const *, const *, const *, *, const *);

57 
dc›y_
(const *, const *, const *, *, const *);

58 
ßxpy_
(const *, const *, const *, const *, *, const *);

59 
daxpy_
(const *, const *, const *, const *, *, const *);

60 
ssˇl_
(const *, const *, *, const *);

61 
dsˇl_
(const *, const *, *, const *);

62 
sgemv_
(const *, const *, const *, const *, const *, const *, const *, const *, const *, *, const *);

63 
dgemv_
(const *, const *, const *, const *, const *, const *, const *, const *, const *, *, const *);

64 
sgemm_
(const *, const *, const *, const *, const *, const *, const *, const *, const *, const *, const *, *, const *);

65 
dgemm_
(const *, const *, const *, const *, const *, const *, const *, const *, const *, const *, const *, *, const *);

68 
«me•a˚
 
BLAS
{

70 
	eTøn•o£
 {
NoTøns
='N', 
Tøns
='T'};

71 
	eUµîLowî
 {
Uµî
='U', 
Lowî
='L'};

72 
	eUnôDüg
 {
N⁄Unô
='N', 
Unô
='U'};

73 
	eSide
 {
Le·
='L', 
Right
='R'};

77 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

78 {  
dsdŸ_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

80 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

81 { c⁄° 
⁄e
=1;  
dsdŸ_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

83 
ölöe
 
dŸf
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

84 {  ()
sdŸ_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

86 
ölöe
 
dŸf
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

87 { c⁄° 
⁄e
=1;  ()
sdŸ_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

89 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

90 {  
ddŸ_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

92 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

93 { c⁄° 
⁄e
=1;  
ddŸ_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

97 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

98 {  
¢rm2_
(&
n
, 
x
, &
öcx
); }

100 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

101 {  
dƒm2_
(&
n
, 
x
, &
öcx
); }

105 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

106 {  
ßsum_
(&
n
, 
x
, &
öcx
); }

108 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

109 {  
dasum_
(&
n
, 
x
, &
öcx
); }

113 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

114 {  
ißmax_
(&
n
, 
x
, &
öcx
)-1; }

116 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

117 {  
idamax_
(&
n
, 
x
, &
öcx
)-1; }

119 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

120 {  
°d
::
Ábs
(
x
[
ißmax_
(&
n
, x, &
öcx
)-1]); }

122 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

123 {  
°d
::
Ábs
(
x
[
idamax_
(&
n
, x, &
öcx
)-1]); }

127 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

128 { 
ssw≠_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

130 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

131 { c⁄° 
⁄e
=1; 
ssw≠_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

133 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

134 { 
dsw≠_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

136 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

137 { c⁄° 
⁄e
=1; 
dsw≠_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

141 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

142 { 
sc›y_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

144 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

145 { c⁄° 
⁄e
=1; 
sc›y_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

147 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

148 { 
dc›y_
(&
n
, 
x
, &
öcx
, 
y
, &
öcy
); }

150 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

151 { c⁄° 
⁄e
=1; 
dc›y_
(&
n
, 
x
, &⁄e, 
y
, &
öcy
); }

155 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

156 { 
ßxpy_
(&
n
, &
Æpha
, 
x
, &
öcx
, 
y
, &
öcy
); }

158 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

159 { c⁄° 
⁄e
=1; 
ßxpy_
(&
n
, &
Æpha
, 
x
, &⁄e, 
y
, &
öcy
); }

161 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

162 { 
daxpy_
(&
n
, &
Æpha
, 
x
, &
öcx
, 
y
, &
öcy
); }

164 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

165 { c⁄° 
⁄e
=1; 
daxpy_
(&
n
, &
Æpha
, 
x
, &⁄e, 
y
, &
öcy
); }

169 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

170 { 
ssˇl_
(&
n
, &
Æpha
, 
x
, &
öcx
); }

172 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

173 { 
dsˇl_
(&
n
, &
Æpha
, 
x
, &
öcx
); }

178 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

179 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

180 c⁄° *
x
, 
öcx
, 
bëa
, *
y
, 
öcy
=1)

181 { 
sgemv_
((c⁄° *)&
å™•o£
, &
m
, &
n
, &
Æpha
, 
A
, &
lda
, 
x
, &
öcx
, &
bëa
, 
y
, &
öcy
); }

183 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

184 { c⁄° 
⁄ei
=1; c⁄° 
zîo
=0, 
⁄ef
=1; 
sgemv_
("N", &
m
, &
n
, &⁄ef, 
A
, &m, 
x
, &⁄ei, &zîo, 
y
, &
öcy
); }

186 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

187 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

188 c⁄° *
x
, 
öcx
, 
bëa
, *
y
, 
öcy
=1)

189 { 
dgemv_
((c⁄° *)&
å™•o£
, &
m
, &
n
, &
Æpha
, 
A
, &
lda
, 
x
, &
öcx
, &
bëa
, 
y
, &
öcy
); }

191 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

192 { c⁄° 
⁄ei
=1; c⁄° 
zîo
=0, 
⁄ef
=1; 
dgemv_
("N", &
m
, &
n
, &⁄ef, 
A
, &m, 
x
, &⁄ei, &zîo, 
y
, &
öcy
); }

196 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

197 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

198 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

199 { 
sgemm_
((c⁄° *)&
å™sA
, (c⁄° *)&
å™sB
, &
m
, &
n
, &
k
, &
Æpha
, 
A
, &
lda
, 
B
, &
ldb
, &
bëa
, 
C
, &
ldc
); }

201 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

202 { c⁄° 
zîo
=0, 
⁄e
=1; 
sgemm_
("N", "N", &
m
, &
n
, &
k
, &⁄e, 
A
, &m, 
B
, &k, &zîo, 
C
, &m); }

204 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

205 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

206 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

207 { 
dgemm_
((c⁄° *)&
å™sA
, (c⁄° *)&
å™sB
, &
m
, &
n
, &
k
, &
Æpha
, 
A
, &
lda
, 
B
, &
ldb
, &
bëa
, 
C
, &
ldc
); }

209 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

210 { c⁄° 
zîo
=0, 
⁄e
=1; 
dgemm_
("N", "N", &
m
, &
n
, &
k
, &⁄e, 
A
, &m, 
B
, &k, &zîo, 
C
, &m); }

215 #ñi‡
deföed
 
USE_AMD_BLAS


217 
	~<acml.h
>

219 
«me•a˚
 
	gBLAS
{

221 
	eTøn•o£
 {
	gNoTøns
='N', 
	gTøns
='T'};

222 
	eUµîLowî
 {
	gUµî
='U', 
	gLowî
='L'};

223 
	eUnôDüg
 {
	gN⁄Unô
='N', 
	gUnô
='U'};

224 
	eSide
 {
	gLe·
='L', 
	gRight
='R'};

228 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

229 {  
dsdŸ
(
n
, (*)
x
, 
öcx
, (*)
y
, 
öcy
); }

231 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

232 {  
dsdŸ
(
n
, (*)
x
, 1, (*)
y
, 
öcy
); }

234 
ölöe
 
dŸf
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

235 {  
sdŸ
(
n
, (*)
x
, 
öcx
, (*)
y
, 
öcy
); }

237 
ölöe
 
dŸf
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

238 {  
sdŸ
(
n
, (*)
x
, 1, (*)
y
, 
öcy
); }

240 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

241 {  
ddŸ
(
n
, (*)
x
, 
öcx
, (*)
y
, 
öcy
); }

243 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

244 {  
ddŸ
(
n
, (*)
x
, 1, (*)
y
, 
öcy
); }

248 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

249 {  
¢rm2
(
n
, (*)
x
, 
öcx
); }

251 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

252 {  
dƒm2
(
n
, (*)
x
, 
öcx
); }

256 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

257 {  
ßsum
(
n
, (*)
x
, 
öcx
); }

259 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

260 {  
dasum
(
n
, (*)
x
, 
öcx
); }

264 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

265 {  
ißmax
(
n
, (*)
x
, 
öcx
)-1; }

267 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

268 {  
idamax
(
n
, (*)
x
, 
öcx
)-1; }

270 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

271 {  
°d
::
Ábs
(
x
[
ißmax
(
n
, (*)x, 
öcx
)]-1); }

273 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

274 {  
°d
::
Ábs
(
x
[
idamax
(
n
, (*)x, 
öcx
)]-1); }

278 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

279 { 
ssw≠
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

281 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

282 { 
ssw≠
(
n
, 
x
, 1, 
y
, 
öcy
); }

284 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

285 { 
dsw≠
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

287 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

288 { 
dsw≠
(
n
, 
x
, 1, 
y
, 
öcy
); }

292 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

293 { 
sc›y
(
n
, (*)
x
, 
öcx
, 
y
, 
öcy
); }

295 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

296 { 
sc›y
(
n
, (*)
x
, 1, 
y
, 
öcy
); }

298 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

299 { 
dc›y
(
n
, (*)
x
, 
öcx
, 
y
, 
öcy
); }

301 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

302 { 
dc›y
(
n
, (*)
x
, 1, 
y
, 
öcy
); }

306 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

307 { 
ßxpy
(
n
, 
Æpha
, (*)
x
, 
öcx
, 
y
, 
öcy
); }

309 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

310 { 
ßxpy
(
n
, 
Æpha
, (*)
x
, 1, 
y
, 
öcy
); }

312 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

313 { 
daxpy
(
n
, 
Æpha
, (*)
x
, 
öcx
, 
y
, 
öcy
); }

315 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

316 { 
daxpy
(
n
, 
Æpha
, (*)
x
, 1, 
y
, 
öcy
); }

320 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

321 { 
ssˇl
(
n
, 
Æpha
, 
x
, 
öcx
); }

323 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

324 { 
dsˇl
(
n
, 
Æpha
, 
x
, 
öcx
); }

329 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

330 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

331 c⁄° *
x
, 
öcx
, 
bëa
, *
y
, 
öcy
=1)

332 { 
sgemv
(
å™•o£
, 
m
, 
n
, 
Æpha
, (*)
A
, 
lda
, (*)
x
, 
öcx
, 
bëa
, 
y
, 
öcy
); }

334 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

335 { 
sgemv
(
NoTøns
, 
m
, 
n
, 1.f, (*)
A
, m, (*)
x
, 1, 0.f, 
y
, 
öcy
); }

337 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

338 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

339 c⁄° *
x
, 
öcx
, 
bëa
, *
y
, 
öcy
=1)

340 { 
dgemv
(
å™•o£
, 
m
, 
n
, 
Æpha
, (*)
A
, 
lda
, (*)
x
, 
öcx
, 
bëa
, 
y
, 
öcy
); }

342 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

343 { 
dgemv
(
NoTøns
, 
m
, 
n
, 1., (*)
A
, m, (*)
x
, 1, 0., 
y
, 
öcy
); }

347 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

348 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

349 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

350 { 
sgemm
(
å™sA
, 
å™sB
, 
m
, 
n
, 
k
, 
Æpha
, (*)
A
, 
lda
, (*)
B
, 
ldb
, 
bëa
, 
C
, 
ldc
); }

352 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

353 { 
sgemm
(
NoTøns
, NoTøns, 
m
, 
n
, 
k
, 1.f, (*)
A
, m, (*)
B
, k, 0.f, 
C
, m); }

355 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

356 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

357 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

358 { 
dgemm
(
å™sA
, 
å™sB
, 
m
, 
n
, 
k
, 
Æpha
, (*)
A
, 
lda
, (*)
B
, 
ldb
, 
bëa
, 
C
, 
ldc
); }

360 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

361 { 
dgemm
(
NoTøns
, NoTøns, 
m
, 
n
, 
k
, 1., (*)
A
, m, (*)
B
, k, 0., 
C
, m); }

366 #ñi‡
deföed
 
USE_CBLAS
 || deföed 
__APPLE__


368 #ifde‡
USE_CBLAS


369 
	~<cbœs.h
>

370 #ñi‡
deföed
 
__APPLE__


371 
	~<Ac˚Àøã/Ac˚Àøã.h
>

374 
«me•a˚
 
	gBLAS
{

376 
	eTøn•o£
 {
	gNoTøns
=
CbœsNoTøns
, 
	gTøns
=
CbœsTøns
};

377 
	eUµîLowî
 {
	gUµî
=
CbœsUµî
, 
	gLowî
=
CbœsLowî
};

378 
	eUnôDüg
 {
	gN⁄Unô
=
CbœsN⁄Unô
, 
	gUnô
=
CbœsUnô
};

379 
	eSide
 {
	gLe·
=
CbœsLe·
, 
	gRight
=
CbœsRight
};

383 
ölöe
 
dŸf
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

384 {  
cbœs_sdŸ
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

386 
ölöe
 
dŸf
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

387 {  
cbœs_sdŸ
(
n
, 
x
, 1, 
y
, 
öcy
); }

389 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

390 {  
cbœs_dsdŸ
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

392 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

393 {  
cbœs_dsdŸ
(
n
, 
x
, 1, 
y
, 
öcy
); }

395 
ölöe
 
dŸ
(
n
, c⁄° *
x
, 
öcx
, c⁄° *
y
, 
öcy
=1)

396 {  
cbœs_ddŸ
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

398 
ölöe
 
dŸ
(
n
, c⁄° *
x
, c⁄° *
y
, 
öcy
=1)

399 {  
cbœs_ddŸ
(
n
, 
x
, 1, 
y
, 
öcy
); }

403 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

404 {  
cbœs_¢rm2
(
n
, 
x
, 
öcx
); }

406 
ölöe
 
n‹m2
(
n
, c⁄° *
x
, 
öcx
=1)

407 {  
cbœs_dƒm2
(
n
, 
x
, 
öcx
); }

411 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

412 {  
cbœs_ßsum
(
n
, 
x
, 
öcx
); }

414 
ölöe
 
abs_sum
(
n
, c⁄° *
x
, 
öcx
=1)

415 {  
cbœs_dasum
(
n
, 
x
, 
öcx
); }

419 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

420 {  
cbœs_ißmax
(
n
, 
x
, 
öcx
); }

422 
ölöe
 
ödex_abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

423 {  
cbœs_idamax
(
n
, 
x
, 
öcx
); }

425 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

426 {  
°d
::
Ábs
(
x
[
cbœs_ißmax
(
n
, x, 
öcx
)]); }

428 
ölöe
 
abs_max
(
n
, c⁄° *
x
, 
öcx
=1)

429 {  
°d
::
Ábs
(
x
[
cbœs_idamax
(
n
, x, 
öcx
)]); }

433 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

434 { 
cbœs_ssw≠
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

436 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

437 { 
cbœs_ssw≠
(
n
, 
x
, 1, 
y
, 
öcy
); }

439 
ölöe
 
sw≠
(
n
, *
x
, 
öcx
, *
y
, 
öcy
=1)

440 { 
cbœs_dsw≠
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

442 
ölöe
 
sw≠
(
n
, *
x
, *
y
, 
öcy
=1)

443 { 
cbœs_dsw≠
(
n
, 
x
, 1, 
y
, 
öcy
); }

447 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

448 { 
cbœs_sc›y
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

450 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

451 { 
cbœs_sc›y
(
n
, 
x
, 1, 
y
, 
öcy
); }

453 
ölöe
 
c›y
(
n
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

454 { 
cbœs_dc›y
(
n
, 
x
, 
öcx
, 
y
, 
öcy
); }

456 
ölöe
 
c›y
(
n
, c⁄° *
x
, *
y
, 
öcy
=1)

457 { 
cbœs_dc›y
(
n
, 
x
, 1, 
y
, 
öcy
); }

461 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

462 { 
cbœs_ßxpy
(
n
, 
Æpha
, 
x
, 
öcx
, 
y
, 
öcy
); }

464 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

465 { 
cbœs_ßxpy
(
n
, 
Æpha
, 
x
, 1, 
y
, 
öcy
); }

467 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, 
öcx
, *
y
, 
öcy
=1)

468 { 
cbœs_daxpy
(
n
, 
Æpha
, 
x
, 
öcx
, 
y
, 
öcy
); }

470 
ölöe
 
add_sˇÀd
(
n
, 
Æpha
, c⁄° *
x
, *
y
, 
öcy
=1)

471 { 
cbœs_daxpy
(
n
, 
Æpha
, 
x
, 1, 
y
, 
öcy
); }

475 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

476 { 
cbœs_ssˇl
(
n
, 
Æpha
, 
x
, 
öcx
); }

478 
ölöe
 
sˇÀ
(
n
, 
Æpha
, *
x
, 
öcx
=1)

479 { 
cbœs_dsˇl
(
n
, 
Æpha
, 
x
, 
öcx
); }

484 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

485 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

486 c⁄° *
x
, 
öcx
,

487 
bëa
, *
y
, 
öcy
=1)

488 { 
cbœs_sgemv
(
CbœsCﬁMaj‹
, (
CBLAS_TRANSPOSE
)
å™•o£
, 
m
, 
n
, 
Æpha
, 
A
, 
lda
, 
x
, 
öcx
, 
bëa
, 
y
, 
öcy
); }

490 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

491 { 
cbœs_sgemv
(
CbœsCﬁMaj‹
, 
CbœsNoTøns
, 
m
, 
n
, 1.f, 
A
, m, 
x
, 1, 0.f, 
y
, 
öcy
); }

493 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
Tøn•o£
 
å™•o£
,

494 
m
, 
n
, 
Æpha
, c⁄° *
A
, 
lda
,

495 c⁄° *
x
, 
öcx
, 
bëa
, *
y
, 
öcy
=1)

496 { 
cbœs_dgemv
(
CbœsCﬁMaj‹
, (
CBLAS_TRANSPOSE
)
å™•o£
, 
m
, 
n
, 
Æpha
, 
A
, 
lda
, 
x
, 
öcx
, 
bëa
, 
y
, 
öcy
); }

498 
ölöe
 
mu…ùly_m©rix_ve˘‹
(
m
, 
n
, c⁄° *
A
, c⁄° *
x
, *
y
, 
öcy
=1)

499 { 
cbœs_dgemv
(
CbœsCﬁMaj‹
, 
CbœsNoTøns
, 
m
, 
n
, 1., 
A
, m, 
x
, 1, 0., 
y
, 
öcy
); }

503 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

504 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

505 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

506 { 
cbœs_sgemm
(
CbœsCﬁMaj‹
, (
CBLAS_TRANSPOSE
)
å™sA
, (CBLAS_TRANSPOSE)
å™sB
, 
m
, 
n
, 
k
, 
Æpha
, 
A
, 
lda
, 
B
, 
ldb
, 
bëa
, 
C
, 
ldc
); }

508 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

509 { 
cbœs_sgemm
(
CbœsCﬁMaj‹
, 
CbœsNoTøns
, CbœsNoTøns, 
m
, 
n
, 
k
, 1.f, 
A
, m, 
B
, k, 0.f, 
C
, m); }

511 
ölöe
 
mu…ùly_m©rix_m©rix
(
Tøn•o£
 
å™sA
, Tøn•o£ 
å™sB
,

512 
m
, 
n
, 
k
, 
Æpha
, c⁄° *
A
, 
lda
,

513 c⁄° *
B
, 
ldb
, 
bëa
, *
C
, 
ldc
)

514 { 
cbœs_dgemm
(
CbœsCﬁMaj‹
, (
CBLAS_TRANSPOSE
)
å™sA
, (CBLAS_TRANSPOSE)
å™sB
, 
m
, 
n
, 
k
, 
Æpha
, 
A
, 
lda
, 
B
, 
ldb
, 
bëa
, 
C
, 
ldc
); }

516 
ölöe
 
mu…ùly_m©rix_m©rix
(
m
, 
n
, 
k
, c⁄° *
A
, c⁄° *
B
, *
C
)

517 { 
cbœs_dgemm
(
CbœsCﬁMaj‹
, 
CbœsNoTøns
, CbœsNoTøns, 
m
, 
n
, 
k
, 1., 
A
, m, 
B
, k, 0., 
C
, m); }

519 
ölöe
 
ønk_⁄e_upd©e
–
m
, 
n
, 
Æpha
, c⁄° * 
x
, c⁄° * 
y
, * 
A
 )

521 
cbœs_dgî
–
CbœsCﬁMaj‹
, 
m
, 
n
, 
Æpha
, 
x
, 1, 
y
, 1, 
A
, m );

530 
«me•a˚
 
	gBLAS
{

532 
	gãm∂©e
<
˛ass
 
	gT
>

533 
ölöe
 
£t_zîo
(
°d
::
ve˘‹
<
T
> &
x
)

534 { 
£t_zîo
(()
x
.
size
(), &x[0]); }

536 
ölöe
 
dŸf
(c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° std::ve˘‹<> &
y
)

537 { 
as£π
(
x
.
size
()==
y
.size());  
dŸf
(()x.size(), &x[0], &y[0]); }

539 
ölöe
 
dŸ
(c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° std::ve˘‹<> &
y
)

540 { 
as£π
(
x
.
size
()==
y
.size());  
dŸ
(()x.size(), &x[0], &y[0]); }

542 
ölöe
 
dŸ
(c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° std::ve˘‹<> &
y
)

543 { 
as£π
(
x
.
size
()==
y
.size());  
dŸ
(()x.size(), &x[0], &y[0]); }

545 
ölöe
 
n‹m2
(c⁄° 
°d
::
ve˘‹
<> &
x
)

546 {  
n‹m2
(()
x
.
size
(), &x[0]); }

548 
ölöe
 
n‹m2
(c⁄° 
°d
::
ve˘‹
<> &
x
)

549 {  
n‹m2
(()
x
.
size
(), &x[0]); }

551 
ölöe
 
abs_sum
(c⁄° 
°d
::
ve˘‹
<> &
x
)

552 {  
abs_sum
(()
x
.
size
(), &x[0]); }

554 
ölöe
 
abs_sum
(c⁄° 
°d
::
ve˘‹
<> &
x
)

555 {  
abs_sum
(()
x
.
size
(), &x[0]); }

557 
ölöe
 
ödex_abs_max
(c⁄° 
°d
::
ve˘‹
<> &
x
)

558 {  
ödex_abs_max
(()
x
.
size
(), &x[0]); }

560 
ölöe
 
ödex_abs_max
(c⁄° 
°d
::
ve˘‹
<> &
x
)

561 {  
ödex_abs_max
(()
x
.
size
(), &x[0]); }

563 
ölöe
 
abs_max
(c⁄° 
°d
::
ve˘‹
<> &
x
)

564 {  
abs_max
(()
x
.
size
(), &x[0]); }

566 
ölöe
 
abs_max
(c⁄° 
°d
::
ve˘‹
<> &
x
)

567 {  
abs_max
(()
x
.
size
(), &x[0]); }

569 
ölöe
 
sw≠
(
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

570 { 
as£π
(
x
.
size
()==
y
.size()); 
sw≠
(()x.size(), &x[0], &y[0]); }

572 
ölöe
 
sw≠
(
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

573 { 
as£π
(
x
.
size
()==
y
.size()); 
sw≠
(()x.size(), &x[0], &y[0]); }

575 
ölöe
 
c›y
(c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

576 { 
as£π
(
x
.
size
()==
y
.size()); 
c›y
(()x.size(), &x[0], &y[0]); }

578 
ölöe
 
c›y
(c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

579 { 
as£π
(
x
.
size
()==
y
.size()); 
c›y
(()x.size(), &x[0], &y[0]); }

581 
ölöe
 
add_sˇÀd
(
Æpha
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

582 { 
as£π
(
x
.
size
()==
y
.size()); 
add_sˇÀd
(()x.size(), 
Æpha
, &x[0], &y[0]); }

584 
ölöe
 
add_sˇÀd
(
Æpha
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
)

585 { 
as£π
(
x
.
size
()==
y
.size()); 
add_sˇÀd
(()x.size(), 
Æpha
, &x[0], &y[0]); }

587 
ölöe
 
sˇÀ
(
Æpha
, 
°d
::
ve˘‹
<> &
x
)

588 { 
sˇÀ
(()
x
.
size
(), 
Æpha
, &x[0]); }

590 
ölöe
 
sˇÀ
(
Æpha
, 
°d
::
ve˘‹
<> &
x
)

591 { 
sˇÀ
(()
x
.
size
(), 
Æpha
, &x[0]); }

	@common/ccd_defs.h

2 #i‚de‡
CCD_DEFS_H


3 
	#CCD_DEFS_H


	)

9 
	#USE_CUBIC_SOLVER_CCD


	)

	@common/ccd_wrapper.h

12 #i‚de‡
CCD_WRAPPER_H


13 
	#CCD_WRAPPER_H


	)

15 
	~<vec.h
>

23 
boﬁ
 
poöt_£gmít_cﬁlisi⁄
(c⁄° 
Vec2d
& 
x0
, c⁄° Vec2d& 
x√w0
, 
size_t
 
ödex0
,

24 c⁄° 
Vec2d
& 
x1
, c⁄° Vec2d& 
x√w1
, 
size_t
 
ödex1
,

25 c⁄° 
Vec2d
& 
x2
, c⁄° Vec2d& 
x√w2
, 
size_t
 
ödex2
);

27 
boﬁ
 
poöt_£gmít_cﬁlisi⁄
(c⁄° 
Vec2d
& 
x0
, c⁄° Vec2d& 
x√w0
, 
size_t
 
ödex0
,

28 c⁄° 
Vec2d
& 
x1
, c⁄° Vec2d& 
x√w1
, 
size_t
 
ödex1
,

29 c⁄° 
Vec2d
& 
x2
, c⁄° Vec2d& 
x√w2
, 
size_t
 
ödex2
,

30 & 
edge_Æpha
, 
Vec2d
& 
n‹mÆ
, & 
ªl_di•
);

36 
boﬁ
 
£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 
ödex0
,

37 c⁄° 
Vec2d
& 
x1
, 
size_t
 
ödex1
,

38 c⁄° 
Vec2d
& 
x2
, 
size_t
 
ödex2
,

39 c⁄° 
Vec2d
& 
x3
, 
size_t
 
ödex3
);

41 
boﬁ
 
£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 
ödex0
,

42 c⁄° 
Vec2d
& 
x1
, 
size_t
 
ödex1
,

43 c⁄° 
Vec2d
& 
x2
, 
size_t
 
ödex2
,

44 c⁄° 
Vec2d
& 
x3
, 
size_t
 
ödex3
,

45 &
s0
, & 
s2
 );

52 
boﬁ
 
poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 
ödex0
,

53 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 
ödex1
,

54 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 
ödex2
,

55 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 
ödex3
);

61 
boﬁ
 
poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 
ödex0
,

62 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 
ödex1
,

63 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 
ödex2
,

64 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 
ödex3
,

65 & 
b¨y1
, & 
b¨y2
, & 
b¨y3
,

66 
Vec3d
& 
n‹mÆ
,

67 & 
ªœtive_n‹mÆ_di•œ˚mít
 );

70 
boﬁ
 
£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 
ödex0
,

71 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 
ödex1
,

72 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 
ödex2
,

73 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 
ödex3
);

79 
boﬁ
 
£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 
ödex0
,

80 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 
ödex1
,

81 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 
ödex2
,

82 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 
ödex3
,

83 & 
b¨y0
, & 
b¨y2
,

84 
Vec3d
& 
n‹mÆ
,

85 & 
ªœtive_n‹mÆ_di•œ˚mít
 );

93 
boﬁ
 
£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 
ödex0
,

94 c⁄° 
Vec3d
& 
x1
, 
size_t
 
ödex1
,

95 c⁄° 
Vec3d
& 
x2
, 
size_t
 
ödex2
,

96 c⁄° 
Vec3d
& 
x3
, 
size_t
 
ödex3
,

97 c⁄° 
Vec3d
& 
x4
, 
size_t
 
ödex4
,

98 
boﬁ
 
degíî©e_cou¡s_as_öãr£˘i⁄
,

99 
boﬁ
 
vîbo£
 = 
Ál£
 );

101 
boﬁ
 
£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 
ödex0
,

102 c⁄° 
Vec3d
& 
x1
, 
size_t
 
ödex1
,

103 c⁄° 
Vec3d
& 
x2
, 
size_t
 
ödex2
,

104 c⁄° 
Vec3d
& 
x3
, 
size_t
 
ödex3
,

105 c⁄° 
Vec3d
& 
x4
, 
size_t
 
ödex4
,

106 & 
b¨y0
, & 
b¨y1
, & 
b¨y2
, & 
b¨y3
, & 
b¨y4
,

107 
boﬁ
 
degíî©e_cou¡s_as_öãr£˘i⁄
,

108 
boﬁ
 
vîbo£
 = 
Ál£
 );

112 
boﬁ
 
poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 
ödex0
,

113 c⁄° 
Vec3d
& 
x1
, 
size_t
 
ödex1
,

114 c⁄° 
Vec3d
& 
x2
, 
size_t
 
ödex2
,

115 c⁄° 
Vec3d
& 
x3
, 
size_t
 
ödex3
,

116 c⁄° 
Vec3d
& 
x4
, 
size_t
 
ödex4
);

	@common/collisionqueries.cpp

1 
	~<cﬁlisi⁄quîõs.h
>

2 
	~<comm⁄›ti⁄s.h
>

13 
	$check_poöt_edge_¥oximôy
–
boﬁ
 
upd©e
, c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
,

14 &
di°™˚
)

16 
Vec2d
 
	`dx
(
x2
-
x1
);

17 
m2
=
	`mag2
(
dx
);

19 
s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

21 if(
upd©e
){

22 
di°™˚
=
	`mö
(di°™˚, 
	`di°
(
x0
,
s
*
x1
+(1-s)*
x2
));

24 
di°™˚
=
	`di°
(
x0
, 
s
*
x1
+(1-s)*
x2
);

26 
	}
}

35 
	$check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
,

36 &
di°™˚
, &
s
, 
Vec2d
 &
n‹mÆ
, 
n‹mÆ_mu…ùlõr
)

38 
Vec2d
 
	`dx
(
x2
-
x1
);

39 
m2
=
	`mag2
(
dx
);

40 if(
upd©e
){

42 
this_s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

44 
Vec2d
 
this_n‹mÆ
=
x0
-(
this_s
*
x1
+(1-this_s)*
x2
);

45 
this_di°™˚
=
	`mag
(
this_n‹mÆ
);

46 if(
this_di°™˚
<
di°™˚
){

47 
s
=
this_s
;

48 
di°™˚
=
this_di°™˚
;

49 
n‹mÆ
=(
n‹mÆ_mu…ùlõr
/(
this_di°™˚
+1e-30))*
this_n‹mÆ
;

53 
s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

55 
n‹mÆ
=
x0
-(
s
*
x1
+(1-s)*
x2
);

56 
di°™˚
=
	`mag
(
n‹mÆ
);

57 i‡–
di°™˚
 < 1e-10 )

59 
n‹mÆ
 = 
	`n‹mÆized
(
	`≥Ω
(
x2
 - 
x1
));

63 
n‹mÆ
*=
n‹mÆ_mu…ùlõr
/(
di°™˚
+1e-30);

65 
	}
}

76 
	$check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
,

77 &
di°™˚
)

79 
Vec3d
 
	`dx
(
x2
-
x1
);

80 
m2
=
	`mag2
(
dx
);

82 
s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

84 if(
upd©e
){

85 
di°™˚
=
	`mö
(di°™˚, 
	`di°
(
x0
,
s
*
x1
+(1-s)*
x2
));

87 
di°™˚
=
	`di°
(
x0
,
s
*
x1
+(1-s)*
x2
);

89 
	}
}

98 
	$check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
,

99 &
di°™˚
, &
s
, 
Vec3d
 &
n‹mÆ
, 
n‹mÆ_mu…ùlõr
)

101 
Vec3d
 
	`dx
(
x2
-
x1
);

102 
m2
=
	`mag2
(
dx
);

103 if(
upd©e
){

105 
this_s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

107 
Vec3d
 
this_n‹mÆ
=
x0
-(
this_s
*
x1
+(1-this_s)*
x2
);

108 
this_di°™˚
=
	`mag
(
this_n‹mÆ
);

109 if(
this_di°™˚
<
di°™˚
){

110 
s
=
this_s
;

111 
di°™˚
=
this_di°™˚
;

112 
n‹mÆ
=(
n‹mÆ_mu…ùlõr
/(
this_di°™˚
+1e-30))*
this_n‹mÆ
;

116 
s
=
	`˛amp
(
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
, 0., 1.);

118 
n‹mÆ
=
x0
-(
s
*
x1
+(1-s)*
x2
);

119 
di°™˚
=
	`mag
(
n‹mÆ
);

120 
n‹mÆ
*=
n‹mÆ_mu…ùlõr
/(
di°™˚
+1e-30);

122 
	}
}

131 
	$check_edge_edge_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
, &
di°™˚
)

134 
Vec3d
 
x01
=
x0
-
x1
;

135 
r00
=
	`mag
(
x01
)+1e-30;

136 
x01
/=
r00
;

137 
Vec3d
 
x32
=
x3
-
x2
;

138 
r01
=
	`dŸ
(
x32
,
x01
);

139 
x32
-=
r01
*
x01
;

140 
r11
=
	`mag
(
x32
)+1e-30;

141 
x32
/=
r11
;

142 
Vec3d
 
x31
=
x3
-
x1
;

143 
s2
=
	`dŸ
(
x32
,
x31
)/
r11
;

144 
s0
=(
	`dŸ
(
x01
,
x31
)-
r01
*
s2
)/
r00
;

146 if(
s0
<0){

147 if(
s2
<0){

149 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
);

150 
	`check_poöt_edge_¥oximôy
(
åue
, 
x3
, 
x0
, 
x1
, 
di°™˚
);

151 }if(
s2
>1){

153 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
);

154 
	`check_poöt_edge_¥oximôy
(
åue
, 
x2
, 
x0
, 
x1
, 
di°™˚
);

156 
s0
=0;

158 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
);

160 }if(
s0
>1){

161 if(
s2
<0){

163 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
);

164 
	`check_poöt_edge_¥oximôy
(
åue
, 
x3
, 
x0
, 
x1
, 
di°™˚
);

165 }if(
s2
>1){

167 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
);

168 
	`check_poöt_edge_¥oximôy
(
åue
, 
x2
, 
x0
, 
x1
, 
di°™˚
);

170 
s0
=1;

172 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
);

175 if(
s2
<0){

176 
s2
=0;

178 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x3
, 
x0
, 
x1
, 
di°™˚
);

179 }if(
s2
>1){

180 
s2
=1;

182 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x2
, 
x0
, 
x1
, 
di°™˚
);

184 
di°™˚
=
	`di°
(
s2
*
x2
+(1-s2)*
x3
, 
s0
*
x0
+(1-s0)*
x1
);

187 
	}
}

196 
	$check_edge_edge_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

197 &
di°™˚
, &
s0
, &
s2
, 
Vec3d
 &
n‹mÆ
)

200 
Vec3d
 
x01
=
x0
-
x1
;

201 
r00
=
	`mag
(
x01
)+1e-30;

202 
x01
/=
r00
;

203 
Vec3d
 
x32
=
x3
-
x2
;

204 
r01
=
	`dŸ
(
x32
,
x01
);

205 
x32
-=
r01
*
x01
;

206 
r11
=
	`mag
(
x32
)+1e-30;

207 
x32
/=
r11
;

208 
Vec3d
 
x31
=
x3
-
x1
;

209 
s2
=
	`dŸ
(
x32
,
x31
)/
r11
;

210 
s0
=(
	`dŸ
(
x01
,
x31
)-
r01
*
s2
)/
r00
;

212 if(
s0
<0){

213 if(
s2
<0){

215 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

216 
	`check_poöt_edge_¥oximôy
(
åue
, 
x3
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

217 }if(
s2
>1){

219 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

220 
	`check_poöt_edge_¥oximôy
(
åue
, 
x2
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

222 
s0
=0;

224 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x1
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

226 }if(
s0
>1){

227 if(
s2
<0){

229 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

230 
	`check_poöt_edge_¥oximôy
(
åue
, 
x3
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

231 }if(
s2
>1){

233 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

234 
	`check_poöt_edge_¥oximôy
(
åue
, 
x2
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

236 
s0
=1;

238 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
, 
s2
, 
n‹mÆ
, 1.);

241 if(
s2
<0){

242 
s2
=0;

244 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x3
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

245 }if(
s2
>1){

246 
s2
=1;

248 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x2
, 
x0
, 
x1
, 
di°™˚
, 
s0
, 
n‹mÆ
, -1.);

250 
n‹mÆ
=(
s0
*
x0
+(1-s0)*
x1
)-(
s2
*
x2
+(1-s2)*
x3
);

251 
di°™˚
=
	`mag
(
n‹mÆ
);

252 if(
di°™˚
>0Ë
n‹mÆ
/=distance;

254 
n‹mÆ
=
	`¸oss
(
x1
-
x0
, 
x3
-
x2
);

255 
n‹mÆ
/=
	`mag
(normal)+1e-300;

259 
	}
}

268 
	$check_poöt_åüngÀ_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

269 &
di°™˚
)

272 
Vec3d
 
x13
=
x1
-
x3
;

273 
r00
=
	`mag
(
x13
)+1e-30;

274 
x13
/=
r00
;

275 
Vec3d
 
x23
=
x2
-
x3
;

276 
r01
=
	`dŸ
(
x23
,
x13
);

277 
x23
-=
r01
*
x13
;

278 
r11
=
	`mag
(
x23
)+1e-30;

279 
x23
/=
r11
;

280 
Vec3d
 
x03
=
x0
-
x3
;

281 
s2
=
	`dŸ
(
x23
,
x03
)/
r11
;

282 
s1
=(
	`dŸ
(
x13
,
x03
)-
r01
*
s2
)/
r00
;

283 
s3
=1-
s1
-
s2
;

285 if(
s1
>=0 && 
s2
>=0 && 
s3
>=0){

286 
di°™˚
=
	`di°
(
x0
, 
s1
*
x1
+
s2
*
x2
+
s3
*
x3
);

288 if(
s1
>0){

289 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x1
, 
x2
, 
di°™˚
);

290 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x1
, 
x3
, 
di°™˚
);

291 }if(
s2
>0){

292 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x1
, 
x2
, 
di°™˚
);

293 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x2
, 
x3
, 
di°™˚
);

295 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
);

296 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x1
, 
x3
, 
di°™˚
);

299 
	}
}

308 
	$check_poöt_åüngÀ_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

309 &
di°™˚
, &
s1
, &
s2
, &
s3
, 
Vec3d
 &
n‹mÆ
)

312 
Vec3d
 
x13
=
x1
-
x3
;

313 
r00
=
	`mag
(
x13
)+1e-30;

314 
x13
/=
r00
;

315 
Vec3d
 
x23
=
x2
-
x3
;

316 
r01
=
	`dŸ
(
x23
,
x13
);

317 
x23
-=
r01
*
x13
;

318 
r11
=
	`mag
(
x23
)+1e-30;

319 
x23
/=
r11
;

320 
Vec3d
 
x03
=
x0
-
x3
;

321 
s2
=
	`dŸ
(
x23
,
x03
)/
r11
;

322 
s1
=(
	`dŸ
(
x13
,
x03
)-
r01
*
s2
)/
r00
;

323 
s3
=1-
s1
-
s2
;

325 if(
s1
>=0 && 
s2
>=0 && 
s3
>=0){

326 
n‹mÆ
=
x0
-(
s1
*
x1
+
s2
*
x2
+
s3
*
x3
);

327 
di°™˚
=
	`mag
(
n‹mÆ
);

328 if(
di°™˚
>0Ë
n‹mÆ
/=distance;

330 
n‹mÆ
=
	`¸oss
(
x2
-
x1
, 
x3
-x1);

331 
n‹mÆ
/=
	`mag
(normal)+1e-300;

334 
s
, 
d
;

335 if(
s1
>0){

336 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x1
, 
x2
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

337 
s1
=
s
; 
s2
=1-s; 
s3
=0; 
d
=
di°™˚
;

338 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x1
, 
x3
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

339 if(
di°™˚
<
d
){

340 
s1
=
s
; 
s2
=0; 
s3
=1-s;

342 }if(
s2
>0){

343 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x1
, 
x2
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

344 
s1
=
s
; 
s2
=1-s; 
s3
=0; 
d
=
di°™˚
;

345 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x2
, 
x3
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

346 if(
di°™˚
<
d
){

347 
s1
=0; 
s2
=
s
; 
s3
=1-s; 
d
=
di°™˚
;

350 
	`check_poöt_edge_¥oximôy
(
Ál£
, 
x0
, 
x2
, 
x3
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

351 
s1
=0; 
s2
=
s
; 
s3
=1-s; 
d
=
di°™˚
;

352 
	`check_poöt_edge_¥oximôy
(
åue
, 
x0
, 
x1
, 
x3
, 
di°™˚
, 
s
, 
n‹mÆ
, 1.);

353 if(
di°™˚
<
d
){

354 
s1
=
s
; 
s2
=0; 
s3
=1-s;

358 
	}
}

366 
	$sig√d_vﬁume
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
)

376  ( 
x0
[0]*(
x1
[1]*
x3
[2]+x3[1]*
x2
[2]+x2[1]*x1[2])

377 +
x1
[0]*(
x2
[1]*
x3
[2]+x3[1]*
x0
[2]+x0[1]*x2[2])

378 +
x2
[0]*(
x3
[1]*
x1
[2]+x1[1]*
x0
[2]+x0[1]*x3[2])

379 +
x3
[0]*(
x1
[1]*
x2
[2]+x2[1]*
x0
[2]+x0[1]*x1[2]) )

381 - ( 
x0
[0]*(
x2
[1]*
x3
[2]+x3[1]*
x1
[2]+x1[1]*x2[2])

382 +
x1
[0]*(
x3
[1]*
x2
[2]+x2[1]*
x0
[2]+x0[1]*x3[2])

383 +
x2
[0]*(
x1
[1]*
x3
[2]+x3[1]*
x0
[2]+x0[1]*x1[2])

384 +
x3
[0]*(
x2
[1]*
x1
[2]+x1[1]*
x0
[2]+x0[1]*x2[2]) );

385 
	}
}

	@common/collisionqueries.h

1 #i‚de‡
COLLISIONQUERIES_H


2 
	#COLLISIONQUERIES_H


	)

4 
	~<vec.h
>

10 
check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
,

11 &
di°™˚
);

16 
check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
,

17 &
di°™˚
, &
s
, 
Vec2d
 &
n‹mÆ
, 
n‹mÆ_mu…ùlõr
);

24 
check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
,

25 &
di°™˚
);

30 
check_poöt_edge_¥oximôy
(
boﬁ
 
upd©e
, c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
,

31 &
di°™˚
, &
s
, 
Vec3d
 &
n‹mÆ
, 
n‹mÆ_mu…ùlõr
);

35 
check_edge_edge_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

36 &
di°™˚
);

41 
check_edge_edge_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

42 &
di°™˚
, &
s0
, &
s2
, 
Vec3d
 &
n‹mÆ
);

46 
check_poöt_åüngÀ_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

47 &
di°™˚
);

52 
check_poöt_åüngÀ_¥oximôy
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

53 &
di°™˚
, &
s1
, &
s2
, &
s3
, 
Vec3d
 &
n‹mÆ
);

57 
sig√d_vﬁume
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
);

	@common/commonoptions.h

10 #i‚de‡
COMMONOPTIONS_H


11 
	#COMMONOPTIONS_H


	)

13 
	~<c°ddef
>

21 #ifde‡
_MSC_VER


22 
±rdiff_t
 
	t±rdiff_t
;

25 c⁄° 
	gUNINITIALIZED_DOUBLE
 = 0x0F;

26 c⁄° 
	gBIG_DOUBLE
 = 1e30;

27 c⁄° 
size_t
 
	gUNINITIALIZED_SIZE_T
 = 
°©ic_ˇ°
<size_t> (~0);

	@common/cubic_ccd_wrapper.cpp

12 
	~<ccd_defs.h
>

13 
	~<ccd_wøµî.h
>

15 
boﬁ
 
	gsim∂ex_vîbo£
 = 
Ál£
;

17 #ifde‡
USE_CUBIC_SOLVER_CCD


19 
	~<cﬁlisi⁄quîõs.h
>

21 
	g«me•a˚


29 c⁄° 
	gg_cubic_sﬁvî_tﬁ
 = 1e-8;

32 c⁄° 
	gg_degí_n‹mÆ_ïsû⁄
 = 1e-6;

35 c⁄° 
	gg_cﬁlisi⁄_ïsû⁄
 = 1e-6;

39 
boﬁ
 
check_edge_edge_öãr£˘i⁄
(c⁄° 
Vec2d
 &
x0
,

40 c⁄° 
Vec2d
 &
x1
,

41 c⁄° 
Vec2d
 &
x2
,

42 c⁄° 
Vec2d
 &
x3
,

43 &
s01
,

44 &
s23
,

45 
tﬁî™˚
 );

49 
föd_possibÀ_quadøtic_roŸs_ö_01
–
A
, 
B
, 
C
, 
°d
::
ve˘‹
<> &
possibÀ_t
, 
tﬁ
 );

54 
boﬁ
 
check_poöt_edge_cﬁlisi⁄
(c⁄° 
Vec2d
 &
x0ﬁd
, c⁄° Vec2d &
x1ﬁd
, c⁄° Vec2d &
x2ﬁd
,

55 c⁄° 
Vec2d
 &
x0√w
, c⁄° Vec2d &
x1√w
, c⁄° Vec2d &
x2√w
,

56 
cﬁlisi⁄_ïsû⁄
 );

61 
boﬁ
 
check_poöt_edge_cﬁlisi⁄
(c⁄° 
Vec2d
 &
x0ﬁd
, c⁄° Vec2d &
x1ﬁd
, c⁄° Vec2d &
x2ﬁd
,

62 c⁄° 
Vec2d
 &
x0√w
, c⁄° Vec2d &
x1√w
, c⁄° Vec2d &
x2√w
,

63 &
s12
, 
Vec2d
 &
n‹mÆ
, &
cﬁlisi⁄_time
, 
cﬁlisi⁄_ïsû⁄
 );

67 
föd_c›œ«rôy_times
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

68 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

69 
°d
::
ve˘‹
<> &
possibÀ_times
);

73 
boﬁ
 
check_edge_edge_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

74 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

75 
cﬁlisi⁄_ïsû⁄
);

79 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

80 
s0
, 
s2
, 
Vec3d
& 
n‹mÆ
 );

85 
boﬁ
 
check_edge_edge_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

86 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

87 &
s0
, &
s2
, 
Vec3d
 &
n‹mÆ
, &
t
, 
cﬁlisi⁄_ïsû⁄
);

91 
boﬁ
 
check_poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

92 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

93 
cﬁlisi⁄_ïsû⁄
);

97 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

98 &
s1
, &
s2
, &
s3
,

99 
Vec3d
& 
n‹mÆ
 );

104 
boﬁ
 
check_poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

105 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

106 &
s1
, &
s2
, &
s3
, 
Vec3d
 &
n‹mÆ
, &
t
,

107 
cﬁlisi⁄_ïsû⁄
);

120 
boﬁ
 
check_edge_edge_öãr£˘i⁄
–c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
, c⁄° Vec2d &
x3
, &
s01
, &
s23
, 
tﬁî™˚
 )

122 
	gx10
=
x1
[0]-
x0
[0], 
	gy10
=x1[1]-x0[1];

123 
	gx31
=
x3
[0]-
x1
[0], 
	gy31
=x3[1]-x1[1];

124 
	gx32
=
x3
[0]-
x2
[0], 
	gy32
=x3[1]-x2[1];

125 
	gdë
=
x32
*
y10
-
x10
*
y32
;

126 
	gs01
=(
x31
*
y32
-
x32
*
y31
)/
dë
;

127 if(
	gs01
 < -
	gtﬁî™˚
 || s01 > 1+tﬁî™˚Ë 
	gÁl£
;

128 
	gs23
=(
x31
*
y10
-
x10
*
y31
)/
dë
;

129 if(
	gs23
< -
	gtﬁî™˚
 || s23 > 1+tﬁî™˚Ë 
	gÁl£
;

131 if(
	gs01
<0) s01=0; if(s01>1) s01=1;

132 if(
	gs23
<0) s23=0; if(s23>1) s23=1;

133  
	gåue
;

142 
föd_possibÀ_quadøtic_roŸs_ö_01
–
A
, 
B
, 
C
, 
°d
::
ve˘‹
<> &
possibÀ_t
, 
tﬁ
 )

144 if(
	gA
!=0){

145 
dis¸imö™t
=
B
*B-4*
A
*
C
;

146 if(
	gdis¸imö™t
>0){

147 
	gnumî
;

148 if(
	gB
>0Ë
	gnumî
=0.5*(-
B
-
sqπ
(
dis¸imö™t
));

149 
	gnumî
=0.5*(-
B
+
sqπ
(
dis¸imö™t
));

150 
	gt0
=
numî
/
A
, 
	gt1
=
C
/numer;

151 if(
	gt0
<
	gt1
){

152 if(
	gt0
>=-
tﬁ
 && 
t0
<1)

153 
possibÀ_t
.
push_back
(
max
(0.,
t0
));

154 if(
	gt1
>=-
tﬁ
 && 
t1
<1)

155 
possibÀ_t
.
push_back
(
max
(0.,
t1
));

157 if(
	gt1
>=-
tﬁ
 && 
t1
<1)

158 
possibÀ_t
.
push_back
(
max
(0.,
t1
));

159 if(
	gt0
>=-
tﬁ
 && 
t0
<1)

160 
possibÀ_t
.
push_back
(
max
(0.,
t0
));

163 
	gt
=-
B
/(2*
A
);

164 if(
	gt
>=-
tﬁ
 && 
t
<1)

165 
possibÀ_t
.
push_back
(
max
(0.,
t
));

167 }if(
	gB
!=0){

168 
t
=-
C
/
B
;

169 if(
	gt
>=-
tﬁ
 && 
t
<1)

170 
possibÀ_t
.
push_back
(
max
(0.,
t
));

180 
boﬁ
 
check_poöt_edge_cﬁlisi⁄
(c⁄° 
Vec2d
 &
x0ﬁd
, c⁄° Vec2d &
x1ﬁd
, c⁄° Vec2d &
x2ﬁd
,

181 c⁄° 
Vec2d
 &
x0√w
, c⁄° Vec2d &
x1√w
, c⁄° Vec2d &
x2√w
,

182 
cﬁlisi⁄_ïsû⁄
 )

184 
Vec2d
 
	gx10
=
x1ﬁd
-
x0ﬁd
, 
	gx20
=
x2ﬁd
-x0old;

185 
Vec2d
 
	gd10
=(
x1√w
-
x0√w
)-
x10
, 
	gd20
=(
x2√w
-x0√w)-
x20
;

187 
	g°d
::
ve˘‹
<> 
possibÀ_t
;

188 
	gA
=
¸oss
(
d10
,
d20
), 
	gB
=¸oss(d10,
x20
)+¸oss(
x10
,d20), 
	gC
=cross(x10,x20);

189 
föd_possibÀ_quadøtic_roŸs_ö_01
(
A
, 
B
, 
C
, 
possibÀ_t
, 
cﬁlisi⁄_ïsû⁄
 );

190 
	gpossibÀ_t
.
push_back
(1);

192 
	g¥oximôy_tﬁ
=
cﬁlisi⁄_ïsû⁄
*
°d
::
sqπ
(
mag2
(
x0ﬁd
)+mag2(
x0√w
)+mag2(
x1ﬁd
)+mag2(
x1√w
)+mag2(
x2√w
)+mag2(
x2ﬁd
));

193 
size_t
 
	gi
=0; i<
	gpossibÀ_t
.
size
(); ++i)

195 
	gcﬁlisi⁄_time
=
possibÀ_t
[
i
];

196 
	gu
=1-
cﬁlisi⁄_time
;

197 
	gdi°™˚
;

198 
check_poöt_edge_¥oximôy
–
Ál£
, 
u
*
x0ﬁd
+
cﬁlisi⁄_time
*
x0√w
, u*
x1ﬁd
+cﬁlisi⁄_time*
x1√w
, u*
x2ﬁd
+cﬁlisi⁄_time*
x2√w
, 
di°™˚
 );

199 if(
	gdi°™˚
<=
¥oximôy_tﬁ
Ë 
åue
;

201  
	gÁl£
;

211 
boﬁ
 
check_poöt_edge_cﬁlisi⁄
–c⁄° 
Vec2d
 &
x0ﬁd
, c⁄° Vec2d &
x1ﬁd
, c⁄° Vec2d &
x2ﬁd
,

212 c⁄° 
Vec2d
 &
x0√w
, c⁄° Vec2d &
x1√w
, c⁄° Vec2d &
x2√w
,

213 &
s12
, 
Vec2d
 &
n‹mÆ
, &
cﬁlisi⁄_time
, 
tﬁ
 )

215 
Vec2d
 
	gx10
=
x1ﬁd
-
x0ﬁd
, 
	gx20
=
x2ﬁd
-x0old;

216 
Vec2d
 
	gd10
=(
x1√w
-
x0√w
)-
x10
, 
	gd20
=(
x2√w
-x0√w)-
x20
;

218 
	g°d
::
ve˘‹
<> 
possibÀ_t
;

219 
	gA
=
¸oss
(
d10
,
d20
), 
	gB
=¸oss(d10,
x20
)+¸oss(
x10
,d20), 
	gC
=cross(x10,x20);

220 
föd_possibÀ_quadøtic_roŸs_ö_01
(
A
, 
B
, 
C
, 
possibÀ_t
, 
tﬁ
 );

221 
	gpossibÀ_t
.
push_back
(1);

223 
	g¥oximôy_tﬁ
=
tﬁ
*
°d
::
sqπ
(
mag2
(
x0ﬁd
)+mag2(
x0√w
)+mag2(
x1ﬁd
)+mag2(
x1√w
)+mag2(
x2√w
)+mag2(
x2ﬁd
));

224 
size_t
 
	gi
=0; i<
	gpossibÀ_t
.
size
(); ++i)

226 
	gcﬁlisi⁄_time
=
possibÀ_t
[
i
];

227 
	gu
=1-
cﬁlisi⁄_time
;

228 
	gdi°™˚
;

229 
check_poöt_edge_¥oximôy
–
Ál£
,

230 
u
*
x0ﬁd
+
cﬁlisi⁄_time
*
x0√w
,

231 
u
*
x1ﬁd
+
cﬁlisi⁄_time
*
x1√w
,

232 
u
*
x2ﬁd
+
cﬁlisi⁄_time
*
x2√w
,

233 
di°™˚
, 
s12
, 
n‹mÆ
, 1.0 );

235 if(
	gdi°™˚
<=
¥oximôy_tﬁ
)

237  
åue
;

240  
	gÁl£
;

249 
föd_c›œ«rôy_times
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

250 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

251 
°d
::
ve˘‹
<> &
possibÀ_times
)

254 i‡–
sim∂ex_vîbo£
 )

256 
°d
::
cout
 << "födög c›œ«rôyÅimes... " << std::
ídl
;

259 
	gpossibÀ_times
.
˛ór
();

262 
Vec3d
 
	gx03
=
x0
-
x3
, 
	gx13
=
x1
-x3, 
	gx23
=
x2
-x3;

263 
Vec3d
 
	gv03
=(
x√w0
-
x√w3
)-
x03
, 
	gv13
=(
x√w1
-x√w3)-
x13
, 
	gv23
=(
x√w2
-x√w3)-
x23
;

264 
	gA
=
åùÀ
(
v03
,
v13
,
v23
),

265 
	gB
=
åùÀ
(
x03
,
v13
,
v23
)+åùÀ(
v03
,
x13
,v23)+åùÀ(v03,v13,
x23
),

266 
	gC
=
åùÀ
(
x03
,
x13
,
v23
)+åùÀ(x03,
v13
,
x23
)+åùÀ(
v03
,x13,x23),

267 
	gD
=
åùÀ
(
x03
,
x13
,
x23
);

268 c⁄° 
	gc⁄vîgí˚_tﬁ
=
g_cubic_sﬁvî_tﬁ
*(
°d
::
Ábs
(
A
)+°d::Ábs(
B
)+°d::Ábs(
C
)+°d::Ábs(
D
));

271 
	g°d
::
ve˘‹
<> 
öãrvÆ_times
;

272 
	gdis¸imö™t
=
B
*B-3*
A
*
C
;

273 if(
	gdis¸imö™t
<=0){

275 i‡–
sim∂ex_vîbo£
 ) { 
°d
::
cout
 << "m⁄Ÿ⁄êcubic" << std::
ídl
; }

278 
	göãrvÆ_times
.
push_back
(0);

279 
	göãrvÆ_times
.
push_back
(1);

281 if(
	gA
==0){

282 
dis¸imö™t
=
C
*C-4*
B
*
D
;

283 if(
	gdis¸imö™t
<=0){

284 
t
=-
C
/(2*
B
);

285 if(
	gt
>=-
g_cubic_sﬁvî_tﬁ
 && 
t
<=1+g_cubic_solver_tol){

286 
t
=
˛amp
(t, 0., 1.);

287 if(
	g°d
::
Ábs
(
sig√d_vﬁume
((1-
t
)*
x0
+t*
x√w0
, (1-t)*
x1
+t*
x√w1
, (1-t)*
x2
+t*
x√w2
, (1-t)*
x3
+t*
x√w3
))<
	gc⁄vîgí˚_tﬁ
)

288 
	gpossibÀ_times
.
push_back
(
t
);

291 
	gt0
, 
	gt1
;

292 if(
	gC
>0Ë
	gt0
=(-
C
-
°d
::
sqπ
(
dis¸imö™t
))/(2*
B
);

293 
	gt0
=(-
C
+
°d
::
sqπ
(
dis¸imö™t
))/(2*
B
);

294 
	gt1
=
D
/(
B
*
t0
);

295 if(
	gt1
<
	gt0
Ë
sw≠
(
t0
,
t1
);

296 if(
	gt0
>=-
g_cubic_sﬁvî_tﬁ
 && 
t0
<=1+g_cubic_sﬁvî_tﬁË
possibÀ_times
.
push_back
(
˛amp
(t0, 0., 1.));

297 if(
	gt1
>=-
g_cubic_sﬁvî_tﬁ
 && 
t1
<=1+g_cubic_sﬁvî_tﬁË
add_unique
(
possibÀ_times
, 
˛amp
(t1, 0., 1.));

300 i‡–
	gsim∂ex_vîbo£
 )

302 
	g°d
::
cout
 << "A =0" << 
°d
::
ídl
;

303  
size_t
 
	gi
 = 0; i < 
	gpossibÀ_times
.
size
(); ++i )

305 
	g°d
::
cout
 << "possibÀ_time: " << 
possibÀ_times
[
i
] << 
°d
::
ídl
;

307 
	g°d
::
cout
 << 
°d
::
ídl
;

312 
	gt0
, 
	gt1
;

313 if(
	gB
>0Ë
	gt0
=(-
B
-
°d
::
sqπ
(
dis¸imö™t
))/(3*
A
);

314 
	gt0
=(-
B
+
°d
::
sqπ
(
dis¸imö™t
))/(3*
A
);

315 
	gt1
=
C
/(3*
A
*
t0
);

316 if(
	gt1
<
	gt0
Ë
sw≠
(
t0
,
t1
);

318 i‡–
	gsim∂ex_vîbo£
 ) { 
	g°d
::
cout
 << "öãrvÆÅimes: " << 
t0
 << ", " << 
t1
 << 
°d
::
ídl
; }

320 
	göãrvÆ_times
.
push_back
(0);

321 if(
	gt0
>0 &&Å0<1)

322 
	göãrvÆ_times
.
push_back
(
t0
);

323 if(
	gt1
>0 &&Å1<1)

324 
	göãrvÆ_times
.
push_back
(
t1
);

325 
	göãrvÆ_times
.
push_back
(1);

329 i‡–
	gsim∂ex_vîbo£
 )

331 
	gn_ßm∂es
 = 20;

332 
	gdt
 = 1.0 / ()
n_ßm∂es
;

333 
	gmö_vÆ
 = 1e30;

334  
	gi
 = 0; i < 
	gn_ßm∂es
; ++i )

336 
	gßm∂e_t
 = 
dt
 * 
i
;

337 
	gßm∂e_vÆ
 = 
sig√d_vﬁume
((1-
ßm∂e_t
)*
x0
+ßm∂e_t*
x√w0
,

338 (1-
ßm∂e_t
)*
x1
+ßm∂e_t*
x√w1
,

339 (1-
ßm∂e_t
)*
x2
+ßm∂e_t*
x√w2
,

340 (1-
ßm∂e_t
)*
x3
+ßm∂e_t*
x√w3
);

342 
	g°d
::
cout
 << "ßm∂e_vÆ: " << 
ßm∂e_vÆ
 << 
°d
::
ídl
;

344 
	gmö_vÆ
 = 
mö
–
mö_vÆ
, 
Ábs
(
ßm∂e_vÆ
) );

346 
	g°d
::
cout
 << "mö_vÆ: " << 
mö_vÆ
 << 
°d
::
ídl
;

352 
	g°d
::
ve˘‹
<> 
öãrvÆ_vÆues
(
öãrvÆ_times
.
size
());

353 
size_t
 
	gi
=0; i<
	göãrvÆ_times
.
size
(); ++i){

354 
	gt
=
öãrvÆ_times
[
i
];

355 
	göãrvÆ_vÆues
[
i
]=
sig√d_vﬁume
((1-
t
)*
x0
+t*
x√w0
, (1-t)*
x1
+t*
x√w1
, (1-t)*
x2
+t*
x√w2
, (1-t)*
x3
+t*
x√w3
);

356 i‡–
	gsim∂ex_vîbo£
 )

358 
	g°d
::
cout
 << "öãrvÆÅime: " << 
t
 << ", vÆue: " << 
öãrvÆ_vÆues
[
i
] << 
°d
::
ídl
;

362 i‡–
	gsim∂ex_vîbo£
 )

364 
	g°d
::
cout
 << "c⁄vîgí˚_tﬁ: " << 
c⁄vîgí˚_tﬁ
 << 
°d
::
ídl
;

368 
size_t
 
	gi
=0; i<
	göãrvÆ_times
.
size
(); ++i){

369 if(
	göãrvÆ_vÆues
[
i
]==0){

370 
possibÀ_times
.
push_back
(
öãrvÆ_times
[
i
]);

371 }if(
	g°d
::
Ábs
(
öãrvÆ_vÆues
[
i
])<
c⁄vîgí˚_tﬁ
){

372 if((
i
==0 || (
öãrvÆ_vÆues
[i-1]>=0 && interval_values[i]>=0) || (interval_values[i-1]<=0 && interval_values[i]<=0))

373 &&(
i
==
öãrvÆ_times
.
size
()-1 || (
öãrvÆ_vÆues
[i+1]>=0 && interval_values[i]>=0) || (interval_values[i+1]<=0 && interval_values[i]<=0))){

374 
possibÀ_times
.
push_back
(
öãrvÆ_times
[
i
]);

379 
size_t
 
	gi
=1; i<
	göãrvÆ_times
.
size
(); ++i){

380 
	géo
=
öãrvÆ_times
[
i
-1], 
	gthi
=öãrvÆ_times[i], 
	gtmid
;

381 
	gvlo
=
öãrvÆ_vÆues
[
i
-1], 
	gvhi
=öãrvÆ_vÆues[i], 
	gvmid
;

382 if((
	gvlo
<0 && 
	gvhi
>0) || (vlo>0 && vhi<0)){

384 
	gÆpha
=
vhi
/(vhi-
vlo
);

385 
	gtmid
=
Æpha
*
éo
+(1-Æpha)*
thi
;

386 
	gôî©i⁄
=0;

388 i‡–
	gsim∂ex_vîbo£
 ) { 
	g°d
::
cout
 << "cubi¯sﬁvîÅﬁ: " << 1e-2*
c⁄vîgí˚_tﬁ
 << 
°d
::
ídl
; }

390 ; 
	gôî©i⁄
<50; ++iteration){

391 
	gvmid
=
sig√d_vﬁume
((1-
tmid
)*
x0
+tmid*
x√w0
, (1-tmid)*
x1
+tmid*
x√w1
,

392 (1-
tmid
)*
x2
+tmid*
x√w2
, (1-tmid)*
x3
+tmid*
x√w3
);

393 if(
	g°d
::
Ábs
(
vmid
)<1e-2*
c⁄vîgí˚_tﬁ
) ;

394 if((
	gvlo
<0 && 
	gvmid
>0) || (vlo>0 && vmid<0)){

395 
	gthi
=
tmid
;

396 
	gvhi
=
vmid
;

398 
	géo
=
tmid
;

399 
	gvlo
=
vmid
;

401 if(
	gôî©i⁄
%2Ë
	gÆpha
=0.5;

402 
	gÆpha
=
vhi
/(vhi-
vlo
);

403 
	gtmid
=
Æpha
*
éo
+(1-Æpha)*
thi
;

405 i‡–
	gôî©i⁄
 >50 && 
sim∂ex_vîbo£
 )

407 
°d
::
cout
 << "cubi¯sﬁvêÁûed" << std::
ídl
;

409 
	gpossibÀ_times
.
push_back
(
tmid
);

412 
s‹t
(
possibÀ_times
.
begö
(),ÖossibÀ_times.
íd
());

414 i‡–
	gsim∂ex_vîbo£
 )

416 
	g°d
::
cout
 << "=================" << 
°d
::
ídl
;

418  
size_t
 
	gi
 = 0; i < 
	gpossibÀ_times
.
size
(); ++i )

420 
	g°d
::
cout
 << "possibÀ_time: " << 
possibÀ_times
[
i
] << 
°d
::
ídl
;

422 
	g°d
::
cout
 << 
°d
::
ídl
;

433 
boﬁ
 
check_edge_edge_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

434 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

435 
cﬁlisi⁄_ïsû⁄
)

437 
	g°d
::
ve˘‹
<> 
possibÀ_times
;

438 
föd_c›œ«rôy_times
(
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
possibÀ_times
);

439 
size_t
 
	ga
=0;á<
	gpossibÀ_times
.
size
(); ++a){

440 
	gt
=
possibÀ_times
[
a
];

441 
Vec3d
 
	gxt0
=(1-
t
)*
x0
+t*
x√w0
, 
	gxt1
=(1-t)*
x1
+t*
x√w1
, 
	gxt2
=(1-t)*
x2
+t*
x√w2
, 
	gxt3
=(1-t)*
x3
+t*
x√w3
;

442 
	gdi°™˚
;

443 
check_edge_edge_¥oximôy
(
xt0
, 
xt1
, 
xt2
, 
xt3
, 
di°™˚
);

444 if(
	gdi°™˚
<
	gcﬁlisi⁄_ïsû⁄
)

445  
	gåue
;

447  
	gÁl£
;

457 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

458 
s0
, 
s2
, 
Vec3d
& 
n‹mÆ
 )

462 
	gn‹mÆ
=
¸oss
(
x1
-
x0
, 
x3
-
x2
);

463 
	gm
=
mag
(
n‹mÆ
);

464 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
)){

465 
	gn‹mÆ
/=
m
;

468 
	gn‹mÆ
=(
s2
*
x2
+(1-s2)*
x3
)-(
s0
*
x0
+(1-s0)*
x1
);

469 
	gm
=
mag
(
n‹mÆ
);

470 if(
	gm
>
	gg_degí_n‹mÆ_ïsû⁄
){

471 
	gn‹mÆ
/=
m
;

474 
Vec3d
 
	gdx
=
x1
-
x0
;

475 if(
	gdx
[0]!=0 || 
dx
[1]!=0){

476 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

477 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

479 
	gdx
=
x3
-
x2
;

480 if(
	gdx
[0]!=0 || 
dx
[1]!=0){

481 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

482 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

484 
	gn‹mÆ
=
Vec3d
(0, 1, 0);

500 
boﬁ
 
check_edge_edge_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

501 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

502 &
s0
, &
s2
, 
Vec3d
 &
n‹mÆ
, &
t
, 
cﬁlisi⁄_ïsû⁄
)

504 
	g°d
::
ve˘‹
<> 
possibÀ_times
;

505 
föd_c›œ«rôy_times
(
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
possibÀ_times
);

506 
size_t
 
	ga
=0;á<
	gpossibÀ_times
.
size
(); ++a){

507 
	gt
=
possibÀ_times
[
a
];

508 
Vec3d
 
	gxt0
=(1-
t
)*
x0
+t*
x√w0
, 
	gxt1
=(1-t)*
x1
+t*
x√w1
, 
	gxt2
=(1-t)*
x2
+t*
x√w2
, 
	gxt3
=(1-t)*
x3
+t*
x√w3
;

509 
	gdi°™˚
;

510 
check_edge_edge_¥oximôy
(
xt0
, 
xt1
, 
xt2
, 
xt3
, 
di°™˚
, 
s0
, 
s2
, 
n‹mÆ
);

511 if(
	gdi°™˚
<
	gcﬁlisi⁄_ïsû⁄
){

513 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
){

515 
	gn‹mÆ
=
¸oss
(
xt1
-
xt0
, 
xt3
-
xt2
);

516 
	gm
=
mag
(
n‹mÆ
);

517 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
)){

518 
	gn‹mÆ
/=
m
;

521 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
–
x0
, 
x1
, 
x2
, 
x3
, 
s0
, 
s2
, 
n‹mÆ
 );

524  
	gåue
;

527  
	gÁl£
;

536 
boﬁ
 
check_poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

537 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

538 
cﬁlisi⁄_ïsû⁄
)

540 
	g°d
::
ve˘‹
<> 
possibÀ_times
;

541 
föd_c›œ«rôy_times
(
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
possibÀ_times
);

542 
size_t
 
	ga
=0;á<
	gpossibÀ_times
.
size
(); ++a){

543 
	gt
=
possibÀ_times
[
a
];

544 
Vec3d
 
	gxt0
=(1-
t
)*
x0
+t*
x√w0
, 
	gxt1
=(1-t)*
x1
+t*
x√w1
, 
	gxt2
=(1-t)*
x2
+t*
x√w2
, 
	gxt3
=(1-t)*
x3
+t*
x√w3
;

545 
	gdi°™˚
;

546 
check_poöt_åüngÀ_¥oximôy
(
xt0
, 
xt1
, 
xt2
, 
xt3
, 
di°™˚
);

547 if(
	gdi°™˚
<
	gcﬁlisi⁄_ïsû⁄
)

548  
	gåue
;

550  
	gÁl£
;

559 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

560 &
s1
, &
s2
, &
s3
,

561 
Vec3d
& 
n‹mÆ
 )

565 
	gn‹mÆ
=
¸oss
(
x2
-
x1
, 
x3
-x1);

566 
	gm
=
mag
(
n‹mÆ
);

567 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
))

569 
	gn‹mÆ
/=
m
;

575 
	gn‹mÆ
=(
s1
*
x1
+
s2
*
x2
+
s3
*
x3
)-
x0
;

576 
	gm
=
mag
(
n‹mÆ
);

577 if(
	gm
>
	gg_degí_n‹mÆ_ïsû⁄
)

579 
	gn‹mÆ
/=
m
;

584 
Vec3d
 
	gdx
=
x2
-
x1
;

585 if(
	gdx
[0]!=0 || 
dx
[1]!=0)

587 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

588 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

592 
	gdx
=
x3
-
x1
;

593 if(
	gdx
[0]!=0 || 
dx
[1]!=0)

595 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

596 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

600 
	gn‹mÆ
=
Vec3d
(0, 1, 0);

615 
boﬁ
 
check_poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

616 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

617 &
s1
, &
s2
, &
s3
, 
Vec3d
 &
n‹mÆ
, &
t
, 
cﬁlisi⁄_ïsû⁄
)

619 
	g°d
::
ve˘‹
<> 
possibÀ_times
;

620 
föd_c›œ«rôy_times
(
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
possibÀ_times
);

622 
size_t
 
	ga
=0;á<
	gpossibÀ_times
.
size
(); ++a){

623 
	gt
=
possibÀ_times
[
a
];

624 
Vec3d
 
	gxt0
=(1-
t
)*
x0
+t*
x√w0
, 
	gxt1
=(1-t)*
x1
+t*
x√w1
, 
	gxt2
=(1-t)*
x2
+t*
x√w2
, 
	gxt3
=(1-t)*
x3
+t*
x√w3
;

625 
	gdi°™˚
;

626 
check_poöt_åüngÀ_¥oximôy
(
xt0
, 
xt1
, 
xt2
, 
xt3
, 
di°™˚
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
);

627 if(
	gdi°™˚
<
	gcﬁlisi⁄_ïsû⁄
){

629 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
)

632 
	gn‹mÆ
=
¸oss
(
xt2
-
xt1
, 
xt3
-xt1);

633 
	gm
=
mag
(
n‹mÆ
);

634 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
)){

635 
	gn‹mÆ
/=
m
;

639 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
–
x0
, 
x1
, 
x2
, 
x3
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
 );

642  
	gåue
;

645  
	gÁl£
;

657 
boﬁ
 
åüngÀ_öãr£˘s_£gmít
(c⁄° 
Vec3d
 &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

658 c⁄° 
Vec3d
 &
x4
, c⁄° Vec3d &
x5
,

659 
a
, 
b
, 
c
, 
d
, 
e
,

660 , 
boﬁ
 
vîbo£
, boﬁ& 
degíî©e
 )

662 c⁄° 
	gmachöe_ïsû⁄
 = 1e-7;

664 
	gdegíî©e
 = 
Ál£
;

666 
	gd
=
sig√d_vﬁume
(
x1
, 
x2
, 
x3
, 
x5
);

667 
	ge
=-
sig√d_vﬁume
(
x1
, 
x2
, 
x3
, 
x4
);

669 i‡–
	gvîbo£
 )

671 
	g°d
::
cout
 << "d: " << 
d
 << 
°d
::
ídl
;

672 
	g°d
::
cout
 << "e: " << 
e
 << 
°d
::
ídl
;

675 i‡––
Ábs
(
d
Ë< 
	gmachöe_ïsû⁄
 ) || ( fabs(
e
) < machine_epsilon ) )

677 i‡–
	gvîbo£
 )

679 
	g°d
::
cout
 << "degíî©e: d = " << 
d
 << ",É = " << 
e
 << 
°d
::
ídl
;

681 
	gdegíî©e
 = 
åue
;

684 if((
	gd
>0Ë^ (
	ge
>0))

686  
	gÁl£
;

692 
	ga
=
sig√d_vﬁume
(
x2
, 
x3
, 
x4
, 
x5
);

693 
	gb
=
sig√d_vﬁume
(
x3
, 
x1
, 
x4
, 
x5
);

694 
	gc
=
sig√d_vﬁume
(
x1
, 
x2
, 
x4
, 
x5
);

696 i‡–
	gvîbo£
 )

698 
	g°d
::
cout
 << "a: " << 
a
 << 
°d
::
ídl
;

699 
	g°d
::
cout
 << "b: " << 
b
 << 
°d
::
ídl
;

700 
	g°d
::
cout
 << "c: " << 
c
 << 
°d
::
ídl
;

703 
	gsum_abc
=
a
+
b
+
c
;

705 i‡–
	gvîbo£
 ) 
	g°d
::
cout
 << "sum_abc: " << 
sum_abc
 << 
°d
::
ídl
;

707 if–
Ábs
(
sum_abc
Ë< 
	gmachöe_ïsû⁄
 )

709 i‡–
	gvîbo£
 ) { 
	g°d
::
cout
 << "sum_ab¯degíî©e" << 
°d
::
ídl
; }

710 
	gdegíî©e
 = 
åue
;

711  
	gÁl£
;

714 
	gsum_de
=
d
+
e
;

716 i‡–
	gvîbo£
 ) 
	g°d
::
cout
 << "sum_de: " << 
sum_de
 << 
°d
::
ídl
;

718 if–
Ábs
(
sum_de
Ë< 
	gmachöe_ïsû⁄
 )

720 i‡–
	gvîbo£
 ) { 
	g°d
::
cout
 << "sum_dêdegíî©e" << 
°d
::
ídl
; }

721 
	gdegíî©e
 = 
åue
;

722  
	gÁl£
;

726 i‡––
Ábs
(
a
Ë< 
	gmachöe_ïsû⁄
 ) || ( fabs(
b
Ë< machöe_ïsû⁄ ) || (Ábs(
c
) < machine_epsilon) )

728 i‡–
	gvîbo£
 ) { 
	g°d
::
cout
 << "degíî©e:á = " << 
a
 << ", b = " << 
b
 << ", c = " << 
c
 << 
°d
::
ídl
; }

729 
	gdegíî©e
 = 
åue
;

733 if((
	ga
>0Ë^ (
	gb
>0))

735  
	gÁl£
;

738 if((
	ga
>0Ë^ (
	gc
>0))

740  
	gÁl£
;

743 
	govî_abc
=1/
sum_abc
;

744 
	ga
*=
ovî_abc
;

745 
	gb
*=
ovî_abc
;

746 
	gc
*=
ovî_abc
;

748 
	govî_de
=1/
sum_de
;

749 
	gd
*=
ovî_de
;

750 
	ge
*=
ovî_de
;

752 i‡–
	gvîbo£
 )

754 
	g°d
::
cout
 << "n‹mÆized co‹ds: " << 
a
 << " " << 
b
 << " " << 
c
 << " " << 
d
 << " " << 
e
 << 
°d
::
ídl
;

757  
	gåue
;

767 
boﬁ
 
check_edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
 &
xedge0
, c⁄° Vec3d &
xedge1
,

768 c⁄° 
Vec3d
 &
xåi0
, c⁄° Vec3d &
xåi1
, c⁄° Vec3d &
xåi2
,

769 
b¨y_e0
, 
b¨y_e1
, 
b¨y_t0
, 
b¨y_t1
, 
b¨y_t2
,

770 
tﬁî™˚
, 
boﬁ
 
degíî©e_cou¡s_as_öãr£˘i⁄
, boﬁ 
vîbo£
 )

772 
boﬁ
 
	gis_degíî©e
;

773 i‡–
åüngÀ_öãr£˘s_£gmít
–
xåi0
, 
xåi1
, 
xåi2
, 
xedge0
, 
xedge1
,

774 
b¨y_t0
, 
b¨y_t1
, 
b¨y_t2
, 
b¨y_e0
, 
b¨y_e1
,

775 
tﬁî™˚
, 
vîbo£
, 
is_degíî©e
 ) )

777 i‡–
	gis_degíî©e
 )

781 i‡–
	gdegíî©e_cou¡s_as_öãr£˘i⁄
 )

783  
	gåue
;

787  
	gÁl£
;

793  
	gåue
;

797  
	gÁl£
;

809 
boﬁ
 
vîãx_is_ö_ãåahedr⁄
(c⁄° 
Vec3d
 &
p
,

810 c⁄° 
Vec3d
 &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
, c⁄° Vec3d &
x4
, 
ïsû⁄
 )

812 
	gdi°™˚
;

815 
	ga
 = 
sig√d_vﬁume
(
p
, 
x1
, 
x2
, 
x3
);

817 i‡(
Ábs
(
a
Ë< 
	gïsû⁄
)

819 
check_poöt_åüngÀ_¥oximôy
(
p
, 
x1
, 
x2
, 
x3
, 
di°™˚
);

820 i‡–
	gdi°™˚
 < 
	gïsû⁄
 )

822  
	gåue
;

827 
	gb
 = 
sig√d_vﬁume
(
p
, 
x2
, 
x4
, 
x3
);

829 i‡(
Ábs
(
b
Ë< 
	gïsû⁄
)

831 
check_poöt_åüngÀ_¥oximôy
(
p
, 
x2
, 
x4
, 
x3
, 
di°™˚
);

832 i‡–
	gdi°™˚
 < 
	gïsû⁄
 )

834  
	gåue
;

838 i‡((
	ga
 > 
	gïsû⁄
Ë^ (
	gb
 >Épsilon))

840  
	gÁl£
;

844 
	gc
 = 
sig√d_vﬁume
(
p
, 
x1
, 
x4
, 
x2
);

845 i‡(
Ábs
(
c
Ë< 
	gïsû⁄
)

847 
check_poöt_åüngÀ_¥oximôy
(
p
, 
x1
, 
x4
, 
x2
, 
di°™˚
);

848 i‡–
	gdi°™˚
 < 
	gïsû⁄
 )

850  
	gåue
;

854 i‡((
	ga
 > 
	gïsû⁄
Ë^ (
	gc
 >Épsilon))

856  
	gÁl£
;

860 
	gd
 = 
sig√d_vﬁume
(
p
, 
x1
, 
x3
, 
x4
);

861 i‡(
Ábs
(
d
Ë< 
	gïsû⁄
)

863 
check_poöt_åüngÀ_¥oximôy
(
p
, 
x1
, 
x3
, 
x4
, 
di°™˚
);

864 i‡–
	gdi°™˚
 < 
	gïsû⁄
 )

866  
	gåue
;

870 i‡((
	ga
 > 
	gïsû⁄
Ë^ (
	gd
 >Épsilon))

872  
	gÁl£
;

876 i‡–(
Ábs
(
a
Ë< 
	gïsû⁄
Ë|| (Ábs(
b
Ë<Épsû⁄Ë|| (Ábs(
c
Ë<Épsû⁄Ë|| (Ábs(
d
) <Épsilon) )

878  
	gÁl£
;

881  
	gåue
;

893 
boﬁ
 
	$poöt_£gmít_cﬁlisi⁄
(c⁄° 
Vec2d
& 
x0
, c⁄° Vec2d& 
x√w0
, 
size_t
 ,

894 c⁄° 
Vec2d
& 
x1
, c⁄° Vec2d& 
x√w1
, 
size_t
 ,

895 c⁄° 
Vec2d
& 
x2
, c⁄° Vec2d& 
x√w2
, 
size_t
 ,

896 & 
edge_Æpha
, 
Vec2d
& 
n‹mÆ
, & 
ªl_di•
)

898 
t
;

899 
boﬁ
 
ªsu…
 = 
	`check_poöt_edge_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x√w0
, 
x√w1
, 
x√w2
, 
edge_Æpha
, 
n‹mÆ
, 
t
, 
g_cﬁlisi⁄_ïsû⁄
 );

901 i‡–
ªsu…
 )

903 
Vec2d
 
dx0
 = 
x√w0
 - 
x0
;

904 
Vec2d
 
dx1
 = 
x√w1
 - 
x1
;

905 
Vec2d
 
dx2
 = 
x√w2
 - 
x2
;

906 
ªl_di•
 = 
	`dŸ
–
n‹mÆ
, 
dx0
 - (
edge_Æpha
)*
dx1
 - (1.0-edge_Æpha)*
dx2
 );

909  
ªsu…
;

910 
	}
}

912 
boﬁ
 
	$poöt_£gmít_cﬁlisi⁄
(c⁄° 
Vec2d
& 
x0
, c⁄° Vec2d& 
x√w0
, 
size_t
 ,

913 c⁄° 
Vec2d
& 
x1
, c⁄° Vec2d& 
x√w1
, 
size_t
 ,

914 c⁄° 
Vec2d
& 
x2
, c⁄° Vec2d& 
x√w2
, 
size_t
 )

916 
boﬁ
 
ªsu…
 = 
	`check_poöt_edge_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x√w0
, 
x√w1
, 
x√w2
, 
g_cﬁlisi⁄_ïsû⁄
 );

917  
ªsu…
;

918 
	}
}

925 
boﬁ
 
	$£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 ,

926 c⁄° 
Vec2d
& 
x1
, 
size_t
 ,

927 c⁄° 
Vec2d
& 
x2
, 
size_t
 ,

928 c⁄° 
Vec2d
& 
x3
, 
size_t
 )

930 
s0
, 
s2
;

931  
	`check_edge_edge_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
s0
, 
s2
, 
g_cﬁlisi⁄_ïsû⁄
 );

932 
	}
}

935 
boﬁ
 
	$£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 ,

936 c⁄° 
Vec2d
& 
x1
, 
size_t
 ,

937 c⁄° 
Vec2d
& 
x2
, 
size_t
 ,

938 c⁄° 
Vec2d
& 
x3
, 
size_t
 ,

939 &
s0
, & 
s2
 )

941  
	`check_edge_edge_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
s0
, 
s2
, 
g_cﬁlisi⁄_ïsû⁄
 );

942 
	}
}

950 
boﬁ
 
	$poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

951 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

952 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

953 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 )

955 
boﬁ
 
cubic_ªsu…
 = 
	`check_poöt_åüngÀ_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
g_cﬁlisi⁄_ïsû⁄
 );

956  
cubic_ªsu…
;

957 
	}
}

960 
boﬁ
 
	$poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

961 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

962 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

963 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 ,

964 & 
b¨y1
, & 
b¨y2
, & 
b¨y3
,

965 
Vec3d
& 
n‹mÆ
,

966 & 
ªœtive_n‹mÆ_di•œ˚mít
 )

969 
t
;

970 
boﬁ
 
cubic_ªsu…
 = 
	`check_poöt_åüngÀ_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x3
,

971 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
,

972 
b¨y1
, 
b¨y2
, 
b¨y3
,

973 
n‹mÆ
, 
t
, 
g_cﬁlisi⁄_ïsû⁄
 );

975 
Vec3d
 
dx0
 = 
x√w0
 - 
x0
;

976 
Vec3d
 
dx1
 = 
x√w1
 - 
x1
;

977 
Vec3d
 
dx2
 = 
x√w2
 - 
x2
;

978 
Vec3d
 
dx3
 = 
x√w3
 - 
x3
;

979 
ªœtive_n‹mÆ_di•œ˚mít
 = 
	`dŸ
–
n‹mÆ
, 
dx0
 - 
b¨y1
*
dx1
 - 
b¨y2
*
dx2
 - 
b¨y3
*
dx3
 );

981  
cubic_ªsu…
;

982 
	}
}

985 
boﬁ
 
	$£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

986 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

987 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

988 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 )

990 
boﬁ
 
cubic_ªsu…
 = 
	`check_edge_edge_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x3
,

991 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
,

992 
g_cﬁlisi⁄_ïsû⁄
 );

994  
cubic_ªsu…
;

995 
	}
}

998 
boﬁ
 
	$£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

999 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

1000 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

1001 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 ,

1002 & 
b¨y0
, & 
b¨y2
,

1003 
Vec3d
& 
n‹mÆ
,

1004 & 
ªœtive_n‹mÆ_di•œ˚mít
 )

1006 
t
;

1007 
boﬁ
 
cubic_ªsu…
 = 
	`check_edge_edge_cﬁlisi⁄
–
x0
, 
x1
, 
x2
, 
x3
,

1008 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
,

1009 
b¨y0
, 
b¨y2
,

1010 
n‹mÆ
, 
t
,

1011 
g_cﬁlisi⁄_ïsû⁄
 );

1013 
Vec3d
 
dx0
 = 
x√w0
 - 
x0
;

1014 
Vec3d
 
dx1
 = 
x√w1
 - 
x1
;

1015 
Vec3d
 
dx2
 = 
x√w2
 - 
x2
;

1016 
Vec3d
 
dx3
 = 
x√w3
 - 
x3
;

1018 
ªœtive_n‹mÆ_di•œ˚mít
 = 
	`dŸ
–
n‹mÆ
, 
b¨y0
*
dx0
 + (1.0-b¨y0)*
dx1
 - 
b¨y2
*
dx2
 - (1.0-b¨y2)*
dx3
 );

1020  
cubic_ªsu…
;

1021 
	}
}

1029 
boﬁ
 
	$£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

1030 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

1031 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

1032 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

1033 c⁄° 
Vec3d
& 
x4
, 
size_t
 ,

1034 
boﬁ
 
degíî©e_cou¡s_as_öãr£˘i⁄
,

1035 
boﬁ
 
vîbo£
 )

1037 
b¨y
[5];

1038  
	`check_edge_åüngÀ_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

1039 
b¨y
[0], bary[1], bary[2], bary[3], bary[4],

1040 
g_cﬁlisi⁄_ïsû⁄
, 
degíî©e_cou¡s_as_öãr£˘i⁄
, 
vîbo£
 );

1042 
	}
}

1045 
boﬁ
 
	$£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

1046 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

1047 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

1048 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

1049 c⁄° 
Vec3d
& 
x4
, 
size_t
 ,

1050 & 
b¨y0
, & 
b¨y1
, & 
b¨y2
, & 
b¨y3
, & 
b¨y4
,

1051 
boﬁ
 
degíî©e_cou¡s_as_öãr£˘i⁄
,

1052 
boﬁ
 
vîbo£
 )

1054  
	`check_edge_åüngÀ_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

1055 
b¨y0
, 
b¨y1
, 
b¨y2
, 
b¨y3
, 
b¨y4
,

1056 
g_cﬁlisi⁄_ïsû⁄
, 
degíî©e_cou¡s_as_öãr£˘i⁄
, 
vîbo£
 );

1057 
	}
}

1061 
boﬁ
 
	$poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

1062 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

1063 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

1064 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

1065 c⁄° 
Vec3d
& 
x4
, 
size_t
 )

1067  
	`vîãx_is_ö_ãåahedr⁄
(
x0
,
x1
,
x2
,
x3
,
x4
,
g_cﬁlisi⁄_ïsû⁄
);

1068 
	}
}

	@common/fileio.cpp

9 
	~<fûeio.h
>

10 
	~<bf°ªam.h
>

12 c⁄° 
	gNUM_RAYTRACER_BOOLEAN_PARAMETERS
 = 2;

13 c⁄° 
	gNUM_RAYTRACER_FLOAT_PARAMETERS
 = 9;

21 
boﬁ
 
	$wrôe_mesh_fûe
–
cuº_t
,

22 
nvîts
,

23 c⁄° * 
vîts
,

24 c⁄° * 
mas£s
,

25 
¡ris
,

26 c⁄° * 
åis
,

27 c⁄° *
fûíame_f‹m©
, ...)

29 
va_li°
 
≠
;

30 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

31 
bof°ªam
 
	`outfûe
–
fûíame_f‹m©
, 
≠
 );

32 
	`va_íd
(
≠
);

34 
outfûe
.
	`wrôe_ídünôy
();

36 
outfûe
 << 
cuº_t
;

38 
outfûe
 << 
nvîts
;

39  
i
 = 0; i < 
nvîts
; ++i )

41 
outfûe
 << 
vîts
[3*
i
+0];

42 
outfûe
 << 
vîts
[3*
i
+1];

43 
outfûe
 << 
vîts
[3*
i
+2];

46  
i
 = 0; i < 
nvîts
; ++i )

48 
outfûe
 << 
mas£s
[
i
];

51 
outfûe
 << 
¡ris
;

53  
t
 = 0;Å < 
¡ris
; ++t )

55 
outfûe
 << 
åis
[3*
t
+0];

56 
outfûe
 << 
åis
[3*
t
+1];

57 
outfûe
 << 
åis
[3*
t
+2];

60 
outfûe
.
	`˛o£
();

62  
outfûe
.
	`good
();

63 
	}
}

71 
boﬁ
 
	$wrôe_mesh_fûe_wôh_vñocôõs
–
cuº_t
,

72 
nvîts
,

73 c⁄° * 
vîts
,

74 c⁄° * 
vñocôõs
,

75 c⁄° * 
mas£s
,

76 
¡ris
,

77 c⁄° * 
åis
,

78 c⁄° *
fûíame_f‹m©
, ...)

81 
va_li°
 
≠
;

82 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

83 
bof°ªam
 
	`outfûe
–
fûíame_f‹m©
, 
≠
 );

84 
	`va_íd
(
≠
);

86 
outfûe
.
	`wrôe_ídünôy
();

88 
outfûe
 << 
cuº_t
;

90 
outfûe
 << 
nvîts
;

91  
i
 = 0; i < 
nvîts
; ++i )

93 
outfûe
 << 
vîts
[3*
i
+0];

94 
outfûe
 << 
vîts
[3*
i
+1];

95 
outfûe
 << 
vîts
[3*
i
+2];

98  
i
 = 0; i < 
nvîts
; ++i )

100 
outfûe
 << 
vñocôõs
[3*
i
+0];

101 
outfûe
 << 
vñocôõs
[3*
i
+1];

102 
outfûe
 << 
vñocôõs
[3*
i
+2];

105  
i
 = 0; i < 
nvîts
; ++i )

107 
outfûe
 << 
mas£s
[
i
];

110 
outfûe
 << 
¡ris
;

112  
t
 = 0;Å < 
¡ris
; ++t )

114 
outfûe
 << 
åis
[3*
t
+0];

115 
outfûe
 << 
åis
[3*
t
+1];

116 
outfûe
 << 
åis
[3*
t
+2];

119  
outfûe
.
	`good
();

120 
	}
}

129 
boﬁ
 
	$ªad_mesh_fûe
–* 
cuº_t
,

130 * 
nvîts
,

131 ** 
vîts
,

132 ** 
mas£s
,

133 * 
¡ris
,

134 ** 
åis
,

135 c⁄° *
fûíame_f‹m©
, ...)

137 
va_li°
 
≠
;

138 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

139 
bif°ªam
 
	`öfûe
–
fûíame_f‹m©
, 
≠
 );

140 
	`va_íd
(
≠
);

142 
	`as£π
–
öfûe
.
	`good
() );

144 
öfûe
.
	`ªad_ídünôy
();

146 
öfûe
 >> *
cuº_t
;

148 
öfûe
 >> *
nvîts
;

150 *
vîts
 = 
√w
 [3*(*
nvîts
)];

152  
i
 = 0; i < (*
nvîts
); ++i )

154 
öfûe
 >> (*
vîts
)[3*
i
+0];

155 
öfûe
 >> (*
vîts
)[3*
i
+1];

156 
öfûe
 >> (*
vîts
)[3*
i
+2];

159 *
mas£s
 = 
√w
 [*
nvîts
];

161  
i
 = 0; i < *
nvîts
; ++i )

163 
öfûe
 >> (*
mas£s
)[
i
];

166 
öfûe
 >> *
¡ris
;

168 *
åis
 = 
√w
 [3*(*
¡ris
)];

170  
t
 = 0;Å < *
¡ris
; ++t )

172 
öfûe
 >> (*
åis
)[3*
t
+0];

173 
öfûe
 >> (*
åis
)[3*
t
+1];

174 
öfûe
 >> (*
åis
)[3*
t
+2];

177 
öfûe
.
	`˛o£
();

179  
öfûe
.
	`good
();

180 
	}
}

189 
boﬁ
 
	$ªad_mesh_fûe_wôh_vñocôõs
–* 
cuº_t
,

190 * 
nvîts
,

191 ** 
vîts
,

192 ** 
vñocôõs
,

193 ** 
mas£s
,

194 * 
¡ris
,

195 ** 
åis
,

196 c⁄° *
fûíame_f‹m©
, ...)

198 
va_li°
 
≠
;

199 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

200 
bif°ªam
 
	`öfûe
–
fûíame_f‹m©
, 
≠
 );

201 
	`va_íd
(
≠
);

203 
	`as£π
–
öfûe
.
	`good
() );

205 
öfûe
.
	`ªad_ídünôy
();

207 
öfûe
 >> *
cuº_t
;

209 
öfûe
 >> *
nvîts
;

211 *
vîts
 = 
√w
 [3*(*
nvîts
)];

213  
i
 = 0; i < (*
nvîts
); ++i )

215 
öfûe
 >> (*
vîts
)[3*
i
+0];

216 
öfûe
 >> (*
vîts
)[3*
i
+1];

217 
öfûe
 >> (*
vîts
)[3*
i
+2];

220 *
vñocôõs
 = 
√w
 [3*(*
nvîts
)];

222  
i
 = 0; i < (*
nvîts
); ++i )

224 
öfûe
 >> (*
vñocôõs
)[3*
i
+0];

225 
öfûe
 >> (*
vñocôõs
)[3*
i
+1];

226 
öfûe
 >> (*
vñocôõs
)[3*
i
+2];

229 *
mas£s
 = 
√w
 [*
nvîts
];

231  
i
 = 0; i < *
nvîts
; ++i )

233 
öfûe
 >> (*
mas£s
)[
i
];

236 
öfûe
 >> *
¡ris
;

238 *
åis
 = 
√w
 [3*(*
¡ris
)];

240  
t
 = 0;Å < *
¡ris
; ++t )

242 
öfûe
 >> (*
åis
)[3*
t
+0];

243 
öfûe
 >> (*
åis
)[3*
t
+1];

244 
öfûe
 >> (*
åis
)[3*
t
+2];

247 
öfûe
.
	`˛o£
();

249  
öfûe
.
	`good
();

251 
	}
}

260 
	$‰ì_mesh_d©a
–* 
vîts
,

261 * 
mas£s
,

262 * 
åis
 )

264 
dñëe
[] 
vîts
;

265 
dñëe
[] 
mas£s
;

266 
dñëe
[] 
åis
;

267 
	}
}

276 
	$‰ì_mesh_d©a_wôh_vñocôõs
–* 
vîts
,

277 * 
vñocôõs
,

278 * 
mas£s
,

279 * 
åis
 )

281 
dñëe
[] 
vîts
;

282 
dñëe
[] 
vñocôõs
;

283 
dñëe
[] 
mas£s
;

284 
dñëe
[] 
åis
;

285 
	}
}

299 
boﬁ
 
	$wrôe_øyåa˚r_fûe
–c⁄° 
boﬁ
 *
boﬁónP¨amëîs
,

300 c⁄° *
ÊﬂtP¨amëîs
,

301 c⁄° *
fûíame_f‹m©
, ... )

303 
va_li°
 
≠
;

304 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

305 
bof°ªam
 
	`outfûe
–
fûíame_f‹m©
, 
≠
 );

306 
	`va_íd
(
≠
);

308 
outfûe
.
	`wrôe_ídünôy
();

310  
i
 = 0; i < 
NUM_RAYTRACER_BOOLEAN_PARAMETERS
; ++i )

312 
outfûe
 << 
boﬁónP¨amëîs
[
i
];

315  
i
 = 0; i < 
NUM_RAYTRACER_FLOAT_PARAMETERS
; ++i )

317 
outfûe
 << 
ÊﬂtP¨amëîs
[
i
];

320 
outfûe
.
	`˛o£
();

322  
outfûe
.
	`good
();

323 
	}
}

333 
boﬁ
 
	$ªad_øyåa˚r_fûe
–
boﬁ
 **
boﬁónP¨amëîs
,

334 **
ÊﬂtP¨amëîs
,

335 c⁄° *
fûíame_f‹m©
, ... )

337 
va_li°
 
≠
;

338 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

339 
bif°ªam
 
	`öfûe
–
fûíame_f‹m©
, 
≠
 );

340 
	`va_íd
(
≠
);

342 
	`as£π
–
öfûe
.
	`good
() );

344 
öfûe
.
	`ªad_ídünôy
();

346 *
boﬁónP¨amëîs
 = 
√w
 
boﬁ
[
NUM_RAYTRACER_BOOLEAN_PARAMETERS
];

348  
i
 = 0; i < 
NUM_RAYTRACER_BOOLEAN_PARAMETERS
; ++i )

350 
öfûe
 >> (*
boﬁónP¨amëîs
)[
i
];

353 *
ÊﬂtP¨amëîs
 = 
√w
 [
NUM_RAYTRACER_FLOAT_PARAMETERS
];

355  
i
 = 0; i < 
NUM_RAYTRACER_FLOAT_PARAMETERS
; ++i )

357 
öfûe
 >> (*
ÊﬂtP¨amëîs
)[
i
];

360 
öfûe
.
	`˛o£
();

362  
öfûe
.
	`good
();

364 
	}
}

373 
	$‰ì_øyåa˚r_d©a
–
boﬁ
 *
boﬁónP¨amëîs
,

374 *
ÊﬂtP¨amëîs
 )

376 
dñëe
[] 
boﬁónP¨amëîs
;

377 
dñëe
[] 
ÊﬂtP¨amëîs
;

378 
	}
}

387 
boﬁ
 
	$wrôe_m¨kî_∑πi˛e_fûe
–
≈¨ti˛es
,

388 c⁄° * 
x
,

389 c⁄° *
fûíame_f‹m©
, ... )

391 
va_li°
 
≠
;

392 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

393 
bof°ªam
 
	`outfûe
–
fûíame_f‹m©
, 
≠
 );

394 
	`va_íd
(
≠
);

396 
outfûe
.
	`wrôe_ídünôy
();

398 
outfûe
 << 
≈¨ti˛es
;

400  
i
 = 0; i < 
≈¨ti˛es
; ++i )

402 
outfûe
 << 
x
[3*
i
+0];

403 
outfûe
 << 
x
[3*
i
+1];

404 
outfûe
 << 
x
[3*
i
+2];

407 
outfûe
.
	`˛o£
();

408  
outfûe
.
	`good
();

409 
	}
}

418 
boﬁ
 
	$ªad_m¨kî_∑πi˛e_fûe
–* 
≈¨ti˛es
,

419 ** 
x
,

420 c⁄° *
fûíame_f‹m©
, ... )

422 
va_li°
 
≠
;

423 
	`va_°¨t
(
≠
, 
fûíame_f‹m©
);

424 
bif°ªam
 
	`öfûe
–
fûíame_f‹m©
, 
≠
 );

425 
	`va_íd
(
≠
);

427 i‡–!
öfûe
.
	`good
() )

429 
	`Ârötf
–
°dîr
, "bad infile\n" );

430  
Ál£
;

433 
öfûe
.
	`ªad_ídünôy
();

435 
öfûe
 >> *
≈¨ti˛es
;

437 (*
x
Ë
√w
 [ 3 * (*
≈¨ti˛es
) ];

439  
i
 = 0; i < *
≈¨ti˛es
; ++i )

441 
öfûe
 >> (*
x
)[3*
i
+0];

442 
öfûe
 >> (*
x
)[3*
i
+1];

443 
öfûe
 >> (*
x
)[3*
i
+2];

446 
öfûe
.
	`˛o£
();

447  
öfûe
.
	`good
();

448 
	}
}

458 
	$‰ì_m¨kî_∑πi˛e_d©a
–* 
x
 )

460 
dñëe
[] 
x
;

461 
	}
}

	@common/fileio.h

2 #i‚de‡
FILEIO_H


3 
	#FILEIO_H


	)

5 #ifde‡
__˝lu•lus


9 c⁄° 
NUM_RAYTRACER_BOOLEAN_PARAMETERS
;

10 c⁄° 
NUM_RAYTRACER_FLOAT_PARAMETERS
;

28 
boﬁ
 
wrôe_mesh_fûe
–
cuº_t
,

29 
nvîts
,

30 c⁄° * 
vîts
,

31 c⁄° * 
mas£s
,

32 
¡ris
,

33 c⁄° * 
åis
,

34 c⁄° *
fûíame_f‹m©
, ...);

36 
boﬁ
 
wrôe_mesh_fûe_wôh_vñocôõs
–
cuº_t
,

37 
nvîts
,

38 c⁄° * 
vîts
,

39 c⁄° * 
vñocôõs
,

40 c⁄° * 
mas£s
,

41 
¡ris
,

42 c⁄° * 
åis
,

43 c⁄° *
fûíame_f‹m©
, ...);

45 
boﬁ
 
ªad_mesh_fûe
–* 
cuº_t
,

46 * 
nvîts
,

47 ** 
vîts
,

48 ** 
mas£s
,

49 * 
¡ris
,

50 ** 
åis
,

51 c⁄° *
fûíame_f‹m©
, ...);

53 
boﬁ
 
ªad_mesh_fûe_wôh_vñocôõs
–* 
cuº_t
,

54 * 
nvîts
,

55 ** 
vîts
,

56 ** 
vñocôõs
,

57 ** 
mas£s
,

58 * 
¡ris
,

59 ** 
åis
,

60 c⁄° *
fûíame_f‹m©
, ...);

62 
‰ì_mesh_d©a
–* 
vîts
,

63 * 
mas£s
,

64 * 
åis
 );

66 
‰ì_mesh_d©a_wôh_vñocôõs
–* 
vîts
,

67 * 
vñocôõs
,

68 * 
mas£s
,

69 * 
åis
 );

90 
boﬁ
 
wrôe_øyåa˚r_fûe
–c⁄° boﬁ *
boﬁónP¨amëîs
,

91 c⁄° *
ÊﬂtP¨amëîs
,

92 c⁄° *
fûíame_f‹m©
, ... );

94 
boﬁ
 
ªad_øyåa˚r_fûe
–boﬁ **
boﬁónP¨amëîs
,

95 **
ÊﬂtP¨amëîs
,

96 c⁄° *
fûíame_f‹m©
, ... );

98 
‰ì_øyåa˚r_d©a
–
boﬁ
 *
boﬁónP¨amëîs
,

99 *
ÊﬂtP¨amëîs
 );

111 
boﬁ
 
wrôe_m¨kî_∑πi˛e_fûe
–
≈¨ti˛es
,

112 c⁄° * 
x
,

113 c⁄° *
fûíame_f‹m©
, ... );

115 
boﬁ
 
ªad_m¨kî_∑πi˛e_fûe
–* 
≈¨ti˛es
,

116 ** 
x
,

117 c⁄° *
fûíame_f‹m©
, ... );

119 
‰ì_m¨kî_∑πi˛e_d©a
–* 
x
 );

127 #ifde‡
__˝lu•lus


	@common/gluvi.cpp

2 
	~<cm©h
>

3 
	~<c°d¨g
>

4 
	~<c°dlib
>

5 
	~<f°ªam
>

6 
	~<gluvi.h
>

7 
	~<vec.h
>

8 #ifde‡
_MSC_VER


9 
	~<wödows.h
>

10 
	~<gl/GL.h
>

12 
	~<O≥nGL/O≥nGL.h
>

16 
usög
 
«me•a˚
 
	g°d
;

18 
«me•a˚
 
	gGluvi
{

20 #i‚de‡
M_PI


21 c⁄° 
	gM_PI
 = 3.14159265358979323846f;

24 
boﬁ
 
	gèkög_s¸ìnshŸ
 = 
Ál£
;

25 
GLuöt
 
	gs¸ìnshŸ_fbo
;

28 
	gT¨gë3D
::

29 
T¨gë3D
(
èrgë_
[3], 
di°_
, 
hódög_
, 
pôch_
, 
fovy_
, 
√¨_˛ù_Á˘‹_
, 
Ár_˛ù_Á˘‹_
)

30 : 
di°
(
di°_
), 
hódög
(
hódög_
), 
pôch
(
pôch_
),

31 
deÁu…_di°
(
di°_
), 
deÁu…_hódög
(
hódög_
), 
deÁu…_pôch
(
pôch_
),

32 
fovy
(
fovy_
),

33 
√¨_˛ù_Á˘‹
(
√¨_˛ù_Á˘‹_
), 
Ár_˛ù_Á˘‹
(
Ár_˛ù_Á˘‹_
),

34 
a˘i⁄_mode
(
INACTIVE
),

35 
ﬁdmou£x
(0), 
ﬁdmou£y
(0)

37 if(
	gèrgë_
){

38 
	gèrgë
[0]=
èrgë_
[0];

39 
	gèrgë
[1]=
èrgë_
[1];

40 
	gèrgë
[2]=
èrgë_
[2];

42 
	gèrgë
[0]=0;

43 
	gèrgë
[1]=0;

44 
	gèrgë
[2]=0;

46 
	gdeÁu…_èrgë
[0]=
èrgë
[0];

47 
	gdeÁu…_èrgë
[1]=
èrgë
[1];

48 
	gdeÁu…_èrgë
[2]=
èrgë
[2];

51 
	gT¨gë3D
::

52 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
)

54 if(
	g°©e
==
GLUT_UP
)

55 
a˘i⁄_mode
=
INACTIVE
;

56 if(
	gbuâ⁄
==
GLUT_LEFT_BUTTON
)

57 
a˘i⁄_mode
=
ROTATE
;

58 if(
	gbuâ⁄
==
GLUT_MIDDLE_BUTTON
)

59 
a˘i⁄_mode
=
TRUCK
;

60 if(
	gbuâ⁄
==
GLUT_RIGHT_BUTTON
)

61 
a˘i⁄_mode
=
DOLLY
;

62 
	gﬁdmou£x
=
x
;

63 
	gﬁdmou£y
=
y
;

66 
	gT¨gë3D
::

67 
døg
(
x
, 
y
)

69 
	ga˘i⁄_mode
){

70 
	gINACTIVE
:

72 
	gROTATE
:

73 
hódög
+=0.007f*(
ﬁdmou£x
-
x
);

74 if(
	ghódög
<-
	gM_PI
Ëhódög+=2.0f*()
M_PI
;

75 if(
	ghódög
>
	gM_PI
Ëhódög-=2.0f*()
M_PI
;

76 
	gpôch
+=0.007f*(
ﬁdmou£y
-
y
);

77 if(
	gpôch
<-0.5*
	gM_PI
Ëpôch=-0.5f*()
M_PI
;

78 if(
	gpôch
>0.5*
	gM_PI
Ëpôch=0.5f*()
M_PI
;

80 
	gTRUCK
:

81 
èrgë
[0]+=(0.002f*
di°
)*
cos
(
hódög
)*(
ﬁdmou£x
-
x
);

82 
	gèrgë
[1]-=(0.002f*
di°
)*(
ﬁdmou£y
-
y
);

83 
	gèrgë
[2]-=(0.002f*
di°
)*
sö
(
hódög
)*(
ﬁdmou£x
-
x
);

85 
	gDOLLY
:

86 
di°
*=
pow
(1.01f, 
ﬁdmou£y
-
y
 + 
x
-
ﬁdmou£x
);

89 
	gﬁdmou£x
=
x
;

90 
	gﬁdmou£y
=
y
;

91 
glutPo°Redi•œy
();

94 
	gT¨gë3D
::

95 
ªtu∫_to_deÁu…
()

97 
èrgë
[0]=
deÁu…_èrgë
[0];

98 
	gèrgë
[1]=
deÁu…_èrgë
[1];

99 
	gèrgë
[2]=
deÁu…_èrgë
[2];

100 
	gdi°
=
deÁu…_di°
;

101 
	ghódög
=
deÁu…_hódög
;

102 
	gpôch
=
deÁu…_pôch
;

105 
	gT¨gë3D
::

106 
å™sf‹m_mou£
(
x
, 
y
, 
øy_‹igö
[3], 
øy_dúe˘i⁄
[3])

108 
	gch
=
cos
(
hódög
), 
	gsh
=
sö
(heading);

109 
	g˝
=
cos
(
pôch
), 
	g•
=
sö
(pitch);

111 
	gøy_‹igö
[0]=
èrgë
[0]+
di°
*
sh
*
˝
;

112 
	gøy_‹igö
[1]=
èrgë
[1]-
di°
*
•
;

113 
	gøy_‹igö
[2]=
èrgë
[2]+
di°
*
ch
*
˝
;

115 
	gsˇÀ
=0.5f*
èn
(
fovy
)/
wöheight
;

116 
	gˇmx
=(
x
-0.5f*
wöwidth
)*
sˇÀ
, 
	gˇmy
=(0.5f*
wöheight
-
y
)*sˇÀ, 
	gˇmz
=-1.0f;

118 
	gpx
=
ˇmx
, 
	gpy
=
ˇmy
*
˝
-
ˇmz
*
•
, 
	gpz
=camy*sp+camz*cp;

119 
	gøy_dúe˘i⁄
[0]=
px
*
ch
+
pz
*
sh
;

120 
	gøy_dúe˘i⁄
[1]=
py
;

121 
	gøy_dúe˘i⁄
[2]=-
px
*
sh
+
pz
*
ch
;

124 
	gøy_‹igö
[0]+=
√¨_˛ù_Á˘‹
*
di°
*
øy_dúe˘i⁄
[0];

125 
	gøy_‹igö
[1]+=
√¨_˛ù_Á˘‹
*
di°
*
øy_dúe˘i⁄
[1];

126 
	gøy_‹igö
[2]+=
√¨_˛ù_Á˘‹
*
di°
*
øy_dúe˘i⁄
[2];

129 
	gmag
=
sqπ
(
øy_dúe˘i⁄
[0]*ray_direction[0]

130 + 
øy_dúe˘i⁄
[1]*ray_direction[1]

131 + 
øy_dúe˘i⁄
[2]*ray_direction[2]);

132 
	gøy_dúe˘i⁄
[0]/=
mag
;

133 
	gøy_dúe˘i⁄
[1]/=
mag
;

134 
	gøy_dúe˘i⁄
[2]/=
mag
;

137 
	gT¨gë3D
::

138 
gë_võwög_dúe˘i⁄
(
dúe˘i⁄
[3])

140 
ch
=
cos
(
hódög
), 
	gsh
=
sö
(heading);

141 
	g˝
=
cos
(
pôch
), 
	g•
=
sö
(pitch);

142 
	gdúe˘i⁄
[0]=-
sh
*
˝
;

143 
	gdúe˘i⁄
[1]=
•
;

144 
	gdúe˘i⁄
[2]=-
ch
*
˝
;

147 
	gT¨gë3D
::
gë_up_ve˘‹
(
up
[3])

152 
ch
=
cos
(
hódög
), 
	gsh
=
sö
(heading);

153 
	g˝
=
cos
(
pôch
), 
	g•
=
sö
(pitch);

154 
	gup
[0] = 
sh
*
•
;

155 
	gup
[1] = 
˝
;

156 
	gup
[2] = 
ch
*
•
;

159 
	gT¨gë3D
::

160 
gl_å™sf‹m
()

162 
glVõwp‹t
(0, 0, (
GLsizei
)
wöwidth
, (GLsizei)
wöheight
);

164 
glM©rixMode
(
GL_PROJECTION
);

165 
glLﬂdIdítôy
();

168 
gluPî•e˘ive
(
fovy
, 
wöwidth
/()
wöheight
, 
√¨_˛ù_Á˘‹
, 
Ár_˛ù_Á˘‹
);

170 
glM©rixMode
(
GL_MODELVIEW
);

171 
glLﬂdIdítôy
();

176 
glTøn¶©ef
(0, 0, -
di°
);

177 
glRŸ©ef
(-180.0f/()
M_PI
*
pôch
, 1.0f, 0.0f, 0.0f);

178 
glRŸ©ef
(-180.0f/()
M_PI
*
hódög
, 0.0f, 1.0f, 0.0f);

179 
glTøn¶©ef
(-
èrgë
[0], -target[1], -target[2]);

182 
	gT¨gë3D
::

183 
exp‹t_rib
(
o°ªam
 &
ouçut
)

185 
ouçut
<<"Clùpög "<<
√¨_˛ù_Á˘‹
*
di°
<<" "<<
Ár_˛ù_Á˘‹
*di°<<
ídl
;

186 
	gouçut
<<"Proje˘i⁄ \"≥r•e˘ive\" \"fov\" "<<
	gfovy
<<
	gídl
;

187 
	gouçut
<<"Revî£Orõ¡©i⁄"<<
	gídl
;

188 
	gouçut
<<"SˇÀ 1 1 -1"<<
	gídl
;

189 
	gouçut
<<"Tøn¶©ê0 0 "<<-
	gdi°
<<
	gídl
;

190 
	gouçut
<<"RŸ©ê"<<-180/
M_PI
*
	gpôch
<<" 1 0 0"<<
	gídl
;

191 
	gouçut
<<"RŸ©ê"<<-180/
M_PI
*
	ghódög
<<" 0 1 0"<<
	gídl
;

192 
	gouçut
<<"Tøn¶©ê"<<-
	gèrgë
[0]<<" "<<-èrgë[1]<<" "<<-èrgë[2]<<
	gídl
;

197 
	gT¨gëOπho3D
::

198 
T¨gëOπho3D
(
èrgë_
[3], 
di°_
, 
hódög_
, 
pôch_
, 
height_Á˘‹_
, 
√¨_˛ù_Á˘‹_
, 
Ár_˛ù_Á˘‹_
)

199 : 
di°
(
di°_
), 
hódög
(
hódög_
), 
pôch
(
pôch_
),

200 
deÁu…_di°
(
di°_
), 
deÁu…_hódög
(
hódög_
), 
deÁu…_pôch
(
pôch_
),

201 
height_Á˘‹
(
height_Á˘‹_
),

202 
√¨_˛ù_Á˘‹
(
√¨_˛ù_Á˘‹_
), 
Ár_˛ù_Á˘‹
(
Ár_˛ù_Á˘‹_
), 
a˘i⁄_mode
(
INACTIVE
),

203 
ﬁdmou£x
(0), 
ﬁdmou£y
(0)

205 if(
	gèrgë_
){

206 
	gèrgë
[0]=
èrgë_
[0];

207 
	gèrgë
[1]=
èrgë_
[1];

208 
	gèrgë
[2]=
èrgë_
[2];

210 
	gèrgë
[0]=0;

211 
	gèrgë
[1]=0;

212 
	gèrgë
[2]=0;

214 
	gdeÁu…_èrgë
[0]=
èrgë
[0];

215 
	gdeÁu…_èrgë
[1]=
èrgë
[1];

216 
	gdeÁu…_èrgë
[2]=
èrgë
[2];

217 
	gdeÁu…_di°
=
di°
;

218 
	gdeÁu…_hódög
=
hódög
;

219 
	gdeÁu…_pôch
=
pôch
;

222 
	gT¨gëOπho3D
::

223 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
)

225 if(
	g°©e
==
GLUT_UP
)

226 
a˘i⁄_mode
=
INACTIVE
;

227 if(
	gbuâ⁄
==
GLUT_LEFT_BUTTON
)

228 
a˘i⁄_mode
=
ROTATE
;

229 if(
	gbuâ⁄
==
GLUT_MIDDLE_BUTTON
)

230 
a˘i⁄_mode
=
TRUCK
;

231 if(
	gbuâ⁄
==
GLUT_RIGHT_BUTTON
)

232 
a˘i⁄_mode
=
DOLLY
;

233 
	gﬁdmou£x
=
x
;

234 
	gﬁdmou£y
=
y
;

237 
	gT¨gëOπho3D
::

238 
døg
(
x
, 
y
)

240 
	ga˘i⁄_mode
){

241 
	gINACTIVE
:

243 
	gROTATE
:

244 
hódög
+=0.007f*(
ﬁdmou£x
-
x
);

245 if(
	ghódög
<-
	gM_PI
Ëhódög+=2.0f*()
M_PI
;

246 if(
	ghódög
>
	gM_PI
Ëhódög-=2.0f*()
M_PI
;

247 
	gpôch
+=0.007f*(
ﬁdmou£y
-
y
);

248 if(
	gpôch
<-0.5f*()
	gM_PI
Ëpôch=-0.5f*()
M_PI
;

249 if(
	gpôch
>0.5f*()
	gM_PI
Ëpôch=0.5f*()
M_PI
;

251 
	gTRUCK
:

252 
èrgë
[0]+=(0.002f*
di°
)*
cos
(
hódög
)*(
ﬁdmou£x
-
x
);

253 
	gèrgë
[1]-=(0.002f*
di°
)*(
ﬁdmou£y
-
y
);

254 
	gèrgë
[2]-=(0.002f*
di°
)*
sö
(
hódög
)*(
ﬁdmou£x
-
x
);

256 
	gDOLLY
:

257 
di°
*=
pow
(1.01f, 
ﬁdmou£y
-
y
 + 
x
-
ﬁdmou£x
);

260 
	gﬁdmou£x
=
x
;

261 
	gﬁdmou£y
=
y
;

262 
glutPo°Redi•œy
();

265 
	gT¨gëOπho3D
::

266 
ªtu∫_to_deÁu…
()

268 
èrgë
[0]=
deÁu…_èrgë
[0];

269 
	gèrgë
[1]=
deÁu…_èrgë
[1];

270 
	gèrgë
[2]=
deÁu…_èrgë
[2];

271 
	gdi°
=
deÁu…_di°
;

272 
	ghódög
=
deÁu…_hódög
;

273 
	gpôch
=
deÁu…_pôch
;

276 
	gT¨gëOπho3D
::

277 
å™sf‹m_mou£
(, , * , * )

282 
	gT¨gëOπho3D
::

283 
gë_võwög_dúe˘i⁄
(
dúe˘i⁄
[3])

285 
ch
=
cos
(
hódög
), 
	gsh
=
sö
(heading);

286 
	g˝
=
cos
(
pôch
), 
	g•
=
sö
(pitch);

287 
	gdúe˘i⁄
[0]=-
sh
*
˝
;

288 
	gdúe˘i⁄
[1]=
•
;

289 
	gdúe˘i⁄
[2]=-
ch
*
˝
;

292 
	gT¨gëOπho3D
::

293 
gl_å™sf‹m
()

295 
glVõwp‹t
(0, 0, (
GLsizei
)
wöwidth
, (GLsizei)
wöheight
);

297 
glM©rixMode
(
GL_PROJECTION
);

298 
glLﬂdIdítôy
();

299 
	ghÆfheight
=0.5f*
height_Á˘‹
*
di°
, 
	ghÆfwidth
=
hÆfheight
*
wöwidth
/()
wöheight
;

300 
glOπho
(-
hÆfwidth
, hÆfwidth, -
hÆfheight
, hÆfheight, 
√¨_˛ù_Á˘‹
*
di°
, 
Ár_˛ù_Á˘‹
*dist);

302 
glM©rixMode
(
GL_MODELVIEW
);

303 
glLﬂdIdítôy
();

304 
GLÊﬂt
 
	gpos
[3];

305 
	gpos
[0]=
èrgë
[0]-
di°
*
sö
(
hódög
)*
cos
(
pôch
);

306 
	gpos
[1]=
èrgë
[1]-
di°
*
sö
(
pôch
);

307 
	gpos
[2]=
èrgë
[2]-
di°
*
cos
(
hódög
)*cos(
pôch
);

308 
glTøn¶©ef
(0, 0, -
di°
);

309 
glRŸ©ef
(-180.0f/()
M_PI
*
pôch
, 1.0f, 0.0f, 0.0f);

310 
glRŸ©ef
(-180.0f/()
M_PI
*
hódög
, 0.0f, 1.0f, 0.0f);

311 
glTøn¶©ef
(-
èrgë
[0], -target[1], -target[2]);

314 
	gT¨gëOπho3D
::

315 
exp‹t_rib
(
o°ªam
 &
ouçut
)

317 
ouçut
<<"Clùpög "<<
√¨_˛ù_Á˘‹
*
di°
<<" "<<
Ár_˛ù_Á˘‹
*di°<<
ídl
;

318 
	gouçut
<<"Proje˘i⁄ \"‹thogøphic\""<<
	gídl
;

320 
	gouçut
<<"Revî£Orõ¡©i⁄"<<
	gídl
;

321 
	gouçut
<<"SˇÀ 1 1 -1"<<
	gídl
;

322 
	gouçut
<<"Tøn¶©ê0 0 "<<-
	gdi°
<<
	gídl
;

323 
	gouçut
<<"RŸ©ê"<<-180/
M_PI
*
	gpôch
<<" 1 0 0"<<
	gídl
;

324 
	gouçut
<<"RŸ©ê"<<-180/
M_PI
*
	ghódög
<<" 0 1 0"<<
	gídl
;

325 
	gouçut
<<"Tøn¶©ê"<<-
	gèrgë
[0]<<" "<<-èrgë[1]<<" "<<-èrgë[2]<<
	gídl
;

330 
	gP™Zoom2D
::

331 
P™Zoom2D
(
bŸtom_
, 
À·_
, 
height_
)

332 : 
bŸtom
(
bŸtom_
), 
À·
(
À·_
), 
height
(
height_
),

333 
deÁu…_bŸtom
(
bŸtom_
), 
deÁu…_À·
(
À·_
), 
deÁu…_height
(
height_
), 
a˘i⁄_mode
(
INACTIVE
),

334 
ﬁdmou£x
(0), 
ﬁdmou£y
(0), 
moved_sö˚_mou£_down
(
Ál£
),

335 
˛ickx
(~0), 
˛icky
(~0)

338 
	gP™Zoom2D
::

339 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
)

341 if(
	g°©e
==
GLUT_UP
){

342 
r
=
height
/
wöheight
;

343 
	ga˘i⁄_mode
){

344 
	gPAN
:

345 if(!
moved_sö˚_mou£_down
){

347 
À·
+=
r
*(
x
-0.5f*
wöwidth
);

348 
	gbŸtom
+=
r
*(0.5f*
wöheight
-
y
);

349 
glutPo°Redi•œy
();

352 
	gZOOM_IN
:

353 if(
moved_sö˚_mou£_down
){

355 
desúed_width
=
Ábs
((
x
-
˛ickx
)*
height
/
wöheight
);

356 
	gdesúed_height
=
Ábs
((
y
-
˛icky
)*
height
/
wöheight
);

357 if(
	gdesúed_height
==0Ë
desúed_height
=
height
/
wöheight
;

358 if(
desúed_width
*
	gwöheight
 > 
desúed_height
*
	gwöwidth
)

359 
	gdesúed_height
=
wöheight
*
desúed_width
/
wöwidth
;

361 
	gdesúed_width
=
wöwidth
*
desúed_height
/
wöheight
;

362 
	gÀ·
+=0.5f*(
x
+
˛ickx
)*
height
/
wöheight
-0.5f*
desúed_width
;

363 
	gbŸtom
+=(
wöheight
-0.5f*(
y
+
˛icky
))*
height
/wöheight-0.5f*
desúed_height
;

364 
	gheight
=
desúed_height
;

368 
	gÁ˘‹
=0.70710678118654752440084f;

369 
	gÀ·
+=(1-
Á˘‹
)*
height
*(
x
/()
wöheight
);

370 
	gbŸtom
+=(1-
Á˘‹
)*
height
*(1-
y
/()
wöheight
);

371 
	gheight
*=
Á˘‹
;

373 
glutPo°Redi•œy
();

375 
	gZOOM_OUT
:

378 
Á˘‹
=1.41421356237309504880168f;

379 
	gÀ·
-=0.5f*(
Á˘‹
-1)*
height
;

380 
	gbŸtom
-=0.5f*(
Á˘‹
-1)*
wöwidth
*
height
/
wöheight
;

381 
	gheight
*=
Á˘‹
;

383 
glutPo°Redi•œy
();

388 
	ga˘i⁄_mode
=
INACTIVE
;

390 }if(
	gbuâ⁄
==
GLUT_LEFT_BUTTON
)

392 
a˘i⁄_mode
=
PAN
;

394 if(
	gbuâ⁄
==
GLUT_MIDDLE_BUTTON
){

395 
˛ickx
=
x
;

396 
	g˛icky
=
y
;

397 
	ga˘i⁄_mode
=
ZOOM_IN
;

398 }if(
	gbuâ⁄
==
GLUT_RIGHT_BUTTON
)

399 
a˘i⁄_mode
=
ZOOM_OUT
;

400 
	gmoved_sö˚_mou£_down
=
Ál£
;

401 
	gﬁdmou£x
=
x
;

402 
	gﬁdmou£y
=
y
;

405 
	gP™Zoom2D
::

406 
døg
(
x
, 
y
)

408 if(
	gx
!=
ﬁdmou£x
 || 
y
!=
ﬁdmou£y
){

409 
moved_sö˚_mou£_down
=
åue
;

410 if(
	ga˘i⁄_mode
==
PAN
){

411 
r
=
height
/
wöheight
;

412 
	gÀ·
-=
r
*(
x
-
ﬁdmou£x
);

413 
	gbŸtom
+=
r
*(
y
-
ﬁdmou£y
);

414 
glutPo°Redi•œy
();

415 }if(
	ga˘i⁄_mode
==
ZOOM_IN
)

416 
glutPo°Redi•œy
();

418 
glutPo°Redi•œy
();

419 
	gﬁdmou£x
=
x
;

420 
	gﬁdmou£y
=
y
;

424 
	gP™Zoom2D
::

425 
ªtu∫_to_deÁu…
()

427 
bŸtom
=
deÁu…_bŸtom
;

428 
	gÀ·
=
deÁu…_À·
;

429 
	gheight
=
deÁu…_height
;

432 
	gP™Zoom2D
::

433 
å™sf‹m_mou£
(
x
, 
y
, 
co‹ds
[2])

435 
	gr
=
height
/
wöheight
;

436 
	gco‹ds
[0]=
x
*
r
+
À·
;

437 
	gco‹ds
[1]=(
wöheight
-
y
)*
r
+
bŸtom
;

440 
	gP™Zoom2D
::

441 
gl_å™sf‹m
()

443 
glVõwp‹t
(0, 0, (
GLsizei
)
wöwidth
, (GLsizei)
wöheight
);

444 
glM©rixMode
(
GL_PROJECTION
);

445 
glLﬂdIdítôy
();

446 
glOπho
(
À·
,Üe·+(
height
*
wöwidth
)/
wöheight
, 
bŸtom
, bottom+height, 0, 1);

447 
glM©rixMode
(
GL_MODELVIEW
);

448 
glLﬂdIdítôy
();

451 
	gP™Zoom2D
::

452 
exp‹t_rib
(
o°ªam
 &
ouçut
)

455 
ouçut
<<"Clùpög 1 2000"<<
ídl
;

456 
	gouçut
<<"Revî£Orõ¡©i⁄"<<
	gídl
;

457 
	gouçut
<<"SˇÀ 1 1 -1"<<
	gídl
;

459 
	gsˇÀÁ˘‹
;

460 if(
	gwöwidth
>
	gwöheight
Ë
	gsˇÀÁ˘‹
=2.0f/
height
;

461 
	gsˇÀÁ˘‹
=2.0f/(
wöwidth
*
height
/
wöheight
);

462 
	gouçut
<<"SˇÀ "<<
	gsˇÀÁ˘‹
<<" "<<sˇÀÁ˘‹<<" 1"<<
	gídl
;

464 
	gouçut
<<"Tøn¶©ê"<<-(
	gÀ·
+0.5*
wöwidth
*
	gheight
/
	gwöheight
)<<" "<<-(
	gbŸtom
+0.5*height)<< " 1000"<<
	gídl
;

467 
	gP™Zoom2D
::

468 
di•œy_s¸ìn
()

470 if(
a˘i⁄_mode
==
ZOOM_IN
 && 
moved_sö˚_mou£_down
){

471 
glCﬁ‹3f
(1,1,1);

472 
glBegö
(
GL_LINE_STRIP
);

473 
glVîãx2i
(
˛ickx
, 
wöheight
-
˛icky
);

474 
glVîãx2i
(
ﬁdmou£x
, 
wöheight
-
˛icky
);

475 
glVîãx2i
(
ﬁdmou£x
, 
wöheight
-
ﬁdmou£y
);

476 
glVîãx2i
(
˛ickx
, 
wöheight
-
ﬁdmou£y
);

477 
glVîãx2i
(
˛ickx
, 
wöheight
-
˛icky
);

478 
glEnd
();

484 
	gSèticText
::

485 
SèticText
(c⁄° *
ãxt_
)

486 : 
ãxt
(
ãxt_
)

489 
SèticText
::

490 
di•œy
(
x
, 
y
)

492 
	gdi•x
=
x
;

493 
	gdi•y
=
y
;

494 
	gwidth
=
glutBôm≠Lígth
(
GLUT_BITMAP_HELVETICA_12
, (c⁄° *)
ãxt
)+1;

495 
	gheight
=15;

496 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

497 
glRa°îPos2i
(
x
, 
y
-
height
+2);

498 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

499 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

500 
glCﬁ‹3f
(1, 1, 1);

501 
glRa°îPos2i
(
x
+1, 
y
-
height
+3);

502 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

503 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

508 
	gDy«micText
::
Dy«micText
–c⁄° 
°d
::
°rög
& 
ãxt_
 )

510 
ãxt
(
ãxt_
)

512 
cﬁ‹
[0] = 0.0f;

513 
	gcﬁ‹
[1] = 0.0f;

514 
	gcﬁ‹
[2] = 0.0f;

517 
	gDy«micText
::
£t_cﬁ‹
–
r
, 
g
, 
b
 )

519 
	gcﬁ‹
[0] = 
r
;

520 
	gcﬁ‹
[1] = 
g
;

521 
	gcﬁ‹
[2] = 
b
;

524 
	gDy«micText
::
di•œy
–
x
, 
y
 )

526 
	gdi•x
=
x
;

527 
	gdi•y
=
y
;

528 
	gwidth
=
glutBôm≠Lígth
(
GLUT_BITMAP_HELVETICA_12
, (c⁄° *)
ãxt
.
c_°r
())+1;

529 
	gheight
=15;

536 
glCﬁ‹3f
–
cﬁ‹
[0], color[1], color[2] );

538 
glRa°îPos2i
(
x
+1, 
y
-
height
+3);

539 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

540 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

546 
	gBuâ⁄
::

547 
Buâ⁄
(c⁄° *
ãxt_
, 
möwidth_
)

548 : 
°©us
(
UNINVOLVED
), 
ãxt
(
ãxt_
), 
möwidth
(
möwidth_
)

551 
	gBuâ⁄
::

552 
di•œy
(
x
, 
y
)

554 
	gdi•x
=
x
;

555 
	gdi•y
=
y
;

556 
	gãxtwidth
=
glutBôm≠Lígth
(
GLUT_BITMAP_HELVETICA_12
, (c⁄° *)
ãxt
);

557 if(
	gãxtwidth
<
	gmöwidth
Ë
	gwidth
=
möwidth
+24;

558 
	gwidth
=
ãxtwidth
+24;

559 
	gheight
=17;

560 if(
	g°©us
==
UNINVOLVED
){

561 
glCﬁ‹3f
(0.7f, 0.7f, 0.7f);

562 
glBegö
(
GL_QUADS
);

563 
glVîãx2i
(
x
+1, 
y
-1);

564 
glVîãx2i
(
x
+
width
, 
y
-1);

565 
glVîãx2i
(
x
+
width
, 
y
-
height
+1);

566 
glVîãx2i
(
x
+1, 
y
-
height
+1);

567 
glEnd
();

568 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

569 
glLöeWidth
(1);

570 
glBegö
(
GL_LINE_STRIP
);

571 
glVîãx2i
(
x
, 
y
-2);

572 
glVîãx2i
(
x
, 
y
-
height
);

573 
glVîãx2i
(
x
+
width
-1, 
y
-
height
);

574 
glEnd
();

575 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

577 if(
	g°©us
==
SELECTED
Ë
glCﬁ‹3f
(0.8f, 0.8f, 0.8f);

578 
glCﬁ‹3f
(1, 1, 1);

579 
glBegö
(
GL_QUADS
);

580 
glVîãx2i
(
x
, 
y
-1);

581 
glVîãx2i
(
x
+
width
, 
y
-1);

582 
glVîãx2i
(
x
+
width
, 
y
-
height
);

583 
glVîãx2i
(
x
, 
y
-
height
);

584 
glEnd
();

585 
glCﬁ‹3f
(0, 0, 0);

587 
glRa°îPos2i
(
x
+(
width
-
ãxtwidth
)/2, 
y
-
height
+5);

588 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

589 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

592 
boﬁ
 
	gBuâ⁄
::

593 
˛ick
(
°©e
, 
x
, 
y
)

595 if(
	g°©e
==
GLUT_DOWN
 && 
x
>
di•x
 && x<=di•x+
width
 && 
y
<
di•y
-2 && y>=di•y-
height
){

596 
°©us
=
HIGHLIGHTED
;

597 
glutPo°Redi•œy
();

598  
	gåue
;

599 }if(
	g°©e
==
GLUT_UP
 && 
°©us
!=
UNINVOLVED
){

600 
°©us
=
UNINVOLVED
;

601 
glutPo°Redi•œy
();

602 if(
	gx
>=
di•x
 && 
x
<di•x+
width
 && 
y
<
di•y
-2 && y>=di•y-
height
)

603 
a˘i⁄
();

604  
	gåue
;

606  
	gÁl£
;

609 
	gBuâ⁄
::

610 
døg
(
x
, 
y
)

613 if(
	g°©us
==
SELECTED
 && 
x
>=
di•x
 && x<di•x+
width
 && 
y
<
di•y
-2 && y>=di•y-
height
){

614 
°©us
=
HIGHLIGHTED
;

615 
glutPo°Redi•œy
();

616 }if(
	g°©us
==
HIGHLIGHTED
 && !(
x
>=
di•x
 && x<di•x+
width
 && 
y
<
di•y
-2 && y>=di•y-
height
)){

617 
°©us
=
SELECTED
;

618 
glutPo°Redi•œy
();

624 
	gSlidî
::

625 
Slidî
(c⁄° *
ãxt_
, 
Àngth_
, 
posôi⁄_
, 
ju°ify_
)

626 : 
°©us
(
UNINVOLVED
), 
ãxt
(
ãxt_
), 
Àngth
(
Àngth_
), 
ju°ify
(
ju°ify_
), 
posôi⁄
(
posôi⁄_
),

627 
s¸ﬁlxmö
(~0), 
s¸ﬁlxmax
(~0), 
s¸ﬁlymö
(~0), 
s¸ﬁlymax
(~0), 
˛ickx
(~0)

630 
	gSlidî
::

631 
di•œy
(
x
, 
y
)

633 
	gdi•x
=
x
;

634 
	gdi•y
=
y
;

635 
	gwidth
=
glutBôm≠Lígth
(
GLUT_BITMAP_HELVETICA_12
, (c⁄° *)
ãxt
);

636 if(
	gwidth
<
	gju°ify
Ëwidth=
ju°ify
;

637 
	gwidth
+=11+6+
Àngth
+1;

638 
	gheight
=15;

639 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

640 
glRa°îPos2i
(
x
, 
y
-
height
+2);

641 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

642 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

643 
glCﬁ‹3f
(1, 1, 1);

644 
glRa°îPos2i
(
x
+1, 
y
-
height
+3);

645 
	gi
=0; 
	gãxt
[
i
]!=0; ++i)

646 
glutBôm≠Ch¨a˘î
(
GLUT_BITMAP_HELVETICA_12
, 
ãxt
[
i
]);

647 
	gs¸ﬁlxmö
=
x
+
width
-
Àngth
-12;

648 
	gs¸ﬁlxmax
=
x
+
width
;

649 
	gs¸ﬁlymö
=
y
-
height
+1;

650 
	gs¸ﬁlymax
=
y
-2;

651 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

652 
glLöeWidth
(1);

653 
glBegö
(
GL_LINE_STRIP
);

654 
glVîãx2i
(
s¸ﬁlxmö
, 
s¸ﬁlymax
-1);

655 
glVîãx2i
(
s¸ﬁlxmö
, 
s¸ﬁlymö
);

656 
glVîãx2i
(
s¸ﬁlxmax
-1, 
s¸ﬁlymö
);

657 
glVîãx2i
(
s¸ﬁlxmax
-1, 
s¸ﬁlymax
-1);

658 
glEnd
();

659 
glCﬁ‹3f
(0.7f, 0.7f, 0.7f);

660 
glBegö
(
GL_LINE_STRIP
);

661 
glVîãx2i
(
s¸ﬁlxmö
+1, 
s¸ﬁlymax
);

662 
glVîãx2i
(
s¸ﬁlxmö
+1, 
s¸ﬁlymö
+1);

663 
glVîãx2i
(
s¸ﬁlxmax
, 
s¸ﬁlymö
+1);

664 
glVîãx2i
(
s¸ﬁlxmax
, 
s¸ﬁlymax
);

665 
glEnd
();

666 if(
	g°©us
==
UNINVOLVED
){

667 
glCﬁ‹3f
(0.3f, 0.3f, 0.3f);

668 
glBegö
(
GL_LINE_STRIP
);

669 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+2, 
s¸ﬁlymax
-2);

670 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+2, 
s¸ﬁlymö
+2);

671 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+10, 
s¸ﬁlymö
+2);

672 
glEnd
();

673 
glCﬁ‹3f
(0.7f, 0.7f, 0.7f);

674 
glBegö
(
GL_QUADS
);

675 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+3, 
s¸ﬁlymö
+3);

676 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+11, 
s¸ﬁlymö
+3);

677 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+11, 
s¸ﬁlymax
);

678 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+3, 
s¸ﬁlymax
);

679 
glEnd
();

681 
glCﬁ‹3f
(1, 1, 1);

682 
glBegö
(
GL_QUADS
);

683 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+2, 
s¸ﬁlymö
+2);

684 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+11, 
s¸ﬁlymö
+2);

685 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+11, 
s¸ﬁlymax
);

686 
glVîãx2i
(
s¸ﬁlxmö
+
posôi⁄
+2, 
s¸ﬁlymax
);

687 
glEnd
();

691 
boﬁ
 
	gSlidî
::

692 
˛ick
(
°©e
, 
x
, 
y
)

694 if(
	g°©e
==
GLUT_DOWN
 && 
x
>
s¸ﬁlxmö
+
posôi⁄
+2 && x<=s¸ﬁlxmö+posôi⁄+11 && 
y
<
s¸ﬁlymax
-1 && y>=
s¸ﬁlymö
+2){

695 
°©us
=
SELECTED
;

696 
	g˛ickx
=
x
;

697 
glutPo°Redi•œy
();

698  
	gåue
;

699 }if(
	g°©us
!=
UNINVOLVED
 && 
°©e
==
GLUT_UP
){

700 
°©us
=
UNINVOLVED
;

701 
glutPo°Redi•œy
();

702  
	gåue
;

704  
	gÁl£
;

707 
	gSlidî
::

708 
døg
(
x
, )

710 if(
	g°©us
==
SELECTED
){

711 
glutPo°Redi•œy
();

712 
	g√wposôi⁄
=
posôi⁄
+(
x
-
˛ickx
);

713 
	g˛ickx
=
x
;

714 if(
	g√wposôi⁄
<0){

715 
	g˛ickx
+=(0-
√wposôi⁄
);

716 
	g√wposôi⁄
=0;

717 }if(
	g√wposôi⁄
>
	gÀngth
){

718 
	g˛ickx
+=(
Àngth
-
√wposôi⁄
);

719 
	g√wposôi⁄
=
Àngth
;

721 if(
	g√wposôi⁄
!=
posôi⁄
){

722 
posôi⁄
=
√wposôi⁄
;

723 
a˘i⁄
();

724 
glutPo°Redi•œy
();

731 
	gWidgëLi°
::

732 
WidgëLi°
(
ödít_
, 
boﬁ
 
hiddí_
)

733 : 
ödít
(
ödít_
), 
hiddí
(
hiddí_
), 
li°
(), 
down˛icked_membî
(-1)

737 
	gWidgëLi°
::

738 
di•œy
(
x
, 
y
)

740 
	gdi•x
=
x
;

741 
	gdi•y
=
y
;

742 if(
	ghiddí
){

743 
	gwidth
=
height
=0;

745 
	gheight
=0;

746 
	gi
=0; i<
	gli°
.
size
(); ++i){

747 
	gli°
[
i
]->
di•œy
(
x
+
ödít
, 
y
-
height
);

748 
	gheight
+=
li°
[
i
]->
height
;

749 
	gwidth
=(
width
<
ödít
+
li°
[
i
]->width) ? indent+list[i]->width : width;

754 
boﬁ
 
	gWidgëLi°
::

755 
˛ick
(
°©e
, 
x
, 
y
)

758 if(
	g°©e
==
GLUT_DOWN
){

759 
i
=0; 
	gi
<
	gli°
.
size
(); ++i){

760 if(
	gli°
[
i
]->
˛ick
(
°©e
, 
x
, 
y
)){

761 
	gdown˛icked_membî
=
i
;

762  
	gåue
;

765 }if(
	g°©e
==
GLUT_UP
 && 
down˛icked_membî
>=0){

766 
li°
[
down˛icked_membî
]->
˛ick
(
°©e
, 
x
, 
y
);

767 
	gdown˛icked_membî
=-1;

769  
	gÁl£
;

772 
	gWidgëLi°
::

773 
døg
(
x
, 
y
)

775 if(
	gdown˛icked_membî
>=0)

776 
li°
[
down˛icked_membî
]->
døg
(
x
, 
y
);

782 íum {
	gNOBODY
, 
	gCAMERA
, 
	gWIDGETS
, 
	gUSER
} 
	tMou£Ow√rTy≥
;

784 
Mou£Ow√rTy≥
 
	gmou£_ow√r
 = 
NOBODY
;

790 
	g«me•a˚
 {

794 
gluviResh≠e
(
w
, 
h
)

796 
	gwöwidth
=
w
;

797 
	gwöheight
=
h
;

798 
glutPo°Redi•œy
();

803 
gluviDi•œy
()

806 
glCÀ¨
(
GL_COLOR_BUFFER_BIT
|
GL_DEPTH_BUFFER_BIT
);

809 if(
	gˇmîa
Ëˇmîa->
gl_å™sf‹m
();

810 if(
	gu£rDi•œyFunc
Ë
u£rDi•œyFunc
();

813 
glPushAârib
(
GL_CURRENT_BIT
|
GL_ENABLE_BIT
|
GL_LINE_BIT
);

814 
glDißbÀ
(
GL_DEPTH_TEST
);

815 
glDißbÀ
(
GL_LIGHTING
);

816 
glLöeWidth
(1);

819 
glM©rixMode
(
GL_MODELVIEW
);

820 
glLﬂdIdítôy
();

821 
glM©rixMode
(
GL_PROJECTION
);

822 
glLﬂdIdítôy
();

823 
gluOπho2D
(0, 
wöwidth
, 0, 
wöheight
);

825 
	groŸ
.
di•œy
(0, 
wöheight
);

828 if(
	gˇmîa
Ëˇmîa->
di•œy_s¸ìn
();

830 
glP›Aârib
();

832 
glutSw≠Buf„rs
();

835 
gluviMou£
(
buâ⁄
, 
°©e
, 
x
, 
y
)

837 if(
	g°©e
==
GLUT_DOWN
){

838 
mods
=
glutGëModifõrs
();

839 if(
	gˇmîa
 && 
	gmods
==
GLUT_ACTIVE_SHIFT
){

840 
ˇmîa
->
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

841 
	gmou£_ow√r
=
CAMERA
;

844 }if(
	gu£rMou£Func
){

845 
u£rMou£Func
(
buâ⁄
, 
°©e
, 
x
, 
y
);

846 
	gmou£_ow√r
=
USER
;

849 
	gmou£_ow√r
){

850 
	gCAMERA
:

851 
ˇmîa
->
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

853 
	gWIDGETS
:

856 
	gUSER
:

857 if(
u£rMou£Func
Ëu£rMou£Func(
buâ⁄
, 
°©e
, 
x
, 
y
);

862 
	gmou£_ow√r
=
NOBODY
;

868 
gluviDøg
(
x
, 
y
)

870 
	gmou£_ow√r
){

871 
	gCAMERA
:

872 
ˇmîa
->
døg
(
x
, 
y
);

874 
	gWIDGETS
:

877 
	gUSER
:

878 if(
u£rDøgFunc
Ëu£rDøgFunc(
x
, 
y
);

891 
µm_s¸ìnshŸ
(c⁄° *
fûíame_f‹m©
, ...)

893 
va_li°
 
	g≠
;

894 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

895 #ifde‡
_MSC_VER


896 
	#FILENAMELENGTH
 256

	)

897 
	gfûíame
[
FILENAMELENGTH
];

898 
_v¢¥ötf
(
fûíame
, 
FILENAMELENGTH
, 
fûíame_f‹m©
, 
≠
);

899 
of°ªam
 
out
(
fûíame
, of°ªam::
bö¨y
);

901 *
	gfûíame
;

902 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

903 
of°ªam
 
out
(
fûíame
, of°ªam::
bö¨y
);

904 
‰ì
(
fûíame
);

906 if(!
	gout
) ;

907 
GLubyã
 *
	gimage_buf„r
=
√w
 GLubyã[3*
wöwidth
*
wöheight
];

908 
glRódBuf„r
(
GL_FRONT
);

909 
glRódPixñs
(0, 0, 
wöwidth
, 
wöheight
, 
GL_RGB
, 
GL_UNSIGNED_BYTE
, 
image_buf„r
);

910 
	gout
<<"P6\n"<<
	gwöwidth
<<' '<<
	gwöheight
<<" 255\n";

911 
	gi
=1; i<=
wöheight
; ++i)

912 
	gout
.
wrôe
((c⁄° *)
image_buf„r
+3*
wöwidth
*(
wöheight
-
i
), 3*winwidth);

913 
	gdñëe
[] 
	gimage_buf„r
;

916 
	g«me•a˚
 {

918 
wrôe_big_ídün_ush‹t
(
°d
::
o°ªam
 &
ouçut
, 
v
)

920 
	gouçut
.
put
–
°©ic_ˇ°
<>((
v
>>8)%256) );

921 
	gouçut
.
put
–
°©ic_ˇ°
<>(
v
%256) );

924 
wrôe_big_ídün_uöt
(
°d
::
o°ªam
 &
ouçut
, 
v
)

926 
	gouçut
.
put
(
°©ic_ˇ°
<>((
v
>>24)%256));

927 
	gouçut
.
put
(
°©ic_ˇ°
<>((
v
>>16)%256));

928 
	gouçut
.
put
(
°©ic_ˇ°
<>((
v
>>8)%256));

929 
	gouçut
.
put
(
°©ic_ˇ°
<>(
v
%256));

934 
sgi_s¸ìnshŸ
(c⁄° *
fûíame_f‹m©
, ...)

936 
va_li°
 
	g≠
;

937 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

938 #ifde‡
_MSC_VER


939 
	#FILENAMELENGTH
 256

	)

940 
	gfûíame
[
FILENAMELENGTH
];

941 
_v¢¥ötf
(
fûíame
, 
FILENAMELENGTH
, 
fûíame_f‹m©
, 
≠
);

942 
of°ªam
 
ouçut
(
fûíame
, of°ªam::
bö¨y
);

944 *
	gfûíame
;

945 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

946 
of°ªam
 
ouçut
(
fûíame
, of°ªam::
bö¨y
);

948 if(!
	gouçut
) ;

950 c⁄° 
	gmùm≠_Àvñ
 = 1;

951 c⁄° 
	gsize_sˇÀ
 = 1 << (
mùm≠_Àvñ
);

953 
	gwöwidth
 = 
size_sˇÀ
 * 
wöwidth
;

954 
	gwöheight
 = 
size_sˇÀ
 * 
wöheight
;

956 
glGíFømebuf„rs
(1, &
s¸ìnshŸ_fbo
);

957 
glBödFømebuf„r
(
GL_FRAMEBUFFER
, 
s¸ìnshŸ_fbo
);

959 
GLuöt
 
	gãxtuªId
;

960 
glGíTextuªs
(1, &
ãxtuªId
);

961 
glBödTextuª
(
GL_TEXTURE_2D
, 
ãxtuªId
);

962 
glTexP¨amëîf
(
GL_TEXTURE_2D
, 
GL_TEXTURE_MAG_FILTER
, 
GL_LINEAR
);

963 
glTexP¨amëîf
(
GL_TEXTURE_2D
, 
GL_TEXTURE_MIN_FILTER
, 
GL_LINEAR_MIPMAP_LINEAR
);

964 
glTexP¨amëîf
(
GL_TEXTURE_2D
, 
GL_TEXTURE_WRAP_S
, 
GL_CLAMP_TO_EDGE
);

965 
glTexP¨amëîf
(
GL_TEXTURE_2D
, 
GL_TEXTURE_WRAP_T
, 
GL_CLAMP_TO_EDGE
);

966 
glTexP¨amëîi
(
GL_TEXTURE_2D
, 
GL_GENERATE_MIPMAP
, 
GL_TRUE
);

967 
glTexP¨amëîi
(
GL_TEXTURE_2D
, 
GL_TEXTURE_MAX_LEVEL
, 
mùm≠_Àvñ
);

968 
glTexImage2D
(
GL_TEXTURE_2D
, 0, 
GL_RGBA8
, 
wöwidth
, 
wöheight
, 0, 
GL_RGBA
, 
GL_UNSIGNED_BYTE
, 0);

969 
glBödTextuª
(
GL_TEXTURE_2D
, 0);

971 
glFømebuf„rTextuª2DEXT
(
GL_FRAMEBUFFER_EXT
, 
GL_COLOR_ATTACHMENT0_EXT
, 
GL_TEXTURE_2D
, 
ãxtuªId
, 0);

977 
GLuöt
 
	gdïthRídîbuf„r
;

978 
glGíRídîbuf„rs
(1, &
dïthRídîbuf„r
);

979 
glBödRídîbuf„r
(
GL_RENDERBUFFER
, 
dïthRídîbuf„r
);

980 
glRídîbuf„rSt‹age
(
GL_RENDERBUFFER
, 
GL_DEPTH24_STENCIL8
, 
wöwidth
, 
wöheight
);

981 
glFømebuf„rRídîbuf„r
(
GL_FRAMEBUFFER
, 
GL_DEPTH_STENCIL_ATTACHMENT
, 
GL_RENDERBUFFER
, 
dïthRídîbuf„r
);

982 
GLíum
 
	g°©us
 = 
glCheckFømebuf„rSètus
(
GL_FRAMEBUFFER
);

984 i‡(
	g°©us
 !
GL_FRAMEBUFFER_COMPLETE
)

986 
°d
::
cout
 << "ProbÀm wôh O≥nGL fømebuf„∏a·î s≥cifyög dïth/°ícûÑídî buf„r: " << 
hex
 << 
°©us
 << std::
ídl
;

987 
as£π
(0);

990 
glPixñSt‹ei
(
GL_PACK_ALIGNMENT
, 1);

991 
glPixñSt‹ei
(
GL_UNPACK_ALIGNMENT
, 1);

992 
glBÀndFunc
 (
GL_SRC_ALPHA_SATURATE
, 
GL_ONE
);

994 
glCÀ¨
(
GL_COLOR_BUFFER_BIT
|
GL_DEPTH_BUFFER_BIT
);

998 
	gèkög_s¸ìnshŸ
 = 
åue
;

1000 if(
	gˇmîa
Ëˇmîa->
gl_å™sf‹m
();

1001 if(
	gu£rDi•œyFunc
Ë
u£rDi•œyFunc
();

1003 
	gèkög_s¸ìnshŸ
 = 
Ál£
;

1006 
glutSw≠Buf„rs
();

1008 
glBödTextuª
(
GL_TEXTURE_2D
, 
ãxtuªId
);

1009 
glE«bÀ
(
GL_TEXTURE_2D
);

1010 
glGíî©eMùm≠EXT
(
GL_TEXTURE_2D
);

1012 
GLöt
 
	gfûe_width
, 
	gfûe_height
;

1013 
glGëTexLevñP¨amëîiv
–
GL_TEXTURE_2D
, 
mùm≠_Àvñ
, 
GL_TEXTURE_WIDTH
, &
fûe_width
 );

1014 
glGëTexLevñP¨amëîiv
–
GL_TEXTURE_2D
, 
mùm≠_Àvñ
, 
GL_TEXTURE_HEIGHT
, &
fûe_height
 );

1016 
glBödFømebuf„r
–
GL_FRAMEBUFFER
, 0 );

1018 
GLubyã
 *
	gbuf„r
 = 
√w
 GLubyã[ 4 * 
fûe_width
 * 
fûe_height
 ];

1020 
glGëTexImage
–
GL_TEXTURE_2D
, 
mùm≠_Àvñ
, 
GL_RGBA
, 
GL_UNSIGNED_BYTE
, 
buf„r
 );

1022 
glBödTextuª
(
GL_TEXTURE_2D
, 0);

1024 
GLubyã
* 
	gr_buf„r
 = 
√w
 GLubyã[
fûe_width
*
fûe_height
];

1025 
GLubyã
* 
	gg_buf„r
 = 
√w
 GLubyã[
fûe_width
*
fûe_height
];

1026 
GLubyã
* 
	gb_buf„r
 = 
√w
 GLubyã[
fûe_width
*
fûe_height
];

1028 
	gy
 = 0; y < 
	gfûe_height
; y++)

1029 
	gx
 = 0; x < 
	gfûe_width
; x++)

1031 
	g°¨tAddªssOfPixñ
 = ((
y
*
fûe_width
Ë+ 
x
)*4;

1033 
	gr_buf„r
[ ((
y
*
fûe_width
Ë+ 
x
Ë] = 
buf„r
[
°¨tAddªssOfPixñ
+0];

1034 
	gg_buf„r
[ ((
y
*
fûe_width
Ë+ 
x
Ë] = 
buf„r
[
°¨tAddªssOfPixñ
+1];

1035 
	gb_buf„r
[ ((
y
*
fûe_width
Ë+ 
x
Ë] = 
buf„r
[
°¨tAddªssOfPixñ
+2];

1043 
wrôe_big_ídün_ush‹t
(
ouçut
, 474);

1044 
	gouçut
.
put
(0);

1045 
	gouçut
.
put
(1);

1046 
wrôe_big_ídün_ush‹t
(
ouçut
, 3);

1047 
as£π
–
fûe_width
 < 
°d
::
numîic_limôs
<>::
max
() );

1048 
as£π
–
fûe_height
 < 
°d
::
numîic_limôs
<>::
max
() );

1049 
wrôe_big_ídün_ush‹t
(
ouçut
, 
°©ic_ˇ°
<>(
fûe_width
) );

1050 
wrôe_big_ídün_ush‹t
(
ouçut
, 
°©ic_ˇ°
<>(
fûe_height
) );

1051 
wrôe_big_ídün_ush‹t
(
ouçut
, 3);

1052 
wrôe_big_ídün_uöt
(
ouçut
, 0);

1053 
wrôe_big_ídün_uöt
(
ouçut
, 255);

1054 
wrôe_big_ídün_uöt
(
ouçut
, 0);

1056 
	gi
;

1057 
	gi
=0; i<80 && 
	gfûíame
[
i
]; ++i)

1058 
	gouçut
.
put
(
fûíame
[
i
]);

1059 ; 
	gi
<80; ++i)

1060 
	gouçut
.
put
(0);

1061 
wrôe_big_ídün_uöt
(
ouçut
, 0);

1062 
	gi
=0; i<404; ++iË
	gouçut
.
put
(0);

1066 
	gouçut
.
wrôe
((c⁄° *)
r_buf„r
, 
fûe_width
*
fûe_height
);

1067 
	gouçut
.
wrôe
((c⁄° *)
g_buf„r
, 
fûe_width
*
fûe_height
);

1068 
	gouçut
.
wrôe
((c⁄° *)
b_buf„r
, 
fûe_width
*
fûe_height
);

1070 
	gdñëe
[] 
	gr_buf„r
;

1071 
	gdñëe
[] 
	gg_buf„r
;

1072 
	gdñëe
[] 
	gb_buf„r
;

1073 
	gdñëe
[] 
	gbuf„r
;

1075 
glDñëeTextuªs
–1, &
ãxtuªId
 );

1076 
glDñëeRídîbuf„rs
–1, &
dïthRídîbuf„r
 );

1077 
glDñëeFømebuf„rs
(1, &
s¸ìnshŸ_fbo
);

1079 
	gwöwidth
 /
size_sˇÀ
;

1080 
	gwöheight
 /
size_sˇÀ
;

1082 #i‚de‡
_MSC_VER


1083 
‰ì
(
fûíame
);

1087 
£t_gíîic_lights
()

1089 
glE«bÀ
(
GL_LIGHTING
);

1091 
GLÊﬂt
 
	gambõ¡
[4] = {.3f, .3f, .3f, 1.0f};

1092 
glLightModñfv
 (
GL_LIGHT_MODEL_AMBIENT
,
ambõ¡
);

1095 
GLÊﬂt
 
	gcﬁ‹
[4] = {.4f, .4f, .4f, 1.0f};

1096 
glLightfv
 (
GL_LIGHT0
, 
GL_DIFFUSE
, 
cﬁ‹
);

1097 
glLightfv
 (
GL_LIGHT0
, 
GL_SPECULAR
, 
cﬁ‹
);

1098 
glE«bÀ
 (
GL_LIGHT0
);

1101 
GLÊﬂt
 
	gcﬁ‹
[4] = {.4f, .4f, .4f, 1.0f};

1102 
glLightfv
 (
GL_LIGHT1
, 
GL_DIFFUSE
, 
cﬁ‹
);

1103 
glLightfv
 (
GL_LIGHT1
, 
GL_SPECULAR
, 
cﬁ‹
);

1104 
glE«bÀ
 (
GL_LIGHT1
);

1107 
GLÊﬂt
 
	gcﬁ‹
[4] = {.2f, .2f, .2f, 1.0f};

1108 
glLightfv
 (
GL_LIGHT2
, 
GL_DIFFUSE
, 
cﬁ‹
);

1109 
glLightfv
 (
GL_LIGHT2
, 
GL_SPECULAR
, 
cﬁ‹
);

1110 
glE«bÀ
 (
GL_LIGHT2
);

1114 
£t_gíîic_m©îül
(
r
, 
g
, 
b
, 
GLíum
 
Á˚
)

1116 
GLÊﬂt
 
	gambõ¡
[4], 
	gdiffu£
[4], 
	g•ecuœr
[4];

1117 
	gambõ¡
[0]=0.1f*
r
+0.03f;ámbõ¡[1]=0.1f*
g
+0.03f;ámbõ¡[2]=0.1f*
b
+0.03f;ámbient[3]=1.0f;

1118 
	gdiffu£
[0]=0.7f*
r
; diffu£[1]=0.7f*
g
; diffu£[2]=0.7f*
b
; diffuse[3]=1.0f;

1119 
	g•ecuœr
[0]=0.1f*
r
+0.1f; s≥cuœr[1]=0.1f*
g
+0.1f; s≥cuœr[2]=0.1f*
b
+0.1f; specular[3]=1.0f;

1120 
glM©îülfv
(
Á˚
, 
GL_AMBIENT
, 
ambõ¡
);

1121 
glM©îülfv
(
Á˚
, 
GL_DIFFUSE
, 
diffu£
);

1122 
glM©îülfv
(
Á˚
, 
GL_SPECULAR
, 
•ecuœr
);

1123 
glM©îülf
(
Á˚
, 
GL_SHININESS
, 32);

1126 
£t_m©ã_m©îül
(
r
, 
g
, 
b
, 
GLíum
 
Á˚
)

1128 
GLÊﬂt
 
	gambõ¡
[4], 
	gdiffu£
[4], 
	g•ecuœr
[4];

1129 
	gambõ¡
[0]=0.1f*
r
+0.03f;ámbõ¡[1]=0.1f*
g
+0.03f;ámbõ¡[2]=0.1f*
b
+0.03f;ámbient[3]=1.0f;

1130 
	gdiffu£
[0]=0.9f*
r
; diffu£[1]=0.9f*
g
; diffu£[2]=0.9f*
b
; diffuse[3]=1.0f;

1131 
	g•ecuœr
[0]=0; specular[1]=0; specular[2]=0; specular[3]=1;

1132 
glM©îülfv
(
Á˚
, 
GL_AMBIENT
, 
ambõ¡
);

1133 
glM©îülfv
(
Á˚
, 
GL_DIFFUSE
, 
diffu£
);

1134 
glM©îülfv
(
Á˚
, 
GL_SPECULAR
, 
•ecuœr
);

1141 
døw_3d_¨row
(c⁄° 
ba£
[3], c⁄° 
poöt
[3], 
¨row_hód_Àngth
)

1145 
glLöeWidth
(1);

1146 
glCﬁ‹3f
(0.5f,0.5f,0.5f);

1148 
Vec3f
 
w
(
poöt
[0]-
ba£
[0],Öoint[1]-base[1],Öoint[2]-base[2]);

1149 
	gÀn
 = 
mag
(
w
);

1150 
	gw
 = 
w
 / 
Àn
;

1154 
Vec3f
 
	gu
 = 
¸oss
(
w
, Vec3f(0,1,0));

1157 i‡(
mag
(
u
) == 0)

1158 
u
 = 
¸oss
(
w
, 
Vec3f
(1,0,0));

1161 
Vec3f
 
	gv
 = 
¸oss
(
w
, 
u
/
mag
(u));

1162 
	gv
 = 
v
/
mag
(v);

1164 i‡(!
	g¨row_hód_Àngth
)

1165 
	g¨row_hód_Àngth
 = 0.1‡* 
Àn
;

1169 
Vec3f
 
	g¨row1
, 
	g¨row2
;

1170 
	g¨row1
[0] = 
poöt
[0] + 
¨row_hód_Àngth
 * (
v
[0] - 
w
[0]);

1171 
	g¨row1
[1] = 
poöt
[1] + 
¨row_hód_Àngth
 * (
v
[1] - 
w
[1]);

1172 
	g¨row1
[2] = 
poöt
[2] + 
¨row_hód_Àngth
 * (
v
[2] - 
w
[2]);

1173 
	g¨row2
[0] = 
poöt
[0] + 
¨row_hód_Àngth
 * (-
v
[0] - 
w
[0]);

1174 
	g¨row2
[1] = 
poöt
[1] + 
¨row_hód_Àngth
 * (-
v
[1] - 
w
[1]);

1175 
	g¨row2
[2] = 
poöt
[2] + 
¨row_hód_Àngth
 * (-
v
[2] - 
w
[2]);

1177 
glBegö
(
GL_LINES
);

1178 
glVîãx3f
(
ba£
[0], base[1], base[2]);

1179 
glVîãx3f
(
poöt
[0],Öoint[1],Öoint[2]);

1180 
glVîãx3f
(
poöt
[0],Öoint[1],Öoint[2]);

1181 
glVîãx3f
(
¨row1
[0],árrow1[1],árrow1[2]);

1182 
glVîãx3f
(
poöt
[0],Öoint[1],Öoint[2]);

1183 
glVîãx3f
(
¨row2
[0],árrow2[1],árrow2[2]);

1184 
glEnd
();

1241 
døw_co‹dö©e_grid
(
size
, 
•acög
)

1243 
glPushAârib
(
GL_CURRENT_BIT
|
GL_ENABLE_BIT
|
GL_LINE_BIT
);

1244 
glDißbÀ
(
GL_LIGHTING
);

1245 
glLöeWidth
(1);

1247 
glBegö
(
GL_LINES
);

1248 
glCﬁ‹3f
(0.5f,0.5f,0.5f);

1249 
	gi
=-
•acög
; i<=spacing; ++i){

1250 
glVîãx3f
(-
size
,0,
i
*size/
•acög
);

1251 
glVîãx3f
((
i
!=0)*
size
,0,i*size/
•acög
);

1252 
glVîãx3f
(
i
*
size
/
•acög
,0,-size);

1253 
glVîãx3f
(
i
*
size
/
•acög
,0,(i!=0)*size);

1255 
glCﬁ‹3f
(1,0,0);

1256 
glVîãx3f
(0,0,0);

1257 
glVîãx3f
(
size
,0,0);

1258 
glCﬁ‹3f
(0,1,0);

1259 
glVîãx3f
(0,0,0);

1260 
glVîãx3f
(0,
size
,0);

1261 
glCﬁ‹3f
(0,0,1);

1262 
glVîãx3f
(0,0,0);

1263 
glVîãx3f
(0,0,
size
);

1264 
glEnd
();

1266 
glP›Aârib
();

1269 
døw_ãxt
( const * , const * , )

1274 
	gwödowID
 = 0;

1278 
öô
(c⁄° *
wödowtôÀ
, *
¨gc
, **
¨gv
)

1280 
glutInô
(
¨gc
, 
¨gv
);

1281 
glutInôDi•œyMode
(
GLUT_DOUBLE
|
GLUT_RGBA
|
GLUT_ALPHA
|
GLUT_DEPTH
|
GLUT_STENCIL
);

1282 
glutInôWödowSize
(
wöwidth
, 
wöheight
);

1283 
	gwödowID
 = 
glutCª©eWödow
(
wödowtôÀ
);

1284 
glutResh≠eFunc
(
gluviResh≠e
);

1285 
glutDi•œyFunc
(
gluviDi•œy
);

1286 
glutMou£Func
(
gluviMou£
);

1287 
glutMŸi⁄Func
(
gluviDøg
);

1288 
glE«bÀ
(
GL_DEPTH_TEST
);

1289 
glCÀ¨Dïth
(1);

1290 
glPixñSt‹ei
(
GL_PACK_ALIGNMENT
, 1);

1291 
glPixñSt‹ei
(
GL_UNPACK_ALIGNMENT
, 1);

1293 
glBÀndFunc
 (
GL_SRC_ALPHA_SATURATE
, 
GL_ONE
);

1294 
glCÀ¨Cﬁ‹
 (1.0f, 1.0f, 1.0f, 1.0f);

1299 (*
	gu£rDi•œyFunc
)()=0;

1300 (*
	gu£rMou£Func
)(
	gbuâ⁄
, 
	g°©e
, 
	gx
, 
	gy
)=0;

1301 (*
	gu£rDøgFunc
)(
	gx
, 
	gy
)=0;

1302 
Camîa
 *
	gˇmîa
=0;

1303 
WidgëLi°
 
roŸ
(0);

1304 
	gwöwidth
=720, 
	gwöheight
=480;

1308 
run
()

1310 
glutMaöLo›
();

	@common/gluvi.h

1 #i‚de‡
GLUVI_H


2 
	#GLUVI_H


	)

4 
	~<io°ªam
>

5 
	~<ve˘‹
>

7 #ifde‡
__APPLE__


8 
	~<GLUT/glut.h
>

10 
	~<GL/glut.h
>

13 
«me•a˚
 
	gGluvi
{

16 
	sCamîa


18 
	gvútuÆ
 ~
Camîa
() {}

19 
vútuÆ
 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
) = 0;

20 
vútuÆ
 
døg
(
x
, 
y
) = 0;

21 
vútuÆ
 
ªtu∫_to_deÁu…
() = 0;

26 
vútuÆ
 
gl_å™sf‹m
() = 0;

27 
vútuÆ
 
exp‹t_rib
(
°d
::
o°ªam
 &
ouçut
) = 0;

28 
vútuÆ
 
di•œy_s¸ìn
() {}

31 
	gT¨gë3D
 : 
public
 
Camîa


33 
èrgë
[3], 
	gdi°
;

34 
	ghódög
, 
	gpôch
;

35 
	gdeÁu…_èrgë
[3], 
	gdeÁu…_di°
;

36 
	gdeÁu…_hódög
, 
	gdeÁu…_pôch
;

37 
	gfovy
;

38 
	g√¨_˛ù_Á˘‹
, 
	gÁr_˛ù_Á˘‹
;

39 íum {
	gINACTIVE
, 
	gROTATE
, 
	gTRUCK
, 
	gDOLLY
} 
	ga˘i⁄_mode
;

40 
	gﬁdmou£x
, 
	gﬁdmou£y
;

42 
T¨gë3D
(
èrgë_
[3]=0, 
di°_
=1.f, 
hódög_
=0.f, 
pôch_
=0.f, 
fovy_
=45.f,

43 
√¨_˛ù_Á˘‹_
=0.01f, 
Ár_˛ù_Á˘‹_
=100.f);

44 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

45 
døg
(
x
, 
y
);

46 
ªtu∫_to_deÁu…
();

47 
å™sf‹m_mou£
(
x
, 
y
, 
øy_‹igö
[3], 
øy_dúe˘i⁄
[3]);

48 
gë_võwög_dúe˘i⁄
(
dúe˘i⁄
[3]);

50 
gë_up_ve˘‹
(
up
[3]);

52 
gl_å™sf‹m
();

53 
exp‹t_rib
(
°d
::
o°ªam
 &
ouçut
);

57 
	gT¨gëOπho3D
 : 
public
 
Camîa


59 
èrgë
[3], 
	gdi°
;

60 
	ghódög
, 
	gpôch
;

61 
	gdeÁu…_èrgë
[3], 
	gdeÁu…_di°
;

62 
	gdeÁu…_hódög
, 
	gdeÁu…_pôch
;

63 
	gheight_Á˘‹
;

64 
	g√¨_˛ù_Á˘‹
, 
	gÁr_˛ù_Á˘‹
;

65 íum {
	gINACTIVE
, 
	gROTATE
, 
	gTRUCK
, 
	gDOLLY
} 
	ga˘i⁄_mode
;

66 
	gﬁdmou£x
, 
	gﬁdmou£y
;

68 
T¨gëOπho3D
(
èrgë_
[3]=0, 
di°_
=1.0f, 
hódög_
=0.0f, 
pôch_
=0.0f, 
height_Á˘‹_
=1.0f,

69 
√¨_˛ù_Á˘‹_
=0.01f, 
Ár_˛ù_Á˘‹_
=100.0f);

70 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

71 
døg
(
x
, 
y
);

72 
ªtu∫_to_deÁu…
();

73 
å™sf‹m_mou£
(
x
, 
y
, 
øy_‹igö
[3], 
øy_dúe˘i⁄
[3]);

74 
gë_võwög_dúe˘i⁄
(
dúe˘i⁄
[3]);

75 
gl_å™sf‹m
();

76 
exp‹t_rib
(
°d
::
o°ªam
 &
ouçut
);

79 
	gP™Zoom2D
 : 
public
 
Camîa


81 
bŸtom
, 
	gÀ·
, 
	gheight
;

82 
	gdeÁu…_bŸtom
, 
	gdeÁu…_À·
, 
	gdeÁu…_height
;

83 íum {
	gINACTIVE
, 
	gPAN
, 
	gZOOM_IN
, 
	gZOOM_OUT
} 
	ga˘i⁄_mode
;

84 
	gﬁdmou£x
, 
	gﬁdmou£y
;

85 
boﬁ
 
	gmoved_sö˚_mou£_down
;

86 
	g˛ickx
, 
	g˛icky
;

88 
P™Zoom2D
(
bŸtom_
=0, 
À·_
=0, 
height_
=1);

89 
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

90 
døg
(
x
, 
y
);

91 
ªtu∫_to_deÁu…
();

92 
å™sf‹m_mou£
(
x
, 
y
, 
co‹ds
[2]);

93 
gl_å™sf‹m
();

94 
exp‹t_rib
(
°d
::
o°ªam
 &
ouçut
);

95 
di•œy_s¸ìn
();

99 
	sWidgë


101 
Widgë
(Ë: 
di•x
(~0), 
di•y
(~0), 
width
(~0), 
height
(~0) {}

103 
	gdi•x
, 
	gdi•y
, 
	gwidth
, 
	gheight
;

105 
	gvútuÆ
 ~
Widgë
() {}

106 
vútuÆ
 
di•œy
(
x
, 
y
) = 0;

108 
vútuÆ
 
boﬁ
 
˛ick
(, , Ë{  
	gÁl£
; }

110 
vútuÆ
 
døg
(, ) {}

113 
	gSèticText
 : 
public
 
Widgë


115 c⁄° *
ãxt
;

117 
SèticText
(c⁄° *
ãxt_
);

118 
di•œy
(
x
, 
y
);

120 
	g¥iv©e
:

121 
SèticText
( const StaticText& );

122 
SèticText
 
	g›î©‹
=( const StaticText& );

126 
	gDy«micText
 : 
public
 
Widgë


128 
°d
::
°rög
 
ãxt
;

129 
	gcﬁ‹
[3];

131 
Dy«micText
–c⁄° 
°d
::
°rög
& 
ãxt_
 );

133 
£t_cﬁ‹
–
r
, 
g
, 
b
 );

135 
di•œy
(
x
, 
y
);

137 
	g¥iv©e
:

138 
Dy«micText
( const DynamicText& );

139 
Dy«micText
 
	g›î©‹
=( const DynamicText& );

144 
	gBuâ⁄
 : 
public
 
Widgë


146 íum {
UNINVOLVED
, 
	gSELECTED
, 
	gHIGHLIGHTED
} 
	g°©us
;

147 c⁄° *
	gãxt
;

148 
	gmöwidth
;

150 
Buâ⁄
(c⁄° *
ãxt_
, 
möwidth_
=0);

151 
di•œy
(
x
, 
y
);

152 
boﬁ
 
˛ick
(
°©e
, 
x
, 
y
);

153 
døg
(
x
, 
y
);

154 
vútuÆ
 
a˘i⁄
() {}

156 
	g¥iv©e
:

157 
Buâ⁄
( const Button& );

158 
Buâ⁄
 
	g›î©‹
=( const Button& );

162 
	gSlidî
 : 
public
 
Widgë


164 íum {
UNINVOLVED
, 
	gSELECTED
} 
	g°©us
;

165 c⁄° *
	gãxt
;

166 
	gÀngth
, 
	gju°ify
;

167 
	gposôi⁄
;

168 
	gs¸ﬁlxmö
, 
	gs¸ﬁlxmax
, 
	gs¸ﬁlymö
, 
	gs¸ﬁlymax
;

169 
	g˛ickx
;

171 
Slidî
(c⁄° *
ãxt_
, 
Àngth_
=100, 
posôi⁄_
=0, 
ju°ify_
=0);

172 
di•œy
(
x
, 
y
);

173 
boﬁ
 
˛ick
(
°©e
, 
x
, 
y
);

174 
døg
(
x
, 
y
);

175 
vútuÆ
 
a˘i⁄
() {}

177 
	g¥iv©e
:

178 
Slidî
( const Slider& );

179 
Slidî
 
	g›î©‹
=( const Slider& );

183 
	gWidgëLi°
 : 
public
 
Widgë


185 
ödít
;

186 
boﬁ
 
	ghiddí
;

187 
	g°d
::
ve˘‹
<
Widgë
*> 
li°
;

188 
	gdown˛icked_membî
;

190 
WidgëLi°
(
li°ödít_
=12, 
boﬁ
 
hiddí_
=
Ál£
);

191 
di•œy
(
x
, 
y
);

192 
boﬁ
 
˛ick
(
°©e
, 
x
, 
y
);

193 
døg
(
x
, 
y
);

197 (*
u£rDi•œyFunc
)();

200 (*
u£rMou£Func
)(
buâ⁄
, 
°©e
, 
x
, 
y
);

201 (*
u£rDøgFunc
)(
x
, 
y
);

206 
µm_s¸ìnshŸ
(c⁄° *
fûíame_f‹m©
, ...);

207 
sgi_s¸ìnshŸ
(c⁄° *
fûíame_f‹m©
, ...);

208 
£t_gíîic_lights
();

209 
£t_gíîic_m©îül
(
r
, 
g
, 
b
, 
GLíum
 
Á˚
=
GL_FRONT_AND_BACK
);

210 
£t_m©ã_m©îül
(
r
, 
g
, 
b
, 
GLíum
 
Á˚
=
GL_FRONT_AND_BACK
);

212 
døw_3d_¨row
(c⁄° 
ba£
[3], c⁄° 
poöt
[3], 
¨row_hód_Àngth
=0);

214 
døw_co‹dö©e_grid
(
size
=1, 
•acög
=10);

215 
døw_ãxt
(c⁄° 
poöt
[3], c⁄° *
ãxt
, 
f⁄tsize
=12);

218 
öô
(c⁄° *
wödowtôÀ
, *
¨gc
, **
¨gv
);

221 
Camîa
 *
ˇmîa
;

222 
WidgëLi°
 
roŸ
;

223 
wöwidth
, 
wöheight
;

224 
wödowID
;

226 
boﬁ
 
èkög_s¸ìnshŸ
;

227 
GLuöt
 
s¸ìnshŸ_fbo
;

230 
run
();

	@common/grid3.h

1 #i‚de‡
GRID3_H


2 
	#GRID3_H


	)

4 
	~<vec.h
>

6 
	gãm∂©e
<
˛ass
 
	gT
>

7 
	sGrid3


9 
	mVec
<3,
	mT
> 
	m‹igö
;

10 
T
 
	mdx
, 
	movî_dx
;

13 
	gGrid3
<> 
	tGrid3f
;

14 
	gGrid3
<> 
	tGrid3d
;

	@common/hashtable.h

1 #i‚de‡
HASHTABLE_H


2 
	#HASHTABLE_H


	)

4 
	~<fun˘i⁄Æ
>

5 
	~<io°ªam
>

6 
	~<ve˘‹
>

8 
	gãm∂©e
<
˛ass
 
	gKey
, cœs†
	gD©a
>

9 
	sHashE¡ry


11 
HashE¡ry
(Ë: 
key
(), 
d©a
(), 
√xt
(~0) {}

13 
Key
 
	mkey
;

14 
D©a
 
	md©a
;

15 
	m√xt
;

19 
ölöe
 
	$hash
(
k
)

20 {  
k
*2654435769u; 
	}
}

23 
	sDeÁu…HashFun˘i⁄


25 
	mãm∂©e
<
ty≥«me
 
	mKey
>

26 
›î©‹
(Ë(c⁄° 
	mKey
 &
	mk
Ëc⁄° {  
hash
(
k
); }

29 
	sequÆ


31 
	mãm∂©e
<
ty≥«me
 
	mT
>

32 
boﬁ
 
›î©‹
(Ë(c⁄° 
	mT
 &
	ma
, c⁄° T &
	mb
Ëc⁄° { á==
b
; }

35 
	gãm∂©e
<
ty≥«me
 
	gKey
,Åy≥«mê
	gD©a
, 
˛ass
 
	gHashFun˘i⁄
=
DeÁu…HashFun˘i⁄
, cœs†
	gKeyEquÆ
=
equÆ
>

36 
	sHashTabÀ


38 
èbÀ_ønk
;

39 
	mèbÀ_bôs
;

40 
	m°d
::
ve˘‹
<> 
èbÀ
;

41 
	mnum_íåõs
;

42 
	m°d
::
ve˘‹
<
HashE¡ry
<
Key
, 
	mD©a
> > 
	mpoﬁ
;

43 
	m‰ì_li°
;

44 c⁄° 
HashFun˘i⁄
 
	mhash_fun˘i⁄
;

45 c⁄° 
KeyEquÆ
 
	mkey_equÆ
;

47 
ex∂icô
 
HashTabÀ
(
ex≥˘ed_size
=64)

48 : 
èbÀ_ønk
(
°©ic_ˇ°
<>(~0)), 
èbÀ_bôs
(°©ic_ˇ°<>(~0)), 
èbÀ
(0), 
num_íåõs
(°©ic_ˇ°<>(~0)), 
poﬁ
(), 
‰ì_li°
(static_cast<>(~0)),

49 
hash_fun˘i⁄
(
HashFun˘i⁄
()), 
key_equÆ
(
KeyEquÆ
())

50 { 
öô
(
ex≥˘ed_size
); }

52 
ex∂icô
 
HashTabÀ
(c⁄° 
HashFun˘i⁄
 &
hf
, 
ex≥˘ed_size
=64)

53 : 
hash_fun˘i⁄
(
hf
), 
key_equÆ
(
KeyEquÆ
())

54 { 
öô
(
ex≥˘ed_size
); }

56 
öô
(
ex≥˘ed_size
)

58 
	mi
;

59 
	mnum_íåõs
=0;

60 
	mèbÀ_ønk
=4;

61 1u<<
	mèbÀ_ønk
 < 
	mex≥˘ed_size
)

62 ++
	mèbÀ_ønk
;

63 ++
	mèbÀ_ønk
;

64 
	mèbÀ_bôs
=(1u<<
èbÀ_ønk
)-1;

65 
	mèbÀ
.
ªsize
(1u<<
èbÀ_ønk
);

66 
	mi
=0; i<
	mèbÀ
.
size
(); ++i)

67 
	mèbÀ
[
i
]=-1;

68 
	mpoﬁ
.
ªsize
(1u<<
èbÀ_ønk
);

69 
	m‰ì_li°
=0;

70 
	mj
=0; j<
	mpoﬁ
.
size
()-1; ++j)

71 
	mpoﬁ
[
j
].
	m√xt
=j+1;

72 
	mpoﬁ
[
poﬁ
.
size
()-1].
	m√xt
=-1;

75 
add
(c⁄° 
Key
 &
k
, c⁄° 
D©a
 &
d
)

77 if(
	m‰ì_li°
==-1)

78 
ª£rve
(1u<<(
èbÀ_ønk
+1));

79 
	mi
=
‰ì_li°
;

80 
	m‰ì_li°
=
poﬁ
[
i
].
√xt
;

81 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

82 
	mpoﬁ
[
i
].
	mkey
=
k
;

83 
	mpoﬁ
[
i
].
	md©a
=
d
;

84 
	mpoﬁ
[
i
].
	m√xt
=
èbÀ
[
t
];

85 
	mèbÀ
[
t
]=
i
;

86 ++
	mnum_íåõs
;

89 
dñëe_íåy
(c⁄° 
Key
 &
k
, c⁄° 
D©a
 &
d
)

91 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

92 
	mi
=
èbÀ
[
t
], *
	mp_i
=&table[t];

93 
	mi
!=-1){

94 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
Ë&& 
d
=ıoﬁ[i].
d©a
){

95 *
p_i
=
poﬁ
[
i
].
√xt
;

96 
	mpoﬁ
[
i
].
	m√xt
=
‰ì_li°
;

97 
	m‰ì_li°
=
i
;

100 
	mp_i
=&
poﬁ
[
i
].
√xt
;

101 
	mi
=*
p_i
;

105 
size
() const

106 {  
	mnum_íåõs
; }

108 
˛ór
()

110 
	mi
=0;

111 
	mnum_íåõs
=0;

112 
	mi
=0; i<
	mèbÀ
.
size
(); ++i)

113 
	mèbÀ
[
i
]=-1;

114 
	m‰ì_li°
=0;

115 
	mi
=0; i<
	mpoﬁ
.
size
()-1; ++i)

116 
	mpoﬁ
[
i
].
	m√xt
=i+1;

117 
	mpoﬁ
[
poﬁ
.
size
()-1].
	m√xt
=-1;

120 
ª£rve
(
ex≥˘ed_size
)

122 if(
	mex≥˘ed_size
<=
poﬁ
.
size
())

124 1u<<
	mèbÀ_ønk
 < 
	mex≥˘ed_size
)

125 ++
	mèbÀ_ønk
;

126 
	mèbÀ_bôs
=(1u<<
èbÀ_ønk
)-1;

128 
	mﬁd_size
=()
poﬁ
.
size
(), 
	mi
;

129 
	mpoﬁ
.
ªsize
(1u<<
èbÀ_ønk
);

130 
	mi
=
ﬁd_size
; i<
	mpoﬁ
.
size
()-1; ++i)

131 
	mpoﬁ
[
i
].
	m√xt
=i+1;

132 
	mpoﬁ
[
i
].
	m√xt
=
‰ì_li°
;

133 
	m‰ì_li°
=
ﬁd_size
;

135 
	mﬁd_size
=()
èbÀ
.
size
();

136 
	mèbÀ
.
ªsize
(1u<<
èbÀ_ønk
);

137 
	mt
;

138 
	mt
=
ﬁd_size
;Å<
	mèbÀ
.
size
(); ++t)

139 
	mèbÀ
[
t
]=-1;

140 
	mj
, *
	mp_j
;

141 
	mt
=0;Å<
	mﬁd_size
; ++t){

142 
	mj
=
èbÀ
[
t
];

143 
	mp_j
=&
èbÀ
[
t
];

144 
	mj
!=-1){

145 
√w_t
=
hash_fun˘i⁄
(
poﬁ
[
j
].
key
)&
èbÀ_bôs
;

146 if(
	m√w_t
!=
t
){

148 *
p_j
=
poﬁ
[
j
].
√xt
;

150 
	mpoﬁ
[
j
].
	m√xt
=
èbÀ
[
√w_t
];

151 
	mèbÀ
[
√w_t
]=
j
;

153 
	mp_j
=&(
poﬁ
[
j
].
√xt
);

154 
	mj
=*
p_j
;

159 
boﬁ
 
has_íåy
(c⁄° 
Key
 &
k
) const

161 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

162 
	mi
=
èbÀ
[
t
];

163 
	mi
!=-1){

164 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
))

165  
åue
;

166 
	mi
=
poﬁ
[
i
].
√xt
;

168  
	mÁl£
;

171 
boﬁ
 
gë_íåy
(c⁄° 
Key
 &
k
, 
D©a
 &
d©a_ªtu∫
) const

173 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

174 
	mi
=
èbÀ
[
t
];

175 
	mi
!=-1){

176 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
)){

177 
d©a_ªtu∫
=
poﬁ
[
i
].
d©a
;

178  
	måue
;

180 
	mi
=
poﬁ
[
i
].
√xt
;

182  
	mÁl£
;

185 
≠≥nd_Æl_íåõs
(c⁄° 
Key
& 
k
, 
°d
::
ve˘‹
<
D©a
>& 
d©a_ªtu∫
) const

187 
t
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

188 
	mi
=
èbÀ
[
t
];

189 
	mi
!=-1){

190 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
)Ë
d©a_ªtu∫
.
push_back
’oﬁ[i].
d©a
);

191 
	mi
=
poﬁ
[
i
].
√xt
;

195 
	mD©a
 &
›î©‹
(Ë(c⁄° 
	mKey
 &
	mk
, c⁄° D©®&
	mmissög_d©a
)

197 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

198 
	mi
=
èbÀ
[
t
];

199 
	mi
!=-1){

200 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
))

201  
poﬁ
[
i
].
d©a
;

202 
	mi
=
poﬁ
[
i
].
√xt
;

204 
add
(
k
, 
missög_d©a
);

205  
	mpoﬁ
[
èbÀ
[
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
]].
	md©a
;

208 c⁄° 
	mD©a
 &
›î©‹
(Ë(c⁄° 
	mKey
 &
	mk
, c⁄° D©®&
	mmissög_d©a
) const

210 
	mt
=
hash_fun˘i⁄
(
k
)&
èbÀ_bôs
;

211 
	mi
=
èbÀ
[
t
];

212 
	mi
!=-1){

213 if(
key_equÆ
(
k
, 
poﬁ
[
i
].
key
))

214  
poﬁ
[
i
].
d©a
;

215 
	mi
=
poﬁ
[
i
].
√xt
;

217  
	mmissög_d©a
;

220 
ouçut_°©i°ics
() const

222 
	m°d
::
ve˘‹
<> 
Àngthcou¡
(
èbÀ
.
size
());

223 
	mt
;

224 
	mtŸÆ
=0;

225 
	mt
=0;Å<
	mèbÀ
.
size
(); ++t){

226 
	mi
=
èbÀ
[
t
], 
	mÀngth
=0;

227 
	mi
!=-1){

228 ++
Àngth
;

229 
	mi
=
poﬁ
[
i
].
√xt
;

231 ++
	mÀngthcou¡
[
Àngth
];

232 ++
	mtŸÆ
;

234 
	msubtŸÆ
=0;

235 
	mmaxÀngth
=0;

236 
	mt
=0;Å<
	mÀngthcou¡
.
size
() &&Å<10; ++t){

237 
	msubtŸÆ
+=
Àngthcou¡
[
t
];

238 if(
	mÀngthcou¡
[
t
]>0){

239 
	m°d
::
cout
<<"Àngth "<<
t
<<": "<<
Àngthcou¡
[t]<<" ("<<Àngthcou¡[t]/()
tŸÆ
*100.0<<"%)"<<
°d
::
ídl
;

240 
	mmaxÀngth
=
t
;

243 
	m°d
::
cout
<<"ª°: "<<
tŸÆ
-
subtŸÆ
<<" ("<<100.0*(1.0-subtŸÆ/(ÈŸÆ)<<"%)"<<
°d
::
ídl
;

244 ; 
	mt
<
	mÀngthcou¡
.
size
(); ++t)

245 if(
	mÀngthcou¡
[
t
]>0)

246 
	mmaxÀngth
=
t
;

247 
	m°d
::
cout
<<"l⁄ge°Üi°: "<<
maxÀngth
<<
°d
::
ídl
;

	@common/lapack_wrapper.h

1 #i‚de‡
LAPACK_WRAPPER_H


2 
	#LAPACK_WRAPPER_H


	)

8 
	~<cm©h
>

9 
	~<io°ªam
>

11 
usög
 
	g°d
::
max
;

12 
usög
 
	g°d
::
mö
;

14 
«me•a˚
 
	gLAPACK
{

20 
sﬁve_gíîÆ_sy°em
(&
n
, &
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
);

21 
sﬁve_gíîÆ_sy°em
(
n
, 
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
);

22 
Á˘‹_gíîÆ_m©rix
(
m
, 
n
, *
a
, 
lda
, *
ùiv
, &
öfo
);

23 
övît_gíîÆ_m©rix
(
n
, *
a
, 
lda
, *
ùiv
, *
w‹k
, 
lw‹k
, &
öfo
);

24 
gë_eigí_decomposôi⁄
–*
n
, *
a
, * , *
eigívÆues
, *
w‹k
, *
lw‹k
, *
öfo
 );

25 
svd
–* 
m
, * 
n
, * 
a
, * 
lda
, *
s
, *
u
, * 
ldu
, * 
vt
, *
ldvt
, *
w‹k
, * 
lw‹k
, * 
iw‹k
, * 
öfo
 );

26 
Àa°_squ¨es_svd
–* 
m
, * 
n
, * 
ƒhs
, * 
a
, * 
lda
, * 
rhs_sﬁ
, * 
ldb
, * 
s
, * 
rc⁄d
, * 
ønk
, * 
w‹k
, * 
lw‹k
, * 
iw‹k
, *
öfo
 );

27 
sim∂e_Àa°_squ¨es_svd
–
m
, 
n
, 
ƒhs
, * 
a
, 
lda
, * 
rhs_sﬁ
, & 
öfo
 );

28 
sﬁve_Àa°_squ¨es
(
å™s
, 
m
, 
n
, 
ƒhs
, *
a
, 
lda
, *
b
, 
ldb
, & 
öfo
 );

34 
ölöe
 
sim∂e_Àa°_squ¨es_svd
–
m
, 
n
, 
ƒhs
, * 
a
, 
lda
, * 
rhs_sﬁ
, & 
öfo
 )

36 
	gœ∑ck_m
 = 
m
;

37 
	gœ∑ck_n
 = 
n
;

38 
	gœ∑ck_ƒhs
 = 
ƒhs
;

39 
	gœ∑ck_lda
 = 
lda
;

40 
	gœ∑ck_ldb
 = 
max
–
œ∑ck_m
, 
œ∑ck_n
 );

41 * 
	gs
 = 
√w
 [ 
mö
(
œ∑ck_m
, 
œ∑ck_n
) ];

42 
	grc⁄d
 = -1.0;

43 
	gønk
;

44 
	g›timÆ_w‹k_size
;

45 
	glw‹k
 = -1;

46 
	g∆vl
 = 26;

47 
	gliw‹k
 = 2*
mö
(
œ∑ck_m
,
œ∑ck_n
)*
	g∆vl
 + 11*min(lapack_m,lapack_n);

48 *
	giw‹k
 = 
√w
 [
liw‹k
];

51 
	gœ∑ck_°©us
 = 
LAPACK
::
Àa°_squ¨es_svd
–&
œ∑ck_m
,

52 &
œ∑ck_n
,

53 &
œ∑ck_ƒhs
,

54 
a
,

55 &
œ∑ck_lda
,

56 
rhs_sﬁ
,

57 &
œ∑ck_ldb
,

58 
s
,

59 &
rc⁄d
,

60 &
ønk
,

61 &
›timÆ_w‹k_size
,

62 &
lw‹k
,

63 
iw‹k
,

64 &
öfo
 );

67 i‡–
	göfo
 != 0 )

69 
°d
::
cout
 << "œ∑ck info: " << 
öfo
 << ";Ü≠ack_°©us: " << 
œ∑ck_°©us
 << std::
ídl
;

72 
as£π
–
öfo
 == 0 );

74 
	glw‹k
 = ()
˚û
(
›timÆ_w‹k_size
);

76 *
	gw‹k
 = 
√w
 [
lw‹k
];

78 
	gœ∑ck_°©us
 = 
LAPACK
::
Àa°_squ¨es_svd
–&
œ∑ck_m
,

79 &
œ∑ck_n
,

80 &
œ∑ck_ƒhs
,

81 
a
,

82 &
œ∑ck_lda
,

83 
rhs_sﬁ
,

84 &
œ∑ck_ldb
,

85 
s
,

86 &
rc⁄d
,

87 &
ønk
,

88 
w‹k
,

89 &
lw‹k
,

90 
iw‹k
,

91 &
öfo
 );

93 
as£π
–
öfo
 == 0 );

95 
	gdñëe
[] 
	gs
;

96 
	gdñëe
[] 
	giw‹k
;

97 
	gdñëe
[] 
	gw‹k
;

101 
ölöe
 
sﬁve_Àa°_squ¨es
(, 
m
, 
n
, 
ƒhs
, *
a
, 
lda
, *
b
, , & 
öfo
 )

103 
sim∂e_Àa°_squ¨es_svd
–
m
, 
n
, 
ƒhs
, 
a
, 
lda
, 
b
, 
öfo
 );

112 #ifde‡
__APPLE__


113 
	~<Ac˚Àøã/Ac˚Àøã.h
>

115 
ölöe
 
sﬁve_gíîÆ_sy°em
(&
n
, &
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
)

116 {  
sgesv_
–(
__CLPK_öãgî
*Ë&
n
,

117 (
__CLPK_öãgî
*Ë&
ƒhs
,

118 
a
,

119 (
__CLPK_öãgî
*Ë&
lda
,

120 (
__CLPK_öãgî
*Ë
ùiv
,

121 
b
,

122 (
__CLPK_öãgî
*Ë&
ldb
,

123 (
__CLPK_öãgî
*Ë&
öfo
); }

125 
ölöe
 
sﬁve_gíîÆ_sy°em
(
n
, 
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
)

126 {  
dgesv_
–(
__CLPK_öãgî
*Ë&
n
,

127 (
__CLPK_öãgî
*Ë&
ƒhs
,

128 
a
,

129 (
__CLPK_öãgî
*Ë&
lda
,

130 (
__CLPK_öãgî
*Ë
ùiv
,

131 
b
,

132 (
__CLPK_öãgî
*Ë&
ldb
,

133 (
__CLPK_öãgî
*Ë&
öfo
); }

136 
ölöe
 
Á˘‹_gíîÆ_m©rix
(
m
, 
n
, *
a
, 
lda
, *
ùiv
, &
öfo
)

137 {  
dgërf_
–(
__CLPK_öãgî
*)&
m
, (__CLPK_öãgî*)&
n
, 
a
, (__CLPK_öãgî*)&
lda
, (__CLPK_öãgî*)
ùiv
, (__CLPK_öãgî*)&
öfo
); }

140 
ölöe
 
övît_gíîÆ_m©rix
(
n
, *
a
, 
lda
, *
ùiv
, *
w‹k
, 
lw‹k
, &
öfo
)

142 
Á˘‹_gíîÆ_m©rix
–
n
,Ç, 
a
, 
lda
, 
ùiv
, 
öfo
);

143 
as£π
–
öfo
 == 0 );

144 
dgëri_
–(
__CLPK_öãgî
*)&
n
, 
a
, (__CLPK_öãgî*)&
lda
, (__CLPK_öãgî*)
ùiv
, 
w‹k
, (__CLPK_öãgî*)&
lw‹k
, (__CLPK_öãgî*)&
öfo
);

147 
ölöe
 
gë_eigí_decomposôi⁄
–*
n
, *
a
, * , *
eigívÆues
, *
w‹k
, *
lw‹k
, *
öfo
 )

149 
	gch¨_v
 = 'V';

150 
	gch¨_l
 = 'L';

151 
dsyev_
–&
ch¨_v
, &
ch¨_l
, (
__CLPK_öãgî
*)
n
, 
a
, (__CLPK_öãgî*Í, 
eigívÆues
, 
w‹k
, (__CLPK_öãgî*)
lw‹k
, (__CLPK_öãgî*)
öfo
 );

155 
ölöe
 
svd
–* 
m
, * 
n
, * 
a
, * 
lda
, *
s
, *
u
, * 
ldu
, * 
vt
, *
ldvt
, *
w‹k
, * 
lw‹k
, * 
iw‹k
, * 
öfo
 )

157 
	gch¨_a
 = 'A';

158  
dgesdd_
–&
ch¨_a
, (
__CLPK_öãgî
*)
m
, (__CLPK_öãgî*)
n
, 
a
, (__CLPK_öãgî*)
lda
, 
s
, 
u
, (__CLPK_öãgî*)
ldu
, 
vt
, (__CLPK_öãgî*)
ldvt
, 
w‹k
, (__CLPK_öãgî*)
lw‹k
, (__CLPK_öãgî*)
iw‹k
, (__CLPK_öãgî*)
öfo
 );

161 
ölöe
 
Àa°_squ¨es_svd
–* 
m
, * 
n
, * 
ƒhs
, * 
a
, * 
lda
, * 
rhs_sﬁ
, * 
ldb
, * 
s
, * 
rc⁄d
, * 
ønk
, * 
w‹k
, * 
lw‹k
, * 
iw‹k
, *
öfo
 )

163  
dgñsd_
–(
__CLPK_öãgî
*)
m
, (__CLPK_öãgî*)
n
, (__CLPK_öãgî*)
ƒhs
, 
a
, (__CLPK_öãgî*)
lda
, 
rhs_sﬁ
, (__CLPK_öãgî*)
ldb
, 
s
, 
rc⁄d
, (__CLPK_öãgî*Ë
ønk
, 
w‹k
, (__CLPK_öãgî*Ë
lw‹k
, (__CLPK_öãgî*Ë
iw‹k
 , (__CLPK_öãgî*Ë
öfo
 );

173 #i‚de‡
__APPLE__


178 
sgesv_
(c⁄° *
N
, c⁄° *
ƒhs
, *
A
, c⁄° *
lda
, *
ùiv
, *
b
, c⁄° *
ldb
, *
öfo
);

179 
dgesv_
 (*
n
, *
ƒhs
, *
a
, *
lda
, *
ùiv
, *
b
, *
ldb
, *
öfo
);

180 
dgìv_
 (*
jobvl
, *
jobvr
, *
n
, *
a
, *
lda
, *
wr
, *
wi
, *
vl
, *
ldvl
, *
vr
, *
ldvr
, *
w‹k
, *
lw‹k
, *
öfo
);

181 
dsygv_
 (*
ôy≥
, *
jobz
, *
u∂o
, *
n
, *
a
, *
lda
, *
b
, *
ldb
, *
w
, *
w‹k
, *
lw‹k
, *
öfo
);

182 
dgñss_
 (*
m
, *
n
, *
ƒhs
, *
a
, *
lda
, *
b
, *
ldb
, *
s
, *
rc⁄d
, *
ønk
, *
w‹k
, *
lw‹k
, *
öfo
);

183 
dgñsd_
 (*
m
, *
n
, *
ƒhs
, *
a
, *
lda
, *
b
, *
ldb
, *
s
, *
rc⁄d
, *
ønk
, *
w‹k
, *
lw‹k
, *
iw‹k
, *
öfo
);

184 
dsyev_
 (*
jobz
, *
u∂o
, *
n
, *
Á
, *
lda
, *
w
, *
w‹k
, *
lw‹k
, *
öfo
);

185 
dsysv_
 (*
u∂o
, *
n
, *
ƒhs
, *
a
, *
lda
, *
ùiv
, *
b
, *
ldb
, *
w‹k
, *
lw‹k
, *
öfo
);

186 
dgërf_
 (*
m
, *
n
, *
a
, *
lda
, *
ùiv
, *
öfo
);

187 
dgëri_
 (*
n
, *
a
, *
lda
, *
ùiv
, *
öfo
);

188 
dgebrd_
 (*
m
, *
n
, *
a
, *
lda
, *
d
, *
e
, *
èuq
, *
èup
, *
w‹k
, *
lw‹k
, *
öfo
);

189 
d‹gbr_
 (*
ve˘
, *
m
, *
n
, *
k
, *
a
, *
lda
, *
èu
, *
w‹k
, *
lw‹k
, *
öfo
);

190 
dbdsqr_
 (*
u∂o
, *
n
, *
ncvt
, *
ƒu
, *
ncc
, *
d
, *
e
, *
vt
, *
ldvt
, *
u
, *
ldu
, *
c
, *
ldc
, *
w‹k
, *
öfo
);

191 
dgërs_
 (*
å™s
, *
n
, *
ƒhs
, *
a
, *
lda
, *
ùiv
, *
b
, *
ldb
, *
öfo
);

192 
dpŸrf_
 (*
u∂o
, *
n
, *
a
, *
lda
, *
öfo
);

193 
dgeqpf_
 (*
m
, *
n
, *
a
, *
lda
, *
jpvt
, *
èu
, *
w‹k
, *
öfo
);

194 
dgesdd_
–* 
jobz
, * 
m
, * 
n
, * 
a
, * 
lda
, *
s
, *
u
, * 
ldu
, * 
vt
, *
ldvt
, *
w‹k
, * 
lw‹k
, * 
iw‹k
, * 
öfo
 );

197 
«me•a˚
 
LAPACK


200 
ölöe
 
sﬁve_gíîÆ_sy°em
(
n
, 
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
)

202 
sgesv_
(&
n
, &
ƒhs
, 
a
, &
lda
, 
ùiv
, 
b
, &
ldb
, &
öfo
);

205 
ölöe
 
sﬁve_gíîÆ_sy°em
(
n
, 
ƒhs
, *
a
, 
lda
, *
ùiv
, *
b
, 
ldb
, &
öfo
)

207  
dgesv_
(&
n
, &
ƒhs
, 
a
, &
lda
, 
ùiv
, 
b
, &
ldb
, &
öfo
);

210 
ölöe
 
Á˘‹_gíîÆ_m©rix
(
m
, 
n
, *
a
, 
lda
, *
ùiv
, &
öfo
)

211 {  
dgërf_
(&
m
, &
n
, 
a
, &
lda
, 
ùiv
, &
öfo
); }

213 
ölöe
 
övît_gíîÆ_m©rix
(
n
, *
a
, 
lda
, *
ùiv
, *
w‹k
, 
lw‹k
, &
öfo
)

215 
Á˘‹_gíîÆ_m©rix
(
n
,Ç, 
a
, 
lda
, 
ùiv
, 
öfo
);

216 
dgëri_
(&
n
, 
a
, &
lda
, 
ùiv
, &
öfo
);

219 
ölöe
 
gë_eigí_decomposôi⁄
–*
n
, *
a
, *
lda
, *
eigívÆues
, *
w‹k
, *
lw‹k
, *
öfo
 )

221 
ch¨_v
 = 'V';

222 
ch¨_l
 = 'L';

223 
dsyev_
–&
ch¨_v
, &
ch¨_l
, 
n
, 
a
,Ç, 
eigívÆues
, 
w‹k
, 
lw‹k
, 
öfo
 );

226 
ölöe
 
svd
–* 
m
, * 
n
, * 
a
, * 
lda
, *
s
, *
u
, * 
ldu
, * 
vt
, *
ldvt
, *
w‹k
, * 
lw‹k
, * 
iw‹k
, * 
öfo
 )

228 
ch¨_a
 = 'A';

229  
dgesdd_
–&
ch¨_a
, 
m
, 
n
, 
a
, 
lda
, 
s
, 
u
, 
ldu
, 
vt
, 
ldvt
, 
w‹k
, 
lw‹k
, 
iw‹k
, 
öfo
 );

232 
ölöe
 
Àa°_squ¨es_svd
–* 
m
, * 
n
, * 
ƒhs
, * 
a
, * 
lda
, * 
rhs_sﬁ
, * 
ldb
, * 
s
, * 
rc⁄d
, * 
ønk
, * 
w‹k
, * 
lw‹k
, * 
iw‹k
, *
öfo
 )

234  
dgñsd_
–
m
, 
n
, 
ƒhs
, 
a
, 
lda
, 
rhs_sﬁ
, 
ldb
, 
s
, 
rc⁄d
, 
ønk
, 
w‹k
, 
lw‹k
, 
iw‹k
, 
öfo
 );

	@common/levelset.cpp

1 
	~<Àvñ£t.h
>

2 
	~<utû.h
>

3 
	~<¨øy2_utûs.h
>

4 
	~<¨øy3_utûs.h
>

6 
	$öãΩﬁ©e_phi
(c⁄° 
Vec2f
& 
poöt
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
) {

7 
öv_dx
 = 1/
dx
;

8 
Vec2f
 
ãmp
 = (
poöt
-
‹igö
)*
öv_dx
;

9  
	`öãΩﬁ©e_vÆue
(
ãmp
, 
grid
);

10 
	}
}

12 
	$öãΩﬁ©e_phi
(c⁄° 
Vec3f
& 
poöt
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
) {

13 
öv_dx
 = 1/
dx
;

14 
Vec3f
 
ãmp
 = (
poöt
-
‹igö
)*
öv_dx
;

15  
	`öãΩﬁ©e_vÆue
(
ãmp
, 
grid
);

16 
	}
}

18 
	$öãΩﬁ©e_n‹mÆ
(
Vec2f
& 
n‹mÆ
, c⁄° Vec2f& 
poöt
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
) {

19 
öv_dx
 = 1/
dx
;

20 
Vec2f
 
ãmp
 = (
poöt
-
‹igö
)*
öv_dx
;

21 
vÆue
 = 
	`öãΩﬁ©e_gødõ¡
(
n‹mÆ
, 
ãmp
, 
grid
);

22 if(
	`mag
(
n‹mÆ
) != 0)

23 
	`n‹mÆize
(
n‹mÆ
);

24  
vÆue
;

25 
	}
}

27 
	$öãΩﬁ©e_n‹mÆ
(
Vec3f
& 
n‹mÆ
, c⁄° Vec3f& 
poöt
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
) {

28 
öv_dx
 = 1/
dx
;

29 
Vec3f
 
ãmp
 = (
poöt
-
‹igö
)*
öv_dx
;

30 
vÆue
 = 
	`öãΩﬁ©e_gødõ¡
(
n‹mÆ
, 
ãmp
, 
grid
);

31 if(
	`mag
(
n‹mÆ
) != 0)

32 
	`n‹mÆize
(
n‹mÆ
);

33  
vÆue
;

34 
	}
}

36 
	$¥oje˘_to_isosurÁ˚
(
Vec2f
& 
poöt
, c⁄° 
èrgë_vÆue
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
) {

37 
tﬁ
 = 0.01f*
dx
;

38 
max_ôî
 = 5;

40 
ôî
 = 0;

41 
Vec2f
 
n‹mÆ
;

42 
phi
 = 
	`öãΩﬁ©e_n‹mÆ
(
n‹mÆ
, 
poöt
, 
grid
, 
‹igö
, 
dx
);

43 
	`Ábs
(
phi
 - 
èrgë_vÆue
Ë> 
tﬁ
 && 
ôî
++ < 
max_ôî
) {

44 
poöt
 -(
phi
 - 
èrgë_vÆue
Ë* 
n‹mÆ
;

45 
phi
 = 
	`öãΩﬁ©e_n‹mÆ
(
n‹mÆ
, 
poöt
, 
grid
, 
‹igö
, 
dx
);

47 
	}
}

49 
	$¥oje˘_to_isosurÁ˚
(
Vec3f
& 
poöt
, c⁄° 
èrgë_vÆue
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
) {

50 
tﬁ
 = 0.01f*
dx
;

51 
max_ôî
 = 5;

53 
ôî
 = 0;

54 
Vec3f
 
n‹mÆ
;

55 
phi
 = 
	`öãΩﬁ©e_n‹mÆ
(
n‹mÆ
, 
poöt
, 
grid
, 
‹igö
, 
dx
);

56 
	`Ábs
(
phi
 - 
èrgë_vÆue
Ë> 
tﬁ
 && 
ôî
++ < 
max_ôî
) {

57 
poöt
 -(
phi
 - 
èrgë_vÆue
Ë* 
n‹mÆ
;

58 
phi
 = 
	`öãΩﬁ©e_n‹mÆ
(
n‹mÆ
, 
poöt
, 
grid
, 
‹igö
, 
dx
);

60 
	}
}

65 
	$‰a˘i⁄_öside
(
phi_À·
, 
phi_right
)

72 (
phi_À·
 >0 && 
phi_right
 >= 0)?

74 –(
phi_À·
 < 0 && 
phi_right
 < 0)?

77 (
phi_À·
 >= 0)?

78 (1 - 
phi_À·
 / (phi_À· - 
phi_right
)):

79 (
phi_À·
 / (phi_À· - 
phi_right
))

82 
	}
}

88 
	$‰a˘i⁄_öside_eôhî
(
phi_À·0
, 
phi_right0
, 
phi_À·1
, 
phi_right1
)

90 if(
phi_À·0
 <= 0) {

91 if(
phi_right0
 <= 0) {

96 if(
phi_À·1
 <= 0) {

97 if(
phi_right1
 <= 0) {

102  
	`max
–
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
),

103 
	`‰a˘i⁄_öside
(
phi_À·1
, 
phi_right1
) );

107 if(
phi_right1
 <= 0) {

108 
‰ac0
 = 
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
);

109 
‰ac1
 = 
	`‰a˘i⁄_öside
(
phi_À·1
, 
phi_right1
);

110 
tŸÆ
 = 
‰ac0
+
‰ac1
;

111 if(
tŸÆ
 <= 1)

112  
tŸÆ
;

119  
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
);

125 if(
phi_right0
 <= 0) {

126 if(
phi_À·1
 <= 0) {

127 if(
phi_right1
 <= 0) {

133 
‰ac0
 = 
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
);

134 
‰ac1
 = 
	`‰a˘i⁄_öside
(
phi_À·1
, 
phi_right1
);

135 
tŸÆ
 = 
‰ac0
+
‰ac1
;

136 if(
tŸÆ
 <= 1)

137  
tŸÆ
;

143 if(
phi_right1
 <= 0) {

145  
	`max
–
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
),

146 
	`‰a˘i⁄_öside
(
phi_À·1
, 
phi_right1
) );

150  
	`‰a˘i⁄_öside
(
phi_À·0
, 
phi_right0
);

157  
	`‰a˘i⁄_öside
(
phi_À·1
, 
phi_right1
);

160 
	}
}

162 
	$compuã_vﬁume_‰a˘i⁄s
(c⁄° 
Aºay2f
& 
Àvñ£t
, c⁄° 
Vec2f
& 
ls_‹igö
, 
ls_dx
, Aºay2f& 
vﬁumes
, c⁄° Vec2f& 
v_‹igö
, 
v_dx
, 
subdivisi⁄s
) {

164 
sub_dx
 = 
v_dx
 / ()(
subdivisi⁄s
+1);

166 
±rdiff_t
 
j
 = 0; j < 
vﬁumes
.
nj
; ++jË±rdiff_à
i
 = 0; i < vﬁumes.
ni
; ++i) {

168 
Vec2f
 
bŸtom_À·
 = 
v_‹igö
 + 
	`Vec2f
(()
i
*
v_dx
, ()
j
*v_dx);

169 
öside_ßm∂es
 = 0;

170 
subj
 = 0; subj < 
subdivisi⁄s
+1; ++subjË
subi
 = 0; subi < subdivisions+1; ++subi) {

171 
Vec2f
 
poöt
 = 
bŸtom_À·
 + 
	`Vec2f
–(
subi
+0.5f)*
sub_dx
, (
subj
+0.5f)*sub_dx);

172 
d©a
 = 
	`öãΩﬁ©e_phi
(
poöt
, 
Àvñ£t
, 
ls_‹igö
, 
ls_dx
);

173 
öside_ßm∂es
 +(
d©a
 < 0)?1:0;

175 
	`vﬁumes
(
i
,
j
Ë()
öside_ßm∂es
 / ()
	`sqr
(
subdivisi⁄s
+1);

177 
	}
}

179 
	$compuã_vﬁume_‰a˘i⁄s
(c⁄° 
Aºay3f
& 
Àvñ£t
, c⁄° 
Vec3f
& 
ls_‹igö
, 
ls_dx
, Aºay3f& 
vﬁumes
, c⁄° Vec3f& 
v_‹igö
, 
v_dx
, 
subdivisi⁄s
) {

181 
sub_dx
 = 
v_dx
 / ()(
subdivisi⁄s
+1);

183 
±rdiff_t
 
k
 = 0; k < 
vﬁumes
.
nk
; ++kË±rdiff_à
j
 = 0; j < vﬁumes.
nj
; ++jË±rdiff_à
i
 = 0; i < vﬁumes.
ni
; ++i) {

185 
Vec3f
 
bŸtom_À·
 = 
v_‹igö
 + 
	`Vec3f
((()
i
-0.5f)*
v_dx
, (()
j
-0.5f)*v_dx, (()
k
-0.5f)*v_dx);

186 
öside_ßm∂es
 = 0;

190 
e°im©e
 = 
	`öãΩﬁ©e_phi
(
bŸtom_À·
 + 0.5f*
v_dx
*
	`Vec3f
(1,1,1), 
Àvñ£t
, 
ls_‹igö
, 
ls_dx
);

191 if(
e°im©e
 > 
v_dx
) {

192 
	`vﬁumes
(
i
,
j
,
k
) = 0;

195 if(
e°im©e
 < -
v_dx
) {

196 
	`vﬁumes
(
i
,
j
,
k
) = 1;

200 
subk
 = 0; subk < 
subdivisi⁄s
+1; ++subkË
subj
 = 0; subj < subdivisi⁄s+1; ++subjË
subi
 = 0; subi < subdivisions+1; ++subi) {

201 
Vec3f
 
poöt
 = 
bŸtom_À·
 + 
	`Vec3f
–(
subi
+0.5f)*
sub_dx
, (
subj
+0.5f)*sub_dx, (
subk
+0.5f)*sub_dx);

202 
d©a
 = 
	`öãΩﬁ©e_phi
(
poöt
, 
Àvñ£t
, 
ls_‹igö
, 
ls_dx
);

203 
öside_ßm∂es
 +(
d©a
 < 0)?1:0;

205 
	`vﬁumes
(
i
,
j
,
k
Ë()
öside_ßm∂es
 / ()
	`cube
(
subdivisi⁄s
+1);

207 
	}
}

	@common/levelset.h

1 
	~<¨øy2.h
>

2 
	~<¨øy3.h
>

3 
	~<vec.h
>

6 
öãΩﬁ©e_phi
(c⁄° 
Vec2f
& 
poöt
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
);

7 
öãΩﬁ©e_phi
(c⁄° 
Vec3f
& 
poöt
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
);

8 
öãΩﬁ©e_n‹mÆ
(
Vec2f
& 
n‹mÆ
, c⁄° Vec2f& 
poöt
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
);

9 
öãΩﬁ©e_n‹mÆ
(
Vec3f
& 
n‹mÆ
, c⁄° Vec3f& 
poöt
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
);

10 
¥oje˘_to_isosurÁ˚
(
Vec2f
& 
poöt
, c⁄° 
èrgë_vÆue
, c⁄° 
Aºay2f
& 
grid
, c⁄° Vec2f& 
‹igö
, c⁄° 
dx
);

11 
¥oje˘_to_isosurÁ˚
(
Vec3f
& 
poöt
, c⁄° 
èrgë_vÆue
, c⁄° 
Aºay3f
& 
grid
, c⁄° Vec3f& 
‹igö
, c⁄° 
dx
);

12 
compuã_vﬁume_‰a˘i⁄s
(c⁄° 
Aºay2f
& 
Àvñ£t
, c⁄° 
Vec2f
& 
ls_‹igö
, 
ls_dx
, Aºay2f& 
vﬁumes
, c⁄° Vec2f& 
v_‹igö
, 
v_dx
, 
subdivisi⁄s
);

13 
compuã_vﬁume_‰a˘i⁄s
(c⁄° 
Aºay3f
& 
Àvñ£t
, c⁄° 
Vec3f
& 
ls_‹igö
, 
ls_dx
, Aºay3f& 
vﬁumes
, c⁄° Vec3f& 
v_‹igö
, 
v_dx
, 
subdivisi⁄s
);

16 
‰a˘i⁄_öside
(
phi_À·
, 
phi_right
);

17 
‰a˘i⁄_öside_eôhî
(
phi_À·0
, 
phi_right0
, 
phi_À·1
, 
phi_right1
);

	@common/makelevelset2.cpp

1 
	~<makñevñ£t2.h
>

4 
	$poöt_£gmít_di°™˚
(c⁄° 
Vec2d
 &
x0
, c⁄° Vec2d &
x1
, c⁄° Vec2d &
x2
)

6 
Vec2d
 
	`dx
(
x2
-
x1
);

7 
m2
=
	`mag2
(
dx
);

9 
s12
=()–
	`dŸ
(
x2
-
x0
, 
dx
)/
m2
 );

10 if(
s12
<0){

11 
s12
=0;

12 }if(
s12
>1){

13 
s12
=1;

16  
	`mag
(
s12
*
x1
+(1-s12)*
x2
 - 
x0
);

17 
	}
}

19 
check_√ighbour
(c⁄° 
°d
::
ve˘‹
<
Vec2ui
> &
edge
, c⁄° std::ve˘‹<
Vec2d
> &
x
,

20 
Aºay2d
 &
phi
, 
Aºay2i
 &
˛o£°_edge
,

21 c⁄° 
Vec2d
 &
gx
, 
i0
, 
j0
, 
i1
, 
j1
)

23 if(
˛o£°_edge
(
i0
,
j0
)==˛o£°_edge(
i1
,
j1
))

25 if(
˛o£°_edge
(
i1
,
j1
)>=0){

26 
p
, 
q
; 
assign
(
edge
[
˛o£°_edge
(
i1
,
j1
)],Ö, q);

27 
	gd
=
poöt_£gmít_di°™˚
(
gx
, 
x
[
p
], x[
q
]);

28 if(
	gd
<
phi
(
i0
,
j0
)){

29 
phi
(
i0
,
j0
)=
d
;

30 
˛o£°_edge
(
i0
,
j0
)=˛o£°_edge(
i1
,
j1
);

35 
make_Àvñ_£t2
(c⁄° 
°d
::
ve˘‹
<
Vec2ui
> &
edge
, c⁄° std::ve˘‹<
Vec2d
> &
x
,

36 c⁄° 
Vec2d
 &
‹igö
, 
dx
, 
nx
, 
ny
,

37 
Aºay2d
 &
phi
)

39 
	gphi
.
ªsize
(
nx
, 
ny
);

40 
	gphi
.
assign
((
nx
+
ny
)*
dx
);

41 
Aºay2i
 
˛o£°_edge
(
nx
, 
ny
, -1);

42 
Aºay2i
 
öãr£˘i⁄_cou¡
(
nx
, 
ny
, 0);

44 
Vec2d
 
	gijmö
, 
	gijmax
;

45 
	ge
=0;É<
	gedge
.
size
(); ++e){

46 
	gp
, 
	gq
; 
assign
(
edge
[
e
], 
p
, 
q
);

47 
mömax
((
x
[
p
]-
‹igö
)/
dx
, (x[
q
]-‹igö)/dx, 
ijmö
, 
ijmax
);

49 
	gi0
=
˛amp
((
ijmö
[0])-1, 0, 
nx
-1), 
	gi1
=˛amp((
ijmax
[0])+2, 0,Çx-1);

50 
	gj0
=
˛amp
((
ijmö
[1])-1, 0, 
ny
-1), 
	gj1
=˛amp((
ijmax
[1])+2, 0,Çy-1);

51 
	gj
=
j0
; j<=
j1
; ++jË
	gi
=
i0
; i<=
i1
; ++i){

52 
Vec2d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+origin[1]);

53 
	gd
=
poöt_£gmít_di°™˚
(
gx
, 
x
[
p
], x[
q
]);

54 if(
	gd
<
phi
(
i
,
j
)){

55 
phi
(
i
,
j
)=
d
;

56 
˛o£°_edge
(
i
,
j
)=
e
;

60 if(
	gx
[
p
][1]!=
x
[
q
][1]){

61 
fi0
, 
fj0
, 
fi1
, 
fj1
;

62 if(
	gx
[
p
][1]<x[
q
][1]){

63 
	gfi0
=(()
x
[
p
][0]-
‹igö
[0])/
dx
;

64 
	gfj0
=(()
x
[
p
][1]-
‹igö
[1])/
dx
;

65 
	gfi1
=(()
x
[
q
][0]-
‹igö
[0])/
dx
;

66 
	gfj1
=(()
x
[
q
][1]-
‹igö
[1])/
dx
;

68 
	gfi0
=(()
x
[
q
][0]-
‹igö
[0])/
dx
;

69 
	gfj0
=(()
x
[
q
][1]-
‹igö
[1])/
dx
;

70 
	gfi1
=(()
x
[
p
][0]-
‹igö
[0])/
dx
;

71 
	gfj1
=(()
x
[
p
][1]-
‹igö
[1])/
dx
;

73 
	gj0
=
˛amp
((
°d
::
Êo‹
(
fj0
)), 0, 
ny
-1)+1;

74 
	gj1
=
˛amp
((
°d
::
Êo‹
(
fj1
)), 0, 
ny
-1);

75 
	gj
=
j0
; j<=
j1
; ++j){

76 
	gÆpha
=(
j
-
fj0
)/(
fj1
-fj0);

77 
	gfi
=(1-
Æpha
)*
fi0
 +áÕha*
fi1
;

78 
	gi_öãrvÆ
=(
°d
::
˚û
(
fi
));

79 if(
	gi_öãrvÆ
<0) i_interval=0;

80 if(
	gi_öãrvÆ
<
	gnx
){

81 ++
öãr£˘i⁄_cou¡
(
i_öãrvÆ
,
j
);

87 
	g∑ss
=0;Öass<2; ++pass){

88 
	gj
=1; j<
	gny
; ++jË
	gi
=1; i<
	gnx
; ++i){

89 
Vec2d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+origin[1]);

90 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i-1, j-1);

91 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i-1, j);

92 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i, j-1);

94 
	gj
=
ny
-2; j>=0; --jË
	gi
=
nx
-2; i>=0; --i){

95 
Vec2d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+origin[1]);

96 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i+1, j+1);

97 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i+1, j);

98 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i, j+1);

100 
	gj
=
ny
-2; j>=0; --jË
	gi
=1; i<
	gnx
; ++i){

101 
Vec2d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+origin[1]);

102 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i-1, j+1);

103 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i-1, j);

104 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i, j+1);

106 
	gj
=1; j<
	gny
; ++jË
	gi
=
nx
-2; i>=0; --i){

107 
Vec2d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+origin[1]);

108 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i+1, j-1);

109 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i+1, j);

110 
check_√ighbour
(
edge
, 
x
, 
phi
, 
˛o£°_edge
, 
gx
, 
i
, 
j
, i, j-1);

114 
	gj
=0; j<
	gny
; ++j){

115 
	gtŸÆ_cou¡
=0;

116 
	gi
=0; i<
	gnx
; ++i){

117 
	gtŸÆ_cou¡
+=
öãr£˘i⁄_cou¡
(
i
,
j
);

118 if(
	gtŸÆ_cou¡
%2==1){

119 
phi
(
i
,
j
)=-phi(i,j);

	@common/makelevelset2.h

1 #i‚de‡
MAKELEVELSET2_H


2 
	#MAKELEVELSET2_H


	)

4 
	~<¨øy2.h
>

5 
	~<vec.h
>

8 
make_Àvñ_£t2
(c⁄° 
°d
::
ve˘‹
<
Vec2ui
> &
edge
, c⁄° std::ve˘‹<
Vec2d
> &
x
,

9 c⁄° 
Vec2d
 &
‹igö
, 
dx
, 
nx
, 
ny
,

10 
Aºay2d
 &
phi
);

	@common/makelevelset3.cpp

1 
	~<makñevñ£t3.h
>

3 
	g«me•a˚
 {

6 
poöt_£gmít_di°™˚
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
)

8 
Vec3d
 
dx
(
x2
-
x1
);

9 
	gm2
=
mag2
(
dx
);

11 
	gs12
=
dŸ
(
x2
-
x0
, 
dx
)/
	gm2
;

12 if(
	gs12
<0){

13 
	gs12
=0;

14 }if(
	gs12
>1){

15 
	gs12
=1;

18  
di°
(
x0
, 
s12
*
x1
+(1-s12)*
x2
);

22 
poöt_åüngÀ_di°™˚
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
)

25 
Vec3d
 
x13
(
x1
-
x3
), 
x23
(
x2
-x3), 
x03
(
x0
-x3);

26 
	gm13
=
mag2
(
x13
), 
	gm23
=mag2(
x23
), 
	gd
=
dŸ
(x13,x23);

27 
	gövdë
=1.f/
max
(
m13
*
m23
-
d
*d,1e-30);

28 
	ga
=
dŸ
(
x13
,
x03
), 
	gb
=dŸ(
x23
,x03);

30 
	gw23
=
övdë
*(
m23
*
a
-
d
*
b
);

31 
	gw31
=
övdë
*(
m13
*
b
-
d
*
a
);

32 
	gw12
=1-
w23
-
w31
;

33 if(
	gw23
>=0 && 
w31
>=0 && 
w12
>=0){

34  
di°
(
x0
, 
w23
*
x1
+
w31
*
x2
+
w12
*
x3
);

36 if(
	gw23
>0)

37  
mö
(
poöt_£gmít_di°™˚
(
x0
,
x1
,
x2
),Öoöt_£gmít_di°™˚(x0,x1,
x3
));

38 if(
	gw31
>0)

39  
mö
(
poöt_£gmít_di°™˚
(
x0
,
x1
,
x2
),Öoöt_£gmít_di°™˚(x0,x2,
x3
));

41  
mö
(
poöt_£gmít_di°™˚
(
x0
,
x1
,
x3
),Öoöt_£gmít_di°™˚(x0,
x2
,x3));

45 
check_√ighbour
(c⁄° 
°d
::
ve˘‹
<
Vec3°
> &
åi
, c⁄° std::ve˘‹<
Vec3d
> &
x
,

46 
Aºay3d
 &
phi
, 
Aºay3i
 &
˛o£°_åi
,

47 c⁄° 
Vec3d
 &
gx
, 
size_t
 
i0
, size_à
j0
, size_à
k0
, size_à
i1
, size_à
j1
, size_à
k1
)

49 if(
˛o£°_åi
(
i1
,
j1
,
k1
)>=0){

50 
size_t
 
p
, 
q
, 
r
; 
assign
(
åi
[
˛o£°_åi
(
i1
,
j1
,
k1
)],Ö, q,Ñ);

51 
	gd
=
poöt_åüngÀ_di°™˚
(
gx
, 
x
[
p
], x[
q
], x[
r
]);

52 if(
	gd
<
phi
(
i0
,
j0
,
k0
)){

53 
phi
(
i0
,
j0
,
k0
)=
d
;

54 
˛o£°_åi
(
i0
,
j0
,
k0
)=˛o£°_åi(
i1
,
j1
,
k1
);

59 
swìp
(c⁄° 
°d
::
ve˘‹
<
Vec3°
> &
åi
, c⁄° std::ve˘‹<
Vec3d
> &
x
,

60 
Aºay3d
 &
phi
, 
Aºay3i
 &
˛o£°_åi
, c⁄° 
Vec3d
 &
‹igö
, 
dx
,

61 
di
, 
dj
, 
dk
)

63 
±rdiff_t
 
	gi0
, 
	gi1
;

64 if(
	gdi
>0){ 
	gi0
=1; 
	gi1
=
phi
.
ni
; }

65 { 
	gi0
=
phi
.
ni
-2; 
	gi1
=-1; }

66 
±rdiff_t
 
	gj0
, 
	gj1
;

67 if(
	gdj
>0){ 
	gj0
=1; 
	gj1
=
phi
.
nj
; }

68 { 
	gj0
=
phi
.
nj
-2; 
	gj1
=-1; }

69 
±rdiff_t
 
	gk0
, 
	gk1
;

70 if(
	gdk
>0){ 
	gk0
=1; 
	gk1
=
phi
.
nk
; }

71 { 
	gk0
=
phi
.
nk
-2; 
	gk1
=-1; }

72 
±rdiff_t
 
	gk
=
k0
; k!=
k1
; k+=
dk
Ë±rdiff_à
j
=
j0
; 
	gj
!=
j1
; j+=
dj
Ë±rdiff_à
i
=
i0
; 
	gi
!=
i1
; i+=
di
){

73 
Vec3d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+‹igö[1], 
k
*dx+origin[2]);

74 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i-
di
, j, k);

75 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i, j-
dj
, k);

76 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i-
di
, j-
dj
, k);

77 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i, j, k-
dk
);

78 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i-
di
, j, k-
dk
);

79 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i, j-
dj
, k-
dk
);

80 
check_√ighbour
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
gx
, 
i
, 
j
, 
k
, i-
di
, j-
dj
, k-
dk
);

86 
‹õ¡©i⁄
(
x1
, 
y1
, 
x2
, 
y2
, &
twi˚_sig√d_¨ó
)

88 
	gtwi˚_sig√d_¨ó
=
y1
*
x2
-
x1
*
y2
;

89 if(
	gtwi˚_sig√d_¨ó
>0)  1;

90 if(
	gtwi˚_sig√d_¨ó
<0)  -1;

91 if(
	gy2
>
	gy1
)  1;

92 if(
	gy2
<
	gy1
)  -1;

93 if(
	gx1
>
	gx2
)  1;

94 if(
	gx1
<
	gx2
)  -1;

100 
boﬁ
 
poöt_ö_åüngÀ_2d
(
x0
, 
y0
,

101 
x1
, 
y1
, 
x2
, 
y2
, 
x3
, 
y3
,

102 & 
a
, & 
b
, & 
c
)

104 
	gx1
-=
x0
; 
	gx2
-=x0; 
	gx3
-=x0;

105 
	gy1
-=
y0
; 
	gy2
-=y0; 
	gy3
-=y0;

106 
	gsig«
=
‹õ¡©i⁄
(
x2
, 
y2
, 
x3
, 
y3
, 
a
);

107 if(
	gsig«
==0Ë 
Ál£
;

108 
	gsignb
=
‹õ¡©i⁄
(
x3
, 
y3
, 
x1
, 
y1
, 
b
);

109 if(
	gsignb
!=
sig«
Ë 
Ál£
;

110 
	gsignc
=
‹õ¡©i⁄
(
x1
, 
y1
, 
x2
, 
y2
, 
c
);

111 if(
	gsignc
!=
sig«
Ë 
Ál£
;

112 
	gsum
=
a
+
b
+
c
;

113 
as£π
(
sum
!=0);

114 
	ga
/=
sum
;

115 
	gb
/=
sum
;

116 
	gc
/=
sum
;

117  
	gåue
;

122 
make_Àvñ_£t3
(c⁄° 
°d
::
ve˘‹
<
Vec3°
> &
åi
, c⁄° std::ve˘‹<
Vec3d
> &
x
,

123 c⁄° 
Vec3d
 &
‹igö
, 
dx
, 
ni
, 
nj
, 
nk
,

124 
Aºay3d
 &
phi
, 
Aºay3i
& 
˛o£°_åi
, c⁄° 
exa˘_b™d
 )

127 
	gphi
.
ªsize
(
ni
, 
nj
, 
nk
);

128 
	gphi
.
assign
((
ni
+
nj
+
nk
)*
dx
);

129 
	g˛o£°_åi
.
˛ór
();

130 
	g˛o£°_åi
.
ªsize
(
ni
, 
nj
, 
nk
, -1);

131 
Aºay3i
 
öãr£˘i⁄_cou¡
(
ni
, 
nj
, 
nk
, 0);

133 
Vec3d
 
	gijkmö
, 
	gijkmax
;

134 
	gt
=0;Å<
	gåi
.
size
(); ++t){

135 
size_t
 
	gp
, 
	gq
, 
	gr
; 
assign
(
åi
[
t
], 
p
, 
q
, 
r
);

137 
	gfù
=(()
x
[
p
][0]-
‹igö
[0])/
dx
, 
	gfjp
=(()x[p][1]-‹igö[1])/dx, 
	gfkp
=(()x[p][2]-origin[2])/dx;

138 
	gfiq
=(()
x
[
q
][0]-
‹igö
[0])/
dx
, 
	gfjq
=(()x[q][1]-‹igö[1])/dx, 
	gfkq
=(()x[q][2]-origin[2])/dx;

139 
	gfú
=(()
x
[
r
][0]-
‹igö
[0])/
dx
, 
	gfjr
=(()x[r][1]-‹igö[1])/dx, 
	gfkr
=(()x[r][2]-origin[2])/dx;

141 
	gi0
=
˛amp
((
mö
(
fù
,
fiq
,
fú
))-
exa˘_b™d
, 0, 
ni
-1), 
	gi1
=˛amp((
max
(fip,fiq,fir))+exact_band+1, 0,Çi-1);

142 
	gj0
=
˛amp
((
mö
(
fjp
,
fjq
,
fjr
))-
exa˘_b™d
, 0, 
nj
-1), 
	gj1
=˛amp((
max
(fjp,fjq,fjr))+exact_band+1, 0,Çj-1);

143 
	gk0
=
˛amp
((
mö
(
fkp
,
fkq
,
fkr
))-
exa˘_b™d
, 0, 
nk
-1), 
	gk1
=˛amp((
max
(fkp,fkq,fkr))+exact_band+1, 0,Çk-1);

144 
	gk
=
k0
; k<=
k1
; ++kË
	gj
=
j0
; j<=
j1
; ++jË
	gi
=
i0
; i<=
i1
; ++i){

145 
Vec3d
 
gx
(
i
*
dx
+
‹igö
[0], 
j
*dx+‹igö[1], 
k
*dx+origin[2]);

146 
	gd
=
poöt_åüngÀ_di°™˚
(
gx
, 
x
[
p
], x[
q
], x[
r
]);

147 if(
	gd
<
phi
(
i
,
j
,
k
)){

148 
phi
(
i
,
j
,
k
)=
d
;

149 
˛o£°_åi
(
i
,
j
,
k
)=
t
;

153 
	gj0
=
˛amp
(()
°d
::
˚û
(
mö
(
fjp
,
fjq
,
fjr
)), 0, 
nj
-1);

154 
	gj1
=
˛amp
(()
°d
::
Êo‹
(
max
(
fjp
,
fjq
,
fjr
)), 0, 
nj
-1);

155 
	gk0
=
˛amp
(()
°d
::
˚û
(
mö
(
fkp
,
fkq
,
fkr
)), 0, 
nk
-1);

156 
	gk1
=
˛amp
(()
°d
::
Êo‹
(
max
(
fkp
,
fkq
,
fkr
)), 0, 
nk
-1);

157 
	gk
=
k0
; k<=
k1
; ++kË
	gj
=
j0
; j<=
j1
; ++j){

158 
	ga
, 
	gb
, 
	gc
;

159 if(
poöt_ö_åüngÀ_2d
(
j
, 
k
, 
fjp
, 
fkp
, 
fjq
, 
fkq
, 
fjr
, 
fkr
, 
a
, 
b
, 
c
)){

160 
	gfi
=
a
*
fù
+
b
*
fiq
+
c
*
fú
;

161 
	gi_öãrvÆ
=(
°d
::
˚û
(
fi
));

162 if(
	gi_öãrvÆ
<0Ë++
öãr£˘i⁄_cou¡
(0, 
j
, 
k
);

163 if(
	gi_öãrvÆ
<
	gni
Ë++
öãr£˘i⁄_cou¡
(
i_öãrvÆ
,
j
,
k
);

169 
	g∑ss
=0;Öass<2; ++pass){

170 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, +1, +1, +1);

171 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, -1, -1, -1);

172 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, +1, +1, -1);

173 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, -1, -1, +1);

174 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, +1, -1, +1);

175 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, -1, +1, -1);

176 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, +1, -1, -1);

177 
swìp
(
åi
, 
x
, 
phi
, 
˛o£°_åi
, 
‹igö
, 
dx
, -1, +1, +1);

180 
	gk
=0; k<
	gnk
; ++kË
	gj
=0; j<
	gnj
; ++j){

181 
	gtŸÆ_cou¡
=0;

182 
	gi
=0; i<
	gni
; ++i){

183 
	gtŸÆ_cou¡
+=
öãr£˘i⁄_cou¡
(
i
,
j
,
k
);

184 if(
	gtŸÆ_cou¡
%2==1){

185 
phi
(
i
,
j
,
k
)=-phi(i,j,k);

	@common/makelevelset3.h

1 #i‚de‡
MAKELEVELSET3_H


2 
	#MAKELEVELSET3_H


	)

4 
	~<¨øy3.h
>

5 
	~<vec.h
>

15 
make_Àvñ_£t3
(c⁄° 
°d
::
ve˘‹
<
Vec3°
> &
åi
, c⁄° std::ve˘‹<
Vec3d
> &
x
,

16 c⁄° 
Vec3d
 &
‹igö
, 
dx
, 
ni
, 
nj
, 
nk
,

17 
Aºay3d
 &
phi
, 
Aºay3i
& 
˛o£°_åi
, c⁄° 
exa˘_b™d
 );

20 
ölöe
 
make_Àvñ_£t3
(c⁄° 
°d
::
ve˘‹
<
Vec3°
> &
åi
, c⁄° std::ve˘‹<
Vec3d
> &
x
,

21 c⁄° 
Vec3d
 &
‹igö
, 
dx
, 
ni
, 
nj
, 
nk
,

22 
Aºay3d
 &
phi
, c⁄° 
exa˘_b™d
 )

24 
Aºay3i
 
	gign‹e
;

25 
make_Àvñ_£t3
–
åi
, 
x
, 
‹igö
, 
dx
, 
ni
, 
nj
, 
nk
, 
phi
, 
ign‹e
, 
exa˘_b™d
 );

	@common/marching_tiles_hires.cpp

1 
	~<m¨chög_tûes_húes.h
>

4 c⁄° 
	gnum_nodes
=40;

5 
Vec3i
 
	gnode
[
num_nodes
]={

6 
Vec3i
(1,0,0),

7 
Vec3i
(2,2,0),

8 
Vec3i
(1,4,0),

9 
Vec3i
(3,4,0),

10 
Vec3i
(2,6,0),

11 
Vec3i
(1,0,4),

12 
Vec3i
(3,0,4),

13 
Vec3i
(2,1,2),

14 
Vec3i
(0,2,1),

15 
Vec3i
(0,2,3),

16 
Vec3i
(2,2,4),

17 
Vec3i
(1,4,4),

18 
Vec3i
(3,4,4),

19 
Vec3i
(0,4,2),

20 
Vec3i
(2,3,2),

21 
Vec3i
(2,5,2),

22 
Vec3i
(4,2,1),

23 
Vec3i
(4,2,3),

24 
Vec3i
(5,4,4),

25 
Vec3i
(4,4,2),

26 
Vec3i
(0,6,1),

27 
Vec3i
(0,6,3),

28 
Vec3i
(2,6,4),

29 
Vec3i
(2,7,2),

30 
Vec3i
(4,6,1),

31 
Vec3i
(4,6,3),

32 
Vec3i
(0,2,5),

33 
Vec3i
(2,3,6),

34 
Vec3i
(2,5,6),

35 
Vec3i
(4,2,5),

36 
Vec3i
(4,4,6),

37 
Vec3i
(4,6,5),

38 
Vec3i
(2,1,6),

39 
Vec3i
(0,0,2),

40 
Vec3i
(5,0,4),

41 
Vec3i
(4,0,2),

42 
Vec3i
(3,0,0),

43 
Vec3i
(4,0,6),

44 
Vec3i
(5,0,0),

45 
Vec3i
(5,4,0)

47 c⁄° 
	gnum_ãts
=46;

48 
Vec4i
 
	gãt
[
num_ãts
]={

49 
Vec4i
(2,3,15,14),

50 
Vec4i
(2,15,13,14),

51 
Vec4i
(6,29,17,10),

52 
Vec4i
(6,17,34,35),

53 
Vec4i
(12,14,17,10),

54 
Vec4i
(0,36,1,7),

55 
Vec4i
(29,12,18,17),

56 
Vec4i
(3,14,16,19),

57 
Vec4i
(3,15,14,19),

58 
Vec4i
(14,16,1,3),

59 
Vec4i
(0,7,8,33),

60 
Vec4i
(7,16,36,1),

61 
Vec4i
(9,7,5,33),

62 
Vec4i
(8,7,9,33),

63 
Vec4i
(14,12,17,19),

64 
Vec4i
(12,29,10,17),

65 
Vec4i
(14,9,13,8),

66 
Vec4i
(8,2,14,1),

67 
Vec4i
(14,17,16,19),

68 
Vec4i
(17,14,7,10),

69 
Vec4i
(16,7,36,35),

70 
Vec4i
(17,6,7,35),

71 
Vec4i
(11,15,14,13),

72 
Vec4i
(3,2,1,14),

73 
Vec4i
(9,14,7,8),

74 
Vec4i
(9,14,11,10),

75 
Vec4i
(1,8,0,7),

76 
Vec4i
(14,8,1,7),

77 
Vec4i
(12,15,19,14),

78 
Vec4i
(19,39,16,3),

79 
Vec4i
(17,12,18,19),

80 
Vec4i
(14,9,11,13),

81 
Vec4i
(14,12,11,10),

82 
Vec4i
(2,8,14,13),

83 
Vec4i
(6,17,7,10),

84 
Vec4i
(5,9,26,10),

85 
Vec4i
(14,9,7,10),

86 
Vec4i
(11,9,10,26),

87 
Vec4i
(7,9,5,10),

88 
Vec4i
(17,6,34,29),

89 
Vec4i
(6,7,5,10),

90 
Vec4i
(15,12,11,14),

91 
Vec4i
(16,14,1,7),

92 
Vec4i
(7,17,35,16),

93 
Vec4i
(38,35,16,36),

94 
Vec4i
(14,16,17,7)

97 
	gM¨chögTûesHiRes
::

98 
	$c⁄tour
()

100 
åi
.
	`ªsize
(0);

101 
x
.
	`ªsize
(0);

102 
edge_¸oss
.
	`˛ór
();

103 
±rdiff_t
 
k
=0; k<
phi
.
nk
; ++kË±rdiff_à
j
=0; j<phi.
nj
; ++jË±rdiff_à
i
=0; i<phi.
ni
; ++i)

104 
	`c⁄tour_tûe
(
i
,
j
,
k
);

105 
	}
}

107 
	gM¨chögTûesHiRes
::

108 
	$im¥ove_mesh
()

111 
°d
::
ve˘‹
<
Aºay1ui
> 
	`nbr
(
x
.
	`size
());

112 
t
=0;Å<
åi
.
	`size
(); ++t){

113 
p
, 
q
, 
r
; 
	`assign
(
åi
[
t
],Ö, q,Ñ);

114 
nbr
[
p
].
	`add_unique
(
q
);

115 
nbr
[
p
].
	`add_unique
(
r
);

116 
nbr
[
q
].
	`add_unique
(
p
);

117 
nbr
[
q
].
	`add_unique
(
r
);

118 
nbr
[
r
].
	`add_unique
(
p
);

119 
nbr
[
r
].
	`add_unique
(
q
);

122 
swìp
=0; sweep<3; ++sweep){

123 
p
=0;Ö<
x
.
	`size
(); ++p){

125 
Vec3d
 
èrgë
=
x
[
p
];

126 
a
=0;á<
nbr
[
p
].
	`size
(); ++a)

127 
èrgë
+=
x
[
nbr
[
p
][
a
]];

128 
èrgë
/=(1.0+
nbr
[
p
].
	`size
());

130 
¥oje˘i⁄_°ï
=0;Örojection_step<5; ++projection_step){

131 
i
=(
èrgë
[0]-
‹igö
[0])/
dx
, 
j
=—¨gë[1]-‹igö[1])/dx, 
k
=(target[2]-origin[2])/dx;

132 
f
=
	`evÆ
(
i
,
j
,
k
);

133 
Vec3d
 
g
; 
	`evÆ_gødõ¡
(
i
,
j
,
k
,g);

134 
m2
=
	`mag2
(
g
), 
m
=
°d
::
	`sqπ
(m2);

135 
Æpha
=
	`˛amp
(-
f
/(
m2
+1e-30), -0.25*
m
, 0.25*m);

137 
boﬁ
 
löe_£¨ch_suc˚ss
=
Ál£
;

138 
löe_£¨ch_°ï
=0;Üine_search_step<10; ++line_search_step){

139 
‚ew
=
	`evÆ
(
i
+
Æpha
*
g
[0], 
j
+Æpha*g[1], 
k
+alpha*g[2]);

140 if(
°d
::
	`Ábs
(
‚ew
)<=°d::Ábs(
f
)){

141 
èrgë
 +
	`Vec3d
–(
Æpha
*
dx
)*
g
[0], (alpha*dx)*g[0], (alpha*dx)*g[0] );

142 
èrgë
 +
	`Vec3d
–(
Æpha
*
dx
)*
g
[1], (alpha*dx)*g[1], (alpha*dx)*g[1] );

143 
èrgë
 +
	`Vec3d
–(
Æpha
*
dx
)*
g
[2], (alpha*dx)*g[2], (alpha*dx)*g[2] );

144 
löe_£¨ch_suc˚ss
=
åue
;

147 
Æpha
*=0.5;

149 if(!
löe_£¨ch_suc˚ss
){

151 
°d
::
cout
<<"löê£¨ch faûed (p="<<
p
<<"Öroje˘="<<
¥oje˘i⁄_°ï
<<" swìp="<<
swìp
<<")"<<°d::
ídl
;

152 
èrgë
0.5 * (
x
[
p
]+target);

155 
x
[
p
]=
èrgë
;

158 
	}
}

160 
	gM¨chögTûesHiRes
::

161 
	$e°im©e_n‹mÆs
()

163 
n‹mÆ
.
	`ªsize
(
x
.
	`size
());

164 
p
=0;Ö<
x
.
	`size
(); ++p){

165 
	`evÆ_gødõ¡
((
x
[
p
][0]-
‹igö
[0])/
dx
,

166 (
x
[
p
][1]-
‹igö
[1])/
dx
,

167 (
x
[
p
][2]-
‹igö
[2])/
dx
,

168 
n‹mÆ
[
p
]);

169 
	`n‹mÆize
(
n‹mÆ
[
p
]);

171 
	}
}

173 
	gM¨chögTûesHiRes
::

174 
	$evÆ
(
i
, 
j
, 
k
)

176 
±rdiff_t
 
p
, 
q
, 
r
;

177 
f
, 
g
, 
h
;

185 
	`gë_b¨y˚¡ric
(
i
+0.5f, 
p
, 
f
, 1, 
phi
.
ni
);

186 
	`gë_b¨y˚¡ric
(
j
+0.5f, 
q
, 
g
, 1, 
phi
.
nj
);

187 
	`gë_b¨y˚¡ric
(
k
+0.5f, 
r
, 
h
, 1, 
phi
.
nk
);

188 
wx0
, 
wx1
, 
wx2
, 
wy0
, 
wy1
, 
wy2
, 
wz0
, 
wz1
, 
wz2
;

189 
	`quadøtic_b•löe_weights
(
f
, 
wx0
, 
wx1
, 
wx2
);

190 
	`quadøtic_b•löe_weights
(
g
, 
wy0
, 
wy1
, 
wy2
);

191 
	`quadøtic_b•löe_weights
(
h
, 
wz0
, 
wz1
, 
wz2
);

192  
wx0
*–
wy0
*–
wz0
*
	`phi
(
p
-1,
q
-1,
r
-1Ë+ 
wz1
*phi’-1,q-1,rË+ 
wz2
*phi(p-1,q-1,r+1) )

193 +
wy1
*–
wz0
*
	`phi
(
p
-1,
q
, 
r
-1Ë+ 
wz1
*phi’-1,q,ÑË+ 
wz2
*phi(p-1,q,Ñ+1) )

194 +
wy2
*–
wz0
*
	`phi
(
p
-1,
q
+1,
r
-1Ë+ 
wz1
*phi’-1,q+1,rË+ 
wz2
*phi(p-1,q+1,r+1) ) )

195 +
wx1
*–
wy0
*–
wz0
*
	`phi
(
p
, 
q
-1,
r
-1Ë+ 
wz1
*phi’, q-1,rË+ 
wz2
*phi(p, q-1,r+1) )

196 +
wy1
*–
wz0
*
	`phi
(
p
, 
q
, 
r
-1Ë+ 
wz1
*phi’, q,ÑË+ 
wz2
*phi(p, q,Ñ+1) )

197 +
wy2
*–
wz0
*
	`phi
(
p
, 
q
+1,
r
-1Ë+ 
wz1
*phi’, q+1,rË+ 
wz2
*phi(p, q+1,r+1) ) )

198 +
wx2
*–
wy0
*–
wz0
*
	`phi
(
p
+1,
q
-1,
r
-1Ë+ 
wz1
*phi’+1,q-1,rË+ 
wz2
*phi(p+1,q-1,r+1) )

199 +
wy1
*–
wz0
*
	`phi
(
p
+1,
q
, 
r
-1Ë+ 
wz1
*phi’+1,q,ÑË+ 
wz2
*phi(p+1,q,Ñ+1) )

200 +
wy2
*–
wz0
*
	`phi
(
p
+1,
q
+1,
r
-1Ë+ 
wz1
*phi’+1,q+1,rË+ 
wz2
*phi(p+1,q+1,r+1) ) );

201 
	}
}

203 
	gM¨chögTûesHiRes
::

204 
	$evÆ_gødõ¡
(
i
, 
j
, 
k
, 
Vec3d
& 
gød
)

214 
±rdiff_t
 
p
, 
q
, 
r
;

215 
f
, 
g
, 
h
;

216 
	`gë_b¨y˚¡ric
(
i
+0.5f, 
p
, 
f
, 1, 
phi
.
ni
);

217 
	`gë_b¨y˚¡ric
(
j
+0.5f, 
q
, 
g
, 1, 
phi
.
nj
);

218 
	`gë_b¨y˚¡ric
(
k
+0.5f, 
r
, 
h
, 1, 
phi
.
nk
);

219 
wx0
, 
wx1
, 
wx2
, 
wy0
, 
wy1
, 
wy2
, 
wz0
, 
wz1
, 
wz2
;

220 
	`quadøtic_b•löe_weights
(
f
, 
wx0
, 
wx1
, 
wx2
);

221 
	`quadøtic_b•löe_weights
(
g
, 
wy0
, 
wy1
, 
wy2
);

222 
	`quadøtic_b•löe_weights
(
h
, 
wz0
, 
wz1
, 
wz2
);

224 
gød
[0]=
wz0
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
,
q
-1,
r
-1)-phi’-1,q-1,r-1),Öhi’+1,q-1,r-1)-phi’,q-1,r-1), 
f
)

225 +
wy1
*
	`ÀΩ
(
	`phi
(
p
,
q
, 
r
-1)-phi’-1,q,Ñ-1),Öhi’+1,q,Ñ-1)-phi’,q,Ñ-1), 
f
)

226 +
wy2
*
	`ÀΩ
(
	`phi
(
p
,
q
+1,
r
-1)-phi’-1,q+1,r-1),Öhi’+1,q+1,r-1)-phi’,q+1,r-1), 
f
) )

227 +
wz1
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
,
q
-1,
r
 )-phi’-1,q-1,∏),Öhi’+1,q-1,∏)-phi’,q-1,∏), 
f
)

228 +
wy1
*
	`ÀΩ
(
	`phi
(
p
,
q
, 
r
 )-phi’-1,q,Ñ ),Öhi’+1,q,Ñ )-phi’,q,Ñ ), 
f
)

229 +
wy2
*
	`ÀΩ
(
	`phi
(
p
,
q
+1,
r
 )-phi’-1,q+1,∏),Öhi’+1,q+1,∏)-phi’,q+1,∏), 
f
) )

230 +
wz2
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
,
q
-1,
r
+1)-phi’-1,q-1,r+1),Öhi’+1,q-1,r+1)-phi’,q-1,r+1), 
f
)

231 +
wy1
*
	`ÀΩ
(
	`phi
(
p
,
q
, 
r
+1)-phi’-1,q,Ñ+1),Öhi’+1,q,Ñ+1)-phi’,q,Ñ+1), 
f
)

232 +
wy2
*
	`ÀΩ
(
	`phi
(
p
,
q
+1,
r
+1)-phi’-1,q+1,r+1),Öhi’+1,q+1,r+1)-phi’,q+1,r+1), 
f
) );

234 
gød
[1]=
wz0
*–
wx0
*
	`ÀΩ
(
	`phi
(
p
-1,
q
,
r
-1)-phi’-1,q-1,r-1),Öhi’-1,q+1,r-1)-phi’-1,q,r-1), 
g
)

235 +
wx1
*
	`ÀΩ
(
	`phi
(
p
, 
q
,
r
-1)-phi’, q-1,r-1),Öhi’, q+1,r-1)-phi’, q,r-1), 
g
)

236 +
wx2
*
	`ÀΩ
(
	`phi
(
p
+1,
q
,
r
-1)-phi’+1,q-1,r-1),Öhi’+1,q+1,r-1)-phi’+1,q,r-1), 
g
) )

237 +
wz1
*–
wx0
*
	`ÀΩ
(
	`phi
(
p
-1,
q
,
r
 )-phi’-1,q-1,∏),Öhi’-1,q+1,∏)-phi’-1,q,∏), 
g
)

238 +
wx1
*
	`ÀΩ
(
	`phi
(
p
, 
q
,
r
 )-phi’, q-1,∏),Öhi’, q+1,∏)-phi’, q,∏), 
g
)

239 +
wx2
*
	`ÀΩ
(
	`phi
(
p
+1,
q
,
r
 )-phi’+1,q-1,∏),Öhi’+1,q+1,∏)-phi’+1,q,∏), 
g
) )

240 +
wz2
*–
wx0
*
	`ÀΩ
(
	`phi
(
p
-1,
q
,
r
+1)-phi’-1,q-1,r+1),Öhi’-1,q+1,r+1)-phi’-1,q,r+1), 
g
)

241 +
wx1
*
	`ÀΩ
(
	`phi
(
p
, 
q
,
r
+1)-phi’, q-1,r+1),Öhi’, q+1,r+1)-phi’, q,r+1), 
g
)

242 +
wx2
*
	`ÀΩ
(
	`phi
(
p
+1,
q
,
r
+1)-phi’+1,q-1,r+1),Öhi’+1,q+1,r+1)-phi’+1,q,r+1), 
g
) );

244 
gød
[2]=
wx0
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
-1,
q
-1,
r
)-phi’-1,q-1,r-1),Öhi’-1,q-1,r+1)-phi’-1,q-1,r), 
h
)

245 +
wy1
*
	`ÀΩ
(
	`phi
(
p
-1,
q
, 
r
)-phi’-1,q,Ñ-1),Öhi’-1,q,Ñ+1)-phi’-1,q,Ñ), 
h
)

246 +
wy2
*
	`ÀΩ
(
	`phi
(
p
-1,
q
+1,
r
)-phi’-1,q+1,r-1),Öhi’-1,q+1,r+1)-phi’-1,q+1,r), 
h
) )

247 +
wx1
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
, 
q
-1,
r
)-phi’, q-1,r-1),Öhi’, q-1,r+1)-phi’, q-1,r), 
h
)

248 +
wy1
*
	`ÀΩ
(
	`phi
(
p
, 
q
, 
r
)-phi’, q,Ñ-1),Öhi’, q,Ñ+1)-phi’, q,Ñ), 
h
)

249 +
wy2
*
	`ÀΩ
(
	`phi
(
p
, 
q
+1,
r
)-phi’, q+1,r-1),Öhi’, q+1,r+1)-phi’, q+1,r), 
h
) )

250 +
wx2
*–
wy0
*
	`ÀΩ
(
	`phi
(
p
+1,
q
-1,
r
)-phi’+1,q-1,r-1),Öhi’+1,q-1,r+1)-phi’+1,q-1,r), 
h
)

251 +
wy1
*
	`ÀΩ
(
	`phi
(
p
+1,
q
, 
r
)-phi’+1,q,Ñ-1),Öhi’+1,q,Ñ+1)-phi’+1,q,Ñ), 
h
)

252 +
wy2
*
	`ÀΩ
(
	`phi
(
p
+1,
q
+1,
r
)-phi’+1,q+1,r-1),Öhi’+1,q+1,r+1)-phi’+1,q+1,r), 
h
) );

254 
	}
}

256 
	gM¨chögTûesHiRes
::

257 
	$c⁄tour_tûe
(
size_t
 
i
, size_à
j
, size_à
k
)

259 
Vec3i
 
	`˚Œ
(()(4*
i
),()(4*
j
),()(4*
k
));

260 
t
=0;Å<
num_ãts
; ++t){

261 
a
, 
b
, 
c
, 
d
; 
	`assign
(
ãt
[
t
],á, b, c, d);

262 
	`c⁄tour_ãt
(
˚Œ
+
node
[
a
], cñl+node[
b
], cñl+node[
c
], cñl+node[
d
],

263 
	`evÆ
(0.25f*(
˚Œ
[0]+
node
[
a
][0]), 0.25f*(cell[1]+node[a][1]), 0.25f*(cell[2]+node[a][2])),

264 
	`evÆ
(0.25f*(
˚Œ
[0]+
node
[
b
][0]), 0.25f*(cell[1]+node[b][1]), 0.25f*(cell[2]+node[b][2])),

265 
	`evÆ
(0.25f*(
˚Œ
[0]+
node
[
c
][0]), 0.25f*(cell[1]+node[c][1]), 0.25f*(cell[2]+node[c][2])),

266 
	`evÆ
(0.25f*(
˚Œ
[0]+
node
[
d
][0]), 0.25f*(cell[1]+node[d][1]), 0.25f*(cell[2]+node[d][2])));

268 
	}
}

272 
	gM¨chögTûesHiRes
::

273 
	$c⁄tour_ãt
(c⁄° 
Vec3i
& 
x0
, c⁄° Vec3i& 
x1
, c⁄° Vec3i& 
x2
, c⁄° Vec3i& 
x3
, 
p0
, 
p1
, 
p2
, 
p3
)

276 if(
p0
==0)Ö0=1e-30f;

277 if(
p1
==0)Ö1=1e-30f;

278 if(
p2
==0)Ö2=1e-30f;

279 if(
p3
==0)Ö3=1e-30f;

281 if(
p0
<0){

282 if(
p1
<0){

283 if(
p2
<0){

284 if(
p3
<0){

287 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

288 
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

289 
	`föd_edge_¸oss
(
x2
,
x3
,
p2
,
p3
)));

291 if(
p3
<0)

292 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

293 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
),

294 
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
)));

296 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

297 
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

298 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
)));

299 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

300 
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
),

301 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
)));

305 if(
p2
<0){

306 if(
p3
<0)

307 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

308 
	`föd_edge_¸oss
(
x2
,
x1
,
p2
,
p1
),

309 
	`föd_edge_¸oss
(
x3
,
x1
,
p3
,
p1
)));

311 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

312 
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

313 
	`föd_edge_¸oss
(
x2
,
x3
,
p2
,
p3
)));

314 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

315 
	`föd_edge_¸oss
(
x2
,
x1
,
p2
,
p1
),

316 
	`föd_edge_¸oss
(
x2
,
x3
,
p2
,
p3
)));

319 if(
p3
<0){

320 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

321 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

322 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
)));

323 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

324 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
),

325 
	`föd_edge_¸oss
(
x3
,
x1
,
p3
,
p1
)));

327 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

328 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

329 
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
)));

333 if(
p1
<0){

334 if(
p2
<0){

335 if(
p3
<0)

336 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

337 
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

338 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
)));

340 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

341 
	`föd_edge_¸oss
(
x3
,
x1
,
p3
,
p1
),

342 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
)));

343 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
),

344 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

345 
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
)));

348 if(
p3
<0){

349 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

350 
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

351 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
)));

352 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
),

353 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
),

354 
	`föd_edge_¸oss
(
x2
,
x1
,
p2
,
p1
)));

356 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x1
,
x0
,
p1
,
p0
),

357 
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

358 
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
)));

361 if(
p2
<0){

362 if(
p3
<0){

363 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

364 
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

365 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
)));

366 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
),

367 
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

368 
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
)));

370 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,
p2
),

371 
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
),

372 
	`föd_edge_¸oss
(
x3
,
x2
,
p3
,
p2
)));

374 if(
p3
<0)

375 
åi
.
	`push_back
(
	`Vec3ui
(
	`föd_edge_¸oss
(
x0
,
x3
,
p0
,
p3
),

376 
	`föd_edge_¸oss
(
x2
,
x3
,
p2
,
p3
),

377 
	`föd_edge_¸oss
(
x1
,
x3
,
p1
,
p3
)));

384 
	}
}

387 
	gM¨chögTûesHiRes
::

388 
	$föd_edge_¸oss
(c⁄° 
Vec3i
& 
x0
, c⁄° Vec3i& 
x1
, 
p0
, 
p1
)

390 
vîãx_ödex
;

391 if(
edge_¸oss
.
	`gë_íåy
(
	`Vec6i
(
x0
.
v
[0], x0.v[1], x0.v[2], 
x1
.v[0], x1.v[1], x1.v[2]), 
vîãx_ödex
)){

392  
vîãx_ödex
;

393 }if(
edge_¸oss
.
	`gë_íåy
(
	`Vec6i
(
x1
.
v
[0], x1.v[1], x1.v[2], 
x0
.v[0], x0.v[1], x0.v[2]), 
vîãx_ödex
)){

394  
vîãx_ödex
;

396 
a
=
p1
/’1-
p0
), 
b
=1-a;

397 
vîãx_ödex
=()
x
.
	`size
();

398 
x
.
	`push_back
(
	`Vec3d
(
‹igö
[0]+
dx
*0.25f*(
a
*
x0
[0]+
b
*
x1
[0]),

399 
‹igö
[1]+
dx
*0.25f*(
a
*
x0
[1]+
b
*
x1
[1]),

400 
‹igö
[2]+
dx
*0.25f*(
a
*
x0
[2]+
b
*
x1
[2])));

401 
edge_¸oss
.
	`add
(
	`Vec6i
(
x0
.
v
[0], x0.v[1], x0.v[2], 
x1
.v[0], x1.v[1], x1.v[2]), 
vîãx_ödex
);

402  
vîãx_ödex
;

404 
	}
}

	@common/marching_tiles_hires.h

1 #i‚de‡
MARCHING_TILES_HIRES_H


2 
	#MARCHING_TILES_HIRES_H


	)

4 
	~<¨øy3.h
>

5 
	~<hashèbÀ.h
>

6 
	~<vec.h
>

8 
	sM¨chögTûesHiRes


10 
	m°d
::
ve˘‹
<
Vec3ui
> 
åi
;

11 
	m°d
::
ve˘‹
<
Vec3d
> 
x
;

12 
	m°d
::
ve˘‹
<
Vec3d
> 
n‹mÆ
;

13 
Vec3d
 
	m‹igö
;

14 
	mdx
;

15 c⁄° 
	mAºay3d
& 
	mphi
;

17 
M¨chögTûesHiRes
(c⁄° 
Vec3d
 &
‹igö_
, 
dx_
, c⁄° 
Aºay3d
& 
phi_
) :

18 
åi
(0), 
x
(0), 
n‹mÆ
(0),

19 
‹igö
(
‹igö_
), 
dx
(
dx_
), 
phi
(
phi_
),

20 
edge_¸oss
()

23 
c⁄tour
();

24 
im¥ove_mesh
();

25 
e°im©e_n‹mÆs
();

27 
	m¥iv©e
:

28 
HashTabÀ
<
Vec6i
,> 
	medge_¸oss
;

30 
evÆ
(
i
, 
j
, 
k
);

31 
evÆ_gødõ¡
(
i
, 
j
, 
k
, 
Vec3d
& 
gød
);

32 
c⁄tour_tûe
(
size_t
 
i
, size_à
j
, size_à
k
);

33 
c⁄tour_ãt
(c⁄° 
Vec3i
& 
x0
, c⁄° Vec3i& 
x1
, c⁄° Vec3i& 
x2
, c⁄° Vec3i& 
x3
, 
p0
, 
p1
, 
p2
, 
p3
);

34 
föd_edge_¸oss
(c⁄° 
Vec3i
& 
x0
, c⁄° Vec3i& 
x1
, 
p0
, 
p1
);

	@common/marching_triangles.cpp

1 
	~<¨øy2_utûs.h
>

2 
	~<m¨chög_åüngÀs.h
>

4 
	gM¨chögTrüngÀs
::

5 
	$c⁄tour_grid
()

7 
edge
.
	`ªsize
(0);

8 
x
.
	`ªsize
(0);

9 
edge_¸oss
.
	`˛ór
();

10 
j
=0; j+1<()
phi
.
nj
; ++jË
i
=0; i+1<(Ìhi.
ni
; ++i)

11 
	`c⁄tour_squ¨e
(
i
,
j
);

15 
	}
}

17 
	gM¨chögTrüngÀs
::

18 
	$c⁄tour_squ¨e
(
i
, 
j
)

20 
	`c⁄tour_åüngÀ
(
	`Vec2i
(
i
,
j
), Vec2i(i+1,j), Vec2i(i+1,j+1), 
	`phi
(i,j),Öhi(i+1,j),Öhi(i+1,j+1));

21 
	`c⁄tour_åüngÀ
(
	`Vec2i
(
i
,
j
), Vec2i(i+1,j+1), Vec2i(i,j+1), 
	`phi
(i,j),Öhi(i+1,j+1),Öhi(i,j+1));

22 
	}
}

25 
	gM¨chögTrüngÀs
::

26 
	$c⁄tour_åüngÀ
(c⁄° 
Vec2i
& 
x0
, c⁄° Vec2i& 
x1
, c⁄° Vec2i& 
x2
, 
p0
, 
p1
, 
p2
)

29 if(
p0
==0)Ö0=1e-30f;

30 if(
p1
==0)Ö1=1e-30f;

31 if(
p2
==0)Ö2=1e-30f;

33 if(
p0
<0){

34 if(
p1
<0){

35 if(
p2
<0) ;

36 
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
), föd_edge_¸oss(
x0
,x2,
p0
,p2)));

38 if(
p2
<0Ë
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
), föd_edge_¸oss(x1,
x2
,p1,p2)));

39 
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x0
,
x1
,
p0
,
p1
), föd_edge_¸oss(x0,
x2
,p0,
p2
)));

42 if(
p1
<0){

43 if(
p2
<0Ë
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,p2), föd_edge_¸oss(x0,
x1
,p0,
p1
)));

44 
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x1
,
x2
,
p1
,
p2
), föd_edge_¸oss(
x0
,x1,
p0
,p1)));

46 if(
p2
<0Ë
edge
.
	`push_back
(
	`Vec2i
(
	`föd_edge_¸oss
(
x0
,
x2
,
p0
,p2), föd_edge_¸oss(
x1
,x2,
p1
,p2)));

50 
	}
}

53 
	gM¨chögTrüngÀs
::

54 
	$föd_edge_¸oss
(c⁄° 
Vec2i
& 
x0
, c⁄° Vec2i& 
x1
, 
p0
, 
p1
)

56 
vîãx_ödex
;

57 if(
edge_¸oss
.
	`gë_íåy
(
	`Vec4i
(
x0
.
v
[0], x0.v[1], 
x1
.v[0], x1.v[1]), 
vîãx_ödex
)){

58  
vîãx_ödex
;

59 }if(
edge_¸oss
.
	`gë_íåy
(
	`Vec4i
(
x1
.
v
[0], x1.v[1], 
x0
.v[0], x0.v[1]), 
vîãx_ödex
)){

60  
vîãx_ödex
;

62 
a
=
p1
/’1-
p0
), 
b
=1-a;

63 
vîãx_ödex
=()
x
.
	`size
();

64 
x
.
	`push_back
(
	`Vec2f
(
‹igö
[0]+
dx
*(
a
*
x0
[0]+
b
*
x1
[0]),

65 
‹igö
[1]+
dx
*(
a
*
x0
[1]+
b
*
x1
[1])));

66 
edge_¸oss
.
	`add
(
	`Vec4i
(
x0
.
v
[0], x0.v[1], 
x1
.v[0], x1.v[1]), 
vîãx_ödex
);

67  
vîãx_ödex
;

69 
	}
}

72 
	gM¨chögTrüngÀs
::
	$evÆ
–
i
, 
j
 )

88  
	`öãΩﬁ©e_vÆue
–
	`Vec2f
(
i
,
j
), 
phi
 );

89 
	}
}

92 
	gM¨chögTrüngÀs
::
	$evÆ_gødõ¡
–
y
, 
z
, 
Vec2f
& 
g
 )

94 
	`öãΩﬁ©e_gødõ¡
–
g
, 
	`Vec2f
(
y
,
z
), 
phi
 );

95 
	}
}

99 
	gM¨chögTrüngÀs
::
	$im¥ove_mesh
()

102 
°d
::
ve˘‹
<
Aºay1ui
> 
	`nbr
(
x
.
	`size
());

103 
e
=0;É<
edge
.
	`size
(); ++e)

105 
p
 = 
edge
[
e
][0];

106 
q
 = 
edge
[
e
][1];

107 
nbr
[
p
].
	`add_unique
(
q
);

108 
nbr
[
q
].
	`add_unique
(
p
);

112 
swìp
=0; sweep<3; ++sweep)

114 
p
=0;Ö<
x
.
	`size
(); ++p)

117 
Vec2f
 
èrgë
 = 
x
[
p
];

118 
èrgë
 +
x
[ 
nbr
[
p
][0] ];

119 
èrgë
 +
x
[ 
nbr
[
p
][1] ];

120 
èrgë
 /= 3.0f;

123 
¥oje˘i⁄_°ï
=0;Örojection_step<5; ++projection_step)

125 
i
=(
èrgë
[0]-
‹igö
[0])/
dx
, 
j
=(target[1]-origin[1])/dx;

126 
f
=
	`evÆ
(
i
,
j
);

127 
Vec2f
 
g
;

128 
	`evÆ_gødõ¡
(
i
,
j
,
g
);

130 
m2
=
	`mag2
(
g
), 
m
=
°d
::
	`sqπ
(m2);

131 
Æpha
 = 
	`˛amp
–-
f
/(
m2
+1e-10f), -0.25f*
m
, 0.25f*m );

134 
boﬁ
 
löe_£¨ch_suc˚ss
=
Ál£
;

135 
löe_£¨ch_°ï
=0;Üine_search_step<10; ++line_search_step)

137 
‚ew
=
	`evÆ
–
i
+
Æpha
*
g
[0], 
j
+alpha*g[1] );

138 if(
°d
::
	`Ábs
(
‚ew
Ë<°d::Ábs(
f
))

140 
èrgë
 +
	`Vec2f
–(
Æpha
*
dx
)*
g
[0], (alpha*dx)*g[0] );

141 
èrgë
 +
	`Vec2f
–(
Æpha
*
dx
)*
g
[1], (alpha*dx)*g[1] );

142 
löe_£¨ch_suc˚ss
=
åue
;

145 
Æpha
*=0.5f;

147 if(!
löe_£¨ch_suc˚ss
)

150 
°d
::
cout
<<"löê£¨ch faûed (p="<<
p
<<"Öroje˘="<<
¥oje˘i⁄_°ï
<<" swìp="<<
swìp
<<")"<<°d::
ídl
;

151 
èrgë
0.5‡* (
x
[
p
]+target);

154 
x
[
p
]=
èrgë
;

160 
	}
}

	@common/marching_triangles.h

1 #i‚de‡
MARCHING_TRIANGLES_H


2 
	#MARCHING_TRIANGLES_H


	)

4 
	~<¨øy2.h
>

5 
	~<hashèbÀ.h
>

6 
	~<vec.h
>

8 
	sM¨chögTrüngÀs


10 
	m°d
::
ve˘‹
<
Vec2i
> 
edge
;

11 
	m°d
::
ve˘‹
<
Vec2f
> 
x
;

12 
Vec2f
 
	m‹igö
;

13 
	mdx
;

14 
Aºay2f
 
	mphi
;

16 
	mHashTabÀ
<
	mVec4i
,> 
	medge_¸oss
;

18 
ex∂icô
 
M¨chögTrüngÀs
(
dx_
=1)

19 : 
edge
(), 
x
(), 
‹igö
(0), 
dx
(
dx_
), 
phi
(), 
edge_¸oss
()

23 
ex∂icô
 
M¨chögTrüngÀs
(c⁄° 
Vec2f
 &
‹igö_
, 
dx_
=1)

24 : 
edge
(), 
x
(), 
‹igö
(
‹igö_
), 
dx
(
dx_
), 
phi
(), 
edge_¸oss
()

27 
c⁄tour_grid
();

29 
	m¥iv©e
:

31 
evÆ
–
x
, 
y
 );

32 
evÆ_gødõ¡
–
x
, 
y
, 
Vec2f
& 
g
 );

34 
c⁄tour_squ¨e
(
i
, 
j
);

35 
c⁄tour_åüngÀ
(c⁄° 
Vec2i
& 
x0
, c⁄° Vec2i& 
x1
, c⁄° Vec2i& 
x2
, 
p0
, 
p1
, 
p2
);

36 
föd_edge_¸oss
(c⁄° 
Vec2i
& 
x0
, c⁄° Vec2i& 
x1
, 
p0
, 
p1
);

37 
im¥ove_mesh
();

	@common/mat.h

1 #i‚de‡
MAT_H


2 
	#MAT_H


	)

4 
	~<c°rög
>

5 
	~<vec.h
>

7 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

8 
	sM©


10 
T
 
	ma
[
M
*
N
];

12 
	mM©
<
	mM
,
	mN
,
	mT
>()

15 
	mãm∂©e
<
˛ass
 
	mS
>

16 
	mM©
<
	mM
,
	mN
,
	mT
>(c⁄° 
S
 *
	msour˚
)

18 
	mi
=0; i<
M
*
	mN
; ++iË
	ma
[
i
]=
sour˚
[i];

21 
	mM©
<
	mM
,
	mN
,
	mT
>(
T
 
	ma0
, T 
	ma1
, T 
	ma2
, T 
	ma3
)

23 
as£π
(
M
*
N
==4);

24 
	ma
[0]=
a0
;á[1]=
a1
;á[2]=
a2
;á[3]=
a3
;

27 
	mM©
<
	mM
,
	mN
,
	mT
>(
T
 
	ma0
, T 
	ma1
, T 
	ma2
, T 
	ma3
, T 
	ma4
, T 
	ma5
)

29 
as£π
(
M
*
N
==6);

30 
	ma
[0]=
a0
;á[1]=
a1
;á[2]=
a2
;á[3]=
a3
;á[4]=
a4
;á[5]=
a5
;

33 
	mM©
<
	mM
,
	mN
,
	mT
>(
T
 
	ma0
, T 
	ma1
, T 
	ma2
, T 
	ma3
, T 
	ma4
, T 
	ma5
, T 
	ma6
, T 
	ma7
, T 
	ma8
)

35 
as£π
(
M
*
N
==9);

36 
	ma
[0]=
a0
;á[1]=
a1
;á[2]=
a2
;á[3]=
a3
;á[4]=
a4
;á[5]=
a5
;á[6]=
a6
;á[7]=
a7
;á[8]=
a8
;

39 
	mM©
<
	mM
,
	mN
,
	mT
>(c⁄° 
	mVec
<M,T> &
	mcﬁ0
, c⁄° Vec<M,T> &
	mcﬁ1
)

41 
as£π
(
N
==2);

42 
£tcﬁ
(0,
cﬁ0
); sëcﬁ(1,
cﬁ1
);

45 
	mM©
<
	mM
,
	mN
,
	mT
>(c⁄° 
	mVec
<M,T> &
	mcﬁ0
, c⁄° Vec<M,T> &
	mcﬁ1
, c⁄° Vec<M,T> &
	mcﬁ2
)

47 
as£π
(
N
==3);

48 
£tcﬁ
(0,
cﬁ0
); sëcﬁ(1,
cﬁ1
); sëcﬁ(2,
cﬁ2
);

51 
	mM©
<
	mM
,
	mN
,
	mT
>(c⁄° 
	mVec
<M,T> &
	mcﬁ0
, c⁄° Vec<M,T> &
	mcﬁ1
, c⁄° Vec<M,T> &
	mcﬁ2
, c⁄° Vec<M,T> &
	mcﬁ3
)

53 
as£π
(
N
==4);

54 
£tcﬁ
(0,
cﬁ0
); sëcﬁ(1,
cﬁ1
); sëcﬁ(2,
cﬁ2
); sëcﬁ(3,
cﬁ3
);

57 
	mT
 &
›î©‹
()(
	mi
, 
	mj
)

59 
as£π
(0<=
i
 && ()i<
M
 && 0<=
j
 && ()j<
N
);

60  
	ma
[
i
+
M
*
j
];

63 c⁄° 
	mT
 &
›î©‹
()(
	mi
, 
	mj
) const

65 
as£π
(0<=
i
 && ()i<
M
 && 0<=
j
 && ()j<
N
);

66  
	ma
[
i
+
M
*
j
];

69 
	mVec
<
	mM
,
	mT
> 
cﬁ
(
j
) const

71 
as£π
(0<=
j
 && ()j<
N
);

72  
	mVec
<
	mM
,
	mT
>(
	ma
+
j
*M);

75 
	mVec
<
	mN
,
	mT
> 
row
(
i
) const

77 
as£π
(0<=
i
 && i<
M
);

78 
	mVec
<
	mN
,
	mT
> 
	mv
;

79 
	mj
=0; j<
	mN
; ++jË
	mv
[
j
]=
a
(
i
,j);

80  
	mv
;

83 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
+=(c⁄° 
M©
<
M
,N,T> &
	mb
)

85 
	mi
=0; i<
M
*
	mN
; ++iË
	ma
[
i
]+=
b
.
a
[i];

86  *
	mthis
;

89 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
+(c⁄° M©<M,N,T> &
	mb
) const

91 
	mM©
<
	mM
,
	mN
,
	mT
> 
sum
(*
this
);

92 
	msum
+=
b
;

93  
	msum
;

96 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
-=(c⁄° 
M©
<
M
,N,T> &
	mb
)

98 
	mi
=0; i<
M
*
	mN
; ++iË
	ma
[
i
]-=
b
.
a
[i];

99  *
	mthis
;

102 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
-(c⁄° M©<M,N,T> &
	mb
) const

104 
	mM©
<
	mM
,
	mN
,
	mT
> 
diff
(*
this
);

105 
	mdiff
-=
b
;

106  
	mdiff
;

109 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
*=(
T
 
sˇœr
)

111 
i
=0; 
	mi
<
M
*
	mN
; ++iË
	ma
[i]*=
sˇœr
;

112  *
	mthis
;

115 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
*(
T
 
	msˇœr
) const

117 
	mM©
<
	mM
,
	mN
,
	mT
> 
b
(*
this
);

118 
	mb
*=
sˇœr
;

119  
	mb
;

122 
	mVec
<
	mM
,
	mT
> 
	m›î©‹
*(c⁄° Vec<
	mN
,T> 
	mv
) const

124 
	mVec
<
	mM
,
	mT
> 
	mr
;

125 
	mi
, 
	mj
;

126 c⁄° 
T
 *
	m∑
, *
	mpv
;

127 
T
 
	ms
, *
	m¥
=
r
.
v
;

128 
	mi
=0; i<
	mM
; ++i, ++
	m¥
){

129 
	m∑
=
a
+
i
;

130 
	mpv
=
v
.v;

131 
	ms
=0;

132 
	mj
=0; j<
	mN
; ++j, 
	m∑
+=
M
, ++
	mpv
)

133 
	ms
+=*
∑
*(*
pv
);

134 *
	m¥
=
s
;

136  
	mr
;

139 
	mãm∂©e
<
	mP
>

140 
	mM©
<
	mM
,
	mP
,
	mT
> 
	m›î©‹
*(c⁄° M©<
	mN
,P,T> 
	mb
) const

142 
	mM©
<
	mM
,
	mP
,
	mT
> 
	mc
;

143 
	mi
, 
	mj
, 
	mk
;

144 c⁄° 
T
 *
	m∑
, *
	mpb
;

145 
T
 
	ms
, *
	mpc
=
c
.
a
;

146 
	mk
=0; k<
	mP
; ++k){

147 
	mi
=0; i<
	mM
; ++i, ++
	mpc
){

148 
	m∑
=
a
+
i
;

149 
	mpb
=
b
.
a
+
N
*
k
;

150 
	ms
=0;

151 
	mj
=0; j<
	mN
; ++j, 
	m∑
+=
M
, ++
	mpb
)

152 
	ms
+=*
∑
*(*
pb
);

153 *
	mpc
=
s
;

156  
	mc
;

159 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
/=(
T
 
sˇœr
)

161 
i
=0; 
	mi
<
M
*
	mN
; ++iË
	ma
[i]/=
sˇœr
;

162  *
	mthis
;

165 
	mM©
<
	mM
,
	mN
,
	mT
> 
	m›î©‹
/(
T
 
	msˇœr
) const

167 
	mM©
<
	mM
,
	mN
,
	mT
> 
b
(*
this
);

168 
	mb
/=
sˇœr
;

169  
	mb
;

172 
	mM©
<
	mN
,
	mM
,
	mT
> 
å™•o£
() const {

173 
	mM©
<
	mN
,
	mM
,
	mT
> 
	mªsu…
;

175 
	mi
 = 0; i < 
	mM
; ++i) {

176 
	mj
 = 0; j < 
	mN
; ++j) {

177 
ªsu…
(
j
,
i
Ë(*
this
)(i,
	mj
);

180  
	mªsu…
;

184 
	gM©
<2,2,> 
	tM©22d
;

185 
	gM©
<2,2,> 
	tM©22f
;

186 
	gM©
<2,2,> 
	tM©22i
;

187 
	gM©
<3,2,> 
	tM©32d
;

188 
	gM©
<3,2,> 
	tM©32f
;

189 
	gM©
<3,2,> 
	tM©32i
;

190 
	gM©
<2,3,> 
	tM©23d
;

191 
	gM©
<2,3,> 
	tM©23f
;

192 
	gM©
<2,3,> 
	tM©23i
;

193 
	gM©
<3,3,> 
	tM©33d
;

194 
	gM©
<3,3,> 
	tM©33f
;

195 
	gM©
<3,3,> 
	tM©33i
;

196 
	gM©
<4,4,> 
	tM©44d
;

197 
	gM©
<4,4,> 
	tM©44f
;

198 
	gM©
<4,4,> 
	tM©44i
;

201 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

202 
	g°d
::
o°ªam
 &
›î©‹
<<(
°d
::o°ªam &
out
, c⁄° 
	gM©
<
	gM
,
	gN
,
	gT
> &
	ga
)

204 
	gi
=0; i<
	gM
; ++i){

205 
	gout
<<(
	gi
==0 ? '[' : ' ');

206 
	gj
=0; j<
	gN
-1; ++j)

207 
	gout
<<
a
(
i
,
j
)<<',';

208 
	gout
<<
a
(
i
,
N
-1);

209 if(
	gi
<
	gM
-1Ë
	gout
<<';'<<
	g°d
::
ídl
;

210 
	gout
<<']';

212  
	gout
;

215 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

216 
ölöe
 
	gM©
<
	gM
,
	gN
,
	gT
> 
	g›î©‹
*(
T
 
	gsˇœr
, c⁄° M©<M,N,T> &
	ga
)

218 
	gM©
<
	gM
,
	gN
,
	gT
> 
b
(
a
);

219 
	gb
*=
sˇœr
;

220  
	gb
;

223 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

224 
ölöe
 
	gM©
<
	gM
,
	gN
,
	gT
> 
ouãr
(c⁄° 
Vec
<
M
,
T
> &
x
, c⁄° Vec<
N
,T> &
y
)

226 
	gM©
<
	gM
,
	gN
,
	gT
> 
	gr
;

227 
T
 *
	g¥
=
r
.
a
;

228 
	gj
=0; j<
	gN
; ++j)

229 
	gi
=0; i<
	gM
; ++i, ++
	g¥
)

230 *
	g¥
=
x
[
i
]*
y
[
j
];

231  
	gr
;

234 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

235 
ölöe
 
zîo
(
M©
<
M
,
N
,
T
>& 
m©
) {

236 
	g°d
::
mem£t
(
m©
.
a
, 0, 
N
*
M
*(
T
));

239 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

240 
ölöe
 
make_idítôy
(
M©
<
N
,N,
T
>& 
m©
)

242 
	g°d
::
mem£t
(
m©
.
a
, 0, 
N
*N*(
T
));

243 
	gi
=0; i<
	gN
; ++i)

244 
	gm©
.
	ga
[(
N
+1)*
i
]=1;

247 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

248 
ölöe
 
T
 
åa˚
(
M©
<
N
,N,T>& 
m©
)

250 
T
 
	gt
=0;

251 
	gi
=0; i<
	gN
; ++i)

252 
	gt
+=
m©
.
a
[(
N
+1)*
i
];

253  
	gt
;

256 
	gãm∂©e
<
˛ass
 
	gT
>

257 
ölöe
 
	gM©
<3,3,
	gT
> 
°¨_m©rix
(c⁄° 
Vec
<3,
T
> &
w
)

259  
	gM©
<3,3,
	gT
>(0, -
	gw
.
	gv
[2], w.v[1],

260 
	gw
.
	gv
[2], 0, -w.v[0],

261 -
	gw
.
	gv
[1], w.v[0], 0);

265 
	gãm∂©e
<
˛ass
 
	gT
>

266 
sig√d_pﬁ¨_decomposôi⁄
(c⁄° 
M©
<2,2,
T
>& 
F
, M©<2,2,T>& 
Q
, M©<2,2,T>& 
A
)

268 
T
 
	gs
=
F
(0,1)-F(1,0);

269 if(
	gs
){

270 
T
 
	gc
=
F
(0,0)+F(1,1), 
	ghyp
=
°d
::
sqπ
(
c
*c+
s
*s);

271 if(
	gc
>0){ c/=
hyp
; 
	gs
/=hyp; }

272 { 
	gc
/=-
hyp
; 
	gs
/=-hyp; }

273 
Q
(0,0)=
c
; Q(0,1)=
s
; Q(1,0)=-s; Q(1,1)=c;

274 
A
(0,0)=
c
*
F
(0,0)-
s
*F(1,0);

275 
A
(1,0)=A(0,1)=
s
*
F
(0,0)+
c
*F(1,0);

276 
A
(1,1)=
s
*
F
(0,1)+
c
*F(1,1);

278 
Q
(0,0)=1; Q(0,1)=0; Q(1,0)=0; Q(1,1)=1;

279 
	gA
=
F
;

285 
	gãm∂©e
<
˛ass
 
	gT
>

286 
symmëric_eigí¥obÀm
(c⁄° 
M©
<2,2,
T
>& 
A
, T& 
c
, T& 
s
, 
Vec
<2,T>& 
D
)

288 
	gs
=2*
A
(1,0);

289 if(
	gs
==0){

290 
c
=1;

291 
	gD
[0]=
A
(0,0); D[1]=A(1,1);

293 
T
 
	gd
=
A
(0,0)-A(1,1);

294 
T
 
	gdisc
=
°d
::
sqπ
(
d
*d+
s
*s);

295 
	gc
=
d
+(d>0 ? 
disc
 : -disc);

296 
T
 
	ghyp
=
°d
::
sqπ
(
c
*c+
s
*s);

297 
	gc
/=
hyp
; 
	gs
/=hyp;

299 
	gD
[0]=
c
*c*
A
(0,0)+2*c*
s
*A(1,0)+s*s*A(1,1);

300 
	gD
[1]=
s
*s*
A
(0,0)-2*
c
*s*A(1,0)+c*c*A(1,1);

302 if(
	g°d
::
Ábs
(
D
[0])<
°d
::fabs(D[1])){

303 
°d
::
sw≠
(
D
[0], D[1]);

304 
	gc
=-
c
;

305 
	g°d
::
sw≠
(
c
, 
s
);

307 if(
	gc
<0){ c=-
c
; 
	gs
=-
s
; }

310 
	gãm∂©e
<
˛ass
 
	gT
>

311 
ölöe
 
T
 
dëîmö™t
(c⁄° 
M©
<3,3,T> &
m©
)

313  
m©
(0,0)*(mat(2,2)*mat(1,1)-mat(2,1)*mat(1,2))-

314 
m©
(1,0)*(mat(2,2)*mat(0,1)-mat(2,1)*mat(0,2))+

315 
m©
(2,0)*(mat(1,2)*mat(0,1)-mat(1,1)*mat(0,2));

320 
	gãm∂©e
<
˛ass
 
	gT
>

321 
symmëric_eigí¥obÀm
(c⁄° 
M©
<2,2,
T
>& 
A
, M©<2,2,T>& 
Q
, 
Vec
<2,T>& 
D
)

323 
T
 
	gc
, 
	gs
;

324 
symmëric_eigí¥obÀm
(
A
, 
c
, 
s
, 
D
);

325 
Q
(0,0)=
c
; Q(1,0)=
s
; Q(0,1)=-s; Q(1,1)=c;

330 
	gãm∂©e
<
˛ass
 
	gT
>

331 
sig√d_svd
(c⁄° 
M©
<2,2,
T
>& 
A
, M©<2,2,T>& 
U
, M©<2,2,T>& 
V
, 
Vec
<2,T>& 
S
)

333 
	gVec
<2,
	gT
> 
	gD
;

334 
symmëric_eigí¥obÀm
(
M©
<2,2,
T
>(
sqr
(
A
(0,0))+sqr(A(0,1)),

335 
A
(0,0)*A(1,0)+A(0,1)*A(1,1),

337 
sqr
(
A
(1,0))+sqr(A(1,1))),

338 
U
, 
D
);

340 
T
 
	gf00
=
A
(0,0)*
U
(0,0)+A(1,0)*U(1,0),

341 
	gf10
=
A
(0,1)*
U
(0,0)+A(1,1)*U(1,0),

342 
	gf01
=
A
(0,0)*
U
(0,1)+A(1,0)*U(1,1),

343 
	gf11
=
A
(0,1)*
U
(0,1)+A(1,1)*U(1,1);

345 
T
 
	gs
=
f01
-
f10
, 
	gc
;

346 if(
	gs
){

347 
	gc
=
f00
+
f11
;

348 
T
 
	ghyp
=
°d
::
sqπ
(
c
*c+
s
*s);

349 if(
	gc
>0){ c/=
hyp
; 
	gs
/=hyp; }

350 { 
	gc
/=-
hyp
; 
	gs
/=-hyp; }

352 
	gc
=1;

353 
V
(0,0)=
c
; V(0,1)=
s
; V(1,0)=-s; V(1,1)=c;

355 
	gS
[0]=(
U
(0,0)*
A
(0,0)+U(1,0)*A(1,0))*
V
(0,0) + (U(0,0)*A(0,1)+U(1,0)*A(1,1))*V(1,0);

356 
	gS
[1]=(
U
(0,1)*
A
(0,0)+U(1,1)*A(1,0))*
V
(0,1) + (U(0,1)*A(0,1)+U(1,1)*A(1,1))*V(1,1);

360 
	gãm∂©e
<
˛ass
 
	gT
>

361 
föd_QR
(c⁄° 
M©
<3,3,
T
>& 
A
, M©<3,3,T>& 
Q
, M©<3,3,T>& 
R
)

363 
Q
(0,0)=1; Q(0,1)=0; Q(0,2)=0;

364 
Q
(1,0)=0; Q(1,1)=1; Q(1,2)=0;

365 
Q
(2,0)=0; Q(2,1)=0; Q(2,2)=1;

366 
	gR
=
A
;

367 
	gVec
<3,
	gT
> 
	gu
;

368 
T
 
	gn2
, 
	gu2
, 
	gn
, 
	gc
, 
	gd
;

371 
	gn2
=
sqr
(
R
(0,0))+sqr(R(1,0))+sqr(R(2,0));

372 
	gu
[0]=
R
(0,0); u[1]=R(1,0); u[2]=R(2,0);

373 
	gu2
=
sqr
(
u
[1])+sqr(u[2]);

374 
R
(1,0)=0; R(2,0)=0;

375 if(
	gu2
){

376 
	gn
=
°d
::
sqπ
(
n2
);

377 
	gu
[0]+=(
u
[0]>0 ? 
n
 : -n);

378 
	gu2
+=
sqr
(
u
[0]);

379 
	gc
=2/
u2
;

381 
R
(0,0)=(
u
[0]>0 ? -
n
 :Ç);

384 
	gd
=
c
*(
u
[0]*
R
(0,1)+
	gu
[1]*R(1,1)+u[2]*R(2,1));

385 
R
(0,1)-=
d
*
u
[0]; R(1,1)-=d*u[1]; R(2,1)-=d*u[2];

387 
	gd
=
c
*(
u
[0]*
R
(0,2)+
	gu
[1]*R(1,2)+u[2]*R(2,2));

388 
R
(0,2)-=
d
*
u
[0]; R(1,2)-=d*u[1]; R(2,2)-=d*u[2];

390 
Q
(0,0)-=
c
*
u
[0]*u[0]; Q(0,1)-=c*u[0]*u[1]; Q(0,2)-=c*u[0]*u[2];

391 
Q
(1,0)=Q(0,1); Q(1,1)-=
c
*
u
[1]*u[1]; Q(1,2)-=c*u[1]*u[2];

392 
Q
(2,0)=Q(0,2); Q(2,1)=Q(1,2); Q(2,2)-=
c
*
u
[2]*u[2];

395 
R
(0,0)=-R(0,0); R(0,1)=-R(0,1); R(0,2)=-R(0,2);

396 
Q
(0,0)=-1;

400 
	gn2
=
sqr
(
R
(1,1))+sqr(R(2,1));

401 
	gu
[1]=
R
(1,1); u[2]=R(2,1);

402 
	gu2
=
sqr
(
u
[2]);

403 
R
(2,1)=0;

404 if(
	gu2
){

405 
	gn
=
°d
::
sqπ
(
n2
);

406 
	gu
[1]+=(
u
[1]>0 ? 
n
 : -n);

407 
	gu2
+=
sqr
(
u
[1]);

408 
	gc
=2/
u2
;

410 
R
(1,1)=(
u
[1]>0 ? -
n
 :Ç);

413 
	gd
=
c
*(
u
[1]*
R
(1,2)+
	gu
[2]*R(2,2));

414 
R
(1,2)-=
d
*
u
[1]; R(2,2)-=d*u[2];

416 
	gd
=
c
*(
Q
(0,1)*
	gu
[1]+Q(0,2)*u[2]); Q(0,1)-=
d
*
u
[1]; Q(0,2)-=d*u[2];

417 
	gd
=
c
*(
Q
(1,1)*
	gu
[1]+Q(1,2)*u[2]); Q(1,1)-=
d
*
u
[1]; Q(1,2)-=d*u[2];

418 
	gd
=
c
*(
Q
(2,1)*
	gu
[1]+Q(2,2)*u[2]); Q(2,1)-=
d
*
u
[1]; Q(2,2)-=d*u[2];

421 
R
(1,1)=-R(1,1); R(1,2)=-R(1,2);

422 
Q
(0,1)=-Q(0,1); Q(1,1)=-Q(1,1); Q(2,1)=-Q(2,1);

426 
R
(0,0)=-R(0,0); R(0,1)=-R(0,1); R(0,2)=-R(0,2);

427 
R
(1,1)=-R(1,1); R(1,2)=-R(1,2);

428 
Q
(0,0)=-Q(0,0); Q(0,1)=-Q(0,1);

429 
Q
(1,0)=-Q(1,0); Q(1,1)=-Q(1,1);

430 
Q
(2,0)=-Q(2,0); Q(2,1)=-Q(2,1);

434 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

435 
föd_QR
(c⁄° 
M©
<2,
N
,
T
>& 
A
, M©<2,N,T>& 
Q
, M©<2,N,T>& 
R
)

437 
T
 
	gc
=
A
(0,0), 
	gs
=A(1,0), 
	ghyp
=
°d
::
sqπ
(
c
*c+
s
*s);

438 if(
	ghyp
){

439 
	gc
/=
hyp
;

440 
	gs
/=
hyp
;

441 
Q
(0,0)=
c
; Q(1,0)=
s
; Q(0,1)=-s; Q(1,1)=c;

442 
R
(0,0)=
hyp
; R(1,0)=0;

443 
	gj
=1; j<
	gN
; ++j){

444 
R
(0,
j
)=
c
*
A
(0,j)+
s
*A(1,j);

445 
R
(1,
j
)=-
s
*
A
(0,j)+
c
*A(1,j);

448 
Q
(0,0)=1; Q(1,0)=0; Q(0,1)=0; Q(1,1)=1;

449 
	gR
=
A
;

454 
	gãm∂©e
<
˛ass
 
	gT
>

455 
ölöe
 
	gM©
<2,2,
	gT
> 
övî£
(c⁄° 
M©
<2,2,
T
> &
m©
)

457 c⁄° 
	gT
& 
	ga
 = 
m©
(0,0);

458 c⁄° 
	gT
& 
	gb
 = 
m©
(0,1);

459 c⁄° 
	gT
& 
	gc
 = 
m©
(1,0);

460 c⁄° 
	gT
& 
	gd
 = 
m©
(1,1);

462 
T
 
	gövdë
 = 1.0 / ( 
a
*
d
 - 
b
*
c
 );

463  
	gM©
<2,2,
	gT
>–
övdë
*
	gd
, -övdë*
	gc
, -övdë*
	gb
, invdë*
	ga
 );

467 
	gãm∂©e
<
˛ass
 
	gT
>

468 
ölöe
 
	gM©
<3,3,
	gT
> 
övî£
(c⁄° 
M©
<3,3,
T
> &
m©
)

470 
T
 
	gövdë
 = 1.0 / 
dëîmö™t
(
m©
);

471  
	gM©
<3,3,
	gT
>(

472 
	gövdë
*(
m©
(2,2)*mat(1,1)-mat(2,1)*mat(1,2)), -invdet*(mat(2,2)*mat(0,1)-mat(2,1)*mat(0,2)), invdet*(mat(1,2)*mat(0,1)-mat(1,1)*mat(0,2)),

473 -
	gövdë
*(
m©
(2,2)*mat(1,0)-mat(2,0)*mat(1,2)), invdet*(mat(2,2)*mat(0,0)-mat(2,0)*mat(0,2)), -invdet*(mat(1,2)*mat(0,0)-mat(1,0)*mat(0,2)),

474 
	gövdë
*(
m©
(2,1)*mat(1,0)-mat(2,0)*mat(1,1)), -invdet*(mat(2,1)*mat(0,0)-mat(2,0)*mat(0,1)), invdet*(mat(1,1)*mat(0,0)-mat(1,0)*mat(0,1))

	@common/matlapack.h

1 #i‚de‡
MATLAPACK_H


2 
	#MATLAPACK_H


	)

4 
	~<œ∑ck_wøµî.h
>

5 
	~<m©.h
>

7 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

8 
övît
(
M©
<
M
,
N
,
T
>& 
m©rix
) {

9 
as£π
(
M
==
N
);

10 
	gùiv
[
M
];

11 
T
 
	gw‹k
[
M
];

12 
	glw‹k
 = 
M
;

13 
	göfo
;

15 
	gLAPACK
::
övît_gíîÆ_m©rix
(
M
, 
m©rix
.
a
, M, 
ùiv
, 
öfo
);

19 
	gãm∂©e
<
	gM
, 
	gN
, 
˛ass
 
	gT
>

20 
Àa°_squ¨es
(
M©
<
M
,
N
,
T
>&
m©rix
, 
Vec
<M,T>&
rhs
) {

21 
	göfo
 = 0;

22 
	gLAPACK
::
sﬁve_Àa°_squ¨es
('N', 
M
, 
N
, 1, 
m©rix
.
a
, M, 
rhs
.
v
, 
max
(M,N), 
öfo
);

	@common/newsparse/bicgstab.h

9 #i‚de‡
v‹ãxshìt_¥oje˘_bicg°ab_h


10 
	#v‹ãxshìt_¥oje˘_bicg°ab_h


	)

12 
	~<bœs_wøµî.h
>

13 
	~<löór_›î©‹.h
>

14 
	~<krylov_sﬁvîs.h
>

16 
	sBiCGSTAB_Sﬁvî


18 
	mtﬁî™˚_Á˘‹
;

19 
	mmax_ôî©i⁄s
;

20 
	mªsiduÆ_n‹m
;

21 
	môî©i⁄
;

22 
KrylovSﬁvîSètus
 
	m°©us
;

23 
	m°d
::
ve˘‹
<> 
r
, 
	mr_h©
, 
	ms
, 
	mv
, 
	mp
, 
	mx
;

25 
BiCGSTAB_Sﬁvî
()

26 : 
tﬁî™˚_Á˘‹
(1e-9), 
max_ôî©i⁄s
(1000), 
ªsiduÆ_n‹m
(0), 
ôî©i⁄
(0), 
°©us
(
KRYLOV_CONVERGED
), 
r
(0), 
r_h©
(0), 
s
(0), 
v
(0), 
p
(0), 
x
(0)

29 
ölöe
 
KrylovSﬁvîSètus
 
sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
,

30 c⁄° *
rhs
,

31 *
ªsu…
,

32 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
=0,

33 
boﬁ
 
u£_giví_öôül_guess
=
Ál£
);

38 
ölöe
 
KrylovSﬁvîSètus
 
	gBiCGSTAB_Sﬁvî
::
	$sﬁve
(c⁄° 
LöórO≥øt‹
 &
lö_›
,

39 c⁄° *
rhs
,

40 *
ªsu…
,

41 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
,

42 
boﬁ
 
u£_giví_öôül_guess
 )

44 c⁄° 
n
=
lö_›
.
m
;

45 
	`as£π
(
lö_›
.
n
==n);

46 
	`as£π
(
¥ec⁄dôi⁄î
==0 || (¥ec⁄dôi⁄î->
m
==
n
 &&Öreconditioner->n==n));

47 if(()
s
.
	`size
()!=
n
)

49 
r
.
	`ªsize
(
n
);

50 
r_h©
.
	`ªsize
(
n
);

51 
s
.
	`ªsize
(
n
);

55 
tﬁ
=
tﬁî™˚_Á˘‹
*
BLAS
::
	`abs_max
(
n
, 
rhs
);

57 i‡–!
u£_giví_öôül_guess
 )

59 
BLAS
::
	`£t_zîo
(
n
, 
ªsu…
);

63 
lö_›
.
	`≠∂y_™d_subåa˘
–
ªsu…
, 
rhs
, &
r
[0] );

65 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

66 if(
ªsiduÆ_n‹m
==0Ë 
°©us
=
KRYLOV_CONVERGED
;

69 
r_h©
 = 
r
;

72 
rho
 = 1.0;

73 
Æpha
 = 1.0;

74 
omega
 = 1.0;

77 
v
.
	`ªsize
(
n
,0);

78 
p
.
	`ªsize
(
n
,0);

80 
°d
::
ve˘‹
<> 
¥odu˘
;

81 
°d
::
ve˘‹
<> 
t
;

82 
ôî©i⁄
=1; iãøti⁄<
max_ôî©i⁄s
; ++iteration)

84 
rho_¥ev
 = 
rho
;

85 
rho
 = 
BLAS
::
	`dŸ
(
r_h©
,
r
);

87 
bëa
 = (
rho
/
rho_¥ev
Ë* (
Æpha
/
omega
);

89 if–
rho
!Ùhÿ|| 
bëa
!=beta )

91 
°d
::
cout
 << "BiCGSTAB_Sﬁvî: NaN dëe˘ed,Ñe°¨tög" << std::
ídl
;

92 
BLAS
::
	`£t_zîo
(
n
, 
ªsu…
);

93 
lö_›
.
	`≠∂y_™d_subåa˘
–
ªsu…
, 
rhs
, &
r
[0] );

94 
ôî©i⁄
 = 1;

95 
rho
 = 1.0;

96 
Æpha
 = 1.0;

97 
omega
 = 1.0;

102 
BLAS
::
	`add_sˇÀd
–-
omega
, 
v
, 
p
 );

103 
¥odu˘
 = 
r
;

104 
BLAS
::
	`add_sˇÀd
–
bëa
, 
p
, 
¥odu˘
 );

105 
p
 = 
¥odu˘
;

108 
lö_›
.
	`≠∂y
–
p
, 
v
 );

111 
Æpha
 = 
rho
 / 
BLAS
::
	`dŸ
(
r_h©
,
v
);

114 
s
 = 
r
;

115 
BLAS
::
	`add_sˇÀd
–-
Æpha
, 
v
, 
s
 );

118 
lö_›
.
	`≠∂y
–
s
, 
t
 );

121 
omega
 = 
BLAS
::
	`dŸ
(
t
,
s
) / BLAS::dot(t,t);

124 
BLAS
::
	`add_sˇÀd
–
n
, 
Æpha
, &
p
[0], 
ªsu…
 );

125 
BLAS
::
	`add_sˇÀd
–
n
, 
omega
, &
s
[0], 
ªsu…
 );

128 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

130 if(
ªsiduÆ_n‹m
<=
tﬁ
)

132  
°©us
=
KRYLOV_CONVERGED
;

136 
BLAS
::
	`add_sˇÀd
–-
omega
, 
t
, 
s
 );

137 
r
 = 
s
;

140  
°©us
=
KRYLOV_EXCEEDED_MAX_ITERATIONS
;

142 
	}
}

	@common/newsparse/dense_matrix.cpp

1 
	~<dí£_m©rix.h
>

2 
	~<bœs_wøµî.h
>

3 
	~<c°rög
>

5 
	gDí£M©rix
::

6 
	$˛ór
()

8 
m
=
n
=0;

9 
vÆue
.
	`˛ór
();

10 
	}
}

12 
	gDí£M©rix
::

13 
	$£t_zîo
()

15 
BLAS
::
	`£t_zîo
(
vÆue
);

16 
	}
}

18 
	gDí£M©rix
::

19 
	$ªsize
(
m_
, 
n_
)

21 
m
=
m_
; 
n
=
n_
;

22 
vÆue
.
	`ªsize
(
m
*
n
, 0);

23 
	}
}

25 
	gDí£M©rix
::

26 
	$≠∂y
(c⁄° *
x
, *
y
) const

28 
	`as£π
(
x
 && 
y
);

29 
BLAS
::
	`mu…ùly_m©rix_ve˘‹
(
m
, 
n
, &
vÆue
[0], 
x
, 
y
);

30 
	}
}

32 
	gDí£M©rix
::

33 
	$≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

35 
	`as£π
(
x
 && 
y
);

36 if(
y
!=
z
Ë
BLAS
::
	`c›y
(
m
, y, z);

37 
BLAS
::
	`mu…ùly_m©rix_ve˘‹
(BLAS::
NoTøns
, 
m
, 
n
, -1, &
vÆue
[0], m, 
x
, 1, 1, 
z
);

38 
	}
}

40 
	gDí£M©rix
::

41 
	$≠∂y_å™•o£
(c⁄° *
x
, *
y
) const

43 
	`as£π
(
x
 && 
y
);

44 
BLAS
::
	`mu…ùly_m©rix_ve˘‹
(BLAS::
Tøns
, 
m
, 
n
, 1, &
vÆue
[0], m, 
x
, 1, 0, 
y
);

45 
	}
}

47 
	gDí£M©rix
::

48 
	$≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

50 
	`as£π
(
x
 && 
y
);

51 if(
y
!=
z
Ë
BLAS
::
	`c›y
(
n
, y, z);

52 
BLAS
::
	`mu…ùly_m©rix_ve˘‹
(BLAS::
Tøns
, 
m
, 
n
, -1, &
vÆue
[0], m, 
x
, 1, 1, 
z
);

53 
	}
}

55 
	gDí£M©rix
::

56 
	$wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const

58 
ouçut
<<
v¨übÀ_«me
<<"=[";

59 
°d
::
°ªamsize
 
ﬁd_¥ecisi⁄
=
ouçut
.
	`¥ecisi⁄
();

60 
ouçut
.
	`¥ecisi⁄
(18);

61 
i
=0; i<
m
; ++i){

62 if(
i
>0Ë
ouçut
<<" ";

63 
j
=0; j<
n
-1; ++jË
ouçut
<<
vÆue
[
i
+j*
m
]<<" ";

64 
ouçut
<<
vÆue
[
i
+(
n
-1)*
m
];

65 if(
i
<
m
-1Ë
ouçut
<<
°d
::
ídl
;

66 
ouçut
<<"];"<<
°d
::
ídl
;

68 
ouçut
.
	`¥ecisi⁄
(
ﬁd_¥ecisi⁄
);

69 
	}
}

71 
	$å™•o£
(c⁄° 
Dí£M©rix
 &
A
, Dí£M©rix &
Aå™•o£
)

73 
Aå™•o£
.
	`ªsize
(
A
.
n
, A.
m
);

74 
j
=0; j<
A
.
n
; ++jË
i
=0; i<A.
m
; ++i){

75 
	`Aå™•o£
(
j
,
i
)=
	`A
(i,j);

77 
	}
}

79 
	$mu…ùly
(c⁄° 
Dí£M©rix
 &
A
, c⁄° Dí£M©rix &
B
, Dí£M©rix &
C
)

81 
	`as£π
(
A
.
n
==
B
.
m
);

82 
C
.
	`ªsize
(
A
.
m
, 
B
.
n
);

83 
BLAS
::
	`mu…ùly_m©rix_m©rix
(
A
.
m
, A.
n
, 
B
.m, &A.
vÆue
[0], &B.vÆue[0], &
C
.value[0]);

84 
	}
}

86 
	$mu…ùly_wôh_å™•o£
(c⁄° 
Dí£M©rix
 &
A
, Dí£M©rix &
ATA
)

88 
ATA
.
	`ªsize
(
A
.
n
, A.n);

89 
BLAS
::
	`mu…ùly_m©rix_m©rix
(BLAS::
Tøns
, BLAS::
NoTøns
, 
A
.
n
, A.n, A.
m
, 1, &A.
vÆue
[0], A.m, &A.value[0], A.m,

90 0, &
ATA
.
vÆue
[0], 
A
.
n
);

91 
	}
}

	@common/newsparse/dense_matrix.h

1 #i‚de‡
DENSE_MATRIX_H


2 
	#DENSE_MATRIX_H


	)

4 
	~<löór_›î©‹.h
>

7 
	gDí£M©rix
: 
public
 
LöórO≥øt‹


9 
°d
::
ve˘‹
<> 
vÆue
;

11 
Dí£M©rix
(
m_
=0)

12 : 
LöórO≥øt‹
(
m_
, m_), 
vÆue
(m_*m_, 0)

15 
Dí£M©rix
(
m_
, 
n_
)

16 : 
LöórO≥øt‹
(
m_
, 
n_
), 
vÆue
(m_*n_, 0)

19 
˛ór
();

20 
£t_zîo
();

21 
ªsize
(
m_
, 
n_
);

23 c⁄° &
›î©‹
()(
	gi
, 
	gj
) const

25 
as£π
(
i
>=0 && i<
m
 && 
j
>=0 && j<
n
);

26  
	gvÆue
[
i
+
j
*
m
];

29 &
›î©‹
()(
	gi
, 
	gj
)

31 
as£π
(
i
>=0 && i<
m
 && 
j
>=0 && j<
n
);

32  
	gvÆue
[
i
+
j
*
m
];

35 
usög
 
	gLöórO≥øt‹
::
≠∂y
;

36 
usög
 
	gLöórO≥øt‹
::
≠∂y_™d_subåa˘
;

37 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£
;

38 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£_™d_subåa˘
;

40 
vútuÆ
 
≠∂y
(c⁄° *
öput_ve˘‹
, *
ouçut_ve˘‹
) const;

41 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

42 
vútuÆ
 
≠∂y_å™•o£
(c⁄° *
öput_ve˘‹
, *
ouçut_ve˘‹
) const;

43 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

44 
vútuÆ
 
wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const;

47 
å™•o£
(c⁄° 
Dí£M©rix
 &
A
, Dí£M©rix &
Aå™•o£
);

48 
mu…ùly
(c⁄° 
Dí£M©rix
 &
A
, c⁄° Dí£M©rix &
B
, Dí£M©rix &
C
);

49 
mu…ùly_wôh_å™•o£
(c⁄° 
Dí£M©rix
 &
A
, Dí£M©rix &
ATA
);

	@common/newsparse/krylov_solvers.cpp

1 
	~<krylov_sﬁvîs.h
>

2 
	~<bœs_wøµî.h
>

3 
	~<ˇs£π
>

6 
KrylovSﬁvîSètus
 
	gCG_Sﬁvî
::

7 
	$sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

8 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
, 
boﬁ
 
u£_giví_öôül_guess
)

10 c⁄° 
n
=
A
.
m
;

11 
	`as£π
(
A
.
n
==n);

12 
	`as£π
(
¥ec⁄dôi⁄î
==0 || (¥ec⁄dôi⁄î->
m
==
n
 &&Öreconditioner->n==n));

13 if(()
s
.
	`size
()!=
n
){

14 
r
.
	`ªsize
(
n
);

15 
z
.
	`ªsize
(
n
);

16 
s
.
	`ªsize
(
n
);

19 
tﬁ
=
tﬁî™˚_Á˘‹
*
BLAS
::
	`abs_max
(
n
, 
rhs
);

21 if(
u£_giví_öôül_guess
){

22 
A
.
	`≠∂y_™d_subåa˘
(
ªsu…
, 
rhs
, &
r
[0]);

24 
BLAS
::
	`£t_zîo
(
n
, 
ªsu…
);

25 
BLAS
::
	`c›y
(
n
, 
rhs
, &
r
[0]);

28 
ôî©i⁄
=0;

29 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

30 if(
ªsiduÆ_n‹m
==0Ë 
°©us
=
KRYLOV_CONVERGED
;

32 
rho
;

33 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
); 
BLAS
::
	`c›y
(r, z);

34 
rho
=
BLAS
::
	`dŸ
(
r
, 
z
);

35 if(
rho
<=0 ||Ñho!ÙhoË 
°©us
=
KRYLOV_BREAKDOWN
;

36 
BLAS
::
	`c›y
(
z
, 
s
);

38 
ôî©i⁄
=1; iãøti⁄<
max_ôî©i⁄s
; ++iteration){

39 
Æpha
;

40 
A
.
	`≠∂y
(
s
, 
z
);

41 
sz
=
BLAS
::
	`dŸ
(
s
, 
z
);

42 if(
sz
<=0 || sz!=szË 
°©us
=
KRYLOV_BREAKDOWN
;

43 
Æpha
=
rho
/
sz
;

44 
BLAS
::
	`add_sˇÀd
(
n
, 
Æpha
, &
s
[0], 
ªsu…
);

45 
BLAS
::
	`add_sˇÀd
(-
Æpha
, 
z
, 
r
);

46 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

47 if(
ªsiduÆ_n‹m
<=
tﬁ
Ë 
°©us
=
KRYLOV_CONVERGED
;

48 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
); 
BLAS
::
	`c›y
(r, z);

49 
rho_√w
=
BLAS
::
	`dŸ
(
r
, 
z
);

50 if(
rho_√w
<=0 ||Ñho_√w!Ùho_√wË 
°©us
=
KRYLOV_BREAKDOWN
;

51 
bëa
=
rho_√w
/
rho
;

52 
BLAS
::
	`add_sˇÀd
(
bëa
, 
s
, 
z
); s.
	`sw≠
(z);

53 
rho
=
rho_√w
;

55  
°©us
=
KRYLOV_EXCEEDED_MAX_ITERATIONS
;

56 
	}
}

59 
KrylovSﬁvîSètus
 
	gMINRES_CR_Sﬁvî
::

60 
	$sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

61 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
, 
boﬁ
 
u£_giví_öôül_guess
)

63 c⁄° 
n
=
A
.
m
;

64 
	`as£π
(
A
.
n
==n);

65 
	`as£π
(
¥ec⁄dôi⁄î
==0 || (¥ec⁄dôi⁄î->
m
==
n
 &&Öreconditioner->n==n));

66 if(()
s
.
	`size
()!=
n
){

67 
r
.
	`ªsize
(
n
);

68 
z
.
	`ªsize
(
n
);

69 
q
.
	`ªsize
(
n
);

70 
s
.
	`ªsize
(
n
);

71 
t
.
	`ªsize
(
n
);

74 
tﬁ
=
tﬁî™˚_Á˘‹
*
BLAS
::
	`abs_max
(
n
, 
rhs
);

76 if(
u£_giví_öôül_guess
){

77 
A
.
	`≠∂y_™d_subåa˘
(
ªsu…
, 
rhs
, &
r
[0]);

79 
BLAS
::
	`£t_zîo
(
n
, 
ªsu…
);

80 
BLAS
::
	`c›y
(
n
, 
rhs
, &
r
[0]);

83 
ôî©i⁄
=0;

84 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

85 if(
ªsiduÆ_n‹m
==0Ë 
°©us
=
KRYLOV_CONVERGED
;

87 
rho
;

88 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
); 
BLAS
::
	`c›y
‘, 
s
);

89 
A
.
	`≠∂y
(
s
, 
t
);

90 
rho
=
BLAS
::
	`dŸ
(
r
, 
t
);

91 if(
rho
==0 ||Ñho!ÙhoË 
°©us
=
KRYLOV_BREAKDOWN
;

93 
ôî©i⁄
=1; iãøti⁄<
max_ôî©i⁄s
; ++iteration){

94 
Æpha
;

95 
â
=
BLAS
::
	`dŸ
(
t
,Å);

96 if(
â
==0 ||Åt!ÒtË 
°©us
=
KRYLOV_BREAKDOWN
;

97 
Æpha
=
rho
/
â
;

98 
BLAS
::
	`add_sˇÀd
(
n
, 
Æpha
, &
s
[0], 
ªsu…
);

99 
BLAS
::
	`add_sˇÀd
(-
Æpha
, 
t
, 
r
);

100 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

101 if(
ªsiduÆ_n‹m
<=
tﬁ
Ë 
KRYLOV_CONVERGED
;

102 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
);

103 
BLAS
::
	`c›y
(
r
, 
z
);

104 
A
.
	`≠∂y
(
z
, 
q
);

105 
rho_√w
=
BLAS
::
	`dŸ
(
r
, 
q
);

106 if(
rho_√w
==0 ||Ñho_√w!Ùho_√wË 
KRYLOV_BREAKDOWN
;

107 
bëa
=
rho_√w
/
rho
;

108 
BLAS
::
	`add_sˇÀd
(
bëa
, 
s
, 
z
); s.
	`sw≠
(z);

109 
BLAS
::
	`add_sˇÀd
(
bëa
, 
t
, 
q
);Å.
	`sw≠
(q);

110 
rho
=
rho_√w
;

112  
KRYLOV_EXCEEDED_MAX_ITERATIONS
;

113 
	}
}

116 
KrylovSﬁvîSètus
 
	gCGNR_Sﬁvî
::

117 
	$sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

118 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
, 
boﬁ
 
u£_giví_öôül_guess
)

120 c⁄° 
m
=
A
.m, 
n
=A.n;

121 
	`as£π
(
¥ec⁄dôi⁄î
==0 || (¥ec⁄dôi⁄î->
m
==
n
 &&Öreconditioner->n==n));

122 if(()
s
.
	`size
()!=
n
){

123 
r
.
	`ªsize
(
n
);

124 
z
.
	`ªsize
(
n
);

125 
s
.
	`ªsize
(
n
);

126 
u
.
	`ªsize
(
m
);

129 
A
.
	`≠∂y_å™•o£
(
rhs
, &
r
[0]);

130 
tﬁ
=
tﬁî™˚_Á˘‹
*
BLAS
::
	`abs_max
(
r
);

132 if(
u£_giví_öôül_guess
){

133 
A
.
	`≠∂y_™d_subåa˘
(
ªsu…
, 
rhs
, &
u
[0]);

134 
A
.
	`≠∂y_å™•o£
(
u
, 
r
);

136 
BLAS
::
	`£t_zîo
(
n
, 
ªsu…
);

139 
ôî©i⁄
=0;

140 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

141 if(
ªsiduÆ_n‹m
==0Ë 
°©us
=
KRYLOV_CONVERGED
;

143 
rho
;

144 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
); 
BLAS
::
	`c›y
(r, z);

145 
rho
=
BLAS
::
	`dŸ
(
r
, 
z
);

146 if(
rho
<=0 ||Ñho!ÙhoË 
°©us
=
KRYLOV_BREAKDOWN
;

147 
BLAS
::
	`c›y
(
z
, 
s
);

149 
ôî©i⁄
=1; iãøti⁄<
max_ôî©i⁄s
; ++iteration){

150 
Æpha
;

151 
A
.
	`≠∂y
(
s
, 
u
);

152 
A
.
	`≠∂y_å™•o£
(
u
, 
z
);

153 
sz
=
BLAS
::
	`dŸ
(
u
, u);

154 if(
sz
<=0 || sz!=szË 
°©us
=
KRYLOV_BREAKDOWN
;

155 
Æpha
=
rho
/
sz
;

156 
BLAS
::
	`add_sˇÀd
(
n
, 
Æpha
, &
s
[0], 
ªsu…
);

157 
BLAS
::
	`add_sˇÀd
(-
Æpha
, 
z
, 
r
);

158 
ªsiduÆ_n‹m
=
BLAS
::
	`abs_max
(
r
);

159 if(
ªsiduÆ_n‹m
<=
tﬁ
Ë 
°©us
=
KRYLOV_CONVERGED
;

160 if(
¥ec⁄dôi⁄î
Ë¥ec⁄dôi⁄î->
	`≠∂y
(
r
, 
z
); 
BLAS
::
	`c›y
(r, z);

161 
rho_√w
=
BLAS
::
	`dŸ
(
r
, 
z
);

162 if(
rho_√w
<=0 ||Ñho_√w!Ùho_√wË 
°©us
=
KRYLOV_BREAKDOWN
;

163 
bëa
=
rho_√w
/
rho
;

164 
BLAS
::
	`add_sˇÀd
(
bëa
, 
s
, 
z
); s.
	`sw≠
(z);

165 
rho
=
rho_√w
;

173  
°©us
=
KRYLOV_EXCEEDED_MAX_ITERATIONS
;

174 
	}
}

	@common/newsparse/krylov_solvers.h

1 #i‚de‡
KRYLOV_SOLVERS_H


2 
	#KRYLOV_SOLVERS_H


	)

4 
	~<löór_›î©‹.h
>

6 
	eKrylovSﬁvîSètus
{

7 
	mKRYLOV_CONVERGED
,

8 
	mKRYLOV_EXCEEDED_MAX_ITERATIONS
,

9 
	mKRYLOV_BREAKDOWN


16 
	sCG_Sﬁvî


18 
	mtﬁî™˚_Á˘‹
;

19 
	mmax_ôî©i⁄s
;

20 
	mªsiduÆ_n‹m
;

21 
	môî©i⁄
;

22 
KrylovSﬁvîSètus
 
	m°©us
;

23 
	m°d
::
ve˘‹
<> 
r
, 
	mz
, 
	ms
;

25 
CG_Sﬁvî
()

26 : 
tﬁî™˚_Á˘‹
(1e-9), 
max_ôî©i⁄s
(100), 
ªsiduÆ_n‹m
(0), 
ôî©i⁄
(0), 
°©us
(
KRYLOV_CONVERGED
), 
r
(0), 
z
(0), 
s
(0)

34 
KrylovSﬁvîSètus
 
sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

35 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
=0, 
boﬁ
 
u£_giví_öôül_guess
=
Ál£
);

42 
	sMINRES_CR_Sﬁvî


44 
	mtﬁî™˚_Á˘‹
;

45 
	mmax_ôî©i⁄s
;

46 
	mªsiduÆ_n‹m
;

47 
	môî©i⁄
;

48 
KrylovSﬁvîSètus
 
	m°©us
;

49 
	m°d
::
ve˘‹
<> 
r
, 
	mz
, 
	mq
, 
	ms
, 
	mt
;

51 
MINRES_CR_Sﬁvî
()

52 : 
tﬁî™˚_Á˘‹
(1e-9), 
max_ôî©i⁄s
(100), 
ªsiduÆ_n‹m
(0), 
ôî©i⁄
(0), 
°©us
(
KRYLOV_CONVERGED
), 
r
(0), 
z
(0), 
q
(0), 
s
(0), 
t
(0)

60 
KrylovSﬁvîSètus
 
sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

61 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
=0, 
boﬁ
 
u£_giví_öôül_guess
=
Ál£
);

69 
	sCGNR_Sﬁvî


71 
	mtﬁî™˚_Á˘‹
;

72 
	mmax_ôî©i⁄s
;

73 
	mªsiduÆ_n‹m
;

75 
	môî©i⁄
;

76 
KrylovSﬁvîSètus
 
	m°©us
;

77 
	m°d
::
ve˘‹
<> 
r
, 
	mz
, 
	ms
, 
	mu
;

79 
CGNR_Sﬁvî
()

80 : 
tﬁî™˚_Á˘‹
(1e-9), 
max_ôî©i⁄s
(100), 
ªsiduÆ_n‹m
(0), 
ôî©i⁄
(0), 
°©us
(
KRYLOV_CONVERGED
), 
r
(0), 
z
(0), 
s
(0), 
u
(0)

88 
KrylovSﬁvîSètus
 
sﬁve
(c⁄° 
LöórO≥øt‹
 &
A
, c⁄° *
rhs
, *
ªsu…
,

89 c⁄° 
LöórO≥øt‹
 *
¥ec⁄dôi⁄î
=0, 
boﬁ
 
u£_giví_öôül_guess
=
Ál£
);

	@common/newsparse/linear_operator.h

1 #i‚de‡
LINEAR_OPERATOR_H


2 
	#LINEAR_OPERATOR_H


	)

4 
	~<ˇs£π
>

5 
	~<io°ªam
>

6 
	~<ve˘‹
>

10 
	sLöórO≥øt‹


12 
	mm
, 
	mn
;

14 
LöórO≥øt‹
(
m_
=0Ë: 
m
(m_), 
n
(m_) {}

15 
LöórO≥øt‹
(
m_
, 
n_
Ë: 
m
(m_), 
n
(n_) {}

16 
	mvútuÆ
 ~
LöórO≥øt‹
() {}

19 
vútuÆ
 
≠∂y
(c⁄° *
x
, *
y
) const = 0;

23 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const = 0;

26 
vútuÆ
 
≠∂y_å™•o£
(c⁄° *
x
, *
y
) const = 0;

30 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const = 0;

33 
vútuÆ
 
≠∂y
(c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
) const

35 
as£π
(
x
.
size
()>=(
size_t
)
n
);

36 
	my
.
ªsize
(
m
);

37 
≠∂y
(&
x
[0], &
y
[0]);

40 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° std::ve˘‹<> &
y
, std::ve˘‹<> &
z
) const

42 
as£π
(
x
.
size
()>=(
size_t
)
n
 && 
y
.size()>=(size_t)
m
);

43 
	mz
.
ªsize
(
m
);

44 
≠∂y_™d_subåa˘
(&
x
[0], &
y
[0], &
z
[0]);

47 
vútuÆ
 
≠∂y_å™•o£
(c⁄° 
°d
::
ve˘‹
<> &
x
, std::ve˘‹<> &
y
) const

49 
as£π
(
x
.
size
()>=(
size_t
)
m
);

50 
	my
.
ªsize
(
n
);

51 
≠∂y_å™•o£
(&
x
[0], &
y
[0]);

54 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° std::ve˘‹<> &
y
, std::ve˘‹<> &
z
) const

56 
as£π
(
x
.
size
()>=(
size_t
)
m
 && 
y
.size()>=(size_t)
n
);

57 
	mz
.
ªsize
(
n
);

58 
≠∂y_å™•o£_™d_subåa˘
(&
x
[0], &
y
[0], &
z
[0]);

62 
vútuÆ
 
wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const

64 
	mouçut
<<
	mv¨übÀ_«me
<<"='unim∂emíãd LöórO≥øt‹ ouçut';"<<
	m°d
::
ídl
;

69 
	gFa˘‹edLöórO≥øt‹
: 
public
 
LöórO≥øt‹


71 
°d
::
ve˘‹
<c⁄° 
LöórO≥øt‹
*> 
Á˘‹s
;

72 
	g°d
::
ve˘‹
<
boﬁ
> 
å™•o£
;

74 
Fa˘‹edLöórO≥øt‹
(
m_
=0Ë: 
LöórO≥øt‹
(m_), 
Á˘‹s
(0), 
å™•o£
(0), 
ãmp
(0) {}

75 
Fa˘‹edLöórO≥øt‹
(c⁄° 
LöórO≥øt‹
 *
A
, 
boﬁ
 
Aå™•o£
=
Ál£
);

76 
Fa˘‹edLöórO≥øt‹
(c⁄° 
LöórO≥øt‹
 *
A
, 
boﬁ
 
Aå™•o£
, c⁄° LöórO≥øt‹ *
B
, boﬁ 
Bå™•o£
);

77 
Fa˘‹edLöórO≥øt‹
(c⁄° 
LöórO≥øt‹
 *
A
, 
boﬁ
 
Aå™•o£
, c⁄° LöórO≥øt‹ *
B
, boﬁ 
Bå™•o£
, c⁄° LöórO≥øt‹ *
C
, boﬁ 
Cå™•o£
);

78 
boﬁ
 
check_dimísi⁄s
();

79 
usög
 
	gLöórO≥øt‹
::
≠∂y
;

80 
usög
 
	gLöórO≥øt‹
::
≠∂y_™d_subåa˘
;

81 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£
;

82 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£_™d_subåa˘
;

83 
vútuÆ
 
≠∂y
(c⁄° *
x
, *
y
) const;

84 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

85 
vútuÆ
 
≠∂y_å™•o£
(c⁄° *
x
, *
y
) const;

86 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

88 
	g¥iv©e
:

89 
°d
::
ve˘‹
<> 
ãmp
;

	@common/newsparse/sparse_matrix.cpp

1 
	~<•¨£_m©rix.h
>

2 
	~<utû.h
>

6 
	gS∑r£M©rixDy«micCSR
::

7 
	$˛ór
()

9 
m
=
n
=0;

10 
row
.
	`˛ór
();

11 
	}
}

13 
	gS∑r£M©rixDy«micCSR
::

14 
	$£t_zîo
()

16 
i
=0; i<
m
; ++iË
row
[i].
	`˛ór
();

17 
	}
}

19 
	gS∑r£M©rixDy«micCSR
::

20 
	$ªsize
(
m_
, 
n_
)

22 
m
=
m_
;

23 
n
=
n_
;

24 
row
.
	`ªsize
(
m
);

25 
	}
}

27 c⁄° &
	gS∑r£M©rixDy«micCSR
::

28 
	$›î©‹
()(
i
, 
j
) const

30 
	`as£π
(
i
>=0 && i<
m
 && 
j
>=0 && j<
n
);

31 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

32 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p){

33 if(
p
->
ödex
==
j
ËÖ->
vÆue
;

34 if(
p
->
ödex
>
j
) ;

36  
zîo
;

37 
	}
}

39 &
	gS∑r£M©rixDy«micCSR
::

40 
	$›î©‹
()(
i
, 
j
)

42 
	`as£π
(
i
>=0 && i<
m
 && 
j
>=0 && j<
n
);

43 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

44 
Dy«micS∑r£Ve˘‹
::
ôî©‹
 
p
;

45 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p){

46 if(
p
->
ödex
==
j
ËÖ->
vÆue
;

47 if(
p
->
ödex
>
j
) ;

49  (
r
.
	`ö£π
(
p
, 
	`S∑r£E¡ry
(
j
, 0)))->
vÆue
;

50 
	}
}

52 
	gS∑r£M©rixDy«micCSR
::

53 
	$add_•¨£_row
(
i
, c⁄° 
Dy«micS∑r£Ve˘‹
 &
x
, 
mu…ùlõr
)

55 
	`as£π
(
i
>=0 && i<
m
);

56 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

57 
Dy«micS∑r£Ve˘‹
::
ôî©‹
 
p
=
r
.
	`begö
();

58 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
q
=
x
.
	`begö
();

59 
p
!=
r
.
	`íd
(Ë&& 
q
!=
x
.end()){

60 if(
p
->
ödex
<
q
->index) ++p;

61 if(
p
->
ödex
>
q
->index){

62 
r
.
	`ö£π
(
p
, 
	`S∑r£E¡ry
(
q
->
ödex
, 
mu…ùlõr
*q->
vÆue
));

63 ++
q
;

65 
p
->
vÆue
+=
mu…ùlõr
*
q
->value;

66 ++
p
;

67 ++
q
;

70 ; 
q
!=
x
.
	`íd
(); ++qË
r
.
	`push_back
(
	`S∑r£E¡ry
(q->
ödex
, 
mu…ùlõr
*q->
vÆue
));

71 
	}
}

73 
	gS∑r£M©rixDy«micCSR
::

74 
	$≠∂y
(c⁄° *
x
, *
y
) const

76 
	`as£π
(
x
 && 
y
);

77 
i
=0; i<
m
; ++i){

78 
d
=0;

79 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

80 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p)

81 
d
+=
p
->
vÆue
*
x
[p->
ödex
];

82 
y
[
i
]=
d
;

84 
	}
}

86 
	gS∑r£M©rixDy«micCSR
::

87 
	$≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

89 
	`as£π
(
x
 && 
y
 && 
z
);

90 
i
=0; i<
m
; ++i){

91 
d
=0;

92 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

93 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p)

94 
d
+=
p
->
vÆue
*
x
[p->
ödex
];

95 
z
[
i
]=
y
[i]-
d
;

97 
	}
}

99 
	gS∑r£M©rixDy«micCSR
::

100 
	$≠∂y_å™•o£
(c⁄° *
x
, *
y
) const

102 
	`as£π
(
x
 && 
y
);

103 
BLAS
::
	`£t_zîo
(
n
, 
y
);

104 
i
=0; i<
m
; ++i){

105 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

106 
xi
=
x
[
i
];

107 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p)

108 
y
[
p
->
ödex
]+ı->
vÆue
*
xi
;

110 
	}
}

112 
	gS∑r£M©rixDy«micCSR
::

113 
	$≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

115 
	`as£π
(
x
 && 
y
 && 
z
);

116 if(
y
!=
z
Ë
BLAS
::
	`c›y
(
n
, y, z);

117 
i
=0; i<
m
; ++i){

118 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
row
[
i
];

119 
xi
=
x
[
i
];

120 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p)

121 
z
[
p
->
ödex
]-ı->
vÆue
*
xi
;

123 
	}
}

125 
	gS∑r£M©rixDy«micCSR
::

126 
	$wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const

128 
ouçut
<<
v¨übÀ_«me
<<"=sparse([";

129 
i
=0; i<
m
; ++iË
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
row
[i].
	`begö
();Ö!Ùow[i].
	`íd
(); ++p)

130 
ouçut
<<
i
+1<<" ";

131 
ouçut
<<"],...\n [";

132 
i
=0; i<
m
; ++iË
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
row
[i].
	`begö
();Ö!Ùow[i].
	`íd
(); ++p)

133 
ouçut
<<
p
->
ödex
+1<<" ";

134 
ouçut
<<"],...\n [";

135 
i
=0; i<
m
; ++iË
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
row
[i].
	`begö
();Ö!Ùow[i].
	`íd
(); ++p)

136 
ouçut
<<
p
->
vÆue
<<" ";

137 
ouçut
<<"], "<<
m
<<", "<<
n
<<");"<<
°d
::
ídl
;

138 
	}
}

142 
	gS∑r£M©rixSèticCSR
::

143 
	$S∑r£M©rixSèticCSR
(c⁄° 
S∑r£M©rixDy«micCSR
 &
m©rix
)

144 : 
	`LöórO≥øt‹
(
m©rix
.
m
, m©rix.
n
), 
	`row°¨t
(matrix.m+1, 0),

145 
	`cﬁödex
(0), 
	$vÆue
(0)

147 
±rdiff_t
 
¬z
=0;

148 
i
=0; i<
m
; ++i){

149 
¬z
+=
m©rix
.
row
[
i
].
	`size
();

150 
row°¨t
[
i
+1]=
°©ic_ˇ°
<>(
¬z
);

152 
cﬁödex
.
	`ªsize
(
¬z
);

153 
vÆue
.
	`ªsize
(
¬z
);

154 
i
=0, 
k
=0; i<
m
; ++i){

155 c⁄° 
Dy«micS∑r£Ve˘‹
 &
r
=
m©rix
.
row
[
i
];

156 
Dy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
	`begö
();Ö!Ù.
	`íd
(); ++p){

157 
cﬁödex
[
k
]=
p
->
ödex
;

158 
vÆue
[
k
]=
p
->value;

159 ++
k
;

162 
	}
}

164 
	gS∑r£M©rixSèticCSR
::

165 
	$˛ór
()

167 
m
=
n
=0;

168 
row°¨t
.
	`˛ór
();

169 
row°¨t
.
	`push_back
(0);

170 
cﬁödex
.
	`˛ór
();

171 
vÆue
.
	`˛ór
();

172 
	}
}

174 
	gS∑r£M©rixSèticCSR
::

175 
	$£t_zîo
()

177 
°d
::
	`mem£t
(&
row°¨t
[0], 0, (
m
+1)*());

178 
cﬁödex
.
	`ªsize
(0);

179 
vÆue
.
	`ªsize
(0);

180 
	}
}

182 
	gS∑r£M©rixSèticCSR
::

183 
	$ªsize
(
m_
, 
n_
)

185 
	`as£π
(
m_
>=0 && 
n_
>=0);

186 
n
=
n_
;

187 if(
m_
>
m
){

188 
m
=
m_
;

189 
row°¨t
.
	`ªsize
(
m
+1,row°¨t.
	`back
());

190 }if(
m_
<
m
){

191 
m
=
m_
;

192 
row°¨t
.
	`ªsize
(
m
+1);

193 
cﬁödex
.
	`ªsize
(
row°¨t
.
	`back
());

194 
vÆue
.
	`ªsize
(
row°¨t
.
	`back
());

196 
	}
}

198 
	gS∑r£M©rixSèticCSR
::

199 
	$›î©‹
()(
i
, 
j
) const

201 
	`as£π
(
i
>=0 && i<
m
 && 
j
>=0 && j<
n
);

203 
k
=
row°¨t
[
i
]; k<rowstart[k+1]; ++k){

204 if(
cﬁödex
[
k
]==
j
Ë 
vÆue
[k];

205 if(
cﬁödex
[
k
]>
j
) ;

208 
	}
}

210 
	gS∑r£M©rixSèticCSR
::

211 
	$≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

213 
	`as£π
(
x
 && 
y
 && 
z
);

214 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i){

215 
d
=0;

216 ; 
k
<
row°¨t
[
i
+1]; ++kË
d
+=
vÆue
[k]*
x
[
cﬁödex
[k]];

217 
z
[
i
]=
y
[i]-
d
;

219 
	}
}

222 
	gS∑r£M©rixSèticCSR
::

223 
	$≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const

225 
	`as£π
(
x
 && 
y
 && 
z
);

226 if(
y
!=
z
Ë
BLAS
::
	`c›y
(
n
, y, z);

227 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i){

228 
xi
=
x
[
i
];

229 ; 
k
<
row°¨t
[
i
+1]; ++kË
z
[
cﬁödex
[k]]-=
vÆue
[k]*
xi
;

231 
	}
}

233 
	gS∑r£M©rixSèticCSR
::

234 
	$wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const

236 
ouçut
<<
v¨übÀ_«me
<<"=sparse([";

237 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i) ; k<rowstart[i+1]; ++k)

238 
ouçut
<<
i
+1<<" ";

239 
ouçut
<<"],...\n [";

240 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i) ; k<rowstart[i+1]; ++k)

241 
ouçut
<<
cﬁödex
[
k
]+1<<" ";

242 
ouçut
<<"],...\n [";

243 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i) ; k<rowstart[i+1]; ++k)

244 
ouçut
<<
vÆue
[
k
]<<" ";

245 
ouçut
<<"], "<<
m
<<", "<<
n
<<");"<<
°d
::
ídl
;

246 
	}
}

	@common/newsparse/sparse_matrix.h

1 #i‚de‡
SPARSE_MATRIX_H


2 
	#SPARSE_MATRIX_H


	)

7 
	~<bœs_wøµî.h
>

8 
	~<löór_›î©‹.h
>

9 
	~<li°
>

13 
	sS∑r£E¡ry


15 
	mödex
;

16 
	mvÆue
;

18 
S∑r£E¡ry
(Ë: 
ödex
(~0), 
vÆue
(1e+30) {}

19 
S∑r£E¡ry
(
ödex_
, 
vÆue_
Ë: 
ödex
(ödex_), 
vÆue
(value_) {}

20 
boﬁ
 
	m›î©‹
<(c⁄° 
	mS∑r£E¡ry
 &
	me
Ëc⁄° {  
	mödex
<e.index; }

23 
	g°d
::
	tli°
<
	tS∑r£E¡ry
> 
	tDy«micS∑r£Ve˘‹
;

30 
	gS∑r£M©rixDy«micCSR
: 
public
 
LöórO≥øt‹


32 
°d
::
ve˘‹
<
Dy«micS∑r£Ve˘‹
> 
row
;

33 c⁄° 
	gzîo
;

35 
S∑r£M©rixDy«micCSR
(
m_
=0Ë: 
LöórO≥øt‹
(m_), 
row
(m_), 
zîo
(0) {}

36 
S∑r£M©rixDy«micCSR
(
m_
, 
n_
Ë: 
LöórO≥øt‹
(m_,Ç_), 
row
(m_), 
zîo
(0) {}

37 
˛ór
();

38 
£t_zîo
();

39 
ªsize
(
m_
, 
n_
);

40 c⁄° &
›î©‹
()(
	gi
, 
	gj
) const;

41 &
›î©‹
()(
	gi
, 
	gj
);

42 
add_•¨£_row
(
i
, c⁄° 
Dy«micS∑r£Ve˘‹
 &
x
, 
mu…ùlõr
=1);

43 
usög
 
	gLöórO≥øt‹
::
≠∂y
;

44 
usög
 
	gLöórO≥øt‹
::
≠∂y_™d_subåa˘
;

45 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£
;

46 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£_™d_subåa˘
;

47 
vútuÆ
 
≠∂y
(c⁄° *
x
, *
y
) const;

48 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

49 
vútuÆ
 
≠∂y_å™•o£
(c⁄° *
x
, *
y
) const;

50 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

51 
vútuÆ
 
wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const;

56 
	gS∑r£M©rixSèticCSR
: 
public
 
LöórO≥øt‹


58 
°d
::
ve˘‹
<> 
row°¨t
;

59 
	g°d
::
ve˘‹
<> 
cﬁödex
;

60 
	g°d
::
ve˘‹
<> 
vÆue
;

62 
S∑r£M©rixSèticCSR
(
m_
=0Ë: 
LöórO≥øt‹
(m_), 
row°¨t
(m_+1, 0), 
cﬁödex
(0), 
vÆue
(0) {}

63 
S∑r£M©rixSèticCSR
(
m_
, 
n_
Ë: 
LöórO≥øt‹
(m_,Ç_), 
row°¨t
(m_+1, 0), 
cﬁödex
(0), 
vÆue
(0) {}

64 
S∑r£M©rixSèticCSR
(c⁄° 
S∑r£M©rixDy«micCSR
 &
m©rix
);

65 
˛ór
();

66 
£t_zîo
();

67 
ªsize
(
m_
, 
n_
);

68 
›î©‹
()(
	gi
, 
	gj
) const;

69 
usög
 
	gLöórO≥øt‹
::
≠∂y
;

70 
usög
 
	gLöórO≥øt‹
::
≠∂y_™d_subåa˘
;

71 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£
;

72 
usög
 
	gLöórO≥øt‹
::
≠∂y_å™•o£_™d_subåa˘
;

73 
vútuÆ
 
≠∂y
(c⁄° *
x
, *
y
) const;

74 
vútuÆ
 
≠∂y_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

75 
vútuÆ
 
≠∂y_å™•o£
(c⁄° *
x
, *
y
) const;

76 
vútuÆ
 
≠∂y_å™•o£_™d_subåa˘
(c⁄° *
x
, c⁄° *
y
, *
z
) const;

77 
vútuÆ
 
wrôe_m©œb
(
°d
::
o°ªam
 &
ouçut
, c⁄° *
v¨übÀ_«me
) const;

80 
ölöe
 
	gS∑r£M©rixSèticCSR
::

81 
	$≠∂y
(c⁄° *
x
, *
y
) const

83 
	`as£π
(
x
 && 
y
);

84 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i){

85 
d
=0;

86 ; 
k
<
row°¨t
[
i
+1]; ++kË
d
+=
vÆue
[k]*
x
[
cﬁödex
[k]];

87 
y
[
i
]=
d
;

89 
	}
}

91 
ölöe
 
	gS∑r£M©rixSèticCSR
::

92 
	$≠∂y_å™•o£
(c⁄° *
x
, *
y
) const

94 
	`as£π
(
x
 && 
y
);

95 
BLAS
::
	`£t_zîo
(
n
, 
y
);

96 
i
=0, 
k
=
row°¨t
[0]; i<
m
; ++i){

97 
xi
=
x
[
i
];

98 ; 
k
<
row°¨t
[
i
+1]; ++kË
y
[
cﬁödex
[k]]+=
vÆue
[k]*
xi
;

100 
	}
}

	@common/root_parity_ccd_wrapper.cpp

12 
	~<ccd_defs.h
>

15 #ifde‡
USE_ROOT_PARITY_CCD


17 
	~<ccd_wøµî.h
>

18 
	~<cﬁlisi⁄quîõs.h
>

19 
	~<roŸ∑rôycﬁlisi⁄ã°.h
>

20 
	~<tuniˇã.h
>

22 
	g«me•a˚


26 c⁄° 
	gg_degí_n‹mÆ_ïsû⁄
 = 1e-6;

32 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

33 &
s1
, &
s2
, &
s3
,

34 
Vec3d
& 
n‹mÆ
 );

36 
gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ_no_time
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

37 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

38 &
s1
, &
s2
, &
s3
, 
Vec3d
& 
n‹mÆ
 );

40 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

41 
s0
, 
s2
, 
Vec3d
& 
n‹mÆ
 );

43 
gë_edge_edge_cﬁlisi⁄_n‹mÆ_no_time
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

44 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

45 &
s0
, &
s2
, 
Vec3d
& 
n‹mÆ
 );

52 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

53 &
s1
, &
s2
, &
s3
,

54 
Vec3d
& 
n‹mÆ
 )

57 
	gn‹mÆ
=
¸oss
(
x2
-
x1
, 
x3
-x1);

58 
	gm
=
mag
(
n‹mÆ
);

59 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
))

61 
	gn‹mÆ
/=
m
;

67 
	gn‹mÆ
=(
s1
*
x1
+
s2
*
x2
+
s3
*
x3
)-
x0
;

68 
	gm
=
mag
(
n‹mÆ
);

69 if(
	gm
>
	gg_degí_n‹mÆ_ïsû⁄
)

71 
	gn‹mÆ
/=
m
;

76 
Vec3d
 
	gdx
=
x2
-
x1
;

77 if(
	gdx
[0]!=0 || 
dx
[1]!=0)

79 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

80 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

84 
	gdx
=
x3
-
x1
;

85 if(
	gdx
[0]!=0 || 
dx
[1]!=0)

87 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

88 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

92 
	gn‹mÆ
=
Vec3d
(0, 1, 0);

100 
gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ_no_time
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

101 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

102 &
s1
, &
s2
, &
s3
, 
Vec3d
& 
n‹mÆ
 )

105 
	gdi°™˚
;

107 
Vec3d
 
	gx0_hÆf
 = 0.5 * ( 
x0
 + 
x√w0
 );

108 
Vec3d
 
	gx1_hÆf
 = 0.5 * ( 
x1
 + 
x√w1
 );

109 
Vec3d
 
	gx2_hÆf
 = 0.5 * ( 
x2
 + 
x√w2
 );

110 
Vec3d
 
	gx3_hÆf
 = 0.5 * ( 
x3
 + 
x√w3
 );

111 
check_poöt_åüngÀ_¥oximôy
(
x0_hÆf
, 
x1_hÆf
, 
x2_hÆf
, 
x3_hÆf
, 
di°™˚
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
);

113 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
)

116 
check_poöt_åüngÀ_¥oximôy
(
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
di°™˚
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
);

118 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
)

121 
degíî©e_gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ
–
x0
, 
x1
, 
x2
, 
x3
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
 );

125 
as£π
–
mag
(
n‹mÆ
) > 0.0 );

128 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

129 
s0
, 
s2
, 
Vec3d
& 
n‹mÆ
 )

132 
	gn‹mÆ
=
¸oss
(
x1
-
x0
, 
x3
-
x2
);

133 
	gm
=
mag
(
n‹mÆ
);

134 if(
	gm
>
sqr
(
g_degí_n‹mÆ_ïsû⁄
)){

135 
	gn‹mÆ
/=
m
;

138 
	gn‹mÆ
=(
s2
*
x2
+(1-s2)*
x3
)-(
s0
*
x0
+(1-s0)*
x1
);

139 
	gm
=
mag
(
n‹mÆ
);

140 if(
	gm
>
	gg_degí_n‹mÆ_ïsû⁄
){

141 
	gn‹mÆ
/=
m
;

144 
Vec3d
 
	gdx
=
x1
-
x0
;

145 if(
	gdx
[0]!=0 || 
dx
[1]!=0){

146 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

147 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

149 
	gdx
=
x3
-
x2
;

150 if(
	gdx
[0]!=0 || 
dx
[1]!=0){

151 
n‹mÆ
=
Vec3d
(
dx
[1], -dx[0], 0);

152 
	gn‹mÆ
/=
mag
(
n‹mÆ
);

154 
	gn‹mÆ
=
Vec3d
(0, 1, 0);

161 
gë_edge_edge_cﬁlisi⁄_n‹mÆ_no_time
(c⁄° 
Vec3d
 &
x0
, c⁄° Vec3d &
x1
, c⁄° Vec3d &
x2
, c⁄° Vec3d &
x3
,

162 c⁄° 
Vec3d
 &
x√w0
, c⁄° Vec3d &
x√w1
, c⁄° Vec3d &
x√w2
, c⁄° Vec3d &
x√w3
,

163 &
s0
, &
s2
, 
Vec3d
& 
n‹mÆ
 )

166 
	gdi°™˚
;

168 
Vec3d
 
	gx0_hÆf
 = 0.5 * ( 
x0
 + 
x√w0
 );

169 
Vec3d
 
	gx1_hÆf
 = 0.5 * ( 
x1
 + 
x√w1
 );

170 
Vec3d
 
	gx2_hÆf
 = 0.5 * ( 
x2
 + 
x√w2
 );

171 
Vec3d
 
	gx3_hÆf
 = 0.5 * ( 
x3
 + 
x√w3
 );

172 
check_edge_edge_¥oximôy
(
x0_hÆf
, 
x1_hÆf
, 
x2_hÆf
, 
x3_hÆf
, 
di°™˚
, 
s0
, 
s2
, 
n‹mÆ
);

174 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
)

177 
check_edge_edge_¥oximôy
(
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
di°™˚
, 
s0
, 
s2
, 
n‹mÆ
);

179 if(
	gdi°™˚
<1e-2*
	gg_degí_n‹mÆ_ïsû⁄
)

182 
degíî©e_gë_edge_edge_cﬁlisi⁄_n‹mÆ
–
x0
, 
x1
, 
x2
, 
x3
, 
s0
, 
s2
, 
n‹mÆ
 );

186 
as£π
–
mag
(
n‹mÆ
) > 0.0 );

229 
boﬁ
 
	$£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 ,

230 c⁄° 
Vec2d
& 
x1
, 
size_t
 ,

231 c⁄° 
Vec2d
& 
x2
, 
size_t
 ,

232 c⁄° 
Vec2d
& 
x3
, 
size_t
 )

234 
b¨y
[4];

235  
	`sim∂ex_öãr£˘i⁄2d
–2, 
x0
.
v
, 
x1
.v, 
x2
.v, 
x3
.v, &
b¨y
[0], &bary[1], &bary[2], &bary[3] );

236 
	}
}

239 
boﬁ
 
	$£gmít_£gmít_öãr£˘i⁄
(c⁄° 
Vec2d
& 
x0
, 
size_t
 ,

240 c⁄° 
Vec2d
& 
x1
, 
size_t
 ,

241 c⁄° 
Vec2d
& 
x2
, 
size_t
 ,

242 c⁄° 
Vec2d
& 
x3
, 
size_t
 ,

243 &
s0
, & 
s2
 )

245 
s1
, 
s3
;

246  
	`sim∂ex_öãr£˘i⁄2d
–2, 
x0
.
v
, 
x1
.v, 
x2
.v, 
x3
.v, &
s0
, &
s1
, &
s2
, &
s3
 );

247 
	}
}

255 
boﬁ
 
	$poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

256 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

257 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

258 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 )

260 
roŸ∑rôy
::
RoŸP¨ôyCﬁlisi⁄Te°
 
	`ã°
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
Ál£
 );

261 
boﬁ
 
øyhex_ªsu…
 = 
ã°
.
	`run_ã°
();

262  
øyhex_ªsu…
;

263 
	}
}

266 
boﬁ
 
	$poöt_åüngÀ_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

267 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

268 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

269 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 ,

270 & 
b¨y1
, & 
b¨y2
, & 
b¨y3
,

271 
Vec3d
& 
n‹mÆ
,

272 & 
ªœtive_n‹mÆ_di•œ˚mít
 )

275 
roŸ∑rôy
::
RoŸP¨ôyCﬁlisi⁄Te°
 
	`ã°
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
Ál£
 );

276 
boﬁ
 
øyhex_ªsu…
 = 
ã°
.
	`run_ã°
();

278 i‡–
øyhex_ªsu…
 )

280 
	`gë_poöt_åüngÀ_cﬁlisi⁄_n‹mÆ_no_time
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
b¨y1
, 
b¨y2
, 
b¨y3
, 
n‹mÆ
 );

282 
Vec3d
 
dx0
 = 
x√w0
 - 
x0
;

283 
Vec3d
 
dx1
 = 
x√w1
 - 
x1
;

284 
Vec3d
 
dx2
 = 
x√w2
 - 
x2
;

285 
Vec3d
 
dx3
 = 
x√w3
 - 
x3
;

286 
ªœtive_n‹mÆ_di•œ˚mít
 = 
	`dŸ
–
n‹mÆ
, 
dx0
 - 
b¨y1
*
dx1
 - 
b¨y2
*
dx2
 - 
b¨y3
*
dx3
 );

289  
øyhex_ªsu…
;

291 
	}
}

294 
boﬁ
 
	$£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

295 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

296 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

297 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 )

300 
roŸ∑rôy
::
RoŸP¨ôyCﬁlisi⁄Te°
 
	`ã°
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
åue
 );

301 
boﬁ
 
øyhex_ªsu…
 = 
ã°
.
	`run_ã°
();

302  
øyhex_ªsu…
;

303 
	}
}

306 
boﬁ
 
	$£gmít_£gmít_cﬁlisi⁄
(c⁄° 
Vec3d
& 
x0
, c⁄° Vec3d& 
x√w0
, 
size_t
 ,

307 c⁄° 
Vec3d
& 
x1
, c⁄° Vec3d& 
x√w1
, 
size_t
 ,

308 c⁄° 
Vec3d
& 
x2
, c⁄° Vec3d& 
x√w2
, 
size_t
 ,

309 c⁄° 
Vec3d
& 
x3
, c⁄° Vec3d& 
x√w3
, 
size_t
 ,

310 & 
b¨y0
, & 
b¨y2
,

311 
Vec3d
& 
n‹mÆ
,

312 & 
ªœtive_n‹mÆ_di•œ˚mít
 )

314 
roŸ∑rôy
::
RoŸP¨ôyCﬁlisi⁄Te°
 
	`ã°
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
åue
 );

315 
boﬁ
 
øyhex_ªsu…
 = 
ã°
.
	`edge_edge_cﬁlisi⁄
();

317 i‡–
øyhex_ªsu…
 )

319 
	`gë_edge_edge_cﬁlisi⁄_n‹mÆ_no_time
–
x0
, 
x1
, 
x2
, 
x3
, 
x√w0
, 
x√w1
, 
x√w2
, 
x√w3
, 
b¨y0
, 
b¨y2
, 
n‹mÆ
 );

321 
Vec3d
 
dx0
 = 
x√w0
 - 
x0
;

322 
Vec3d
 
dx1
 = 
x√w1
 - 
x1
;

323 
Vec3d
 
dx2
 = 
x√w2
 - 
x2
;

324 
Vec3d
 
dx3
 = 
x√w3
 - 
x3
;

326 
ªœtive_n‹mÆ_di•œ˚mít
 = 
	`dŸ
–
n‹mÆ
, 
b¨y0
*
dx0
 + (1.0-b¨y0)*
dx1
 - 
b¨y2
*
dx2
 - (1.0-b¨y2)*
dx3
 );

329  
øyhex_ªsu…
;

330 
	}
}

338 
boﬁ
 
	$£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

339 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

340 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

341 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

342 c⁄° 
Vec3d
& 
x4
, 
size_t
 ,

343 
boﬁ
 ,

344 
boﬁ
 )

346 
b¨y
[5];

347  
	`sim∂ex_öãr£˘i⁄3d
–2, 
x0
.
v
, 
x1
.v, 
x2
.v, 
x3
.v, 
x4
.v, &
b¨y
[0], &bary[1], &bary[2], &bary[3], &bary[4] );

348 
	}
}

350 
boﬁ
 
	$£gmít_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

351 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

352 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

353 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

354 c⁄° 
Vec3d
& 
x4
, 
size_t
 ,

355 & 
b¨y0
, & 
b¨y1
, & 
b¨y2
, & 
b¨y3
, & 
b¨y4
,

356 
boﬁ
 ,

357 
boﬁ
 )

359  
	`sim∂ex_öãr£˘i⁄3d
–2, 
x0
.
v
, 
x1
.v, 
x2
.v, 
x3
.v, 
x4
.v, &
b¨y0
, &
b¨y1
, &
b¨y2
, &
b¨y3
, &
b¨y4
 );

360 
	}
}

363 
boﬁ
 
	$poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3d
& 
x0
, 
size_t
 ,

364 c⁄° 
Vec3d
& 
x1
, 
size_t
 ,

365 c⁄° 
Vec3d
& 
x2
, 
size_t
 ,

366 c⁄° 
Vec3d
& 
x3
, 
size_t
 ,

367 c⁄° 
Vec3d
& 
x4
, 
size_t
 )

369 
b¨y
[5];

370  
	`sim∂ex_öãr£˘i⁄3d
–1, 
x0
.
v
, 
x1
.v, 
x2
.v, 
x3
.v, 
x4
.v, &
b¨y
[0], &bary[1], &bary[2], &bary[3], &bary[4] );

371 
	}
}

	@common/runstats.cpp

9 
	~<run°©s.h
>

11 
	~<comm⁄›ti⁄s.h
>

12 
	~<f°ªam
>

16 
	gRunSèts
::
	$£t_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 )

18 
öt_°©s
[
«me
] = 
vÆue
;

19 
	}
}

21 
	gRunSèts
::
	$add_to_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
ö¸emít
 )

23 
öt64_t
 
vÆue
 = 0;

24 
boﬁ
 
exi°s
 = 
	`gë_öt
–
«me
, 
vÆue
 );

25 i‡–!
exi°s
 )

27 
vÆue
 = 0;

29 
vÆue
 +
ö¸emít
;

30 
	`£t_öt
–
«me
, 
vÆue
 );

31 
	}
}

33 
öt64_t
 
	gRunSèts
::
	$gë_öt
–
°d
::
°rög
 
«me
 )

35 
°d
::
m≠
<°d::
°rög
, 
öt64_t
>::
ôî©‹
 
ôî
 = 
öt_°©s
.
	`föd
–
«me
 );

36 i‡–
ôî
 =
öt_°©s
.
	`íd
() ) {  ~0; }

37  
ôî
->
£c⁄d
;

38 
	}
}

40 
boﬁ
 
	gRunSèts
::
	$gë_öt
–
°d
::
°rög
 
«me
, 
öt64_t
& 
vÆue
 )

42 
°d
::
m≠
<°d::
°rög
, 
öt64_t
>::
ôî©‹
 
ôî
 = 
öt_°©s
.
	`föd
–
«me
 );

43 i‡–
ôî
 =
öt_°©s
.
	`íd
() )

45  
Ál£
;

47 
vÆue
 = 
ôî
->
£c⁄d
;

48  
åue
;

49 
	}
}

51 
	gRunSèts
::
	$upd©e_mö_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 )

53 
öt64_t
 
cuºít_mö
;

54 
boﬁ
 
exi°s
 = 
	`gë_öt
–
«me
, 
cuºít_mö
 );

55 i‡–!
exi°s
 ) { 
cuºít_mö
 = 
vÆue
; }

56 
öt_°©s
[
«me
] = 
°d
::
	`mö
–
vÆue
, 
cuºít_mö
 );

57 
	}
}

59 
	gRunSèts
::
	$upd©e_max_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 )

61 
öt64_t
 
cuºít_max
;

62 
boﬁ
 
exi°s
 = 
	`gë_öt
–
«me
, 
cuºít_max
 );

63 i‡–!
exi°s
 ) { 
cuºít_max
 = 
vÆue
; }

64 
öt_°©s
[
«me
] = 
°d
::
	`max
–
vÆue
, 
cuºít_max
 );

65 
	}
}

69 
	gRunSèts
::
	$£t_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 )

71 
doubÀ_°©s
[
«me
] = 
vÆue
;

72 
	}
}

74 
	gRunSèts
::
	$add_to_doubÀ
–
°d
::
°rög
 
«me
, 
ö¸emít
 )

76 
vÆue
 = 0;

77 
boﬁ
 
exi°s
 = 
	`gë_doubÀ
–
«me
, 
vÆue
 );

78 i‡–!
exi°s
 )

80 
vÆue
 = 0;

82 
vÆue
 +
ö¸emít
;

83 
	`£t_doubÀ
–
«me
, 
vÆue
 );

84 
	}
}

86 
	gRunSèts
::
	$gë_doubÀ
–
°d
::
°rög
 
«me
 )

88 
°d
::
m≠
<°d::
°rög
, >::
ôî©‹
 
ôî
 = 
doubÀ_°©s
.
	`föd
–
«me
 );

89 i‡–
ôî
 =
doubÀ_°©s
.
	`íd
(ËË{  
UNINITIALIZED_DOUBLE
; }

90  
ôî
->
£c⁄d
;

91 
	}
}

93 
boﬁ
 
	gRunSèts
::
	$gë_doubÀ
–
°d
::
°rög
 
«me
, & 
vÆue
 )

95 
°d
::
m≠
<°d::
°rög
, >::
ôî©‹
 
ôî
 = 
doubÀ_°©s
.
	`föd
–
«me
 );

96 i‡–
ôî
 =
doubÀ_°©s
.
	`íd
() )

98  
Ál£
;

100 
vÆue
 = 
ôî
->
£c⁄d
;

101  
åue
;

102 
	}
}

104 
	gRunSèts
::
	$upd©e_mö_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 )

106 
cuºít_mö
;

107 
boﬁ
 
exi°s
 = 
	`gë_doubÀ
–
«me
, 
cuºít_mö
 );

108 i‡–!
exi°s
 ) { 
cuºít_mö
 = 
vÆue
; }

109 
doubÀ_°©s
[
«me
] = 
°d
::
	`mö
–
vÆue
, 
cuºít_mö
 );

110 
	}
}

112 
	gRunSèts
::
	$upd©e_max_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 )

114 
cuºít_max
;

115 
boﬁ
 
exi°s
 = 
	`gë_doubÀ
–
«me
, 
cuºít_max
 );

116 i‡–!
exi°s
 ) { 
cuºít_max
 = 
vÆue
; }

117 
doubÀ_°©s
[
«me
] = 
°d
::
	`max
–
vÆue
, 
cuºít_max
 );

118 
	}
}

122 
	gRunSèts
::
	$add_≥r_‰ame_öt
–
°d
::
°rög
 
«me
, 
‰ame
, 
öt64_t
 
vÆue
 )

124 
°d
::
ve˘‹
<
PîFømeI¡
>& 
£quí˚
 = 
≥r_‰ame_öt_°©s
[
«me
];

125 
£quí˚
.
	`push_back
–
	`PîFømeI¡
(
‰ame
,
vÆue
) );

126 
	}
}

128 
boﬁ
 
	gRunSèts
::
gë_≥r_‰ame_öts
–
°d
::
°rög
 
«me
, std::
ve˘‹
<
PîFømeI¡
>& 
£quí˚
 )

130 
°d
::
m≠
<°d::
°rög
, 
	g°d
::
ve˘‹
<
PîFømeI¡
> >::
ôî©‹
 
ôî
 = 
≥r_‰ame_öt_°©s
.
föd
–
«me
 );

131 i‡–
	gôî
 =
≥r_‰ame_öt_°©s
.
íd
() )

133  
Ál£
;

135 
	g£quí˚
 = 
ôî
->
£c⁄d
;

136  
	gåue
;

141 
	gRunSèts
::
	$add_≥r_‰ame_doubÀ
–
°d
::
°rög
 
«me
, 
‰ame
, 
vÆue
 )

143 
°d
::
ve˘‹
<
PîFømeDoubÀ
>& 
£quí˚
 = 
≥r_‰ame_doubÀ_°©s
[
«me
];

144 
£quí˚
.
	`push_back
–
	`PîFømeDoubÀ
(
‰ame
,
vÆue
) );

145 
	}
}

147 
boﬁ
 
	gRunSèts
::
gë_≥r_‰ame_doubÀs
–
°d
::
°rög
 
«me
, std::
ve˘‹
<
PîFømeDoubÀ
>& 
£quí˚
 )

149 
°d
::
m≠
<°d::
°rög
, 
	g°d
::
ve˘‹
<
PîFømeDoubÀ
> >::
ôî©‹
 
ôî
 = 
≥r_‰ame_doubÀ_°©s
.
föd
–
«me
 );

150 i‡–
	gôî
 =
≥r_‰ame_doubÀ_°©s
.
íd
() )

152  
Ál£
;

154 
	g£quí˚
 = 
ôî
->
£c⁄d
;

155  
	gåue
;

160 
	gRunSèts
::
	$wrôe_to_fûe
–c⁄° * 
fûíame
 )

162 
°d
::
of°ªam
 
	`fûe
–
fûíame
 );

165 i‡–!
öt_°©s
.
	`em±y
() )

167 
fûe
 << "öt_°©s: " << 
°d
::
ídl
 << "----------" << std::endl;

168 
°d
::
m≠
<°d::
°rög
, 
öt64_t
>::
ôî©‹
 
öt_ôî©‹
 = 
öt_°©s
.
	`begö
();

169  ; 
öt_ôî©‹
 !
öt_°©s
.
	`íd
(); ++int_iterator )

171 
fûe
 << 
öt_ôî©‹
->
fú°
 << ": " << i¡_ôî©‹->
£c⁄d
 << 
°d
::
ídl
;

173 
fûe
 << 
°d
::
ídl
;

178 i‡–!
doubÀ_°©s
.
	`em±y
() )

180 
fûe
 << "doubÀ_°©s: " << 
°d
::
ídl
 << "----------" << std::endl;

181 
°d
::
m≠
<°d::
°rög
, >::
ôî©‹
 
doubÀ_ôî©‹
 = 
doubÀ_°©s
.
	`begö
();

182  ; 
doubÀ_ôî©‹
 !
doubÀ_°©s
.
	`íd
(); ++double_iterator )

184 
fûe
 << 
doubÀ_ôî©‹
->
fú°
 << ": " << doubÀ_ôî©‹->
£c⁄d
 << 
°d
::
ídl
;

186 
fûe
 << 
°d
::
ídl
;

191 i‡–!
≥r_‰ame_öt_°©s
.
	`em±y
() )

193 
fûe
 << "≥r_‰ame_öt_°©s: " << 
°d
::
ídl
 << "----------" << std::endl;

194 
°d
::
m≠
<°d::
°rög
, std::
ve˘‹
<
PîFømeI¡
> >::
ôî©‹
 
pfi_ôî
 = 
≥r_‰ame_öt_°©s
.
	`begö
();

195  ; 
pfi_ôî
 !
≥r_‰ame_öt_°©s
.
	`íd
(); ++pfi_iter )

197 
fûe
 << 
pfi_ôî
->
fú°
 << ": " << 
°d
::
ídl
;

198 
°d
::
ve˘‹
<
PîFømeI¡
>& 
£quí˚
 = 
pfi_ôî
->
£c⁄d
;

199  
i
 = 0; i < 
£quí˚
.
	`size
(); ++i )

201 
fûe
 << 
£quí˚
[
i
].
fú°
 << " " << sequí˚[i].
£c⁄d
 << 
°d
::
ídl
;

204 
fûe
 << 
°d
::
ídl
;

209 i‡–!
≥r_‰ame_doubÀ_°©s
.
	`em±y
() )

211 
fûe
 << "≥r_‰ame_doubÀ_°©s: " << 
°d
::
ídl
 << "----------" << std::endl;

212 
°d
::
m≠
<°d::
°rög
, std::
ve˘‹
<
PîFømeDoubÀ
> >::
ôî©‹
 
pfd_ôî
 = 
≥r_‰ame_doubÀ_°©s
.
	`begö
();

213  ; 
pfd_ôî
 !
≥r_‰ame_doubÀ_°©s
.
	`íd
(); ++pfd_iter )

215 
fûe
 << 
pfd_ôî
->
fú°
 << ": " << 
°d
::
ídl
;

216 
°d
::
ve˘‹
<
PîFømeDoubÀ
>& 
£quí˚
 = 
pfd_ôî
->
£c⁄d
;

217  
i
 = 0; i < 
£quí˚
.
	`size
(); ++i )

219 
fûe
 << 
£quí˚
[
i
].
fú°
 << " " << sequí˚[i].
£c⁄d
 << 
°d
::
ídl
;

222 
fûe
 << 
°d
::
ídl
;

225 
	}
}

229 
	gRunSèts
::
	$˛ór
()

231 
öt_°©s
.
	`˛ór
();

232 
doubÀ_°©s
.
	`˛ór
();

233 
≥r_‰ame_öt_°©s
.
	`˛ór
();

234 
≥r_‰ame_doubÀ_°©s
.
	`˛ór
();

235 
	}
}

	@common/runstats.h

11 #i‚de‡
RUNSTATS_H


12 
	#RUNSTATS_H


	)

14 
	~<°döt.h
>

15 
	~<m≠
>

16 
	~<°rög
>

17 
	~<ve˘‹
>

19 ˛as†
	cRunSèts


22 
	mpublic
:

24 
	$RunSèts
() :

25 
	`öt_°©s
(),

26 
	`doubÀ_°©s
(),

27 
	`≥r_‰ame_öt_°©s
(),

28 
	$≥r_‰ame_doubÀ_°©s
()

32 
°d
::
	t∑ú
<, 
	töt64_t
> 
	tPîFømeI¡
;

33 
°d
::
	t∑ú
<, > 
	tPîFømeDoubÀ
;

35 
	`£t_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 );

36 
	`add_to_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
ö¸emít
 );

37 
öt64_t
 
	`gë_öt
–
°d
::
°rög
 
«me
 );

38 
boﬁ
 
	`gë_öt
–
°d
::
°rög
 
«me
, 
öt64_t
& 
vÆue
 );

39 
	`upd©e_mö_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 );

40 
	`upd©e_max_öt
–
°d
::
°rög
 
«me
, 
öt64_t
 
vÆue
 );

42 
	`£t_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 );

43 
	`add_to_doubÀ
–
°d
::
°rög
 
«me
, 
ö¸emít
 );

44 
	`gë_doubÀ
–
°d
::
°rög
 
«me
 );

45 
boﬁ
 
	`gë_doubÀ
–
°d
::
°rög
 
«me
, & 
vÆue
 );

46 
	`upd©e_mö_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 );

47 
	`upd©e_max_doubÀ
–
°d
::
°rög
 
«me
, 
vÆue
 );

49 
	`add_≥r_‰ame_öt
–
°d
::
°rög
 
«me
, 
‰ame
, 
öt64_t
 
vÆue
 );

50 
boﬁ
 
	`gë_≥r_‰ame_öts
–
°d
::
°rög
 
«me
, std::
ve˘‹
<
PîFømeI¡
>& 
£quí˚
 );

52 
	`add_≥r_‰ame_doubÀ
–
°d
::
°rög
 
«me
, 
‰ame
, 
vÆue
 );

53 
boﬁ
 
	`gë_≥r_‰ame_doubÀs
–
°d
::
°rög
 
«me
, std::
ve˘‹
<
PîFømeDoubÀ
>& 
£quí˚
 );

55 
	`wrôe_to_fûe
–c⁄° * 
fûíame
 );

57 
	`˛ór
();

59 
¥iv©e
:

61 
°d
::
m≠
<°d::
°rög
, 
öt64_t
> 
öt_°©s
;

62 
°d
::
m≠
<°d::
°rög
, > 
doubÀ_°©s
;

64 
°d
::
m≠
<°d::
°rög
, std::
ve˘‹
<
PîFømeI¡
> > 
≥r_‰ame_öt_°©s
;

65 
°d
::
m≠
<°d::
°rög
, std::
ve˘‹
<
PîFømeDoubÀ
> > 
≥r_‰ame_doubÀ_°©s
;

67 
	}
};

	@common/tunicate/expansion.cpp

4 
	~<ex∑nsi⁄.h
>

6 
	~<ˇs£π
>

7 
	~<cm©h
>

8 
	~<io°ªam
>

10 
	g«me•a˚
 {

14 
two_sum
(
a
,

15 
b
,

16 & 
x
,

17 & 
y
)

19 
	gx
=
a
+
b
;

20 
	gz
=
x
-
a
;

21 
	gy
=(
a
-(
x
-
z
))+(
b
-z);

27 
Á°_two_sum
(
a
,

28 
b
,

29 & 
x
,

30 & 
y
)

32 
as£π
–
a
 =®&& 
b
 == b );

33 
as£π
(
°d
::
Ábs
(
a
)>=°d::Ábs(
b
));

34 
	gx
=
a
+
b
;

35 
	gy
=(
a
-
x
)+
b
;

40 
•lô
(
a
,

41 & 
x
,

42 & 
y
)

44 
	gc
=134217729*
a
;

45 
	gx
=
c
-(c-
a
);

46 
	gy
=
a
-
x
;

51 
two_¥odu˘
(
a
,

52 
b
,

53 & 
x
,

54 & 
y
)

56 
	gx
=
a
*
b
;

57 
	ga1
, 
	ga2
, 
	gb1
, 
	gb2
;

58 
•lô
(
a
, 
a1
, 
a2
);

59 
•lô
(
b
, 
b1
, 
b2
);

60 
	gy
=
a2
*
b2
-(((
x
-
a1
*
b1
)-a2*b1)-a1*b2);

67 
boﬁ


68 
	$is_zîo
–c⁄° 
ex∑nsi⁄
& 
a
 )

70  ( 
a
.
v
.
	`size
() == 0 );

71 
	}
}

76 
	$sign
–c⁄° 
ex∑nsi⁄
& 
a
 )

78 i‡–
a
.
v
.
	`size
() == 0 ) {  0; }

82 i‡–
a
.
v
.
	`back
() > 0 )

87 
	}
}

92 
	$add
(
a
, 
b
, 
ex∑nsi⁄
& 
sum
)

94 
sum
.
	`ªsize
(2);

95 
	`two_sum
(
a
, 
b
, 
sum
.
v
[1], sum.v[0]);

96 
	}
}

101 
	$add
(c⁄° 
ex∑nsi⁄
& 
a
, 
b
,Éx∑nsi⁄& 
sum
)

103 
size_t
 
m
=
a
.
v
.
	`size
();

104 
sum
.
v
.
	`ª£rve
(
m
+1);

105 
s
;

106 
size_t
 
i
=0; i<
m
; ++i){

107 
	`two_sum
(
b
, 
a
.
v
[
i
], b, 
s
);

108 if(
s
Ë
sum
.
v
.
	`push_back
(s);

110 
sum
.
v
.
	`push_back
(
b
);

111 
	}
}

116 
	$add
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
sum
)

119 if(
a
.
v
.
	`em±y
())

121 
sum
=
b
;

123 }if(
b
.
v
.
	`em±y
())

125 
sum
=
a
;

130 
ex∑nsi⁄
 
	`mîge
(
a
.
v
.
	`size
()+
b
.v.size(), 0);

131 
i
=0, 
j
=0, 
k
=0;

133 if(
°d
::
	`Ábs
(
a
.
v
[
i
])<°d::Ábs(
b
.v[
j
])){

134 
mîge
.
v
[
k
++]=
a
.v[
i
++];

135 if(
i
==
a
.
v
.
	`size
()){

136 
j
<
b
.
v
.
	`size
()Ë
mîge
.v[
k
++]=b.v[j++];

140 
mîge
.
v
[
k
++]=
b
.v[
j
++];

141 if(
j
==
b
.
v
.
	`size
()){

142 
i
<
a
.
v
.
	`size
()Ë
mîge
.v[
k
++]=a.v[i++];

147 
sum
.
v
.
	`ª£rve
(
mîge
.v.
	`size
());

148 
sum
.
v
.
	`ªsize
(0);

149 
q
, 
r
;

150 
	`Á°_two_sum
(
mîge
.
v
[1], mîge.v[0], 
q
, 
r
);

151 if(
r
Ë
sum
.
v
.
	`push_back
(r);

152 
i
=2; i<
mîge
.
v
.
	`size
(); ++i){

153 
	`two_sum
(
q
, 
mîge
.
v
[
i
], q, 
r
);

154 if(
r
Ë
sum
.
v
.
	`push_back
(r);

156 if(
q
Ë
sum
.
v
.
	`push_back
(q);

158 
	}
}

162 
	$subåa˘
–c⁄° & 
a
, c⁄° & 
b
, 
ex∑nsi⁄
& 
dif„ªn˚
)

164 
	`add
–
a
, -
b
, 
dif„ªn˚
 );

165 
	}
}

169 
	$subåa˘
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
dif„ªn˚
)

172 
ex∑nsi⁄
 
c
;

173 
	`√g©ive
(
b
, 
c
);

174 
	`add
(
a
, 
c
, 
dif„ªn˚
);

175 
	}
}

179 
	$√g©ive
(c⁄° 
ex∑nsi⁄
& 
öput
,Éx∑nsi⁄& 
ouçut
)

181 
ouçut
.
	`ªsize
(
öput
.
v
.
	`size
());

182 
i
=0; i<
öput
.
v
.
	`size
(); ++i)

183 
ouçut
.
v
[
i
]=-
öput
.v[i];

184 
	}
}

188 
	$mu…ùly
(
a
, 
b
, 
ex∑nsi⁄
& 
¥odu˘
)

190 
¥odu˘
.
	`ªsize
(2);

191 
	`two_¥odu˘
(
a
, 
b
, 
¥odu˘
.
v
[1],Öroduct.v[0]);

192 
	}
}

196 
	$mu…ùly
(
a
, 
b
, 
c
, 
ex∑nsi⁄
& 
¥odu˘
)

198 
ex∑nsi⁄
 
ab
;

199 
	`mu…ùly
(
a
, 
b
, 
ab
);

200 
	`mu…ùly
(
ab
, 
c
, 
¥odu˘
);

201 
	}
}

205 
	$mu…ùly
(
a
, 
b
, 
c
, 
d
, 
ex∑nsi⁄
& 
¥odu˘
)

207 
	`mu…ùly
(
a
, 
b
, 
¥odu˘
);

208 
ex∑nsi⁄
 
abc
;

209 
	`mu…ùly
(
¥odu˘
, 
c
, 
abc
);

210 
	`mu…ùly
(
abc
, 
d
, 
¥odu˘
);

211 
	}
}

215 
	$mu…ùly
(c⁄° 
ex∑nsi⁄
& 
a
, 
b
,Éx∑nsi⁄& 
¥odu˘
)

221 
¥odu˘
.
	`ªsize
(2*
a
.
v
.
	`size
());

222 if(
a
.
v
.
	`em±y
()) ;

223 
	`two_¥odu˘
(
a
.
v
[0], 
b
, 
¥odu˘
.v[1],Öroduct.v[0]);

224 
x
, 
y
, 
z
;

225 
i
=1; i<
a
.
v
.
	`size
(); ++i){

226 
	`two_¥odu˘
(
a
.
v
[
i
], 
b
, 
x
, 
y
);

228 
	`two_sum
(
¥odu˘
.
v
[2*
i
-1], 
y
, 
z
,Öroduct.v[2*i-1]);

230 
	`Á°_two_sum
(
x
, 
z
, 
¥odu˘
.
v
[2*
i
+1],Öroduct.v[2*i]);

234 
	`ªmove_zîos
(
¥odu˘
);

236 
	}
}

240 
	$mu…ùly
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
¥odu˘
)

244 
¥odu˘
.
	`ªsize
(0);

245 
ex∑nsi⁄
 
ãrm
;

246 
i
=0; i<
b
.
v
.
	`size
(); ++i){

247 
	`mu…ùly
(
a
, 
b
.
v
[
i
], 
ãrm
);

248 
	`add
(
¥odu˘
, 
ãrm
,Öroduct);

250 
	}
}

256 
	$com¥ess
–c⁄° 
ex∑nsi⁄
& 
e
,Éx∑nsi⁄& 
h
 )

258 i‡–
	`is_zîo
–
e
 ) )

260 
	`make_zîo
–
h
 );

264 
ex∑nsi⁄
 
	`g
–
e
.
v
.
	`size
(), 0 );

266 
size_t
 
bŸtom
 = 
e
.
v
.
	`size
() - 1;

267 
q
 = 
e
.
v
[
bŸtom
];

269  
±rdiff_t
 
i
 = 
e
.
v
.
	`size
() - 2; i >= 0; --i )

271 
√w_q
, 
smÆl_q
;

272 
	`Á°_two_sum
–
q
, 
e
.
v
[
i
], 
√w_q
, 
smÆl_q
 );

273 i‡–
smÆl_q
 != 0 )

275 
g
.
v
[
bŸtom
--] = 
√w_q
;

276 
q
 = 
smÆl_q
;

280 
q
 = 
√w_q
;

283 
g
.
v
[
bŸtom
] = 
q
;

285 
h
.
v
.
	`ªsize
–
e
.v.
	`size
(), 0 );

287 
t›
 = 0;

289  
size_t
 
i
 = 
bŸtom
+1; i < 
e
.
v
.
	`size
(); ++i )

291 
√w_q
, 
smÆl_q
;

292 
	`Á°_two_sum
–
g
.
v
[
i
], 
q
, 
√w_q
, 
smÆl_q
 );

293 i‡–
smÆl_q
 != 0 )

295 
h
.
v
[
t›
++] = 
smÆl_q
;

297 
q
 = 
√w_q
;

299 
h
.
v
[
t›
] = 
q
;

300 
h
.
	`ªsize
–
t›
+1 );

302 
	}
}

307 
boﬁ
 
	$divide
–c⁄° 
ex∑nsi⁄
& 
x
, c⁄°Éx∑nsi⁄& 
y
,Éx∑nsi⁄& 
q
 )

310 
	`as£π
–!
	`is_zîo
–
y
 ) );

312 i‡–
	`is_zîo
–
x
 ) )

315 
	`make_ex∑nsi⁄
–0, 
q
 );

316  
åue
;

319 c⁄° 
divis‹
 = 
	`e°im©e
(
y
);

324 
	`make_ex∑nsi⁄
–
	`e°im©e
(
x
Ë/ 
divis‹
, 
q
 );

326 
ex∑nsi⁄
 
qy
;

327 
	`mu…ùly
–
q
, 
y
, 
qy
 );

328 
ex∑nsi⁄
 
r
;

329 
	`subåa˘
–
x
, 
qy
, 
r
 );

331  !
	`is_zîo
(
r
) )

335 
ex∑nsi⁄
 
s
;

336 
	`make_ex∑nsi⁄
–
	`e°im©e
(
r
Ë/ 
divis‹
, 
s
 );

338 i‡–
	`is_zîo
(
s
) )

340 
	`as£π
 ( !
	`is_zîo
(
y
) );

341 
°d
::
cout
 << "undîÊow, s =0" << std::
ídl
;

342 
°d
::
cout
 << "divis‹: " << 
divis‹
 << std::
ídl
;

343  
Ál£
;

347 
	`add
–
q
, 
s
, q );

350 
ex∑nsi⁄
 
sy
;

351 
	`mu…ùly
–
s
, 
y
, 
sy
 );

354 i‡–
	`is_zîo
(
sy
) )

356 
	`as£π
 ( !
	`is_zîo
(
s
Ë&& !is_zîo(
y
) );

357 
°d
::
cout
 << "undîÊow, sy =0" << std::
ídl
;

358  
Ál£
;

361 
	`subåa˘
–
r
, 
sy
,Ñ );

363 
ex∑nsi⁄
 
com¥es£d_r
;

364 
	`com¥ess
–
r
, 
com¥es£d_r
 );

365 
r
 = 
com¥es£d_r
;

369 
	`ªmove_zîos
–
q
 );

370  
åue
;

372 
	}
}

376 
	$ªmove_zîos
(
ex∑nsi⁄
& 
a
)

379 
i
, 
j
;

381  
i
 = 0, 
j
 = 0; i < 
a
.
v
.
	`size
(); ++i )

383 i‡–
a
.
v
[
i
] )

385 
a
.
v
[
j
++] =á.v[
i
];

389 
a
.
	`ªsize
(
j
);

391 
	}
}

395 
	$e°im©e
(c⁄° 
ex∑nsi⁄
& 
a
)

397 
x
=0;

398 
i
=0; i<
a
.
v
.
	`size
(); ++i)

399 
x
+=
a
.
v
[
i
];

400  
x
;

401 
	}
}

405 
boﬁ
 
	$equÆs
–c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
 )

407 
boﬁ
 
ßme
 = (
a
.
v
.
	`size
(Ë=
b
.v.size());

409 i‡(!
ßme
Ë{  
Ál£
; }

411  
i
 = 0; i < 
a
.
v
.
	`size
(); ++i )

413 
ßme
 &(
a
.
v
[
i
] =
b
.v[i]);

416  
ßme
;

418 
	}
}

422 
	$¥öt_fuŒ
–c⁄° 
ex∑nsi⁄
& 
e
 )

424 i‡–
e
.
v
.
	`size
() == 0 )

426 
°d
::
cout
 << "0" << std::
ídl
;

430  
j
 = 0; j < 
e
.
v
.
	`size
(); ++j )

432 
°d
::
cout
 << 
e
.
v
[
j
] << " ";

434 
°d
::
cout
 << std::
ídl
;

435 
	}
}

	@common/tunicate/expansion.h

1 #i‚de‡
EXPANSION_H


2 
	#EXPANSION_H


	)

9 
	~<comm⁄›ti⁄s.h
>

10 
	~<ve˘‹
>

15 
˛ass
 
	gex∑nsi⁄
;

17 
√g©ive
(c⁄° 
ex∑nsi⁄
& 
öput
,Éx∑nsi⁄& 
ouçut
);

19 
sign
–c⁄° 
ex∑nsi⁄
& 
a
 );

21 
boﬁ


22 
is_zîo
–c⁄° 
ex∑nsi⁄
& 
a
 );

25 
add
(
a
, 
b
, 
ex∑nsi⁄
& 
sum
);

29 
add
(c⁄° 
ex∑nsi⁄
& 
a
, 
b
,Éx∑nsi⁄& 
sum
);

31 
ölöe
 

32 
	$add
(
a
, c⁄° 
ex∑nsi⁄
& 
b
,Éx∑nsi⁄& 
sum
)

33 { 
	`add
(
b
, 
a
, 
sum
); 
	}
}

37 
add
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
sum
);

40 
subåa˘
–c⁄° & 
a
, c⁄° & 
b
, 
ex∑nsi⁄
& 
dif„ªn˚
);

44 
subåa˘
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
dif„ªn˚
);

48 
√g©ive
(c⁄° 
ex∑nsi⁄
& 
öput
,Éx∑nsi⁄& 
ouçut
);

51 
mu…ùly
(
a
, 
b
, 
ex∑nsi⁄
& 
¥odu˘
);

54 
mu…ùly
(
a
, 
b
, 
c
, 
ex∑nsi⁄
& 
¥odu˘
);

57 
mu…ùly
(
a
, 
b
, 
c
, 
d
, 
ex∑nsi⁄
& 
¥odu˘
);

60 
mu…ùly
(c⁄° 
ex∑nsi⁄
& 
a
, 
b
,Éx∑nsi⁄& 
¥odu˘
);

62 
ölöe
 

63 
	$mu…ùly
(
a
, c⁄° 
ex∑nsi⁄
& 
b
,Éx∑nsi⁄& 
¥odu˘
)

64 { 
	`mu…ùly
(
b
, 
a
, 
¥odu˘
); 
	}
}

68 
mu…ùly
(c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
,Éx∑nsi⁄& 
¥odu˘
);

70 
com¥ess
–c⁄° 
ex∑nsi⁄
& 
e
,Éx∑nsi⁄& 
h
 );

73 
boﬁ
 
divide
–c⁄° 
ex∑nsi⁄
& 
x
, c⁄°Éx∑nsi⁄& 
y
,Éx∑nsi⁄& 
q
 );

76 
ªmove_zîos
(
ex∑nsi⁄
& 
a
);

79 
e°im©e
(c⁄° 
ex∑nsi⁄
& 
a
);

81 
boﬁ
 
equÆs
–c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
 );

84 
¥öt_fuŒ
–c⁄° 
ex∑nsi⁄
& 
e
 );

89 ˛as†
	cex∑nsi⁄


92 
	mpublic
:

94 
°d
::
ve˘‹
<> 
v
;

96 
	$ex∑nsi⁄
()

97 : 
	$v
(0)

100 
ex∂icô
 
	$ex∑nsi⁄
–
vÆ
 )

101 : 
	$v
(1, 
vÆ
)

102 {
	}
}

104 
	$ex∑nsi⁄
–
°d
::
size_t
 
n
, 
vÆ
 )

105 : 
	$v
(
n
,
vÆ
)

106 {
	}
}

108 
	gvútuÆ
 ~
	$ex∑nsi⁄
(Ë{
	}
}

110 
	gex∑nsi⁄
& 
	g›î©‹
+=(c⁄° 
ex∑nsi⁄
 &
rhs
)

112 
add
–*
this
, 
rhs
, *this );

113  *
	gthis
;

116 
	gex∑nsi⁄
& 
	g›î©‹
-=(c⁄° 
ex∑nsi⁄
 &
rhs
)

118 
subåa˘
–*
this
, 
rhs
, *this );

119  *
	gthis
;

122 
	gex∑nsi⁄
& 
	g›î©‹
*=(c⁄° 
ex∑nsi⁄
 &
rhs
)

124 
ex∑nsi⁄
 
p
;

125 
mu…ùly
–*
this
, 
rhs
, 
p
 );

126 *
	gthis
 = 
p
;

127  *
	gthis
;

130 
ölöe
 
ex∑nsi⁄
 
	g›î©‹
+(c⁄° 
	gex∑nsi⁄
 &
	gŸhî
) const

132 
ex∑nsi⁄
 
	gªsu…
 = *
this
;

133 
	gªsu…
 +
Ÿhî
;

134  
	gªsu…
;

137 
ölöe
 
ex∑nsi⁄
 
	g›î©‹
-(c⁄° 
	gex∑nsi⁄
 &
	gŸhî
) const

139 
ex∑nsi⁄
 
	gªsu…
 = *
this
;

140 
	gªsu…
 -
Ÿhî
;

141  
	gªsu…
;

145 
ölöe
 
ex∑nsi⁄
 
	g›î©‹
*(c⁄° 
	gex∑nsi⁄
 &
	gŸhî
) const

147 
ex∑nsi⁄
 
	gªsu…
 = *
this
;

148 
	gªsu…
 *
Ÿhî
;

149  
	gªsu…
;

152 
ölöe
 
ex∑nsi⁄
 
	g›î©‹
-( ) const

154 
ex∑nsi⁄
 
	gªsu…
;

155 
√g©ive
–*
this
, 
ªsu…
 );

156  
	gªsu…
;

159 
ölöe
 
	$e°im©e
() const

161  ::
	`e°im©e
–*
this
 );

162 
	}
}

164 
ölöe
 
boﬁ
 
	$ödeföôe_sign
() const

166  
Ál£
;

167 
	}
}

169 
	$begö_•ecül_¨ôhmëic
()

170 {
	}
}

172 
	$íd_•ecül_¨ôhmëic
()

173 {
	}
}

175 
ölöe
 
	$˛ór
()

177 
v
.
	`˛ór
();

178 
	}
}

180 
ölöe
 
	$ªsize
–
size_t
 
√w_size
 )

182 
v
.
	`ªsize
(
√w_size
);

183 
	}
}

188 
ölöe
 
	$make_ex∑nsi⁄
–
a
, 
ex∑nsi⁄
& 
e
 )

190 if(
a
)

192 
e
 = 
	`ex∑nsi⁄
(1, 
a
);

196 
e
.
	`˛ór
();

198 
	}
}

200 
ölöe
 

201 
	$make_zîo
(
ex∑nsi⁄
& 
e
)

202 { 
e
.
	`ªsize
(0); 
	}
}

204 
ölöe
 
	$¸óã_‰om_doubÀ
–
a
, 
ex∑nsi⁄
& 
out
 )

206 
	`make_ex∑nsi⁄
–
a
, 
out
 );

207 
	}
}

209 
ölöe
 
boﬁ
 
	$˚πaöly_›posôe_sign
–c⁄° 
ex∑nsi⁄
& 
a
, c⁄°Éx∑nsi⁄& 
b
 )

211  ( 
	`sign
(
a
Ë> 0 && sign(
b
) < 0 ) || ( sign(a) < 0 && sign(b) > 0 );

212 
	}
}

	@common/tunicate/fenv_include.h

1 #i‚de‡
FENVINCLUDE_H


2 
	#FENVINCLUDE_H


	)

4 #i‚de‡
_MSC_VER


7 
	~<„nv.h
>

12 
	~<Êﬂt.h
>

13 
	~<°dio.h
>

14 
	~<î∫o.h
>

16 #¥agm®
„nv_ac˚ss
(
⁄
)

20 
	#FE_DOWNWARD
 
_RC_DOWN


	)

21 
	#FE_UPWARD
 
_RC_UP


	)

22 
	#FE_TONEAREST
 
_RC_NEAR


	)

23 
	#FE_TOWARDZERO
 
_RC_CHOP


	)

25 
ölöe
 
	$„£åound
(
choi˚
) {

26 
	`_c⁄åﬁÂ
(
choi˚
, 
_MCW_RC
);

27 
	}
}

29 
ölöe
 
	$„gëround
() {

30 
c⁄åﬁ_w‹d
 = 
	`_c⁄åﬁÂ
(0,0);

31 
roundmode
 = (
c⁄åﬁ_w‹d
 & 
_MCW_RC
);

32  
roundmode
;

33 
	}
}

	@common/tunicate/intersection.cpp

3 
	~<ˇs£π
>

4 
	~<cm©h
>

5 
	~<io°ªam
>

6 
	~<tuniˇã.h
>

9 
boﬁ


10 
	$ßme_sign
(
a
, 
b
)

12  (
a
<=0 && 
b
<=0) || (a>=0 && b>=0);

13 
	}
}

17 
	$sim∂ex_öãr£˘i⁄1d
(
k
,

18 c⁄° * 
x0
,

19 c⁄° * 
x1
,

20 c⁄° * 
x2
,

21 * 
Æpha0
,

22 * 
Æpha1
,

23 * 
Æpha2
)

25 
	`as£π
(1<=
k
 && k<=2);

26 
	`as£π
(
Æpha0
 && 
Æpha1
 && 
Æpha2
);

27 if(
k
==1){

28 if(
x1
[0]<
x2
[0]){

29 if(
x0
[0]<
x1
[0])  0;

30 if(
x0
[0]>
x2
[0])  0;

31 *
Æpha0
=1;

32 *
Æpha1
=(
x2
[0]-
x0
[0])/(x2[0]-
x1
[0]);

33 *
Æpha2
=(
x0
[0]-
x1
[0])/(
x2
[0]-x1[0]);

35 }if(
x1
[0]>
x2
[0]){

36 if(
x0
[0]<
x2
[0])  0;

37 if(
x0
[0]>
x1
[0])  0;

38 *
Æpha0
=1;

39 *
Æpha1
=(
x2
[0]-
x0
[0])/(x2[0]-
x1
[0]);

40 *
Æpha2
=(
x0
[0]-
x1
[0])/(
x2
[0]-x1[0]);

43 if(
x0
[0]!=
x1
[0])  0;

44 *
Æpha0
=1;

45 *
Æpha1
=0.5;

46 *
Æpha2
=0.5;

50  
	`sim∂ex_öãr£˘i⁄1d
(1, 
x2
, 
x1
, 0, 
Æpha2
, 
Æpha1
, 
Æpha0
);

51 
	}
}

56 
	$sim∂ex_öãr£˘i⁄2d
(
k
,

57 c⁄° * 
x0
,

58 c⁄° * 
x1
,

59 c⁄° * 
x2
,

60 * 
Æpha0
,

61 * 
Æpha1
,

62 * 
Æpha2
)

64 
	`as£π
(
k
==1);

66 
ax0
, 
ax1
, 
ax2
;

67 if(!
	`sim∂ex_öãr£˘i⁄1d
(1, 
x0
+1, 
x1
+1, 
x2
+1, &
ax0
, &
ax1
, &
ax2
))  0;

68 
ay0
, 
ay1
, 
ay2
;

69 if(!
	`sim∂ex_öãr£˘i⁄1d
(1, 
x0
, 
x1
, 
x2
, &
ay0
, &
ay1
, &
ay2
))  0;

71 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]+
ax1
*
x1
[0]+
ax2
*
x2
[0])

72 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]+
ax1
*
x1
[1]+
ax2
*
x2
[1]);

73 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]+
ay1
*
x1
[0]+
ay2
*
x2
[0])

74 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]+
ay1
*
x1
[1]+
ay2
*
x2
[1]);

75 if(
checkx
<=
checky
){

76 *
Æpha0
=
ax0
;

77 *
Æpha1
=
ax1
;

78 *
Æpha2
=
ax2
;

80 *
Æpha0
=
ay0
;

81 *
Æpha1
=
ay1
;

82 *
Æpha2
=
ay2
;

85 
	}
}

89 
	$sim∂ex_öãr£˘i⁄2d
(
k
,

90 c⁄° * 
x0
,

91 c⁄° * 
x1
,

92 c⁄° * 
x2
,

93 c⁄° * 
x3
,

94 * 
Æpha0
,

95 * 
Æpha1
,

96 * 
Æpha2
,

97 * 
Æpha3
)

99 
	`as£π
(1<=
k
 && k<=3);

100 
sum1
, 
sum2
;

101 
k
){

103 *
Æpha1
=-
	`‹õ¡©i⁄2d
(
x0
, 
x2
, 
x3
);

104 *
Æpha2

	`‹õ¡©i⁄2d
(
x0
, 
x1
, 
x3
);

105 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha2
))  0;

106 *
Æpha3
=-
	`‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

107 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha3
))  0;

108 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

109 
sum2
=*
Æpha1
+*
Æpha2
+*
Æpha3
;

110 if(
sum2
){

111 *
Æpha0
=1;

112 *
Æpha1
/=
sum2
;

113 *
Æpha2
/=
sum2
;

114 *
Æpha3
/=
sum2
;

117 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x1
, 
x2
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

118 *
Æpha3
=0;

121 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x1
, 
x3
, 
Æpha0
, 
Æpha1
, 
Æpha3
)){

122 *
Æpha2
=0;

125 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x2
, 
x3
, 
Æpha0
, 
Æpha2
, 
Æpha3
)){

126 *
Æpha1
=0;

133 *
Æpha0

	`‹õ¡©i⁄2d
(
x1
, 
x2
, 
x3
);

134 *
Æpha1
=-
	`‹õ¡©i⁄2d
(
x0
, 
x2
, 
x3
);

135 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

136 *
Æpha2

	`‹õ¡©i⁄2d
(
x0
, 
x1
, 
x3
);

137 *
Æpha3
=-
	`‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

138 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

139 
sum1
=*
Æpha0
+*
Æpha1
;

140 
sum2
=*
Æpha2
+*
Æpha3
;

141 if(
sum1
 && 
sum2
){

142 *
Æpha0
/=
sum1
;

143 *
Æpha1
/=
sum1
;

144 *
Æpha2
/=
sum2
;

145 *
Æpha3
/=
sum2
;

148 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x2
, 
x3
, 
Æpha0
, 
Æpha2
, 
Æpha3
)){

149 *
Æpha1
=0;

152 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x1
, 
x2
, 
x3
, 
Æpha1
, 
Æpha2
, 
Æpha3
)){

153 *
Æpha0
=0;

156 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x2
, 
x0
, 
x1
, 
Æpha2
, 
Æpha0
, 
Æpha1
)){

157 *
Æpha3
=0;

160 if(
	`sim∂ex_öãr£˘i⁄2d
(1, 
x3
, 
x0
, 
x1
, 
Æpha3
, 
Æpha0
, 
Æpha1
)){

161 *
Æpha2
=0;

167  
	`sim∂ex_öãr£˘i⁄2d
(1, 
x3
, 
x2
, 
x1
, 
x0
,

168 
Æpha3
, 
Æpha2
, 
Æpha1
, 
Æpha0
);

172 
	}
}

177 
	$sim∂ex_öãr£˘i⁄3d
(
k
,

178 c⁄° * 
x0
,

179 c⁄° * 
x1
,

180 c⁄° * 
x2
,

181 c⁄° * 
x3
,

182 * 
Æpha0
,

183 * 
Æpha1
,

184 * 
Æpha2
,

187 
	`as£π
(
k
<=2);

189 
ax0
, 
ax1
, 
ax2
, 
ax3
;

190 if(!
	`sim∂ex_öãr£˘i⁄2d
(
k
, 
x0
+1, 
x1
+1, 
x2
+1, 
x3
+1, &
ax0
, &
ax1
, &
ax2
,&
ax3
))

192 
ay0
, 
ay1
, 
ay2
, 
ay3
;

193 
p0
[2]={
x0
[0], x0[2]}, 
p1
[2]={
x1
[0], x1[2]},

194 
p2
[2]={
x2
[0], x2[2]}, 
p3
[2]={
x3
[0], x3[2]};

195 if(!
	`sim∂ex_öãr£˘i⁄2d
(
k
, 
p0
, 
p1
, 
p2
, 
p3
, &
ay0
, &
ay1
, &
ay2
, &
ay3
))

197 
az0
, 
az1
, 
az2
, 
az3
;

198 if(!
	`sim∂ex_öãr£˘i⁄2d
(
k
, 
x0
, 
x1
, 
x2
, 
x3
, &
az0
, &
az1
, &
az2
, &
az3
))

201 
checkx
, 
checky
, 
checkz
;

202 if(
k
==1){

203 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]+
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0])

204 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]+
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1])

205 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]+
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]);

206 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]+
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0])

207 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]+
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1])

208 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]+
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]);

209 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]+
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0])

210 +
°d
::
	`Ábs
(-
az0
*
x0
[1]+
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1])

211 +
°d
::
	`Ábs
(-
az0
*
x0
[2]+
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]);

213 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]-
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0])

214 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]-
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1])

215 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]-
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]);

216 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]-
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0])

217 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]-
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1])

218 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]-
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]);

219 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]-
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0])

220 +
°d
::
	`Ábs
(-
az0
*
x0
[1]-
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1])

221 +
°d
::
	`Ábs
(-
az0
*
x0
[2]-
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]);

223 if(
checkx
<=
checky
 && checkx<=
checkz
){

224 *
Æpha0
=
ax0
;

225 *
Æpha1
=
ax1
;

226 *
Æpha2
=
ax2
;

227 *
Æpha2
=
ax3
;

228 }if(
checky
<=
checkz
){

229 *
Æpha0
=
ay0
;

230 *
Æpha1
=
ay1
;

231 *
Æpha2
=
ay2
;

232 *
Æpha2
=
ay3
;

234 *
Æpha0
=
az0
;

235 *
Æpha1
=
az1
;

236 *
Æpha2
=
az2
;

237 *
Æpha2
=
az3
;

240 
	}
}

244 
	$sim∂ex_öãr£˘i⁄3d
(
k
,

245 c⁄° * 
x0
,

246 c⁄° * 
x1
,

247 c⁄° * 
x2
,

248 c⁄° * 
x3
,

249 c⁄° * 
x4
,

250 * 
Æpha0
,

251 * 
Æpha1
,

252 * 
Æpha2
,

253 * 
Æpha3
,

254 * 
Æpha4
)

256 
	`as£π
(1<=
k
 && k<=4);

257 
sum1
, 
sum2
;

258 
k
){

260 *
Æpha1
=-
	`‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
);

261 *
Æpha2

	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
);

262 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha2
))  0;

263 *
Æpha3
=-
	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
);

264 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha3
))  0;

265 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

266 *
Æpha4

	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
);

267 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha4
))  0;

268 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha4
))  0;

269 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

270 *
Æpha0
=1;

271 
sum2
=*
Æpha1
+*
Æpha2
+*
Æpha3
+*
Æpha4
;

272 if(
sum2
){

273 *
Æpha1
/=
sum2
;

274 *
Æpha2
/=
sum2
;

275 *
Æpha3
/=
sum2
;

276 *
Æpha4
/=
sum2
;

279 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x2
, 
x3
, 
x4
,

280 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

281 *
Æpha1
=0;

284 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x3
, 
x4
,

285 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
)){

286 *
Æpha2
=0;

289 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x2
, 
x4
,

290 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
)){

291 *
Æpha3
=0;

294 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x2
, 
x3
,

295 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
)){

296 *
Æpha4
=0;

303 *
Æpha0

	`‹õ¡©i⁄3d
(
x1
, 
x2
, 
x3
, 
x4
);

304 *
Æpha1
=-
	`‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
);

305 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

306 *
Æpha2

	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
);

307 *
Æpha3
=-
	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
);

308 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

309 *
Æpha4

	`‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
);

310 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha4
))  0;

311 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

312 
sum1
=*
Æpha0
+*
Æpha1
;

313 
sum2
=*
Æpha2
+*
Æpha3
+*
Æpha4
;

315 if(
sum1
 && 
sum2
){

316 *
Æpha0
/=
sum1
;

317 *
Æpha1
/=
sum1
;

318 *
Æpha2
/=
sum2
;

319 *
Æpha3
/=
sum2
;

320 *
Æpha4
/=
sum2
;

323 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x1
, 
x2
, 
x3
, 
x4
,

324 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

325 *
Æpha0
=0;

328 if(
	`sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x2
, 
x3
, 
x4
,

329 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

330 *
Æpha1
=0;

333 if(
	`sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x3
, 
x4
,

334 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
)){

335 *
Æpha2
=0;

338 if(
	`sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x2
, 
x4
,

339 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
)){

340 *
Æpha3
=0;

343 if(
	`sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x2
, 
x3
,

344 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
)){

345 *
Æpha4
=0;

353  
	`sim∂ex_öãr£˘i⁄3d
(5-
k
, 
x4
, 
x3
, 
x2
, 
x1
, 
x0
,

354 
Æpha4
, 
Æpha3
, 
Æpha2
, 
Æpha1
, 
Æpha0
);

358 
	}
}

363 
	$sim∂ex_öãr£˘i⁄_time3d
(
k
,

364 c⁄° * 
x0
, 
time0
,

365 c⁄° * 
x1
, 
time1
,

366 c⁄° * 
x2
, 
time2
,

367 c⁄° * 
x3
, 
time3
,

368 c⁄° * 
x4
, 
time4
,

369 * 
Æpha0
,

370 * 
Æpha1
,

371 * 
Æpha2
,

372 * 
Æpha3
,

375 
	`as£π
(
k
<=2);

376 
	`as£π
(
time0
==0 ||Åime0==1);

377 
	`as£π
(
time1
==0 ||Åime1==1);

378 
	`as£π
(
time2
==0 ||Åime2==1);

379 
	`as£π
(
time3
==0 ||Åime3==1);

380 
	`as£π
(
time4
==0 ||Åime4==1);

382 
ax0
, 
ax1
, 
ax2
, 
ax3
, 
ax4
;

383 
r0
[3]={
x0
[0], x0[2], 
time0
}, 
r1
[3]={
x1
[0], x1[2], 
time1
},

384 
r2
[3]={
x2
[0], x2[2], 
time2
}, 
r3
[3]={
x3
[0], x3[2], 
time3
},

385 
r4
[3]={
x4
[0], x4[2], 
time4
};

386 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
r0
, 
r1
, 
r2
, 
r3
, 
r4
,

387 &
ax0
, &
ax1
, &
ax2
, &
ax3
, &
ax4
))  0;

388 
ay0
, 
ay1
, 
ay2
, 
ay3
, 
ay4
;

389 
p0
[3]={
x0
[0], x0[2], 
time0
}, 
p1
[3]={
x1
[0], x1[2], 
time1
},

390 
p2
[3]={
x2
[0], x2[2], 
time2
}, 
p3
[3]={
x3
[0], x3[2], 
time3
},

391 
p4
[3]={
x4
[0], x4[2], 
time4
};

392 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
,

393 &
ay0
, &
ay1
, &
ay2
, &
ay3
, &
ay4
))  0;

394 
az0
, 
az1
, 
az2
, 
az3
, 
az4
;

395 
q0
[3]={
x0
[0], x0[1], 
time0
}, 
q1
[3]={
x1
[0], x1[1], 
time1
},

396 
q2
[3]={
x2
[0], x2[1], 
time2
}, 
q3
[3]={
x3
[0], x3[1], 
time3
},

397 
q4
[3]={
x4
[0], x4[1], 
time4
};

398 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
q0
, 
q1
, 
q2
, 
q3
, 
q4
,

399 &
az0
, &
az1
, &
az2
, &
az3
, &
az4
))  0;

400 
©0
, 
©1
, 
©2
, 
©3
, 
©4
;

401 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

402 &
©0
, &
©1
, &
©2
, &
©3
, &
©4
))  0;

404 
checkx
, 
checky
, 
checkz
, 
checkt
;

405 if(
k
==1){

406 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]+
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0]+
ax4
*
x4
[0])

407 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]+
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1]+
ax4
*
x4
[1])

408 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]+
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]+
ax4
*
x4
[2])

409 +
°d
::
	`Ábs
(-
ax0
*
time0
+
ax1
*
time1
+
ax2
*
time2
+
ax3
*
time3
+
ax4
*
time4
);

410 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]+
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0]+
ay4
*
x4
[0])

411 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]+
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1]+
ay4
*
x4
[1])

412 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]+
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]+
ay4
*
x4
[2])

413 +
°d
::
	`Ábs
(-
ay0
*
time0
+
ay1
*
time1
+
ay2
*
time2
+
ay3
*
time3
+
ay4
*
time4
);

414 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]+
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0]+
az4
*
x4
[0])

415 +
°d
::
	`Ábs
(-
az0
*
x0
[1]+
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1]+
az4
*
x4
[1])

416 +
°d
::
	`Ábs
(-
az0
*
x0
[2]+
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]+
az4
*
x4
[2])

417 +
°d
::
	`Ábs
(-
az0
*
time0
+
az1
*
time1
+
az2
*
time2
+
az3
*
time3
+
az4
*
time4
);

418 
checkt
=
°d
::
	`Ábs
(-
©0
*
x0
[0]+
©1
*
x1
[0]+
©2
*
x2
[0]+
©3
*
x3
[0]+
©4
*
x4
[0])

419 +
°d
::
	`Ábs
(-
©0
*
x0
[1]+
©1
*
x1
[1]+
©2
*
x2
[1]+
©3
*
x3
[1]+
©4
*
x4
[1])

420 +
°d
::
	`Ábs
(-
©0
*
x0
[2]+
©1
*
x1
[2]+
©2
*
x2
[2]+
©3
*
x3
[2]+
©4
*
x4
[2])

421 +
°d
::
	`Ábs
(-
©0
*
time0
+
©1
*
time1
+
©2
*
time2
+
©3
*
time3
+
©4
*
time4
);

423 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]-
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0]+
ax4
*
x4
[0])

424 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]-
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1]+
ax4
*
x4
[1])

425 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]-
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]+
ax4
*
x4
[2])

426 +
°d
::
	`Ábs
(-
ax0
*
time0
-
ax1
*
time1
+
ax2
*
time2
+
ax3
*
time3
+
ax4
*
time4
);

427 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]-
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0]+
ay4
*
x4
[0])

428 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]-
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1]+
ay4
*
x4
[1])

429 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]-
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]+
ay4
*
x4
[2])

430 +
°d
::
	`Ábs
(-
ay0
*
time0
-
ay1
*
time1
+
ay2
*
time2
+
ay3
*
time3
+
ay4
*
time4
);

431 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]-
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0]+
az4
*
x4
[0])

432 +
°d
::
	`Ábs
(-
az0
*
x0
[1]-
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1]+
az4
*
x4
[1])

433 +
°d
::
	`Ábs
(-
az0
*
x0
[2]-
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]+
az4
*
x4
[2])

434 +
°d
::
	`Ábs
(-
az0
*
time0
-
az1
*
time1
+
az2
*
time2
+
az3
*
time3
+
az4
*
time4
);

435 
checkt
=
°d
::
	`Ábs
(-
©0
*
x0
[0]-
©1
*
x1
[0]+
©2
*
x2
[0]+
©3
*
x3
[0]+
©4
*
x4
[0])

436 +
°d
::
	`Ábs
(-
©0
*
x0
[1]-
©1
*
x1
[1]+
©2
*
x2
[1]+
©3
*
x3
[1]+
©4
*
x4
[1])

437 +
°d
::
	`Ábs
(-
©0
*
x0
[2]-
©1
*
x1
[2]+
©2
*
x2
[2]+
©3
*
x3
[2]+
©4
*
x4
[2])

438 +
°d
::
	`Ábs
(-
©0
*
time0
-
©1
*
time1
+
©2
*
time2
+
©3
*
time3
+
©4
*
time4
);

440 if(
checkx
<=
checky
 && checkx<=
checkz
 && checkx<=
checkt
){

441 *
Æpha0
=
ax0
;

442 *
Æpha1
=
ax1
;

443 *
Æpha2
=
ax2
;

444 *
Æpha3
=
ax3
;

445 }if(
checky
<=
checkz
 && checky<=
checkt
){

446 *
Æpha0
=
ay0
;

447 *
Æpha1
=
ay1
;

448 *
Æpha2
=
ay2
;

449 *
Æpha3
=
ay3
;

450 }if(
checkz
<=
checkt
){

451 *
Æpha0
=
az0
;

452 *
Æpha1
=
az1
;

453 *
Æpha2
=
az2
;

454 *
Æpha3
=
az3
;

456 *
Æpha0
=
©0
;

457 *
Æpha1
=
©1
;

458 *
Æpha2
=
©2
;

459 *
Æpha3
=
©3
;

462 
	}
}

466 
	$sim∂ex_öãr£˘i⁄_time3d
(
k
,

467 c⁄° * 
x0
, 
t0
,

468 c⁄° * 
x1
, 
t1
,

469 c⁄° * 
x2
, 
t2
,

470 c⁄° * 
x3
, 
t3
,

471 c⁄° * 
x4
, 
t4
,

472 c⁄° * 
x5
, 
t5
,

473 * 
Æpha0
,

474 * 
Æpha1
,

475 * 
Æpha2
,

476 * 
Æpha3
,

477 * 
Æpha4
,

478 * 
Æpha5
)

480 
	`as£π
(1<=
k
 && k<=5);

481 
	`as£π
(
t0
==0 ||Å0==1);

482 
	`as£π
(
t1
==0 ||Å1==1);

483 
	`as£π
(
t2
==0 ||Å2==1);

484 
	`as£π
(
t3
==0 ||Å3==1);

485 
	`as£π
(
t4
==0 ||Å4==1);

486 
	`as£π
(
t5
==0 ||Å5==1);

487 
sum1
, 
sum2
;

488 
k
){

490 *
Æpha1
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

491 *
Æpha2

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

492 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha2
))  0;

493 *
Æpha3
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

494 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha3
))  0;

495 *
Æpha4

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x5
, 
t5
);

496 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha4
))  0;

497 *
Æpha5
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
);

498 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha5
))  0;

499 
sum2
=*
Æpha1
+*
Æpha2
+*
Æpha3
+*
Æpha4
+*
Æpha5
;

500 if(
sum2
){

501 *
Æpha0
=1;

502 *
Æpha1
/=
sum2
;

503 *
Æpha2
/=
sum2
;

504 *
Æpha3
/=
sum2
;

505 *
Æpha4
/=
sum2
;

506 *
Æpha5
/=
sum2
;

509 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
,

510 
x5
, 
t5
, 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

511 *
Æpha1
=0;

514 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
,

515 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

516 *
Æpha2
=0;

519 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x4
, 
t4
,

520 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
, 
Æpha5
)){

521 *
Æpha3
=0;

524 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
,

525 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha5
)){

526 *
Æpha4
=0;

529 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
,

530 
x4
, 
t4
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

531 *
Æpha5
=0;

538 *
Æpha0

	`‹õ¡©i⁄_time3d
(
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

539 *
Æpha1
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

540 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

541 *
Æpha2

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

542 *
Æpha3
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x4
, 
t4
, 
x5
, 
t5
);

543 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

544 *
Æpha4

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x5
, 
t5
);

545 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha4
))  0;

546 *
Æpha5
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
);

547 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha5
))  0;

548 
sum1
=*
Æpha0
+*
Æpha1
;

549 
sum2
=*
Æpha2
+*
Æpha3
+*
Æpha4
+*
Æpha5
;

550 if(
sum1
 && 
sum2
){

551 *
Æpha0
/=
sum1
;

552 *
Æpha1
/=
sum1
;

553 *
Æpha2
/=
sum2
;

554 *
Æpha3
/=
sum2
;

555 *
Æpha4
/=
sum2
;

556 *
Æpha5
/=
sum2
;

559 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
,

560 
x5
, 
t5
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

561 *
Æpha0
=0;

564 if(
	`sim∂ex_öãr£˘i⁄_time3d
(1, 
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
,

565 
x5
, 
t5
, 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

566 *
Æpha1
=0;

569 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
,

570 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

571 *
Æpha2
=0;

574 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x4
, 
t4
,

575 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
, 
Æpha5
)){

576 *
Æpha3
=0;

579 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
,

580 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha5
)){

581 *
Æpha4
=0;

584 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
,

585 
x4
, 
t4
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

586 *
Æpha5
=0;

593 *
Æpha0

	`‹õ¡©i⁄_time3d
(
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

594 *
Æpha1
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

595 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

596 *
Æpha2

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
, 
x5
, 
t5
);

597 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha2
))  0;

598 *
Æpha3
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x4
, 
t4
, 
x5
, 
t5
);

599 *
Æpha4

	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x5
, 
t5
);

600 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

601 *
Æpha5
=-
	`‹õ¡©i⁄_time3d
(
x0
, 
t0
, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
);

602 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha5
))  0;

603 
sum1
=*
Æpha0
+*
Æpha1
+*
Æpha2
;

604 
sum2
=*
Æpha3
+*
Æpha4
+*
Æpha5
;

605 if(
sum1
 && 
sum2
){

606 *
Æpha0
/=
sum1
;

607 *
Æpha1
/=
sum1
;

608 *
Æpha2
/=
sum1
;

609 *
Æpha3
/=
sum2
;

610 *
Æpha4
/=
sum2
;

611 *
Æpha5
/=
sum2
;

614 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x1
, 
t1
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
,

615 
x5
, 
t5
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

616 *
Æpha0
=0;

619 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x2
, 
t2
, 
x3
, 
t3
, 
x4
, 
t4
,

620 
x5
, 
t5
, 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

621 *
Æpha1
=0;

624 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x0
, 
t0
, 
x1
, 
t1
, 
x3
, 
t3
, 
x4
, 
t4
,

625 
x5
, 
t5
, 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

626 *
Æpha2
=0;

629 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x4
, 
t4
, 
x5
, 
t5
, 
x0
, 
t0
, 
x1
, 
t1
,

630 
x2
, 
t2
, 
Æpha4
, 
Æpha5
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

631 *
Æpha3
=0;

634 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x3
, 
t3
, 
x5
, 
t5
, 
x0
, 
t0
, 
x1
, 
t1
,

635 
x2
, 
t2
, 
Æpha3
, 
Æpha5
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

636 *
Æpha4
=0;

639 if(
	`sim∂ex_öãr£˘i⁄_time3d
(2, 
x3
, 
t3
, 
x4
, 
t4
, 
x0
, 
t0
, 
x1
, 
t1
,

640 
x2
, 
t2
, 
Æpha3
, 
Æpha4
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

641 *
Æpha5
=0;

649  
	`sim∂ex_öãr£˘i⁄_time3d
(6-
k
, 
x5
, 
t5
, 
x4
, 
t4
, 
x3
, 
t3
, 
x2
, 
t2
,

650 
x1
, 
t1
, 
x0
, 
t0
, 
Æpha5
, 
Æpha4
, 
Æpha3
, 
Æpha2
, 
Æpha1
, 
Æpha0
);

654 
	}
}

659 
	$sim∂ex_öãr£˘i⁄4d
(
k
,

660 c⁄° * 
x0
,

661 c⁄° * 
x1
,

662 c⁄° * 
x2
,

663 c⁄° * 
x3
,

664 c⁄° * 
x4
,

665 * 
Æpha0
,

666 * 
Æpha1
,

667 * 
Æpha2
,

668 * 
Æpha3
,

671 
	`as£π
(
k
<=2);

673 
ax0
, 
ax1
, 
ax2
, 
ax3
, 
ax4
;

674 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
x0
+1, 
x1
+1, 
x2
+1, 
x3
+1, 
x4
+1,

675 &
ax0
, &
ax1
, &
ax2
, &
ax3
, &
ax4
))  0;

676 
ay0
, 
ay1
, 
ay2
, 
ay3
, 
ay4
;

677 
p0
[3]={
x0
[0], x0[2], x0[3]}, 
p1
[3]={
x1
[0], x1[2], x1[3]},

678 
p2
[3]={
x2
[0], x2[2], x2[3]}, 
p3
[3]={
x3
[0], x3[2], x3[3]},

679 
p4
[3]={
x4
[0], x4[2], x4[3]};

680 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
,

681 &
ay0
, &
ay1
, &
ay2
, &
ay3
, &
ay4
))  0;

682 
az0
, 
az1
, 
az2
, 
az3
, 
az4
;

683 
q0
[3]={
x0
[0], x0[1], x0[3]}, 
q1
[3]={
x1
[0], x1[1], x1[3]},

684 
q2
[3]={
x2
[0], x2[1], x2[3]}, 
q3
[3]={
x3
[0], x3[1], x3[3]},

685 
q4
[3]={
x4
[0], x4[1], x4[3]};

686 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
q0
, 
q1
, 
q2
, 
q3
, 
q4
,

687 &
az0
, &
az1
, &
az2
, &
az3
, &
az4
))  0;

688 
©0
, 
©1
, 
©2
, 
©3
, 
©4
;

689 if(!
	`sim∂ex_öãr£˘i⁄3d
(
k
, 
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

690 &
©0
, &
©1
, &
©2
, &
©3
, &
©4
))  0;

692 
checkx
, 
checky
, 
checkz
, 
checkt
;

693 if(
k
==1){

694 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]+
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0]+
ax4
*
x4
[0])

695 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]+
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1]+
ax4
*
x4
[1])

696 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]+
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]+
ax4
*
x4
[2])

697 +
°d
::
	`Ábs
(-
ax0
*
x0
[3]+
ax1
*
x1
[3]+
ax2
*
x2
[3]+
ax3
*
x3
[3]+
ax4
*
x4
[3]);

698 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]+
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0]+
ay4
*
x4
[0])

699 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]+
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1]+
ay4
*
x4
[1])

700 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]+
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]+
ay4
*
x4
[2])

701 +
°d
::
	`Ábs
(-
ay0
*
x0
[3]+
ay1
*
x1
[3]+
ay2
*
x2
[3]+
ay3
*
x3
[3]+
ay4
*
x4
[3]);

702 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]+
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0]+
az4
*
x4
[0])

703 +
°d
::
	`Ábs
(-
az0
*
x0
[1]+
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1]+
az4
*
x4
[1])

704 +
°d
::
	`Ábs
(-
az0
*
x0
[2]+
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]+
az4
*
x4
[2])

705 +
°d
::
	`Ábs
(-
az0
*
x0
[3]+
az1
*
x1
[3]+
az2
*
x2
[3]+
az3
*
x3
[3]+
az4
*
x4
[3]);

706 
checkt
=
°d
::
	`Ábs
(-
©0
*
x0
[0]+
©1
*
x1
[0]+
©2
*
x2
[0]+
©3
*
x3
[0]+
©4
*
x4
[0])

707 +
°d
::
	`Ábs
(-
©0
*
x0
[1]+
©1
*
x1
[1]+
©2
*
x2
[1]+
©3
*
x3
[1]+
©4
*
x4
[1])

708 +
°d
::
	`Ábs
(-
©0
*
x0
[2]+
©1
*
x1
[2]+
©2
*
x2
[2]+
©3
*
x3
[2]+
©4
*
x4
[2])

709 +
°d
::
	`Ábs
(-
©0
*
x0
[3]+
©1
*
x1
[3]+
©2
*
x2
[3]+
©3
*
x3
[3]+
©4
*
x4
[3]);

711 
checkx
=
°d
::
	`Ábs
(-
ax0
*
x0
[0]-
ax1
*
x1
[0]+
ax2
*
x2
[0]+
ax3
*
x3
[0]+
ax4
*
x4
[0])

712 +
°d
::
	`Ábs
(-
ax0
*
x0
[1]-
ax1
*
x1
[1]+
ax2
*
x2
[1]+
ax3
*
x3
[1]+
ax4
*
x4
[1])

713 +
°d
::
	`Ábs
(-
ax0
*
x0
[2]-
ax1
*
x1
[2]+
ax2
*
x2
[2]+
ax3
*
x3
[2]+
ax4
*
x4
[2])

714 +
°d
::
	`Ábs
(-
ax0
*
x0
[3]-
ax1
*
x1
[3]+
ax2
*
x2
[3]+
ax3
*
x3
[3]+
ax4
*
x4
[3]);

715 
checky
=
°d
::
	`Ábs
(-
ay0
*
x0
[0]-
ay1
*
x1
[0]+
ay2
*
x2
[0]+
ay3
*
x3
[0]+
ay4
*
x4
[0])

716 +
°d
::
	`Ábs
(-
ay0
*
x0
[1]-
ay1
*
x1
[1]+
ay2
*
x2
[1]+
ay3
*
x3
[1]+
ay4
*
x4
[1])

717 +
°d
::
	`Ábs
(-
ay0
*
x0
[2]-
ay1
*
x1
[2]+
ay2
*
x2
[2]+
ay3
*
x3
[2]+
ay4
*
x4
[2])

718 +
°d
::
	`Ábs
(-
ay0
*
x0
[3]-
ay1
*
x1
[3]+
ay2
*
x2
[3]+
ay3
*
x3
[3]+
ay4
*
x4
[3]);

719 
checkz
=
°d
::
	`Ábs
(-
az0
*
x0
[0]-
az1
*
x1
[0]+
az2
*
x2
[0]+
az3
*
x3
[0]+
az4
*
x4
[0])

720 +
°d
::
	`Ábs
(-
az0
*
x0
[1]-
az1
*
x1
[1]+
az2
*
x2
[1]+
az3
*
x3
[1]+
az4
*
x4
[1])

721 +
°d
::
	`Ábs
(-
az0
*
x0
[2]-
az1
*
x1
[2]+
az2
*
x2
[2]+
az3
*
x3
[2]+
az4
*
x4
[2])

722 +
°d
::
	`Ábs
(-
az0
*
x0
[3]-
az1
*
x1
[3]+
az2
*
x2
[3]+
az3
*
x3
[3]+
az4
*
x4
[3]);

723 
checkt
=
°d
::
	`Ábs
(-
©0
*
x0
[0]-
©1
*
x1
[0]+
©2
*
x2
[0]+
©3
*
x3
[0]+
©4
*
x4
[0])

724 +
°d
::
	`Ábs
(-
©0
*
x0
[1]-
©1
*
x1
[1]+
©2
*
x2
[1]+
©3
*
x3
[1]+
©4
*
x4
[1])

725 +
°d
::
	`Ábs
(-
©0
*
x0
[2]-
©1
*
x1
[2]+
©2
*
x2
[2]+
©3
*
x3
[2]+
©4
*
x4
[2])

726 +
°d
::
	`Ábs
(-
©0
*
x0
[3]-
©1
*
x1
[3]+
©2
*
x2
[3]+
©3
*
x3
[3]+
©4
*
x4
[3]);

728 if(
checkx
<=
checky
 && checkx<=
checkz
 && checkx<=
checkt
){

729 *
Æpha0
=
ax0
;

730 *
Æpha1
=
ax1
;

731 *
Æpha2
=
ax2
;

732 *
Æpha3
=
ax3
;

733 }if(
checky
<=
checkz
 && checky<=
checkt
){

734 *
Æpha0
=
ay0
;

735 *
Æpha1
=
ay1
;

736 *
Æpha2
=
ay2
;

737 *
Æpha3
=
ay3
;

738 }if(
checkz
<=
checkt
){

739 *
Æpha0
=
az0
;

740 *
Æpha1
=
az1
;

741 *
Æpha2
=
az2
;

742 *
Æpha3
=
az3
;

744 *
Æpha0
=
©0
;

745 *
Æpha1
=
©1
;

746 *
Æpha2
=
©2
;

747 *
Æpha3
=
©3
;

750 
	}
}

754 
	$sim∂ex_öãr£˘i⁄4d
(
k
,

755 c⁄° * 
x0
,

756 c⁄° * 
x1
,

757 c⁄° * 
x2
,

758 c⁄° * 
x3
,

759 c⁄° * 
x4
,

760 c⁄° * 
x5
,

761 * 
Æpha0
,

762 * 
Æpha1
,

763 * 
Æpha2
,

764 * 
Æpha3
,

765 * 
Æpha4
,

766 * 
Æpha5
)

768 
	`as£π
(1<=
k
 && k<=5);

769 
sum1
, 
sum2
;

770 
k
){

772 *
Æpha1
=-
	`‹õ¡©i⁄4d
(
x0
, 
x2
, 
x3
, 
x4
, 
x5
);

773 *
Æpha2

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x3
, 
x4
, 
x5
);

774 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha2
))  0;

775 *
Æpha3
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x4
, 
x5
);

776 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha3
))  0;

777 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

778 *
Æpha4

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x5
);

779 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha4
))  0;

780 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha4
))  0;

781 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

782 *
Æpha5
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
);

783 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha5
))  0;

784 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha5
))  0;

785 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha5
))  0;

786 if(!
	`ßme_sign
(*
Æpha4
, *
Æpha5
))  0;

789 
sum2
=*
Æpha1
+*
Æpha2
+*
Æpha3
+*
Æpha4
+*
Æpha5
;

790 if(
sum2
){

791 *
Æpha0
=1;

792 *
Æpha1
/=
sum2
;

793 *
Æpha2
/=
sum2
;

794 *
Æpha3
/=
sum2
;

795 *
Æpha4
/=
sum2
;

796 *
Æpha5
/=
sum2
;

799 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x2
, 
x3
, 
x4
, 
x5
,

800 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

801 *
Æpha1
=0;

804 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x1
, 
x3
, 
x4
, 
x5
,

805 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

806 *
Æpha2
=0;

809 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x1
, 
x2
, 
x4
, 
x5
,

810 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
, 
Æpha5
)){

811 *
Æpha3
=0;

814 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x1
, 
x2
, 
x3
, 
x5
,

815 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha5
)){

816 *
Æpha4
=0;

819 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

820 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

821 *
Æpha5
=0;

828 *
Æpha0

	`‹õ¡©i⁄4d
(
x1
, 
x2
, 
x3
, 
x4
, 
x5
);

829 *
Æpha1
=-
	`‹õ¡©i⁄4d
(
x0
, 
x2
, 
x3
, 
x4
, 
x5
);

830 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

831 *
Æpha2

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x3
, 
x4
, 
x5
);

832 *
Æpha3
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x4
, 
x5
);

833 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha3
))  0;

834 *
Æpha4

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x5
);

835 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha4
))  0;

836 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

837 *
Æpha5
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
);

838 if(!
	`ßme_sign
(*
Æpha2
, *
Æpha5
))  0;

839 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha5
))  0;

840 if(!
	`ßme_sign
(*
Æpha4
, *
Æpha5
))  0;

842 
sum1
=*
Æpha0
+*
Æpha1
;

843 
sum2
=*
Æpha2
+*
Æpha3
+*
Æpha4
+*
Æpha5
;

844 if(
sum1
 && 
sum2
){

845 *
Æpha0
/=
sum1
;

846 *
Æpha1
/=
sum1
;

847 *
Æpha2
/=
sum2
;

848 *
Æpha3
/=
sum2
;

849 *
Æpha4
/=
sum2
;

850 *
Æpha5
/=
sum2
;

853 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x1
, 
x2
, 
x3
, 
x4
, 
x5
,

854 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

855 *
Æpha0
=0;

858 if(
	`sim∂ex_öãr£˘i⁄4d
(1, 
x0
, 
x2
, 
x3
, 
x4
, 
x5
,

859 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

860 *
Æpha1
=0;

863 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x1
, 
x3
, 
x4
, 
x5
,

864 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

865 *
Æpha2
=0;

868 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x1
, 
x2
, 
x4
, 
x5
,

869 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
, 
Æpha5
)){

870 *
Æpha3
=0;

873 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x1
, 
x2
, 
x3
, 
x5
,

874 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha5
)){

875 *
Æpha4
=0;

878 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x1
, 
x2
, 
x3
, 
x4
,

879 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

880 *
Æpha5
=0;

887 *
Æpha0

	`‹õ¡©i⁄4d
(
x1
, 
x2
, 
x3
, 
x4
, 
x5
);

888 *
Æpha1
=-
	`‹õ¡©i⁄4d
(
x0
, 
x2
, 
x3
, 
x4
, 
x5
);

889 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha1
))  0;

890 *
Æpha2

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x3
, 
x4
, 
x5
);

891 if(!
	`ßme_sign
(*
Æpha0
, *
Æpha2
))  0;

892 if(!
	`ßme_sign
(*
Æpha1
, *
Æpha2
))  0;

893 *
Æpha3
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x4
, 
x5
);

894 *
Æpha4

	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x5
);

895 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha4
))  0;

896 *
Æpha5
=-
	`‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
);

897 if(!
	`ßme_sign
(*
Æpha3
, *
Æpha5
))  0;

898 if(!
	`ßme_sign
(*
Æpha4
, *
Æpha5
))  0;

900 
sum1
=*
Æpha0
+*
Æpha1
+*
Æpha2
;

901 
sum2
=*
Æpha3
+*
Æpha4
+*
Æpha5
;

902 if(
sum1
 && 
sum2
){

903 *
Æpha0
/=
sum1
;

904 *
Æpha1
/=
sum1
;

905 *
Æpha2
/=
sum1
;

906 *
Æpha3
/=
sum2
;

907 *
Æpha4
/=
sum2
;

908 *
Æpha5
/=
sum2
;

911 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x1
, 
x2
, 
x3
, 
x4
, 
x5
,

912 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

913 *
Æpha0
=0;

916 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x2
, 
x3
, 
x4
, 
x5
,

917 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

918 *
Æpha1
=0;

921 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x0
, 
x1
, 
x3
, 
x4
, 
x5
,

922 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
, 
Æpha5
)){

923 *
Æpha2
=0;

926 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x4
, 
x5
, 
x0
, 
x1
, 
x2
,

927 
Æpha4
, 
Æpha5
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

928 *
Æpha3
=0;

931 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x3
, 
x5
, 
x0
, 
x1
, 
x2
,

932 
Æpha3
, 
Æpha5
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

933 *
Æpha4
=0;

936 if(
	`sim∂ex_öãr£˘i⁄4d
(2, 
x3
, 
x4
, 
x0
, 
x1
, 
x2
,

937 
Æpha3
, 
Æpha4
, 
Æpha0
, 
Æpha1
, 
Æpha2
)){

938 *
Æpha5
=0;

946  
	`sim∂ex_öãr£˘i⁄4d
(6-
k
, 
x5
, 
x4
, 
x3
, 
x2
, 
x1
, 
x0
,

947 
Æpha5
, 
Æpha4
, 
Æpha3
, 
Æpha2
, 
Æpha1
, 
Æpha0
);

951 
	}
}

	@common/tunicate/interval.cpp

10 
	~<öãrvÆ.h
>

12 
	gI¡îvÆ
::
s_¥evious_roundög_mode
 = ~0;

	@common/tunicate/interval.h

10 #i‚de‡
TUNICATE_INTERVAL_H


11 
	#TUNICATE_INTERVAL_H


	)

13 
	~<ˇs£π
>

14 
	~<„nv_ö˛ude.h
>

15 
	~<öãrvÆba£.h
>

17 
˛ass
 
	gI¡îvÆ
;

18 
I¡îvÆ
 
	tI¡îvÆTy≥
;

20 #i‚de‡
DEBUG


21 
	#VERIFY
(Ë()0;

	)

23 
	#VERIFY
(Ë
	`as£π
–-
v
[0] <= v[1] ); \

24 
	`as£π
–
v
[0] == v[0] ); \

25 
	`as£π
–
v
[1] =v[1] );

	)

28 #i‚de‡
DEBUG


29 
	#CHECK_ROUNDING_MODE
(Ë()0;

	)

31 
	#CHECK_ROUNDING_MODE
(Ë
	`as£π
–
	`„gëround
–Ë=
FE_UPWARD
 );

	)

45 ˛as†
	cI¡îvÆ
 : 
public
 
I¡îvÆBa£


49 
public
:

52 
v
[2];

54 
	ms_¥evious_roundög_mode
;

56 
	mpublic
:

58 
I¡îvÆ
–
vÆ
 );

59 
I¡îvÆ
–
À·
, 
right
 );

60 
I¡îvÆ
();

62 
	mvútuÆ
 ~
	$I¡îvÆ
() {}

64 
vútuÆ
 
	$°‹ed_À·
() const;

65 
vútuÆ
 
	$°‹ed_right
() const;

67 
vútuÆ
 
I¡îvÆ
& 
›î©‹
+=(c⁄° I¡îvÆ &
rhs
);

68 
vútuÆ
 
I¡îvÆ
& 
›î©‹
-=(c⁄° I¡îvÆ &
rhs
);

69 
vútuÆ
 
I¡îvÆ
& 
›î©‹
*=(c⁄° I¡îvÆ &
rhs
);

71 
vútuÆ
 
I¡îvÆ
 
›î©‹
+(c⁄° I¡îvÆ &
Ÿhî
) const;

72 
vútuÆ
 
I¡îvÆ
 
›î©‹
-(c⁄° I¡îvÆ &
Ÿhî
) const;

73 
vútuÆ
 
I¡îvÆ
 
›î©‹
*(c⁄° I¡îvÆ &
Ÿhî
) const;

75 
vútuÆ
 
I¡îvÆ
 
›î©‹
-( ) const;

77 
	`begö_•ecül_¨ôhmëic
();

78 
	`íd_•ecül_¨ôhmëic
();

80 
	}
};

82 
ölöe
 
¸óã_‰om_doubÀ
–
a
, 
I¡îvÆ
& 
out
 );

87 
ölöe
 
	gI¡îvÆ
::
	$I¡îvÆ
–
vÆ
 )

89 
v
[0] = -
vÆ
;

90 
v
[1] = 
vÆ
;

91 
	`VERIFY
();

92 
	}
}

96 
ölöe
 
	gI¡îvÆ
::
	$I¡îvÆ
–
À·
, 
right
 )

98 
	`as£π
–
À·
 <
right
 );

99 
v
[0] = -
À·
;

100 
v
[1] = 
right
;

101 
	`VERIFY
();

102 
	}
}

106 
ölöe
 
	gI¡îvÆ
::
	$I¡îvÆ
()

108 
v
[0] = 0;

109 
v
[1] = 0;

110 
	`VERIFY
();

111 
	}
}

115 
ölöe
 
	gI¡îvÆ
::
	$°‹ed_À·
() const

117  
v
[0];

118 
	}
}

122 
ölöe
 
	gI¡îvÆ
::
	$°‹ed_right
() const

124  
v
[1];

125 
	}
}

130 
ölöe
 
	gI¡îvÆ
& I¡îvÆ::
›î©‹
+=(c⁄° 
I¡îvÆ
 &
rhs
)

132 
CHECK_ROUNDING_MODE
();

133 
VERIFY
();

134 
	gv
[0] +
rhs
.
v
[0];

135 
	gv
[1] +
rhs
.
v
[1];

136 
VERIFY
();

138  *
	gthis
;

143 
ölöe
 
	gI¡îvÆ
& I¡îvÆ::
›î©‹
-=–c⁄° 
I¡îvÆ
& 
rhs
 )

145 
CHECK_ROUNDING_MODE
();

146 
	gv
[0] +
rhs
.
v
[1];

147 
	gv
[1] +
rhs
.
v
[0];

148 
VERIFY
();

149  *
	gthis
;

154 
ölöe
 
	gI¡îvÆ
& I¡îvÆ::
›î©‹
*=–c⁄° 
I¡îvÆ
& 
rhs
 )

156 
CHECK_ROUNDING_MODE
();

157 
I¡îvÆ
 
	gp
 = (*
this
Ë* 
rhs
;

158 *
	gthis
 = 
p
;

159  *
	gthis
;

164 
ölöe
 
I¡îvÆ
 
	gI¡îvÆ
::
›î©‹
+(c⁄° I¡îvÆ &
Ÿhî
) const

166 
CHECK_ROUNDING_MODE
();

167 
	gv0
 = 
v
[0] + 
Ÿhî
.v[0];

168 
	gv1
 = 
v
[1] + 
Ÿhî
.v[1 ];

169  
I¡îvÆ
(-
v0
, 
v1
);

174 
ölöe
 
I¡îvÆ
 
	gI¡îvÆ
::
›î©‹
-(c⁄° I¡îvÆ &
Ÿhî
) const

176 
CHECK_ROUNDING_MODE
();

177 
	gv0
 = 
v
[0] + 
Ÿhî
.v[1];

178 
	gv1
 = 
v
[1] + 
Ÿhî
.v[0];

179  
I¡îvÆ
(-
v0
, 
v1
);

184 
ölöe
 
I¡îvÆ
 
	gI¡îvÆ
::
›î©‹
*(c⁄° I¡îvÆ &
Ÿhî
) const

186 
CHECK_ROUNDING_MODE
();

188 
	g√g_a
 = 
v
[0];

189 
	gb
 = 
v
[1];

190 
	g√g_c
 = 
Ÿhî
.
v
[0];

191 
	gd
 = 
Ÿhî
.
v
[1];

193 
I¡îvÆ
 
	g¥odu˘
;

195 i‡–
	gb
 <= 0 )

197 i‡–
d
 <= 0 )

199 
¥odu˘
.
v
[0] = -
b
 * 
d
;

200 
	g¥odu˘
.
	gv
[1] = 
√g_a
 * 
√g_c
;

202 i‡–-
	g√g_c
 <0 && 0 <
d
 )

204 
¥odu˘
.
v
[0] = 
√g_a
 * 
d
;

205 
	g¥odu˘
.
	gv
[1] = 
√g_a
 * 
√g_c
;

209 
	g¥odu˘
.
	gv
[0] = 
√g_a
 * 
d
;

210 
	g¥odu˘
.
	gv
[1] = 
b
 * -
√g_c
;

213 i‡–-
	g√g_a
 <0 && 0 <
b
 )

215 i‡–
d
 <= 0 )

217 
¥odu˘
.
v
[0] = 
b
 * 
√g_c
;

218 
	g¥odu˘
.
	gv
[1] = 
√g_a
 * 
√g_c
;

220 i‡–-
	g√g_c
 <0 && 0 <
d
 )

222 
¥odu˘
.
v
[0] = 
°d
::
max
–
√g_a
 * 
d
, 
b
 * 
√g_c
 );

223 
	g¥odu˘
.
	gv
[1] = 
°d
::
max
–
√g_a
 * 
√g_c
, 
b
 * 
d
 );

227 
	g¥odu˘
.
	gv
[0] = 
√g_a
 * 
d
;

228 
	g¥odu˘
.
	gv
[1] = 
b
 * 
d
;

234 i‡–
	gd
 <= 0 )

236 
¥odu˘
.
v
[0] = 
b
 * 
√g_c
;

237 
	g¥odu˘
.
	gv
[1] = -
√g_a
 * 
d
;

239 i‡–-
	g√g_c
 <0 && 0 <
d
 )

241 
¥odu˘
.
v
[0] = 
b
 * 
√g_c
;

242 
	g¥odu˘
.
	gv
[1] = 
b
 * 
d
;

246 
	g¥odu˘
.
	gv
[0] = -
√g_a
 * 
√g_c
;

247 
	g¥odu˘
.
	gv
[1] = 
b
 * 
d
;

251  
	g¥odu˘
;

258 
ölöe
 
I¡îvÆ
 
	gI¡îvÆ
::
›î©‹
-( ) const

260 
CHECK_ROUNDING_MODE
();

261  
I¡îvÆ
–-
v
[1], v[0] );

266 
ölöe
 
	gI¡îvÆ
::
	$begö_•ecül_¨ôhmëic
()

268 
s_¥evious_roundög_mode
 = 
	`„gëround
();

269 
	`„£åound
–
FE_UPWARD
 );

270 
	}
}

274 
ölöe
 
	gI¡îvÆ
::
	$íd_•ecül_¨ôhmëic
()

276 
	`„£åound
–
s_¥evious_roundög_mode
 );

277 
	}
}

282 
ölöe
 
	$¸óã_‰om_doubÀ
–
a
, 
I¡îvÆ
& 
out
 )

284 
out
.
v
[0] = -
a
;

285 
out
.
v
[1] = 
a
;

286 
	}
}

	@common/tunicate/intervalbase.h

11 #i‚de‡
TUNICATE_INTERVAL_BASE_H


12 
	#TUNICATE_INTERVAL_BASE_H


	)

14 
	~<vec.h
>

16 ˛as†
	cI¡îvÆBa£


19 
	mpublic
:

21 
ölöe
 
vútuÆ
 ~
	$I¡îvÆBa£
() {}

23 
vútuÆ
 
	$°‹ed_À·
() const = 0;

24 
vútuÆ
 
	$°‹ed_right
() const = 0;

26 
ölöe
 
vútuÆ
 
Vec2d
 
	$gë_a˘uÆ_öãrvÆ
() const;

27 
ölöe
 
vútuÆ
 
Vec2d
 
	$gë_öã∫Æ_ª¥e£¡©i⁄
() const;

29 
ölöe
 
vútuÆ
 
boﬁ
 
	$ödeföôe_sign
() const;

30 
ölöe
 
vútuÆ
 
boﬁ
 
	$is_˚πaöly_√g©ive
( ) const;

31 
ölöe
 
vútuÆ
 
boﬁ
 
	$is_˚πaöly_posôive
( ) const;

32 
ölöe
 
vútuÆ
 
boﬁ
 
	$is_˚πaöly_zîo
( ) const;

34 
ölöe
 
vútuÆ
 
boﬁ
 
	$˚πaöly_›posôe_sign
–c⁄° 
I¡îvÆBa£
& 
Ÿhî
 ) const;

36 
ölöe
 
vútuÆ
 
boﬁ
 
	$ßme_sign
–c⁄° 
I¡îvÆBa£
& 
Ÿhî
 ) const;

38 
ölöe
 
vútuÆ
 
	$e°im©e
() const;

40 
	}
};

45 
ölöe
 
Vec2d
 
	gI¡îvÆBa£
::
	$gë_a˘uÆ_öãrvÆ
() const

47  
	`Vec2d
–-
	`°‹ed_À·
(), 
	`°‹ed_right
() );

48 
	}
}

52 
ölöe
 
Vec2d
 
	gI¡îvÆBa£
::
	$gë_öã∫Æ_ª¥e£¡©i⁄
() const

54  
	`Vec2d
–
	`°‹ed_À·
(), 
	`°‹ed_right
() );

55 
	}
}

62 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$ödeföôe_sign
() const

64  ( 
	`°‹ed_À·
(Ë>0 && 
	`°‹ed_right
() >= 0 );

65 
	}
}

69 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$is_˚πaöly_√g©ive
( ) const

71  ( 
	`°‹ed_right
() < 0 );

72 
	}
}

76 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$is_˚πaöly_posôive
( ) const

78  ( 
	`°‹ed_À·
() < 0 );

79 
	}
}

83 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$is_˚πaöly_zîo
( ) const

85  ( 
	`°‹ed_À·
(Ë=0 && 
	`°‹ed_right
() == 0 );

86 
	}
}

90 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$˚πaöly_›posôe_sign
–c⁄° 
I¡îvÆBa£
& 
Ÿhî
 ) const

92  ( ( 
this
->
	`is_˚πaöly_√g©ive
(Ë&& 
Ÿhî
.
	`is_˚πaöly_posôive
() ) ||

93 –
this
->
	`is_˚πaöly_posôive
(Ë&& 
Ÿhî
.
	`is_˚πaöly_√g©ive
() ) );

94 
	}
}

98 
ölöe
 
boﬁ
 
	gI¡îvÆBa£
::
	$ßme_sign
–c⁄° 
I¡îvÆBa£
& 
Ÿhî
 ) const

100  ( 
this
->
	`ödeföôe_sign
() ||

101 
Ÿhî
.
	`ödeföôe_sign
() ||

102 –
this
->
	`is_˚πaöly_√g©ive
(Ë&& 
Ÿhî
.is_certainly_negative() ) ||

103 –
this
->
	`is_˚πaöly_posôive
(Ë&& 
Ÿhî
.is_certainly_positive() ) );

104 
	}
}

109 
ölöe
 
	gI¡îvÆBa£
::
	$e°im©e
() const

111 
e°
 = 0.5 * (-
	`°‹ed_À·
(Ë+ 
	`°‹ed_right
());

113 i‡–
e°
 =0 && !
	`is_˚πaöly_zîo
() )

116 
e°
 = 1e-20;

119  
e°
;

120 
	}
}

124 
ölöe
 
boﬁ
 
	$˚πaöly_›posôe_sign
–c⁄° 
I¡îvÆBa£
& 
a
, c⁄° I¡îvÆBa£& 
b
 )

126  
a
.
	`˚πaöly_›posôe_sign
–
b
 );

127 
	}
}

131 
ölöe
 
boﬁ
 
	$ßme_sign
–c⁄° 
I¡îvÆBa£
& 
a
, c⁄° I¡îvÆBa£& 
b
 )

133  
a
.
	`ßme_sign
(
b
);

134 
	}
}

	@common/tunicate/neg.cpp

3 
	~<√g.h
>

13 
	$√g
(
x
)

15  -
x
;

16 
	}
}

	@common/tunicate/neg.h

1 #i‚de‡
NEG_H


2 
	#NEG_H


	)

6 #ifde‡
__˝lu•lus


11 
√g
(
x
);

13 #ifde‡
__˝lu•lus


	@common/tunicate/orientation.cpp

3 
	~<ˇs£π
>

4 
	~<„nv_ö˛ude.h
>

5 
	~<cm©h
>

6 
	~<limôs
>

7 
	~<tuniˇã.h
>

8 
	~<ex∑nsi⁄.h
>

9 
	~<√g.h
>

13 
	$‹õ¡©i⁄1d
(c⁄° * 
x0
,

14 c⁄° * 
x1
)

16 
	`as£π
(
x0
 && 
x1
);

17  
x0
[0]-
x1
[0];

18 
	}
}

22 
	$sim∂e_‹õ¡©i⁄2d
(c⁄° * 
x0
,

23 c⁄° * 
x1
,

24 c⁄° * 
x2
)

26  
x0
[0]*
x1
[1] + 
	`√g
(x0[0])*
x2
[1]

27 + 
x1
[0]*
x2
[1] + 
	`√g
(x1[0])*
x0
[1]

28 + 
x2
[0]*
x0
[1] + 
	`√g
(x2[0])*
x1
[1];

29 
	}
}

33 
	$öãrvÆ_‹õ¡©i⁄2d
(c⁄° * 
x0
,

34 c⁄° * 
x1
,

35 c⁄° * 
x2
,

36 * 
lowî
,

37 * 
uµî
)

39 
	`„£åound
(
FE_DOWNWARD
);

40 *
lowî
=
	`sim∂e_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

41 
	`„£åound
(
FE_UPWARD
);

42 *
uµî
=
	`sim∂e_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

43 
	`as£π
(*
lowî
<=*
uµî
);

44 
	}
}

49 
	$ex∑nsi⁄_‹õ¡©i⁄2d
(c⁄° * 
x0
,

50 c⁄° * 
x1
,

51 c⁄° * 
x2
,

52 
ex∑nsi⁄
& 
ªsu…
)

54 
ex∑nsi⁄
 
¥odu˘
;

55 
	`mu…ùly
(
x0
[0], 
x1
[1], 
ªsu…
);

56 
	`mu…ùly
(
x0
[0], -
x2
[1], 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

57 
	`mu…ùly
(
x1
[0], 
x2
[1], 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

58 
	`mu…ùly
(
x1
[0], -
x0
[1], 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

59 
	`mu…ùly
(
x2
[0], 
x0
[1], 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

60 
	`mu…ùly
(
x2
[0], -
x1
[1], 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

61 
	}
}

67 
	$accuøã_‹õ¡©i⁄2d
(c⁄° * 
x0
,

68 c⁄° * 
x1
,

69 c⁄° * 
x2
)

71 
ex∑nsi⁄
 
ªsu…
;

72 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
, 
ªsu…
);

73  
	`e°im©e
(
ªsu…
);

74 
	}
}

78 
	$‹õ¡©i⁄2d
(c⁄° * 
x0
,

79 c⁄° * 
x1
,

80 c⁄° * 
x2
)

82 
	`as£π
(
x0
 && 
x1
 && 
x2
);

83 
lowî
, 
uµî
;

84 
	`öãrvÆ_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
, &
lowî
, &
uµî
);

85 
	`„£åound
(
FE_TONEAREST
);

86 if(
uµî
<0 || 
lowî
>0)

87  0.5*(
lowî
+
uµî
);

88 if(
lowî
==
uµî
)

91  
	`accuøã_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

92 
	}
}

98 
	$thªe_¥odu˘
(
a
,

99 
b
,

100 
c
)

102 if(
a
>0)

103  
a
*(
b
*
c
);

105  
	`√g
(
a
)*(-
b
*
c
);

106 
	}
}

110 
	$sim∂e_‹õ¡©i⁄3d
(c⁄° * 
x0
,

111 c⁄° * 
x1
,

112 c⁄° * 
x2
,

113 c⁄° * 
x3
)

115  
	`thªe_¥odu˘
–
x0
[0], 
x1
[1], 
x2
[2])

116 + 
	`thªe_¥odu˘
(-
x0
[0], 
x1
[1], 
x3
[2])

117 + 
	`thªe_¥odu˘
(-
x0
[0], 
x2
[1], 
x1
[2])

118 + 
	`thªe_¥odu˘
–
x0
[0], 
x2
[1], 
x3
[2])

119 + 
	`thªe_¥odu˘
–
x0
[0], 
x3
[1], 
x1
[2])

120 + 
	`thªe_¥odu˘
(-
x0
[0], 
x3
[1], 
x2
[2])

122 + 
	`thªe_¥odu˘
(-
x1
[0], 
x0
[1], 
x2
[2])

123 + 
	`thªe_¥odu˘
–
x1
[0], 
x0
[1], 
x3
[2])

124 + 
	`thªe_¥odu˘
–
x1
[0], 
x2
[1], 
x0
[2])

125 + 
	`thªe_¥odu˘
(-
x1
[0], 
x2
[1], 
x3
[2])

126 + 
	`thªe_¥odu˘
(-
x1
[0], 
x3
[1], 
x0
[2])

127 + 
	`thªe_¥odu˘
–
x1
[0], 
x3
[1], 
x2
[2])

129 + 
	`thªe_¥odu˘
–
x2
[0], 
x0
[1], 
x1
[2])

130 + 
	`thªe_¥odu˘
(-
x2
[0], 
x0
[1], 
x3
[2])

131 + 
	`thªe_¥odu˘
(-
x2
[0], 
x1
[1], 
x0
[2])

132 + 
	`thªe_¥odu˘
–
x2
[0], 
x1
[1], 
x3
[2])

133 + 
	`thªe_¥odu˘
–
x2
[0], 
x3
[1], 
x0
[2])

134 + 
	`thªe_¥odu˘
(-
x2
[0], 
x3
[1], 
x1
[2])

136 + 
	`thªe_¥odu˘
(-
x3
[0], 
x0
[1], 
x1
[2])

137 + 
	`thªe_¥odu˘
–
x3
[0], 
x0
[1], 
x2
[2])

138 + 
	`thªe_¥odu˘
–
x3
[0], 
x1
[1], 
x0
[2])

139 + 
	`thªe_¥odu˘
(-
x3
[0], 
x1
[1], 
x2
[2])

140 + 
	`thªe_¥odu˘
(-
x3
[0], 
x2
[1], 
x0
[2])

141 + 
	`thªe_¥odu˘
–
x3
[0], 
x2
[1], 
x1
[2]);

142 
	}
}

146 
	$öãrvÆ_‹õ¡©i⁄3d
(c⁄° * 
x0
,

147 c⁄° * 
x1
,

148 c⁄° * 
x2
,

149 c⁄° * 
x3
,

150 * 
lowî
,

151 * 
uµî
)

153 
	`„£åound
(
FE_DOWNWARD
);

154 *
lowî
=
	`sim∂e_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
);

155 
	`„£åound
(
FE_UPWARD
);

156 *
uµî
=
	`sim∂e_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
);

157 #ifde‡
_MSC_VER


158 
	`as£π
–!
	`_i¢™
(*
lowî
) );

159 
	`as£π
–!
	`_i¢™
(*
uµî
) );

160 
	`as£π
–
	`_föôe
(*
lowî
) );

161 
	`as£π
–
	`_föôe
(*
uµî
) );

163 
	`as£π
–!
°d
::
	`i¢™
(*
lowî
) );

164 
	`as£π
–!
°d
::
	`i¢™
(*
uµî
) );

165 
	`as£π
–!
°d
::
	`isöf
(*
lowî
) );

166 
	`as£π
–!
°d
::
	`isöf
(*
uµî
) );

168 
	`as£π
(*
lowî
<=*
uµî
);

169 
	}
}

174 
	$ex∑nsi⁄_‹õ¡©i⁄3d
(c⁄° * 
x0
,

175 c⁄° * 
x1
,

176 c⁄° * 
x2
,

177 c⁄° * 
x3
,

178 
ex∑nsi⁄
& 
ªsu…
)

180 
ex∑nsi⁄
 
d
, 
p
;

181 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x1
, 
x2
, 
x3
, 
d
);

182 
	`mu…ùly
(
x0
[2], 
d
, 
ªsu…
);

184 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
, 
x2
, 
x3
, 
d
);

185 
	`mu…ùly
(-
x1
[2], 
d
, 
p
);

186 
	`add
(
ªsu…
, 
p
,Ñesult);

188 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x3
, 
d
);

189 
	`mu…ùly
(
x2
[2], 
d
, 
p
);

190 
	`add
(
ªsu…
, 
p
,Ñesult);

192 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
, 
d
);

193 
	`mu…ùly
(-
x3
[2], 
d
, 
p
);

194 
	`add
(
ªsu…
, 
p
,Ñesult);

196 
	}
}

202 
	$accuøã_‹õ¡©i⁄3d
(c⁄° * 
x0
,

203 c⁄° * 
x1
,

204 c⁄° * 
x2
,

205 c⁄° * 
x3
)

207 
ex∑nsi⁄
 
ªsu…
;

208 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, 
ªsu…
);

209  
	`e°im©e
(
ªsu…
);

210 
	}
}

214 
	$‹õ¡©i⁄3d
(c⁄° * 
x0
,

215 c⁄° * 
x1
,

216 c⁄° * 
x2
,

217 c⁄° * 
x3
)

219 
	`as£π
(
x0
 && 
x1
 && 
x2
 && 
x3
);

220 
lowî
, 
uµî
;

221 
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, &
lowî
, &
uµî
);

222 
	`„£åound
(
FE_TONEAREST
);

223 if(
uµî
<0 || 
lowî
>0)

224  0.5*(
lowî
+
uµî
);

225 if(
lowî
==
uµî
)

228  
	`accuøã_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
);

229 
	}
}

233 
	$öãrvÆ_‹õ¡©i⁄_time3d
(c⁄° * 
x0
, 
time0
,

234 c⁄° * 
x1
, 
time1
,

235 c⁄° * 
x2
, 
time2
,

236 c⁄° * 
x3
, 
time3
,

237 c⁄° * 
x4
, 
time4
,

238 * 
lowî
,

239 * 
uµî
)

241 
lowî1234
=0, 
uµî1234
=0;

242 if(
time0
Ë
	`öãrvÆ_‹õ¡©i⁄3d
(
x1
, 
x2
, 
x3
, 
x4
, &
lowî1234
, &
uµî1234
);

243 
lowî0234
=0, 
uµî0234
=0;

244 if(
time1
Ë
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
, &
lowî0234
, &
uµî0234
);

245 
lowî0134
=0, 
uµî0134
=0;

246 if(
time2
Ë
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
, &
lowî0134
, &
uµî0134
);

247 
lowî0124
=0, 
uµî0124
=0;

248 if(
time3
Ë
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
, &
lowî0124
, &
uµî0124
);

249 
lowî0123
=0, 
uµî0123
=0;

250 if(
time4
Ë
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, &
lowî0123
, &
uµî0123
);

251 
	`„£åound
(
FE_DOWNWARD
);

252 *
lowî
=-
uµî1234
+
lowî0234
-
uµî0134
+
lowî0124
-
uµî0123
;

253 
	`„£åound
(
FE_UPWARD
);

254 *
uµî
=-
lowî1234
+
uµî0234
-
lowî0134
+
uµî0124
-
lowî0123
;

255 
	`as£π
(*
lowî
<=*
uµî
);

256 
	}
}

261 
	$ex∑nsi⁄_‹õ¡©i⁄_time3d
(c⁄° * 
x0
, 
time0
,

262 c⁄° * 
x1
, 
time1
,

263 c⁄° * 
x2
, 
time2
,

264 c⁄° * 
x3
, 
time3
,

265 c⁄° * 
x4
, ,

266 
ex∑nsi⁄
& 
ªsu…
)

268 
	`make_zîo
(
ªsu…
);

269 
ex∑nsi⁄
 
d
;

270 if(
time0
){

271 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x1
, 
x2
, 
x3
, 
x4
, 
d
);

272 
	`√g©ive
(
d
, 
ªsu…
);

274 if(
time1
){

275 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
, 
d
);

276 
	`add
(
ªsu…
, 
d
,Ñesult);

278 if(
time2
){

279 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
, 
d
);

280 
	`subåa˘
(
ªsu…
, 
d
,Ñesult);

282 if(
time3
){

283 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
, 
d
);

284 
	`add
(
ªsu…
, 
d
,Ñesult);

286 if(
time3
){

287 
	`ex∑nsi⁄_‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, 
d
);

288 
	`subåa˘
(
ªsu…
, 
d
,Ñesult);

290 
	}
}

296 
	$accuøã_‹õ¡©i⁄_time3d
(c⁄° * 
x0
, 
time0
,

297 c⁄° * 
x1
, 
time1
,

298 c⁄° * 
x2
, 
time2
,

299 c⁄° * 
x3
, 
time3
,

300 c⁄° * 
x4
, 
time4
)

302 
ex∑nsi⁄
 
ªsu…
;

303 
	`ex∑nsi⁄_‹õ¡©i⁄_time3d
(
x0
, 
time0
, 
x1
, 
time1
, 
x2
, 
time2
,

304 
x3
, 
time3
, 
x4
, 
time4
, 
ªsu…
);

305  
	`e°im©e
(
ªsu…
);

306 
	}
}

310 
	$‹õ¡©i⁄_time3d
(c⁄° * 
x0
, 
time0
,

311 c⁄° * 
x1
, 
time1
,

312 c⁄° * 
x2
, 
time2
,

313 c⁄° * 
x3
, 
time3
,

314 c⁄° * 
x4
, 
time4
)

316 
	`as£π
(
x0
 && 
x1
 && 
x2
 && 
x3
);

317 
lowî
, 
uµî
;

318 
	`öãrvÆ_‹õ¡©i⁄_time3d
(
x0
, 
time0
, 
x1
, 
time1
, 
x2
, 
time2
, 
x3
, 
time3
,

319 
x4
, 
time4
, &
lowî
, &
uµî
);

320 
	`„£åound
(
FE_TONEAREST
);

321 if(
uµî
<0 || 
lowî
>0)

322  0.5*(
lowî
+
uµî
);

323 if(
lowî
==
uµî
)

326  
	`accuøã_‹õ¡©i⁄_time3d
(
x0
, 
time0
, 
x1
, 
time1
, 
x2
, 
time2
,

327 
x3
, 
time3
, 
x4
, 
time4
);

328 
	}
}

332 
	$öãrvÆ_‹õ¡©i⁄4d
(c⁄° * 
x0
,

333 c⁄° * 
x1
,

334 c⁄° * 
x2
,

335 c⁄° * 
x3
,

336 c⁄° * 
x4
,

337 * 
lowî
,

338 * 
uµî
)

340 
lowî1234
, 
uµî1234
;

341 
	`öãrvÆ_‹õ¡©i⁄3d
(
x1
+1, 
x2
+1, 
x3
+1, 
x4
+1, &
lowî1234
, &
uµî1234
);

342 
lowî0234
, 
uµî0234
;

343 
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
+1, 
x2
+1, 
x3
+1, 
x4
+1, &
lowî0234
, &
uµî0234
);

344 
lowî0134
, 
uµî0134
;

345 
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
+1, 
x1
+1, 
x3
+1, 
x4
+1, &
lowî0134
, &
uµî0134
);

346 
lowî0124
, 
uµî0124
;

347 
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
+1, 
x1
+1, 
x2
+1, 
x4
+1, &
lowî0124
, &
uµî0124
);

348 
lowî0123
, 
uµî0123
;

349 
	`öãrvÆ_‹õ¡©i⁄3d
(
x0
+1, 
x1
+1, 
x2
+1, 
x3
+1, &
lowî0123
, &
uµî0123
);

350 
	`„£åound
(
FE_DOWNWARD
);

351 *
lowî

x0
[0]*(x0[0]<0 ? 
uµî1234
 : 
lowî1234
)

352 +
	`√g
(
x1
[0])*(x1[0]>0 ? 
uµî0234
 : 
lowî0234
)

353 +
x2
[0]*(x2[0]<0 ? 
uµî0134
 : 
lowî0134
)

354 +
	`√g
(
x3
[0])*(x3[0]>0 ? 
uµî0124
 : 
lowî0124
)

355 +
x4
[0]*(x4[0]<0 ? 
uµî0123
 : 
lowî0123
);

356 
	`„£åound
(
FE_UPWARD
);

357 *
uµî

x0
[0]*(x0[0]>0 ? 
uµî1234
 : 
lowî1234
)

358 +
	`√g
(
x1
[0])*(x1[0]<0 ? 
uµî0234
 : 
lowî0234
)

359 +
x2
[0]*(x2[0]>0 ? 
uµî0134
 : 
lowî0134
)

360 +
	`√g
(
x3
[0])*(x3[0]<0 ? 
uµî0124
 : 
lowî0124
)

361 +
x4
[0]*(x4[0]>0 ? 
uµî0123
 : 
lowî0123
);

362 
	`as£π
(*
lowî
<=*
uµî
);

363 
	}
}

368 
	$ex∑nsi⁄_‹õ¡©i⁄4d
(c⁄° * 
x0
,

369 c⁄° * 
x1
,

370 c⁄° * 
x2
,

371 c⁄° * 
x3
,

372 c⁄° * 
x4
,

373 
ex∑nsi⁄
& 
ªsu…
)

376 
ex∑nsi⁄
 
d012
, 
d013
, 
d014
, 
d023
, 
d024
, 
d034
, 
d123
, 
d124
, 
d134
, 
d234
;

377 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x1
+2, 
x2
+2, 
d012
);

378 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x1
+2, 
x3
+2, 
d013
);

379 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x1
+2, 
x4
+2, 
d014
);

380 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x2
+2, 
x3
+2, 
d023
);

381 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x2
+2, 
x4
+2, 
d024
);

382 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x0
+2, 
x3
+2, 
x4
+2, 
d034
);

383 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x1
+2, 
x2
+2, 
x3
+2, 
d123
);

384 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x1
+2, 
x2
+2, 
x4
+2, 
d124
);

385 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x1
+2, 
x3
+2, 
x4
+2, 
d134
);

386 
	`ex∑nsi⁄_‹õ¡©i⁄2d
(
x2
+2, 
x3
+2, 
x4
+2, 
d234
);

389 
ex∑nsi⁄
 
d0123
, 
d0124
, 
d0134
, 
d0234
, 
d1234
, 
¥odu˘
;

391 
	`mu…ùly
–
x0
[1], 
d123
, 
d0123
);

392 
	`mu…ùly
(-
x1
[1], 
d023
, 
¥odu˘
); 
	`add
(
d0123
,Öroduct, d0123);

393 
	`mu…ùly
–
x2
[1], 
d013
, 
¥odu˘
); 
	`add
(
d0123
,Öroduct, d0123);

394 
	`mu…ùly
(-
x3
[1], 
d012
, 
¥odu˘
); 
	`add
(
d0123
,Öroduct, d0123);

396 
	`mu…ùly
–
x0
[1], 
d124
, 
d0124
);

397 
	`mu…ùly
(-
x1
[1], 
d024
, 
¥odu˘
); 
	`add
(
d0124
,Öroduct, d0124);

398 
	`mu…ùly
–
x2
[1], 
d014
, 
¥odu˘
); 
	`add
(
d0124
,Öroduct, d0124);

399 
	`mu…ùly
(-
x4
[1], 
d012
, 
¥odu˘
); 
	`add
(
d0124
,Öroduct, d0124);

402 
	`mu…ùly
–
x0
[1], 
d134
, 
d0134
);

403 
	`mu…ùly
(-
x1
[1], 
d034
, 
¥odu˘
); 
	`add
(
d0134
,Öroduct, d0134);

404 
	`mu…ùly
–
x3
[1], 
d014
, 
¥odu˘
); 
	`add
(
d0134
,Öroduct, d0134);

405 
	`mu…ùly
(-
x4
[1], 
d013
, 
¥odu˘
); 
	`add
(
d0134
,Öroduct, d0134);

408 
	`mu…ùly
–
x0
[1], 
d234
, 
d0234
);

409 
	`mu…ùly
(-
x2
[1], 
d034
, 
¥odu˘
); 
	`add
(
d0234
,Öroduct, d0234);

410 
	`mu…ùly
–
x3
[1], 
d024
, 
¥odu˘
); 
	`add
(
d0234
,Öroduct, d0234);

411 
	`mu…ùly
(-
x4
[1], 
d023
, 
¥odu˘
); 
	`add
(
d0234
,Öroduct, d0234);

414 
	`mu…ùly
–
x1
[1], 
d234
, 
d1234
);

415 
	`mu…ùly
(-
x2
[1], 
d134
, 
¥odu˘
); 
	`add
(
d1234
,Öroduct, d1234);

416 
	`mu…ùly
–
x3
[1], 
d124
, 
¥odu˘
); 
	`add
(
d1234
,Öroduct, d1234);

417 
	`mu…ùly
(-
x4
[1], 
d123
, 
¥odu˘
); 
	`add
(
d1234
,Öroduct, d1234);

421 
	`mu…ùly
–
x0
[0], 
d1234
, 
ªsu…
);

422 
	`mu…ùly
(-
x1
[0], 
d0234
, 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

423 
	`mu…ùly
–
x2
[0], 
d0134
, 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

424 
	`mu…ùly
(-
x3
[0], 
d0124
, 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

425 
	`mu…ùly
–
x4
[0], 
d0123
, 
¥odu˘
); 
	`add
(
ªsu…
,Öroduct,Ñesult);

426 
	}
}

432 
	$accuøã_‹õ¡©i⁄4d
(c⁄° * 
x0
,

433 c⁄° * 
x1
,

434 c⁄° * 
x2
,

435 c⁄° * 
x3
,

436 c⁄° * 
x4
)

438 
ex∑nsi⁄
 
ªsu…
;

439 
	`ex∑nsi⁄_‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
, 
ªsu…
);

440  
	`e°im©e
(
ªsu…
);

441 
	}
}

445 
	$‹õ¡©i⁄4d
(c⁄° * 
x0
,

446 c⁄° * 
x1
,

447 c⁄° * 
x2
,

448 c⁄° * 
x3
,

449 c⁄° * 
x4
)

451 
	`as£π
(
x0
 && 
x1
 && 
x2
 && 
x3
 && 
x4
);

452 
lowî
, 
uµî
;

453 
	`öãrvÆ_‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
, &
lowî
, &
uµî
);

454 
	`„£åound
(
FE_TONEAREST
);

455 if(
uµî
<0 || 
lowî
>0)

456  0.5*(
lowî
+
uµî
);

457 if(
lowî
==
uµî
)

460  
	`accuøã_‹õ¡©i⁄4d
(
x0
, 
x1
, 
x2
, 
x3
, 
x4
);

461 
	}
}

	@common/tunicate/rootparitycollisiontest.cpp

2 
	~<roŸ∑rôycﬁlisi⁄ã°.h
>

3 
	~<c°dlib
>

5 
«me•a˚
 
	groŸ∑rôy


8 
	g«me•a˚


15 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

16 
ölöe
 
make_ve˘‹
–c⁄° 
Vec
<
N
,>& 
ö
, Vec<N,
T
>& 
out
 );

18 
	gãm∂©e
<
˛ass
 
	gT
>

19 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

20 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

21 
boﬁ
 
d_t
, boﬁ 
d_u
, boﬁ 
d_v
,

22 
Vec
<3,
T
>& 
out
 );

24 
	gãm∂©e
<
˛ass
 
	gT
>

25 
edge_edge_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

26 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

27 
boﬁ
 
d_t
, boﬁ 
d_u
, boﬁ 
d_v
,

28 
Vec
<3,
T
>& 
out
 );

31 
	gãm∂©e
<
˛ass
 
	gT
>

32 
gë_quad_vîti˚s
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

33 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

34 
boﬁ
 
is_edge_edge
,

35 c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
,

36 
Vec
<3,
T
>& 
q0
, Vec<3,T>& 
q1
, Vec<3,T>& 
q2
, Vec<3,T>& 
q3
 );

39 
	gãm∂©e
<
˛ass
 
	gT
>

40 
gë_åüngÀ_vîti˚s
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

41 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

42 
boﬁ
 
is_edge_edge
,

43 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

44 
Vec
<3,
T
>& 
q0
, Vec<3,T>& 
q1
, Vec<3,T>& 
q2
 );

46 
	gãm∂©e
<
˛ass
 
	gT
>

47 
T
 
‹õ¡©i⁄2d
(c⁄° 
Vec
<2,T>& 
x0
,

48 c⁄° 
Vec
<2,
T
>& 
x1
,

49 c⁄° 
Vec
<2,
T
>& 
x2
);

52 
	gãm∂©e
<
˛ass
 
	gT
>

53 
T
 
‹õ¡©i⁄3d
(c⁄° 
Vec
<3,T>& 
x0
,

54 c⁄° 
Vec
<3,
T
>& 
x1
,

55 c⁄° 
Vec
<3,
T
>& 
x2
,

56 c⁄° 
Vec
<3,
T
>& 
x3
);

58 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄1d
(
k
,

59 c⁄° 
ex∑nsi⁄
& 
x0
,

60 c⁄° 
ex∑nsi⁄
& 
x1
,

61 c⁄° 
ex∑nsi⁄
& 
x2
,

62 * 
out_Æpha0
,

63 * 
out_Æpha1
,

64 * 
out_Æpha2
);

66 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
,

67 c⁄° 
Vec2e
& 
x0
,

68 c⁄° 
Vec2e
& 
x1
,

69 c⁄° 
Vec2e
& 
x2
,

70 * 
out_Æpha0
,

71 * 
out_Æpha1
,

72 * 
out_Æpha2
 );

74 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
,

75 c⁄° 
Vec2e
& 
x0
,

76 c⁄° 
Vec2e
& 
x1
,

77 c⁄° 
Vec2e
& 
x2
,

78 c⁄° 
Vec2e
& 
x3
,

79 * 
out_Æpha0
,

80 * 
out_Æpha1
,

81 * 
out_Æpha2
,

82 * 
out_Æpha3
);

84 
boﬁ
 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(
k
,

85 c⁄° 
Vec3e
& 
x0
,

86 c⁄° 
Vec3e
& 
x1
,

87 c⁄° 
Vec3e
& 
x2
,

88 c⁄° 
Vec3e
& 
x3
,

89 * 
Æpha0
,

90 * 
Æpha1
,

91 * 
Æpha2
,

92 * 
Æpha3
);

94 
degíî©e_poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3e
& 
x0
,

95 c⁄° 
Vec3e
& 
x1
,

96 c⁄° 
Vec3e
& 
x2
,

97 c⁄° 
Vec3e
& 
x3
,

98 c⁄° 
Vec3e
& 
x4
,

99 * 
Æpha0
,

100 * 
Æpha1
,

101 * 
Æpha2
,

102 * 
Æpha3
,

103 * 
Æpha4
);

105 
degíî©e_poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3I¡îvÆ
& 
x0
,

106 c⁄° 
Vec3I¡îvÆ
& 
x1
,

107 c⁄° 
Vec3I¡îvÆ
& 
x2
,

108 c⁄° 
Vec3I¡îvÆ
& 
x3
,

109 c⁄° 
Vec3I¡îvÆ
& 
x4
,

110 * 
out_Æpha0
,

111 * 
out_Æpha1
,

112 * 
out_Æpha2
,

113 * 
out_Æpha3
,

114 * 
out_Æpha4
);

116 
	gãm∂©e
<
˛ass
 
	gT
>

117 
poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec
<3,
T
>& 
x0
,

118 c⁄° 
Vec
<3,
T
>& 
x1
,

119 c⁄° 
Vec
<3,
T
>& 
x2
,

120 c⁄° 
Vec
<3,
T
>& 
x3
,

121 c⁄° 
Vec
<3,
T
>& 
x4
,

122 * 
out_Æpha0
,

123 * 
out_Æpha1
,

124 * 
out_Æpha2
,

125 * 
out_Æpha3
,

126 * 
out_Æpha4
 );

128 
degíî©e_edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3e
& 
x0
,

129 c⁄° 
Vec3e
& 
x1
,

130 c⁄° 
Vec3e
& 
x2
,

131 c⁄° 
Vec3e
& 
x3
,

132 c⁄° 
Vec3e
& 
x4
,

133 * 
Æpha0
,

134 * 
Æpha1
,

135 * 
Æpha2
,

136 * 
Æpha3
,

137 * 
Æpha4
);

139 
degíî©e_edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3I¡îvÆ
& 
x0
,

140 c⁄° 
Vec3I¡îvÆ
& 
x1
,

141 c⁄° 
Vec3I¡îvÆ
& 
x2
,

142 c⁄° 
Vec3I¡îvÆ
& 
x3
,

143 c⁄° 
Vec3I¡îvÆ
& 
x4
,

144 * 
out_Æpha0
,

145 * 
out_Æpha1
,

146 * 
out_Æpha2
,

147 * 
out_Æpha3
,

148 * 
out_Æpha4
);

150 
	gãm∂©e
<
˛ass
 
	gT
>

151 
edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec
<3,
T
>& 
x0
,

152 c⁄° 
Vec
<3,
T
>& 
x1
,

153 c⁄° 
Vec
<3,
T
>& 
x2
,

154 c⁄° 
Vec
<3,
T
>& 
x3
,

155 c⁄° 
Vec
<3,
T
>& 
x4
,

156 * 
out_Æpha0
,

157 * 
out_Æpha1
,

158 * 
out_Æpha2
,

159 * 
out_Æpha3
,

160 * 
out_Æpha4
 );

162 
boﬁ
 
edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

163 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

164 
boﬁ
 
is_edge_edge
,

165 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

166 c⁄° 
Vec3d
& 
d_s0
, c⁄° Vec3d& 
d_s1
,

167 * 
Æphas
 );

170 
	gãm∂©e
<
˛ass
 
	gT
>

171 
T
 
∂™e_di°
–c⁄° 
Vec
<3,T>& 
x
, c⁄° Vec<3,T>& 
q
, c⁄° Vec<3,T>& 
r
, c⁄° Vec<3,T>& 
p
 );

173 
	gãm∂©e
<
˛ass
 
	gT
>

174 
im∂icô_surÁ˚_fun˘i⁄
–c⁄° 
Vec
<3,
T
>& 
x
, c⁄° Vec<3,T>& 
q0
, c⁄° Vec<3,T>& 
q1
, c⁄° Vec<3,T>& 
q2
, c⁄° Vec<3,T>& 
q3
, T& 
out
 );

177 
boﬁ
 
ã°_wôh_åüngÀs
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

178 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

179 
boﬁ
 
is_edge_edge
,

180 c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
,

181 c⁄° 
Vec3d
& 
s0
, c⁄° Vec3d& 
s1
,

182 
boﬁ
 
u£_posôive_åüngÀs
, boﬁ& 
edge_hô
 );

191 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

192 
ölöe
 
make_ve˘‹
–c⁄° 
Vec
<
N
,>& 
ö
, Vec<N,
T
>& 
out
 )

194  
	gi
 = 0; i < 
	gN
; ++i )

196 
¸óã_‰om_doubÀ
–
ö
[
i
], 
out
[i] );

203 
	gãm∂©e
<
˛ass
 
	gT
>

204 
ölöe
 
edge_edge_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

205 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

206 
boﬁ
 
b_t
, boﬁ 
b_u
, boﬁ 
b_v
,

207 
Vec
<3,
T
>& 
out
 )

209 
	gVec
<3,
	gT
> 
	gx0
, 
	gx1
, 
	gx2
, 
	gx3
;

210 
make_ve˘‹
–
d_x0
, 
x0
 );

211 
make_ve˘‹
–
d_x1
, 
x1
 );

212 
make_ve˘‹
–
d_x2
, 
x2
 );

213 
make_ve˘‹
–
d_x3
, 
x3
 );

215 
	gout
 = 
x0
;

216 
	gout
 -
x2
;

218 i‡–
	gb_t
 )

221 
	gVec
<3,
	gT
> 
	gx0√w
, 
	gx1√w
, 
	gx2√w
, 
	gx3√w
;

222 
make_ve˘‹
–
d_x0√w
, 
x0√w
 );

223 
make_ve˘‹
–
d_x1√w
, 
x1√w
 );

224 
make_ve˘‹
–
d_x2√w
, 
x2√w
 );

225 
make_ve˘‹
–
d_x3√w
, 
x3√w
 );

227 
	gout
 +
x0√w
;

228 
	gout
 -
x0
;

229 
	gout
 -
x2√w
;

230 
	gout
 +
x2
;

232 i‡–
	gb_u
 )

234 
	gout
 +
x0
;

235 
	gout
 -
x0√w
;

236 
	gout
 +
x1√w
;

237 
	gout
 -
x1
;

240 i‡–
	gb_v
 )

242 
	gout
 +
x2√w
;

243 
	gout
 -
x2
;

244 
	gout
 -
x3√w
;

245 
	gout
 +
x3
;

249 i‡–
	gb_u
 )

251 
	gout
 +
x1
;

252 
	gout
 -
x0
;

255 i‡–
	gb_v
 )

257 
	gout
 +
x2
;

258 
	gout
 -
x3
;

265 
ölöe
 
add
–
Vec3d
& 
a
, c⁄° Vec3d& 
b
 )

267 
	ga
[0] +
b
[0];

268 
	ga
[1] +
b
[1];

269 
	ga
[2] +
b
[2];

274 
ölöe
 
sub
–
Vec3d
& 
a
, c⁄° Vec3d& 
b
 )

276 
	ga
[0] -
b
[0];

277 
	ga
[1] -
b
[1];

278 
	ga
[2] -
b
[2];

283 
ölöe
 
edge_edge_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

284 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

285 
boﬁ
 
b_t
, boﬁ 
b_u
, boﬁ 
b_v
,

286 
Vec
<3,
I¡îvÆTy≥
>& 
out
 )

289 
Vec3d
 
out_lowî
–-
d_x0
[0], -d_x0[1], -d_x0[2] );

290 
add
–
out_lowî
, 
d_x2
 );

292 
Vec3d
 
out_uµî
–
d_x0
[0], d_x0[1], d_x0[2] );

293 
sub
–
out_uµî
, 
d_x2
 );

295 i‡–
	gb_t
 )

298 
sub
–
out_lowî
, 
d_x0√w
 );

299 
add
–
out_lowî
, 
d_x0
 );

300 
add
–
out_lowî
, 
d_x2√w
 );

301 
sub
–
out_lowî
, 
d_x2
 );

303 
add
–
out_uµî
, 
d_x0√w
 );

304 
sub
–
out_uµî
, 
d_x0
 );

305 
sub
–
out_uµî
, 
d_x2√w
 );

306 
add
–
out_uµî
, 
d_x2
 );

308 i‡–
	gb_u
 )

310 
sub
–
out_lowî
, 
d_x0
 );

311 
add
–
out_lowî
, 
d_x0√w
 );

312 
sub
–
out_lowî
, 
d_x1√w
 );

313 
add
–
out_lowî
, 
d_x1
 );

315 
add
–
out_uµî
, 
d_x0
 );

316 
sub
–
out_uµî
, 
d_x0√w
 );

317 
add
–
out_uµî
, 
d_x1√w
 );

318 
sub
–
out_uµî
, 
d_x1
 );

321 i‡–
	gb_v
 )

323 
sub
–
out_lowî
, 
d_x2√w
 );

324 
add
–
out_lowî
, 
d_x2
 );

325 
add
–
out_lowî
, 
d_x3√w
 );

326 
sub
–
out_lowî
, 
d_x3
 );

328 
add
–
out_uµî
, 
d_x2√w
 );

329 
sub
–
out_uµî
, 
d_x2
 );

330 
sub
–
out_uµî
, 
d_x3√w
 );

331 
add
–
out_uµî
, 
d_x3
 );

335 i‡–
	gb_u
 )

337 
sub
–
out_lowî
, 
d_x1
 );

338 
add
–
out_lowî
, 
d_x0
 );

340 
add
–
out_uµî
, 
d_x1
 );

341 
sub
–
out_uµî
, 
d_x0
 );

344 i‡–
	gb_v
 )

346 
sub
–
out_lowî
, 
d_x2
 );

347 
add
–
out_lowî
, 
d_x3
 );

349 
add
–
out_uµî
, 
d_x2
 );

350 
sub
–
out_uµî
, 
d_x3
 );

353 
	gout
[0].
	gv
[0] = 
out_lowî
[0];

354 
	gout
[1].
	gv
[0] = 
out_lowî
[1];

355 
	gout
[2].
	gv
[0] = 
out_lowî
[2];

357 
	gout
[0].
	gv
[1] = 
out_uµî
[0];

358 
	gout
[1].
	gv
[1] = 
out_uµî
[1];

359 
	gout
[2].
	gv
[1] = 
out_uµî
[2];

367 
	gãm∂©e
<
˛ass
 
	gT
>

368 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

369 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

370 
boﬁ
 
b_t
, boﬁ 
b_u
, boﬁ 
b_v
,

371 
Vec
<3,
T
>& 
out
 )

373 
	gVec
<3,
	gT
> 
	gx0
, 
	gx1
, 
	gx2
, 
	gx3
;

374 
make_ve˘‹
–
d_x0
, 
x0
 );

375 
make_ve˘‹
–
d_x1
, 
x1
 );

376 
make_ve˘‹
–
d_x2
, 
x2
 );

377 
make_ve˘‹
–
d_x3
, 
x3
 );

379 
	gout
 = 
x0
;

380 
	gout
 -
x1
;

382 i‡–
	gb_t
 )

384 
	gVec
<3,
	gT
> 
	gx0√w
, 
	gx1√w
, 
	gx2√w
, 
	gx3√w
;

385 
make_ve˘‹
–
d_x0√w
, 
x0√w
 );

386 
make_ve˘‹
–
d_x1√w
, 
x1√w
 );

387 
make_ve˘‹
–
d_x2√w
, 
x2√w
 );

388 
make_ve˘‹
–
d_x3√w
, 
x3√w
 );

390 
	gout
 +
x0√w
;

391 
	gout
 -
x0
;

392 
	gout
 -
x1√w
;

393 
	gout
 +
x1
;

395 i‡–
	gb_u
 )

397 
	gout
 +
x1√w
;

398 
	gout
 -
x1
;

399 
	gout
 -
x2√w
;

400 
	gout
 +
x2
;

403 i‡–
	gb_v
 )

405 
	gout
 +
x1√w
;

406 
	gout
 -
x1
;

407 
	gout
 -
x3√w
;

408 
	gout
 +
x3
;

412 i‡–
	gb_u
 )

414 
	gout
 +
x1
;

415 
	gout
 -
x2
;

418 i‡–
	gb_v
 )

420 
	gout
 +
x1
;

421 
	gout
 -
x3
;

429 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
(c⁄° 
Vec3d
 &
d_x0
, c⁄° Vec3d &
d_x1
, c⁄° Vec3d &
d_x2
, c⁄° Vec3d &
d_x3
,

430 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

431 
boﬁ
 
b_t
, boﬁ 
b_u
, boﬁ 
b_v
,

432 
Vec
<3,
I¡îvÆTy≥
>& 
out
 )

435 
Vec3d
 
out_lowî
–-
d_x0
[0], -d_x0[1], -d_x0[2] );

436 
Vec3d
 
out_uµî
–
d_x0
[0], d_x0[1], d_x0[2] );

438 
add
–
out_lowî
, 
d_x1
 );

439 
sub
–
out_uµî
, 
d_x1
 );

441 i‡–
	gb_t
 )

443 
sub
–
out_lowî
, 
d_x0√w
 );

444 
add
–
out_lowî
, 
d_x0
 );

445 
add
–
out_lowî
, 
d_x1√w
 );

446 
sub
–
out_lowî
, 
d_x1
 );

448 
add
–
out_uµî
, 
d_x0√w
 );

449 
sub
–
out_uµî
, 
d_x0
 );

450 
sub
–
out_uµî
, 
d_x1√w
 );

451 
add
–
out_uµî
, 
d_x1
 );

453 i‡–
	gb_u
 )

455 
sub
–
out_lowî
, 
d_x1√w
 );

456 
add
–
out_lowî
, 
d_x1
 );

457 
add
–
out_lowî
, 
d_x2√w
 );

458 
sub
–
out_lowî
, 
d_x2
 );

460 
add
–
out_uµî
, 
d_x1√w
 );

461 
sub
–
out_uµî
, 
d_x1
 );

462 
sub
–
out_uµî
, 
d_x2√w
 );

463 
add
–
out_uµî
, 
d_x2
 );

466 i‡–
	gb_v
 )

468 
sub
–
out_lowî
, 
d_x1√w
 );

469 
add
–
out_lowî
, 
d_x1
 );

470 
add
–
out_lowî
, 
d_x3√w
 );

471 
sub
–
out_lowî
, 
d_x3
 );

473 
add
–
out_uµî
, 
d_x1√w
 );

474 
sub
–
out_uµî
, 
d_x1
 );

475 
sub
–
out_uµî
, 
d_x3√w
 );

476 
add
–
out_uµî
, 
d_x3
 );

480 i‡–
	gb_u
 )

482 
sub
–
out_lowî
, 
d_x1
 );

483 
add
–
out_lowî
, 
d_x2
 );

484 
add
–
out_uµî
, 
d_x1
 );

485 
sub
–
out_uµî
, 
d_x2
 );

488 i‡–
	gb_v
 )

490 
sub
–
out_lowî
, 
d_x1
 );

491 
add
–
out_lowî
, 
d_x3
 );

493 
add
–
out_uµî
, 
d_x1
 );

494 
sub
–
out_uµî
, 
d_x3
 );

497 
	gout
[0].
	gv
[0] = 
out_lowî
[0];

498 
	gout
[1].
	gv
[0] = 
out_lowî
[1];

499 
	gout
[2].
	gv
[0] = 
out_lowî
[2];

501 
	gout
[0].
	gv
[1] = 
out_uµî
[0];

502 
	gout
[1].
	gv
[1] = 
out_uµî
[1];

503 
	gout
[2].
	gv
[1] = 
out_uµî
[2];

511 
	gãm∂©e
<
˛ass
 
	gT
>

512 
gë_quad_vîti˚s
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

513 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

514 
boﬁ
 
is_edge_edge
,

515 c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
,

516 
Vec
<3,
T
>& 
q0
, Vec<3,T>& 
q1
, Vec<3,T>& 
q2
, Vec<3,T>& 
q3
 )

518 
	gT
::
begö_•ecül_¨ôhmëic
();

519 i‡–
	gis_edge_edge
 )

521 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[0], 
us
[0], 
vs
[0], 
q0
 );

522 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[1], 
us
[1], 
vs
[1], 
q1
 );

523 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[2], 
us
[2], 
vs
[2], 
q2
 );

524 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[3], 
us
[3], 
vs
[3], 
q3
 );

528 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[0], 
us
[0], 
vs
[0], 
q0
 );

529 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[1], 
us
[1], 
vs
[1], 
q1
 );

530 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[2], 
us
[2], 
vs
[2], 
q2
 );

531 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[3], 
us
[3], 
vs
[3], 
q3
 );

533 
	gT
::
íd_•ecül_¨ôhmëic
();

538 
	gãm∂©e
<
˛ass
 
	gT
>

539 
gë_åüngÀ_vîti˚s
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

540 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

541 
boﬁ
 
is_edge_edge
,

542 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

543 
Vec
<3,
T
>& 
q0
, Vec<3,T>& 
q1
, Vec<3,T>& 
q2
 )

545 
	gT
::
begö_•ecül_¨ôhmëic
();

546 i‡–
	gis_edge_edge
 )

548 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[0], 
us
[0], 
vs
[0], 
q0
 );

549 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[1], 
us
[1], 
vs
[1], 
q1
 );

550 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[2], 
us
[2], 
vs
[2], 
q2
 );

554 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[0], 
us
[0], 
vs
[0], 
q0
 );

555 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[1], 
us
[1], 
vs
[1], 
q1
 );

556 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
ts
[2], 
us
[2], 
vs
[2], 
q2
 );

558 
	gT
::
íd_•ecül_¨ôhmëic
();

565 
	gãm∂©e
<
˛ass
 
	gT
>

566 
T
 
‹õ¡©i⁄2d
(c⁄° 
Vec
<2,T>& 
x0
,

567 c⁄° 
Vec
<2,
T
>& 
x1
,

568 c⁄° 
Vec
<2,
T
>& 
x2
)

570  
	gx0
[0]*
	gx1
[1] + -(x0[0])*
	gx2
[1]

571 + 
	gx1
[0]*
	gx2
[1] + -(x1[0])*
	gx0
[1]

572 + 
	gx2
[0]*
	gx0
[1] + -(x2[0])*
	gx1
[1];

577 
ölöe
 
ex∑nsi⁄
 
‹õ¡©i⁄2d
(c⁄° 
Vec
<2,ex∑nsi⁄>& 
x0
,

578 c⁄° 
Vec
<2,
ex∑nsi⁄
>& 
x1
,

579 c⁄° 
Vec
<2,
ex∑nsi⁄
>& 
x2
)

581 
ex∑nsi⁄
 
	g¥od
;

583 
ex∑nsi⁄
 
	gªsu…
;

585 
mu…ùly
–
x0
[0], 
x1
[1], 
¥od
 );

586 
add
–
ªsu…
, 
¥od
,Ñesult );

588 
mu…ùly
–
x0
[0], 
x2
[1], 
¥od
 );

589 
subåa˘
–
ªsu…
, 
¥od
,Ñesult );

591 
mu…ùly
–
x1
[0], 
x2
[1], 
¥od
 );

592 
add
–
ªsu…
, 
¥od
,Ñesult );

594 
mu…ùly
–
x1
[0], 
x0
[1], 
¥od
 );

595 
subåa˘
–
ªsu…
, 
¥od
,Ñesult );

597 
mu…ùly
–
x2
[0], 
x0
[1], 
¥od
 );

598 
add
–
ªsu…
, 
¥od
,Ñesult );

600 
mu…ùly
–
x2
[0], 
x1
[1], 
¥od
 );

601 
subåa˘
–
ªsu…
, 
¥od
,Ñesult );

603  
	gªsu…
;

608 
	gãm∂©e
<
˛ass
 
	gT
>

609 
‹õ¡©i⁄3d
(c⁄° 
Vec
<3,
T
>& 
x0
,

610 c⁄° 
Vec
<3,
T
>& 
x1
,

611 c⁄° 
Vec
<3,
T
>& 
x2
,

612 c⁄° 
Vec
<3,
T
>& 
x3
,

613 
T
& 
ªsu…
 )

616 
T
 
	gx00x11
 = 
x0
[0] * 
x1
[1];

617 
T
 
	gx00x21
 = 
x0
[0] * 
x2
[1];

618 
T
 
	gx00x31
 = 
x0
[0] * 
x3
[1];

620 
T
 
	gx10x01
 = 
x1
[0] * 
x0
[1];

621 
T
 
	gx10x21
 = 
x1
[0] * 
x2
[1];

622 
T
 
	gx10x31
 = 
x1
[0] * 
x3
[1];

624 
T
 
	gx20x01
 = 
x2
[0] * 
x0
[1];

625 
T
 
	gx20x11
 = 
x2
[0] * 
x1
[1];

626 
T
 
	gx20x31
 = 
x2
[0] * 
x3
[1];

628 
T
 
	gx30x01
 = 
x3
[0] * 
x0
[1];

629 
T
 
	gx30x11
 = 
x3
[0] * 
x1
[1];

630 
T
 
	gx30x21
 = 
x3
[0] * 
x2
[1];

632 
	gªsu…
 = ( 
x00x11
 * ( 
x2
[2] - 
x3
[2] ) )

633 + ( 
x00x21
 * ( 
x3
[2] - 
x1
[2] ) )

634 + ( 
x00x31
 * ( 
x1
[2] - 
x2
[2] ) )

636 + ( 
x10x01
 * ( 
x3
[2] - 
x2
[2] ) )

637 + ( 
x10x21
 * ( 
x0
[2] - 
x3
[2] ) )

638 + ( 
x10x31
 * ( 
x2
[2] - 
x0
[2] ) )

640 + ( 
x20x01
 * ( 
x1
[2]- 
x3
[2] ) )

641 + ( 
x20x11
 * ( 
x3
[2] - 
x0
[2] ) )

642 + ( 
x20x31
 * ( 
x0
[2] - 
x1
[2] ) )

644 + ( 
x30x01
 * ( 
x2
[2] - 
x1
[2] ) )

645 + ( 
x30x11
 * ( 
x0
[2] - 
x2
[2] ) )

646 + ( 
x30x21
 * ( 
x1
[2] - 
x0
[2] ) );

652 
ölöe
 
‹õ¡©i⁄3d
(c⁄° 
Vec
<3,
ex∑nsi⁄
>& 
x0
,

653 c⁄° 
Vec
<3,
ex∑nsi⁄
>& 
x1
,

654 c⁄° 
Vec
<3,
ex∑nsi⁄
>& 
x2
,

655 c⁄° 
Vec
<3,
ex∑nsi⁄
>& 
x3
,

656 
ex∑nsi⁄
& 
ªsu…
 )

659 
ex∑nsi⁄
 
	gx00x11
;

660 
mu…ùly
–
x0
[0], 
x1
[1], 
x00x11
 );

662 
ex∑nsi⁄
 
	gx00x21
;

663 
mu…ùly
–
x0
[0], 
x2
[1], 
x00x21
 );

665 
ex∑nsi⁄
 
	gx00x31
;

666 
mu…ùly
–
x0
[0], 
x3
[1], 
x00x31
 );

668 
ex∑nsi⁄
 
	gx10x01
;

669 
mu…ùly
–
x1
[0], 
x0
[1], 
x10x01
 );

671 
ex∑nsi⁄
 
	gx10x21
;

672 
mu…ùly
–
x1
[0], 
x2
[1], 
x10x21
 );

674 
ex∑nsi⁄
 
	gx10x31
;

675 
mu…ùly
–
x1
[0], 
x3
[1], 
x10x31
 );

677 
ex∑nsi⁄
 
	gx20x01
;

678 
mu…ùly
–
x2
[0], 
x0
[1], 
x20x01
 );

680 
ex∑nsi⁄
 
	gx20x11
;

681 
mu…ùly
–
x2
[0], 
x1
[1], 
x20x11
 );

683 
ex∑nsi⁄
 
	gx20x31
;

684 
mu…ùly
–
x2
[0], 
x3
[1], 
x20x31
 );

686 
ex∑nsi⁄
 
	gx30x01
;

687 
mu…ùly
–
x3
[0], 
x0
[1], 
x30x01
 );

689 
ex∑nsi⁄
 
	gx30x11
;

690 
mu…ùly
–
x3
[0], 
x1
[1], 
x30x11
 );

692 
ex∑nsi⁄
 
	gx30x21
;

693 
mu…ùly
–
x3
[0], 
x2
[1], 
x30x21
 );

696 
ex∑nsi⁄
 
	gdiff
;

697 
subåa˘
–
x2
[2], 
x3
[2], 
diff
 );

698 
mu…ùly
–
x00x11
, 
diff
, 
ªsu…
 );

700 
ex∑nsi⁄
 
	g¥od
;

701 
subåa˘
–
x3
[2], 
x1
[2], 
diff
 );

702 
mu…ùly
–
x00x21
, 
diff
, 
¥od
 );

703 
add
–
ªsu…
, 
¥od
,Ñesult );

705 
subåa˘
–
x1
[2], 
x2
[2], 
diff
 );

706 
mu…ùly
–
x00x31
, 
diff
, 
¥od
 );

707 
add
–
ªsu…
, 
¥od
,Ñesult );

709 
subåa˘
–
x3
[2], 
x2
[2], 
diff
 );

710 
mu…ùly
–
x10x01
, 
diff
, 
¥od
 );

711 
add
–
ªsu…
, 
¥od
,Ñesult );

713 
subåa˘
–
x0
[2], 
x3
[2], 
diff
 );

714 
mu…ùly
–
x10x21
, 
diff
, 
¥od
 );

715 
add
–
ªsu…
, 
¥od
,Ñesult );

717 
subåa˘
–
x2
[2], 
x0
[2], 
diff
 );

718 
mu…ùly
–
x10x31
, 
diff
, 
¥od
 );

719 
add
–
ªsu…
, 
¥od
,Ñesult );

721 
subåa˘
–
x1
[2], 
x3
[2], 
diff
 );

722 
mu…ùly
–
x20x01
, 
diff
, 
¥od
 );

723 
add
–
ªsu…
, 
¥od
,Ñesult );

725 
subåa˘
–
x3
[2], 
x0
[2], 
diff
 );

726 
mu…ùly
–
x20x11
, 
diff
, 
¥od
 );

727 
add
–
ªsu…
, 
¥od
,Ñesult );

729 
subåa˘
–
x0
[2], 
x1
[2], 
diff
 );

730 
mu…ùly
–
x20x31
, 
diff
, 
¥od
 );

731 
add
–
ªsu…
, 
¥od
,Ñesult );

733 
subåa˘
–
x2
[2], 
x1
[2], 
diff
 );

734 
mu…ùly
–
x30x01
, 
diff
, 
¥od
 );

735 
add
–
ªsu…
, 
¥od
,Ñesult );

737 
subåa˘
–
x0
[2], 
x2
[2], 
diff
 );

738 
mu…ùly
–
x30x11
, 
diff
, 
¥od
 );

739 
add
–
ªsu…
, 
¥od
,Ñesult );

741 
subåa˘
–
x1
[2], 
x0
[2], 
diff
 );

742 
mu…ùly
–
x30x21
, 
diff
, 
¥od
 );

743 
add
–
ªsu…
, 
¥od
,Ñesult );

750 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄1d
(
k
,

751 c⁄° 
ex∑nsi⁄
& 
x0
,

752 c⁄° 
ex∑nsi⁄
& 
x1
,

753 c⁄° 
ex∑nsi⁄
& 
x2
,

754 * 
out_Æpha0
,

755 * 
out_Æpha1
,

756 * 
out_Æpha2
)

758 
as£π
–
k
 == 1 );

759 
as£π
(
out_Æpha0
 && 
out_Æpha1
 && 
out_Æpha2
);

760 
as£π
(
„gëround
()=
FE_TONEAREST
);

762 if–
sign
(
x1
-
x2
) < 0 )

764 if–
sign
(
x0
-
x1
) < 0)  0;

765 i‡–
sign
(
x0
-
x2
) > 0 )  0;

766 *
	gout_Æpha0
=1;

767 *
	gout_Æpha1
=(
x2
.
e°im©e
()-
x0
.e°im©e())/(x2.e°im©e()-
x1
.estimate());

768 *
	gout_Æpha2
=(
x0
.
e°im©e
()-
x1
.e°im©e())/(
x2
.estimate()-x1.estimate());

771 if–
sign
(
x1
-
x2
) > 0 )

773 if–
sign
(
x0
-
x2
) < 0 )  0;

774 if–
sign
(
x0
-
x1
) > 0)  0;

775 *
	gout_Æpha0
=1;

776 *
	gout_Æpha1
=(
x2
.
e°im©e
()-
x0
.e°im©e())/(x2.e°im©e()-
x1
.estimate());

777 *
	gout_Æpha2
=(
x0
.
e°im©e
()-
x1
.e°im©e())/(
x2
.estimate()-x1.estimate());

783 if–
sign
(
x0
-
x1
) != 0 )  0;

784 *
	gout_Æpha0
=1;

785 *
	gout_Æpha1
=0.5;

786 *
	gout_Æpha2
=0.5;

796 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
,

797 c⁄° 
Vec2e
& 
x0
,

798 c⁄° 
Vec2e
& 
x1
,

799 c⁄° 
Vec2e
& 
x2
,

800 * 
out_Æpha0
,

801 * 
out_Æpha1
,

802 * 
out_Æpha2
 )

804 
as£π
(
k
==1);

805 
as£π
(
„gëround
()=
FE_TONEAREST
);

809 
	gax0
, 
	gax1
, 
	gax2
;

810 if(!
ex∑nsi⁄_sim∂ex_öãr£˘i⁄1d
(1, 
x0
[1], 
x1
[1], 
x2
[1], &
ax0
, &
ax1
, &
ax2
))  0;

812 
	gay0
, 
	gay1
, 
	gay2
;

813 if(!
ex∑nsi⁄_sim∂ex_öãr£˘i⁄1d
(1, 
x0
[0], 
x1
[0], 
x2
[0], &
ay0
, &
ay1
, &
ay2
))  0;

816 
	gcheckx
=
°d
::
Ábs
(-
ax0
*
x0
[0].
e°im©e
()+
ax1
*
x1
[0].e°im©e()+
ax2
*
x2
[0].estimate())

817 +
°d
::
Ábs
(-
ax0
*
x0
[1].
e°im©e
()+
ax1
*
x1
[1].e°im©e()+
ax2
*
x2
[1].estimate());

819 
	gchecky
=
°d
::
Ábs
(-
ay0
*
x0
[0].
e°im©e
()+
ay1
*
x1
[0].e°im©e()+
ay2
*
x2
[0].estimate())

820 +
°d
::
Ábs
(-
ay0
*
x0
[1].
e°im©e
()+
ay1
*
x1
[1].e°im©e()+
ay2
*
x2
[1].estimate());

822 if(
	gcheckx
<=
checky
)

824 *
out_Æpha0
=
ax0
;

825 *
	gout_Æpha1
=
ax1
;

826 *
	gout_Æpha2
=
ax2
;

830 *
	gout_Æpha0
=
ay0
;

831 *
	gout_Æpha1
=
ay1
;

832 *
	gout_Æpha2
=
ay2
;

841 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
,

842 c⁄° 
Vec2e
& 
x0
,

843 c⁄° 
Vec2e
& 
x1
,

844 c⁄° 
Vec2e
& 
x2
,

845 c⁄° 
Vec2e
& 
x3
,

846 * 
out_Æpha0
,

847 * 
out_Æpha1
,

848 * 
out_Æpha2
,

849 * 
out_Æpha3
)

851 
as£π
(1<=
k
 && k<=3);

852 
as£π
(
„gëround
()=
FE_TONEAREST
);

854 
	gk
)

859 
ex∑nsi⁄
 
Æpha1
 = -
‹õ¡©i⁄2d
(
x0
, 
x2
, 
x3
);

860 
ex∑nsi⁄
 
	gÆpha2
 = 
‹õ¡©i⁄2d
(
x0
, 
x1
, 
x3
);

861 if(
˚πaöly_›posôe_sign
(
Æpha1
, 
Æpha2
))  0;

863 
ex∑nsi⁄
 
	gÆpha3
 = -
‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

864 if(
˚πaöly_›posôe_sign
(
Æpha1
, 
Æpha3
))  0;

865 if(
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha3
))  0;

867 
	gsum2
 = 
Æpha1
.
e°im©e
(Ë+ 
Æpha2
.e°im©e(Ë+ 
Æpha3
.estimate();

869 if(
	gsum2
)

871 *
	gout_Æpha0
=1;

872 *
	gout_Æpha1
 = 
Æpha1
.
e°im©e
(Ë/ 
sum2
;

873 *
	gout_Æpha2
 = 
Æpha2
.
e°im©e
(Ë/ 
sum2
;

874 *
	gout_Æpha3
 = 
Æpha3
.
e°im©e
(Ë/ 
sum2
;

880 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x1
, 
x2
, 
out_Æpha0
, 
out_Æpha1
, 
out_Æpha2
))

882 *
	gout_Æpha3
=0;

885 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x1
, 
x3
, 
out_Æpha0
, 
out_Æpha1
, 
out_Æpha3
))

887 *
	gout_Æpha2
=0;

890 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x2
, 
x3
, 
out_Æpha0
, 
out_Æpha2
, 
out_Æpha3
))

892 *
	gout_Æpha1
=0;

903 
ex∑nsi⁄
 
Æpha0
 = 
‹õ¡©i⁄2d
(
x1
, 
x2
, 
x3
);

904 
ex∑nsi⁄
 
	gÆpha1
 = -
‹õ¡©i⁄2d
(
x0
, 
x2
, 
x3
);

905 if–
˚πaöly_›posôe_sign
(
Æpha0
, 
Æpha1
) )  0;

907 
ex∑nsi⁄
 
	gÆpha2
 = 
‹õ¡©i⁄2d
(
x0
, 
x1
, 
x3
);

908 
ex∑nsi⁄
 
	gÆpha3
 = -
‹õ¡©i⁄2d
(
x0
, 
x1
, 
x2
);

909 if–
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha3
) )  0;

911 
	gsum1
, 
	gsum2
;

912 
	gsum1

Æpha0
.
e°im©e
(Ë+ 
Æpha1
.estimate();

913 
	gsum2

Æpha2
.
e°im©e
(Ë+ 
Æpha3
.estimate();

915 if(
	gsum1
 && 
	gsum2
){

916 *
	gout_Æpha0
 = 
Æpha0
.
e°im©e
(Ë/ 
sum1
;

917 *
	gout_Æpha1
 = 
Æpha1
.
e°im©e
(Ë/ 
sum1
;

918 *
	gout_Æpha2
 = 
Æpha2
.
e°im©e
(Ë/ 
sum2
;

919 *
	gout_Æpha3
 = 
Æpha3
.
e°im©e
(Ë/ 
sum2
;

925 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x0
, 
x2
, 
x3
, 
out_Æpha0
, 
out_Æpha2
, 
out_Æpha3
)){

926 *
	gout_Æpha1
=0;

929 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x1
, 
x2
, 
x3
, 
out_Æpha1
, 
out_Æpha2
, 
out_Æpha3
)){

930 *
	gout_Æpha0
=0;

933 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x2
, 
x0
, 
x1
, 
out_Æpha2
, 
out_Æpha0
, 
out_Æpha1
)){

934 *
	gout_Æpha3
=0;

937 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(1, 
x3
, 
x0
, 
x1
, 
out_Æpha3
, 
out_Æpha0
, 
out_Æpha1
)){

938 *
	gout_Æpha2
=0;

948 
as£π
(0);

957 
boﬁ
 
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(
k
,

958 c⁄° 
Vec3e
& 
x0
,

959 c⁄° 
Vec3e
& 
x1
,

960 c⁄° 
Vec3e
& 
x2
,

961 c⁄° 
Vec3e
& 
x3
,

962 * 
Æpha0
,

963 * 
Æpha1
,

964 * 
Æpha2
,

967 
as£π
(
k
<=2);

968 
as£π
(
„gëround
()=
FE_TONEAREST
);

972 
	gax0
, 
	gax1
, 
	gax2
, 
	gax3
;

973 if–!
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
, 
Vec2e
(
x0
[1],x0[2]), Vec2e(
x1
[1],x1[2]), Vec2e(
x2
[1],x2[2]), Vec2e(
x3
[1],x3[2]), &
ax0
, &
ax1
, &
ax2
,&
ax3
) )

978 
	gay0
, 
	gay1
, 
	gay2
, 
	gay3
;

979 
Vec2e
 
p0
–
x0
[0], x0[2] );

980 
Vec2e
 
p1
–
x1
[0], x1[2] );

981 
Vec2e
 
p2
–
x2
[0], x2[2] );

982 
Vec2e
 
p3
–
x3
[0], x3[2] );

983 i‡–!
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
, 
p0
, 
p1
, 
p2
, 
p3
, &
ay0
, &
ay1
, &
ay2
, &
ay3
) )

988 
	gaz0
, 
	gaz1
, 
	gaz2
, 
	gaz3
;

989 if–!
ex∑nsi⁄_sim∂ex_öãr£˘i⁄2d
(
k
, 
Vec2e
(
x0
[0],x0[1]), Vec2e(
x1
[0],x1[1]), Vec2e(
x2
[0],x2[1]), Vec2e(
x3
[0],x3[1]), &
az0
, &
az1
, &
az2
, &
az3
) )

995 
	gcheckx
, 
	gchecky
, 
	gcheckz
;

996 
Vec3d
 
e°x0
–
x0
[0].
e°im©e
(), x0[1].estimate(), x0[2].estimate() );

997 
Vec3d
 
e°x1
–
x1
[0].
e°im©e
(), x1[1].estimate(), x1[2].estimate() );

998 
Vec3d
 
e°x2
–
x2
[0].
e°im©e
(), x2[1].estimate(), x2[2].estimate() );

999 
Vec3d
 
e°x3
–
x3
[0].
e°im©e
(), x3[1].estimate(), x3[2].estimate() );

1001 if(
	gk
==1)

1003 
checkx
=
°d
::
Ábs
(-
ax0
*
e°x0
[0]+
ax1
*
e°x1
[0]+
ax2
*
e°x2
[0]+
ax3
*
e°x3
[0])

1004 +
°d
::
Ábs
(-
ax0
*
e°x0
[1]+
ax1
*
e°x1
[1]+
ax2
*
e°x2
[1]+
ax3
*
e°x3
[1])

1005 +
°d
::
Ábs
(-
ax0
*
e°x0
[2]+
ax1
*
e°x1
[2]+
ax2
*
e°x2
[2]+
ax3
*
e°x3
[2]);

1006 
	gchecky
=
°d
::
Ábs
(-
ay0
*
e°x0
[0]+
ay1
*
e°x1
[0]+
ay2
*
e°x2
[0]+
ay3
*
e°x3
[0])

1007 +
°d
::
Ábs
(-
ay0
*
e°x0
[1]+
ay1
*
e°x1
[1]+
ay2
*
e°x2
[1]+
ay3
*
e°x3
[1])

1008 +
°d
::
Ábs
(-
ay0
*
e°x0
[2]+
ay1
*
e°x1
[2]+
ay2
*
e°x2
[2]+
ay3
*
e°x3
[2]);

1009 
	gcheckz
=
°d
::
Ábs
(-
az0
*
e°x0
[0]+
az1
*
e°x1
[0]+
az2
*
e°x2
[0]+
az3
*
e°x3
[0])

1010 +
°d
::
Ábs
(-
az0
*
e°x0
[1]+
az1
*
e°x1
[1]+
az2
*
e°x2
[1]+
az3
*
e°x3
[1])

1011 +
°d
::
Ábs
(-
az0
*
e°x0
[2]+
az1
*
e°x1
[2]+
az2
*
e°x2
[2]+
az3
*
e°x3
[2]);

1015 
	gcheckx
=
°d
::
Ábs
(-
ax0
*
e°x0
[0]-
ax1
*
e°x1
[0]+
ax2
*
e°x2
[0]+
ax3
*
e°x3
[0])

1016 +
°d
::
Ábs
(-
ax0
*
e°x0
[1]-
ax1
*
e°x1
[1]+
ax2
*
e°x2
[1]+
ax3
*
e°x3
[1])

1017 +
°d
::
Ábs
(-
ax0
*
e°x0
[2]-
ax1
*
e°x1
[2]+
ax2
*
e°x2
[2]+
ax3
*
e°x3
[2]);

1018 
	gchecky
=
°d
::
Ábs
(-
ay0
*
e°x0
[0]-
ay1
*
e°x1
[0]+
ay2
*
e°x2
[0]+
ay3
*
e°x3
[0])

1019 +
°d
::
Ábs
(-
ay0
*
e°x0
[1]-
ay1
*
e°x1
[1]+
ay2
*
e°x2
[1]+
ay3
*
e°x3
[1])

1020 +
°d
::
Ábs
(-
ay0
*
e°x0
[2]-
ay1
*
e°x1
[2]+
ay2
*
e°x2
[2]+
ay3
*
e°x3
[2]);

1021 
	gcheckz
=
°d
::
Ábs
(-
az0
*
e°x0
[0]-
az1
*
e°x1
[0]+
az2
*
e°x2
[0]+
az3
*
e°x3
[0])

1022 +
°d
::
Ábs
(-
az0
*
e°x0
[1]-
az1
*
e°x1
[1]+
az2
*
e°x2
[1]+
az3
*
e°x3
[1])

1023 +
°d
::
Ábs
(-
az0
*
e°x0
[2]-
az1
*
e°x1
[2]+
az2
*
e°x2
[2]+
az3
*
e°x3
[2]);

1025 if(
	gcheckx
<=
checky
 && 
checkx
<=
checkz
)

1027 *
Æpha0
=
ax0
;

1028 *
	gÆpha1
=
ax1
;

1029 *
	gÆpha2
=
ax2
;

1030 *
	gÆpha2
=
ax3
;

1032 if(
	gchecky
<=
checkz
)

1034 *
Æpha0
=
ay0
;

1035 *
	gÆpha1
=
ay1
;

1036 *
	gÆpha2
=
ay2
;

1037 *
	gÆpha2
=
ay3
;

1041 *
	gÆpha0
=
az0
;

1042 *
	gÆpha1
=
az1
;

1043 *
	gÆpha2
=
az2
;

1044 *
	gÆpha2
=
az3
;

1054 
degíî©e_poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3e
& 
x0
,

1055 c⁄° 
Vec3e
& 
x1
,

1056 c⁄° 
Vec3e
& 
x2
,

1057 c⁄° 
Vec3e
& 
x3
,

1058 c⁄° 
Vec3e
& 
x4
,

1059 * 
Æpha0
,

1060 * 
Æpha1
,

1061 * 
Æpha2
,

1062 * 
Æpha3
,

1063 * 
Æpha4
)

1066 
as£π
(
„gëround
()=
FE_TONEAREST
);

1069 i‡(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x2
, 
x3
, 
x4
, 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
))

1071 *
	gÆpha1
=0;

1074 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x3
, 
x4
, 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
))

1076 *
	gÆpha2
=0;

1079 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x2
, 
x4
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
))

1081 *
	gÆpha3
=0;

1084 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x1
, 
x2
, 
x3
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
))

1086 *
	gÆpha4
=0;

1095 
degíî©e_poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec3I¡îvÆ
& ,

1096 c⁄° 
Vec3I¡îvÆ
& ,

1097 c⁄° 
Vec3I¡îvÆ
& ,

1098 c⁄° 
Vec3I¡îvÆ
& ,

1099 c⁄° 
Vec3I¡îvÆ
& ,

1112 
	gãm∂©e
<
˛ass
 
	gT
>

1113 
poöt_ãåahedr⁄_öãr£˘i⁄
(c⁄° 
Vec
<3,
T
>& 
x0
,

1114 c⁄° 
Vec
<3,
T
>& 
x1
,

1115 c⁄° 
Vec
<3,
T
>& 
x2
,

1116 c⁄° 
Vec
<3,
T
>& 
x3
,

1117 c⁄° 
Vec
<3,
T
>& 
x4
,

1118 * 
out_Æpha0
,

1119 * 
out_Æpha1
,

1120 * 
out_Æpha2
,

1121 * 
out_Æpha3
,

1122 * 
out_Æpha4
 )

1125 
	gT
::
begö_•ecül_¨ôhmëic
();

1127 
T
 
	gÆpha1
;

1128 
‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
, 
Æpha1
);

1129 
	gÆpha1
 = -
Æpha1
;

1131 
T
 
	gÆpha2
;

1132 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
, 
Æpha2
);

1134 if–
˚πaöly_›posôe_sign
(
Æpha1
, 
Æpha2
) )

1136 
	gT
::
íd_•ecül_¨ôhmëic
();

1140 
T
 
	gÆpha3
;

1141 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
, 
Æpha3
);

1142 
	gÆpha3
 = -
Æpha3
;

1144 if–
˚πaöly_›posôe_sign
(
Æpha1
, 
Æpha3
) )

1146 
	gT
::
íd_•ecül_¨ôhmëic
();

1150 if–
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha3
) )

1152 
	gT
::
íd_•ecül_¨ôhmëic
();

1156 
T
 
	gÆpha4
;

1157 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, 
Æpha4
);

1159 
	gT
::
íd_•ecül_¨ôhmëic
();

1161 if–
˚πaöly_›posôe_sign
(
Æpha1
, 
Æpha4
) )  0;

1162 if–
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha4
) )  0;

1163 if–
˚πaöly_›posôe_sign
(
Æpha3
, 
Æpha4
) )  0;

1165 i‡–
	gÆpha1
.
ödeföôe_sign
(Ë|| 
	gÆpha2
.ödeföôe_sign(Ë|| 
	gÆpha3
.ödeföôe_sign(Ë|| 
	gÆpha4
.indefinite_sign() )

1171 
	gsum2
 = 
Æpha1
.
e°im©e
(Ë+ 
Æpha2
.e°im©e(Ë+ 
Æpha3
.e°im©e(Ë+ 
Æpha4
.estimate();

1173 if(
	gsum2
)

1175 *
	gout_Æpha0
 = 1;

1176 *
	gout_Æpha1
 = 
Æpha1
.
e°im©e
(Ë/ 
sum2
;

1177 *
	gout_Æpha2
 = 
Æpha2
.
e°im©e
(Ë/ 
sum2
;

1178 *
	gout_Æpha3
 = 
Æpha3
.
e°im©e
(Ë/ 
sum2
;

1179 *
	gout_Æpha4
 = 
Æpha4
.
e°im©e
(Ë/ 
sum2
;

1186  
degíî©e_poöt_ãåahedr⁄_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
x4
, 
out_Æpha0
, 
out_Æpha1
, 
out_Æpha2
, 
out_Æpha3
, 
out_Æpha4
 );

1193 
degíî©e_edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3e
& 
x0
,

1194 c⁄° 
Vec3e
& 
x1
,

1195 c⁄° 
Vec3e
& 
x2
,

1196 c⁄° 
Vec3e
& 
x3
,

1197 c⁄° 
Vec3e
& 
x4
,

1198 * 
Æpha0
,

1199 * 
Æpha1
,

1200 * 
Æpha2
,

1201 * 
Æpha3
,

1202 * 
Æpha4
)

1206 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x1
, 
x2
, 
x3
, 
x4
, 
Æpha1
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

1207 *
	gÆpha0
=0;

1210 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(1, 
x0
, 
x2
, 
x3
, 
x4
, 
Æpha0
, 
Æpha2
, 
Æpha3
, 
Æpha4
)){

1211 *
	gÆpha1
=0;

1214 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x3
, 
x4
, 
Æpha0
, 
Æpha1
, 
Æpha3
, 
Æpha4
)){

1215 *
	gÆpha2
=0;

1218 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x2
, 
x4
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha4
)){

1219 *
	gÆpha3
=0;

1222 if(
ex∑nsi⁄_sim∂ex_öãr£˘i⁄3d
(2, 
x0
, 
x1
, 
x2
, 
x3
, 
Æpha0
, 
Æpha1
, 
Æpha2
, 
Æpha3
)){

1223 *
	gÆpha4
=0;

1232 
degíî©e_edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3I¡îvÆ
& ,

1233 c⁄° 
Vec3I¡îvÆ
& ,

1234 c⁄° 
Vec3I¡îvÆ
& ,

1235 c⁄° 
Vec3I¡îvÆ
& ,

1236 c⁄° 
Vec3I¡îvÆ
& ,

1250 
	gãm∂©e
<
˛ass
 
	gT
>

1251 
edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec
<3,
T
>& 
x0
,

1252 c⁄° 
Vec
<3,
T
>& 
x1
,

1253 c⁄° 
Vec
<3,
T
>& 
x2
,

1254 c⁄° 
Vec
<3,
T
>& 
x3
,

1255 c⁄° 
Vec
<3,
T
>& 
x4
,

1256 * 
out_Æpha0
,

1257 * 
out_Æpha1
,

1258 * 
out_Æpha2
,

1259 * 
out_Æpha3
,

1260 * 
out_Æpha4
 )

1263 
	gT
::
begö_•ecül_¨ôhmëic
();

1265 
T
 
	gÆpha0
;

1266 
‹õ¡©i⁄3d
(
x1
, 
x2
, 
x3
, 
x4
,
Æpha0
);

1268 
T
 
	gÆpha1
;

1269 
‹õ¡©i⁄3d
(
x0
, 
x2
, 
x3
, 
x4
,
Æpha1
);

1270 
	gÆpha1
 = -
Æpha1
;

1272 if–
˚πaöly_›posôe_sign
(
Æpha0
, 
Æpha1
) )

1274 
	gT
::
íd_•ecül_¨ôhmëic
();

1278 
T
 
	gÆpha2
;

1279 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x3
, 
x4
, 
Æpha2
);

1281 
T
 
	gÆpha3
;

1282 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x4
, 
Æpha3
);

1283 
	gÆpha3
 = -
Æpha3
;

1285 if–
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha3
) )

1287 
	gT
::
íd_•ecül_¨ôhmëic
();

1291 
T
 
	gÆpha4
;

1292 
‹õ¡©i⁄3d
(
x0
, 
x1
, 
x2
, 
x3
, 
Æpha4
);

1294 if–
˚πaöly_›posôe_sign
(
Æpha2
, 
Æpha4
) )

1296 
	gT
::
íd_•ecül_¨ôhmëic
();

1300 if–
˚πaöly_›posôe_sign
(
Æpha3
, 
Æpha4
) )

1302 
	gT
::
íd_•ecül_¨ôhmëic
();

1306 
	gT
::
íd_•ecül_¨ôhmëic
();

1308 i‡–
	gÆpha0
.
ödeföôe_sign
(Ë|| 
	gÆpha1
.ödeföôe_sign(Ë|| 
	gÆpha2
.ödeföôe_sign(Ë|| 
	gÆpha3
.ödeföôe_sign(Ë|| 
	gÆpha4
.indefinite_sign() )

1314 
	gsum1
 = 
Æpha0
.
e°im©e
(Ë+ 
Æpha1
.estimate();

1315 
	gsum2
 = 
Æpha2
.
e°im©e
(Ë+ 
Æpha3
.e°im©e(Ë+ 
Æpha4
.estimate();

1317 if(
	gsum1
 && 
	gsum2
)

1319 *
	gout_Æpha0
 = 
Æpha0
.
e°im©e
(Ë/ 
sum1
;

1320 *
	gout_Æpha1
 = 
Æpha1
.
e°im©e
(Ë/ 
sum1
;

1321 *
	gout_Æpha2
 = 
Æpha2
.
e°im©e
(Ë/ 
sum2
;

1322 *
	gout_Æpha3
 = 
Æpha3
.
e°im©e
(Ë/ 
sum2
;

1323 *
	gout_Æpha4
 = 
Æpha4
.
e°im©e
(Ë/ 
sum2
;

1330  
degíî©e_edge_åüngÀ_öãr£˘i⁄
–
x0
, 
x1
, 
x2
, 
x3
, 
x4
, 
out_Æpha0
, 
out_Æpha1
, 
out_Æpha2
, 
out_Æpha3
, 
out_Æpha4
 );

1337 
boﬁ
 
edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

1338 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

1339 
boﬁ
 
is_edge_edge
,

1340 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

1341 c⁄° 
Vec3d
& 
d_s0
, c⁄° Vec3d& 
d_s1
,

1342 * 
Æphas
 )

1345 
Vec3I¡îvÆ
 
	gt0
, 
	gt1
, 
	gt2
;

1346 
gë_åüngÀ_vîti˚s
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
ts
, 
us
, 
vs
, 
t0
, 
t1
, 
t2
 );

1348 
Vec3I¡îvÆ
 
	gs0
, 
	gs1
;

1349 
make_ve˘‹
–
d_s0
, 
s0
 );

1350 
make_ve˘‹
–
d_s1
, 
s1
 );

1352 
	gªsu…
 = 
edge_åüngÀ_öãr£˘i⁄
–
s0
, 
s1
, 
t0
, 
t1
, 
t2
, &
Æphas
[0], &alphas[1], &alphas[2], &alphas[3], &alphas[4] );

1356 i‡–
	gªsu…
 < 0 )

1359 
Vec3e
 
	gexp_t0
, 
	gexp_t1
, 
	gexp_t2
;

1360 
gë_åüngÀ_vîti˚s
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
ts
, 
us
, 
vs
, 
exp_t0
, 
exp_t1
, 
exp_t2
 );

1362 
Vec3e
 
	gexp_s0
, 
	gexp_s1
;

1363 
make_ve˘‹
–
d_s0
, 
exp_s0
 );

1364 
make_ve˘‹
–
d_s1
, 
exp_s1
 );

1366 
	gªsu…
 = 
edge_åüngÀ_öãr£˘i⁄
–
exp_s0
, 
exp_s1
, 
exp_t0
, 
exp_t1
, 
exp_t2
, &
Æphas
[0], &alphas[1], &alphas[2], &alphas[3], &alphas[4] );

1369 i‡–
	gªsu…
 == 0 )

1371  
Ál£
;

1374  
	gåue
;

1381 
	gãm∂©e
<
˛ass
 
	gT
>

1382 
T
 
∂™e_di°
–c⁄° 
Vec
<3,T>& 
x
, c⁄° Vec<3,T>& 
q
, c⁄° Vec<3,T>& 
r
, c⁄° Vec<3,T>& 
p
 )

1384  
dŸ
–
x
-
p
, 
¸oss
–
q
-p, 
r
-p ) );

1389 
	gãm∂©e
<
˛ass
 
	gT
>

1390 
im∂icô_surÁ˚_fun˘i⁄
–c⁄° 
Vec
<3,
T
>& 
x
, c⁄° Vec<3,T>& 
q0
, c⁄° Vec<3,T>& 
q1
, c⁄° Vec<3,T>& 
q2
, c⁄° Vec<3,T>& 
q3
, T& 
out
 )

1392 
	gT
::
begö_•ecül_¨ôhmëic
();

1394 
T
 
	gg012
 = 
∂™e_di°
–
x
, 
q0
, 
q1
, 
q2
 );

1395 
T
 
	gg132
 = 
∂™e_di°
–
x
, 
q1
, 
q3
, 
q2
 );

1396 
T
 
	gh12
 = 
g012
 * 
g132
;

1397 
T
 
	gg013
 = 
∂™e_di°
–
x
, 
q0
, 
q1
, 
q3
 );

1398 
T
 
	gg032
 = 
∂™e_di°
–
x
, 
q0
, 
q3
, 
q2
 );

1399 
T
 
	gh03
 = 
g013
 * 
g032
;

1400 
	gout
 = 
h12
 - 
h03
;

1402 
	gT
::
íd_•ecül_¨ôhmëic
();

1407 
boﬁ
 
ã°_wôh_åüngÀs
(c⁄° 
Vec3d
 &
d_x0ﬁd
, c⁄° Vec3d &
d_x1ﬁd
, c⁄° Vec3d &
d_x2ﬁd
, c⁄° Vec3d &
d_x3ﬁd
,

1408 c⁄° 
Vec3d
 &
d_x0√w
, c⁄° Vec3d &
d_x1√w
, c⁄° Vec3d &
d_x2√w
, c⁄° Vec3d &
d_x3√w
,

1409 
boﬁ
 
is_edge_edge
,

1410 c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
,

1411 c⁄° 
Vec3d
& 
s0
, c⁄° Vec3d& 
s1
,

1412 
boﬁ
 
u£_posôive_åüngÀs
, boﬁ& 
edge_hô
 )

1418 
	gsign_h12
 = -2;

1421 
Vec3I¡îvÆ
 
	gq0
, 
	gq1
, 
	gq2
, 
	gq3
;

1424 
gë_quad_vîti˚s
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
ts
, 
us
, 
vs
, 
q0
, 
q1
, 
q2
, 
q3
 );

1426 
	gI¡îvÆTy≥
::
begö_•ecül_¨ôhmëic
();

1428 
Vec3I¡îvÆ
 
	gx
 = 
I¡îvÆTy≥
(0.5Ë* ( 
q0
 + 
q3
 );

1429 
I¡îvÆTy≥
 
	gg012
 = 
∂™e_di°
–
x
, 
q0
, 
q1
, 
q2
 );

1430 
I¡îvÆTy≥
 
	gg132
 = 
∂™e_di°
–
x
, 
q1
, 
q3
, 
q2
 );

1431 
I¡îvÆTy≥
 
	gh12
 = 
g012
 * 
g132
;

1433 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

1435 i‡–
	gh12
.
is_˚πaöly_√g©ive
(ËË{ 
	gsign_h12
 = -1; }

1436 i‡–
	gh12
.
is_˚πaöly_zîo
(ËË{ 
	gsign_h12
 = 0; }

1437 i‡–
	gh12
.
is_˚πaöly_posôive
(ËË{ 
	gsign_h12
 = 1; }

1440 i‡–
	gsign_h12
 == -2 )

1444 
Vec3e
 
eq0
, 
eq1
, 
eq2
, 
eq3
;

1447 
gë_quad_vîti˚s
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
ts
, 
us
, 
vs
, 
eq0
, 
eq1
, 
eq2
, 
eq3
 );

1449 
Vec3e
 
	gx
 = 
ex∑nsi⁄
–0.5 ) * ( 
eq0
 + 
eq3
 );

1451 
ex∑nsi⁄
 
	gg012
 = 
∂™e_di°
–
x
, 
eq0
, 
eq1
, 
eq2
 );

1452 
ex∑nsi⁄
 
	gg132
 = 
∂™e_di°
–
x
, 
eq1
, 
eq3
, 
eq2
 );

1453 
ex∑nsi⁄
 
	gh12
 = 
g012
 * 
g132
;

1454 
	gsign_h12
 = 
sign
–
h12
 );

1457 i‡–
	gsign_h12
 == 0 )

1460 
sign_h12
 = 1;

1463 i‡–
	gsign_h12
 > 0 )

1468 i‡–
	gu£_posôive_åüngÀs
 )

1470 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1472 
Vec3b
 
t013
–
ts
[0],Ås[1],Ås[3] );

1473 
Vec3b
 
u013
–
us
[0], us[1], us[3] );

1474 
Vec3b
 
v013
–
vs
[0], vs[1], vs[3] );

1475 
boﬁ
 
	ghô_a
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t013
, 
u013
, 
v013
, 
s0
, 
s1
, 
b
 );

1477 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1478 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1480 
Vec3b
 
t032
–
ts
[0],Ås[3],Ås[2] );

1481 
Vec3b
 
u032
–
us
[0], us[3], us[2] );

1482 
Vec3b
 
v032
–
vs
[0], vs[3], vs[2] );

1483 
boﬁ
 
	ghô_b
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t032
, 
u032
, 
v032
, 
s0
, 
s1
, 
b
 );

1484 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1485 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1487  
	ghô_a
 || 
	ghô_b
;

1491 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1493 
Vec3b
 
t012
–
ts
[0],Ås[1],Ås[2] );

1494 
Vec3b
 
u012
–
us
[0], us[1], us[2] );

1495 
Vec3b
 
v012
–
vs
[0], vs[1], vs[2] );

1496 
boﬁ
 
	ghô_a
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t012
, 
u012
, 
v012
, 
s0
, 
s1
, 
b
 );

1498 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1499 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1501 
Vec3b
 
t132
–
ts
[1],Ås[3],Ås[2] );

1502 
Vec3b
 
u132
–
us
[1], us[3], us[2] );

1503 
Vec3b
 
v132
–
vs
[1], vs[3], vs[2] );

1504 
boﬁ
 
	ghô_b
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t132
, 
u132
, 
v132
, 
s0
, 
s1
, 
b
 );

1505 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1506 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1508  
	ghô_a
 || 
	ghô_b
;

1516 i‡–
	gu£_posôive_åüngÀs
 )

1518 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1520 
Vec3b
 
t012
–
ts
[0],Ås[1],Ås[2] );

1521 
Vec3b
 
u012
–
us
[0], us[1], us[2] );

1522 
Vec3b
 
v012
–
vs
[0], vs[1], vs[2] );

1523 
boﬁ
 
	ghô_a
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t012
, 
u012
, 
v012
, 
s0
, 
s1
, 
b
 );

1525 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1526 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1528 
Vec3b
 
t132
–
ts
[1],Ås[3],Ås[2] );

1529 
Vec3b
 
u132
–
us
[1], us[3], us[2] );

1530 
Vec3b
 
v132
–
vs
[1], vs[3], vs[2] );

1531 
boﬁ
 
	ghô_b
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t132
, 
u132
, 
v132
, 
s0
, 
s1
, 
b
 );

1533 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1534 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1536  
	ghô_a
 || 
	ghô_b
;

1540 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1541 
Vec3b
 
t013
–
ts
[0],Ås[1],Ås[3] );

1542 
Vec3b
 
u013
–
us
[0], us[1], us[3] );

1543 
Vec3b
 
v013
–
vs
[0], vs[1], vs[3] );

1544 
boﬁ
 
	ghô_a
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t013
, 
u013
, 
v013
, 
s0
, 
s1
, 
b
 );

1546 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1547 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1549 
Vec3b
 
t032
–
ts
[0],Ås[3],Ås[2] );

1550 
Vec3b
 
u032
–
us
[0], us[3], us[2] );

1551 
Vec3b
 
v032
–
vs
[0], vs[3], vs[2] );

1552 
boﬁ
 
	ghô_b
 = 
edge_åüngÀ_öãr£˘i⁄
–
d_x0ﬁd
, 
d_x1ﬁd
, 
d_x2ﬁd
, 
d_x3ﬁd
, 
d_x0√w
, 
d_x1√w
, 
d_x2√w
, 
d_x3√w
, 
is_edge_edge
, 
t032
, 
u032
, 
v032
, 
s0
, 
s1
, 
b
 );

1554 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1555 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1557  
	ghô_a
 || 
	ghô_b
;

1567 
ölöe
 
∂™e_sign
–c⁄° 
Vec3d
& 
n
, c⁄° 
Vec3I¡îvÆ
& 
x
 )

1570 
I¡îvÆTy≥
 
	gdi°
 = I¡îvÆTy≥(
n
[0])*
x
[0] + IntervalType(n[1])*x[1] + IntervalType(n[2])*x[2];

1572 i‡–
	gdi°
.
is_˚πaöly_√g©ive
() ) {  -1; }

1573 i‡–
	gdi°
.
is_˚πaöly_posôive
() ) {  1; }

1579 
ölöe
 
quick_1_∂™e_sign
–c⁄° 
Vec3i
& 
n‹mÆ
, c⁄° 
Vec3I¡îvÆ
& 
x
 )

1582 
I¡îvÆTy≥
 
di°
( 0, 0 );

1584 i‡–
	gn‹mÆ
[0] < 0 ) { 
	gdi°
 -
x
[0]; }

1585 i‡–
	gn‹mÆ
[0] > 0 ) { 
	gdi°
 +
x
[0]; }

1587 i‡–
	gn‹mÆ
[1] < 0 ) { 
	gdi°
 -
x
[1]; }

1588 i‡–
	gn‹mÆ
[1] > 0 ) { 
	gdi°
 +
x
[1]; }

1590 i‡–
	gn‹mÆ
[2] < 0 ) { 
	gdi°
 -
x
[2]; }

1591 i‡–
	gn‹mÆ
[2] > 0 ) { 
	gdi°
 +
x
[2]; }

1593 i‡–
	gdi°
.
is_˚πaöly_√g©ive
() ) {  -1; }

1594 i‡–
	gdi°
.
is_˚πaöly_posôive
() ) {  1; }

1611 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
poöt_ãåahedr⁄_öãr£˘i⁄
–c⁄° 
Vec4ui
& 
quad
, c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
, c⁄° 
Vec3d
& 
d_x
 )

1614 
Vec3I¡îvÆ
 
	gx
;

1615 
make_ve˘‹
–
d_x
, 
x
 );

1617 
	gs
[5];

1618 
	gªsu…
 = 
roŸ∑rôy
::
poöt_ãåahedr⁄_öãr£˘i⁄
(
x
,

1619 
m_öãrvÆ_hex_vîti˚s
[
quad
[0]],

1620 
m_öãrvÆ_hex_vîti˚s
[
quad
[1]],

1621 
m_öãrvÆ_hex_vîti˚s
[
quad
[2]],

1622 
m_öãrvÆ_hex_vîti˚s
[
quad
[3]],

1623 &
s
[0], &s[1], &s[2], &s[3], &s[4] );

1627 i‡–
	gªsu…
 < 0 )

1632  
	gi
 = 0; i < 4; ++i )

1634 i‡–!
	gm_ex∑nsi⁄_hex_vîti˚s_compuãd
[ 
quad
[
i
] ] )

1636 i‡–
	gm_is_edge_edge
 )

1638 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
ts
[
i
], 
us
[i], 
vs
[i], 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[i] ] );

1642 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
ts
[
i
], 
us
[i], 
vs
[i], 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[i] ] );

1645 
	gm_ex∑nsi⁄_hex_vîti˚s_compuãd
[ 
quad
[
i
] ] = 
åue
;

1651 
Vec3e
 
	gexp_x
;

1652 
make_ve˘‹
–
d_x
, 
exp_x
 );

1654 
	gªsu…
 = 
roŸ∑rôy
::
poöt_ãåahedr⁄_öãr£˘i⁄
(
exp_x
,

1655 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[0] ],

1656 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[1] ],

1657 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[2] ],

1658 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[3] ],

1659 &
s
[0], &s[1], &s[2], &s[3], &s[4] );

1662 i‡–
	gªsu…
 == 0 )

1664  
Ál£
;

1667  
	gåue
;

1677 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
edge_åüngÀ_öãr£˘i⁄
–c⁄° 
Vec3ui
& 
åüngÀ
,

1678 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

1679 c⁄° 
Vec3d
& 
d_s0
, c⁄° Vec3d& 
d_s1
,

1680 * 
Æphas
 )

1683 c⁄° 
	gVec3I¡îvÆ
& 
	gt0
 = 
m_öãrvÆ_hex_vîti˚s
[
åüngÀ
[0]];

1684 c⁄° 
	gVec3I¡îvÆ
& 
	gt1
 = 
m_öãrvÆ_hex_vîti˚s
[
åüngÀ
[1]];

1685 c⁄° 
	gVec3I¡îvÆ
& 
	gt2
 = 
m_öãrvÆ_hex_vîti˚s
[
åüngÀ
[2]];

1687 
Vec3I¡îvÆ
 
	gs0
, 
	gs1
;

1688 
make_ve˘‹
–
d_s0
, 
s0
 );

1689 
make_ve˘‹
–
d_s1
, 
s1
 );

1691 
	gªsu…
 = 
roŸ∑rôy
::
edge_åüngÀ_öãr£˘i⁄
–
s0
, 
s1
, 
t0
, 
t1
, 
t2
, &
Æphas
[0], &alphas[1], &alphas[2], &alphas[3], &alphas[4] );

1695 i‡–
	gªsu…
 < 0 )

1697 
Vec3e
 
	gexp_t0
, 
	gexp_t1
, 
	gexp_t2
;

1698 
gë_åüngÀ_vîti˚s
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
m_is_edge_edge
, 
ts
, 
us
, 
vs
, 
exp_t0
, 
exp_t1
, 
exp_t2
 );

1700 
Vec3e
 
	gexp_s0
, 
	gexp_s1
;

1701 
make_ve˘‹
–
d_s0
, 
exp_s0
 );

1702 
make_ve˘‹
–
d_s1
, 
exp_s1
 );

1704 
	gªsu…
 = 
roŸ∑rôy
::
edge_åüngÀ_öãr£˘i⁄
–
exp_s0
, 
exp_s1
, 
exp_t0
, 
exp_t1
, 
exp_t2
, &
Æphas
[0], &alphas[1], &alphas[2], &alphas[3], &alphas[4] );

1707 i‡–
	gªsu…
 == 0 )

1709  
Ál£
;

1712  
	gåue
;

1723 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
im∂icô_surÁ˚_fun˘i⁄_sign
–c⁄° 
Vec4ui
& 
quad
, c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
, c⁄° 
Vec3d
& 
d_x
 )

1729 c⁄° 
	gVec3I¡îvÆ
& 
	gq0
 = 
m_öãrvÆ_hex_vîti˚s
[
quad
[0]];

1730 c⁄° 
	gVec3I¡îvÆ
& 
	gq1
 = 
m_öãrvÆ_hex_vîti˚s
[
quad
[1]];

1731 c⁄° 
	gVec3I¡îvÆ
& 
	gq2
 = 
m_öãrvÆ_hex_vîti˚s
[
quad
[2]];

1732 c⁄° 
	gVec3I¡îvÆ
& 
	gq3
 = 
m_öãrvÆ_hex_vîti˚s
[
quad
[3]];

1734 
Vec3I¡îvÆ
 
	gx
;

1735 
make_ve˘‹
–
d_x
, 
x
 );

1737 
I¡îvÆTy≥
 
	gf
;

1738 
im∂icô_surÁ˚_fun˘i⁄
–
x
, 
q0
, 
q1
, 
q2
, 
q3
, 
f
 );

1740 i‡–
	gf
.
is_˚πaöly_√g©ive
() ) {  -1; }

1741 i‡–
	gf
.
is_˚πaöly_zîo
() ) {  0; }

1742 i‡–
	gf
.
is_˚πaöly_posôive
() ) {  1; }

1747  
	gi
 = 0; i < 4; ++i )

1749 i‡–!
	gm_ex∑nsi⁄_hex_vîti˚s_compuãd
[ 
quad
[
i
] ] )

1751 i‡–
	gm_is_edge_edge
 )

1753 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
ts
[
i
], 
us
[i], 
vs
[i], 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[i] ] );

1757 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
ts
[
i
], 
us
[i], 
vs
[i], 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[i] ] );

1760 
	gm_ex∑nsi⁄_hex_vîti˚s_compuãd
[ 
quad
[
i
] ] = 
åue
;

1764 
Vec3e
 
	gx
;

1765 
make_ve˘‹
–
d_x
, 
x
 );

1766 
ex∑nsi⁄
 
	gef
;

1768 
im∂icô_surÁ˚_fun˘i⁄
–
x
, 
m_ex∑nsi⁄_hex_vîti˚s
[ 
quad
[0] ], m_ex∑nsi⁄_hex_vîti˚s[ quad[1] ], m_ex∑nsi⁄_hex_vîti˚s[ quad[2] ], m_ex∑nsi⁄_hex_vîti˚s[ quad[3] ], 
ef
 );

1770  
sign
–
ef
 );

1782 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
øy_quad_öãr£˘i⁄_∑rôy
–c⁄° 
Vec4ui
& 
quad
,

1783 c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
,

1784 c⁄° 
Vec3d
& 
øy_‹igö
, c⁄° Vec3d& 
øy_hód
,

1785 
boﬁ
& 
edge_hô
, boﬁ& 
‹igö_⁄_surÁ˚
 )

1788 
boﬁ
 
	gpoöt_ö_ãt0
 = 
poöt_ãåahedr⁄_öãr£˘i⁄
–
quad
, 
ts
, 
us
, 
vs
, 
øy_‹igö
 );

1790 i‡–
	gpoöt_ö_ãt0
 )

1793 
	gsign0
 = 
im∂icô_surÁ˚_fun˘i⁄_sign
–
quad
, 
ts
, 
us
, 
vs
, 
øy_‹igö
 );

1795 i‡–
	gsign0
 == 0 )

1797 
‹igö_⁄_surÁ˚
 = 
åue
;

1798  
	gÁl£
;

1803 i‡–
	gsign0
 > 0 )

1806  
ã°_wôh_åüngÀs
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
m_is_edge_edge
, 
ts
, 
us
, 
vs
, 
øy_‹igö
, 
øy_hód
, 
Ál£
, 
edge_hô
 );

1812  
ã°_wôh_åüngÀs
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
m_is_edge_edge
, 
ts
, 
us
, 
vs
, 
øy_‹igö
, 
øy_hód
, 
åue
, 
edge_hô
 );

1823 
boﬁ
 
	ghô_a
, 
	ghô_b
;

1826 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1828 
Vec3ui
 
åüngÀ013
–
quad
[0], quad[1], quad[3] );

1829 
Vec3b
 
t013
–
ts
[0],Ås[1],Ås[3] );

1830 
Vec3b
 
u013
–
us
[0], us[1], us[3] );

1831 
Vec3b
 
v013
–
vs
[0], vs[1], vs[3] );

1832 
	ghô_a
 = 
edge_åüngÀ_öãr£˘i⁄
–
åüngÀ013
, 
t013
, 
u013
, 
v013
, 
øy_‹igö
, 
øy_hód
, 
b
 );

1834 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1835 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1840 
	gb
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1842 
Vec3ui
 
åüngÀ032
–
quad
[0], quad[3], quad[2] );

1843 
Vec3b
 
t032
–
ts
[0],Ås[3],Ås[2] );

1844 
Vec3b
 
u032
–
us
[0], us[3], us[2] );

1845 
Vec3b
 
v032
–
vs
[0], vs[3], vs[2] );

1846 
	ghô_b
 = 
edge_åüngÀ_öãr£˘i⁄
–
åüngÀ032
, 
t032
, 
u032
, 
v032
, 
øy_‹igö
, 
øy_hód
, 
b
 );

1848 i‡–
	gb
[2] =0.0 || 
b
[3] =0.0 || b[4] =0.0 ) { 
edge_hô
 = 
åue
; }

1849 i‡–
	gb
[2] =1.0 || 
b
[3] =1.0 || b[4] =1.0 ) { 
edge_hô
 = 
åue
; }

1852  
	ghô_a
 ^ 
	ghô_b
;

1855 
as£π
( !"ShouldÇot get here" );

1857  
	gåue
;

1869 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
øy_¥ism_∑rôy_ã°
()

1872 
Vec3d
 
ã°_øy
–
m_øy
 );

1874 
	gøy_Àn
 = 
mag
–
ã°_øy
 );

1876 
	g°d
::
ve˘‹
<
Vec3ui
> 
åis
(2);

1877 
	gåis
[0] = 
Vec3ui
( 0, 1, 2 );

1878 
	gåis
[1] = 
Vec3ui
( 3, 4, 5 );

1880 
	g°d
::
ve˘‹
<
Vec4ui
> 
quads
(3);

1881 
	gquads
[0] = 
Vec4ui
( 0, 1, 3, 4 );

1882 
	gquads
[1] = 
Vec4ui
( 1, 2, 4, 5 );

1883 
	gquads
[2] = 
Vec4ui
( 0, 2, 3, 5 );

1885 c⁄° 
boﬁ
 
	gvîãx_ts
[6] = { 0, 0, 0, 1, 1, 1 };

1886 c⁄° 
boﬁ
 
	gvîãx_us
[6] = { 0, 1, 0, 0, 1, 0 };

1887 c⁄° 
boﬁ
 
	gvîãx_vs
[6] = { 0, 0, 1, 0, 0, 1 };

1890 
	g°d
::
ve˘‹
<
boﬁ
> 
åi_hôs
–2, 
Ál£
 );

1891 
	g°d
::
ve˘‹
<
boﬁ
> 
quad_hôs
–3, 
Ál£
 );

1893 
boﬁ
 
	ggood_hô
 = 
Ál£
;

1894 
	gnum_åõs
 = 0;

1896 !
	ggood_hô
 && 
	gnum_åõs
++ < 10 )

1898 
	ggood_hô
 = 
åue
;

1902  
	gi
 = 0; i < 
	gåis
.
size
(); ++i )

1904 c⁄° 
	gVec3ui
& 
	gt
 = 
åis
[
i
];

1905 
	gb¨y
[5] = { 0.5, 0.5, 0.5, 0.5, 0.5 };

1907 
Vec3b
 
ts
–
vîãx_ts
[
t
[0]], vertex_ts[t[1]], vertex_ts[t[2]] );

1908 
Vec3b
 
us
–
vîãx_us
[
t
[0]], vertex_us[t[1]], vertex_us[t[2]] );

1909 
Vec3b
 
vs
–
vîãx_vs
[
t
[0]], vertex_vs[t[1]], vertex_vs[t[2]] );

1911 
	gåi_hôs
[
i
] = 
roŸ∑rôy
::
edge_åüngÀ_öãr£˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
, 
m_is_edge_edge
, 
ts
, 
us
, 
vs
, 
Vec3d
(0,0,0), 
ã°_øy
, 
b¨y
 );

1913 i‡–
	gåi_hôs
[
i
] )

1915 i‡–
	gb¨y
[2] =0.0 || 
b¨y
[3] =0.0 || b¨y[4] =0.0 ) { 
good_hô
 = 
Ál£
; }

1916 i‡–
	gb¨y
[2] =1.0 || 
b¨y
[3] =1.0 || b¨y[4] =1.0 ) { 
good_hô
 = 
Ál£
; }

1917 i‡–
	gb¨y
[0] == 1.0 )

1920  
åue
;

1925  
	gi
 = 0; i < 
	gquads
.
size
(); ++i )

1927 c⁄° 
	gVec4ui
& 
	gq
 = 
quads
[
i
];

1928 
boﬁ
 
	gedge_hô
 = 
Ál£
;

1929 
boﬁ
 
	g‹igö_⁄_surÁ˚
 = 
Ál£
;

1931 
Vec4b
 
ts
–
vîãx_ts
[
q
[0]], vertex_ts[q[1]], vertex_ts[q[2]], vertex_ts[q[3]] );

1932 
Vec4b
 
us
–
vîãx_us
[
q
[0]], vertex_us[q[1]], vertex_us[q[2]], vertex_us[q[3]] );

1933 
Vec4b
 
vs
–
vîãx_vs
[
q
[0]], vertex_vs[q[1]], vertex_vs[q[2]], vertex_vs[q[3]] );

1935 
	gquad_hôs
[
i
] = 
øy_quad_öãr£˘i⁄_∑rôy
–
q
, 
ts
, 
us
, 
vs
, 
Vec3d
(0,0,0), 
ã°_øy
, 
edge_hô
, 
‹igö_⁄_surÁ˚
 );

1937 i‡–
	gedge_hô
 )

1939 
	ggood_hô
 = 
Ál£
;

1943 i‡–
	g‹igö_⁄_surÁ˚
 )

1945  
	gåue
;

1950 i‡–!
	ggood_hô
 )

1952 
	gr
 = 
ønd
(Ë/ ()
RAND_MAX
 * 2.0 * 
M_PI
;

1953 
	gã°_øy
[0] = 
cos
(
r
Ë* 
øy_Àn
;

1954 
	gã°_øy
[1] = -
sö
(
r
Ë* 
øy_Àn
;

1958 i‡–!
	ggood_hô
 ) {  
	gåue
; }

1960 
	gnum_hôs
 = 0;

1962  
	gi
 = 0; i < 
	gåi_hôs
.
size
(); ++i )

1964 i‡–
	gåi_hôs
[
i
] ) { ++
	gnum_hôs
; }

1967  
	gi
 = 0; i < 
	gquad_hôs
.
size
(); ++i )

1969 i‡–
	gquad_hôs
[
i
] ) { ++
	gnum_hôs
; }

1972  ( 
	gnum_hôs
 % 2 == 1 );

1983 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
øy_hex_∑rôy_ã°
( )

1986 c⁄° 
boﬁ
 
vîãx_ts
[8] = { 0, 1, 1, 0, 0, 1, 1, 0 };

1987 c⁄° 
boﬁ
 
	gvîãx_us
[8] = { 0, 0, 1, 1, 0, 0, 1, 1 };

1988 c⁄° 
boﬁ
 
	gvîãx_vs
[8] = { 0, 0, 0, 0, 1, 1, 1, 1 };

1990 
Vec3d
 
ã°_øy
–
m_øy
 );

1992 
	gøy_Àn
 = 
mag
–
ã°_øy
 );

1994 
boﬁ
 
	ggood_hô
 = 
Ál£
;

1995 
	gnum_åõs
 = 0;

1998 
	g°d
::
ve˘‹
<
Vec4ui
> 
quads
(6);

1999 
	gquads
[0] = 
Vec4ui
( 0, 1, 3, 2 );

2000 
	gquads
[1] = 
Vec4ui
( 0, 1, 4, 5 );

2001 
	gquads
[2] = 
Vec4ui
( 1, 2, 5, 6 );

2002 
	gquads
[3] = 
Vec4ui
( 2, 3, 6, 7 );

2003 
	gquads
[4] = 
Vec4ui
( 3, 0, 7, 4 );

2004 
	gquads
[5] = 
Vec4ui
( 4, 5, 7, 6 );

2007 
	g°d
::
ve˘‹
<
boﬁ
> 
hôs
–6, 
Ál£
 );

2012 !
	ggood_hô
 && 
	gnum_åõs
++ < 10 )

2014 
	ggood_hô
 = 
åue
;

2015 
boﬁ
 
	g™y_‹igö_⁄_surÁ˚
 = 
Ál£
;

2019  
	gi
 = 0; i < 6; ++i )

2021 c⁄° 
	gVec4ui
& 
	gquad
 = 
quads
[
i
];

2023 
Vec4b
 
ts
–
vîãx_ts
[
quad
[0]], vertex_ts[quad[1]], vertex_ts[quad[2]], vertex_ts[quad[3]] );

2024 
Vec4b
 
us
–
vîãx_us
[
quad
[0]], vertex_us[quad[1]], vertex_us[quad[2]], vertex_us[quad[3]] );

2025 
Vec4b
 
vs
–
vîãx_vs
[
quad
[0]], vertex_vs[quad[1]], vertex_vs[quad[2]], vertex_vs[quad[3]] );

2026 
boﬁ
 
	gedge_hô
 = 
Ál£
;

2027 
boﬁ
 
	g‹igö_⁄_surÁ˚
 = 
Ál£
;

2029 
	ghôs
[
i
] = 
øy_quad_öãr£˘i⁄_∑rôy
–
quad
, 
ts
, 
us
, 
vs
, 
Vec3d
(0,0,0), 
ã°_øy
, 
edge_hô
, 
‹igö_⁄_surÁ˚
 );

2031 i‡–
	gedge_hô
 )

2033 
	ggood_hô
 = 
Ál£
;

2036 i‡–
	g‹igö_⁄_surÁ˚
 )

2038 
	g™y_‹igö_⁄_surÁ˚
 = 
åue
;

2043 i‡–
	g™y_‹igö_⁄_surÁ˚
 )

2045  
	gåue
;

2049 i‡–!
	ggood_hô
 )

2051 
	gr
 = 
ønd
(Ë/ ()
RAND_MAX
 * 2.0 * 
M_PI
;

2052 
	gã°_øy
[0] = 
cos
(
r
Ë* 
øy_Àn
;

2053 
	gã°_øy
[1] = -
sö
(
r
Ë* 
øy_Àn
;

2057 i‡–!
	ggood_hô
 ) {  
	gåue
; }

2059 
	gnum_hôs
 = 0;

2060  
	gi
 = 0; i < 
	ghôs
.
size
(); ++i )

2062 i‡–
	ghôs
[
i
] ) { ++
	gnum_hôs
; }

2065  ( 
	gnum_hôs
 % 2 == 1 );

2076 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
∂™e_cuŒög
–c⁄° 
°d
::
ve˘‹
<
Vec3ui
>& 
åüngÀs
, c⁄° std::ve˘‹<
Vec3d
>& 
bound¨y_vîti˚s
 )

2079 
°d
::
size_t
 
num_åüngÀs
 = 
åüngÀs
.
size
();

2080 
	g°d
::
size_t
 
num_bound¨y_vîti˚s
 = 
bound¨y_vîti˚s
.
size
();

2082  
	gi
 = 0; i < 
	gnum_åüngÀs
; ++i )

2084 c⁄° 
	gVec3ui
& 
	gt
 = 
åüngÀs
[
i
];

2085 
Vec3d
 
	gn‹mÆ
 = 
¸oss
–
bound¨y_vîti˚s
[
t
[1]] - boundary_vertices[t[0]], boundary_vertices[t[2]] - boundary_vertices[t[0]] );

2087 i‡–
mag
(
n‹mÆ
) == 0.0 ) { ; }

2089 
	gn‹mÆ
 = 
n‹mÆized
(
n‹mÆ
);

2091 
	gI¡îvÆTy≥
::
begö_•ecül_¨ôhmëic
();

2093 c⁄° 
	gsgn
 = 
∂™e_sign
–
n‹mÆ
, 
m_öãrvÆ_hex_vîti˚s
[0] );

2095 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

2097 i‡–
	gsgn
 == 0 )

2102 
boﬁ
 
	gÆl_ßme_side
 = 
åue
;

2104  
	gv
 = 1; v < 
	gnum_bound¨y_vîti˚s
; ++v )

2106 
	gI¡îvÆTy≥
::
begö_•ecül_¨ôhmëic
();

2108 c⁄° 
	gthis_∂™e_sign
 = 
∂™e_sign
–
n‹mÆ
, 
m_öãrvÆ_hex_vîti˚s
[
v
] );

2110 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

2112 i‡–
	gthis_∂™e_sign
 =0 || 
this_∂™e_sign
 !
sgn
 )

2114 
Æl_ßme_side
 = 
Ál£
;

2119 i‡–
	gÆl_ßme_side
 )

2121  
	gåue
;

2125 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

2126  
	gÁl£
;

2137 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
edge_edge_öãrvÆ_∂™e_cuŒög
()

2140 
°d
::
ve˘‹
<
Vec3d
> 
hex_vîti˚s
(8);

2141  
	gi
 = 0; i < 8; ++i )

2143 
	ghex_vîti˚s
[
i
][0] = 
m_öãrvÆ_hex_vîti˚s
[i][0].
e°im©e
();

2144 
	ghex_vîti˚s
[
i
][1] = 
m_öãrvÆ_hex_vîti˚s
[i][1].
e°im©e
();

2145 
	ghex_vîti˚s
[
i
][2] = 
m_öãrvÆ_hex_vîti˚s
[i][2].
e°im©e
();

2148 
	g°d
::
ve˘‹
<
Vec3ui
> 
åüngÀs
(12);

2149 
	gåüngÀs
[0] = 
Vec3ui
(0,1,3);

2150 
	gåüngÀs
[1] = 
Vec3ui
(0,3,2);

2151 
	gåüngÀs
[2] = 
Vec3ui
(0,1,4);

2152 
	gåüngÀs
[3] = 
Vec3ui
(0,4,5);

2153 
	gåüngÀs
[4] = 
Vec3ui
(1,2,5);

2154 
	gåüngÀs
[5] = 
Vec3ui
(1,5,6);

2155 
	gåüngÀs
[6] = 
Vec3ui
(2,3,6);

2156 
	gåüngÀs
[7] = 
Vec3ui
(2,6,7);

2157 
	gåüngÀs
[8] = 
Vec3ui
(3,0,7);

2158 
	gåüngÀs
[9] = 
Vec3ui
(3,7,4);

2159 
	gåüngÀs
[10] = 
Vec3ui
(4,5,7);

2160 
	gåüngÀs
[11] = 
Vec3ui
(4,7,6);

2162  
∂™e_cuŒög
–
åüngÀs
, 
hex_vîti˚s
 );

2173 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
poöt_åüngÀ_öãrvÆ_∂™e_cuŒög
()

2176 
°d
::
ve˘‹
<
Vec3d
> 
hex_vîti˚s
(6);

2177  
	gi
 = 0; i < 6; ++i )

2179 
	ghex_vîti˚s
[
i
][0] = 
m_öãrvÆ_hex_vîti˚s
[i][0].
e°im©e
();

2180 
	ghex_vîti˚s
[
i
][1] = 
m_öãrvÆ_hex_vîti˚s
[i][1].
e°im©e
();

2181 
	ghex_vîti˚s
[
i
][2] = 
m_öãrvÆ_hex_vîti˚s
[i][2].
e°im©e
();

2184 
	g°d
::
ve˘‹
<
Vec3ui
> 
åüngÀs
(8);

2185 
	gåüngÀs
[0] = 
Vec3ui
(0,1,2);

2186 
	gåüngÀs
[1] = 
Vec3ui
(3,4,5);

2187 
	gåüngÀs
[2] = 
Vec3ui
(0,1,3);

2188 
	gåüngÀs
[3] = 
Vec3ui
(0,3,4);

2189 
	gåüngÀs
[4] = 
Vec3ui
(1,2,4);

2190 
	gåüngÀs
[5] = 
Vec3ui
(1,4,5);

2191 
	gåüngÀs
[6] = 
Vec3ui
(0,2,3);

2192 
	gåüngÀs
[7] = 
Vec3ui
(0,2,5);

2194  
∂™e_cuŒög
–
åüngÀs
, 
hex_vîti˚s
 );

2204 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
fixed_∂™e_cuŒög
–
num_hex_vîti˚s
 )

2207  
i
 = -1; 
	gi
 < 1; ++i )

2209  
	gj
 = -1; j < 1; ++j )

2211  
	gk
 = -1; k < 1; ++k )

2214 
Vec3i
 
n‹mÆ
–
i
, 
k
, 
j
 );

2216 c⁄° 
	g∂™e_sign
 = 
quick_1_∂™e_sign
–
n‹mÆ
, 
m_öãrvÆ_hex_vîti˚s
[0] );

2218 i‡–
	g∂™e_sign
 == 0 )

2223 
boﬁ
 
	gÆl_ßme_side
 = 
åue
;

2225  
	gv
 = 1; v < 
	gnum_hex_vîti˚s
; ++v )

2227 c⁄° 
	gthis_∂™e_sign
 = 
quick_1_∂™e_sign
–
n‹mÆ
, 
m_öãrvÆ_hex_vîti˚s
[
v
] );

2229 i‡–
	gthis_∂™e_sign
 =0 || 
this_∂™e_sign
 !
∂™e_sign
 )

2231 
Æl_ßme_side
 = 
Ál£
;

2236 i‡–
	gÆl_ßme_side
 )

2238  
	gåue
;

2246  
	gÁl£
;

2258 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
edge_edge_cﬁlisi⁄
( )

2261 c⁄° 
boﬁ
 
vîãx_ts
[8] = { 0, 1, 1, 0, 0, 1, 1, 0 };

2262 c⁄° 
boﬁ
 
	gvîãx_us
[8] = { 0, 0, 1, 1, 0, 0, 1, 1 };

2263 c⁄° 
boﬁ
 
	gvîãx_vs
[8] = { 0, 0, 0, 0, 1, 1, 1, 1 };

2267 
	gI¡îvÆTy≥
::
begö_•ecül_¨ôhmëic
();

2268 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2269 
vîãx_ts
[0], 
vîãx_us
[0], 
vîãx_vs
[0], 
m_öãrvÆ_hex_vîti˚s
[0] );

2270 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2271 
vîãx_ts
[1], 
vîãx_us
[1], 
vîãx_vs
[1], 
m_öãrvÆ_hex_vîti˚s
[1] );

2272 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2273 
vîãx_ts
[2], 
vîãx_us
[2], 
vîãx_vs
[2], 
m_öãrvÆ_hex_vîti˚s
[2] );

2274 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2275 
vîãx_ts
[3], 
vîãx_us
[3], 
vîãx_vs
[3], 
m_öãrvÆ_hex_vîti˚s
[3] );

2276 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2277 
vîãx_ts
[4], 
vîãx_us
[4], 
vîãx_vs
[4], 
m_öãrvÆ_hex_vîti˚s
[4] );

2278 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2279 
vîãx_ts
[5], 
vîãx_us
[5], 
vîãx_vs
[5], 
m_öãrvÆ_hex_vîti˚s
[5] );

2280 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2281 
vîãx_ts
[6], 
vîãx_us
[6], 
vîãx_vs
[6], 
m_öãrvÆ_hex_vîti˚s
[6] );

2282 
edge_edge_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2283 
vîãx_ts
[7], 
vîãx_us
[7], 
vîãx_vs
[7], 
m_öãrvÆ_hex_vîti˚s
[7] );

2287 
boﬁ
 
	g∂™e_cuŒed
 = 
fixed_∂™e_cuŒög
(8);

2289 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

2291 
boﬁ
 
	ghex_∂™e_cuŒed
 = 
Ál£
;

2293 i‡–!
	g∂™e_cuŒed
 )

2295 
	ghex_∂™e_cuŒed
 = 
edge_edge_öãrvÆ_∂™e_cuŒög
();

2298 
boﬁ
 
	gß„_∑rôy
 = 
Ál£
;

2301 i‡–!
	g∂™e_cuŒed
 && !
	ghex_∂™e_cuŒed
 )

2306 
Vec3d
 
xmö
–1e30 ), 
xmax
( -1e30 );

2308  
	gi
 = 0; i < 8; ++i )

2310 
Vec2d
 
	göãrvÆ0
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][0].
gë_a˘uÆ_öãrvÆ
();

2311 
Vec2d
 
	göãrvÆ1
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][1].
gë_a˘uÆ_öãrvÆ
();

2312 
Vec2d
 
	göãrvÆ2
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][2].
gë_a˘uÆ_öãrvÆ
();

2314 
	gxmö
[0] = 
°d
::
mö
–
xmö
[0], 
öãrvÆ0
[0] );

2315 
	gxmö
[1] = 
°d
::
mö
–
xmö
[1], 
öãrvÆ1
[0] );

2316 
	gxmö
[2] = 
°d
::
mö
–
xmö
[2], 
öãrvÆ2
[0] );

2318 
	gxmax
[0] = 
°d
::
max
–
xmax
[0], 
öãrvÆ0
[1] );

2319 
	gxmax
[1] = 
°d
::
max
–
xmax
[1], 
öãrvÆ1
[1] );

2320 
	gxmax
[2] = 
°d
::
max
–
xmax
[2], 
öãrvÆ2
[1] );

2323 c⁄° 
	gøy_Àn
 = 
°d
::
max
–
mag
(
xmö
), mag(
xmax
) ) + 10.0;

2325 
	gm_øy
 = 
Vec3d
–
øy_Àn
,Ñay_len, 0 );

2327 
	gß„_∑rôy
 = 
øy_hex_∑rôy_ã°
( );

2331  
	gß„_∑rôy
;

2342 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
poöt_åüngÀ_cﬁlisi⁄
( )

2344 c⁄° 
boﬁ
 
vîãx_ts
[6] = { 0, 0, 0, 1, 1, 1 };

2345 c⁄° 
boﬁ
 
	gvîãx_us
[6] = { 0, 1, 0, 0, 1, 0 };

2346 c⁄° 
boﬁ
 
	gvîãx_vs
[6] = { 0, 0, 1, 0, 0, 1 };

2350 
	gI¡îvÆTy≥
::
begö_•ecül_¨ôhmëic
();

2351 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2352 
vîãx_ts
[0], 
vîãx_us
[0], 
vîãx_vs
[0], 
m_öãrvÆ_hex_vîti˚s
[0] );

2353 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2354 
vîãx_ts
[1], 
vîãx_us
[1], 
vîãx_vs
[1], 
m_öãrvÆ_hex_vîti˚s
[1] );

2355 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2356 
vîãx_ts
[2], 
vîãx_us
[2], 
vîãx_vs
[2], 
m_öãrvÆ_hex_vîti˚s
[2] );

2357 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2358 
vîãx_ts
[3], 
vîãx_us
[3], 
vîãx_vs
[3], 
m_öãrvÆ_hex_vîti˚s
[3] );

2359 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2360 
vîãx_ts
[4], 
vîãx_us
[4], 
vîãx_vs
[4], 
m_öãrvÆ_hex_vîti˚s
[4] );

2361 
poöt_åüngÀ_cﬁlisi⁄_fun˘i⁄
–
m_x0ﬁd
, 
m_x1ﬁd
, 
m_x2ﬁd
, 
m_x3ﬁd
, 
m_x0√w
, 
m_x1√w
, 
m_x2√w
, 
m_x3√w
,

2362 
vîãx_ts
[5], 
vîãx_us
[5], 
vîãx_vs
[5], 
m_öãrvÆ_hex_vîti˚s
[5] );

2366 
boﬁ
 
	g∂™e_cuŒed
 = 
fixed_∂™e_cuŒög
(6);

2368 
	gI¡îvÆTy≥
::
íd_•ecül_¨ôhmëic
();

2370 i‡–
	g∂™e_cuŒed
 )

2372  
	gÁl£
;

2375 
boﬁ
 
	g¥ism_∂™e_cuŒed
 = 
poöt_åüngÀ_öãrvÆ_∂™e_cuŒög
();

2377 i‡–
	g¥ism_∂™e_cuŒed
 )

2379  
	gÁl£
;

2384 
Vec3d
 
xmö
–1e30 ), 
xmax
( -1e30 );

2386  
	gi
 = 0; i < 6; ++i )

2388 
Vec2d
 
	göãrvÆ0
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][0].
gë_a˘uÆ_öãrvÆ
();

2389 
Vec2d
 
	göãrvÆ1
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][1].
gë_a˘uÆ_öãrvÆ
();

2390 
Vec2d
 
	göãrvÆ2
 = 
m_öãrvÆ_hex_vîti˚s
[
i
][2].
gë_a˘uÆ_öãrvÆ
();

2392 
	gxmö
[0] = 
°d
::
mö
–
xmö
[0], 
öãrvÆ0
[0] );

2393 
	gxmö
[1] = 
°d
::
mö
–
xmö
[1], 
öãrvÆ1
[0] );

2394 
	gxmö
[2] = 
°d
::
mö
–
xmö
[2], 
öãrvÆ2
[0] );

2396 
	gxmax
[0] = 
°d
::
max
–
xmax
[0], 
öãrvÆ0
[1] );

2397 
	gxmax
[1] = 
°d
::
max
–
xmax
[1], 
öãrvÆ1
[1] );

2398 
	gxmax
[2] = 
°d
::
max
–
xmax
[2], 
öãrvÆ2
[1] );

2401 c⁄° 
	gøy_Àn
 = 
°d
::
max
–
mag
(
xmö
), mag(
xmax
) ) + 10.0;

2403 
	gm_øy
 = 
Vec3d
–
øy_Àn
,Ñay_len, 0 );

2405 
boﬁ
 
	gß„_∑rôy
 = 
øy_¥ism_∑rôy_ã°
( );

2407  
	gß„_∑rôy
;

	@common/tunicate/rootparitycollisiontest.h

6 #i‚de‡
TUNICATE_ROOTPARITYCOLLISIONTEST_H


7 
	#TUNICATE_ROOTPARITYCOLLISIONTEST_H


	)

9 
	~<vec.h
>

10 
	~<öãrvÆ.h
>

11 
	~<ex∑nsi⁄.h
>

13 
«me•a˚
 
	groŸ∑rôy


16 
	gVec
<3,
	tI¡îvÆTy≥
> 
	tVec3I¡îvÆ
;

17 
	gVec
<2,
	tex∑nsi⁄
> 
	tVec2e
;

18 
	gVec
<3,
	tex∑nsi⁄
> 
	tVec3e
;

19 
	gVec
<3,
	tboﬁ
> 
	tVec3b
;

20 
	gVec
<4,
	tboﬁ
> 
	tVec4b
;

34 ˛as†
	cRoŸP¨ôyCﬁlisi⁄Te°


37 
	gpublic
:

42 
ölöe
 
RoŸP¨ôyCﬁlisi⁄Te°
(c⁄° 
Vec3d
 &
x0ﬁd
, c⁄° Vec3d &
x1ﬁd
, c⁄° Vec3d &
x2ﬁd
, c⁄° Vec3d &
x3ﬁd
,

43 c⁄° 
Vec3d
 &
x0√w
, c⁄° Vec3d &
x1√w
, c⁄° Vec3d &
x2√w
, c⁄° Vec3d &
x3√w
,

44 
boﬁ
 
is_edge_edge
 );

48 
ölöe
 
boﬁ
 
run_ã°
();

52 
boﬁ
 
edge_edge_cﬁlisi⁄
();

56 
boﬁ
 
poöt_åüngÀ_cﬁlisi⁄
();

59 
	g¥iv©e
:

65 c⁄° 
Vec3d
 &
m_x0ﬁd
, &
	gm_x1ﬁd
, &
	gm_x2ﬁd
, &
	gm_x3ﬁd
, &
	gm_x0√w
, &
	gm_x1√w
, &
	gm_x2√w
, &
	gm_x3√w
;

69 c⁄° 
boﬁ
 
	gm_is_edge_edge
;

75 
Vec3d
 
	gm_øy
;

79 
Vec3I¡îvÆ
 
	gm_öãrvÆ_hex_vîti˚s
[8];

84 
Vec3e
 
	gm_ex∑nsi⁄_hex_vîti˚s
[8];

88 
boﬁ
 
	gm_ex∑nsi⁄_hex_vîti˚s_compuãd
[8];

96 
boﬁ
 
poöt_ãåahedr⁄_öãr£˘i⁄
–c⁄° 
Vec4ui
& 
ãt_ödi˚s
, c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
, c⁄° 
Vec3d
& 
d_x
 );

100 
boﬁ
 
edge_åüngÀ_öãr£˘i⁄
(c⁄° 
Vec3ui
& 
åüngÀ
,

101 c⁄° 
Vec3b
& 
ts
, c⁄° Vec3b& 
us
, c⁄° Vec3b& 
vs
,

102 c⁄° 
Vec3d
& 
d_s0
, c⁄° Vec3d& 
d_s1
,

103 * 
Æphas
 );

107 
im∂icô_surÁ˚_fun˘i⁄_sign
–c⁄° 
Vec4ui
& 
quad
, c⁄° 
Vec4b
& 
ts
, c⁄° Vec4b& 
us
, c⁄° Vec4b& 
vs
, c⁄° 
Vec3d
& 
d_x
 );

112 
boﬁ
 
øy_quad_öãr£˘i⁄_∑rôy
(c⁄° 
Vec4ui
& 
quad
,

113 c⁄° 
Vec4b
& 
ts
,

114 c⁄° 
Vec4b
& 
us
,

115 c⁄° 
Vec4b
& 
vs
,

116 c⁄° 
Vec3d
& 
øy_‹igö
,

117 c⁄° 
Vec3d
& 
øy_dúe˘i⁄
,

118 
boﬁ
& 
edge_hô
,

119 
boﬁ
& 
‹igö_⁄_surÁ˚
 );

125 
boﬁ
 
øy_¥ism_∑rôy_ã°
();

130 
boﬁ
 
øy_hex_∑rôy_ã°
();

134 
boﬁ
 
∂™e_cuŒög
–c⁄° 
°d
::
ve˘‹
<
Vec3ui
>& 
åüngÀs
, c⁄° std::ve˘‹<
Vec3d
>& 
bound¨y_vîti˚s
 );

139 
boﬁ
 
edge_edge_öãrvÆ_∂™e_cuŒög
();

144 
boﬁ
 
poöt_åüngÀ_öãrvÆ_∂™e_cuŒög
();

148 
boﬁ
 
fixed_∂™e_cuŒög
–
num_hex_vîti˚s
 );

158 
ölöe
 
boﬁ
 
	$Øbb_c⁄èös_‹igö
–c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
 )

160  (
xmö
[0] <0 && xmö[1] <0 && xmö[2] <0Ë&& (
xmax
[0] >= 0 && xmax[1] >= 0 && xmax[2] >= 0 );

161 
	}
}

169 
ölöe
 
boﬁ
 
	$Øbb_ã°
–c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
, c⁄° Vec3d& 
oxmö
, c⁄° Vec3d& 
oxmax
 )

171  ((
xmö
[0] <
oxmax
[0] && xmin[1] <= oxmax[1] && xmin[2] <= oxmax[2]) &&

172 (
xmax
[0] >
oxmö
[0] && xmax[1] >= oxmin[1] && xmax[2] >= oxmin[2]) );

174 
	}
}

182 
ölöe
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
	$RoŸP¨ôyCﬁlisi⁄Te°
(c⁄° 
Vec3d
 &
_x0ﬁd
, c⁄° Vec3d &
_x1ﬁd
, c⁄° Vec3d &
_x2ﬁd
, c⁄° Vec3d &
_x3ﬁd
,

183 c⁄° 
Vec3d
 &
_x0√w
, c⁄° Vec3d &
_x1√w
, c⁄° Vec3d &
_x2√w
, c⁄° Vec3d &
_x3√w
,

184 
boﬁ
 
_is_edge_edge
 ) :

185 
	`m_x0ﬁd
–
_x0ﬁd
 ), 
	`m_x1ﬁd
–
_x1ﬁd
 ), 
	`m_x2ﬁd
–
_x2ﬁd
 ), 
	`m_x3ﬁd
–
_x3ﬁd
 ),

186 
	`m_x0√w
–
_x0√w
 ), 
	`m_x1√w
–
_x1√w
 ), 
	`m_x2√w
–
_x2√w
 ), 
	`m_x3√w
–
_x3√w
 ),

187 
	`m_is_edge_edge
–
_is_edge_edge
 ),

188 
	$m_øy
()

190  
i
 = 0; i < 8; ++i )

192 
m_ex∑nsi⁄_hex_vîti˚s_compuãd
[
i
] = 
Ál£
;

194 
	}
}

202 
ölöe
 
boﬁ
 
	gRoŸP¨ôyCﬁlisi⁄Te°
::
	$run_ã°
()

204 i‡–
m_is_edge_edge
 )

206  
	`edge_edge_cﬁlisi⁄
();

210  
	`poöt_åüngÀ_cﬁlisi⁄
();

212 
	}
}

	@common/tunicate/tunicate.h

1 #i‚de‡
TUNICATE_H


2 
	#TUNICATE_H


	)

14 #ifde‡
__˝lu•lus


29 
‹õ¡©i⁄1d
(c⁄° * 
x0
,

30 c⁄° * 
x1
);

34 
‹õ¡©i⁄2d
(c⁄° * 
x0
,

35 c⁄° * 
x1
,

36 c⁄° * 
x2
);

39 
öãrvÆ_‹õ¡©i⁄2d
(c⁄° * 
x0
,

40 c⁄° * 
x1
,

41 c⁄° * 
x2
,

42 * 
lowî
,

43 * 
uµî
);

47 
‹õ¡©i⁄3d
(c⁄° * 
x0
,

48 c⁄° * 
x1
,

49 c⁄° * 
x2
,

50 c⁄° * 
x3
);

53 
öãrvÆ_‹õ¡©i⁄3d
(c⁄° * 
x0
,

54 c⁄° * 
x1
,

55 c⁄° * 
x2
,

56 c⁄° * 
x3
,

57 * 
lowî
,

58 * 
uµî
);

64 
‹õ¡©i⁄_time3d
(c⁄° * 
x0
, 
time0
,

65 c⁄° * 
x1
, 
time1
,

66 c⁄° * 
x2
, 
time2
,

67 c⁄° * 
x3
, 
time3
,

68 c⁄° * 
x4
, 
time4
);

72 
‹õ¡©i⁄4d
(c⁄° * 
x0
,

73 c⁄° * 
x1
,

74 c⁄° * 
x2
,

75 c⁄° * 
x3
,

76 c⁄° * 
x4
);

93 
sos_‹õ¡©i⁄1d
(
¥i‹ôy0
, c⁄° * 
x0
,

94 
¥i‹ôy1
, c⁄° * 
x1
);

98 
sos_‹õ¡©i⁄2d
(
¥i‹ôy0
, c⁄° * 
x0
,

99 
¥i‹ôy1
, c⁄° * 
x1
,

100 
¥i‹ôy2
, c⁄° * 
x2
);

104 
sos_‹õ¡©i⁄3d
(
¥i‹ôy0
, c⁄° * 
x0
,

105 
¥i‹ôy1
, c⁄° * 
x1
,

106 
¥i‹ôy2
, c⁄° * 
x2
,

107 
¥i‹ôy3
, c⁄° * 
x3
);

111 
sos_‹õ¡©i⁄4d
(
¥i‹ôy0
, c⁄° * 
x0
,

112 
¥i‹ôy1
, c⁄° * 
x1
,

113 
¥i‹ôy2
, c⁄° * 
x2
,

114 
¥i‹ôy3
, c⁄° * 
x3
,

115 
¥i‹ôy4
, c⁄° * 
x4
);

132 
sim∂ex_öãr£˘i⁄1d
(
k
,

133 c⁄° * 
x0
,

134 c⁄° * 
x1
,

135 c⁄° * 
x2
,

136 * 
Æpha0
,

137 * 
Æpha1
,

138 * 
Æpha2
);

141 
sim∂ex_öãr£˘i⁄2d
(
k
,

142 c⁄° * 
x0
,

143 c⁄° * 
x1
,

144 c⁄° * 
x2
,

145 c⁄° * 
x3
,

146 * 
Æpha0
,

147 * 
Æpha1
,

148 * 
Æpha2
,

149 * 
Æpha3
);

152 
sim∂ex_öãr£˘i⁄3d
(
k
,

153 c⁄° * 
x0
,

154 c⁄° * 
x1
,

155 c⁄° * 
x2
,

156 c⁄° * 
x3
,

157 c⁄° * 
x4
,

158 * 
Æpha0
,

159 * 
Æpha1
,

160 * 
Æpha2
,

161 * 
Æpha3
,

162 * 
Æpha4
);

165 
sim∂ex_öãr£˘i⁄_time3d
(
k
,

166 c⁄° * 
x0
, 
time0
,

167 c⁄° * 
x1
, 
time1
,

168 c⁄° * 
x2
, 
time2
,

169 c⁄° * 
x3
, 
time3
,

170 c⁄° * 
x4
, 
time4
,

171 c⁄° * 
x5
, 
time5
,

172 * 
Æpha0
,

173 * 
Æpha1
,

174 * 
Æpha2
,

175 * 
Æpha3
,

176 * 
Æpha4
,

177 * 
Æpha5
);

180 
sim∂ex_öãr£˘i⁄4d
(
k
,

181 c⁄° * 
x0
,

182 c⁄° * 
x1
,

183 c⁄° * 
x2
,

184 c⁄° * 
x3
,

185 c⁄° * 
x4
,

186 c⁄° * 
x5
,

187 * 
Æpha0
,

188 * 
Æpha1
,

189 * 
Æpha2
,

190 * 
Æpha3
,

191 * 
Æpha4
,

192 * 
Æpha5
);

209 
sos_sim∂ex_öãr£˘i⁄1d
(
k
,

210 
¥i‹ôy0
, c⁄° * 
x0
,

211 
¥i‹ôy1
, c⁄° * 
x1
,

212 
¥i‹ôy2
, c⁄° * 
x2
,

213 * 
Æpha0
,

214 * 
Æpha1
,

215 * 
Æpha2
);

218 
sos_sim∂ex_öãr£˘i⁄2d
(
k
,

219 
¥i‹ôy0
, c⁄° * 
x0
,

220 
¥i‹ôy1
, c⁄° * 
x1
,

221 
¥i‹ôy2
, c⁄° * 
x2
,

222 
¥i‹ôy3
, c⁄° * 
x3
,

223 * 
Æpha0
,

224 * 
Æpha1
,

225 * 
Æpha2
,

226 * 
Æpha3
);

229 
sos_sim∂ex_öãr£˘i⁄3d
(
k
,

230 
¥i‹ôy0
, c⁄° * 
x0
,

231 
¥i‹ôy1
, c⁄° * 
x1
,

232 
¥i‹ôy2
, c⁄° * 
x2
,

233 
¥i‹ôy3
, c⁄° * 
x3
,

234 
¥i‹ôy4
, c⁄° * 
x4
,

235 * 
Æpha0
,

236 * 
Æpha1
,

237 * 
Æpha2
,

238 * 
Æpha3
,

239 * 
Æpha4
);

242 
sos_sim∂ex_öãr£˘i⁄4d
(
k
,

243 
¥i‹ôy0
, c⁄° * 
x0
,

244 
¥i‹ôy1
, c⁄° * 
x1
,

245 
¥i‹ôy2
, c⁄° * 
x2
,

246 
¥i‹ôy3
, c⁄° * 
x3
,

247 
¥i‹ôy4
, c⁄° * 
x4
,

248 
¥i‹ôy5
, c⁄° * 
x5
,

249 * 
Æpha0
,

250 * 
Æpha1
,

251 * 
Æpha2
,

252 * 
Æpha3
,

253 * 
Æpha4
,

254 * 
Æpha5
);

256 #ifde‡
__˝lu•lus


	@common/util.h

1 #i‚de‡
UTIL_H


2 
	#UTIL_H


	)

4 
	~<Æg‹ôhm
>

5 
	~<¨øy3.h
>

6 
	~<˛imôs
>

7 
	~<cm©h
>

8 
	~<io°ªam
>

9 
	~<ve˘‹
>

11 #i‚de‡
M_PI


12 c⁄° 
	gM_PI
 = 3.1415926535897932384626433832795;

15 #ifde‡
_MSC_VER


16 #unde‡
mö


17 #unde‡
max


20 
usög
 
	g°d
::
mö
;

21 
usög
 
	g°d
::
max
;

22 
usög
 
	g°d
::
sw≠
;

24 
	gãm∂©e
<
˛ass
 
	gT
>

25 
ölöe
 
T
 
	$sqr
(c⁄° 
T
& 
x
)

26 {  
x
*x; 
	}
}

28 
	gãm∂©e
<
˛ass
 
	gT
>

29 
ölöe
 
T
 
	$cube
(c⁄° 
T
& 
x
)

30 {  
x
*x*x; 
	}
}

32 
	gãm∂©e
<
˛ass
 
	gT
>

33 
ölöe
 
T
 
	$mö
(
T
 
a1
, T 
a2
, T 
a3
)

34 {  
	`mö
(
a1
, mö(
a2
, 
a3
)); 
	}
}

36 
	gãm∂©e
<
˛ass
 
	gT
>

37 
ölöe
 
T
 
	$mö
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
)

38 {  
	`mö
(mö(
a1
, 
a2
), mö(
a3
, 
a4
)); 
	}
}

40 
	gãm∂©e
<
˛ass
 
	gT
>

41 
ölöe
 
T
 
	$mö
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
)

42 {  
	`mö
(mö(
a1
, 
a2
), mö(
a3
, 
a4
), 
a5
); 
	}
}

44 
	gãm∂©e
<
˛ass
 
	gT
>

45 
ölöe
 
T
 
	$mö
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
, T 
a6
)

46 {  
	`mö
(mö(
a1
, 
a2
), mö(
a3
, 
a4
), mö(
a5
, 
a6
)); 
	}
}

48 
	gãm∂©e
<
˛ass
 
	gT
>

49 
ölöe
 
T
 
	$max
(
T
 
a1
, T 
a2
, T 
a3
)

50 {  
	`max
(
a1
, max(
a2
, 
a3
)); 
	}
}

52 
	gãm∂©e
<
˛ass
 
	gT
>

53 
ölöe
 
T
 
	$max
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
)

54 {  
	`max
(max(
a1
, 
a2
), max(
a3
, 
a4
)); 
	}
}

56 
	gãm∂©e
<
˛ass
 
	gT
>

57 
ölöe
 
T
 
	$max
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
)

58 {  
	`max
(max(
a1
, 
a2
), max(
a3
, 
a4
), 
a5
); 
	}
}

60 
	gãm∂©e
<
˛ass
 
	gT
>

61 
ölöe
 
T
 
	$max
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
, T 
a6
)

62 {  
	`max
(max(
a1
, 
a2
), max(
a3
, 
a4
), max(
a5
, 
a6
)); 
	}
}

64 
	gãm∂©e
<
˛ass
 
	gT
>

65 
ölöe
 
	$mömax
(
T
 
a1
, T 
a2
, T& 
amö
, T& 
amax
)

67 if(
a1
<
a2
){

68 
amö
=
a1
;

69 
amax
=
a2
;

71 
amö
=
a2
;

72 
amax
=
a1
;

74 
	}
}

76 
	gãm∂©e
<
˛ass
 
	gT
>

77 
ölöe
 
	$mömax
(
T
 
a1
, T 
a2
, T 
a3
, T& 
amö
, T& 
amax
)

79 if(
a1
<
a2
){

80 if(
a1
<
a3
){

81 
amö
=
a1
;

82 if(
a2
<
a3
Ë
amax
=a3;

83 
amax
=
a2
;

85 
amö
=
a3
;

86 if(
a1
<
a2
Ë
amax
=a2;

87 
amax
=
a1
;

90 if(
a2
<
a3
){

91 
amö
=
a2
;

92 if(
a1
<
a3
Ë
amax
=a3;

93 
amax
=
a1
;

95 
amö
=
a3
;

96 
amax
=
a1
;

99 
	}
}

101 
	gãm∂©e
<
˛ass
 
	gT
>

102 
ölöe
 
	$mömax
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T& 
amö
, T& 
amax
)

104 if(
a1
<
a2
){

105 if(
a3
<
a4
){

106 
amö
=
	`mö
(
a1
,
a3
);

107 
amax
=
	`max
(
a2
,
a4
);

109 
amö
=
	`mö
(
a1
,
a4
);

110 
amax
=
	`max
(
a2
,
a3
);

113 if(
a3
<
a4
){

114 
amö
=
	`mö
(
a2
,
a3
);

115 
amax
=
	`max
(
a1
,
a4
);

117 
amö
=
	`mö
(
a2
,
a4
);

118 
amax
=
	`max
(
a1
,
a3
);

121 
	}
}

123 
	gãm∂©e
<
˛ass
 
	gT
>

124 
ölöe
 
	$mömax
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
, T& 
amö
, T& 
amax
)

127 
amö
=
	`mö
(
a1
,
a2
,
a3
,
a4
,
a5
);

128 
amax
=
	`max
(
a1
,
a2
,
a3
,
a4
,
a5
);

129 
	}
}

131 
	gãm∂©e
<
˛ass
 
	gT
>

132 
ölöe
 
	$mömax
(
T
 
a1
, T 
a2
, T 
a3
, T 
a4
, T 
a5
, T 
a6
, T& 
amö
, T& 
amax
)

135 
amö
=
	`mö
(
a1
,
a2
,
a3
,
a4
,
a5
,
a6
);

136 
amax
=
	`max
(
a1
,
a2
,
a3
,
a4
,
a5
,
a6
);

137 
	}
}

139 
	gãm∂©e
<
˛ass
 
	gT
>

140 
ölöe
 
	$upd©e_mömax
(
T
 
a1
, T& 
amö
, T& 
amax
)

142 if(
a1
<
amö
)ámin=a1;

143 if(
a1
>
amax
)ámax=a1;

144 
	}
}

146 
	gãm∂©e
<
˛ass
 
	gT
>

147 
ölöe
 
	$s‹t
(
T
 &
a
, T &
b
, T &
c
)

149 
T
 
ãmp
;

150 if(
a
<
b
){

151 if(
a
<
c
){

152 if(
c
<
b
){

153 
ãmp
=
c
;c=
b
;b=temp;

156 
ãmp
=
c
;c=
b
;b=
a
;a=temp;

159 if(
b
<
c
){

160 if(
a
<
c
){

161 
ãmp
=
b
;b=
a
;a=temp;

163 
ãmp
=
b
;b=
c
;c=
a
;a=temp;

166 
ãmp
=
c
;c=
a
;a=temp;

169 
	}
}

171 
	gãm∂©e
<
˛ass
 
	gT
>

172 
ölöe
 
T
 
	$˛amp
(
T
 
a
, T 
lowî
, T 
uµî
)

174 if(
a
<
lowî
) Üower;

175 if(
a
>
uµî
)  upper;

176  
a
;

177 
	}
}

180 
	gãm∂©e
<
˛ass
 
	gT
>

181 
ölöe
 
T
 
	$smoŸh_°ï
(
T
 
r
)

183 if(
r
<0)  0;

184 if(
r
>1)  1;

185  
r
*r*r*(10+r*(-15+r*6));

186 
	}
}

189 
	gãm∂©e
<
˛ass
 
	gT
>

190 
ölöe
 
T
 
	$smoŸh_°ï
(
T
 
r
, T 
r_lowî
, T 
r_uµî
, T 
vÆue_lowî
, T 
vÆue_uµî
)

191 {  
vÆue_lowî
 + 
	`smoŸh_°ï
((
r
-
r_lowî
)/(
r_uµî
-r_lowî)Ë* (
vÆue_uµî
-vÆue_lowî); 
	}
}

194 
	gãm∂©e
<
˛ass
 
	gT
>

195 
ölöe
 
T
 
	$ømp
(
T
 
r
)

196 {  
	`smoŸh_°ï
((
r
+1)/2)*2-1; 
	}
}

198 #ifde‡
_MSC_VER


199 
ölöe
 
	$Ãound
(
x
)

201 if(
x
>0)

202  (
x
-
	`Êo‹
(x)<0.5Ë? ()Êo‹(xË: ()
	`˚û
(x);

204  (
x
-
	`Êo‹
(x)<=0.5Ë? ()Êo‹(xË: ()
	`˚û
(x);

205 
	}
}

207 
ölöe
 
	$ªmaödî
(
x
, 
y
)

209  
x
-
°d
::
	`Êo‹
(x/
y
+0.5)*y;

210 
	}
}

213 
ölöe
 
	$round_up_to_powî_of_two
(
n
)

215 
exp⁄ít
=0;

216 --
n
;

217 
n
){

218 ++
exp⁄ít
;

219 
n
>>=1;

221  1<<
exp⁄ít
;

222 
	}
}

224 
ölöe
 
	$round_down_to_powî_of_two
(
n
)

226 
exp⁄ít
=0;

227 
n
>1){

228 ++
exp⁄ít
;

229 
n
>>=1;

231  1<<
exp⁄ít
;

232 
	}
}

238 
ölöe
 
	$øndhash
(
£ed
)

240 
i
=(
£ed
^12345391u)*2654435769u;

241 
i
^=(i<<6)^(i>>26);

242 
i
*=2654435769u;

243 
i
+=(i<<5)^(i>>12);

244  
i
;

245 
	}
}

248 
ölöe
 
	$unhash
(
h
)

250 
h
*=340573321u;

251 
h
^=(h>>16);

252 
h
*=340573321u;

253 
h
^=(h>>16);

254 
h
*=340573321u;

255 
h
^=0xA3C59AC3u;

256  
h
;

257 
	}
}

260 
ölöe
 
	$øndhashd
(
£ed
)

261 {  
	`øndhash
(
£ed
)/()
UINT_MAX
; 
	}
}

262 
ölöe
 
	$øndhashf
(
£ed
)

263 {  
	`øndhash
(
£ed
)/()
UINT_MAX
; 
	}
}

266 
ölöe
 
	$øndhashd
(
£ed
, 
a
, 
b
)

267 {  (
b
-
a
)*
	`øndhash
(
£ed
)/()
UINT_MAX
 +á; 
	}
}

268 
ölöe
 
	$øndhashf
(
£ed
, 
a
, 
b
)

269 {  ( (
b
-
a
)*
	`øndhash
(
£ed
)/()
UINT_MAX
 +á); 
	}
}

271 
ölöe
 
	$öéog2
(
x
)

273 
exp
=-1;

274 
x
){

275 
x
>>=1;

276 ++
exp
;

278  
exp
;

279 
	}
}

281 
	gãm∂©e
<
˛ass
 
	gT
>

282 
ölöe
 
	$gë_b¨y˚¡ric
(
T
 
x
, 
±rdiff_t
& 
i
, T& 
f
,Öådiff_à
i_low
,Öådiff_à
i_high
)

284 
T
 
s
=
°d
::
	`Êo‹
(
x
);

285 
i
=()
s
;

286 if(
i
<
i_low
){

287 
i
=
i_low
;

288 
f
=0;

289 }if(
i
>
i_high
-2){

290 
i
=
i_high
-2;

291 
f
=1;

293 
f
=(
T
)(
x
-
s
);

294 
	}
}

296 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

297 
ölöe
 
S
 
	$ÀΩ
(c⁄° 
S
& 
vÆue0
, c⁄° S& 
vÆue1
, 
T
 
f
)

298 {  (1-
f
)*
vÆue0
 + f*
vÆue1
; 
	}
}

300 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

301 
ölöe
 
S
 
	$bûîp
(c⁄° 
S
& 
v00
, c⁄° S& 
v10
,

302 c⁄° 
S
& 
v01
, c⁄° S& 
v11
,

303 
T
 
fx
, T 
fy
)

305  
	`ÀΩ
÷îp(
v00
, 
v10
, 
fx
),

306 
	`ÀΩ
(
v01
, 
v11
, 
fx
),

307 
fy
);

308 
	}
}

310 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

311 
ölöe
 
S
 
	$åûîp
(c⁄° 
S
& 
v000
, c⁄° S& 
v100
,

312 c⁄° 
S
& 
v010
, c⁄° S& 
v110
,

313 c⁄° 
S
& 
v001
, c⁄° S& 
v101
,

314 c⁄° 
S
& 
v011
, c⁄° S& 
v111
,

315 
T
 
fx
, T 
fy
, T 
fz
)

317  
	`ÀΩ
(
	`bûîp
(
v000
, 
v100
, 
v010
, 
v110
, 
fx
, 
fy
),

318 
	`bûîp
(
v001
, 
v101
, 
v011
, 
v111
, 
fx
, 
fy
),

319 
fz
);

320 
	}
}

322 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

323 
ölöe
 
S
 
	$quadÀΩ
(c⁄° 
S
& 
v0000
, c⁄° S& 
v1000
,

324 c⁄° 
S
& 
v0100
, c⁄° S& 
v1100
,

325 c⁄° 
S
& 
v0010
, c⁄° S& 
v1010
,

326 c⁄° 
S
& 
v0110
, c⁄° S& 
v1110
,

327 c⁄° 
S
& 
v0001
, c⁄° S& 
v1001
,

328 c⁄° 
S
& 
v0101
, c⁄° S& 
v1101
,

329 c⁄° 
S
& 
v0011
, c⁄° S& 
v1011
,

330 c⁄° 
S
& 
v0111
, c⁄° S& 
v1111
,

331 
T
 
fx
, T 
fy
, T 
fz
, T 
·
)

333  
	`ÀΩ
(
	`åûîp
(
v0000
, 
v1000
, 
v0100
, 
v1100
, 
v0010
, 
v1010
, 
v0110
, 
v1110
, 
fx
, 
fy
, 
fz
),

334 
	`åûîp
(
v0001
, 
v1001
, 
v0101
, 
v1101
, 
v0011
, 
v1011
, 
v0111
, 
v1111
, 
fx
, 
fy
, 
fz
),

335 
·
);

336 
	}
}

339 
	gãm∂©e
<
˛ass
 
	gT
>

340 
ölöe
 
	$quadøtic_b•löe_weights
(
T
 
f
, T& 
w0
, T& 
w1
, T& 
w2
)

342 
w0
=
	`T
(0.5)*
	`sqr
(
f
-1);

343 
w1
=
	`T
(0.75)-
	`sqr
(
f
-T(0.5));;

344 
w2
=
	`T
(0.5)*
	`sqr
(
f
);

345 
	}
}

348 
	gãm∂©e
<
˛ass
 
	gT
>

349 
ölöe
 
	$cubic_öãΩ_weights
(
T
 
f
, T& 
w√g1
, T& 
w0
, T& 
w1
, T& 
w2
)

351 
T
 
	`f2
(
f
*f), 
	`f3
(
f2
*f);

352 
w√g1
=-
	`T
(1./3)*
f
+T(1./2)*
f2
-T(1./6)*
f3
;

353 
w0
=1-
f2
+
	`T
(1./2)*(
f3
-
f
);

354 
w1
=
f
+
	`T
(1./2)*(
f2
-
f3
);

355 
w2
=
	`T
(1./6)*(
f3
-
f
);

356 
	}
}

358 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

359 
ölöe
 
S
 
	$cubic_öãΩ
(c⁄° 
S
& 
vÆue_√g1
, c⁄° S& 
vÆue0
, c⁄° S& 
vÆue1
, c⁄° S& 
vÆue2
, 
T
 
f
)

361 
T
 
w√g1
, 
w0
, 
w1
, 
w2
;

362 
	`cubic_öãΩ_weights
(
f
, 
w√g1
, 
w0
, 
w1
, 
w2
);

363  
w√g1
*
vÆue_√g1
 + 
w0
*
vÆue0
 + 
w1
*
vÆue1
 + 
w2
*
vÆue2
;

364 
	}
}

366 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

367 
ölöe
 
S
 
	$bicubic_öãΩ
(c⁄° 
S
& 
v00
, c⁄° S& 
v10
, c⁄° S& 
v20
, c⁄° S& 
v30
,

368 c⁄° 
S
& 
v01
, c⁄° S& 
v11
, c⁄° S& 
v21
, c⁄° S& 
v31
,

369 c⁄° 
S
& 
v02
, c⁄° S& 
v12
, c⁄° S& 
v22
, c⁄° S& 
v32
,

370 c⁄° 
S
& 
v03
, c⁄° S& 
v13
, c⁄° S& 
v23
, c⁄° S& 
v33
,

371 
T
 
fx
, T 
fy
 )

373  
	`cubic_öãΩ
–cubic_öãΩ–
v00
, 
v10
, 
v20
, 
v30
, 
fx
 ),

374 
	`cubic_öãΩ
–
v01
, 
v11
, 
v21
, 
v31
, 
fx
 ),

375 
	`cubic_öãΩ
–
v02
, 
v12
, 
v22
, 
v32
, 
fx
 ),

376 
	`cubic_öãΩ
–
v03
, 
v13
, 
v23
, 
v33
, 
fx
 ),

377 
fy
 );

378 
	}
}

380 
	gãm∂©e
<
˛ass
 
	gS
, cœs†
	gT
>

381 
ölöe
 
S
 
åicubic_öãΩ
–c⁄° 
Aºay3
<S, 
Aºay1
<S> >& 
v
, 
±rdiff_t
 
i
,Öådiff_à
j
,Öådiff_à
k
, 
T
 
fx
, T 
fy
, T 
fz
 )

383  
cubic_öãΩ
–
bicubic_öãΩ
–
v
(
i
+0,
j
+0,
k
+0), v(i+1,j+0,k+0), v(i+2,j+0,k+0), v(i+3,j+0,k+0),

384 
v
(
i
+0,
j
+1,
k
+0), v(i+1,j+1,k+0), v(i+2,j+1,k+0), v(i+3,j+1,k+0),

385 
v
(
i
+0,
j
+2,
k
+0), v(i+1,j+2,k+0), v(i+2,j+2,k+0), v(i+3,j+2,k+0),

386 
v
(
i
+0,
j
+3,
k
+0), v(i+1,j+3,k+0), v(i+2,j+3,k+0), v(i+3,j+3,k+0), 
fx
, 
fy
 ),

387 
bicubic_öãΩ
–
v
(
i
+0,
j
+0,
k
+1), v(i+1,j+0,k+1), v(i+2,j+0,k+1), v(i+3,j+0,k+1),

388 
v
(
i
+0,
j
+1,
k
+1), v(i+1,j+1,k+1), v(i+2,j+1,k+1), v(i+3,j+1,k+1),

389 
v
(
i
+0,
j
+2,
k
+1), v(i+1,j+2,k+1), v(i+2,j+2,k+1), v(i+3,j+2,k+1),

390 
v
(
i
+0,
j
+3,
k
+1), v(i+1,j+3,k+1), v(i+2,j+3,k+1), v(i+3,j+3,k+1), 
fx
, 
fy
 ),

391 
bicubic_öãΩ
–
v
(
i
+0,
j
+0,
k
+2), v(i+1,j+0,k+2), v(i+2,j+0,k+2), v(i+3,j+0,k+2),

392 
v
(
i
+0,
j
+1,
k
+2), v(i+1,j+1,k+2), v(i+2,j+1,k+2), v(i+3,j+1,k+2),

393 
v
(
i
+0,
j
+2,
k
+2), v(i+1,j+2,k+2), v(i+2,j+2,k+2), v(i+3,j+2,k+2),

394 
v
(
i
+0,
j
+3,
k
+2), v(i+1,j+3,k+2), v(i+2,j+3,k+2), v(i+3,j+3,k+2), 
fx
, 
fy
 ),

395 
bicubic_öãΩ
–
v
(
i
+0,
j
+0,
k
+3), v(i+1,j+0,k+3), v(i+2,j+0,k+3), v(i+3,j+0,k+3),

396 
v
(
i
+0,
j
+1,
k
+3), v(i+1,j+1,k+3), v(i+2,j+1,k+3), v(i+3,j+1,k+3),

397 
v
(
i
+0,
j
+2,
k
+3), v(i+1,j+2,k+3), v(i+2,j+2,k+3), v(i+3,j+2,k+3),

398 
v
(
i
+0,
j
+3,
k
+3), v(i+1,j+3,k+3), v(i+2,j+3,k+3), v(i+3,j+3,k+3), 
fx
, 
fy
 ),

399 
fz
 );

404 
	gãm∂©e
<
˛ass
 
	gT
>

405 
zîo
(
°d
::
ve˘‹
<
T
>& 
v
)

406 { 
i
=()
v
.
size
()-1; 
	gi
>=0; --iË
	gv
[i]=0; }

408 
	gãm∂©e
<
˛ass
 
	gT
>

409 
T
 
abs_max
(c⁄° 
°d
::
ve˘‹
<T>& 
v
)

411 
T
 
m
=0;

412 
	gi
=()
v
.
size
()-1; i>=0; --i){

413 if(
	g°d
::
Ábs
(
v
[
i
])>
m
)

414 
m
=
°d
::
Ábs
(
v
[
i
]);

416  
	gm
;

419 
	gãm∂©e
<
˛ass
 
	gT
>

420 
boﬁ
 
c⁄èös
(c⁄° 
°d
::
ve˘‹
<
T
>& 
a
, T 
e
)

422 
	gi
=0; i<
	ga
.
size
(); ++i)

423 if(
	ga
[
i
]==
e
Ë 
åue
;

424  
	gÁl£
;

427 
	gãm∂©e
<
˛ass
 
	gT
>

428 
add_unique
(
°d
::
ve˘‹
<
T
>& 
a
, T 
e
)

430 
	gi
=0; i<
	ga
.
size
(); ++i)

431 if(
	ga
[
i
]==
e
) ;

432 
	ga
.
push_back
(
e
);

435 
	gãm∂©e
<
˛ass
 
	gT
>

436 
ö£π
(
°d
::
ve˘‹
<
T
>& 
a
, 
ödex
, T 
e
)

438 
	ga
.
push_back
(
a
.
back
());

439 
	gi
=()
a
.
size
()-1; i>
	gödex
; --i)

440 
	ga
[
i
]=
a
[i-1];

441 
	ga
[
ödex
]=
e
;

444 
	gãm∂©e
<
˛ass
 
	gT
>

445 
îa£
(
°d
::
ve˘‹
<
T
>& 
a
, 
ödex
)

447 
	gi
=
ödex
; i<
	ga
.
size
()-1; ++i)

448 
	ga
[
i
]=
a
[i+1];

449 
	ga
.
p›_back
();

452 
	gãm∂©e
<
˛ass
 
	gT
>

453 
îa£_sw≠
(
°d
::
ve˘‹
<
T
>& 
a
, 
ödex
)

455 
	gi
=
ödex
; i<
	ga
.
size
()-1; ++i)

456 
sw≠
(
a
[
i
],á[i+1]);

457 
	ga
.
p›_back
();

460 
	gãm∂©e
<
˛ass
 
	gT
>

461 
îa£_un‹dîed
(
°d
::
ve˘‹
<
T
>& 
a
, 
ödex
)

463 
	ga
[
ödex
]=
a
.
back
();

464 
	ga
.
p›_back
();

467 
	gãm∂©e
<
˛ass
 
	gT
>

468 
îa£_un‹dîed_sw≠
(
°d
::
ve˘‹
<
T
>& 
a
, 
ödex
)

470 
sw≠
(
a
[
ödex
],á.
back
());

471 
	ga
.
p›_back
();

474 
	gãm∂©e
<
˛ass
 
	gT
>

475 
föd_™d_îa£_un‹dîed
(
°d
::
ve˘‹
<
T
>& 
a
, c⁄° T& 
doomed_ñemít
)

477 
	gi
=0; i<
	ga
.
size
(); ++i)

478 if(
	ga
[
i
]==
doomed_ñemít
){

479 
îa£_un‹dîed
(
a
, 
i
);

484 
	gãm∂©e
<
˛ass
 
	gT
>

485 
ª∂a˚_⁄˚
(
°d
::
ve˘‹
<
T
>& 
a
, c⁄° T& 
ﬁd_ñemít
, c⁄° T& 
√w_ñemít
)

487 
	gi
=0; i<
	ga
.
size
(); ++i)

488 if(
	ga
[
i
]==
ﬁd_ñemít
){

489 
a
[
i
]=
√w_ñemít
;

494 
	gãm∂©e
<
˛ass
 
	gT
>

495 
wrôe_m©œb
(
°d
::
o°ªam
& 
ouçut
, c⁄° std::
ve˘‹
<
T
>& 
a
, c⁄° *
v¨übÀ_«me
, 
boﬁ
 
cﬁumn_ve˘‹
=
åue
, 
signifiˇ¡_digôs
=18)

497 
ouçut
<<
v¨übÀ_«me
<<"=[";

498 
	g°d
::
°ªamsize
 
ﬁd_¥ecisi⁄
=
ouçut
.
¥ecisi⁄
();

499 
	gouçut
.
¥ecisi⁄
(
signifiˇ¡_digôs
);

500 
	gi
=0; i<
	ga
.
size
(); ++i){

501 
	gouçut
<<
	ga
[
i
]<<" ";

503 
	gouçut
<<"]";

504 if(
	gcﬁumn_ve˘‹
)

505 
	gouçut
<<"'";

506 
	gouçut
<<";"<<
	g°d
::
ídl
;

507 
	gouçut
.
¥ecisi⁄
(
ﬁd_¥ecisi⁄
);

	@common/vec.h

1 #i‚de‡
VEC_H


2 
	#VEC_H


	)

4 
	~<ˇs£π
>

5 
	~<cm©h
>

6 
	~<hashèbÀ.h
>

7 
	~<io°ªam
>

8 
	~<utû.h
>

22 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

23 
	sVec


25 
T
 
	mv
[
N
];

27 
	mVec
<
	mN
,
	mT
>()

30 
ex∂icô
 
	mVec
<
	mN
,
	mT
>(
T
 
	mvÆue_f‹_Æl
)

31 { 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]=
vÆue_f‹_Æl
; }

33 
	mãm∂©e
<
˛ass
 
	mS
>

34 
ex∂icô
 
	mVec
<
	mN
,
	mT
>(c⁄° 
S
 *
	msour˚
)

35 { 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]=(
T
)
sour˚
[i]; }

37 
	mãm∂©e
 <
˛ass
 
	mS
>

38 
ex∂icô
 
	mVec
<
	mN
,
	mT
>(c⁄° Vec<N,
	mS
>& 
	msour˚
)

39 { 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]=(
T
)
sour˚
[i]; }

41 
	mVec
<
	mN
,
	mT
>(
T
 
	mv0
, T 
	mv1
)

43 
as£π
(
N
==2);

44 
	mv
[0]=
v0
; v[1]=
v1
;

47 
	mVec
<
	mN
,
	mT
>(
T
 
	mv0
, T 
	mv1
, T 
	mv2
)

49 
as£π
(
N
==3);

50 
	mv
[0]=
v0
; v[1]=
v1
; v[2]=
v2
;

53 
	mVec
<
	mN
,
	mT
>(
T
 
	mv0
, T 
	mv1
, T 
	mv2
, T 
	mv3
)

55 
as£π
(
N
==4);

56 
	mv
[0]=
v0
; v[1]=
v1
; v[2]=
v2
; v[3]=
v3
;

59 
	mVec
<
	mN
,
	mT
>(
T
 
	mv0
, T 
	mv1
, T 
	mv2
, T 
	mv3
, T 
	mv4
)

61 
as£π
(
N
==5);

62 
	mv
[0]=
v0
; v[1]=
v1
; v[2]=
v2
; v[3]=
v3
; v[4]=
v4
;

65 
	mVec
<
	mN
,
	mT
>(
T
 
	mv0
, T 
	mv1
, T 
	mv2
, T 
	mv3
, T 
	mv4
, T 
	mv5
)

67 
as£π
(
N
==6);

68 
	mv
[0]=
v0
; v[1]=
v1
; v[2]=
v2
; v[3]=
v3
; v[4]=
v4
; v[5]=
v5
;

71 
	mT
 &
	m›î©‹
[](
	mödex
)

73 
as£π
(0<=
ödex
 && ()ödex<
N
);

74  
	mv
[
ödex
];

77 c⁄° 
	mT
 &
	m›î©‹
[](
	mödex
) const

79 
as£π
(0<=
ödex
 && ()ödex<
N
);

80  
	mv
[
ödex
];

83 
boﬁ
 
n⁄zîo
() const

85 
	mi
=0; i<
	mN
; ++iËif(
	mv
[
i
]Ë 
	måue
;

86  
	mÁl£
;

89 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
+=(c⁄° 
Vec
<
N
,T> &
	mw
)

91 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]+=
w
[i];

92  *
	mthis
;

95 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
+(c⁄° Vec<N,T> &
	mw
) const

97 
	mVec
<
	mN
,
	mT
> 
sum
(*
this
);

98 
	msum
+=
w
;

99  
	msum
;

102 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
-=(c⁄° 
Vec
<
N
,T> &
	mw
)

104 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]-=
w
[i];

105  *
	mthis
;

108 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
-() const

110 
	mVec
<
	mN
,
	mT
> 
	m√g©ive
;

111 
	mi
=0; i<
	mN
; ++iË
	m√g©ive
.
	mv
[
i
]=-
v
[i];

112  
	m√g©ive
;

115 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
-(c⁄° Vec<N,T> &
	mw
) const

117 
	mVec
<
	mN
,
	mT
> 
diff
(*
this
);

118 
	mdiff
-=
w
;

119  
	mdiff
;

122 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
*=(
T
 
a
)

124 
i
=0; 
	mi
<
	mN
; ++iË
	mv
[i]*=
a
;

125  *
	mthis
;

128 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
*(
T
 
	ma
) const

130 
	mVec
<
	mN
,
	mT
> 
w
(*
this
);

131 
	mw
*=
a
;

132  
	mw
;

135 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
*=(c⁄° 
Vec
<
N
,T> &
	mw
)

137 
	mi
=0; i<
	mN
; ++iË
	mv
[
i
]*=
w
.
v
[i];

138  *
	mthis
;

141 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
*(c⁄° Vec<N,T> &
	mw
) const

143 
	mVec
<
	mN
,
	mT
> 
	mcomp⁄ítwi£_¥odu˘
;

144 
	mi
=0; i<
	mN
; ++iË
	mcomp⁄ítwi£_¥odu˘
[
i
]=
v
[i]*
w
.v[i];

145  
	mcomp⁄ítwi£_¥odu˘
;

148 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
/=(
T
 
a
)

150 
i
=0; 
	mi
<
	mN
; ++iË
	mv
[i]/=
a
;

151  *
	mthis
;

154 
	mVec
<
	mN
,
	mT
> 
	m›î©‹
/(
T
 
	ma
) const

156 
	mVec
<
	mN
,
	mT
> 
w
(*
this
);

157 
	mw
/=
a
;

158  
	mw
;

162 
	gVec
<2,> 
	tVec2d
;

163 
	gVec
<2,> 
	tVec2f
;

164 
	gVec
<2,> 
	tVec2i
;

165 
	gVec
<2,> 
	tVec2ui
;

166 
	gVec
<2,> 
	tVec2s
;

167 
	gVec
<2,> 
	tVec2us
;

168 
	gVec
<2,> 
	tVec2c
;

169 
	gVec
<2,> 
	tVec2uc
;

170 
	gVec
<2,
	tsize_t
> 
	tVec2°
;

172 
	gVec
<3,> 
	tVec3d
;

173 
	gVec
<3,> 
	tVec3f
;

174 
	gVec
<3,> 
	tVec3i
;

175 
	gVec
<3,> 
	tVec3ui
;

176 
	gVec
<3,> 
	tVec3s
;

177 
	gVec
<3,> 
	tVec3us
;

178 
	gVec
<3,> 
	tVec3c
;

179 
	gVec
<3,> 
	tVec3uc
;

180 
	gVec
<3,
	tsize_t
> 
	tVec3°
;

182 
	gVec
<4,> 
	tVec4d
;

183 
	gVec
<4,> 
	tVec4f
;

184 
	gVec
<4,> 
	tVec4i
;

185 
	gVec
<4,> 
	tVec4ui
;

186 
	gVec
<4,> 
	tVec4s
;

187 
	gVec
<4,> 
	tVec4us
;

188 
	gVec
<4,> 
	tVec4c
;

189 
	gVec
<4,> 
	tVec4uc
;

190 
	gVec
<4,
	tsize_t
> 
	tVec4°
;

192 
	gVec
<6,> 
	tVec6d
;

193 
	gVec
<6,> 
	tVec6f
;

194 
	gVec
<6,> 
	tVec6ui
;

195 
	gVec
<6,> 
	tVec6i
;

196 
	gVec
<6,> 
	tVec6s
;

197 
	gVec
<6,> 
	tVec6us
;

198 
	gVec
<6,> 
	tVec6c
;

199 
	gVec
<6,> 
	tVec6uc
;

202 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

203 
T
 
mag2
(c⁄° 
Vec
<
N
,T> &
a
)

205 
T
 
	gl
=
sqr
(
a
.
v
[0]);

206 
	gi
=1; i<
	gN
; ++iË
	gl
+=
sqr
(
a
.
v
[
i
]);

207  
	gl
;

210 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

211 
T
 
mag
(c⁄° 
Vec
<
N
,T> &
a
)

212 {  (
	gT
)
sqπ
(
mag2
(
a
)); }

214 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

215 
ölöe
 
T
 
di°2
(c⁄° 
Vec
<
N
,T> &
a
, c⁄° Vec<N,T> &
b
)

217 
T
 
	gd
=
sqr
(
a
.
v
[0]-
b
.v[0]);

218 
	gi
=1; i<
	gN
; ++iË
	gd
+=
sqr
(
a
.
v
[
i
]-
b
.v[i]);

219  
	gd
;

222 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

223 
ölöe
 
T
 
di°
(c⁄° 
Vec
<
N
,T> &
a
, c⁄° Vec<N,T> &
b
)

224 {  
	g°d
::
sqπ
(
di°2
(
a
,
b
)); }

226 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

227 
ölöe
 
n‹mÆize
(
Vec
<
N
,
T
> &
a
)

228 { 
	ga
/=
mag
(
a
); }

230 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

231 
ölöe
 
	gVec
<
	gN
,
	gT
> 
n‹mÆized
(c⁄° 
Vec
<
N
,
T
> &
a
)

232 {  
	ga
/
mag
(
a
); }

234 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

235 
ölöe
 
T
 
ö‚‹m
(c⁄° 
Vec
<
N
,T> &
a
)

237 
T
 
	gd
=
°d
::
Ábs
(
a
.
v
[0]);

238 
	gi
=1; i<
	gN
; ++iË
	gd
=
max
(
°d
::
Ábs
(
a
.
v
[
i
]),
d
);

239  
	gd
;

242 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

243 
zîo
(
Vec
<
N
,
T
> &
a
)

245 
	gi
=0; i<
	gN
; ++i)

246 
	ga
.
	gv
[
i
] = 0;

249 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

250 
	g°d
::
o°ªam
 &
›î©‹
<<(
°d
::o°ªam &
out
, c⁄° 
	gVec
<
	gN
,
	gT
> &
	gv
)

252 
	gout
<<
	gv
.v[0];

253 
	gi
=1; i<
	gN
; ++i)

254 
	gout
<<' '<<
	gv
.v[
i
];

255  
	gout
;

258 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

259 
	g°d
::
i°ªam
 &
›î©‹
>>(
°d
::i°ªam &
ö
, 
	gVec
<
	gN
,
	gT
> &
	gv
)

261 
	gö
>>
	gv
.v[0];

262 
	gi
=1; i<
	gN
; ++i)

263 
	gö
>>
	gv
.v[
i
];

264  
	gö
;

267 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

268 
ölöe
 
boﬁ
 
	g›î©‹
==(c⁄° 
Vec
<
N
,
	gT
> &
	ga
, c⁄° 
	gVec
<
	gN
,T> &
	gb
)

270 
boﬁ
 
	gt
 = (
a
.
v
[0] =
b
.v[0]);

271 
	gi
=1;

272 
	gi
<
	gN
 && 
	gt
) {

273 
	gt
 = 
t
 && (
a
.
v
[
i
]==
b
.v[i]);

274 ++
	gi
;

276  
	gt
;

279 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

280 
ölöe
 
boﬁ
 
	g›î©‹
!=(c⁄° 
Vec
<
N
,
	gT
> &
	ga
, c⁄° 
	gVec
<
	gN
,T> &
	gb
)

282 
boﬁ
 
	gt
 = (
a
.
v
[0] !
b
.v[0]);

283 
	gi
=1;

284 
	gi
<
	gN
 && !
	gt
) {

285 
	gt
 = 
t
 || (
a
.
v
[
i
]!=
b
.v[i]);

286 ++
	gi
;

288  
	gt
;

291 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

292 
ölöe
 
	gVec
<
	gN
,
	gT
> 
	g›î©‹
*(
T
 
	ga
, c⁄° Vec<N,T> &
	gv
)

294 
	gVec
<
	gN
,
	gT
> 
w
(
v
);

295 
	gw
*=
a
;

296  
	gw
;

299 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

300 
ölöe
 
T
 
mö
(c⁄° 
Vec
<
N
,T> &
a
)

302 
T
 
	gm
=
a
.
v
[0];

303 
	gi
=1; i<
	gN
; ++iËif(
	ga
.
	gv
[
i
]<
	gm
Ëm=
a
.
v
[i];

304  
	gm
;

307 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

308 
ölöe
 
	gVec
<
	gN
,
	gT
> 
mö_uni⁄
(c⁄° 
Vec
<
N
,
T
> &
a
, c⁄° Vec<N,T> &
b
)

310 
	gVec
<
	gN
,
	gT
> 
	gm
;

311 
	gi
=0; i<
	gN
; ++iË(
	ga
.
	gv
[
i
] < 
	gb
.v[i]Ë? 
	gm
.v[i]=
a
.
v
[i] : 
m
.v[i]=
b
.v[i];

312  
	gm
;

315 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

316 
ölöe
 
	gVec
<
	gN
,
	gT
> 
max_uni⁄
(c⁄° 
Vec
<
N
,
T
> &
a
, c⁄° Vec<N,T> &
b
)

318 
	gVec
<
	gN
,
	gT
> 
	gm
;

319 
	gi
=0; i<
	gN
; ++iË(
	ga
.
	gv
[
i
] > 
	gb
.v[i]Ë? 
	gm
.v[i]=
a
.
v
[i] : 
m
.v[i]=
b
.v[i];

320  
	gm
;

323 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

324 
ölöe
 
T
 
max
(c⁄° 
Vec
<
N
,T> &
a
)

326 
T
 
	gm
=
a
.
v
[0];

327 
	gi
=1; i<
	gN
; ++iËif(
	ga
.
	gv
[
i
]>
	gm
Ëm=
a
.
v
[i];

328  
	gm
;

331 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

332 
ölöe
 
T
 
dŸ
(c⁄° 
Vec
<
N
,T> &
a
, c⁄° Vec<N,T> &
b
)

334 
T
 
	gd
=
a
.
v
[0]*
b
.v[0];

335 
	gi
=1; i<
	gN
; ++iË
	gd
+=
a
.
v
[
i
]*
b
.v[i];

336  
	gd
;

339 
	gãm∂©e
<
˛ass
 
	gT
>

340 
ölöe
 
	gVec
<2,
	gT
> 
rŸ©e
(c⁄° 
Vec
<2,
T
>& 
a
, c⁄° T& 
™gÀ
)

342 
T
 
	gc
 = 
cos
(
™gÀ
);

343 
T
 
	gs
 = 
sö
(
™gÀ
);

344  
	gVec
<2,
	gT
>(
c
*
	ga
[0] - 
s
*a[1],s*a[0] + c*a[1]);

348 
	gãm∂©e
<
˛ass
 
	gT
>

349 
ölöe
 
	gVec
<3,
	gT
> 
rŸ©e
–c⁄° 
Vec
<3,
T
>& 
x
, c⁄° T& 
™gÀ
, c⁄° Vec<3,T>& 
u
 )

351 
T
 
	gux
 = 
u
[0]*
x
[0];

352 
T
 
	guy
 = 
u
[0]*
x
[1];

353 
T
 
	guz
 = 
u
[0]*
x
[2];

354 
T
 
	gvx
 = 
u
[1]*
x
[0];

355 
T
 
	gvy
 = 
u
[1]*
x
[1];

356 
T
 
	gvz
 = 
u
[1]*
x
[2];

357 
T
 
	gwx
 = 
u
[2]*
x
[0];

358 
T
 
	gwy
 = 
u
[2]*
x
[1];

359 
T
 
	gwz
 = 
u
[2]*
x
[2];

361 
T
 
	gß
 = (TË
sö
(
™gÀ
);

362 
T
 
	gˇ
 = (TË
cos
(
™gÀ
);

364  
	gVec
<3,
	gT
> ( 
	gu
[0] * (
	gux
+
	gvy
+
	gwz
Ë+ (
	gx
[0]*(u[1]*u[1]+u[2]*u[2])-u[0]*(vy+wz))*
	gˇ
+(-
	gwy
+
	gvz
)*
	gß
,

365 
	gu
[1] * (
	gux
+
	gvy
+
	gwz
Ë+ (
	gx
[1]*(u[0]*u[0]+u[2]*u[2])-u[1]*(ux+wz))*
	gˇ
+(
	gwx
-
	guz
)*
	gß
,

366 
	gu
[2] * (
	gux
+
	gvy
+
	gwz
Ë+ (
	gx
[2]*(u[0]*u[0]+u[1]*u[1])-u[2]*(ux+vy))*
	gˇ
+(-
	gvx
+
	guy
)*
	gß
 );

370 
	gãm∂©e
<
˛ass
 
	gT
>

371 
ölöe
 
	gVec
<2,
	gT
> 
≥Ω
(c⁄° 
Vec
<2,
T
> &
a
)

372 {  
	gVec
<2,
	gT
>(-
	ga
.
	gv
[1],á.v[0]); }

374 
	gãm∂©e
<
˛ass
 
	gT
>

375 
ölöe
 
T
 
¸oss
(c⁄° 
Vec
<2,T> &
a
, c⁄° Vec<2,T> &
b
)

376 {  
	ga
.
	gv
[0]*
	gb
.v[1]-a.v[1]*b.v[0]; }

378 
	gãm∂©e
<
˛ass
 
	gT
>

379 
ölöe
 
	gVec
<3,
	gT
> 
¸oss
(c⁄° 
Vec
<3,
T
> &
a
, c⁄° Vec<3,T> &
b
)

380 {  
	gVec
<3,
	gT
>(
	ga
.
	gv
[1]*
	gb
.v[2]-a.v[2]*b.v[1],á.v[2]*b.v[0]-a.v[0]*b.v[2],á.v[0]*b.v[1]-a.v[1]*b.v[0]); }

382 
	gãm∂©e
<
˛ass
 
	gT
>

383 
ölöe
 
T
 
åùÀ
(c⁄° 
Vec
<3,T> &
a
, c⁄° Vec<3,T> &
b
, c⁄° Vec<3,T> &
c
)

384 {  
	ga
.
	gv
[0]*(
	gb
.v[1]*
	gc
.v[2]-b.v[2]*c.v[1])

385 +
	ga
.
	gv
[1]*(
	gb
.v[2]*
	gc
.v[0]-b.v[0]*c.v[2])

386 +
	ga
.
	gv
[2]*(
	gb
.v[0]*
	gc
.v[1]-b.v[1]*c.v[0]); }

388 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

389 
ölöe
 
hash
(c⁄° 
Vec
<
N
,
T
> &
a
)

391 
	gh
=
a
.
v
[0];

392 
	gi
=1; i<
	gN
; ++i)

393 
	gh
=
hash
(
h
 ^ 
a
.
v
[
i
]);

394  
	gh
;

397 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

398 
ölöe
 
assign
(c⁄° 
Vec
<
N
,
T
> &
a
, T &
a0
, T &
a1
)

400 
as£π
(
N
==2);

401 
	ga0
=
a
.
v
[0]; 
	ga1
=a.v[1];

404 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

405 
ölöe
 
assign
(c⁄° 
Vec
<
N
,
T
> &
a
, T &
a0
, T &
a1
, T &
a2
)

407 
as£π
(
N
==3);

408 
	ga0
=
a
.
v
[0]; 
	ga1
˜.v[1]; 
	ga2
=a.v[2];

411 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

412 
ölöe
 
assign
(c⁄° 
Vec
<
N
,
T
> &
a
, T &
a0
, T &
a1
, T &
a2
, T &
a3
)

414 
as£π
(
N
==4);

415 
	ga0
=
a
.
v
[0]; 
	ga1
˜.v[1]; 
	ga2
˜.v[2]; 
	ga3
=a.v[3];

418 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

419 
ölöe
 
assign
(c⁄° 
Vec
<
N
,
T
> &
a
, T &
a0
, T &
a1
, T &
a2
, T &
a3
, T &
a4
, T &
a5
)

421 
as£π
(
N
==6);

422 
	ga0
=
a
.
v
[0]; 
	ga1
˜.v[1]; 
	ga2
˜.v[2]; 
	ga3
˜.v[3]; 
	ga4
˜.v[4]; 
	ga5
=a.v[5];

425 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

426 
ölöe
 
	gVec
<
	gN
,> 
round
(c⁄° 
Vec
<
N
,
T
> &
a
)

428 
	gVec
<
	gN
,> 
	grounded
;

429 
	gi
=0; i<
	gN
; ++i)

430 
	grounded
.
	gv
[
i
]=
Ãound
(
a
.
v
[i]);

431  
	grounded
;

434 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

435 
ölöe
 
	gVec
<
	gN
,> 
Êo‹
(c⁄° 
Vec
<
N
,
T
> &
a
)

437 
	gVec
<
	gN
,> 
	grounded
;

438 
	gi
=0; i<
	gN
; ++i)

439 
	grounded
.
	gv
[
i
]=()
Êo‹
(
a
.
v
[i]);

440  
	grounded
;

443 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

444 
ölöe
 
	gVec
<
	gN
,> 
˚û
(c⁄° 
Vec
<
N
,
T
> &
a
)

446 
	gVec
<
	gN
,> 
	grounded
;

447 
	gi
=0; i<
	gN
; ++i)

448 
	grounded
.
	gv
[
i
]=()
˚û
(
a
.
v
[i]);

449  
	grounded
;

452 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

453 
ölöe
 
	gVec
<
	gN
,
	gT
> 
Ábs
(c⁄° 
Vec
<
N
,
T
> &
a
)

455 
	gVec
<
	gN
,
	gT
> 
	gªsu…
;

456 
	gi
=0; i<
	gN
; ++i)

457 
	gªsu…
.
	gv
[
i
]=(
T
)
Ábs
(
a
.
v
[i]);

458  
	gªsu…
;

461 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

462 
ölöe
 
mömax
(c⁄° 
Vec
<
N
,
T
> &
x0
, c⁄° Vec<N,T> &
x1
, Vec<N,T> &
xmö
, Vec<N,T> &
xmax
)

464 
	gi
=0; i<
	gN
; ++i)

465 
mömax
(
x0
.
v
[
i
], 
x1
.v[i], 
xmö
.v[i], 
xmax
.v[i]);

468 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

469 
ölöe
 
mömax
(c⁄° 
Vec
<
N
,
T
> &
x0
, c⁄° Vec<N,T> &
x1
, c⁄° Vec<N,T> &
x2
, Vec<N,T> &
xmö
, Vec<N,T> &
xmax
)

471 
	gi
=0; i<
	gN
; ++i)

472 
mömax
(
x0
.
v
[
i
], 
x1
.v[i], 
x2
.v[i], 
xmö
.v[i], 
xmax
.v[i]);

475 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

476 
ölöe
 
mömax
(c⁄° 
Vec
<
N
,
T
> &
x0
, c⁄° Vec<N,T> &
x1
, c⁄° Vec<N,T> &
x2
, c⁄° Vec<N,T> &
x3
,

477 
Vec
<
N
,
T
> &
xmö
, Vec<N,T> &
xmax
)

479 
	gi
=0; i<
	gN
; ++i)

480 
mömax
(
x0
.
v
[
i
], 
x1
.v[i], 
x2
.v[i], 
x3
.v[i], 
xmö
.v[i], 
xmax
.v[i]);

483 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

484 
ölöe
 
mömax
(c⁄° 
Vec
<
N
,
T
> &
x0
, c⁄° Vec<N,T> &
x1
, c⁄° Vec<N,T> &
x2
, c⁄° Vec<N,T> &
x3
, c⁄° Vec<N,T> &
x4
,

485 
Vec
<
N
,
T
> &
xmö
, Vec<N,T> &
xmax
)

487 
	gi
=0; i<
	gN
; ++i)

488 
mömax
(
x0
.
v
[
i
], 
x1
.v[i], 
x2
.v[i], 
x3
.v[i], 
x4
.v[i], 
xmö
.v[i], 
xmax
.v[i]);

491 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

492 
ölöe
 
mömax
(c⁄° 
Vec
<
N
,
T
> &
x0
, c⁄° Vec<N,T> &
x1
, c⁄° Vec<N,T> &
x2
, c⁄° Vec<N,T> &
x3
, c⁄° Vec<N,T> &
x4
,

493 c⁄° 
Vec
<
N
,
T
> &
x5
, Vec<N,T> &
xmö
, Vec<N,T> &
xmax
)

495 
	gi
=0; i<
	gN
; ++i)

496 
mömax
(
x0
.
v
[
i
], 
x1
.v[i], 
x2
.v[i], 
x3
.v[i], 
x4
.v[i], 
x5
.v[i], 
xmö
.v[i], 
xmax
.v[i]);

499 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
>

500 
ölöe
 
upd©e_mömax
(c⁄° 
Vec
<
N
,
T
> &
x
, Vec<N,T> &
xmö
, Vec<N,T> &
xmax
)

502 
	gi
=0; i<
	gN
; ++iË
upd©e_mömax
(
x
[
i
], 
xmö
[i], 
xmax
[i]);

	@common/wallclocktime.cpp

1 #ifde‡
_MSC_VER


3 
	~<Wödows.h
>

5 
__öt64
 
	gtimî_‰equícy
;

6 
__öt64
 
	gba£_time
;

8 
	$£t_time_ba£
()

10 
	`QuîyPîf‹m™˚Fªquícy
((
LARGE_INTEGER
*)&
timî_‰equícy
);

11 
	`QuîyPîf‹m™˚Cou¡î
((
LARGE_INTEGER
*)&
ba£_time
);

12 
	}
}

14 
	$gë_time_ö_£c⁄ds
()

16 
__öt64
 
√wtime
;

17 
	`QuîyPîf‹m™˚Cou¡î
((
LARGE_INTEGER
*)&
√wtime
);

18  ()(
√wtime
 - 
ba£_time
Ë/ ()
timî_‰equícy
;

19 
	}
}

23 
	~<wÆl˛ocktime.h
>

24 
	~<sys/time.h
>

26 
	gba£_£c⁄ds
=0;

28 
	$£t_time_ba£
()

30 
timevÆ
 
tv
;

31 
timez⁄e
 
tz
;

32 
	`gëtimeofday
(&
tv
, &
tz
);

33 
ba£_£c⁄ds
=
tv
.
tv_£c
;

34 
	}
}

36 
	$gë_time_ö_£c⁄ds
()

38 
timevÆ
 
tv
;

39 
timez⁄e
 
tz
;

40 
	`gëtimeofday
(&
tv
, &
tz
);

41  0.000001*
tv
.
tv_u£c
 + (tv.
tv_£c
-
ba£_£c⁄ds
);

42 
	}
}

	@common/wallclocktime.h

1 #i‚de‡
WALLCLOCKTIME_H


2 
	#WALLCLOCKTIME_H


	)

4 
£t_time_ba£
();

5 
gë_time_ö_£c⁄ds
();

	@eltopo3d/accelerationgrid.cpp

14 
	~<ac˚Àøti⁄grid.h
>

16 
	~<¨øy3.h
>

17 
	~<limôs
>

18 
	~<utû.h
>

19 
	~<vec.h
>

20 
	~<ve˘‹
>

21 
	~<wÆl˛ocktime.h
>

45 
	gAc˚Àøti⁄Grid
::
	$Ac˚Àøti⁄Grid
() :

46 
	`m_˚Œs
(0,0,0),

47 
	`m_ñemítidxs
(0),

48 
	`m_ñemítxmös
(0),

49 
	`m_ñemítxmaxs
(0),

50 
	`m_ñemítquîy
(0),

51 
	`m_œ°quîy
(0),

52 
	`m_gridxmö
(0,0,0),

53 
	`m_gridxmax
(0,0,0),

54 
	`m_˚Œsize
(0,0,0),

55 
	$m_öv˚Œsize
(0,0,0)

57 
Vec3°
 
	`dims
(1,1,1);

58 
Vec3d
 
	`xmö
(0,0,0), 
	`xmax
(1,1,1);

59 
	`£t
(
dims
, 
xmö
, 
xmax
);

60 
	}
}

68 
	gAc˚Àøti⁄Grid
::
	$Ac˚Àøti⁄Grid
(
Ac˚Àøti⁄Grid
& 
Ÿhî
) :

69 
	`m_˚Œs
(0,0,0),

70 
	`m_ñemítidxs
(0),

71 
	`m_ñemítxmös
(0),

72 
	`m_ñemítxmaxs
(0),

73 
	`m_ñemítquîy
(0),

74 
	`m_œ°quîy
(0),

75 
	`m_gridxmö
(0,0,0),

76 
	`m_gridxmax
(0,0,0),

77 
	`m_˚Œsize
(0,0,0),

78 
	$m_öv˚Œsize
(0,0,0)

82 *
this
 = 
Ÿhî
;

84 
	}
}

92 
	gAc˚Àøti⁄Grid
& Ac˚Àøti⁄Grid::
›î©‹
=–c⁄° 
Ac˚Àøti⁄Grid
& 
Ÿhî
)

94 
m_˚Œs
.
ªsize
–
Ÿhî
.m_˚Œs.
ni
, othî.m_˚Œs.
nj
, othî.m_˚Œs.
nk
, 0 );

95  
size_t
 
	gi
 = 0; i < 
	gm_˚Œs
.
	ga
.
size
(); ++i )

97 i‡(
	gŸhî
.
	gm_˚Œs
.
	ga
[
i
])

99 
	gm_˚Œs
.
	ga
[
i
] = 
√w
 
°d
::
ve˘‹
<
size_t
>();

100 *(
	gm_˚Œs
.
	ga
[
i
]Ë*(
Ÿhî
.
m_˚Œs
.
a
[i]);

104 
	gm_ñemítidxs
 = 
Ÿhî
.
m_ñemítidxs
;

105 
	gm_ñemítxmös
 = 
Ÿhî
.
m_ñemítxmös
;

106 
	gm_ñemítxmaxs
 = 
Ÿhî
.
m_ñemítxmaxs
;

107 
	gm_ñemítquîy
 = 
Ÿhî
.
m_ñemítquîy
;

108 
	gm_œ°quîy
 = 
Ÿhî
.
m_œ°quîy
;

109 
	gm_gridxmö
 = 
Ÿhî
.
m_gridxmö
;

110 
	gm_gridxmax
 = 
Ÿhî
.
m_gridxmax
;

111 
	gm_˚Œsize
 = 
Ÿhî
.
m_˚Œsize
;

112 
	gm_öv˚Œsize
 = 
Ÿhî
.
m_öv˚Œsize
;

114  *
	gthis
;

123 
	gAc˚Àøti⁄Grid
::~
	$Ac˚Àøti⁄Grid
()

125 
	`˛ór
();

126 
	}
}

134 
	gAc˚Àøti⁄Grid
::
	$£t
–c⁄° 
Vec3°
& 
dims
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
 )

136 
m_gridxmö
 = 
xmö
;

137 
m_gridxmax
 = 
xmax
;

139 
i
 = 0; i < 3; i++)

141 
m_˚Œsize
[
i
] = (
m_gridxmax
[i]-
m_gridxmö
[i])/
dims
[i];

142 
m_öv˚Œsize
[
i
] = 1.0 / 
m_˚Œsize
[i];

145 
	`˛ór
();

147 
m_˚Œs
.
	`ªsize
(
dims
[0], dims[1], dims[2]);

148 
size_t
 
i
 = 0; i < 
m_˚Œs
.
a
.
	`size
(); i++)

150 
m_˚Œs
.
a
[
i
] = 0;

152 
	}
}

160 
	gAc˚Àøti⁄Grid
::
	$bound°oödi˚s
(c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
, 
Vec3i
& 
xmöi
, Vec3i& 
xmaxi
)

163 
xmöi
[0] = (Ë
	`Êo‹
((
xmö
[0] - 
m_gridxmö
[0]Ë* 
m_öv˚Œsize
[0]);

164 
xmöi
[1] = (Ë
	`Êo‹
((
xmö
[1] - 
m_gridxmö
[1]Ë* 
m_öv˚Œsize
[1]);

165 
xmöi
[2] = (Ë
	`Êo‹
((
xmö
[2] - 
m_gridxmö
[2]Ë* 
m_öv˚Œsize
[2]);

167 
xmaxi
[0] = (Ë
	`Êo‹
((
xmax
[0] - 
m_gridxmö
[0]Ë* 
m_öv˚Œsize
[0]);

168 
xmaxi
[1] = (Ë
	`Êo‹
((
xmax
[1] - 
m_gridxmö
[1]Ë* 
m_öv˚Œsize
[1]);

169 
xmaxi
[2] = (Ë
	`Êo‹
((
xmax
[2] - 
m_gridxmö
[2]Ë* 
m_öv˚Œsize
[2]);

171 if(
xmöi
[0] < 0) xmini[0] = 0;

172 if(
xmöi
[1] < 0) xmini[1] = 0;

173 if(
xmöi
[2] < 0) xmini[2] = 0;

175 if(
xmaxi
[0] < 0) xmaxi[0] = 0;

176 if(
xmaxi
[1] < 0) xmaxi[1] = 0;

177 if(
xmaxi
[2] < 0) xmaxi[2] = 0;

179 
	`as£π
–
m_˚Œs
.
ni
 < 
INT_MAX
 );

180 
	`as£π
–
m_˚Œs
.
nj
 < 
INT_MAX
 );

181 
	`as£π
–
m_˚Œs
.
nk
 < 
INT_MAX
 );

183 if(
xmaxi
[0] >()
m_˚Œs
.
ni
) xmaxi[0] = ()m_cells.ni-1;

184 if(
xmaxi
[1] >()
m_˚Œs
.
nj
) xmaxi[1] = ()m_cells.nj-1;

185 if(
xmaxi
[2] >()
m_˚Œs
.
nk
) xmaxi[2] = ()m_cells.nk-1;

187 if(
xmöi
[0] >()
m_˚Œs
.
ni
) xmini[0] = ()m_cells.ni-1;

188 if(
xmöi
[1] >()
m_˚Œs
.
nj
) xmini[1] = ()m_cells.nj-1;

189 if(
xmöi
[2] >()
m_˚Œs
.
nk
) xmini[2] = ()m_cells.nk-1;

191 
	}
}

199 
	gAc˚Àøti⁄Grid
::
	$add_ñemít
(
size_t
 
idx
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
)

201 if(
m_ñemítidxs
.
	`size
(Ë<
idx
)

203 
m_ñemítidxs
.
	`ªsize
(
idx
+1);

204 
m_ñemítxmös
.
	`ªsize
(
idx
+1);

205 
m_ñemítxmaxs
.
	`ªsize
(
idx
+1);

206 
m_ñemítquîy
.
	`ªsize
(
idx
+1);

209 
m_ñemítxmös
[
idx
] = 
xmö
;

210 
m_ñemítxmaxs
[
idx
] = 
xmax
;

211 
m_ñemítquîy
[
idx
] = 0;

213 
Vec3i
 
xmöi
, 
xmaxi
;

214 
	`bound°oödi˚s
(
xmö
, 
xmax
, 
xmöi
, 
xmaxi
);

216 
i
 = 
xmöi
[0]; i <
xmaxi
[0]; i++)

218 
j
 = 
xmöi
[1]; j <
xmaxi
[1]; j++)

220 
k
 = 
xmöi
[2]; k <
xmaxi
[2]; k++)

222 
°d
::
ve˘‹
<
size_t
>*& 
˚Œ
 = 
	`m_˚Œs
(
i
, 
j
, 
k
);

223 if(!
˚Œ
)

224 
˚Œ
 = 
√w
 
°d
::
ve˘‹
<
size_t
>();

226 
˚Œ
->
	`push_back
(
idx
);

227 
m_ñemítidxs
[
idx
].
	`push_back
(
	`Vec3°
(
i
, 
j
, 
k
));

231 
	}
}

239 
	gAc˚Àøti⁄Grid
::
	$ªmove_ñemít
(
size_t
 
idx
)

242 i‡–
idx
 >
m_ñemítidxs
.
	`size
() ) { ; }

244 
size_t
 
c
 = 0; c < 
m_ñemítidxs
[
idx
].
	`size
(); c++)

246 
Vec3°
 
˚Œco‹ds
 = 
m_ñemítidxs
[
idx
][
c
];

247 
°d
::
ve˘‹
<
size_t
>* 
˚Œ
 = 
	`m_˚Œs
(
˚Œco‹ds
[0], cellcoords[1], cellcoords[2]);

249 
°d
::
ve˘‹
<
size_t
>::
ôî©‹
 
ô
 = 
˚Œ
->
	`begö
();

250 *
ô
 !
idx
)

252 
ô
++;

255 
˚Œ
->
	`îa£
(
ô
);

258 
m_ñemítidxs
[
idx
].
	`˛ór
();

259 
	}
}

267 
	gAc˚Àøti⁄Grid
::
	$upd©e_ñemít
(
size_t
 
idx
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
)

269 
	`ªmove_ñemít
(
idx
);

270 
	`add_ñemít
(
idx
, 
xmö
, 
xmax
);

271 
	}
}

279 
	gAc˚Àøti⁄Grid
::
	$˛ór
()

281 
size_t
 
i
 = 0; i < 
m_˚Œs
.
a
.
	`size
(); i++)

283 
°d
::
ve˘‹
<
size_t
>*& 
˚Œ
 = 
m_˚Œs
.
a
[
i
];

284 if(
˚Œ
)

286 
dñëe
 
˚Œ
;

287 
˚Œ
 = 0;

291 
m_ñemítidxs
.
	`˛ór
();

292 
m_ñemítxmös
.
	`˛ór
();

293 
m_ñemítxmaxs
.
	`˛ór
();

294 
m_ñemítquîy
.
	`˛ór
();

295 
m_œ°quîy
 = 0;

297 
	}
}

305 
	gAc˚Àøti⁄Grid
::
föd_ovîœµög_ñemíts
–c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
, 
°d
::
ve˘‹
<
size_t
>& 
ªsu…s
 )

307 if(
m_œ°quîy
 =
°d
::
numîic_limôs
<>::
max
())

309 
°d
::
ve˘‹
<>::
ôî©‹
 
ôî
 = 
m_ñemítquîy
.
begö
();

310  ; 
	gôî
 !
m_ñemítquîy
.
íd
(); ++iter )

312 *
	gôî
 = 0;

314 
	gm_œ°quîy
 = 0;

317 ++
	gm_œ°quîy
;

319 
Vec3i
 
	gxmöi
, 
	gxmaxi
;

320 
bound°oödi˚s
(
xmö
, 
xmax
, 
xmöi
, 
xmaxi
);

322 
	gi
 = 
xmöi
[0]; i <
xmaxi
[0]; ++i)

324 
	gj
 = 
xmöi
[1]; j <
xmaxi
[1]; ++j)

326 
	gk
 = 
xmöi
[2]; k <
xmaxi
[2]; ++k)

328 
	g°d
::
ve˘‹
<
size_t
>* 
˚Œ
 = 
m_˚Œs
(
i
, 
j
, 
k
);

330 if(
	g˚Œ
)

332  
	g°d
::
ve˘‹
<
size_t
>::
c⁄°_ôî©‹
 
côî
 = 
˚Œ
->
begö
(); 
	gcôî
 !˚Œ->
íd
(); ++citer)

334 
size_t
 
	goidx
 = *
côî
;

338 if(
	gm_ñemítquîy
[
oidx
] < 
	gm_œ°quîy
)

343 
	gm_ñemítquîy
[
oidx
] = 
m_œ°quîy
;

345 c⁄° 
	gVec3d
& 
	goxmö
 = 
m_ñemítxmös
[
oidx
];

346 c⁄° 
	gVec3d
& 
	goxmax
 = 
m_ñemítxmaxs
[
oidx
];

348 if–(
	gxmö
[0] <
oxmax
[0] && 
xmö
[1] <= oxmax[1] && xmin[2] <= oxmax[2]) &&

349 (
xmax
[0] >
oxmö
[0] && xmax[1] >= oxmin[1] && xmax[2] >= oxmin[2]) )

351 
ªsu…s
.
push_back
(
oidx
);

	@eltopo3d/accelerationgrid.h

10 #i‚de‡
EL_TOPO_ACCELERATIONGRID_H


11 
	#EL_TOPO_ACCELERATIONGRID_H


	)

17 
	~<¨øy3.h
>

18 
	~<vec.h
>

34 ˛as†
	cAc˚Àøti⁄Grid


37 
	mpublic
:

39 
Ac˚Àøti⁄Grid
();

40 ~
Ac˚Àøti⁄Grid
();

43 
Ac˚Àøti⁄Grid
(Ac˚Àøti⁄Grid& 
Ÿhî
);

44 
	mAc˚Àøti⁄Grid
& 
	m›î©‹
=(c⁄° 
Ac˚Àøti⁄Grid
& 
Ÿhî
);

46 
	mpublic
:

50 
£t
–c⁄° 
Vec3°
& 
dims
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
 );

54 
bound°oödi˚s
–c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
, 
Vec3i
& 
xmöi
, Vec3i& 
xmaxi
);

58 
add_ñemít
(
size_t
 
idx
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
);

62 
ªmove_ñemít
(
size_t
 
idx
);

66 
upd©e_ñemít
(
size_t
 
idx
, c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
);

70 
˛ór
();

74 
föd_ovîœµög_ñemíts
–c⁄° 
Vec3d
& 
xmö
, c⁄° Vec3d& 
xmax
, 
°d
::
ve˘‹
<
size_t
>& 
ªsu…s
 );

79 
	mAºay3
<
	m°d
::
ve˘‹
<
size_t
>* > 
m_˚Œs
;

83 
	m°d
::
ve˘‹
<
°d
::ve˘‹<
Vec3°
> > 
m_ñemítidxs
;

87 
	m°d
::
ve˘‹
<
Vec3d
> 
m_ñemítxmös
, 
	mm_ñemítxmaxs
;

91 
	m°d
::
ve˘‹
<> 
m_ñemítquîy
;

95 
	mm_œ°quîy
;

99 
Vec3d
 
	mm_gridxmö
, 
	mm_gridxmax
;

103 
Vec3d
 
	mm_˚Œsize
;

107 
Vec3d
 
	mm_öv˚Œsize
;

	@eltopo3d/broadphase.h

12 #i‚de‡
EL_TOPO_BROADPHASE_H


13 
	#EL_TOPO_BROADPHASE_H


	)

19 
	~<vec.h
>

25 
˛ass
 
	gDy«micSurÁ˚
;

37 ˛as†
	cBrﬂdPha£


39 
	mpublic
:

41 
vútuÆ
 ~
	$BrﬂdPha£
()

46 
vútuÆ
 
	`upd©e_brﬂd_pha£
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
, 
boﬁ
 
c⁄töuous
 ) = 0;

49 
vútuÆ
 
	`add_vîãx
–
size_t
 
ödex
,

50 c⁄° 
Vec3d
& 
Øbb_low
,

51 c⁄° 
Vec3d
& 
Øbb_high
,

52 
boﬁ
 
is_sﬁid
 ) = 0;

54 
vútuÆ
 
	`add_edge
–
size_t
 
ödex
,

55 c⁄° 
Vec3d
& 
Øbb_low
,

56 c⁄° 
Vec3d
& 
Øbb_high
,

57 
boﬁ
 
is_sﬁid
 ) = 0;

59 
vútuÆ
 
	`add_åüngÀ
–
size_t
 
ödex
,

60 c⁄° 
Vec3d
& 
Øbb_low
,

61 c⁄° 
Vec3d
& 
Øbb_high
,

62 
boﬁ
 
is_sﬁid
 ) = 0;

64 
vútuÆ
 
	`upd©e_vîãx
–
size_t
 
ödex
,

65 c⁄° 
Vec3d
& 
Øbb_low
,

66 c⁄° 
Vec3d
& 
Øbb_high
,

67 
boﬁ
 
is_sﬁid
 ) = 0;

69 
vútuÆ
 
	`upd©e_edge
–
size_t
 
ödex
,

70 c⁄° 
Vec3d
& 
Øbb_low
,

71 c⁄° 
Vec3d
& 
Øbb_high
,

72 
boﬁ
 
is_sﬁid
 ) = 0;

74 
vútuÆ
 
	`upd©e_åüngÀ
–
size_t
 
ödex
,

75 c⁄° 
Vec3d
& 
Øbb_low
,

76 c⁄° 
Vec3d
& 
Øbb_high
,

77 
boﬁ
 
is_sﬁid
 ) = 0;

79 
vútuÆ
 
	`ªmove_vîãx
–
size_t
 
ödex
 ) = 0;

80 
vútuÆ
 
	`ªmove_edge
–
size_t
 
ödex
 ) = 0;

81 
vútuÆ
 
	`ªmove_åüngÀ
–
size_t
 
ödex
 ) = 0;

83 
vútuÆ
 
	`gë_vîãx_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 ) = 0;

84 
vútuÆ
 
	`gë_edge_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 ) = 0;

85 
vútuÆ
 
	`gë_åüngÀ_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 ) = 0;

89 
vútuÆ
 
	`gë_pŸítül_vîãx_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

90 c⁄° 
Vec3d
& 
Øbb_high
,

91 
boﬁ
 
ªtu∫_sﬁid
,

92 
boﬁ
 
ªtu∫_dy«mic
,

93 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_vîti˚s
 ) = 0;

97 
vútuÆ
 
	`gë_pŸítül_edge_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

98 c⁄° 
Vec3d
& 
Øbb_high
,

99 
boﬁ
 
ªtu∫_sﬁid
,

100 
boﬁ
 
ªtu∫_dy«mic
,

101 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_edges
 ) = 0;

105 
vútuÆ
 
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

106 c⁄° 
Vec3d
& 
Øbb_high
,

107 
boﬁ
 
ªtu∫_sﬁid
,

108 
boﬁ
 
ªtu∫_dy«mic
,

109 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_åüngÀs
 ) = 0;

111 
	}
};

	@eltopo3d/broadphasegrid.cpp

14 
	~<brﬂdpha£grid.h
>

15 
	~<dy«micsurÁ˚.h
>

39 
	gBrﬂdPha£Grid
::
buûd_ac˚Àøti⁄_grid
–
Ac˚Àøti⁄Grid
& 
grid
,

40 
°d
::
ve˘‹
<
Vec3d
>& 
xmös
,

41 
°d
::
ve˘‹
<
Vec3d
>& 
xmaxs
,

42 
°d
::
ve˘‹
<
size_t
>& 
ödi˚s
,

43 
Àngth_sˇÀ
,

44 
grid_∑ddög
 )

47 
as£π
–
xmaxs
.
size
(Ë=
xmös
.size() );

48 
as£π
–
xmös
.
size
(Ë=
ödi˚s
.size() );

50 i‡–
	gödi˚s
.
em±y
() )

52 
	ggrid
.
˛ór
();

56 
Vec3d
 
	gxmax
 = 
xmaxs
[0];

57 
Vec3d
 
	gxmö
 = 
xmös
[0];

58 
	gmaxdi°™˚
 = 0;

60 
size_t
 
	gn
 = 
xmös
.
size
();

62 
size_t
 
	gi
 = 0; i < 
	gn
; i++)

64 
upd©e_mömax
(
xmös
[
i
], 
xmö
, 
xmax
);

65 
upd©e_mömax
(
xmaxs
[
i
], 
xmö
, 
xmax
);

66 
	gmaxdi°™˚
 = 
°d
::
max
(
maxdi°™˚
, 
mag
(
xmaxs
[
i
] - 
xmös
[i]));

69 
	gi
 = 0; i < 3; i++)

71 
	gxmö
[
i
] -2*
maxdi°™˚
 + 
grid_∑ddög
;

72 
	gxmax
[
i
] +2*
maxdi°™˚
 + 
grid_∑ddög
;

75 
Vec3°
 
dims
(1,1,1);

77 c⁄° 
size_t
 
	gMAX_D
 = 2000;

79 if(
mag
(
xmax
-
xmö
Ë> 
	ggrid_∑ddög
)

81 
	gi
 = 0; i < 3; i++)

83 
size_t
 
	gd
 = (size_t)
˚û
((
xmax
[
i
] - 
xmö
[i])/
Àngth_sˇÀ
);

85 if(
	gd
 < 1) d = 1;

87 if(
	gd
 > 
	gMAX_D
)

93 
	gd
 = 
MAX_D
;

96 
	gdims
[
i
] = 
d
;

100 
	ggrid
.
£t
(
dims
, 
xmö
, 
xmax
);

104  
±rdiff_t
 
	gi
 = 
n
-1; i >= 0; i-- )

107 i‡–
	gxmös
[
i
][0] > 
	gxmaxs
[i][0] ) { ; }

108 
	ggrid
.
add_ñemít
–
ödi˚s
[
i
], 
xmös
[i], 
xmaxs
[i]);

119 
	gBrﬂdPha£Grid
::
	$upd©e_brﬂd_pha£
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
, 
boﬁ
 
c⁄töuous
 )

122 
grid_sˇÀ
 = 
surÁ˚
.
	`gë_avîage_edge_Àngth
();

129 
size_t
 
num_vîti˚s
 = 
surÁ˚
.
	`gë_num_vîti˚s
();

131 
°d
::
ve˘‹
<
Vec3d
> 
sﬁid_vîãx_xmös
, 
sﬁid_vîãx_xmaxs
;

132 
°d
::
ve˘‹
<
size_t
> 
sﬁid_vîãx_ödi˚s
;

133 
°d
::
ve˘‹
<
Vec3d
> 
dy«mic_vîãx_xmös
, 
dy«mic_vîãx_xmaxs
;

134 
°d
::
ve˘‹
<
size_t
> 
dy«mic_vîãx_ödi˚s
;

136 
size_t
 
i
 = 0; i < 
num_vîti˚s
; i++)

138 
Vec3d
 
xmö
, 
xmax
;

140 i‡–
c⁄töuous
 )

142 
surÁ˚
.
	`vîãx_c⁄töuous_bounds
–
i
, 
xmö
, 
xmax
 );

146 
surÁ˚
.
	`vîãx_°©ic_bounds
–
i
, 
xmö
, 
xmax
 );

149 i‡–
surÁ˚
.
	`vîãx_is_sﬁid
–
i
 ) )

151 
sﬁid_vîãx_xmös
.
	`push_back
–
xmö
 );

152 
sﬁid_vîãx_xmaxs
.
	`push_back
–
xmax
 );

153 
sﬁid_vîãx_ödi˚s
.
	`push_back
–
i
 );

157 
dy«mic_vîãx_xmös
.
	`push_back
–
xmö
 );

158 
dy«mic_vîãx_xmaxs
.
	`push_back
–
xmax
 );

159 
dy«mic_vîãx_ödi˚s
.
	`push_back
–
i
 );

163 
	`buûd_ac˚Àøti⁄_grid
–
m_sﬁid_vîãx_grid
,

164 
sﬁid_vîãx_xmös
,

165 
sﬁid_vîãx_xmaxs
,

166 
sﬁid_vîãx_ödi˚s
,

167 
grid_sˇÀ
,

168 
surÁ˚
.
m_Øbb_∑ddög
 );

170 
	`buûd_ac˚Àøti⁄_grid
–
m_dy«mic_vîãx_grid
,

171 
dy«mic_vîãx_xmös
,

172 
dy«mic_vîãx_xmaxs
,

173 
dy«mic_vîãx_ödi˚s
,

174 
grid_sˇÀ
,

175 
surÁ˚
.
m_Øbb_∑ddög
 );

184 
size_t
 
num_edges
 = 
surÁ˚
.
m_mesh
.
m_edges
.
	`size
();

186 
°d
::
ve˘‹
<
Vec3d
> 
sﬁid_edge_xmös
, 
sﬁid_edge_xmaxs
;

187 
°d
::
ve˘‹
<
size_t
> 
sﬁid_edge_ödi˚s
;

188 
°d
::
ve˘‹
<
Vec3d
> 
dy«mic_edge_xmös
, 
dy«mic_edge_xmaxs
;

189 
°d
::
ve˘‹
<
size_t
> 
dy«mic_edge_ödi˚s
;

191 
size_t
 
i
 = 0; i < 
num_edges
; i++)

193 
Vec3d
 
xmö
, 
xmax
;

195 i‡–
c⁄töuous
 )

197 
surÁ˚
.
	`edge_c⁄töuous_bounds
–
i
, 
xmö
, 
xmax
 );

201 
surÁ˚
.
	`edge_°©ic_bounds
–
i
, 
xmö
, 
xmax
 );

205 i‡–
surÁ˚
.
	`edge_is_sﬁid
(
i
) )

207 
sﬁid_edge_xmös
.
	`push_back
–
xmö
 );

208 
sﬁid_edge_xmaxs
.
	`push_back
–
xmax
 );

209 
sﬁid_edge_ödi˚s
.
	`push_back
–
i
 );

213 
dy«mic_edge_xmös
.
	`push_back
–
xmö
 );

214 
dy«mic_edge_xmaxs
.
	`push_back
–
xmax
 );

215 
dy«mic_edge_ödi˚s
.
	`push_back
–
i
 );

219 
	`buûd_ac˚Àøti⁄_grid
–
m_sﬁid_edge_grid
,

220 
sﬁid_edge_xmös
,

221 
sﬁid_edge_xmaxs
,

222 
sﬁid_edge_ödi˚s
,

223 
grid_sˇÀ
,

224 
surÁ˚
.
m_Øbb_∑ddög
 );

226 
	`buûd_ac˚Àøti⁄_grid
–
m_dy«mic_edge_grid
,

227 
dy«mic_edge_xmös
,

228 
dy«mic_edge_xmaxs
,

229 
dy«mic_edge_ödi˚s
,

230 
grid_sˇÀ
,

231 
surÁ˚
.
m_Øbb_∑ddög
 );

240 
size_t
 
num_åüngÀs
 = 
surÁ˚
.
m_mesh
.
	`num_åüngÀs
();

242 
°d
::
ve˘‹
<
Vec3d
> 
sﬁid_åi_xmös
, 
sﬁid_åi_xmaxs
;

243 
°d
::
ve˘‹
<
size_t
> 
sﬁid_åi_ödi˚s
;

244 
°d
::
ve˘‹
<
Vec3d
> 
dy«mic_åi_xmös
, 
dy«mic_åi_xmaxs
;

245 
°d
::
ve˘‹
<
size_t
> 
dy«mic_åi_ödi˚s
;

247 
size_t
 
i
 = 0; i < 
num_åüngÀs
; i++)

249 
Vec3d
 
xmö
, 
xmax
;

251 i‡–
c⁄töuous
 )

253 
surÁ˚
.
	`åüngÀ_c⁄töuous_bounds
(
i
, 
xmö
, 
xmax
);

257 
surÁ˚
.
	`åüngÀ_°©ic_bounds
(
i
, 
xmö
, 
xmax
);

260 i‡–
surÁ˚
.
	`åüngÀ_is_sﬁid
–
i
 ) )

262 
sﬁid_åi_xmös
.
	`push_back
–
xmö
 );

263 
sﬁid_åi_xmaxs
.
	`push_back
–
xmax
 );

264 
sﬁid_åi_ödi˚s
.
	`push_back
–
i
 );

268 
dy«mic_åi_xmös
.
	`push_back
–
xmö
 );

269 
dy«mic_åi_xmaxs
.
	`push_back
–
xmax
 );

270 
dy«mic_åi_ödi˚s
.
	`push_back
–
i
 );

274 
	`buûd_ac˚Àøti⁄_grid
–
m_sﬁid_åüngÀ_grid
,

275 
sﬁid_åi_xmös
,

276 
sﬁid_åi_xmaxs
,

277 
sﬁid_åi_ödi˚s
,

278 
grid_sˇÀ
,

279 
surÁ˚
.
m_Øbb_∑ddög
 );

281 
	`buûd_ac˚Àøti⁄_grid
–
m_dy«mic_åüngÀ_grid
,

282 
dy«mic_åi_xmös
,

283 
dy«mic_åi_xmaxs
,

284 
dy«mic_åi_ödi˚s
,

285 
grid_sˇÀ
,

286 
surÁ˚
.
m_Øbb_∑ddög
 );

290 
	}
}

	@eltopo3d/broadphasegrid.h

10 #i‚de‡
EL_TOPO_BROADPHASEGRID_H


11 
	#EL_TOPO_BROADPHASEGRID_H


	)

17 
	~<brﬂdpha£.h
>

18 
	~<ac˚Àøti⁄grid.h
>

24 
˛ass
 
	gDy«micSurÁ˚
;

36 ˛as†
	cBrﬂdPha£Grid
 : 
public
 
BrﬂdPha£


38 
public
:

40 
	$BrﬂdPha£Grid
() :

41 
	`m_sﬁid_vîãx_grid
(),

42 
	`m_sﬁid_edge_grid
(),

43 
	`m_sﬁid_åüngÀ_grid
(),

44 
	`m_dy«mic_vîãx_grid
(),

45 
	`m_dy«mic_edge_grid
(),

46 
	$m_dy«mic_åüngÀ_grid
()

49 ~
	$BrﬂdPha£Grid
()

50 {
	}
}

54 
upd©e_brﬂd_pha£
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
, 
boﬁ
 
c⁄töuous
 );

56 
ölöe
 
add_vîãx
–
size_t
 
ödex
,

57 c⁄° 
Vec3d
& 
Øbb_low
,

58 c⁄° 
Vec3d
& 
Øbb_high
,

59 
boﬁ
 
is_sﬁid
 );

61 
ölöe
 
add_edge
–
size_t
 
ödex
,

62 c⁄° 
Vec3d
& 
Øbb_low
,

63 c⁄° 
Vec3d
& 
Øbb_high
,

64 
boﬁ
 
is_sﬁid
 );

66 
ölöe
 
add_åüngÀ
–
size_t
 
ödex
,

67 c⁄° 
Vec3d
& 
Øbb_low
,

68 c⁄° 
Vec3d
& 
Øbb_high
,

69 
boﬁ
 
is_sﬁid
 );

71 
ölöe
 
upd©e_vîãx
–
size_t
 
ödex
,

72 c⁄° 
Vec3d
& 
Øbb_low
,

73 c⁄° 
Vec3d
& 
Øbb_high
,

74 
boﬁ
 
is_sﬁid
 );

76 
ölöe
 
upd©e_edge
–
size_t
 
ödex
,

77 c⁄° 
Vec3d
& 
Øbb_low
,

78 c⁄° 
Vec3d
& 
Øbb_high
,

79 
boﬁ
 
is_sﬁid
 );

81 
ölöe
 
upd©e_åüngÀ
–
size_t
 
ödex
,

82 c⁄° 
Vec3d
& 
Øbb_low
,

83 c⁄° 
Vec3d
& 
Øbb_high
,

84 
boﬁ
 
is_sﬁid
 );

86 
ölöe
 
ªmove_vîãx
–
size_t
 
ödex
 );

87 
ölöe
 
ªmove_edge
–
size_t
 
ödex
 );

88 
ölöe
 
ªmove_åüngÀ
–
size_t
 
ödex
 );

90 
vútuÆ
 
gë_vîãx_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 );

91 
vútuÆ
 
gë_edge_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 );

92 
vútuÆ
 
gë_åüngÀ_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 );

96 
ölöe
 
gë_pŸítül_vîãx_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

97 c⁄° 
Vec3d
& 
Øbb_high
,

98 
boﬁ
 
ªtu∫_sﬁid
,

99 
boﬁ
 
ªtu∫_dy«mic
,

100 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_vîti˚s
 );

104 
ölöe
 
gë_pŸítül_edge_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

105 c⁄° 
Vec3d
& 
Øbb_high
,

106 
boﬁ
 
ªtu∫_sﬁid
,

107 
boﬁ
 
ªtu∫_dy«mic
,

108 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_edges
 );

112 
ölöe
 
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

113 c⁄° 
Vec3d
& 
Øbb_high
,

114 
boﬁ
 
ªtu∫_sﬁid
,

115 
boﬁ
 
ªtu∫_dy«mic
,

116 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_åüngÀs
 );

120 
buûd_ac˚Àøti⁄_grid
–
Ac˚Àøti⁄Grid
& 
grid
,

121 
°d
::
ve˘‹
<
Vec3d
>& 
xmös
,

122 
°d
::
ve˘‹
<
Vec3d
>& 
xmaxs
,

123 
°d
::
ve˘‹
<
size_t
>& 
ödi˚s
,

124 
Àngth_sˇÀ
,

125 
grid_∑ddög
 );

129 
Ac˚Àøti⁄Grid
 
	gm_sﬁid_vîãx_grid
;

130 
Ac˚Àøti⁄Grid
 
	gm_sﬁid_edge_grid
;

131 
Ac˚Àøti⁄Grid
 
	gm_sﬁid_åüngÀ_grid
;

133 
Ac˚Àøti⁄Grid
 
	gm_dy«mic_vîãx_grid
;

134 
Ac˚Àøti⁄Grid
 
	gm_dy«mic_edge_grid
;

135 
Ac˚Àøti⁄Grid
 
	gm_dy«mic_åüngÀ_grid
;

149 
ölöe
 
	gBrﬂdPha£Grid
::
	$add_vîãx
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

151 i‡–
is_sﬁid
 )

153 
m_sﬁid_vîãx_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

157 
m_dy«mic_vîãx_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

159 
	}
}

167 
ölöe
 
	gBrﬂdPha£Grid
::
	$add_edge
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

169 i‡–
is_sﬁid
 )

171 
m_sﬁid_edge_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

175 
m_dy«mic_edge_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

177 
	}
}

185 
ölöe
 
	gBrﬂdPha£Grid
::
	$add_åüngÀ
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

187 i‡–
is_sﬁid
 )

189 
m_sﬁid_åüngÀ_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

193 
m_dy«mic_åüngÀ_grid
.
	`add_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

195 
	}
}

198 
ölöe
 
	gBrﬂdPha£Grid
::
	$upd©e_vîãx
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

200 i‡–
is_sﬁid
 )

202 
m_sﬁid_vîãx_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

206 
m_dy«mic_vîãx_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

208 
	}
}

210 
ölöe
 
	gBrﬂdPha£Grid
::
	$upd©e_edge
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

212 i‡–
is_sﬁid
 )

214 
m_sﬁid_edge_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

218 
m_dy«mic_edge_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

220 
	}
}

222 
ölöe
 
	gBrﬂdPha£Grid
::
	$upd©e_åüngÀ
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
Øbb_low
, c⁄° Vec3d& 
Øbb_high
, 
boﬁ
 
is_sﬁid
 )

224 i‡–
is_sﬁid
 )

226 
m_sﬁid_åüngÀ_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

230 
m_dy«mic_åüngÀ_grid
.
	`upd©e_ñemít
–
ödex
, 
Øbb_low
, 
Øbb_high
 );

232 
	}
}

241 
ölöe
 
	gBrﬂdPha£Grid
::
	$ªmove_vîãx
–
size_t
 
ödex
 )

243 
m_sﬁid_vîãx_grid
.
	`ªmove_ñemít
–
ödex
 );

244 
m_dy«mic_vîãx_grid
.
	`ªmove_ñemít
–
ödex
 );

245 
	}
}

253 
ölöe
 
	gBrﬂdPha£Grid
::
	$ªmove_edge
–
size_t
 
ödex
 )

255 
m_sﬁid_edge_grid
.
	`ªmove_ñemít
–
ödex
 );

256 
m_dy«mic_edge_grid
.
	`ªmove_ñemít
–
ödex
 );

257 
	}
}

265 
ölöe
 
	gBrﬂdPha£Grid
::
	$ªmove_åüngÀ
–
size_t
 
ödex
 )

267 
m_sﬁid_åüngÀ_grid
.
	`ªmove_ñemít
–
ödex
 );

268 
m_dy«mic_åüngÀ_grid
.
	`ªmove_ñemít
–
ödex
 );

269 
	}
}

277 
ölöe
 
	gBrﬂdPha£Grid
::
gë_pŸítül_vîãx_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

278 c⁄° 
Vec3d
& 
Øbb_high
,

279 
boﬁ
 
ªtu∫_sﬁid
,

280 
boﬁ
 
ªtu∫_dy«mic
,

281 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_vîti˚s
 )

283 i‡–
ªtu∫_sﬁid
 )

285 
m_sﬁid_vîãx_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_vîti˚s
 );

288 i‡–
	gªtu∫_dy«mic
 )

290 
	gm_dy«mic_vîãx_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_vîti˚s
 );

300 
ölöe
 
	gBrﬂdPha£Grid
::
gë_pŸítül_edge_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

301 c⁄° 
Vec3d
& 
Øbb_high
,

302 
boﬁ
 
ªtu∫_sﬁid
,

303 
boﬁ
 
ªtu∫_dy«mic
,

304 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_edges
 )

306 i‡–
ªtu∫_sﬁid
 )

308 
m_sﬁid_edge_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_edges
 );

311 i‡–
	gªtu∫_dy«mic
 )

313 
	gm_dy«mic_edge_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_edges
 );

323 
ölöe
 
	gBrﬂdPha£Grid
::
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–c⁄° 
Vec3d
& 
Øbb_low
,

324 c⁄° 
Vec3d
& 
Øbb_high
,

325 
boﬁ
 
ªtu∫_sﬁid
,

326 
boﬁ
 
ªtu∫_dy«mic
,

327 
°d
::
ve˘‹
<
size_t
>& 
ovîœµög_åüngÀs
 )

329 i‡–
ªtu∫_sﬁid
 )

331 
m_sﬁid_åüngÀ_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_åüngÀs
 );

334 i‡–
	gªtu∫_dy«mic
 )

336 
	gm_dy«mic_åüngÀ_grid
.
föd_ovîœµög_ñemíts
–
Øbb_low
, 
Øbb_high
, 
ovîœµög_åüngÀs
 );

343 
ölöe
 
	gBrﬂdPha£Grid
::
	$gë_vîãx_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 )

345 i‡–
is_sﬁid
 )

347 
Øbb_low
 = 
m_sﬁid_vîãx_grid
.
m_ñemítxmös
[
ödex
];

348 
Øbb_high
 = 
m_sﬁid_vîãx_grid
.
m_ñemítxmaxs
[
ödex
];

352 
Øbb_low
 = 
m_dy«mic_vîãx_grid
.
m_ñemítxmös
[
ödex
];

353 
Øbb_high
 = 
m_dy«mic_vîãx_grid
.
m_ñemítxmaxs
[
ödex
];

355 
	}
}

359 
ölöe
 
	gBrﬂdPha£Grid
::
	$gë_edge_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 )

361 i‡–
is_sﬁid
 )

363 
Øbb_low
 = 
m_sﬁid_edge_grid
.
m_ñemítxmös
[
ödex
];

364 
Øbb_high
 = 
m_sﬁid_edge_grid
.
m_ñemítxmaxs
[
ödex
];

368 
Øbb_low
 = 
m_dy«mic_edge_grid
.
m_ñemítxmös
[
ödex
];

369 
Øbb_high
 = 
m_dy«mic_edge_grid
.
m_ñemítxmaxs
[
ödex
];

371 
	}
}

375 
ölöe
 
	gBrﬂdPha£Grid
::
	$gë_åüngÀ_Øbb
–
size_t
 
ödex
, 
boﬁ
 
is_sﬁid
, 
Vec3d
& 
Øbb_low
, Vec3d& 
Øbb_high
 )

377 i‡–
is_sﬁid
 )

379 
Øbb_low
 = 
m_sﬁid_åüngÀ_grid
.
m_ñemítxmös
[
ödex
];

380 
Øbb_high
 = 
m_sﬁid_åüngÀ_grid
.
m_ñemítxmaxs
[
ödex
];

384 
Øbb_low
 = 
m_dy«mic_åüngÀ_grid
.
m_ñemítxmös
[
ödex
];

385 
Øbb_high
 = 
m_dy«mic_åüngÀ_grid
.
m_ñemítxmaxs
[
ödex
];

387 
	}
}

	@eltopo3d/collisionpipeline.cpp

11 
	~<cﬁlisi⁄pùñöe.h
>

13 
	~<brﬂdpha£.h
>

14 
	~<ccd_wøµî.h
>

15 
	~<cﬁlisi⁄quîõs.h
>

16 
	~<dy«micsurÁ˚.h
>

17 
	~<im∑˘z⁄esﬁvî.h
>

18 
	~<run°©s.h
>

19 
	~<wÆl˛ocktime.h
>

21 c⁄° 
	gIMPULSE_MULTIPLIER
 = 1.0;

29 
boﬁ
 
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
(
size_t
 
edge_a
,

30 
size_t
 
edge_b
,

31 
size_t
 
åüngÀ_a
,

32 
size_t
 
åüngÀ_b
,

33 
size_t
 
åüngÀ_c
,

34 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
m_posôi⁄s
,

35 
boﬁ
 
vîbo£
 )

37 i‡–
	gedge_a
 =
åüngÀ_a
 || 
edge_a
 =
åüngÀ_b
 ||Édge_®=
åüngÀ_c


38 || 
edge_b
 =
åüngÀ_a
 ||Édge_b =
åüngÀ_b
 ||Édge_b =
åüngÀ_c
 )

40  
Ál£
;

43 c⁄° 
boﬁ
 
	gDEGEN_COUNTS_AS_INTERSECTION
 = 
åue
;

45  
£gmít_åüngÀ_öãr£˘i⁄
(
m_posôi⁄s
[
edge_a
],Édge_a, m_posôi⁄s[
edge_b
],Édge_b,

46 
m_posôi⁄s
[
åüngÀ_a
],Åriangle_a,

47 
m_posôi⁄s
[
åüngÀ_b
],Åriangle_b,

48 
m_posôi⁄s
[
åüngÀ_c
],Åriangle_c,

49 
DEGEN_COUNTS_AS_INTERSECTION
, 
vîbo£
);

53 
	g«me•a˚
 {

57 
boﬁ
 
Cﬁlisi⁄C™did©eSëLT
(c⁄° 
Vec3°
& 
a
, c⁄° Vec3°& 
b
)

59 i‡(
	ga
[0] < 
	gb
[0])

61  
	gåue
;

63 i‡(
	ga
[0] =
b
[0])

65 i‡(
a
[1] < 
b
[1])

67  
åue
;

69 i‡(
	ga
[1] =
b
[1])

71 i‡(
a
[2] < 
b
[2])

73  
åue
;

78  
	gÁl£
;

86 
	gCﬁlisi⁄Pùñöe
::
	$Cﬁlisi⁄Pùñöe
(
Dy«micSurÁ˚
& 
surÁ˚
,

87 
BrﬂdPha£
& 
brﬂdpha£
,

88 
ö_‰i˘i⁄_c€fficõ¡
 ) :

89 
	`m_‰i˘i⁄_c€fficõ¡
–
ö_‰i˘i⁄_c€fficõ¡
 ),

90 
	`m_surÁ˚
–
surÁ˚
 ),

91 
	$m_brﬂd_pha£
–
brﬂdpha£
 )

92 {
	}
}

98 
	gCﬁlisi⁄Pùñöe
::
	$≠∂y_impul£
(c⁄° 
Vec4d
& 
Æphas
,

99 c⁄° 
Vec4°
& 
vîãx_ödi˚s
,

100 
impul£_magnôude
,

101 c⁄° 
Vec3d
& 
n‹mÆ
,

102 
dt
 )

105 
size_t
 
e0
 = 
vîãx_ödi˚s
[0];

106 
size_t
 
e1
 = 
vîãx_ödi˚s
[1];

107 
size_t
 
e2
 = 
vîãx_ödi˚s
[2];

108 
size_t
 
e3
 = 
vîãx_ödi˚s
[3];

110 
Vec3d
& 
v0
 = 
m_surÁ˚
.
m_vñocôõs
[
e0
];

111 
Vec3d
& 
v1
 = 
m_surÁ˚
.
m_vñocôõs
[
e1
];

112 
Vec3d
& 
v2
 = 
m_surÁ˚
.
m_vñocôõs
[
e2
];

113 
Vec3d
& 
v3
 = 
m_surÁ˚
.
m_vñocôõs
[
e3
];

115 
öv_m0
 = 1.0 / 
m_surÁ˚
.
m_mas£s
[
e0
];

116 
öv_m1
 = 1.0 / 
m_surÁ˚
.
m_mas£s
[
e1
];

117 
öv_m2
 = 1.0 / 
m_surÁ˚
.
m_mas£s
[
e2
];

118 
öv_m3
 = 1.0 / 
m_surÁ˚
.
m_mas£s
[
e3
];

120 
s0
 = 
Æphas
[0];

121 
s1
 = 
Æphas
[1];

122 
s2
 = 
Æphas
[2];

123 
s3
 = 
Æphas
[3];

125 
i
 = 
impul£_magnôude
 / (
s0
*s0*
öv_m0
 + 
s1
*s1*
öv_m1
 + 
s2
*s2*
öv_m2
 + 
s3
*s3*
öv_m3
);

127 i‡–
i
 > 100.0 / 
dt
 )

129 
°d
::
cout
 << "big impul£: " << 
i
 << std::
ídl
;

132 
Vec3d
 
¥e_ªœtive_vñocôy
 = 
s0
*
v0
 + 
s1
*
v1
 + 
s2
*
v2
 + 
s3
*
v3
;

133 
Vec3d
 
¥e_rv_n‹mÆ
 = 
	`dŸ
–
n‹mÆ
, 
¥e_ªœtive_vñocôy
 ) *Çormal;

134 
Vec3d
 
¥e_rv_èngítül
 = 
¥e_ªœtive_vñocôy
 - 
¥e_rv_n‹mÆ
;

136 
v0
 +
i
*
s0
*
öv_m0
 * 
n‹mÆ
;

137 
v1
 +
i
*
s1
*
öv_m1
 * 
n‹mÆ
;

138 
v2
 +
i
*
s2
*
öv_m2
 * 
n‹mÆ
;

139 
v3
 +
i
*
s3
*
öv_m3
 * 
n‹mÆ
;

145 
Vec3d
 
po°_ªœtive_vñocôy
 = 
s0
*
v0
 + 
s1
*
v1
 + 
s2
*
v2
 + 
s3
*
v3
;

146 
Vec3d
 
po°_rv_n‹mÆ
 = 
	`dŸ
–
n‹mÆ
, 
po°_ªœtive_vñocôy
 ) *Çormal;

147 
dñè_rv_n‹mÆ
 = 
	`mag
–
po°_rv_n‹mÆ
 - 
¥e_rv_n‹mÆ
 );

148 
‰i˘i⁄_impul£
 = 
	`mö
–
m_‰i˘i⁄_c€fficõ¡
 * 
dñè_rv_n‹mÆ
, 
	`mag
(
¥e_rv_èngítül
) );

149 
‰i˘i⁄_i
 = 
‰i˘i⁄_impul£
 / (
s0
*s0*
öv_m0
 + 
s1
*s1*
öv_m1
 + 
s2
*s2*
öv_m2
 + 
s3
*s3*
öv_m3
);

151 
Vec3d
 
èn_cﬁlisi⁄_n‹mÆ
 = -
¥e_rv_èngítül
;

152 
mag_n
 = 
	`mag
–
èn_cﬁlisi⁄_n‹mÆ
 );

153 i‡–
mag_n
 > 1e-8 )

155 
èn_cﬁlisi⁄_n‹mÆ
 /
mag_n
;

159 
èn_cﬁlisi⁄_n‹mÆ
 = 
	`Vec3d
(0);

162 
v0
 +
‰i˘i⁄_i
*
s0
*
öv_m0
 * 
èn_cﬁlisi⁄_n‹mÆ
;

163 
v1
 +
‰i˘i⁄_i
*
s1
*
öv_m1
 * 
èn_cﬁlisi⁄_n‹mÆ
;

164 
v2
 +
‰i˘i⁄_i
*
s2
*
öv_m2
 * 
èn_cﬁlisi⁄_n‹mÆ
;

165 
v3
 +
‰i˘i⁄_i
*
s3
*
öv_m3
 * 
èn_cﬁlisi⁄_n‹mÆ
;

167 
m_surÁ˚
.
	`£t_√wposôi⁄
–
e0
, m_surÁ˚.
	`gë_posôi⁄
”0Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[e0] );

168 
m_surÁ˚
.
	`£t_√wposôi⁄
–
e1
, m_surÁ˚.
	`gë_posôi⁄
”1Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[e1] );

169 
m_surÁ˚
.
	`£t_√wposôi⁄
–
e2
, m_surÁ˚.
	`gë_posôi⁄
”2Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[e2] );

170 
m_surÁ˚
.
	`£t_√wposôi⁄
–
e3
, m_surÁ˚.
	`gë_posôi⁄
”3Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[e3] );

172 
	}
}

181 
	gCﬁlisi⁄Pùñöe
::
	$≠∂y_edge_edge_impul£
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
, 
impul£_magnôude
, 
dt
 )

183 
	`as£π
–
cﬁlisi⁄
.
m_is_edge_edge
 );

185 
s0
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[0];

186 
s1
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[1];

187 
s2
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[2];

188 
s3
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[3];

190 
Vec4d
 
Æphas
;

191 
Æphas
[0] = 
s0
;

192 
Æphas
[1] = 
s1
;

193 
Æphas
[2] = -
s2
;

194 
Æphas
[3] = -
s3
;

196 
	`≠∂y_impul£
–
Æphas
, 
cﬁlisi⁄
.
m_vîãx_ödi˚s
, 
impul£_magnôude
, cﬁlisi⁄.
m_n‹mÆ
, 
dt
 );

199 
	}
}

209 
	gCﬁlisi⁄Pùñöe
::
	$≠∂y_åüngÀ_poöt_impul£
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
, 
impul£_magnôude
, 
dt
 )

211 
	`as£π
–!
cﬁlisi⁄
.
m_is_edge_edge
 );

213 
s0
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[0];

214 
s1
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[1];

215 
s2
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[2];

216 
s3
 = 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
[3];

218 
	`as£π
–
s0
 == 1.0 );

220 
Vec4d
 
Æphas
;

221 
Æphas
[0] = 
s0
;

222 
Æphas
[1] = -
s1
;

223 
Æphas
[2] = -
s2
;

224 
Æphas
[3] = -
s3
;

226 
	`≠∂y_impul£
–
Æphas
, 
cﬁlisi⁄
.
m_vîãx_ödi˚s
, 
impul£_magnôude
, cﬁlisi⁄.
m_n‹mÆ
, 
dt
 );

228 
	}
}

237 
	gCﬁlisi⁄Pùñöe
::
	$add_åüngÀ_ˇndid©es
(
size_t
 
t
,

238 
boﬁ
 
ªtu∫_sﬁid
,

239 
boﬁ
 
ªtu∫_dy«mic
,

240 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
)

242 
Vec3d
 
tmö
, 
tmax
;

243 
m_surÁ˚
.
	`åüngÀ_c⁄töuous_bounds
(
t
, 
tmö
, 
tmax
);

245 
°d
::
ve˘‹
<
size_t
> 
ˇndid©e_vîti˚s
;

246 
m_brﬂd_pha£
.
	`gë_pŸítül_vîãx_cﬁlisi⁄s
(
tmö
, 
tmax
, 
ªtu∫_sﬁid
, 
ªtu∫_dy«mic
, 
ˇndid©e_vîti˚s
);

248 
size_t
 
j
 = 0; j < 
ˇndid©e_vîti˚s
.
	`size
(); j++)

250 
cﬁlisi⁄_ˇndid©es
.
	`push_back
–
	`Vec3°
(
t
, 
ˇndid©e_vîti˚s
[
j
], 0) );

253 
	}
}

261 
	gCﬁlisi⁄Pùñöe
::
	$add_edge_ˇndid©es
(
size_t
 
e
,

262 
boﬁ
 
ªtu∫_sﬁid
,

263 
boﬁ
 
ªtu∫_dy«mic
,

264 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 )

266 
Vec3d
 
emö
, 
emax
;

267 
m_surÁ˚
.
	`edge_c⁄töuous_bounds
(
e
, 
emö
, 
emax
);

269 
°d
::
ve˘‹
<
size_t
> 
ˇndid©e_edges
;

270 
m_brﬂd_pha£
.
	`gë_pŸítül_edge_cﬁlisi⁄s
(
emö
, 
emax
, 
ªtu∫_sﬁid
, 
ªtu∫_dy«mic
, 
ˇndid©e_edges
);

272 
size_t
 
j
 = 0; j < 
ˇndid©e_edges
.
	`size
(); j++)

274 
cﬁlisi⁄_ˇndid©es
.
	`push_back
–
	`Vec3°
(
e
, 
ˇndid©e_edges
[
j
], 1) );

276 
	}
}

284 
	gCﬁlisi⁄Pùñöe
::
	$add_poöt_ˇndid©es
(
size_t
 
v
,

285 
boﬁ
 
ªtu∫_sﬁid
,

286 
boﬁ
 
ªtu∫_dy«mic
,

287 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 )

289 
Vec3d
 
vmö
, 
vmax
;

290 
m_surÁ˚
.
	`vîãx_c⁄töuous_bounds
(
v
, 
vmö
, 
vmax
);

292 
°d
::
ve˘‹
<
size_t
> 
ˇndid©e_åüngÀs
;

293 
m_brﬂd_pha£
.
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
(
vmö
, 
vmax
, 
ªtu∫_sﬁid
, 
ªtu∫_dy«mic
, 
ˇndid©e_åüngÀs
);

295 
size_t
 
j
 = 0; j < 
ˇndid©e_åüngÀs
.
	`size
(); j++)

297 
cﬁlisi⁄_ˇndid©es
.
	`push_back
–
	`Vec3°
(
ˇndid©e_åüngÀs
[
j
], 
v
, 0) );

299 
	}
}

307 
	gCﬁlisi⁄Pùñöe
::
	$add_poöt_upd©e_ˇndid©es
(
size_t
 
v
,

308 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
)

313 i‡–
m_surÁ˚
.
	`vîãx_is_sﬁid
(
v
) ) { ; }

315 
	`add_poöt_ˇndid©es
(
v
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
);

317 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
 = 
m_surÁ˚
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
];

318 
°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_surÁ˚
.
m_mesh
.
m_vîãx_to_edge_m≠
[
v
];

320 
size_t
 
i
 = 0; i < 
öcidít_åüngÀs
.
	`size
(); i++)

322 
	`add_åüngÀ_ˇndid©es
(
öcidít_åüngÀs
[
i
], 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
);

325 
size_t
 
i
 = 0; i < 
öcidít_edges
.
	`size
(); i++)

327 
	`add_edge_ˇndid©es
(
öcidít_edges
[
i
], 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
);

330 
	}
}

341 
	gCﬁlisi⁄Pùñöe
::
	$¥o˚ss_¥oximôy_ˇndid©es
(
dt
,

342 
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
 )

345 c⁄° 
k
 = 10.0;

347  
Ál£
 =
ˇndid©es
.
	`em±y
() )

349 
Cﬁlisi⁄C™did©eSë
::
ôî©‹
 
ôî
 = 
ˇndid©es
.
	`begö
();

350 
Vec3°
 
ˇndid©e
 = *
ôî
;

351 
ˇndid©es
.
	`îa£
(
ôî
);

353 i‡–
ˇndid©e
[2] == 1 )

357 
Vec2°
 
e0
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
ˇndid©e
[0]];

358 
Vec2°
 
e1
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
ˇndid©e
[1]];

360 i‡(
e0
[0] ==É0[1]) { ; }

361 i‡(
e1
[0] ==É1[1]) { ; }

363 i‡–
e0
[0] !
e1
[0] &&É0[0] !=É1[1] &&É0[1] !=É1[0] &&É0[1] !=É1[1] )

365 
di°™˚
, 
s0
, 
s2
;

366 
Vec3d
 
n‹mÆ
;

368 
	`check_edge_edge_¥oximôy
(
m_surÁ˚
.
	`gë_posôi⁄
–
e0
[0] ),

369 
m_surÁ˚
.
	`gë_posôi⁄
–
e0
[1] ),

370 
m_surÁ˚
.
	`gë_posôi⁄
–
e1
[0] ),

371 
m_surÁ˚
.
	`gë_posôi⁄
–
e1
[1] ),

372 
di°™˚
, 
s0
, 
s2
, 
n‹mÆ
 );

374 i‡(
di°™˚
 < 
m_surÁ˚
.
m_¥oximôy_ïsû⁄
)

377 
ªlvñ
 = 
	`dŸ
–
n‹mÆ
,

378 
s0
 * 
m_surÁ˚
.
m_vñocôõs
[
e0
[0]] +

379 (1.0 - 
s0
Ë* 
m_surÁ˚
.
m_vñocôõs
[
e0
[1]] -

380 
s2
 * 
m_surÁ˚
.
m_vñocôõs
[
e1
[0]] -

381 (1.0 - 
s2
Ë* 
m_surÁ˚
.
m_vñocôõs
[
e1
[1]] );

383 
Vec3d
 
diff
 = 
s0
 * 
m_surÁ˚
.
	`gë_posôi⁄
(
e0
[0]) +

384 (1.0 - 
s0
Ë* 
m_surÁ˚
.
	`gë_posôi⁄
(
e0
[1]) -

385 
s2
 * 
m_surÁ˚
.
	`gë_posôi⁄
(
e1
[0]) -

386 (1.0 - 
s2
Ë* 
m_surÁ˚
.
	`gë_posôi⁄
(
e1
[1]);

388 i‡–
	`dŸ
–
n‹mÆ
, 
diff
 ) < 0.0 )

393 
d
 = 
m_surÁ˚
.
m_¥oximôy_ïsû⁄
 - 
di°™˚
;

395 i‡(
ªlvñ
 > 0.1 * 
d
 / 
dt
 )

400 
impul£1
 = 
	`max
–0.0, 0.1 * 
d
 / 
dt
 - 
ªlvñ
 );

402 
impul£2
 = 
dt
 * 
k
 * 
d
;

404 
impul£
 = 
	`mö
–
impul£1
, 
impul£2
 );

406 
Cﬁlisi⁄
 
	`¥oximôy
–
åue
,

407 
	`Vec4°
–
e0
[0],É0[1], 
e1
[0],É1[1] ),

408 
n‹mÆ
,

409 
	`Vec4d
–
s0
, 1.0-s0, 
s2
, 1.0-s2 ),

410 
dt
 * 
ªlvñ
 );

412 
	`≠∂y_edge_edge_impul£
–
¥oximôy
, 
impul£
, 
dt
 );

422 
size_t
 
t
 = 
ˇndid©e
[0];

423 c⁄° 
Vec3°
& 
åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
(
t
);

424 
size_t
 
v
 = 
ˇndid©e
[1];

426 i‡–
åi
[0] !
v
 &&Åri[1] != v &&Åri[2] != v )

428 
di°™˚
, 
s1
, 
s2
, 
s3
;

429 
Vec3d
 
n‹mÆ
;

431 
	`check_poöt_åüngÀ_¥oximôy
–
m_surÁ˚
.
	`gë_posôi⁄
(
v
),

432 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[0]),

433 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[1]),

434 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[2]),

435 
di°™˚
, 
s1
, 
s2
, 
s3
, 
n‹mÆ
 );

437 i‡–
di°™˚
 < 
m_surÁ˚
.
m_¥oximôy_ïsû⁄
 )

440 
ªlvñ
 = 
	`dŸ
(
n‹mÆ
,

441 
m_surÁ˚
.
m_vñocôõs
[
v
] -

442 –
s1
 * 
m_surÁ˚
.
m_vñocôõs
[
åi
[0]] +

443 
s2
 * 
m_surÁ˚
.
m_vñocôõs
[
åi
[1]] +

444 
s3
 * 
m_surÁ˚
.
m_vñocôõs
[
åi
[2]] ) );

446 
Vec3d
 
diff
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
v
) -

447 –
s1
 * 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[0]) +

448 
s2
 * 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[1]) +

449 
s3
 * 
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[2]) );

451 i‡–
	`dŸ
–
n‹mÆ
, 
diff
 ) < 0.0 )

456 
d
 = 
m_surÁ˚
.
m_¥oximôy_ïsû⁄
 - 
di°™˚
;

458 i‡(
ªlvñ
 > 0.1 * 
d
 / 
dt
 )

463 
impul£1
 = 
	`max
–0.0, 0.1 * 
d
 / 
dt
 - 
ªlvñ
 );

465 
impul£2
 = 
dt
 * 
k
 * 
d
;

467 
impul£
 = 
	`mö
–
impul£1
, 
impul£2
 );

469 
Cﬁlisi⁄
 
	`¥oximôy
–
Ál£
,

470 
	`Vec4°
–
v
, 
åi
[0],Åri[1],Åri[2] ),

471 
n‹mÆ
,

472 
	`Vec4d
–1.0, 
s1
, 
s2
, 
s3
 ),

473 
dt
 * 
ªlvñ
 );

475 
	`≠∂y_åüngÀ_poöt_impul£
–
¥oximôy
, 
impul£
, 
dt
 );

482 
	}
}

486 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_poöt_vs_sﬁid_åüngÀ_¥oximôõs
(
dt
)

490 
Cﬁlisi⁄C™did©eSë
 
poöt_cﬁlisi⁄_ˇndid©es
;

492  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
	`gë_num_vîti˚s
(); ++i )

494 i‡–
m_surÁ˚
.
	`vîãx_is_sﬁid
–
i
 ) )

500 
	`add_poöt_ˇndid©es
–
i
, 
åue
, 
Ál£
, 
poöt_cﬁlisi⁄_ˇndid©es
 );

503 
	`¥o˚ss_¥oximôy_ˇndid©es
–
dt
, 
poöt_cﬁlisi⁄_ˇndid©es
 );

505 
	}
}

509 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_åüngÀ_vs_Æl_poöt_¥oximôõs
(
dt
)

512 
Cﬁlisi⁄C™did©eSë
 
åüngÀ_cﬁlisi⁄_ˇndid©es
;

514  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
m_mesh
.
	`num_åüngÀs
(); ++i )

516 i‡–
m_surÁ˚
.
	`åüngÀ_is_sﬁid
–
i
 ) )

523 
	`add_åüngÀ_ˇndid©es
–
i
, 
åue
,Årue, 
åüngÀ_cﬁlisi⁄_ˇndid©es
 );

526 
	`¥o˚ss_¥oximôy_ˇndid©es
–
dt
, 
åüngÀ_cﬁlisi⁄_ˇndid©es
 );

528 
	}
}

533 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_edge_vs_Æl_edge_¥oximôõs
(
dt
)

536 
Cﬁlisi⁄C™did©eSë
 
edge_cﬁlisi⁄_ˇndid©es
;

538  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
m_mesh
.
m_edges
.
	`size
(); ++i )

540 i‡–
m_surÁ˚
.
	`edge_is_sﬁid
–
i
 ) )

546 
	`add_edge_ˇndid©es
–
i
, 
åue
,Årue, 
edge_cﬁlisi⁄_ˇndid©es
);

549 
	`¥o˚ss_¥oximôy_ˇndid©es
–
dt
, 
edge_cﬁlisi⁄_ˇndid©es
 );

551 
	}
}

555 
	gCﬁlisi⁄Pùñöe
::
	$h™dÀ_¥oximôõs
(
dt
)

560 
	`dy«mic_poöt_vs_sﬁid_åüngÀ_¥oximôõs
–
dt
 );

565 
	`dy«mic_åüngÀ_vs_Æl_poöt_¥oximôõs
–
dt
 );

570 
	`dy«mic_edge_vs_Æl_edge_¥oximôõs
–
dt
 );

572 
	}
}

582 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$dëe˘_£gmít_£gmít_cﬁlisi⁄
–c⁄° 
Vec3°
& 
ˇndid©e
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 )

585 
	`as£π
–
ˇndid©e
[2] == 1 );

587 
Vec2°
 
e0
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
ˇndid©e
[0]];

588 
Vec2°
 
e1
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
ˇndid©e
[1]];

590 i‡(
e0
[0] =e0[1]Ë{  
Ál£
; }

591 i‡(
e1
[0] =e1[1]Ë{  
Ál£
; }

593 i‡–
e0
[0] =
e1
[0] ||É0[0] ==É1[1] ||É0[1] ==É1[0] ||É0[1] ==É1[1] )

595  
Ál£
;

598 i‡(
e0
[1] <É0[0]Ë{ 
	`sw≠
(e0[0],É0[1]); }

599 i‡(
e1
[1] <É1[0]Ë{ 
	`sw≠
(e1[0],É1[1]); }

602 i‡–
m_surÁ˚
.
	`edge_is_sﬁid
–
ˇndid©e
[0] ) && m_surface.edge_is_solid( candidate[1] ) )

604  
Ál£
;

607 
s0
, 
s2
, 
ªl_di•
;

608 
Vec3d
 
n‹mÆ
;

610 
size_t
 
a
 = 
e0
[0];

611 
size_t
 
b
 = 
e0
[1];

612 
size_t
 
c
 = 
e1
[0];

613 
size_t
 
d
 = 
e1
[1];

615 i‡(
	`£gmít_£gmít_cﬁlisi⁄
(
m_surÁ˚
.
	`gë_posôi⁄
(
a
), m_surÁ˚.
	`gë_√wposôi⁄
(a),á,

616 
m_surÁ˚
.
	`gë_posôi⁄
(
b
), m_surÁ˚.
	`gë_√wposôi⁄
(b), b,

617 
m_surÁ˚
.
	`gë_posôi⁄
(
c
), m_surÁ˚.
	`gë_√wposôi⁄
(c), c,

618 
m_surÁ˚
.
	`gë_posôi⁄
(
d
), m_surÁ˚.
	`gë_√wposôi⁄
(d), d,

619 
s0
, 
s2
, 
n‹mÆ
, 
ªl_di•
) )

621 
cﬁlisi⁄
 = 
	`Cﬁlisi⁄
–
åue
, 
	`Vec4°
–
a
,
b
,
c
,
d
 ), 
n‹mÆ
, 
	`Vec4d
–
s0
, (1-s0), 
s2
, (1-s2Ë), 
ªl_di•
 );

622  
åue
;

625  
Ál£
;

627 
	}
}

632 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$dëe˘_poöt_åüngÀ_cﬁlisi⁄
–c⁄° 
Vec3°
& 
ˇndid©e
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 )

634 
	`as£π
–
ˇndid©e
[2] == 0 );

636 
size_t
 
t
 = 
ˇndid©e
[0];

637 c⁄° 
Vec3°
& 
åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
ˇndid©e
[0] );

638 
size_t
 
v
 = 
ˇndid©e
[1];

640 i‡–
åi
[0] =
v
 ||Åri[1] == v ||Åri[2] == v )

642  
Ál£
;

646 i‡–
m_surÁ˚
.
	`åüngÀ_is_sﬁid
–
t
 ) && m_surÁ˚.
	`vîãx_is_sﬁid
–
v
 ) )

648  
Ál£
;

651 
s1
, 
s2
, 
s3
, 
ªl_di•
;

652 
Vec3d
 
n‹mÆ
;

653 
Vec3°
 
s‹ãd_åi
 = 
	`s‹t_åüngÀ
(
åi
);

655 i‡–
	`poöt_åüngÀ_cﬁlisi⁄
(
m_surÁ˚
.
	`gë_posôi⁄
(
v
), m_surÁ˚.
	`gë_√wposôi⁄
(v), v,

656 
m_surÁ˚
.
	`gë_posôi⁄
(
s‹ãd_åi
[0]), m_surÁ˚.
	`gë_√wposôi⁄
(sorted_tri[0]), sorted_tri[0],

657 
m_surÁ˚
.
	`gë_posôi⁄
(
s‹ãd_åi
[1]), m_surÁ˚.
	`gë_√wposôi⁄
(sorted_tri[1]), sorted_tri[1],

658 
m_surÁ˚
.
	`gë_posôi⁄
(
s‹ãd_åi
[2]), m_surÁ˚.
	`gë_√wposôi⁄
(sorted_tri[2]), sorted_tri[2],

659 
s1
, 
s2
, 
s3
, 
n‹mÆ
, 
ªl_di•
) )

662 
cﬁlisi⁄
 = 
	`Cﬁlisi⁄
–
Ál£
, 
	`Vec4°
–
v
, 
s‹ãd_åi
[0], s‹ãd_åi[1], s‹ãd_åi[2] ), 
n‹mÆ
, 
	`Vec4d
–1, 
s1
, 
s2
, 
s3
 ), 
ªl_di•
 );

663  
åue
;

666  
Ál£
;

668 
	}
}

672 
	gCﬁlisi⁄Pùñöe
::
	$¥o˚ss_cﬁlisi⁄_ˇndid©es
(
dt
,

673 
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
,

674 
boﬁ
 
add_to_√w_ˇndid©es
,

675 
Cﬁlisi⁄C™did©eSë
& 
√w_ˇndid©es
,

676 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 )

679 
size_t
 
max_ôî©i⁄
 = 5 * 
ˇndid©es
.
	`size
();

680 
size_t
 
i
 = 0;

682 c⁄° 
size_t
 
MAX_CANDIDATES
 = 1000000;

684  
Ál£
 =
ˇndid©es
.
	`em±y
(Ë&& 
i
++ < 
max_ôî©i⁄
 )

686 
Cﬁlisi⁄C™did©eSë
::
ôî©‹
 
ôî
 = 
ˇndid©es
.
	`begö
();

687 
Vec3°
 
ˇndid©e
 = *
ôî
;

688 
ˇndid©es
.
	`îa£
(
ôî
);

690 i‡–
ˇndid©e
[2] == 1 )

693 
Cﬁlisi⁄
 
cﬁlisi⁄
;

694 i‡–
	`dëe˘_£gmít_£gmít_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

696 
ªlvñ
 = 
cﬁlisi⁄
.
m_ªœtive_di•œ˚mít
 / 
dt
;

697 
desúed_ªœtive_vñocôy
 = 0.0;

698 
impul£
 = 
IMPULSE_MULTIPLIER
 * (
desúed_ªœtive_vñocôy
 - 
ªlvñ
);

699 
	`≠∂y_edge_edge_impul£
–
cﬁlisi⁄
, 
impul£
, 
dt
 );

701 
°©us
.
cﬁlisi⁄_found
 = 
åue
;

703 i‡–
√w_ˇndid©es
.
	`size
(Ë> 
MAX_CANDIDATES
 )

705 
°©us
.
ovîÊow
 = 
åue
;

708 i‡–!
°©us
.
ovîÊow
 && 
add_to_√w_ˇndid©es
 )

710 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[0], 
√w_ˇndid©es
);

711 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[1], 
√w_ˇndid©es
);

712 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[2], 
√w_ˇndid©es
);

713 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[3], 
√w_ˇndid©es
);

721 
Cﬁlisi⁄
 
cﬁlisi⁄
;

722 i‡–
	`dëe˘_poöt_åüngÀ_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

724 
ªlvñ
 = 
cﬁlisi⁄
.
m_ªœtive_di•œ˚mít
 / 
dt
;

725 
desúed_ªœtive_vñocôy
 = 0.0;

726 
impul£
 = 
IMPULSE_MULTIPLIER
 * (
desúed_ªœtive_vñocôy
 - 
ªlvñ
);

727 
	`≠∂y_åüngÀ_poöt_impul£
–
cﬁlisi⁄
, 
impul£
, 
dt
 );

729 
°©us
.
cﬁlisi⁄_found
 = 
åue
;

731 i‡–
√w_ˇndid©es
.
	`size
(Ë> 
MAX_CANDIDATES
 )

733 
°©us
.
ovîÊow
 = 
åue
;

736 i‡–!
°©us
.
ovîÊow
 && 
add_to_√w_ˇndid©es
 )

738 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[0], 
√w_ˇndid©es
);

739 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[1], 
√w_ˇndid©es
);

740 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[2], 
√w_ˇndid©es
);

741 
	`add_poöt_upd©e_ˇndid©es
–
cﬁlisi⁄
.
m_vîãx_ödi˚s
[3], 
√w_ˇndid©es
);

748 i‡–
m_surÁ˚
.
m_vîbo£
 && 
max_ôî©i⁄
 > 0 && 
i
 >= max_iteration )

750 
°d
::
cout
 << "Cﬁlisi⁄Pùñöe::¥o˚ss_cﬁlisi⁄_ˇndid©es: max_ôî©i⁄Ñóched" << std::
ídl
;

753 
°©us
.
Æl_ˇndid©es_¥o˚s£d
 = 
ˇndid©es
.
	`em±y
();

755 
	}
}

759 
	gCﬁlisi⁄Pùñöe
::
ã°_cﬁlisi⁄_ˇndid©es
(
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
,

760 
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
,

761 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 )

764 c⁄° 
size_t
 
	gMAX_COLLISIONS
 = 5000;

766  
	gÁl£
 =
ˇndid©es
.
em±y
() )

768 
Cﬁlisi⁄C™did©eSë
::
ôî©‹
 
ôî
 = 
ˇndid©es
.
begö
();

769 
Vec3°
 
	gˇndid©e
 = *
ôî
;

770 
	gˇndid©es
.
îa£
(
ôî
);

772 i‡–
	gˇndid©e
[2] == 1 )

775 
Cﬁlisi⁄
 
cﬁlisi⁄
;

776 i‡–
dëe˘_£gmít_£gmít_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

778 
	g°©us
.
	gcﬁlisi⁄_found
 = 
åue
;

780 
	gcﬁlisi⁄s
.
push_back
–
cﬁlisi⁄
 );

782 i‡–
	gcﬁlisi⁄s
.
size
(Ë> 
	gMAX_COLLISIONS
 )

784 
	g°©us
.
	govîÊow
 = 
åue
;

785 
	g°©us
.
	gÆl_ˇndid©es_¥o˚s£d
 = 
Ál£
;

795 
Cﬁlisi⁄
 
	gcﬁlisi⁄
;

796 i‡–
dëe˘_poöt_åüngÀ_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

798 
	g°©us
.
	gcﬁlisi⁄_found
 = 
åue
;

800 
	gcﬁlisi⁄s
.
push_back
–
cﬁlisi⁄
 );

802 i‡–
	gcﬁlisi⁄s
.
size
(Ë> 
	gMAX_COLLISIONS
 )

804 
	g°©us
.
	govîÊow
 = 
åue
;

805 
	g°©us
.
	gÆl_ˇndid©es_¥o˚s£d
 = 
Ál£
;

814 
	g°©us
.
	gÆl_ˇndid©es_¥o˚s£d
 = 
åue
;

816 
as£π
–
°©us
.
Æl_ˇndid©es_¥o˚s£d
 =!°©us.
ovîÊow
 );

822 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$™y_cﬁlisi⁄
–
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 )

825 
Cﬁlisi⁄C™did©eSë
::
ôî©‹
 
ôî
 = 
ˇndid©es
.
	`begö
();

827  ; 
ôî
 !
ˇndid©es
.
	`íd
(); ++iter )

830 
Vec3°
 
ˇndid©e
 = *
ôî
;

832 i‡–
ˇndid©e
[2] == 1 )

835 i‡–
	`dëe˘_£gmít_£gmít_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

837  
åue
;

843 i‡–
	`dëe˘_poöt_åüngÀ_cﬁlisi⁄
–
ˇndid©e
, 
cﬁlisi⁄
 ) )

845  
åue
;

850  
Ál£
;

852 
	}
}

857 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_poöt_vs_sﬁid_åüngÀ_cﬁlisi⁄s
(
dt
,

858 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

859 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

860 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 )

864  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
	`gë_num_vîti˚s
(); ++i )

866 i‡–
m_surÁ˚
.
	`vîãx_is_sﬁid
–
i
 ) )

871 
Cﬁlisi⁄C™did©eSë
 
poöt_cﬁlisi⁄_ˇndid©es
;

874 
	`add_poöt_ˇndid©es
–
i
, 
åue
, 
Ál£
, 
poöt_cﬁlisi⁄_ˇndid©es
 );

876 
	`¥o˚ss_cﬁlisi⁄_ˇndid©es
–
dt
,

877 
poöt_cﬁlisi⁄_ˇndid©es
,

878 
cﬁÀ˘_ˇndid©es
,

879 
upd©e_cﬁlisi⁄_ˇndid©es
,

880 
°©us
 );

884 
	}
}

888 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_åüngÀ_vs_Æl_poöt_cﬁlisi⁄s
(
dt
,

889 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

890 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

891 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 )

894  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
m_mesh
.
	`num_åüngÀs
(); ++i )

896 i‡–
m_surÁ˚
.
	`åüngÀ_is_sﬁid
–
i
 ) )

901 
Cﬁlisi⁄C™did©eSë
 
åüngÀ_cﬁlisi⁄_ˇndid©es
;

904 
	`add_åüngÀ_ˇndid©es
–
i
, 
åue
,Årue, 
åüngÀ_cﬁlisi⁄_ˇndid©es
 );

906 
	`¥o˚ss_cﬁlisi⁄_ˇndid©es
–
dt
,

907 
åüngÀ_cﬁlisi⁄_ˇndid©es
,

908 
cﬁÀ˘_ˇndid©es
,

909 
upd©e_cﬁlisi⁄_ˇndid©es
,

910 
°©us
 );

914 
	}
}

919 
	gCﬁlisi⁄Pùñöe
::
	$dy«mic_edge_vs_Æl_edge_cﬁlisi⁄s
(
dt
,

920 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

921 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

922 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 )

926  
size_t
 
i
 = 0; i < 
m_surÁ˚
.
m_mesh
.
m_edges
.
	`size
(); ++i )

928 i‡–
m_surÁ˚
.
	`edge_is_sﬁid
–
i
 ) )

933 
Cﬁlisi⁄C™did©eSë
 
edge_cﬁlisi⁄_ˇndid©es
;

936 
	`add_edge_ˇndid©es
–
i
, 
åue
,Årue, 
edge_cﬁlisi⁄_ˇndid©es
);

938 
	`¥o˚ss_cﬁlisi⁄_ˇndid©es
–
dt
,

939 
edge_cﬁlisi⁄_ˇndid©es
,

940 
cﬁÀ˘_ˇndid©es
,

941 
upd©e_cﬁlisi⁄_ˇndid©es
,

942 
°©us
 );

946 
	}
}

949 
	gnum_exa˘4d_ã°s
;

950 
	gnum_fûãªd_4d_ã°s
;

951 
	gnum_∑øŒñ_ˇ£s
;

955 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$h™dÀ_cﬁlisi⁄s
(
dt
)

958 
boﬁ
 
vîbo£
 = 
m_surÁ˚
.
m_vîbo£
;

960 
num_exa˘4d_ã°s
 = 0;

961 
num_fûãªd_4d_ã°s
 = 0;

962 
num_∑øŒñ_ˇ£s
 = 0;

964 c⁄° 
MAX_PASS
 = 1;

966 
Cﬁlisi⁄C™did©eSë
 
upd©e_cﬁlisi⁄_ˇndid©es
;

970  
∑ss
 = 0;Öas†< 
MAX_PASS
; ++pass )

975 
boﬁ
 
cﬁÀ˘_ˇndid©es
 = ( 
∑ss
 =(
MAX_PASS
-1) );

977 
boﬁ
 
cﬁlisi⁄_found
 = 
Ál£
;

978 
Pro˚ssCﬁlisi⁄Sètus
 
°©us
;

980 
°©us
.
ovîÊow
 = 
Ál£
;

981 
°©us
.
cﬁlisi⁄_found
 = 
Ál£
;

982 
°©us
.
Æl_ˇndid©es_¥o˚s£d
 = 
Ál£
;

986 
	`dy«mic_poöt_vs_sﬁid_åüngÀ_cﬁlisi⁄s
–
dt
,

987 
cﬁÀ˘_ˇndid©es
,

988 
upd©e_cﬁlisi⁄_ˇndid©es
,

989 
°©us
 );

991 
cﬁlisi⁄_found
 |
°©us
.collision_found;

996 
	`dy«mic_åüngÀ_vs_Æl_poöt_cﬁlisi⁄s
–
dt
,

997 
cﬁÀ˘_ˇndid©es
,

998 
upd©e_cﬁlisi⁄_ˇndid©es
,

999 
°©us
 );

1001 
cﬁlisi⁄_found
 |
°©us
.collision_found;

1006 
	`dy«mic_edge_vs_Æl_edge_cﬁlisi⁄s
–
dt
,

1007 
cﬁÀ˘_ˇndid©es
,

1008 
upd©e_cﬁlisi⁄_ˇndid©es
,

1009 
°©us
 );

1011 
cﬁlisi⁄_found
 |
°©us
.collision_found;

1013 i‡–
°©us
.
ovîÊow
 )

1015 i‡–
vîbo£
 )

1017 
°d
::
cout
 << "ovîÊow,Ñëu∫ögÉ¨ly" << std::
ídl
;

1019  
Ál£
;

1022 i‡–!
cﬁlisi⁄_found
 )

1024 i‡–
vîbo£
 )

1026 
°d
::
cout
 << "nÿcﬁlisi⁄ foundÅhi†∑ss,Ñëu∫ögÉ¨ly" << std::
ídl
;

1028  
åue
;

1031 i‡–
vîbo£
 )

1033 
°d
::
cout
 << "cﬁlisi⁄Öas†" << 
∑ss
 << " com∂ëed" << std::
ídl
;

1039 
°d
::
	`s‹t
–
upd©e_cﬁlisi⁄_ˇndid©es
.
	`begö
(), upd©e_cﬁlisi⁄_ˇndid©es.
	`íd
(), 
Cﬁlisi⁄C™did©eSëLT
 );

1040 
Cﬁlisi⁄C™did©eSë
::
ôî©‹
 
√w_íd
 = 
°d
::
	`unique
(
upd©e_cﬁlisi⁄_ˇndid©es
.
	`begö
(), upd©e_cﬁlisi⁄_ˇndid©es.
	`íd
());

1041 
upd©e_cﬁlisi⁄_ˇndid©es
.
	`îa£
(
√w_íd
, upd©e_cﬁlisi⁄_ˇndid©es.
	`íd
());

1044 
Pro˚ssCﬁlisi⁄Sètus
 
°©us
;

1045 
°©us
.
ovîÊow
 = 
Ál£
;

1046 
	`¥o˚ss_cﬁlisi⁄_ˇndid©es
–
dt
, 
upd©e_cﬁlisi⁄_ˇndid©es
, 
åue
, upd©e_cﬁlisi⁄_ˇndid©es, 
°©us
 );

1048 
boﬁ
 
ok
 = 
°©us
.
Æl_ˇndid©es_¥o˚s£d
;

1050 i‡–
m_surÁ˚
.
m_vîbo£
 && !
ok
 )

1052 
°d
::
cout
 << "Didn'àªsﬁvêÆ»cﬁlisi⁄s" << std::
ídl
;

1055 i‡–
°©us
.
ovîÊow
 )

1057 
ok
 = 
Ál£
;

1058 i‡–
m_surÁ˚
.
m_vîbo£
 )

1060 
°d
::
cout
 << "ovîÊowed c™did©êli°" << std::
ídl
;

1064  
ok
;

1066 
	}
}

1071 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
dëe˘_cﬁlisi⁄s
–
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 )

1075 
Cﬁlisi⁄C™did©eSë
 
cﬁlisi⁄_ˇndid©es
;

1079  
size_t
 
	gi
 = 0; i < 
	gm_surÁ˚
.
gë_num_vîti˚s
(); ++i )

1081 i‡–
	gm_surÁ˚
.
vîãx_is_sﬁid
(
i
) )

1087 
add_poöt_ˇndid©es
–
i
, 
åue
, 
Ál£
, 
cﬁlisi⁄_ˇndid©es
 );

1092  
size_t
 
	gi
 = 0; i < 
	gm_surÁ˚
.
	gm_mesh
.
num_åüngÀs
(); ++i )

1094 i‡–
	gm_surÁ˚
.
åüngÀ_is_sﬁid
(
i
) )

1100 
add_åüngÀ_ˇndid©es
–
i
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

1106  
size_t
 
	gi
 = 0; i < 
	gm_surÁ˚
.
	gm_mesh
.
	gm_edges
.
size
(); ++i )

1108 i‡–
	gm_surÁ˚
.
edge_is_sﬁid
(
i
) )

1114 
add_edge_ˇndid©es
–
i
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

1122 
Pro˚ssCﬁlisi⁄Sètus
 
	g°©us
;

1123 
ã°_cﬁlisi⁄_ˇndid©es
–
cﬁlisi⁄_ˇndid©es
,

1124 
cﬁlisi⁄s
,

1125 
°©us
 );

1129 i‡–!
	g°©us
.
	gÆl_ˇndid©es_¥o˚s£d
 )

1131 
as£π
–
°©us
.
ovîÊow
 );

1132  
	gÁl£
;

1135  
	gåue
;

1146 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
dëe˘_√w_cﬁlisi⁄s
–c⁄° 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
im∑˘_z⁄es
, std::ve˘‹<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 )

1150 
°d
::
ve˘‹
<
size_t
> 
z⁄e_vîti˚s
;

1151 
	g°d
::
ve˘‹
<
size_t
> 
z⁄e_edges
;

1152 
	g°d
::
ve˘‹
<
size_t
> 
z⁄e_åüngÀs
;

1156  
size_t
 
	gi
 = 0; i < 
	gim∑˘_z⁄es
.
size
(); ++i )

1158  
size_t
 
	gj
 = 0; j < 
	gim∑˘_z⁄es
[
i
].
	gm_cﬁlisi⁄s
.
size
(); ++j )

1160 
add_unique
–
z⁄e_vîti˚s
, 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
[0] );

1161 
add_unique
–
z⁄e_vîti˚s
, 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
[1] );

1162 
add_unique
–
z⁄e_vîti˚s
, 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
[2] );

1163 
add_unique
–
z⁄e_vîti˚s
, 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
[3] );

1169 c⁄° 
	gN⁄De°ru˘iveTriMesh
& 
	gmesh
 = 
m_surÁ˚
.
m_mesh
;

1171  
size_t
 
	gi
 = 0; i < 
	gz⁄e_vîti˚s
.
size
(); ++i )

1173  
size_t
 
	gj
 = 0; j < 
	gmesh
.
	gm_vîãx_to_åüngÀ_m≠
[
z⁄e_vîti˚s
[
i
]].
size
(); ++j )

1175 
add_unique
–
z⁄e_åüngÀs
, 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
z⁄e_vîti˚s
[
i
]][
j
] );

1181  
size_t
 
	gi
 = 0; i < 
	gz⁄e_vîti˚s
.
size
(); ++i )

1183  
size_t
 
	gj
 = 0; j < 
	gmesh
.
	gm_vîãx_to_edge_m≠
[
z⁄e_vîti˚s
[
i
]].
size
(); ++j )

1185 
add_unique
–
z⁄e_edges
, 
mesh
.
m_vîãx_to_edge_m≠
[
z⁄e_vîti˚s
[
i
]][
j
] );

1189 
Cﬁlisi⁄C™did©eSë
 
	gcﬁlisi⁄_ˇndid©es
;

1194  
size_t
 
	gj
 = 0; j < 
	gz⁄e_vîti˚s
.
size
(); ++j )

1196 
size_t
 
	gvîãx_ödex
 = 
z⁄e_vîti˚s
[
j
];

1199 
add_poöt_ˇndid©es
–
vîãx_ödex
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

1206  
size_t
 
	gj
 = 0; j < 
	gz⁄e_åüngÀs
.
size
(); ++j )

1208 
size_t
 
	gåüngÀ_ödex
 = 
z⁄e_åüngÀs
[
j
];

1211 
add_åüngÀ_ˇndid©es
–
åüngÀ_ödex
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

1218  
size_t
 
	gj
 = 0; j < 
	gz⁄e_edges
.
size
(); ++j )

1220 
size_t
 
	gedge_ödex
 = 
z⁄e_edges
[
j
];

1223 
add_edge_ˇndid©es
–
edge_ödex
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

1231 
Pro˚ssCﬁlisi⁄Sètus
 
	g°©us
;

1232 
	g°©us
.
	govîÊow
 = 
Ál£
;

1234 
ã°_cﬁlisi⁄_ˇndid©es
–
cﬁlisi⁄_ˇndid©es
,

1235 
cﬁlisi⁄s
,

1236 
°©us
 );

1240 i‡–!
	g°©us
.
	gÆl_ˇndid©es_¥o˚s£d
 || sètus.
	govîÊow
 )

1242  
	gÁl£
;

1245  
	gåue
;

1256 
	gCﬁlisi⁄Pùñöe
::
dëe˘_cﬁlisi⁄s
(
size_t
 
edge_ödex
,

1257 
size_t
 
åüngÀ_ödex
,

1258 
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 )

1262 
size_t
 
e0
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
edge_ödex
][0];

1263 
size_t
 
	ge1
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[
edge_ödex
][1];

1264 i‡–
	ge1
 < 
	ge0
 ) { 
sw≠
–
e0
, 
e1
 ); }

1266 
Vec3°
 
	gåi
 = 
m_surÁ˚
.
m_mesh
.
gë_åüngÀ
(
åüngÀ_ödex
);

1267 
	gåi
 = 
s‹t_åüngÀ
–
åi
 );

1269 
size_t
 
	gt0
 = 
åi
[0];

1270 
size_t
 
	gt1
 = 
åi
[1];

1271 
size_t
 
	gt2
 = 
åi
[2];

1273 
	gs0
, 
	gs1
, 
	gs2
, 
	gs3
, 
	gªl_di•
;

1274 
Vec3d
 
	gn‹mÆ
;

1276 
boﬁ
 
sim∂ex_vîbo£
;

1277 
	gsim∂ex_vîbo£
 = 
åue
;

1281 i‡(
£gmít_£gmít_cﬁlisi⁄
(
m_surÁ˚
.
gë_posôi⁄
(
e0
), m_surÁ˚.
gë_√wposôi⁄
(e0),É0,

1282 
m_surÁ˚
.
gë_posôi⁄
(
e1
), m_surÁ˚.
gë_√wposôi⁄
(e1),É1,

1283 
m_surÁ˚
.
gë_posôi⁄
(
t0
), m_surÁ˚.
gë_√wposôi⁄
(t0),Å0,

1284 
m_surÁ˚
.
gë_posôi⁄
(
t1
), m_surÁ˚.
gë_√wposôi⁄
(t1),Å1,

1285 
s0
, 
s2
, 
n‹mÆ
, 
ªl_di•
) )

1288 
Cﬁlisi⁄
 
√w_cﬁlisi⁄
–
åue
, 
Vec4°
–
e0
, 
e1
, 
t0
, 
t1
 ), 
n‹mÆ
, 
Vec4d
–
s0
, (1-s0), 
s2
, (1-s2Ë), 
ªl_di•
 );

1289 
	gcﬁlisi⁄s
.
push_back
–
√w_cﬁlisi⁄
 );

1291 
size_t
 
	gedge1
 = 
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
t0
, 
t1
 );

1292 
as£π
–
edge1
 < 
m_surÁ˚
.
m_mesh
.
m_edges
.
size
() );

1293 
Vec3°
 
check_ˇndid©e
–
edge_ödex
, 
edge1
, 1 );

1294 
Cﬁlisi⁄
 
	gcheck_cﬁlisi⁄
;

1295 
boﬁ
 
	gcheck_hô
 = 
dëe˘_£gmít_£gmít_cﬁlisi⁄
–
check_ˇndid©e
, 
check_cﬁlisi⁄
 );

1296 
as£π
–
check_hô
 );

1302 i‡(
£gmít_£gmít_cﬁlisi⁄
(
m_surÁ˚
.
gë_posôi⁄
(
e0
), m_surÁ˚.
gë_√wposôi⁄
(e0),É0,

1303 
m_surÁ˚
.
gë_posôi⁄
(
e1
), m_surÁ˚.
gë_√wposôi⁄
(e1),É1,

1304 
m_surÁ˚
.
gë_posôi⁄
(
t1
), m_surÁ˚.
gë_√wposôi⁄
(t1),Å1,

1305 
m_surÁ˚
.
gë_posôi⁄
(
t2
), m_surÁ˚.
gë_√wposôi⁄
(t2),Å2,

1306 
s0
, 
s2
, 
n‹mÆ
, 
ªl_di•
) )

1309 
Cﬁlisi⁄
 
√w_cﬁlisi⁄
–
åue
, 
Vec4°
–
e0
, 
e1
, 
t1
, 
t2
 ), 
n‹mÆ
, 
Vec4d
–
s0
, (1-s0), 
s2
, (1-s2Ë), 
ªl_di•
 );

1310 
	gcﬁlisi⁄s
.
push_back
–
√w_cﬁlisi⁄
 );

1312 
size_t
 
	gedge1
 = 
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
t1
, 
t2
 );

1313 
as£π
–
edge1
 < 
m_surÁ˚
.
m_mesh
.
m_edges
.
size
() );

1314 
Vec3°
 
check_ˇndid©e
–
edge_ödex
, 
edge1
, 1 );

1315 
Cﬁlisi⁄
 
	gcheck_cﬁlisi⁄
;

1316 
boﬁ
 
	gcheck_hô
 = 
dëe˘_£gmít_£gmít_cﬁlisi⁄
–
check_ˇndid©e
, 
check_cﬁlisi⁄
 );

1317 
as£π
–
check_hô
 );

1325 i‡(
£gmít_£gmít_cﬁlisi⁄
(
m_surÁ˚
.
gë_posôi⁄
(
e0
), m_surÁ˚.
gë_√wposôi⁄
(e0),É0,

1326 
m_surÁ˚
.
gë_posôi⁄
(
e1
), m_surÁ˚.
gë_√wposôi⁄
(e1),É1,

1327 
m_surÁ˚
.
gë_posôi⁄
(
t0
), m_surÁ˚.
gë_√wposôi⁄
(t0),Å0,

1328 
m_surÁ˚
.
gë_posôi⁄
(
t2
), m_surÁ˚.
gë_√wposôi⁄
(t2),Å2,

1329 
s0
, 
s2
, 
n‹mÆ
, 
ªl_di•
) )

1332 
Cﬁlisi⁄
 
√w_cﬁlisi⁄
–
åue
, 
Vec4°
–
e0
, 
e1
, 
t2
, 
t0
 ), 
n‹mÆ
, 
Vec4d
–
s0
, (1-s0), 
s2
, (1-s2Ë), 
ªl_di•
 );

1333 
	gcﬁlisi⁄s
.
push_back
–
√w_cﬁlisi⁄
 );

1335 
size_t
 
	gedge1
 = 
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
t2
, 
t0
 );

1336 
as£π
–
edge1
 < 
m_surÁ˚
.
m_mesh
.
m_edges
.
size
() );

1337 
Vec3°
 
check_ˇndid©e
–
edge_ödex
, 
edge1
, 1 );

1338 
Cﬁlisi⁄
 
	gcheck_cﬁlisi⁄
;

1339 
boﬁ
 
	gcheck_hô
 = 
dëe˘_£gmít_£gmít_cﬁlisi⁄
–
check_ˇndid©e
, 
check_cﬁlisi⁄
 );

1340 
as£π
–
check_hô
 );

1346 i‡–
poöt_åüngÀ_cﬁlisi⁄
(
m_surÁ˚
.
gë_posôi⁄
(
e0
), m_surÁ˚.
gë_√wposôi⁄
(e0),É0,

1347 
m_surÁ˚
.
gë_posôi⁄
(
t0
), m_surÁ˚.
gë_√wposôi⁄
(t0),Å0,

1348 
m_surÁ˚
.
gë_posôi⁄
(
t1
), m_surÁ˚.
gë_√wposôi⁄
(t1),Å1,

1349 
m_surÁ˚
.
gë_posôi⁄
(
t2
), m_surÁ˚.
gë_√wposôi⁄
(t2),Å2,

1350 
s1
, 
s2
, 
s3
, 
n‹mÆ
, 
ªl_di•
) )

1352 
Cﬁlisi⁄
 
√w_cﬁlisi⁄
–
Ál£
, 
Vec4°
–
e0
, 
t0
, 
t1
, 
t2
 ), 
n‹mÆ
, 
Vec4d
–1.0, 
s1
, 
s2
, 
s3
 ), 
ªl_di•
 );

1353 
	gcﬁlisi⁄s
.
push_back
–
√w_cﬁlisi⁄
 );

1358 i‡–
poöt_åüngÀ_cﬁlisi⁄
(
m_surÁ˚
.
gë_posôi⁄
(
e1
), m_surÁ˚.
gë_√wposôi⁄
(e1),É1,

1359 
m_surÁ˚
.
gë_posôi⁄
(
t0
), m_surÁ˚.
gë_√wposôi⁄
(t0),Å0,

1360 
m_surÁ˚
.
gë_posôi⁄
(
t1
), m_surÁ˚.
gë_√wposôi⁄
(t1),Å1,

1361 
m_surÁ˚
.
gë_posôi⁄
(
t2
), m_surÁ˚.
gë_√wposôi⁄
(t2),Å2,

1362 
s1
, 
s2
, 
s3
, 
n‹mÆ
, 
ªl_di•
) )

1364 
Cﬁlisi⁄
 
√w_cﬁlisi⁄
–
Ál£
, 
Vec4°
–
e1
, 
t0
, 
t1
, 
t2
 ), 
n‹mÆ
, 
Vec4d
–1.0, 
s1
, 
s2
, 
s3
 ), 
ªl_di•
 );

1365 
	gcﬁlisi⁄s
.
push_back
–
√w_cﬁlisi⁄
 );

1368 
	gsim∂ex_vîbo£
 = 
Ál£
;

1372  
size_t
 
	gi
 = 0; i < 
	gcﬁlisi⁄s
.
size
(); ++i )

1374 
	gCﬁlisi⁄
& 
	gcﬁl
 = 
cﬁlisi⁄s
[
i
];

1376 
	g°d
::
cout
 << "\¿=======Cﬁlisi⁄: is_edge_edge: " << 
cﬁl
.
m_is_edge_edge
 << ", indi˚s: " << cﬁl.
m_vîãx_ödi˚s
 << 
°d
::
ídl
;

1378 i‡–
	gcﬁl
.
	gm_is_edge_edge
 )

1381 
size_t
 
	gedge0
 = 
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
cﬁl
.
m_vîãx_ödi˚s
[0], coll.m_vertex_indices[1] );

1382 
	g°d
::
cout
 << "edge0: " << 
edge0
 << 
°d
::
ídl
;

1384 
size_t
 
	gedge1
 = 
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
cﬁl
.
m_vîãx_ödi˚s
[2], coll.m_vertex_indices[3] );

1385 
	g°d
::
cout
 << "edge1: " << 
edge1
 << 
°d
::
ídl
;

1387 
Vec3°
 
check_ˇndid©e
–
edge0
, 
edge1
, 1 );

1388 
Cﬁlisi⁄
 
	gcheck_cﬁlisi⁄
;

1389 
boﬁ
 
	gcheck_hô
 = 
dëe˘_£gmít_£gmít_cﬁlisi⁄
–
check_ˇndid©e
, 
check_cﬁlisi⁄
 );

1390 
as£π
–
check_hô
 );

1393 
Cﬁlisi⁄C™did©eSë
 
	gcﬁlisi⁄_ˇndid©es0
;

1394 
add_edge_ˇndid©es
–
edge0
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es0
 );

1395 
boﬁ
 
	gedge1_found
 = 
Ál£
;

1396  
size_t
 
	gj
 = 0; j < 
	gcﬁlisi⁄_ˇndid©es0
.
size
(); ++j )

1398 i‡–
	gcﬁlisi⁄_ˇndid©es0
[
j
][0] =
edge1
 || 
cﬁlisi⁄_ˇndid©es0
[j][1] ==Édge1 )

1400 
edge1_found
 = 
åue
;

1404 i‡–!
	gedge1_found
 ) { 
	g°d
::
cout
 << "brﬂdpha£ didn'àfödÉdgê" << 
edge1
 << 
°d
::
ídl
; }

1406 
Cﬁlisi⁄C™did©eSë
 
	gcﬁlisi⁄_ˇndid©es1
;

1407 
add_edge_ˇndid©es
–
edge1
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es1
 );

1408 
boﬁ
 
	gedge0_found
 = 
Ál£
;

1409  
size_t
 
	gj
 = 0; j < 
	gcﬁlisi⁄_ˇndid©es1
.
size
(); ++j )

1411 i‡–
	gcﬁlisi⁄_ˇndid©es1
[
j
][0] =
edge0
 || 
cﬁlisi⁄_ˇndid©es1
[j][1] ==Édge0 )

1413 
edge0_found
 = 
åue
;

1417 i‡–!
	gedge0_found
 ) { 
	g°d
::
cout
 << "brﬂdpha£ didn'àfödÉdgê" << 
edge0
 << 
°d
::
ídl
; }

1422 
size_t
 
	gvît
 = 
cﬁl
.
m_vîãx_ödi˚s
[0];

1423 
size_t
 
	gcﬁlisi⁄_åi
 = 
m_surÁ˚
.
m_mesh
.
gë_åüngÀ_ödex
–
cﬁl
.
m_vîãx_ödi˚s
[1], coll.m_vertex_indices[2], coll.m_vertex_indices[3] );

1425 
Cﬁlisi⁄C™did©eSë
 
	gv_cﬁlisi⁄_ˇndid©es
;

1426 
add_poöt_ˇndid©es
–
vît
, 
åue
,Årue, 
v_cﬁlisi⁄_ˇndid©es
 );

1427 
boﬁ
 
	gåi_found
 = 
Ál£
;

1428  
size_t
 
	gj
 = 0; j < 
	gv_cﬁlisi⁄_ˇndid©es
.
size
(); ++j )

1430 i‡–
	gv_cﬁlisi⁄_ˇndid©es
[
j
][0] =
cﬁlisi⁄_åi
 || 
v_cﬁlisi⁄_ˇndid©es
[j][1] == collision_tri )

1432 
åi_found
 = 
åue
;

1436 i‡–!
	gåi_found
 ) { 
	g°d
::
cout
 << "brﬂdpha£ didn'àfödÅrò" << 
cﬁlisi⁄_åi
 << 
°d
::
ídl
; }

1438 
Cﬁlisi⁄C™did©eSë
 
	gt_cﬁlisi⁄_ˇndid©es
;

1439 
add_åüngÀ_ˇndid©es
–
cﬁlisi⁄_åi
, 
åue
,Årue, 
t_cﬁlisi⁄_ˇndid©es
 );

1440 
boﬁ
 
	gvît_found
 = 
Ál£
;

1441  
size_t
 
	gj
 = 0; j < 
	gt_cﬁlisi⁄_ˇndid©es
.
size
(); ++j )

1443 i‡–
	gt_cﬁlisi⁄_ˇndid©es
[
j
][0] =
vît
 || 
t_cﬁlisi⁄_ˇndid©es
[j][1] == vert )

1445 
vît_found
 = 
åue
;

1449 i‡–!
	gvît_found
 ) { 
	g°d
::
cout
 << "brﬂdpha£ didn'àföd vîãx " << 
vît
 << 
°d
::
ídl
; }

1461 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$check_if_cﬁlisi⁄_≥rsi°s
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
 )

1463 c⁄° 
Vec4°
& 
vs
 = 
cﬁlisi⁄
.
m_vîãx_ödi˚s
;

1466 i‡–
cﬁlisi⁄
.
m_is_edge_edge
 )

1468  
	`£gmít_£gmít_cﬁlisi⁄
–
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[0]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[0]), vs[0],

1469 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[1]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[1]), vs[1],

1470 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[2]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[2]), vs[2],

1471 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[3]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[3]), vs[3] );

1476  
	`poöt_åüngÀ_cﬁlisi⁄
–
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[0]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[0]), vs[0],

1477 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[1]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[1]), vs[1],

1478 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[2]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[2]), vs[2],

1479 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[3]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[3]), vs[3] );

1483 
	}
}

1493 
	gCﬁlisi⁄Pùñöe
::
gë_åüngÀ_öãr£˘i⁄s
–c⁄° 
Vec3d
& 
£gmít_poöt_a
,

1494 c⁄° 
Vec3d
& 
£gmít_poöt_b
,

1495 
°d
::
ve˘‹
<>& 
hô_ss
,

1496 
°d
::
ve˘‹
<
size_t
>& 
hô_åüngÀs
 ) const

1498 
Vec3d
 
Øbb_low
, 
	gØbb_high
;

1499 
mömax
–
£gmít_poöt_a
, 
£gmít_poöt_b
, 
Øbb_low
, 
Øbb_high
 );

1501 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

1502 
	gm_brﬂd_pha£
.
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1504  
size_t
 
	gi
 = 0; i < 
	govîœµög_åüngÀs
.
size
(); ++i )

1506 c⁄° 
	gVec3°
& 
	gåi
 = 
m_surÁ˚
.
m_mesh
.
gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1508 
Vec3°
 
	gt
 = 
s‹t_åüngÀ
–
åi
 );

1509 
as£π
–
t
[0] <Å[1] &&Å[0] <Å[2] &&Å[1] <Å[2] );

1511 c⁄° 
	gVec3d
& 
	gv0
 = 
m_surÁ˚
.
gë_posôi⁄
–
t
[0] );

1512 c⁄° 
	gVec3d
& 
	gv1
 = 
m_surÁ˚
.
gë_posôi⁄
–
t
[1] );

1513 c⁄° 
	gVec3d
& 
	gv2
 = 
m_surÁ˚
.
gë_posôi⁄
–
t
[2] );

1515 
size_t
 
	gdummy_ödex
 = 
m_surÁ˚
.
gë_num_vîti˚s
();

1517 
	gb¨y1
, 
	gb¨y2
, 
	gb¨y3
;

1518 
Vec3d
 
	gn‹mÆ
;

1519 
	gß
, 
	gsb
;

1521 
boﬁ
 
	ghô
 = 
£gmít_åüngÀ_öãr£˘i⁄
(
£gmít_poöt_a
, 
dummy_ödex
,

1522 
£gmít_poöt_b
, 
dummy_ödex
+1,

1523 
v0
, 
t
[0],

1524 
v1
, 
t
[1],

1525 
v2
, 
t
[2],

1526 
ß
, 
sb
, 
b¨y1
, 
b¨y2
, 
b¨y3
,

1527 
Ál£
, false );

1529 i‡–
	ghô
 )

1531 
	ghô_ss
.
push_back
–
sb
 );

1532 
	ghô_åüngÀs
.
push_back
–
ovîœµög_åüngÀs
[
i
] );

1545 
size_t
 
	gCﬁlisi⁄Pùñöe
::
	$gë_numbî_of_åüngÀ_öãr£˘i⁄s
–c⁄° 
Vec3d
& 
£gmít_poöt_a
,

1546 c⁄° 
Vec3d
& 
£gmít_poöt_b
 ) const

1548 
num_hôs
 = 0;

1549 
num_mis£s
 = 0;

1550 
Vec3d
 
Øbb_low
, 
Øbb_high
;

1551 
	`mömax
–
£gmít_poöt_a
, 
£gmít_poöt_b
, 
Øbb_low
, 
Øbb_high
 );

1553 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

1554 
m_brﬂd_pha£
.
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1556  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

1558 c⁄° 
Vec3°
& 
åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1560 
Vec3°
 
t
 = 
	`s‹t_åüngÀ
–
åi
 );

1561 
	`as£π
–
t
[0] <Å[1] &&Å[0] <Å[2] &&Å[1] <Å[2] );

1563 c⁄° 
Vec3d
& 
v0
 = 
m_surÁ˚
.
	`gë_posôi⁄
–
t
[0] );

1564 c⁄° 
Vec3d
& 
v1
 = 
m_surÁ˚
.
	`gë_posôi⁄
–
t
[1] );

1565 c⁄° 
Vec3d
& 
v2
 = 
m_surÁ˚
.
	`gë_posôi⁄
–
t
[2] );

1567 
size_t
 
dummy_ödex
 = 
m_surÁ˚
.
	`gë_num_vîti˚s
();

1568 c⁄° 
boﬁ
 
degíî©e_cou¡s_as_hô
 = 
åue
;

1570 
boﬁ
 
hô
 = 
	`£gmít_åüngÀ_öãr£˘i⁄
–
£gmít_poöt_a
, 
dummy_ödex
,

1571 
£gmít_poöt_b
, 
dummy_ödex
 + 1,

1572 
v0
, 
t
[0],

1573 
v1
, 
t
[1],

1574 
v2
, 
t
[2],

1575 
degíî©e_cou¡s_as_hô
 );

1577 i‡–
hô
 )

1579 ++
num_hôs
;

1583 ++
num_mis£s
;

1587  
num_hôs
;

1589 
	}
}

1598 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–
size_t
 
åi_ödex
 )

1600  
	`check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
(
åi_ödex
) );

1601 
	}
}

1609 
boﬁ
 
	gCﬁlisi⁄Pùñöe
::
	$check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–c⁄° 
Vec3°
& 
åi
 )

1611 
boﬁ
 
™y_öãr£˘i⁄
 = 
Ál£
;

1613 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

1614 
Vec3d
 
low
, 
high
;

1616 
	`mömax
–
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[0]), m_surÁ˚.gë_posôi⁄—ri[1]), 
low
, 
high
 );

1617 
low
 -
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1618 
high
 +
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1620 
m_surÁ˚
.
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1622  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

1625 c⁄° 
Vec3°
& 
cuº_åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1626 
boﬁ
 
ªsu…
 = 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[0],Åri[1],

1627 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1628 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1629 
Ál£
 );

1631 i‡–
ªsu…
 )

1633 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[0],Åri[1],

1634 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1635 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1636 
åue
 );

1638 
™y_öãr£˘i⁄
 = 
åue
;

1642 
	`mömax
–
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[1]), m_surÁ˚.gë_posôi⁄—ri[2]), 
low
, 
high
 );

1643 
low
 -
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1644 
high
 +
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1646 
ovîœµög_åüngÀs
.
	`˛ór
();

1647 
m_surÁ˚
.
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1649  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

1651 c⁄° 
Vec3°
& 
cuº_åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1653 
boﬁ
 
ªsu…
 = 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[1],Åri[2],

1654 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1655 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1656 
Ál£
 );

1658 i‡–
ªsu…
 )

1660 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[1],Åri[2],

1661 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1662 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1663 
åue
 );

1665 
™y_öãr£˘i⁄
 = 
åue
;

1669 
	`mömax
–
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[2]), m_surÁ˚.gë_posôi⁄—ri[0]), 
low
, 
high
 );

1670 
low
 -
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1671 
high
 +
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1673 
ovîœµög_åüngÀs
.
	`˛ór
();

1674 
m_surÁ˚
.
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1676  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

1678 c⁄° 
Vec3°
& 
cuº_åi
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1680 
boﬁ
 
ªsu…
 = 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[2],Åri[0],

1681 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1682 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1683 
Ál£
 );

1685 i‡–
ªsu…
 )

1687 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åi
[2],Åri[0],

1688 
cuº_åi
[0], curr_tri[1], curr_tri[2],

1689 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1690 
åue
 );

1692 
™y_öãr£˘i⁄
 = 
åue
;

1700 
	`mömax
–
m_surÁ˚
.
	`gë_posôi⁄
(
åi
[0]), m_surÁ˚.gë_posôi⁄—ri[1]), m_surÁ˚.gë_posôi⁄—ri[2]), 
low
, 
high
 );

1701 
low
 -
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1702 
high
 +
	`Vec3d
(
m_surÁ˚
.
m_Øbb_∑ddög
);

1704 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

1705 
m_surÁ˚
.
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_edges
 );

1707  
size_t
 
i
 = 0; i < 
ovîœµög_edges
.
	`size
(); ++i )

1710 
boﬁ
 
ªsu…
 = 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
(
m_surÁ˚
.
m_mesh
.
m_edges
[
ovîœµög_edges
[
i
]][0],

1711 
m_surÁ˚
.
m_mesh
.
m_edges
[
ovîœµög_edges
[
i
]][1],

1712 
åi
[0],Åri[1],Åri[2],

1713 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1714 
Ál£
 );

1716 i‡–
ªsu…
 )

1718 
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
(
m_surÁ˚
.
m_mesh
.
m_edges
[
ovîœµög_edges
[
i
]][0],

1719 
m_surÁ˚
.
m_mesh
.
m_edges
[
ovîœµög_edges
[
i
]][1],

1720 
åi
[0],Åri[1],Åri[2],

1721 
m_surÁ˚
.
	`gë_posôi⁄s
(),

1722 
åue
 );

1724 
™y_öãr£˘i⁄
 = 
åue
;

1728  
™y_öãr£˘i⁄
;

1729 
	}
}

1738 
	gCﬁlisi⁄Pùñöe
::
gë_öãr£˘i⁄s
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
,

1739 
boﬁ
 
u£_√w_posôi⁄s
,

1740 
°d
::
ve˘‹
<
I¡î£˘i⁄
>& 
öãr£˘i⁄s
 )

1754  
size_t
 
i
 = 0; 
	gi
 < 
	gm_surÁ˚
.
	gm_mesh
.
num_åüngÀs
(); ++i )

1756 
	g°d
::
ve˘‹
<
size_t
> 
edge_ˇndid©es
;

1758 
boﬁ
 
	ggë_sﬁid_edges
 = !
m_surÁ˚
.
åüngÀ_is_sﬁid
(
i
);

1760 
Vec3d
 
	glow
, 
	ghigh
;

1761 
	gm_surÁ˚
.
åüngÀ_°©ic_bounds
–
i
, 
low
, 
high
 );

1762 
	gm_surÁ˚
.
	gm_brﬂd_pha£
->
gë_pŸítül_edge_cﬁlisi⁄s
–
low
, 
high
, 
gë_sﬁid_edges
, 
åue
, 
edge_ˇndid©es
 );

1764 c⁄° 
	gVec3°
& 
	gåüngÀ
 = 
m_surÁ˚
.
m_mesh
.
gë_åüngÀ
(
i
);

1766 i‡–
	gåüngÀ
[0] =
åüngÀ
[1] ||Åriangle[1] ==Åriangle[2] ||Åriangle[2] ==Åriangle[0] ) { ; }

1768 
as£π
–
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
åüngÀ
[0],ÅrüngÀ[1] ) !m_surÁ˚.m_mesh.
m_edges
.
size
() );

1769 
as£π
–
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
åüngÀ
[1],ÅrüngÀ[2] ) !m_surÁ˚.m_mesh.
m_edges
.
size
() );

1770 
as£π
–
m_surÁ˚
.
m_mesh
.
gë_edge_ödex
–
åüngÀ
[2],ÅrüngÀ[0] ) !m_surÁ˚.m_mesh.
m_edges
.
size
() );

1772  
size_t
 
	gj
 = 0; j < 
	gedge_ˇndid©es
.
size
(); ++j )

1775 
as£π
 ( !
m_surÁ˚
.
åüngÀ_is_sﬁid
–
i
 ) || !m_surÁ˚.
edge_is_sﬁid
–
edge_ˇndid©es
[
j
] ) );

1777 c⁄° 
	gVec2°
& 
	gedge
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[ 
edge_ˇndid©es
[
j
] ];

1779 i‡–
	gedge
[0] =
edge
[1] ) { ; }

1781 i‡–
	gedge
[0] =
åüngÀ
[0] || 
edge
[0] ==Åriangle[1] ||Édge[0] ==Åriangle[2]

1782 || 
edge
[1] =
åüngÀ
[0] ||Édge[1] ==Åriangle[1] ||Édge[1] ==Åriangle[2] )

1787 c⁄° 
	gVec3d
& 
	ge0
 = 
u£_√w_posôi⁄s
 ? 
m_surÁ˚
.
gë_√wposôi⁄
(
edge
[0]Ë: m_surÁ˚.
gë_posôi⁄
(edge[0]);

1788 c⁄° 
	gVec3d
& 
	ge1
 = 
u£_√w_posôi⁄s
 ? 
m_surÁ˚
.
gë_√wposôi⁄
(
edge
[1]Ë: m_surÁ˚.
gë_posôi⁄
(edge[1]);

1789 c⁄° 
	gVec3d
& 
	gt0
 = 
u£_√w_posôi⁄s
 ? 
m_surÁ˚
.
gë_√wposôi⁄
(
åüngÀ
[0]Ë: m_surÁ˚.
gë_posôi⁄
(triangle[0]);

1790 c⁄° 
	gVec3d
& 
	gt1
 = 
u£_√w_posôi⁄s
 ? 
m_surÁ˚
.
gë_√wposôi⁄
(
åüngÀ
[1]Ë: m_surÁ˚.
gë_posôi⁄
(triangle[1]);

1791 c⁄° 
	gVec3d
& 
	gt2
 = 
u£_√w_posôi⁄s
 ? 
m_surÁ˚
.
gë_√wposôi⁄
(
åüngÀ
[2]Ë: m_surÁ˚.
gë_posôi⁄
(triangle[2]);

1793 i‡–
£gmít_åüngÀ_öãr£˘i⁄
(
e0
, 
edge
[0],

1794 
e1
, 
edge
[1],

1795 
t0
, 
åüngÀ
[0],

1796 
t1
, 
åüngÀ
[1],

1797 
t2
, 
åüngÀ
[2],

1798 
degíîacy_cou¡s_as_öãr£˘i⁄
, 
m_surÁ˚
.
m_vîbo£
 ) )

1800 
	g°d
::
cout
 << "öãr£˘i⁄: " << 
edge
 << " v†" << 
åüngÀ
 << 
°d
::
ídl
;

1801 
	g°d
::
cout
 << "e0: " << 
e0
 << 
°d
::
ídl
;

1802 
	g°d
::
cout
 << "e1: " << 
e1
 << 
°d
::
ídl
;

1803 
	g°d
::
cout
 << "t0: " << 
t0
 << 
°d
::
ídl
;

1804 
	g°d
::
cout
 << "t1: " << 
t1
 << 
°d
::
ídl
;

1805 
	g°d
::
cout
 << "t2: " << 
t2
 << 
°d
::
ídl
;

1807 
	göãr£˘i⁄s
.
push_back
–
I¡î£˘i⁄
–
edge_ˇndid©es
[
j
], 
i
 ) );

1822 
	gCﬁlisi⁄Pùñöe
::
	$as£π_mesh_is_öãr£˘i⁄_‰ì
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
 )

1825 
°d
::
ve˘‹
<
I¡î£˘i⁄
> 
öãr£˘i⁄s
;

1826 
	`gë_öãr£˘i⁄s
–
degíîacy_cou¡s_as_öãr£˘i⁄
, 
Ál£
, 
öãr£˘i⁄s
 );

1828  
size_t
 
i
 = 0; i < 
öãr£˘i⁄s
.
	`size
(); ++i )

1831 c⁄° 
Vec3°
& 
åüngÀ
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
öãr£˘i⁄s
[
i
].
m_åüngÀ_ödex
 );

1832 c⁄° 
Vec2°
& 
edge
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[ 
öãr£˘i⁄s
[
i
].
m_edge_ödex
 ];

1834 
°d
::
cout
 << "I¡î£˘i⁄! TrüngÀ " << 
åüngÀ
 << " v†edgê" << 
edge
 << std::
ídl
;

1836 
	`£gmít_åüngÀ_öãr£˘i⁄
(
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[0]),Édge[0],

1837 
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[1]),Édge[1],

1838 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[0]),Åriangle[0],

1839 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[1]),Åriangle[1],

1840 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[2]),Åriangle[2],

1841 
åue
,Årue );

1843 
	`as£π
–
Ál£
 );

1847 
	}
}

1858 
	gCﬁlisi⁄Pùñöe
::
	$as£π_¥edi˘ed_mesh_is_öãr£˘i⁄_‰ì
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
 )

1861 
°d
::
ve˘‹
<
I¡î£˘i⁄
> 
öãr£˘i⁄s
;

1862 
	`gë_öãr£˘i⁄s
–
degíîacy_cou¡s_as_öãr£˘i⁄
, 
åue
, 
öãr£˘i⁄s
 );

1864  
size_t
 
i
 = 0; i < 
öãr£˘i⁄s
.
	`size
(); ++i )

1867 c⁄° 
Vec3°
& 
åüngÀ
 = 
m_surÁ˚
.
m_mesh
.
	`gë_åüngÀ
–
öãr£˘i⁄s
[
i
].
m_åüngÀ_ödex
 );

1868 c⁄° 
Vec2°
& 
edge
 = 
m_surÁ˚
.
m_mesh
.
m_edges
[ 
öãr£˘i⁄s
[
i
].
m_edge_ödex
 ];

1870 
°d
::
cout
 << "I¡î£˘i⁄! TrüngÀ " << 
åüngÀ
 << " v†edgê" << 
edge
 << std::
ídl
;

1872 
	`£gmít_åüngÀ_öãr£˘i⁄
(
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[0]),Édge[0],

1873 
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[1]),Édge[1],

1874 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[0]),Åriangle[0],

1875 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[1]),Åriangle[1],

1876 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[2]),Åriangle[2],

1877 
åue
,Årue );

1879 c⁄° 
Vec3d
& 
ó
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[0]);

1880 c⁄° 
Vec3d
& 
eb
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[1]);

1881 c⁄° 
Vec3d
& 
è
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[0]);

1882 c⁄° 
Vec3d
& 
tb
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[1]);

1883 c⁄° 
Vec3d
& 
tc
 = 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[2]);

1885 
m_surÁ˚
.
m_vîbo£
 = 
åue
;

1887 
°d
::
ve˘‹
<
Cﬁlisi⁄
> 
check_cﬁlisi⁄s
;

1888 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_cﬁlisi⁄s
–
check_cﬁlisi⁄s
 );

1889 
°d
::
cout
 << "numbî o‡cﬁlisi⁄†dëe˘ed: " << 
check_cﬁlisi⁄s
.
	`size
(Ë<< std::
ídl
;

1891  
size_t
 
c
 = 0; c < 
check_cﬁlisi⁄s
.
	`size
(); ++c )

1893 c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
 = 
check_cﬁlisi⁄s
[
c
];

1894 
°d
::
cout
 << "Cﬁlisi⁄ " << 
c
 << ": " << std::
ídl
;

1895 i‡–
cﬁlisi⁄
.
m_is_edge_edge
 )

1897 
°d
::
cout
 << "edge-edge: ";

1901 
°d
::
cout
 << "point-triangle: ";

1903 
°d
::
cout
 << 
cﬁlisi⁄
.
m_vîãx_ödi˚s
 << std::
ídl
;

1907 
°d
::
cout
 << "-----\¿edge-åüngÀ check usög m_posôi⁄s:" << std::
ídl
;

1909 
boﬁ
 
ªsu…
 = 
	`£gmít_åüngÀ_öãr£˘i⁄
(
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[0]),Édge[0],

1910 
m_surÁ˚
.
	`gë_posôi⁄
(
edge
[1]),Édge[1],

1911 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[0]),Åriangle[0],

1912 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[1]),Åriangle[1],

1913 
m_surÁ˚
.
	`gë_posôi⁄
(
åüngÀ
[2]),Åriangle[2],

1914 
degíîacy_cou¡s_as_öãr£˘i⁄
,

1915 
m_surÁ˚
.
m_vîbo£
 );

1917 
°d
::
cout
 << "ªsu…: " << 
ªsu…
 << std::
ídl
;

1919 
°d
::
cout
 << "-----\¿edge-åüngÀ check usögÇew m_posôi⁄s" << std::
ídl
;

1921 
ªsu…
 = 
	`£gmít_åüngÀ_öãr£˘i⁄
(
m_surÁ˚
.
	`gë_√wposôi⁄
(
edge
[0]),Édge[0],

1922 
m_surÁ˚
.
	`gë_√wposôi⁄
(
edge
[1]),Édge[1],

1923 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[0]),Åriangle[0],

1924 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[1]),Åriangle[1],

1925 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[2]),Åriangle[2],

1926 
degíîacy_cou¡s_as_öãr£˘i⁄
,

1927 
m_surÁ˚
.
m_vîbo£
 );

1929 
°d
::
cout
 << "ªsu…: " << 
ªsu…
 << std::
ídl
;

1931 c⁄° 
Vec3d
& 
ó_√w
 = 
m_surÁ˚
.
	`gë_√wposôi⁄
(
edge
[0]);

1932 c⁄° 
Vec3d
& 
eb_√w
 = 
m_surÁ˚
.
	`gë_√wposôi⁄
(
edge
[1]);

1933 c⁄° 
Vec3d
& 
è_√w
 = 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[0]);

1934 c⁄° 
Vec3d
& 
tb_√w
 = 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[1]);

1935 c⁄° 
Vec3d
& 
tc_√w
 = 
m_surÁ˚
.
	`gë_√wposôi⁄
(
åüngÀ
[2]);

1937 
°d
::
cout
.
	`¥ecisi⁄
(20);

1939 
°d
::
cout
 << "ﬁd: (edge0Édge1Åri0Åri1Åri2 )" << std::
ídl
;

1941 
°d
::
cout
 << "Vec3dÉa–" << 
ó
[0] << ", " <<Éa[1] << ", " <<Éa[2] << ");" << std::
ídl
;

1942 
°d
::
cout
 << "Vec3dÉb–" << 
eb
[0] << ", " <<Éb[1] << ", " <<Éb[2] << ");" << std::
ídl
;

1943 
°d
::
cout
 << "Vec3dÅa–" << 
è
[0] << ", " <<Åa[1] << ", " <<Åa[2] << ");" << std::
ídl
;

1944 
°d
::
cout
 << "Vec3dÅb–" << 
tb
[0] << ", " <<Åb[1] << ", " <<Åb[2] << ");" << std::
ídl
;

1945 
°d
::
cout
 << "Vec3dÅc–" << 
tc
[0] << ", " <<Åc[1] << ", " <<Åc[2] << ");" << std::
ídl
;

1947 
°d
::
cout
 << "Vec3dÉa_√w–" << 
ó_√w
[0] << ", " <<Éa_√w[1] << ", " <<Éa_√w[2] << ");" << std::
ídl
;

1948 
°d
::
cout
 << "Vec3dÉb_√w–" << 
eb_√w
[0] << ", " <<Éb_√w[1] << ", " <<Éb_√w[2] << ");" << std::
ídl
;

1949 
°d
::
cout
 << "Vec3dÅa_√w–" << 
è_√w
[0] << ", " <<Åa_√w[1] << ", " <<Åa_√w[2] << ");" << std::
ídl
;

1950 
°d
::
cout
 << "Vec3dÅb_√w–" << 
tb_√w
[0] << ", " <<Åb_√w[1] << ", " <<Åb_√w[2] << ");" << std::
ídl
;

1951 
°d
::
cout
 << "Vec3dÅc_√w–" << 
tc_√w
[0] << ", " <<Åc_√w[1] << ", " <<Åc_√w[2] << ");" << std::
ídl
;

1953 
°d
::
ve˘‹
<> 
possibÀ_times
;

1955 
Vec3d
 
n‹mÆ
;

1957 
°d
::
cout
 << "-----" << std::
ídl
;

1959 
	`as£π
–!
	`£gmít_£gmít_cﬁlisi⁄
(
ó
, 
ó_√w
, 
edge
[0], 
eb
, 
eb_√w
,Édge[1],

1960 
è
, 
è_√w
, 
åüngÀ
[0], 
tb
, 
tb_√w
,Åriangle[1] ) );

1962 
°d
::
cout
 << "-----" << std::
ídl
;

1964 
	`as£π
–!
	`£gmít_£gmít_cﬁlisi⁄
(
ó
, 
ó_√w
, 
edge
[0], 
eb
, 
eb_√w
,Édge[1],

1965 
tb
, 
tb_√w
, 
åüngÀ
[1], 
tc
, 
tc_√w
,Åriangle[2] ) );

1967 
°d
::
cout
 << "-----" << std::
ídl
;

1969 
	`as£π
–!
	`£gmít_£gmít_cﬁlisi⁄
(
ó
, 
ó_√w
, 
edge
[0], 
eb
, 
eb_√w
,Édge[1],

1970 
è
, 
è_√w
, 
åüngÀ
[0], 
tc
, 
tc_√w
,Åriangle[2] ) );

1972 
°d
::
cout
 << "-----" << std::
ídl
;

1974 
	`as£π
–!
	`poöt_åüngÀ_cﬁlisi⁄
(
ó
, 
ó_√w
, 
edge
[0], 
è
, 
è_√w
, 
åüngÀ
[0],

1975 
tb
, 
tb_√w
, 
åüngÀ
[1], 
tc
, 
tc_√w
,Åriangle[2] ) );

1977 
°d
::
cout
 << "-----" << std::
ídl
;

1979 
	`as£π
–!
	`poöt_åüngÀ_cﬁlisi⁄
(
eb
, 
eb_√w
, 
edge
[1], 
è
, 
è_√w
, 
åüngÀ
[0],

1980 
tb
, 
tb_√w
, 
åüngÀ
[1], 
tc
, 
tc_√w
,Åriangle[2] ) );

1982 
m_surÁ˚
.
m_vîbo£
 = 
Ál£
;

1984 
°d
::
cout
 << "nÿcﬁlisi⁄†dëe˘ed" << std::
ídl
;

1986 
	`as£π
–
Ál£
 );

1990 
	}
}

	@eltopo3d/collisionpipeline.h

10 #i‚de‡
EL_TOPO_COLLISIONPIPELINE_H


11 
	#EL_TOPO_COLLISIONPIPELINE_H


	)

13 
	~<deque
>

14 
	~<›ti⁄s.h
>

15 
	~<vec.h
>

18 
boﬁ
 
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
(
size_t
 
edge_a
,

19 
size_t
 
edge_b
,

20 
size_t
 
åüngÀ_a
,

21 
size_t
 
åüngÀ_b
,

22 
size_t
 
åüngÀ_c
,

23 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
m_posôi⁄s
,

24 
boﬁ
 
vîbo£
 );

26 
ölöe
 
boﬁ
 
check_åüngÀ_åüngÀ_öãr£˘i⁄
(
Vec3°
 
åüngÀ_a
,

27 
Vec3°
 
åüngÀ_b
,

28 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 );

31 
˛ass
 
	gBrﬂdPha£
;

32 
˛ass
 
	gDy«micSurÁ˚
;

33 
	gIm∑˘Z⁄e
;

38 
	g°d
::
	tdeque
<
	tVec3°
> 
	tCﬁlisi⁄C™did©eSë
;

46 
	sCﬁlisi⁄


49 
Cﬁlisi⁄
() :

50 
m_is_edge_edge
–
Ál£
 ),

51 
m_vîãx_ödi˚s
–
Vec4°
(
°©ic_ˇ°
<
size_t
>(~0)) ),

52 
m_n‹mÆ
–
Vec3d
(
UNINITIALIZED_DOUBLE
) ),

53 
m_b¨y˚¡ric_co‹dö©es
–
Vec4d
(
UNINITIALIZED_DOUBLE
) ),

54 
m_ªœtive_di•œ˚mít
–
UNINITIALIZED_DOUBLE
 )

57 
Cﬁlisi⁄
–
boﬁ
 
ö_is_edge_edge
, c⁄° 
Vec4°
& 
ö_vîãx_ödi˚s
, c⁄° 
Vec3d
& 
ö_n‹mÆ
, c⁄° 
Vec4d
& 
ö_b¨y˚¡ric_co‹dö©es
, 
ö_ªœtive_di•œ˚mít
 ) :

58 
m_is_edge_edge
–
ö_is_edge_edge
 ),

59 
m_vîãx_ödi˚s
–
ö_vîãx_ödi˚s
 ),

60 
m_n‹mÆ
–
ö_n‹mÆ
 ),

61 
m_b¨y˚¡ric_co‹dö©es
–
ö_b¨y˚¡ric_co‹dö©es
 ),

62 
m_ªœtive_di•œ˚mít
–
ö_ªœtive_di•œ˚mít
 )

64 i‡–!
	mm_is_edge_edge
 ) { 
as£π
–
m_b¨y˚¡ric_co‹dö©es
[0] == 1.0 ); }

68 
ölöe
 
boﬁ
 
ovîœp_vîti˚s
–c⁄° 
Cﬁlisi⁄
& 
Ÿhî
 ) const;

71 
ölöe
 
boﬁ
 
ßme_vîti˚s
–c⁄° 
Cﬁlisi⁄
& 
Ÿhî
 ) const;

74 
boﬁ
 
	mm_is_edge_edge
;

77 
Vec4°
 
	mm_vîãx_ödi˚s
;

80 
Vec3d
 
	mm_n‹mÆ
;

83 
Vec4d
 
	mm_b¨y˚¡ric_co‹dö©es
;

86 
	mm_ªœtive_di•œ˚mít
;

97 
	sI¡î£˘i⁄


100 
I¡î£˘i⁄
(
size_t
 
edge_ödex
,

101 
size_t
 
åüngÀ_ödex
 ) :

102 
m_edge_ödex
–
edge_ödex
 ),

103 
m_åüngÀ_ödex
–
åüngÀ_ödex
 )

106 
size_t
 
	mm_edge_ödex
;

107 
size_t
 
	mm_åüngÀ_ödex
;

117 
	sPro˚ssCﬁlisi⁄Sètus


119 
Pro˚ssCﬁlisi⁄Sètus
() :

120 
cﬁlisi⁄_found
–
Ál£
 ),

121 
ovîÊow
(
Ál£
),

122 
Æl_ˇndid©es_¥o˚s£d
–
Ál£
 )

126 
boﬁ
 
	mcﬁlisi⁄_found
;

129 
boﬁ
 
	movîÊow
;

133 
boﬁ
 
	mÆl_ˇndid©es_¥o˚s£d
;

144 ˛as†
	cCﬁlisi⁄Pùñöe


147 
	mpublic
:

149 
Cﬁlisi⁄Pùñöe
–
Dy«micSurÁ˚
& 
surÁ˚
,

150 
BrﬂdPha£
& 
brﬂdpha£
,

151 
ö_‰i˘i⁄_c€fficõ¡
 );

159 
h™dÀ_¥oximôõs
–
dt
 );

166 
boﬁ
 
h™dÀ_cﬁlisi⁄s
–
dt
 );

170 
boﬁ
 
dëe˘_cﬁlisi⁄s
–
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 );

174 
boﬁ
 
dëe˘_√w_cﬁlisi⁄s
–c⁄° 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
im∑˘_z⁄es
,

175 
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 );

179 
dëe˘_cﬁlisi⁄s
–
size_t
 
edge_ödex
, size_à
åüngÀ_ödex
, 
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
 );

181 
boﬁ
 
check_if_cﬁlisi⁄_≥rsi°s
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
 );

188 
gë_åüngÀ_öãr£˘i⁄s
(c⁄° 
Vec3d
& 
£gmít_poöt_a
,

189 c⁄° 
Vec3d
& 
£gmít_poöt_b
,

190 
°d
::
ve˘‹
<>& 
hô_ss
,

191 
°d
::
ve˘‹
<
size_t
>& 
hô_åüngÀs
 ) const;

194 
size_t
 
	$gë_numbî_of_åüngÀ_öãr£˘i⁄s
–c⁄° 
Vec3d
& 
£gmít_poöt_a
,

195 c⁄° 
Vec3d
& 
£gmít_poöt_b
 ) const;

198 
size_t
 
	$gë_numbî_of_åüngÀ_öãr£˘i⁄s_exa˘
–c⁄° 
Vec3d
& 
£gmít_poöt_a
,

199 c⁄° 
Vec3d
& 
£gmít_poöt_b
 ) const;

202 
boﬁ
 
	`check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–
size_t
 
åi_ödex
 );

203 
boﬁ
 
	`check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–c⁄° 
Vec3°
& 
åi
 );

206 
	`gë_öãr£˘i⁄s
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
,

207 
boﬁ
 
u£_√w_posôi⁄s
,

208 
°d
::
ve˘‹
<
I¡î£˘i⁄
>& 
öãr£˘i⁄s
 );

211 
	`gë_fú°_öãr£˘i⁄
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
,

212 
boﬁ
 
u£_√w_posôi⁄s
,

213 
I¡î£˘i⁄
& 
öãr£˘i⁄s
 );

216 
	`as£π_mesh_is_öãr£˘i⁄_‰ì
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
 );

219 
	`as£π_¥edi˘ed_mesh_is_öãr£˘i⁄_‰ì
–
boﬁ
 
degíîacy_cou¡s_as_öãr£˘i⁄
 );

222 
m_‰i˘i⁄_c€fficõ¡
;

224 
¥iv©e
:

226 
‰õnd
 
˛ass
 
Dy«micSurÁ˚
;

227 
‰õnd
 
˛ass
 
EdgeCﬁœp£r
;

229 
	`≠∂y_edge_edge_impul£
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
, 
impul£_magnôude
, 
dt
 );

231 
	`≠∂y_åüngÀ_poöt_impul£
–c⁄° 
Cﬁlisi⁄
& 
cﬁlisi⁄
, 
impul£_magnôude
, 
dt
 );

233 
	`≠∂y_impul£
–c⁄° 
Vec4d
& 
Æphas
,

234 c⁄° 
Vec4°
& 
vîãx_ödi˚s
,

235 
impul£_magnôude
,

236 c⁄° 
Vec3d
& 
n‹mÆ
,

237 
dt
 );

239 
	`add_poöt_ˇndid©es
–
size_t
 
v
,

240 
boﬁ
 
ªtu∫_sﬁid
,

241 
boﬁ
 
ªtu∫_dy«mic
,

242 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 );

244 
	`add_edge_ˇndid©es
–
size_t
 
e
,

245 
boﬁ
 
ªtu∫_sﬁid
,

246 
boﬁ
 
ªtu∫_dy«mic
,

247 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 );

249 
	`add_åüngÀ_ˇndid©es
–
size_t
 
t
,

250 
boﬁ
 
ªtu∫_sﬁid
,

251 
boﬁ
 
ªtu∫_dy«mic
,

252 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 );

254 
	`add_poöt_upd©e_ˇndid©es
–
size_t
 
v
, 
Cﬁlisi⁄C™did©eSë
& 
cﬁlisi⁄_ˇndid©es
 );

257 
boﬁ
 
	`dëe˘_£gmít_£gmít_cﬁlisi⁄
–c⁄° 
Vec3°
& 
ˇndid©e
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 );

259 
boﬁ
 
	`dëe˘_poöt_åüngÀ_cﬁlisi⁄
–c⁄° 
Vec3°
& 
ˇndid©e
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 );

263 
	`¥o˚ss_¥oximôy_ˇndid©es
–
dt
,

264 
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
 );

266 
	`dy«mic_poöt_vs_sﬁid_åüngÀ_¥oximôõs
(
dt
);

267 
	`dy«mic_åüngÀ_vs_Æl_poöt_¥oximôõs
(
dt
);

268 
	`dy«mic_edge_vs_Æl_edge_¥oximôõs
(
dt
);

273 
	`¥o˚ss_cﬁlisi⁄_ˇndid©es
–
dt
,

274 
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
,

275 
boﬁ
 
add_to_√w_ˇndid©es
,

276 
Cﬁlisi⁄C™did©eSë
& 
√w_ˇndid©es
,

277 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 );

281 
	`ã°_cﬁlisi⁄_ˇndid©es
–
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
,

282 
°d
::
ve˘‹
<
Cﬁlisi⁄
>& 
cﬁlisi⁄s
,

283 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 );

285 
boﬁ
 
	`™y_cﬁlisi⁄
–
Cﬁlisi⁄C™did©eSë
& 
ˇndid©es
, 
Cﬁlisi⁄
& 
cﬁlisi⁄
 );

287 
	`dy«mic_poöt_vs_sﬁid_åüngÀ_cﬁlisi⁄s
–
dt
,

288 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

289 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

290 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 );

292 
	`dy«mic_åüngÀ_vs_Æl_poöt_cﬁlisi⁄s
–
dt
,

293 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

294 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

295 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 );

297 
	`dy«mic_edge_vs_Æl_edge_cﬁlisi⁄s
–
dt
,

298 
boﬁ
 
cﬁÀ˘_ˇndid©es
,

299 
Cﬁlisi⁄C™did©eSë
& 
upd©e_cﬁlisi⁄_ˇndid©es
,

300 
Pro˚ssCﬁlisi⁄Sètus
& 
°©us
 );

302 
Dy«micSurÁ˚
& 
m_surÁ˚
;

303 
BrﬂdPha£
& 
m_brﬂd_pha£
;

316 
ölöe
 
boﬁ
 
Cﬁlisi⁄
::
	$ovîœp_vîti˚s
–c⁄° 
Cﬁlisi⁄
& 
Ÿhî
 ) const

318  
i
 = 0; i < 4; ++i )

320 i‡–
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[0] ||

321 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[1] ||

322 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[2] ||

323 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[3] )

325  
åue
;

329  
Ál£
;

330 
	}
}

338 
ölöe
 
boﬁ
 
	gCﬁlisi⁄
::
	$ßme_vîti˚s
–c⁄° 
Cﬁlisi⁄
& 
Ÿhî
 ) const

340 
boﬁ
 
found
[4];

341  
i
 = 0; i < 4; ++i )

343 i‡–
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[0] ||

344 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[1] ||

345 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[2] ||

346 
m_vîãx_ödi˚s
[
i
] =
Ÿhî
.m_vertex_indices[3] )

348 
found
[
i
] = 
åue
;

352 
found
[
i
] = 
Ál£
;

356  ( 
found
[0] && found[1] && found[2] && found[3] );

357 
	}
}

367 
ölöe
 
boﬁ
 
check_åüngÀ_åüngÀ_öãr£˘i⁄
(
Vec3°
 
åüngÀ_a
,

368 
Vec3°
 
åüngÀ_b
,

369 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 )

371 i‡–
åüngÀ_a
[0] =åüngÀ_a[1] || 
åüngÀ_b
[0] ==Åriangle_b[1] )

373  
Ál£
;

376 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_a
[0],Åriangle_a[1],

377 
åüngÀ_b
[0],Åriangle_b[1],Åriangle_b[2],

378 
posôi⁄s
, 
Ál£
 ) )

380  
	gåue
;

383 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_a
[1],Åriangle_a[2],

384 
åüngÀ_b
[0],Åriangle_b[1],Åriangle_b[2],

385 
posôi⁄s
, 
Ál£
 ) )

387  
	gåue
;

390 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_a
[2],Åriangle_a[0],

391 
åüngÀ_b
[0],Åriangle_b[1],Åriangle_b[2],

392 
posôi⁄s
, 
Ál£
 ) )

394  
	gåue
;

397 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_b
[0],Åriangle_b[1],

398 
åüngÀ_a
[0],Åriangle_a[1],Åriangle_a[2],

399 
posôi⁄s
, 
Ál£
 ) )

401  
	gåue
;

404 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_b
[1],Åriangle_b[2],

405 
åüngÀ_a
[0],Åriangle_a[1],Åriangle_a[2],

406 
posôi⁄s
, 
Ál£
 ) )

408  
	gåue
;

411 i‡–
check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
åüngÀ_b
[2],Åriangle_b[0],

412 
åüngÀ_a
[0],Åriangle_a[1],Åriangle_a[2],

413 
posôi⁄s
, 
Ál£
 ) )

415  
	gåue
;

418  
	gÁl£
;

	@eltopo3d/dynamicsurface.cpp

14 
	~<dy«micsurÁ˚.h
>

16 
	~<brﬂdpha£grid.h
>

17 
	~<ˇs£π
>

18 
	~<ccd_wøµî.h
>

19 
	~<cﬁlisi⁄quîõs.h
>

20 
	~<˘ime
>

21 
	~<im∑˘z⁄esﬁvî.h
>

22 
	~<œ∑ck_wøµî.h
>

23 
	~<m©.h
>

24 
	~<queue
>

25 
	~<run°©s.h
>

26 
	~<vec.h
>

27 
	~<ve˘‹
>

28 
	~<wÆl˛ocktime.h
>

54 
	gDy«micSurÁ˚
::
Dy«micSurÁ˚
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
vîãx_posôi⁄s
,

55 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs
,

56 c⁄° 
°d
::
ve˘‹
<>& 
mas£s
,

57 
ö_¥oximôy_ïsû⁄
,

58 
ö_‰i˘i⁄_c€fficõ¡
,

59 
boﬁ
 
ö_cﬁlisi⁄_ß„ty
,

60 
boﬁ
 
ö_vîbo£
 ) :

61 
m_¥oximôy_ïsû⁄
–
ö_¥oximôy_ïsû⁄
 ),

62 
m_vîbo£
–
ö_vîbo£
 ),

63 
m_cﬁlisi⁄_ß„ty
–
ö_cﬁlisi⁄_ß„ty
 ),

64 
m_mas£s
–
mas£s
 ),

65 
m_mesh
(),

66 
m_brﬂd_pha£
–
√w
 
BrﬂdPha£Grid
() ),

67 
m_cﬁlisi⁄_pùñöe
–*
this
, *
m_brﬂd_pha£
, 
ö_‰i˘i⁄_c€fficõ¡
 ),

68 
m_Øbb_∑ddög
–
max
–
ö_¥oximôy_ïsû⁄
, 1e-4 ) ),

69 
pm_posôi⁄s
(
vîãx_posôi⁄s
),

70 
pm_√wposôi⁄s
(
vîãx_posôi⁄s
),

71 
	$m_vñocôõs
(0)

74 i‡–
m_vîbo£
 )

76 
°d
::
cout
 << "c⁄°ru˘ög dy«mi¯surÁ˚" << std::
ídl
;

80 i‡–
m_mas£s
.
	`size
() == 0 )

82 
m_mas£s
.
	`ªsize
–
	`gë_num_vîti˚s
(), 1.0 );

86  
size_t
 
i
 = 0; i < 
m_mas£s
.
	`size
(); ++i )

88 i‡–
m_mas£s
[
i
] == 0.0 )

90 
°d
::
˚º
 << "Zîo-mas†vîãx dëe˘ed. PÀa£ u£ #INF f‹ inföôe-mas†vîti˚s." << std::
ídl
;

91 
	`as£π
(0);

98 
m_mesh
.
	`£t_num_vîti˚s
–
	`gë_num_vîti˚s
() );

99 
m_mesh
.
	`ª∂a˚_Æl_åüngÀs
–
åüngÀs
 );

102 i‡–
m_vîbo£
 )

104 
°d
::
cout
 << "c⁄°ru˘ed dy«mi¯surÁ˚" << std::
ídl
;

107 
	}
}

116 
	gDy«micSurÁ˚
::~
	$Dy«micSurÁ˚
()

118 
dñëe
 
m_brﬂd_pha£
;

119 
	}
}

128 
	gDy«micSurÁ˚
::
	$di°™˚_to_surÁ˚
–c⁄° 
Vec3d
& 
p
, 
size_t
& 
˛o£°_åüngÀ
 ) const

131 
∑ddög
 = 
m_Øbb_∑ddög
;

132 
mö_di°™˚
 = 
BIG_DOUBLE
;

134  
mö_di°™˚
 =
BIG_DOUBLE
 )

137 
Vec3d
 
	`xmö
–
p
 - 
	`Vec3d
–
∑ddög
 ) );

138 
Vec3d
 
	`xmax
–
p
 + 
	`Vec3d
–
∑ddög
 ) );

140 
°d
::
ve˘‹
<
size_t
> 
√¨by_åüngÀs
;

142 
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
xmö
, 
xmax
, 
åue
,Årue, 
√¨by_åüngÀs
 );

144  
size_t
 
j
 = 0; j < 
√¨by_åüngÀs
.
	`size
(); ++j )

146 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
–
√¨by_åüngÀs
[
j
] );

148 i‡–
åi
[0] ==Åri[1] ||Åri[1] ==Åri[2] ||Åri[0] ==Åri[2] ) { ; }

150 
cuº_di°™˚
;

151 
	`check_poöt_åüngÀ_¥oximôy
–
p
, 
	`gë_posôi⁄
(
åi
[0]), gë_posôi⁄—ri[1]), gë_posôi⁄—ri[2]), 
cuº_di°™˚
 );

152 i‡–
cuº_di°™˚
 < 
∑ddög
 )

154 
mö_di°™˚
 = 
	`mö
–mö_di°™˚, 
cuº_di°™˚
 );

155 
˛o£°_åüngÀ
 = 
√¨by_åüngÀs
[
j
];

159 
∑ddög
 *= 2.0;

163  
mö_di°™˚
;

165 
	}
}

174 
	gDy«micSurÁ˚
::
∑πôi⁄_surÁ˚s
–
°d
::
ve˘‹
<
size_t
>& 
surÁ˚_ids
, std::ve˘‹< std::ve˘‹< size_t> >& 
surÁ˚s
 ) const

177 c⁄° 
size_t
 
UNASSIGNED
 = (size_t) ~0;

179 
	gsurÁ˚s
.
˛ór
();

181 
	gsurÁ˚_ids
.
˛ór
();

182 
	gsurÁ˚_ids
.
ªsize
–
gë_num_vîti˚s
(), 
UNASSIGNED
 );

184 
size_t
 
	gcuº_surÁ˚
 = 0;

186  
	gåue
 )

188 
size_t
 
	g√xt_u«ssig√d_vîãx
;

189  
	g√xt_u«ssig√d_vîãx
 = 0;Çext_u«ssig√d_vîãx < 
	gsurÁ˚_ids
.
size
(); ++next_unassigned_vertex )

191 i‡–
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[
√xt_u«ssig√d_vîãx
].
em±y
() ) { ; }

193 i‡–
	gsurÁ˚_ids
[
√xt_u«ssig√d_vîãx
] =
UNASSIGNED
 )

199 i‡–
	g√xt_u«ssig√d_vîãx
 =
surÁ˚_ids
.
size
() )

204 
	g°d
::
queue
<
size_t
> 
›í
;

205 
	g›í
.
push
–
√xt_u«ssig√d_vîãx
 );

207 
	g°d
::
ve˘‹
<
size_t
> 
surÁ˚_vîti˚s
;

209  
	gÁl£
 =
›í
.
em±y
() )

211 
size_t
 
vîãx_ödex
 = 
›í
.
‰⁄t
();

212 
	g›í
.
p›
();

214 i‡–
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[
vîãx_ödex
].
em±y
() ) { ; }

216 i‡–
	gsurÁ˚_ids
[
vîãx_ödex
] !
UNASSIGNED
 )

218 
as£π
–
surÁ˚_ids
[
vîãx_ödex
] =
cuº_surÁ˚
 );

222 
	gsurÁ˚_ids
[
vîãx_ödex
] = 
cuº_surÁ˚
;

223 
	gsurÁ˚_vîti˚s
.
push_back
–
vîãx_ödex
 );

225 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_ödex
];

227  
size_t
 
	gi
 = 0; i < 
	göcidít_edges
.
size
(); ++i )

229 
size_t
 
	gadja˚¡_vîãx
 = 
m_mesh
.
m_edges
[ 
öcidít_edges
[
i
] ][0];

230 i‡–
	gadja˚¡_vîãx
 =
vîãx_ödex
 ) { 
adja˚¡_vîãx
 = 
m_mesh
.
m_edges
[ 
öcidít_edges
[
i
] ][1]; }

232 i‡–
	gsurÁ˚_ids
[
adja˚¡_vîãx
] =
UNASSIGNED
 )

234 
›í
.
push
–
adja˚¡_vîãx
 );

238 
as£π
–
surÁ˚_ids
[
adja˚¡_vîãx
] =
cuº_surÁ˚
 );

244 
	gsurÁ˚s
.
push_back
–
surÁ˚_vîti˚s
 );

246 ++
	gcuº_surÁ˚
;

254  
size_t
 
	gi
 = 0; i < 
	gsurÁ˚_ids
.
size
(); ++i )

256 i‡–
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[
i
].
em±y
() ) { ; }

258 
as£π
–
surÁ˚_ids
[
i
] !
UNASSIGNED
 );

260 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_mesh
.
m_vîãx_to_edge_m≠
[
i
];

261  
size_t
 
	gj
 = 0; j < 
	göcidít_edges
.
size
(); ++j )

263 
size_t
 
	gadja˚¡_vîãx
 = 
m_mesh
.
m_edges
[ 
öcidít_edges
[
j
] ][0];

264 i‡–
	gadja˚¡_vîãx
 =
i
 ) { 
adja˚¡_vîãx
 = 
m_mesh
.
m_edges
[ 
öcidít_edges
[
j
] ][1]; }

265 
as£π
–
surÁ˚_ids
[
adja˚¡_vîãx
] =surÁ˚_ids[
i
] );

278 
	gDy«micSurÁ˚
::
gë_Æl_vîãx_n‹mÆs
–
°d
::
ve˘‹
<
Vec3d
>& 
n‹mÆs
 ) const

280 
n‹mÆs
.
ªsize
–
gë_num_vîti˚s
() );

281  
size_t
 
	gi
 = 0; i < 
gë_num_vîti˚s
(); ++i )

283 
	gn‹mÆs
[
i
] = 
gë_vîãx_n‹mÆ
(i);

296 
	gDy«micSurÁ˚
::
	$˛assify_vîãx
–
size_t
 
v
 ) const

298 i‡–
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
].
	`em±y
() ) {  0; }

300 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
 = 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
];

303 
M©33d
 
	`A
(0,0,0,0,0,0,0,0,0);

305  
size_t
 
i
 = 0; i < 
öcidít_åüngÀs
.
	`size
(); ++i )

307 
size_t
 
åüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

308 
Vec3d
 
n‹mÆ
 = 
	`gë_åüngÀ_n‹mÆ
(
åüngÀ_ödex
);

309 
w
 = 
	`gë_åüngÀ_¨ó
(
åüngÀ_ödex
);

311 
	`A
(0,0Ë+
n‹mÆ
[0] * 
w
 *Çormal[0];

312 
	`A
(1,0Ë+
n‹mÆ
[1] * 
w
 *Çormal[0];

313 
	`A
(2,0Ë+
n‹mÆ
[2] * 
w
 *Çormal[0];

315 
	`A
(0,1Ë+
n‹mÆ
[0] * 
w
 *Çormal[1];

316 
	`A
(1,1Ë+
n‹mÆ
[1] * 
w
 *Çormal[1];

317 
	`A
(2,1Ë+
n‹mÆ
[2] * 
w
 *Çormal[1];

319 
	`A
(0,2Ë+
n‹mÆ
[0] * 
w
 *Çormal[2];

320 
	`A
(1,2Ë+
n‹mÆ
[1] * 
w
 *Çormal[2];

321 
	`A
(2,2Ë+
n‹mÆ
[2] * 
w
 *Çormal[2];

325 
eigívÆues
[3];

326 
w‹k
[9];

327 
öfo
 = ~0, 
n
 = 3, 
lw‹k
 = 9;

328 
LAPACK
::
	`gë_eigí_decomposôi⁄
–&
n
, 
A
.
a
, &n, 
eigívÆues
, 
w‹k
, &
lw‹k
, &
öfo
 );

330 i‡–
öfo
 != 0 )

332 i‡–
m_vîbo£
 )

334 
°d
::
cout
 << "Eigí decom∞Áûed. IncidíàåüngÀs: " << std::
ídl
;

335  
size_t
 
i
 = 0; i < 
öcidít_åüngÀs
.
	`size
(); ++i )

337 
size_t
 
åüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

338 
Vec3d
 
n‹mÆ
 = 
	`gë_åüngÀ_n‹mÆ
(
åüngÀ_ödex
);

339 
w
 = 
	`gë_åüngÀ_¨ó
(
åüngÀ_ödex
);

341 
°d
::
cout
 << "n‹mÆ: ( " << 
n‹mÆ
 << " ) ";

342 
°d
::
cout
 << "¨ó: " << 
w
 << std::
ídl
;

349 
ønk
 = 0;

350  
i
 = 0; i < 3; ++i )

352 i‡–
eigívÆues
[
i
] > 
G_EIGENVALUE_RANK_RATIO
 *Éigenvalues[2] )

354 ++
ønk
;

358  
ønk
;

360 
	}
}

369 
	gDy«micSurÁ˚
::
	$öãgøã
–
desúed_dt
, & 
a˘uÆ_dt
 )

372 c⁄° 
boﬁ
 
DEGEN_DOES_NOT_COUNT
 = 
Ál£
;

373 c⁄° 
boﬁ
 
USE_NEW_POSITIONS
 = 
åue
;

375 i‡–
m_vîbo£
 )

377 
°d
::
cout
 << "---------------------- E»T›o: i¡egøti⁄ánd cﬁlisi⁄ h™dlög --------------------" << std::
ídl
;

380 
cuº_dt
 = 
desúed_dt
;

381 
boﬁ
 
suc˚ss
 = 
Ál£
;

383  !
suc˚ss
 )

386 c⁄° 
°d
::
ve˘‹
<
Vec3d
> 
ßved_¥edi˘ed_posôi⁄s
 = 
	`gë_√wposôi⁄s
();

388 i‡–
m_cﬁlisi⁄_ß„ty
 )

390 
°d
::
ve˘‹
<
I¡î£˘i⁄
> 
öãr£˘i⁄s
;

391 
m_cﬁlisi⁄_pùñöe
.
	`gë_öãr£˘i⁄s
–
DEGEN_DOES_NOT_COUNT
, 
Ál£
, 
öãr£˘i⁄s
 );

392 i‡–!
öãr£˘i⁄s
.
	`em±y
() )

394 
°d
::
cout
 << "I¡î£˘i⁄ i¿mesh bef‹êöãgøti⁄" << std::
ídl
;

395 
	`as£π
(
Ál£
);

399 
m_vñocôõs
.
	`ªsize
–
	`gë_num_vîti˚s
() );

400 
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); i++)

402 
m_vñocôõs
[
i
] = ( 
	`gë_√wposôi⁄
(iË- 
	`gë_posôi⁄
(iËË/ 
cuº_dt
;

407 i‡–
m_cﬁlisi⁄_ß„ty
 )

409 
m_cﬁlisi⁄_pùñöe
.
	`h™dÀ_¥oximôõs
–
cuº_dt
 );

412 i‡–
m_cﬁlisi⁄_ß„ty
 )

416 
boﬁ
 
Æl_cﬁlisi⁄s_h™dÀd
 = 
Ál£
;

418 
Æl_cﬁlisi⁄s_h™dÀd
 = 
m_cﬁlisi⁄_pùñöe
.
	`h™dÀ_cﬁlisi⁄s
–
cuº_dt
 );

422 
Im∑˘Z⁄eSﬁvî
 
	`im∑˘Z⁄eSﬁvî
–*
this
 );

424 
boﬁ
 
sﬁvî_ok
 = 
Æl_cﬁlisi⁄s_h™dÀd
;

426 i‡–!
sﬁvî_ok
 )

429 { 
°d
::
cout
 << "IIZ" << std::
ídl
; }

430 
sﬁvî_ok
 = 
im∑˘Z⁄eSﬁvî
.
	`öña°ic_im∑˘_z⁄es
–
cuº_dt
 );

433 i‡–!
sﬁvî_ok
 )

436 { 
°d
::
cout
 << "RIZ" << std::
ídl
; }

438 
sﬁvî_ok
 = 
im∑˘Z⁄eSﬁvî
.
	`rigid_im∑˘_z⁄es
–
cuº_dt
 );

441 i‡–!
sﬁvî_ok
 )

445 
cuº_dt
 = 0.5 * curr_dt;

446  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

448 
	`£t_√wposôi⁄
(
i
, 
	`gë_posôi⁄
(iË+ 0.5 * (
ßved_¥edi˘ed_posôi⁄s
[i] - get_position(i)) ) ;

456 
°d
::
ve˘‹
<
I¡î£˘i⁄
> 
öãr£˘i⁄s
;

457 
m_cﬁlisi⁄_pùñöe
.
	`gë_öãr£˘i⁄s
–
DEGEN_DOES_NOT_COUNT
, 
USE_NEW_POSITIONS
, 
öãr£˘i⁄s
 );

459 i‡–!
öãr£˘i⁄s
.
	`em±y
() )

461 
°d
::
cout
 << "I¡î£˘i⁄ i¿¥edi˘ed mesh." << std::
ídl
;

528 i‡–
Æl_cﬁlisi⁄s_h™dÀd
 )

530 
°d
::
cout
 << "I¡î£˘i⁄ i¿¥edi˘ed mesh buàh™dÀ cﬁlisi⁄†ªtu∫ed ok." << std::
ídl
;

531 
	`as£π
–
Ál£
 );

536 
°d
::
cout
 << "I¡î£˘i⁄ i¿¥edi˘ed mesh, cuâögÅime°ï." << std::
ídl
;

541 
cuº_dt
 = 0.5 * curr_dt;

542  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

544 
	`£t_√wposôi⁄
–
i
, 
	`gë_posôi⁄
(iË+ 0.5 * ( 
ßved_¥edi˘ed_posôi⁄s
[i] - get_position(i) ) );

554 
	`£t_posôi⁄s_to_√wposôi⁄s
();

556 i‡–
m_cﬁlisi⁄_ß„ty
 )

558 
m_cﬁlisi⁄_pùñöe
.
	`as£π_mesh_is_öãr£˘i⁄_‰ì
–
DEGEN_DOES_NOT_COUNT
 );

561 
a˘uÆ_dt
 = 
cuº_dt
;

563 
suc˚ss
 = 
åue
;

567 
°ï
 = 0;

568 ++
°ï
;

570 
	}
}

578 
	gDy«micSurÁ˚
::
	$ªbuûd_°©ic_brﬂd_pha£
()

580 
	`as£π
–
m_cﬁlisi⁄_ß„ty
 );

581 
m_brﬂd_pha£
->
	`upd©e_brﬂd_pha£
–*
this
, 
Ál£
 );

582 
	}
}

590 
	gDy«micSurÁ˚
::
	$ªbuûd_c⁄töuous_brﬂd_pha£
()

592 
	`as£π
–
m_cﬁlisi⁄_ß„ty
 );

593 
m_brﬂd_pha£
->
	`upd©e_brﬂd_pha£
–*
this
, 
åue
 );

594 
	}
}

603 
	gDy«micSurÁ˚
::
	$upd©e_°©ic_brﬂd_pha£
–
size_t
 
vîãx_ödex
 )

605 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åis
 = 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[ 
vîãx_ödex
 ];

606 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_mesh
.
m_vîãx_to_edge_m≠
[ 
vîãx_ödex
 ];

608 
Vec3d
 
low
, 
high
;

609 
	`vîãx_°©ic_bounds
–
vîãx_ödex
, 
low
, 
high
 );

610 
m_brﬂd_pha£
->
	`upd©e_vîãx
–
vîãx_ödex
, 
low
, 
high
, 
	`vîãx_is_sﬁid
(vertex_index) );

612  
size_t
 
t
 = 0;Å < 
öcidít_åis
.
	`size
(); ++t )

614 
	`åüngÀ_°©ic_bounds
–
öcidít_åis
[
t
], 
low
, 
high
 );

615 
m_brﬂd_pha£
->
	`upd©e_åüngÀ
–
öcidít_åis
[
t
], 
low
, 
high
, 
	`åüngÀ_is_sﬁid
(incident_tris[t]) );

618  
size_t
 
e
 = 0;É < 
öcidít_edges
.
	`size
(); ++e )

620 
	`edge_°©ic_bounds
–
öcidít_edges
[
e
], 
low
, 
high
 );

621 
m_brﬂd_pha£
->
	`upd©e_edge
–
öcidít_edges
[
e
], 
low
, 
high
, 
	`edge_is_sﬁid
(incident_edges[e]) );

624 
	}
}

633 
	gDy«micSurÁ˚
::
	$upd©e_c⁄töuous_brﬂd_pha£
–
size_t
 
vîãx_ödex
 )

635 
	`as£π
–
m_cﬁlisi⁄_ß„ty
 );

637 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åis
 = 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[ 
vîãx_ödex
 ];

638 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_mesh
.
m_vîãx_to_edge_m≠
[ 
vîãx_ödex
 ];

640 
Vec3d
 
low
, 
high
;

641 
	`vîãx_c⁄töuous_bounds
–
vîãx_ödex
, 
low
, 
high
 );

642 
m_brﬂd_pha£
->
	`upd©e_vîãx
–
vîãx_ödex
, 
low
, 
high
, 
	`vîãx_is_sﬁid
(vertex_index) );

644  
size_t
 
t
 = 0;Å < 
öcidít_åis
.
	`size
(); ++t )

646 
	`åüngÀ_c⁄töuous_bounds
–
öcidít_åis
[
t
], 
low
, 
high
 );

647 
m_brﬂd_pha£
->
	`upd©e_åüngÀ
–
öcidít_åis
[
t
], 
low
, 
high
, 
	`åüngÀ_is_sﬁid
(incident_tris[t]) );

650  
size_t
 
e
 = 0;É < 
öcidít_edges
.
	`size
(); ++e )

652 
	`edge_c⁄töuous_bounds
–
öcidít_edges
[
e
], 
low
, 
high
 );

653 
m_brﬂd_pha£
->
	`upd©e_edge
–
öcidít_edges
[
e
], 
low
, 
high
, 
	`edge_is_sﬁid
(incident_edges[e]) );

655 
	}
}

664 
	gDy«micSurÁ˚
::
	$vîãx_°©ic_bounds
(
size_t
 
v
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

666 i‡–
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
].
	`em±y
() )

668 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

669 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

673 
xmö
 = 
	`gë_posôi⁄
(
v
Ë- 
	`Vec3d
(
m_Øbb_∑ddög
);

674 
xmax
 = 
	`gë_posôi⁄
(
v
Ë+ 
	`Vec3d
(
m_Øbb_∑ddög
);

676 
	}
}

684 
	gDy«micSurÁ˚
::
	$edge_°©ic_bounds
(
size_t
 
e
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

686 c⁄° 
Vec2°
& 
edge
 = 
m_mesh
.
m_edges
[
e
];

687 i‡–
edge
[0] ==Édge[1] )

689 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

690 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

694 
	`mömax
–
	`gë_posôi⁄
(
edge
[0]), gë_posôi⁄”dge[1]), 
xmö
, 
xmax
);

695 
xmö
 -
	`Vec3d
(
m_Øbb_∑ddög
);

696 
xmax
 +
	`Vec3d
(
m_Øbb_∑ddög
);

698 
	}
}

706 
	gDy«micSurÁ˚
::
	$åüngÀ_°©ic_bounds
(
size_t
 
t
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

708 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
(
t
);

709 i‡–
åi
[0] ==Åri[1] )

711 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

712 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

716 
	`mömax
(
	`gë_posôi⁄
(
åi
[0]), gë_posôi⁄—ri[1]), gë_posôi⁄—ri[2]), 
xmö
, 
xmax
);

717 
xmö
 -
	`Vec3d
(
m_Øbb_∑ddög
);

718 
xmax
 +
	`Vec3d
(
m_Øbb_∑ddög
);

720 
	}
}

728 
	gDy«micSurÁ˚
::
	$vîãx_c⁄töuous_bounds
(
size_t
 
v
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

730 i‡–
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
].
	`em±y
() )

732 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

733 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

737 
	`mömax
–
	`gë_posôi⁄
(
v
), 
	`gë_√wposôi⁄
(v), 
xmö
, 
xmax
);

738 
xmö
 -
	`Vec3d
(
m_Øbb_∑ddög
);

739 
xmax
 +
	`Vec3d
(
m_Øbb_∑ddög
);

741 
	}
}

749 
	gDy«micSurÁ˚
::
	$edge_c⁄töuous_bounds
(
size_t
 
e
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

751 c⁄° 
Vec2°
& 
edge
 = 
m_mesh
.
m_edges
[
e
];

752 i‡–
edge
[0] ==Édge[1] )

754 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

755 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

759 
	`mömax
(
	`gë_posôi⁄
(
edge
[0]), 
	`gë_√wposôi⁄
(edge[0]),

760 
	`gë_posôi⁄
(
edge
[1]), 
	`gë_√wposôi⁄
(edge[1]),

761 
xmö
, 
xmax
);

762 
xmö
 -
	`Vec3d
(
m_Øbb_∑ddög
);

763 
xmax
 +
	`Vec3d
(
m_Øbb_∑ddög
);

765 
	}
}

773 
	gDy«micSurÁ˚
::
	$åüngÀ_c⁄töuous_bounds
(
size_t
 
t
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const

775 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
(
t
);

776 i‡–
åi
[0] ==Åri[1] )

778 
xmö
 = 
	`Vec3d
(
m_Øbb_∑ddög
);

779 
xmax
 = -
	`Vec3d
(
m_Øbb_∑ddög
);

783 
	`mömax
(
	`gë_posôi⁄
(
åi
[0]), 
	`gë_√wposôi⁄
(tri[0]),

784 
	`gë_posôi⁄
(
åi
[1]), 
	`gë_√wposôi⁄
(tri[1]),

785 
	`gë_posôi⁄
(
åi
[2]), 
	`gë_√wposôi⁄
(tri[2]),

786 
xmö
, 
xmax
);

788 
xmö
 -
	`Vec3d
(
m_Øbb_∑ddög
);

789 
xmax
 +
	`Vec3d
(
m_Øbb_∑ddög
);

791 
	}
}

796 
boﬁ
 
	$Øbbs_öãr£˘
–c⁄° 
Vec3d
& 
a_xmö
, c⁄° Vec3d& 
a_xmax
, c⁄° Vec3d& 
b_xmö
, c⁄° Vec3d& 
b_xmax
 )

798 i‡–(
a_xmö
[0] <
b_xmax
[0] &&á_xmin[1] <= b_xmax[1] &&á_xmin[2] <= b_xmax[2]) &&

799 (
a_xmax
[0] >
b_xmö
[0] &&á_xmax[1] >= b_xmin[1] &&á_xmax[2] >= b_xmin[2]) )

801  
åue
;

804  
Ál£
;

805 
	}
}

810 
	gDy«micSurÁ˚
::
	$check_°©ic_brﬂd_pha£_is_up_to_d©e
() const

819  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

821 i‡–
m_mesh
.
	`vîãx_is_dñëed
(
i
) ) { ; }

825 
Vec3d
 
Øbb_low
, 
Øbb_high
;

826 
	`vîãx_°©ic_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

828 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

829 
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
(
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
);

832  
k
 = 0; k < ()
ovîœµög_åüngÀs
.
	`size
(); ++k )

834 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
–
ovîœµög_åüngÀs
[
k
] ) )

836 
ovîœµög_åüngÀs
.
	`îa£
–ovîœµög_åüngÀs.
	`begö
(Ë+ 
k
 );

837 --
k
;

843 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_åüngÀs
;

845  
size_t
 
j
 = 0; j < 
m_mesh
.
	`num_åüngÀs
(); ++j )

847 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
(
j
) ) { ; }

849 
Vec3d
 
åi_Øbb_low
, 
åi_Øbb_high
;

850 
	`åüngÀ_°©ic_bounds
–
j
, 
åi_Øbb_low
, 
åi_Øbb_high
 );

852 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
åi_Øbb_low
, 
åi_Øbb_high
 ) )

854 
bruã_f‹˚_ovîœµög_åüngÀs
.
	`push_back
–
j
 );

858 
	`as£π
–
ovîœµög_åüngÀs
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_åüngÀs
.size() );

860 
°d
::
	`s‹t
(
ovîœµög_åüngÀs
.
	`begö
(), ovîœµög_åüngÀs.
	`íd
());

861 
°d
::
	`s‹t
(
bruã_f‹˚_ovîœµög_åüngÀs
.
	`begö
(), bruã_f‹˚_ovîœµög_åüngÀs.
	`íd
());

863  
size_t
 
k
 = 0; k < 
ovîœµög_åüngÀs
.
	`size
(); ++k )

865 
	`as£π
–
ovîœµög_åüngÀs
[
k
] =
bruã_f‹˚_ovîœµög_åüngÀs
[k] );

874  
size_t
 
i
 = 0; i < 
m_mesh
.
m_edges
.
	`size
(); ++i )

876 i‡–
m_mesh
.
	`edge_is_dñëed
(
i
) ) { ; }

880 
Vec3d
 
Øbb_low
, 
Øbb_high
;

881 
	`edge_°©ic_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

883 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

884 
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_edges
 );

887  
k
 = 0; k < ()
ovîœµög_edges
.
	`size
(); ++k )

889 i‡–
m_mesh
.
	`edge_is_dñëed
–
ovîœµög_edges
[
k
] ) )

891 
ovîœµög_edges
.
	`îa£
–ovîœµög_edges.
	`begö
(Ë+ 
k
 );

892 --
k
;

897 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_edges
;

898  
size_t
 
j
 = 0; j < 
m_mesh
.
m_edges
.
	`size
(); ++j )

900 i‡–
m_mesh
.
	`edge_is_dñëed
(
j
) ) { ; }

902 
Vec3d
 
edge_Øbb_low
, 
edge_Øbb_high
;

903 
	`edge_°©ic_bounds
–
j
, 
edge_Øbb_low
, 
edge_Øbb_high
 );

905 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
edge_Øbb_low
, 
edge_Øbb_high
 ) )

907 
bruã_f‹˚_ovîœµög_edges
.
	`push_back
–
j
 );

911 i‡–
ovîœµög_edges
.
	`size
(Ë!
bruã_f‹˚_ovîœµög_edges
.size() )

914 
°d
::
cout
 << "edgê" << 
i
 << ": " << 
m_mesh
.
m_edges
[i] << std::
ídl
;

915 
°d
::
cout
 << "ovîœµög_edges.size(): " << 
ovîœµög_edges
.
	`size
(Ë<< std::
ídl
;

916  
size_t
 
k
 = 0; k < 
ovîœµög_edges
.
	`size
(); ++k )

918 
°d
::
cout
 << 
k
 << ": " << 
ovîœµög_edges
[k] << std::
ídl
;

921 
°d
::
cout
 << "bruã_f‹˚_ovîœµög_edges.size(): " << 
bruã_f‹˚_ovîœµög_edges
.
	`size
(Ë<< std::
ídl
;

922  
size_t
 
k
 = 0; k < 
bruã_f‹˚_ovîœµög_edges
.
	`size
(); ++k )

924 
°d
::
cout
 << 
k
 << ": " << 
bruã_f‹˚_ovîœµög_edges
[k] << std::
ídl
;

929 
	`as£π
–
ovîœµög_edges
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_edges
.size() );

931 
°d
::
	`s‹t
–
ovîœµög_edges
.
	`begö
(), ovîœµög_edges.
	`íd
() );

932 
°d
::
	`s‹t
–
bruã_f‹˚_ovîœµög_edges
.
	`begö
(), bruã_f‹˚_ovîœµög_edges.
	`íd
() );

934  
size_t
 
k
 = 0; k < 
ovîœµög_edges
.
	`size
(); ++k )

936 
	`as£π
–
ovîœµög_edges
[
k
] =
bruã_f‹˚_ovîœµög_edges
[k] );

944  
size_t
 
i
 = 0; i < 
m_mesh
.
	`num_åüngÀs
(); ++i )

946 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

950 
Vec3d
 
Øbb_low
, 
Øbb_high
;

951 
	`åüngÀ_°©ic_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

953 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_vîti˚s
;

954 
m_brﬂd_pha£
->
	`gë_pŸítül_vîãx_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_vîti˚s
 );

957  
k
 = 0; k < ()
ovîœµög_vîti˚s
.
	`size
(); ++k )

959 i‡–
m_mesh
.
	`vîãx_is_dñëed
–
ovîœµög_vîti˚s
[
k
] ) )

961 
ovîœµög_vîti˚s
.
	`îa£
–ovîœµög_vîti˚s.
	`begö
(Ë+ 
k
 );

962 --
k
;

967 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_vîti˚s
;

968  
size_t
 
j
 = 0; j < 
	`gë_num_vîti˚s
(); ++j )

970 i‡–
m_mesh
.
	`vîãx_is_dñëed
(
j
) ) { ; }

972 
Vec3d
 
vîãx_Øbb_low
, 
vîãx_Øbb_high
;

973 
	`vîãx_°©ic_bounds
–
j
, 
vîãx_Øbb_low
, 
vîãx_Øbb_high
 );

975 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
vîãx_Øbb_low
, 
vîãx_Øbb_high
 ) )

977 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`push_back
–
j
 );

981 i‡–
ovîœµög_vîti˚s
.
	`size
(Ë!
bruã_f‹˚_ovîœµög_vîti˚s
.size() )

983 
°d
::
cout
 << "åüngÀ " << 
i
 << ": " << 
m_mesh
.
	`gë_åüngÀ
(iË<< std::
ídl
;

984 
°d
::
cout
 << "ovîœµög_vîti˚s.size(): " << 
ovîœµög_vîti˚s
.
	`size
(Ë<< std::
ídl
;

985  
size_t
 
k
 = 0; k < 
ovîœµög_vîti˚s
.
	`size
(); ++k )

987 
°d
::
cout
 << 
k
 << ": " << 
ovîœµög_vîti˚s
[k] << " --- ";

988 
°d
::
cout
 << "i†dñëed: " << 
m_mesh
.
	`vîãx_is_dñëed
–
ovîœµög_vîti˚s
[
k
] ) << std::
ídl
;

991 
°d
::
cout
 << "bruã_f‹˚_ovîœµög_vîti˚s.size(): " << 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`size
(Ë<< std::
ídl
;

992  
size_t
 
k
 = 0; k < 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`size
(); ++k )

994 
°d
::
cout
 << 
k
 << ": " << 
bruã_f‹˚_ovîœµög_vîti˚s
[k] << " --- ";

995 
°d
::
cout
 << "i†dñëed: " << 
m_mesh
.
	`vîãx_is_dñëed
–
bruã_f‹˚_ovîœµög_vîti˚s
[
k
] ) << std::
ídl
;

999 
	`as£π
–
ovîœµög_vîti˚s
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_vîti˚s
.size() );

1001 
°d
::
	`s‹t
–
ovîœµög_vîti˚s
.
	`begö
(), ovîœµög_vîti˚s.
	`íd
() );

1002 
°d
::
	`s‹t
–
bruã_f‹˚_ovîœµög_vîti˚s
.
	`begö
(), bruã_f‹˚_ovîœµög_vîti˚s.
	`íd
() );

1004  
size_t
 
k
 = 0; k < 
ovîœµög_vîti˚s
.
	`size
(); ++k )

1006 
	`as£π
–
ovîœµög_vîti˚s
[
k
] =
bruã_f‹˚_ovîœµög_vîti˚s
[k] );

1012 
	}
}

1018 
	gDy«micSurÁ˚
::
	$check_c⁄töuous_brﬂd_pha£_is_up_to_d©e
() const

1027  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

1029 i‡–
m_mesh
.
	`vîãx_is_dñëed
(
i
) ) { ; }

1033 
Vec3d
 
Øbb_low
, 
Øbb_high
;

1034 
	`vîãx_c⁄töuous_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

1036 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

1037 
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
(
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
);

1040  
k
 = 0; k < ()
ovîœµög_åüngÀs
.
	`size
(); ++k )

1042 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
–
ovîœµög_åüngÀs
[
k
] ) )

1044 
ovîœµög_åüngÀs
.
	`îa£
–ovîœµög_åüngÀs.
	`begö
(Ë+ 
k
 );

1045 --
k
;

1051 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_åüngÀs
;

1053  
size_t
 
j
 = 0; j < 
m_mesh
.
	`num_åüngÀs
(); ++j )

1055 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
(
j
) ) { ; }

1057 
Vec3d
 
åi_Øbb_low
, 
åi_Øbb_high
;

1058 
	`åüngÀ_c⁄töuous_bounds
–
j
, 
åi_Øbb_low
, 
åi_Øbb_high
 );

1060 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
åi_Øbb_low
, 
åi_Øbb_high
 ) )

1062 
bruã_f‹˚_ovîœµög_åüngÀs
.
	`push_back
–
j
 );

1066 
	`as£π
–
ovîœµög_åüngÀs
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_åüngÀs
.size() );

1068 
°d
::
	`s‹t
(
ovîœµög_åüngÀs
.
	`begö
(), ovîœµög_åüngÀs.
	`íd
());

1069 
°d
::
	`s‹t
(
bruã_f‹˚_ovîœµög_åüngÀs
.
	`begö
(), bruã_f‹˚_ovîœµög_åüngÀs.
	`íd
());

1071  
size_t
 
k
 = 0; k < 
ovîœµög_åüngÀs
.
	`size
(); ++k )

1073 
	`as£π
–
ovîœµög_åüngÀs
[
k
] =
bruã_f‹˚_ovîœµög_åüngÀs
[k] );

1082  
size_t
 
i
 = 0; i < 
m_mesh
.
m_edges
.
	`size
(); ++i )

1084 i‡–
m_mesh
.
	`edge_is_dñëed
(
i
) ) { ; }

1088 
Vec3d
 
Øbb_low
, 
Øbb_high
;

1089 
	`edge_c⁄töuous_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

1091 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

1092 
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_edges
 );

1095  
k
 = 0; k < ()
ovîœµög_edges
.
	`size
(); ++k )

1097 i‡–
m_mesh
.
	`edge_is_dñëed
–
ovîœµög_edges
[
k
] ) )

1099 
ovîœµög_edges
.
	`îa£
–ovîœµög_edges.
	`begö
(Ë+ 
k
 );

1100 --
k
;

1105 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_edges
;

1106  
size_t
 
j
 = 0; j < 
m_mesh
.
m_edges
.
	`size
(); ++j )

1108 i‡–
m_mesh
.
	`edge_is_dñëed
(
j
) ) { ; }

1110 
Vec3d
 
edge_Øbb_low
, 
edge_Øbb_high
;

1111 
	`edge_c⁄töuous_bounds
–
j
, 
edge_Øbb_low
, 
edge_Øbb_high
 );

1113 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
edge_Øbb_low
, 
edge_Øbb_high
 ) )

1115 
bruã_f‹˚_ovîœµög_edges
.
	`push_back
–
j
 );

1119 i‡–
ovîœµög_edges
.
	`size
(Ë!
bruã_f‹˚_ovîœµög_edges
.size() )

1122 
°d
::
cout
 << "edgê" << 
i
 << ": " << 
m_mesh
.
m_edges
[i] << std::
ídl
;

1123 
°d
::
cout
 << "ovîœµög_edges.size(): " << 
ovîœµög_edges
.
	`size
(Ë<< std::
ídl
;

1124  
size_t
 
k
 = 0; k < 
ovîœµög_edges
.
	`size
(); ++k )

1126 
°d
::
cout
 << 
k
 << ": " << 
ovîœµög_edges
[k] << std::
ídl
;

1129 
°d
::
cout
 << "bruã_f‹˚_ovîœµög_edges.size(): " << 
bruã_f‹˚_ovîœµög_edges
.
	`size
(Ë<< std::
ídl
;

1130  
size_t
 
k
 = 0; k < 
bruã_f‹˚_ovîœµög_edges
.
	`size
(); ++k )

1132 
°d
::
cout
 << 
k
 << ": " << 
bruã_f‹˚_ovîœµög_edges
[k] << std::
ídl
;

1137 
	`as£π
–
ovîœµög_edges
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_edges
.size() );

1139 
°d
::
	`s‹t
–
ovîœµög_edges
.
	`begö
(), ovîœµög_edges.
	`íd
() );

1140 
°d
::
	`s‹t
–
bruã_f‹˚_ovîœµög_edges
.
	`begö
(), bruã_f‹˚_ovîœµög_edges.
	`íd
() );

1142  
size_t
 
k
 = 0; k < 
ovîœµög_edges
.
	`size
(); ++k )

1144 
	`as£π
–
ovîœµög_edges
[
k
] =
bruã_f‹˚_ovîœµög_edges
[k] );

1152  
size_t
 
i
 = 0; i < 
m_mesh
.
	`num_åüngÀs
(); ++i )

1154 i‡–
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

1158 
Vec3d
 
Øbb_low
, 
Øbb_high
;

1159 
	`åüngÀ_c⁄töuous_bounds
–
i
, 
Øbb_low
, 
Øbb_high
 );

1161 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_vîti˚s
;

1162 
m_brﬂd_pha£
->
	`gë_pŸítül_vîãx_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_vîti˚s
 );

1165  
k
 = 0; k < ()
ovîœµög_vîti˚s
.
	`size
(); ++k )

1167 i‡–
m_mesh
.
	`vîãx_is_dñëed
–
ovîœµög_vîti˚s
[
k
] ) )

1169 
ovîœµög_vîti˚s
.
	`îa£
–ovîœµög_vîti˚s.
	`begö
(Ë+ 
k
 );

1170 --
k
;

1175 
°d
::
ve˘‹
<
size_t
> 
bruã_f‹˚_ovîœµög_vîti˚s
;

1176  
size_t
 
j
 = 0; j < 
	`gë_num_vîti˚s
(); ++j )

1178 i‡–
m_mesh
.
	`vîãx_is_dñëed
(
j
) ) { ; }

1180 
Vec3d
 
vîãx_Øbb_low
, 
vîãx_Øbb_high
;

1181 
	`vîãx_c⁄töuous_bounds
–
j
, 
vîãx_Øbb_low
, 
vîãx_Øbb_high
 );

1183 i‡–
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
vîãx_Øbb_low
, 
vîãx_Øbb_high
 ) )

1185 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`push_back
–
j
 );

1189 i‡–
ovîœµög_vîti˚s
.
	`size
(Ë!
bruã_f‹˚_ovîœµög_vîti˚s
.size() )

1191 
°d
::
cout
 << "åüngÀ " << 
i
 << ": " << 
m_mesh
.
	`gë_åüngÀ
(iË<< std::
ídl
;

1192 
°d
::
cout
 << "ovîœµög_vîti˚s.size(): " << 
ovîœµög_vîti˚s
.
	`size
(Ë<< std::
ídl
;

1193  
size_t
 
k
 = 0; k < 
ovîœµög_vîti˚s
.
	`size
(); ++k )

1195 
°d
::
cout
 << 
k
 << ": " << 
ovîœµög_vîti˚s
[k] << " --- ";

1196 
°d
::
cout
 << "i†dñëed: " << 
m_mesh
.
	`vîãx_is_dñëed
–
ovîœµög_vîti˚s
[
k
] ) << std::
ídl
;

1199 
°d
::
cout
 << "bruã_f‹˚_ovîœµög_vîti˚s.size(): " << 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`size
(Ë<< std::
ídl
;

1200  
size_t
 
k
 = 0; k < 
bruã_f‹˚_ovîœµög_vîti˚s
.
	`size
(); ++k )

1202 
°d
::
cout
 << 
k
 << ": " << 
bruã_f‹˚_ovîœµög_vîti˚s
[k] << " --- ";

1203 
°d
::
cout
 << "i†dñëed: " << 
m_mesh
.
	`vîãx_is_dñëed
–
bruã_f‹˚_ovîœµög_vîti˚s
[
k
] ) << std::
ídl
;

1205 
Vec3d
 
lo
, 
hi
;

1206 
boﬁ
 
is_sﬁid
 = 
	`vîãx_is_sﬁid
–
bruã_f‹˚_ovîœµög_vîti˚s
[
k
] );

1207 
m_brﬂd_pha£
->
	`gë_vîãx_Øbb
–
bruã_f‹˚_ovîœµög_vîti˚s
[
k
], 
is_sﬁid
, 
lo
, 
hi
 );

1208 
°d
::
cout
 << "AABB: " << 
lo
 << " - " << 
hi
 << std::
ídl
;

1209 
°d
::
cout
 << "x: " << 
pm_posôi⁄s
[
bruã_f‹˚_ovîœµög_vîti˚s
[
k
]] << ",Çew_x: " << 
pm_√wposôi⁄s
[bruã_f‹˚_ovîœµög_vîti˚s[k]] << std::
ídl
;

1211 
boﬁ
 
quîy_ovîœps_brﬂdpha£_Øbb
 = 
	`Øbbs_öãr£˘
–
Øbb_low
, 
Øbb_high
, 
lo
, 
hi
 );

1212 
°d
::
cout
 << "quîy_ovîœps_brﬂdpha£_Øbb: " << 
quîy_ovîœps_brﬂdpha£_Øbb
 << std::
ídl
;

1215 
BrﬂdPha£Grid
* 
grid_bf
 = 
°©ic_ˇ°
<BrﬂdPha£Grid*>(
m_brﬂd_pha£
);

1217 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
˚Œs
 = 
grid_bf
->
m_dy«mic_vîãx_grid
.
m_ñemítidxs
[ 
bruã_f‹˚_ovîœµög_vîti˚s
[
k
] ];

1218 
°d
::
cout
 << "˚Œs: " << std::
ídl
;

1219  
size_t
 
m
 = 0; m < 
˚Œs
.
	`size
(); ++m )

1221 
°d
::
cout
 << 
˚Œs
[
m
] << std::
ídl
;

1227 
	`as£π
–
ovîœµög_vîti˚s
.
	`size
(Ë=
bruã_f‹˚_ovîœµög_vîti˚s
.size() );

1229 
°d
::
	`s‹t
–
ovîœµög_vîti˚s
.
	`begö
(), ovîœµög_vîti˚s.
	`íd
() );

1230 
°d
::
	`s‹t
–
bruã_f‹˚_ovîœµög_vîti˚s
.
	`begö
(), bruã_f‹˚_ovîœµög_vîti˚s.
	`íd
() );

1232  
size_t
 
k
 = 0; k < 
ovîœµög_vîti˚s
.
	`size
(); ++k )

1234 
	`as£π
–
ovîœµög_vîti˚s
[
k
] =
bruã_f‹˚_ovîœµög_vîti˚s
[k] );

1239 
	}
}

	@eltopo3d/dynamicsurface.h

14 #i‚de‡
EL_TOPO_DYNAMICSURFACE_H


15 
	#EL_TOPO_DYNAMICSURFACE_H


	)

21 
	~<brﬂdpha£.h
>

22 
	~<cﬁlisi⁄pùñöe.h
>

23 
	~<n⁄de°ru˘ivërimesh.h
>

24 
	~<limôs
>

31 
˛ass
 
	gm_cﬁlisi⁄_pùñöe
;

43 ˛as†
	cDy«micSurÁ˚


46 
	mpublic
:

50 
Dy«micSurÁ˚
(c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
vs
,

51 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
ts
,

52 c⁄° 
°d
::
ve˘‹
<>& 
mas£s
,

53 
ö_¥oximôy_ïsû⁄
 = 1e-4,

54 
ö_‰i˘i⁄_c€fficõ¡
 = 0.0,

55 
boﬁ
 
ö_cﬁlisi⁄_ß„ty
 = 
åue
,

56 
boﬁ
 
ö_vîbo£
 = 
Ál£
 );

58 
	mvútuÆ
 ~
Dy«micSurÁ˚
();

60 
	m¥iv©e
:

63 
Dy«micSurÁ˚
( const DynamicSurface& );

64 
	mDy«micSurÁ˚
& 
	m›î©‹
=–c⁄° 
Dy«micSurÁ˚
& );

66 
	mpublic
:

73 
vútuÆ
 
öãgøã
–
dt
, & 
a˘uÆ_dt
 );

80 
∑πôi⁄_surÁ˚s
–
°d
::
ve˘‹
<
size_t
>& 
surÁ˚_ids
, std::ve˘‹< std::ve˘‹< size_t> >& 
surÁ˚s
 ) const;

84 
ölöe
 
	$gë_åüngÀ_¨ó
(
size_t
 
åi
) const;

85 
ölöe
 
	$gë_åüngÀ_¨ó
(c⁄° 
Vec3°
& 
åi
) const;

86 
ölöe
 
	$gë_åüngÀ_¨ó
(
size_t
 
v0
, size_à
v1
, size_à
v2
) const;

90 
ölöe
 
	$gë_mö_åüngÀ_¨ó
–
size_t
& 
out_åüngÀ_ödex
 ) const;

94 
ölöe
 
Vec3d
 
	$gë_åüngÀ_n‹mÆ
(
size_t
 
åi
) const;

95 
ölöe
 
Vec3d
 
	$gë_åüngÀ_n‹mÆ
(c⁄° 
Vec3°
& 
åi
) const;

96 
ölöe
 
Vec3d
 
	$gë_åüngÀ_n‹mÆ
(
size_t
 
v0
, size_à
v1
, size_à
v2
) const;

98 
ölöe
 
Vec3d
 
	$gë_åüngÀ_b¨y˚¡î
–
size_t
 
åüngÀ_ödex
 ) const;

103 
ölöe
 
Vec3d
 
	$gë_vîãx_n‹mÆ
–
size_t
 
vîãx
 ) const;

107 
	`gë_Æl_vîãx_n‹mÆs
–
°d
::
ve˘‹
<
Vec3d
>& 
n‹mÆs
 ) const;

111 
ölöe
 
Vec3d
 
	$gë_vîãx_n‹mÆ_max
–
size_t
 
vîãx_ödex
 ) const;

114 
ölöe
 
Vec3d
 
	$gë_edge_ve˘‹
–
size_t
 
edge_ödex
 ) const;

117 
ölöe
 
	$gë_edge_Àngth
–
size_t
 
edge_ödex
 ) const;

120 
ölöe
 
	$gë_avîage_edge_Àngth
() const;

123 
ölöe
 
	$gë_avîage_n⁄_sﬁid_edge_Àngth
() const;

126 
ölöe
 
boﬁ
 
	$vîãx_is_sﬁid
–
size_t
 
v
 ) const;

127 
ölöe
 
boﬁ
 
	$edge_is_sﬁid
–
size_t
 
e
 ) const;

128 
ölöe
 
boﬁ
 
	$åüngÀ_is_sﬁid
–
size_t
 
t
 ) const;

131 
ölöe
 
	$gë_surÁ˚_¨ó
( ) const;

134 
ölöe
 
	$gë_¥edi˘ed_surÁ˚_¨ó
() const;

137 
ölöe
 
	$gë_vﬁume
() const;

140 
ölöe
 
	$gë_¥edi˘ed_vﬁume
() const;

143 
	$di°™˚_to_surÁ˚
–c⁄° 
Vec3d
& 
p
, 
size_t
& 
out_˛o£°_åüngÀ
 ) const;

147 
	$˛assify_vîãx
–
size_t
 
v
 ) const;

154 
	`ªbuûd_°©ic_brﬂd_pha£
( );

157 
	`ªbuûd_c⁄töuous_brﬂd_pha£
( );

161 
	`upd©e_°©ic_brﬂd_pha£
–
size_t
 
vîãx_ödex
 );

162 
	`upd©e_c⁄töuous_brﬂd_pha£
–
size_t
 
vîãx_ödex
 );

165 
	$vîãx_°©ic_bounds
(
size_t
 
v
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

166 
	$edge_°©ic_bounds
(
size_t
 
e
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

167 
	$åüngÀ_°©ic_bounds
(
size_t
 
t
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

170 
	$vîãx_c⁄töuous_bounds
(
size_t
 
v
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

171 
	$edge_c⁄töuous_bounds
(
size_t
 
e
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

172 
	$åüngÀ_c⁄töuous_bounds
(
size_t
 
t
, 
Vec3d
 &
xmö
, Vec3d &
xmax
) const;

174 
	$check_°©ic_brﬂd_pha£_is_up_to_d©e
() const;

175 
	$check_c⁄töuous_brﬂd_pha£_is_up_to_d©e
() const;

177 
size_t
 
	$gë_num_vîti˚s
() const;

179 c⁄° 
Vec3d
& 
	$gë_posôi⁄
–
size_t
 
ödex
 ) const;

180 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
	$gë_posôi⁄s
( ) const;

181 
	`£t_posôi⁄
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
x
 );

182 
	`£t_Æl_posôi⁄s
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 );

183 
	`£t_Æl_posôi⁄s
–
size_t
 
n
, c⁄° * 
xs
 );

185 c⁄° 
Vec3d
& 
	$gë_√wposôi⁄
–
size_t
 
ödex
 ) const;

186 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
	$gë_√wposôi⁄s
( ) const;

187 
	`£t_√wposôi⁄
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
x
 );

188 
	`£t_Æl_√wposôi⁄s
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 );

189 
	`£t_Æl_√wposôi⁄s
–
size_t
 
n
, c⁄° * 
xs
 );

191 
ölöe
 
	`£t_posôi⁄s_to_√wposôi⁄s
();

197 
m_¥oximôy_ïsû⁄
;

200 
boﬁ
 
m_vîbo£
;

203 
boﬁ
 
m_cﬁlisi⁄_ß„ty
;

206 
°d
::
ve˘‹
<> 
m_mas£s
;

209 
N⁄De°ru˘iveTriMesh
 
m_mesh
;

212 
BrﬂdPha£
* 
m_brﬂd_pha£
;

215 
Cﬁlisi⁄Pùñöe
 
m_cﬁlisi⁄_pùñöe
;

218 
m_Øbb_∑ddög
;

220 
¥Ÿe˘ed
:

222 
‰õnd
 
˛ass
 
Cﬁlisi⁄Pùñöe
;

223 
‰õnd
 
˛ass
 
Im∑˘Z⁄eSﬁvî
;

224 
‰õnd
 
˛ass
 
MeshSmoŸhî
;

226 
°d
::
ve˘‹
<
Vec3d
> 
pm_posôi⁄s
, 
pm_√wposôi⁄s
;

229 
°d
::
ve˘‹
<
Vec3d
> 
m_vñocôõs
;

244 
ölöe
 
	$åüngÀ_¨ó
–c⁄° 
Vec3d
& 
v0
, c⁄° Vec3d &
v1
, c⁄° Vec3d &
v2
 )

246  0.5 * 
	`mag
–
	`¸oss
–
v1
 - 
v0
, 
v2
 - v0 ) );

247 
	}
}

255 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_¨ó
(
size_t
 
åi
) const

257 c⁄° 
Vec3°
 &
t
 = 
m_mesh
.
	`gë_åüngÀ
–
åi
 );

258  
	`gë_åüngÀ_¨ó
(
t
[0],Å[1],Å[2]);

259 
	}
}

267 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_¨ó
(c⁄° 
Vec3°
& 
åi
) const

269  
	`gë_åüngÀ_¨ó
(
åi
[0],Åri[1],Åri[2]);

270 
	}
}

278 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_¨ó
(
size_t
 
v0
, size_à
v1
, size_à
v2
) const

280 c⁄° 
Vec3d
 &
p0
 = 
	`gë_posôi⁄
(
v0
);

281 c⁄° 
Vec3d
 &
p1
 = 
	`gë_posôi⁄
(
v1
);

282 c⁄° 
Vec3d
 &
p2
 = 
	`gë_posôi⁄
(
v2
);

284  0.5 * 
	`mag
(
	`¸oss
(
p1
-
p0
, 
p2
-p0));

285 
	}
}

293 
ölöe
 
Vec3d
 
	$åüngÀ_n‹mÆ
–c⁄° 
Vec3d
& 
v0
, c⁄° Vec3d &
v1
, c⁄° Vec3d &
v2
 )

295 
Vec3d
 
u
 = 
v1
 - 
v0
;

296 
Vec3d
 
v
 = 
v2
 - 
v0
;

297  
	`n‹mÆized
(
	`¸oss
(
u
, 
v
));

298 
	}
}

306 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_n‹mÆ
(
size_t
 
åi
) const

308 c⁄° 
Vec3°
 &
t
 = 
m_mesh
.
	`gë_åüngÀ
–
åi
 );

309  
	`gë_åüngÀ_n‹mÆ
(
t
[0],Å[1],Å[2]);

310 
	}
}

318 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_n‹mÆ
(c⁄° 
Vec3°
& 
åi
) const

320  
	`gë_åüngÀ_n‹mÆ
(
åi
[0],Åri[1],Åri[2]);

321 
	}
}

329 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_n‹mÆ
(
size_t
 
v0
, size_à
v1
, size_à
v2
) const

331 
Vec3d
 
u
 = 
	`gë_posôi⁄
(
v1
Ë- gë_posôi⁄(
v0
);

332 
Vec3d
 
v
 = 
	`gë_posôi⁄
(
v2
Ë- gë_posôi⁄(
v0
);

333  
	`n‹mÆized
(
	`¸oss
(
u
, 
v
));

334 
	}
}

338 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_åüngÀ_b¨y˚¡î
–
size_t
 
åüngÀ_ödex
 ) const

340 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
–
åüngÀ_ödex
 );

341  1.0 / 3.0 * ( 
	`gë_posôi⁄
–
åi
[0] ) + get_position(Åri[1] ) + get_position(Åri[2] ) );

342 
	}
}

350 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_mö_åüngÀ_¨ó
–
size_t
& 
åüngÀ_ödex
 ) const

352 
mö_¨ó
 = 
BIG_DOUBLE
;

353  
size_t
 
i
 = 0; i < 
m_mesh
.
	`num_åüngÀs
(); ++i )

355 i‡–
m_mesh
.
	`gë_åüngÀ
(
i
)[0] == m_mesh.get_triangle(i)[1] )

360 
¨ó
 = 
	`gë_åüngÀ_¨ó
(
i
);

361 i‡–
¨ó
 < 
mö_¨ó
 )

363 
mö_¨ó
 = 
¨ó
;

364 
åüngÀ_ödex
 = 
i
;

368  
mö_¨ó
;

369 
	}
}

377 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_vîãx_n‹mÆ
–
size_t
 
vîãx
 ) const

379 
Vec3d
 
	`n‹mÆ
(0,0,0);

380  
size_t
 
i
 = 0; i < 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx
].
	`size
(); ++i )

382 
n‹mÆ
 +
	`gë_åüngÀ_n‹mÆ
–
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx
][
i
] );

384 
n‹mÆ
 /(
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx
].
	`size
());

385 
n‹mÆ
 /
	`mag
(normal);

387  
n‹mÆ
;

388 
	}
}

396 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_vîãx_n‹mÆ_max
–
size_t
 
vîãx_ödex
 ) const

398 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öc_åis
 = 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_ödex
];

400 
Vec3d
 
	`sum_¸oss_¥odu˘s
(0,0,0);

402  
size_t
 
i
 = 0; i < 
öc_åis
.
	`size
(); ++i )

404 c⁄° 
Vec3°
& 
cuº_åi
 = 
m_mesh
.
	`gë_åüngÀ
–
öc_åis
[
i
] );

406 i‡–
cuº_åi
[0] == curr_tri[1] ) { ; }

408 
Vec2ui
 
Ÿhî_two
;

409 
N⁄De°ru˘iveTriMesh
::
	`ödex_ö_åüngÀ
–
cuº_åi
, 
vîãx_ödex
, 
Ÿhî_two
 );

411 
size_t
 
vîti
 = 
cuº_åi
[
Ÿhî_two
[0]];

412 
size_t
 
vîäext
 = 
cuº_åi
[
Ÿhî_two
[1]];

414 
Vec3d
 
vi
 = 
	`gë_posôi⁄
(
vîti
Ë- gë_posôi⁄(
vîãx_ödex
);

415 
Vec3d
 
v√xt
 = 
	`gë_posôi⁄
(
vîäext
Ë- gë_posôi⁄(
vîãx_ödex
);

417 
sum_¸oss_¥odu˘s
 +
	`¸oss
–
vi
, 
v√xt
 ) / ( 
	`mag2
(vi)*mag2(vnext) );

420 
sum_¸oss_¥odu˘s
 /
	`mag
( sum_cross_products );

422  
sum_¸oss_¥odu˘s
;

423 
	}
}

431 
ölöe
 
Vec3d
 
	gDy«micSurÁ˚
::
	$gë_edge_ve˘‹
–
size_t
 
edge_ödex
 ) const

433  ( 
	`gë_posôi⁄
–
m_mesh
.
m_edges
[
edge_ödex
][1] ) - get_position( m_mesh.m_edges[edge_index][0] ) );

434 
	}
}

442 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_edge_Àngth
–
size_t
 
edge_ödex
 ) const

444  
	`mag
–
	`gë_posôi⁄
–
m_mesh
.
m_edges
[
edge_ödex
][1] ) - get_position( m_mesh.m_edges[edge_index][0] ) );

445 
	}
}

453 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_avîage_edge_Àngth
() const

455 
sum_Àngths
 = 0;

456  
size_t
 
i
 = 0; i < 
m_mesh
.
m_edges
.
	`size
(); ++i )

458 c⁄° 
Vec2°
& 
e
 = 
m_mesh
.
m_edges
[
i
];

459 i‡–
e
[0] ==É[1] ) { ; }

460 
sum_Àngths
 +
	`mag
–
	`gë_posôi⁄
(
e
[1]) - get_position(e[0]) );

462  
sum_Àngths
 / (Ë
m_mesh
.
m_edges
.
	`size
();

463 
	}
}

471 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_avîage_n⁄_sﬁid_edge_Àngth
() const

473 
sum_Àngths
 = 0;

474 
size_t
 
cou¡ed_edges
 = 0;

475  
size_t
 
i
 = 0; i < 
m_mesh
.
m_edges
.
	`size
(); ++i )

477 c⁄° 
Vec2°
& 
e
 = 
m_mesh
.
m_edges
[
i
];

478 i‡–
e
[0] ==É[1] ) { ; }

479 i‡–
	`edge_is_sﬁid
(
i
) ) { ; }

480 
sum_Àngths
 +
	`mag
–
	`gë_posôi⁄
(
e
[1]) - get_position(e[0]) );

481 ++
cou¡ed_edges
;

483  
sum_Àngths
 / (Ë
cou¡ed_edges
;

484 
	}
}

492 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_surÁ˚_¨ó
( ) const

494 
¨ó
=0;

495 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
m_mesh
.
	`gë_åüngÀs
();

496 
size_t
 
t
=0;Å < 
åis
.
	`size
(); ++t )

498 i‡–
åis
[
t
][0] ==Åris[t][1] ) { ; }

499 
¨ó
 +
	`gë_åüngÀ_¨ó
(
t
);

501  
¨ó
;

502 
	}
}

509 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_¥edi˘ed_surÁ˚_¨ó
( ) const

511 
¨ó
=0;

512 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
m_mesh
.
	`gë_åüngÀs
();

513 
size_t
 
t
=0;Å < 
åis
.
	`size
(); ++t )

515 i‡–
åis
[
t
][0] ==Åris[t][1] ) { ; }

516 c⁄° 
Vec3d
 &
p0
 = 
	`gë_√wposôi⁄
(
åis
[
t
][0]);

517 c⁄° 
Vec3d
 &
p1
 = 
	`gë_√wposôi⁄
(
åis
[
t
][1]);

518 c⁄° 
Vec3d
 &
p2
 = 
	`gë_√wposôi⁄
(
åis
[
t
][2]);

519 
¨ó
 +0.5 * 
	`mag
(
	`¸oss
(
p1
-
p0
, 
p2
-p0));

521  
¨ó
;

522 
	}
}

530 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_vﬁume
( ) const

532 c⁄° 
öv_six
 = 1.0/6.0;

533 
vﬁume
=0;

534 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
m_mesh
.
	`gë_åüngÀs
();

535 
size_t
 
t
=0;Å < 
åis
.
	`size
(); ++t )

537 i‡–
åis
[
t
][0] ==Åris[t][1] ) { ; }

538 c⁄° 
Vec3°
& 
åi
 = 
åis
[
t
];

539 
vﬁume
 +
öv_six
 * 
	`åùÀ
(
	`gë_posôi⁄
(
åi
[0]), get_position(tri[1]), get_position(tri[2]));

541  
vﬁume
;

542 
	}
}

550 
ölöe
 
	gDy«micSurÁ˚
::
	$gë_¥edi˘ed_vﬁume
( ) const

552 c⁄° 
öv_six
 = 1.0/6.0;

553 
vﬁume
=0;

554 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
m_mesh
.
	`gë_åüngÀs
();

555 
size_t
 
t
=0;Å < 
åis
.
	`size
(); ++t )

557 i‡–
åis
[
t
][0] ==Åris[t][1] ) { ; }

558 c⁄° 
Vec3°
& 
åi
 = 
åis
[
t
];

559 
vﬁume
 +
öv_six
 * 
	`åùÀ
(
	`gë_√wposôi⁄
(
åi
[0]), get_newposition(tri[1]), get_newposition(tri[2]));

561  
vﬁume
;

562 
	}
}

570 
ölöe
 
boﬁ
 
	gDy«micSurÁ˚
::
	$vîãx_is_sﬁid
–
size_t
 
v
 ) const

572 
	`as£π
–
v
 < 
m_mas£s
.
	`size
() );

573  ( 
m_mas£s
[
v
] =
°d
::
numîic_limôs
<>::
	`öföôy
() );

574 
	}
}

582 
ölöe
 
boﬁ
 
	gDy«micSurÁ˚
::
	$edge_is_sﬁid
–
size_t
 
e
 ) const

584 c⁄° 
Vec2°
& 
edge
 = 
m_mesh
.
m_edges
[
e
];

585  ( 
	`vîãx_is_sﬁid
(
edge
[0]) || vertex_is_solid(edge[1]) );

586 
	}
}

594 
ölöe
 
boﬁ
 
	gDy«micSurÁ˚
::
	$åüngÀ_is_sﬁid
–
size_t
 
t
 ) const

596 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
(
t
);

597  ( 
	`vîãx_is_sﬁid
(
åi
[0]) || vertex_is_solid(tri[1]) || vertex_is_solid(tri[2]) );

598 
	}
}

603 
ölöe
 
size_t
 
	gDy«micSurÁ˚
::
	$gë_num_vîti˚s
() const

605  
pm_posôi⁄s
.
	`size
();

606 
	}
}

610 
ölöe
 c⁄° 
	gVec3d
& 
	gDy«micSurÁ˚
::
	$gë_posôi⁄
–
size_t
 
ödex
 ) const

612 
	`as£π
–
ödex
 < 
pm_posôi⁄s
.
	`size
() );

613  
pm_posôi⁄s
[
ödex
];

614 
	}
}

618 
ölöe
 c⁄° 
	g°d
::
ve˘‹
<
Vec3d
>& 
Dy«micSurÁ˚
::
	$gë_posôi⁄s
( ) const

620  
pm_posôi⁄s
;

621 
	}
}

625 
ölöe
 
	gDy«micSurÁ˚
::
	$£t_posôi⁄
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
x
 )

627 
	`as£π
–
ödex
 < 
pm_posôi⁄s
.
	`size
() );

628 
pm_posôi⁄s
[
ödex
] = 
x
;

631 i‡–
m_cﬁlisi⁄_ß„ty
 )

633 
	`upd©e_c⁄töuous_brﬂd_pha£
–
ödex
 );

635 
	}
}

639 
ölöe
 
	gDy«micSurÁ˚
::
£t_Æl_posôi⁄s
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 )

641 
pm_posôi⁄s
 = 
xs
;

642 
	gpm_√wposôi⁄s
 = 
xs
;

645 i‡–
	gm_cﬁlisi⁄_ß„ty
 )

647 
ªbuûd_c⁄töuous_brﬂd_pha£
();

653 
ölöe
 
	gDy«micSurÁ˚
::
	$£t_Æl_posôi⁄s
–
size_t
 
n
, c⁄° * 
xs
 )

655 
pm_posôi⁄s
.
	`ªsize
(
n
);

656  
size_t
 
i
 = 0; i < 
n
; ++i )

658 
pm_posôi⁄s
[
i
][0] = 
xs
[3*i+0];

659 
pm_posôi⁄s
[
i
][1] = 
xs
[3*i+1];

660 
pm_posôi⁄s
[
i
][2] = 
xs
[3*i+2];

663 
pm_√wposôi⁄s
 = 
pm_posôi⁄s
;

666 i‡–
m_cﬁlisi⁄_ß„ty
 )

668 
	`ªbuûd_c⁄töuous_brﬂd_pha£
();

670 
	}
}

674 
ölöe
 
	gDy«micSurÁ˚
::
	$£t_posôi⁄s_to_√wposôi⁄s
()

676 
pm_posôi⁄s
 = 
pm_√wposôi⁄s
;

678 i‡–
m_cﬁlisi⁄_ß„ty
 )

680 
	`ªbuûd_c⁄töuous_brﬂd_pha£
();

682 
	}
}

686 
ölöe
 c⁄° 
	gVec3d
& 
	gDy«micSurÁ˚
::
	$gë_√wposôi⁄
–
size_t
 
ödex
 ) const

688 
	`as£π
–
ödex
 < 
pm_√wposôi⁄s
.
	`size
() );

689  
pm_√wposôi⁄s
[
ödex
];

690 
	}
}

694 
ölöe
 
	gDy«micSurÁ˚
::
	$£t_√wposôi⁄
–
size_t
 
ödex
, c⁄° 
Vec3d
& 
x
 )

696 
	`as£π
–
ödex
 < 
pm_√wposôi⁄s
.
	`size
() );

698 
pm_√wposôi⁄s
[
ödex
] = 
x
;

701 i‡–
m_cﬁlisi⁄_ß„ty
 )

703 
	`upd©e_c⁄töuous_brﬂd_pha£
–
ödex
 );

706 
	}
}

710 
ölöe
 
	gDy«micSurÁ˚
::
£t_Æl_√wposôi⁄s
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 )

712 
pm_√wposôi⁄s
 = 
xs
;

715 i‡–
	gm_cﬁlisi⁄_ß„ty
 )

717 
ªbuûd_c⁄töuous_brﬂd_pha£
();

723 
ölöe
 
	gDy«micSurÁ˚
::
	$£t_Æl_√wposôi⁄s
–
size_t
 
n
, c⁄° * 
xs
 )

725 
pm_√wposôi⁄s
.
	`ªsize
(
n
);

726  
size_t
 
i
 = 0; i < 
n
; ++i )

728 
pm_√wposôi⁄s
[
i
][0] = 
xs
[3*i+0];

729 
pm_√wposôi⁄s
[
i
][1] = 
xs
[3*i+1];

730 
pm_√wposôi⁄s
[
i
][2] = 
xs
[3*i+2];

734 i‡–
m_cﬁlisi⁄_ß„ty
 )

736 
	`ªbuûd_c⁄töuous_brﬂd_pha£
();

738 
	}
}

742 
ölöe
 c⁄° 
	g°d
::
ve˘‹
<
Vec3d
>& 
Dy«micSurÁ˚
::
	$gë_√wposôi⁄s
( ) const

744  
pm_√wposôi⁄s
;

745 
	}
}

	@eltopo3d/edgecollapser.cpp

10 
	~<edgecﬁœp£r.h
>

12 
	~<brﬂdpha£.h
>

13 
	~<cﬁlisi⁄pùñöe.h
>

14 
	~<cﬁlisi⁄quîõs.h
>

15 
	~<n⁄de°ru˘ivërimesh.h
>

16 
	~<run°©s.h
>

17 
	~<subdivisi⁄scheme.h
>

18 
	~<sur·øck.h
>

19 
	~<åüngÀquÆôy.h
>

20 
	~<c°dio
>

28 
	gEdgeCﬁœp£r
::
PªEdgeCﬁœp£Info
::
	$PªEdgeCﬁœp£Info
–
size_t
 
edge
, size_à
vîãx_to_kìp
, size_à
vîãx_to_dñëe
, c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 ) :

29 
	`m_edge
–
edge
 ),

30 
	`m_vîãx_to_kìp
–
vîãx_to_kìp
 ),

31 
	`m_vîãx_to_dñëe
–
vîãx_to_dñëe
 ),

32 
	$m_vîãx_√w_posôi⁄
–
vîãx_√w_posôi⁄
 )

33 {
	}
}

41 
	gEdgeCﬁœp£r
::
Po°EdgeCﬁœp£Info
::Po°EdgeCﬁœp£Info–c⁄° 
PªEdgeCﬁœp£Info
& 
¥e_cﬁœp£_öfo
,

42 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_öcidít_to_edge
,

43 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_öcidít_to_dñëed_vîãx
,

44 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
√w_åüngÀs
,

45 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
edges_öcidít_to_dñëed_vîãx
 ) :

46 
m_¥e_cﬁœp£_öfo
(
¥e_cﬁœp£_öfo
),

47 
m_åüngÀs_öcidít_to_edge
(
åüngÀs_öcidít_to_edge
),

48 
m_åüngÀs_öcidít_to_dñëed_vîãx
(
åüngÀs_öcidít_to_dñëed_vîãx
),

49 
m_√w_åüngÀs
(
√w_åüngÀs
),

50 
	$m_edges_öcidít_to_dñëed_vîãx
–
edges_öcidít_to_dñëed_vîãx
 )

51 {
	}
}

60 
	gEdgeCﬁœp£r
::
	$EdgeCﬁœp£r
–
SurfTøck
& 
surf
, 
boﬁ
 
u£_curv©uª
, 
mö_curv©uª_mu…ùlõr
 ) :

61 
	`MeshO≥øt‹
(
surf
),

62 
	`m_mö_edge_Àngth
–
UNINITIALIZED_DOUBLE
 ),

63 
	`m_u£_curv©uª
–
u£_curv©uª
 ),

64 
	$m_mö_curv©uª_mu…ùlõr
–
mö_curv©uª_mu…ùlõr
 )

65 {
	}
}

75 
	gEdgeCﬁœp£r
::
gë_movög_åüngÀs
–
size_t
 
sour˚_vîãx
,

76 
size_t
 
de°ö©i⁄_vîãx
,

77 
size_t
,

78 
°d
::
ve˘‹
<
size_t
>& 
movög_åüngÀs
 )

84 
movög_åüngÀs
.
˛ór
();

86  
size_t
 
	gi
 = 0; i < 
	gm_surf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
sour˚_vîãx
].
size
(); ++i )

88 
	gmovög_åüngÀs
.
push_back
–
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
sour˚_vîãx
][
i
] );

90  
size_t
 
	gi
 = 0; i < 
	gm_surf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
de°ö©i⁄_vîãx
].
size
(); ++i )

92 
	gmovög_åüngÀs
.
push_back
–
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
de°ö©i⁄_vîãx
][
i
] );

126 
	gEdgeCﬁœp£r
::
gë_movög_edges
–
size_t
 
sour˚_vîãx
,

127 
size_t
 
de°ö©i⁄_vîãx
,

128 
size_t
,

129 
°d
::
ve˘‹
<
size_t
>& 
movög_edges
 )

132 
movög_edges
 = 
m_surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[ 
sour˚_vîãx
 ];

133 
	gmovög_edges
.
ö£π
–
movög_edges
.
íd
(), 
m_surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[ 
de°ö©i⁄_vîãx
 ].
begö
(), m_surf.m_mesh.m_vertex_to_edge_map[ destination_vertex ].end() );

159 
boﬁ
 
	gEdgeCﬁœp£r
::
	$cﬁœp£_edge_p£udo_mŸi⁄_öåodu˚s_cﬁlisi⁄
–
size_t
 
sour˚_vîãx
,

160 
size_t
 
de°ö©i⁄_vîãx
,

161 
size_t
 
edge_ödex
,

162 c⁄° 
Vec3d
& )

164 
	`as£π
–
m_surf
.
m_cﬁlisi⁄_ß„ty
 );

172 
°d
::
ve˘‹
<
size_t
> 
movög_åüngÀs
;

173 
	`gë_movög_åüngÀs
–
sour˚_vîãx
, 
de°ö©i⁄_vîãx
, 
edge_ödex
, 
movög_åüngÀs
 );

176 
°d
::
ve˘‹
<
size_t
> 
movög_edges
;

177 
	`gë_movög_edges
–
sour˚_vîãx
, 
de°ö©i⁄_vîãx
, 
edge_ödex
, 
movög_edges
 );

182 
Cﬁlisi⁄C™did©eSë
 
cﬁlisi⁄_ˇndid©es
;

185  
size_t
 
i
 = 0; i < 
movög_åüngÀs
.
	`size
(); ++i )

187 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`add_åüngÀ_ˇndid©es
–
movög_åüngÀs
[
i
], 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

191 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`add_poöt_ˇndid©es
–
sour˚_vîãx
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

192 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`add_poöt_ˇndid©es
–
de°ö©i⁄_vîãx
, 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

195  
size_t
 
i
 = 0; i < 
movög_edges
.
	`size
(); ++i )

197 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`add_edge_ˇndid©es
–
movög_edges
[
i
], 
åue
,Årue, 
cﬁlisi⁄_ˇndid©es
 );

202  
size_t
 
i
 = 0; i < 
cﬁlisi⁄_ˇndid©es
.
	`size
(); ++i )

204 c⁄° 
Vec3°
& 
ˇndid©e
 = 
cﬁlisi⁄_ˇndid©es
[
i
];

205 
boﬁ
 
should_dñëe
 = 
Ál£
;

207 i‡–
ˇndid©e
[2] == 1 )

210 c⁄° 
Vec2°
& 
e0
 = 
m_surf
.
m_mesh
.
m_edges
[ 
ˇndid©e
[0] ];

211 c⁄° 
Vec2°
& 
e1
 = 
m_surf
.
m_mesh
.
m_edges
[ 
ˇndid©e
[1] ];

213 i‡–
e0
[0] =
sour˚_vîãx
 ||É0[1] =sour˚_vîãx || 
e1
[0] == source_vertex ||É1[1] == source_vertex )

215 i‡–
e0
[0] =
de°ö©i⁄_vîãx
 ||É0[1] =de°ö©i⁄_vîãx || 
e1
[0] == destination_vertex ||É1[1] == destination_vertex )

217 
should_dñëe
 = 
åue
;

225 
size_t
 
t
 = 
ˇndid©e
[0];

226 c⁄° 
Vec3°
& 
åi
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
(
t
);

227 
size_t
 
v
 = 
ˇndid©e
[1];

229 i‡–
v
 =
sour˚_vîãx
 || 
åi
[0] == source_vertex ||Åri[1] == source_vertex ||Åri[2] == source_vertex )

231 i‡–
v
 =
de°ö©i⁄_vîãx
 || 
åi
[0] == destination_vertex ||Åri[1] == destination_vertex ||Åri[2] == destination_vertex )

233 
should_dñëe
 = 
åue
;

238 i‡–
should_dñëe
 )

240 
cﬁlisi⁄_ˇndid©es
.
	`îa£
–cﬁlisi⁄_ˇndid©es.
	`begö
(Ë+ 
i
 );

241 --
i
;

246 
Cﬁlisi⁄
 
cﬁlisi⁄
;

247 i‡–
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`™y_cﬁlisi⁄
–
cﬁlisi⁄_ˇndid©es
, 
cﬁlisi⁄
 ) )

249  
åue
;

252  
Ál£
;

254 
	}
}

263 
boﬁ
 
	gEdgeCﬁœp£r
::
	$cﬁœp£_edge_öåodu˚s_n‹mÆ_övîsi⁄
–
size_t
 
sour˚_vîãx
,

264 
size_t
 
de°ö©i⁄_vîãx
,

265 
size_t
 
edge_ödex
,

266 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 )

270 
°d
::
ve˘‹
< 
size_t
 >& 
åüngÀs_öcidít_to_edge
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
];

273 
°d
::
ve˘‹
<
size_t
> 
movög_åüngÀs
;

274  
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
sour˚_vîãx
].
	`size
(); ++i )

276 
movög_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
sour˚_vîãx
][
i
] );

278  
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
de°ö©i⁄_vîãx
].
	`size
(); ++i )

280 
movög_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
de°ö©i⁄_vîãx
][
i
] );

287  
size_t
 
i
 = 0; i < 
movög_åüngÀs
.
	`size
(); ++i )

291 
boﬁ
 
åüngÀ_wûl_be_dñëed
 = 
Ál£
;

292  
size_t
 
j
 = 0; j < 
åüngÀs_öcidít_to_edge
.
	`size
(); ++j )

294 i‡–
movög_åüngÀs
[
i
] =
åüngÀs_öcidít_to_edge
[
j
] )

296 
åüngÀ_wûl_be_dñëed
 = 
åue
;

301 i‡–
åüngÀ_wûl_be_dñëed
 ) { ; }

303 c⁄° 
Vec3°
& 
cuºít_åüngÀ
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
movög_åüngÀs
[
i
] );

304 
Vec3d
 
ﬁd_n‹mÆ
 = 
m_surf
.
	`gë_åüngÀ_n‹mÆ
–
cuºít_åüngÀ
 );

306 
Vec3d
 
√w_n‹mÆ
;

308 
√w_¨ó
;

309 i‡–
cuºít_åüngÀ
[0] =
sour˚_vîãx
 || cuºít_åüngÀ[0] =
de°ö©i⁄_vîãx
 )

311 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
vîãx_√w_posôi⁄
, 
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[1]), m_surf.get_position(current_triangle[2]) );

312 
√w_¨ó
 = 
	`åüngÀ_¨ó
–
vîãx_√w_posôi⁄
, 
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[1]), m_surf.get_position(current_triangle[2]) );

314 i‡–
cuºít_åüngÀ
[1] =
sour˚_vîãx
 || cuºít_åüngÀ[1] =
de°ö©i⁄_vîãx
 )

316 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[0]), 
vîãx_√w_posôi⁄
, m_surf.get_position(current_triangle[2]) );

317 
√w_¨ó
 = 
	`åüngÀ_¨ó
–
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[0]), 
vîãx_√w_posôi⁄
, m_surf.get_position(current_triangle[2]) );

321 
	`as£π
–
cuºít_åüngÀ
[2] =
sour˚_vîãx
 || cuºít_åüngÀ[2] =
de°ö©i⁄_vîãx
 );

322 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[0]), m_surf.gë_posôi⁄(cuºít_åüngÀ[1]), 
vîãx_√w_posôi⁄
 );

323 
√w_¨ó
 = 
	`åüngÀ_¨ó
–
m_surf
.
	`gë_posôi⁄
(
cuºít_åüngÀ
[0]), m_surf.gë_posôi⁄(cuºít_åüngÀ[1]), 
vîãx_√w_posôi⁄
 );

326 i‡–
	`dŸ
–
√w_n‹mÆ
, 
ﬁd_n‹mÆ
 ) < 1e-5 )

328 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "cﬁœp£Édgêöåodu˚†n‹mÆ invîsi⁄" << std::
ídl
; }

329  
åue
;

332 i‡–
√w_¨ó
 < 
m_surf
.
m_mö_åüngÀ_¨ó
 )

334 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "cﬁœp£Édgêöåodu˚†töyÅrüngÀáªa" << std::
ídl
; }

335  
åue
;

340  
Ál£
;

342 
	}
}

351 
boﬁ
 
	gEdgeCﬁœp£r
::
	$cﬁœp£_edge_öåodu˚s_vﬁume_ch™ge
–
size_t
 
sour˚_vîãx
,

352 
size_t
 
edge_ödex
,

353 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 )

359 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öc_åis
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
];

361  
size_t
 
i
 = 0; i < 
öc_åis
.
	`size
(); ++i )

363 i‡–
m_surf
.
	`gë_åüngÀ_¨ó
–
öc_åis
[
i
] ) < m_surf.
m_mö_åüngÀ_¨ó
 )

365  
Ál£
;

373 c⁄° 
°d
::
ve˘‹
< 
size_t
 >& 
åüngÀs_öcidít_to_vîãx
 = 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
sour˚_vîãx
];

374 
vﬁume_ch™ge
 = 0;

376  
size_t
 
i
 = 0; i < 
åüngÀs_öcidít_to_vîãx
.
	`size
(); ++i )

378 c⁄° 
Vec3°
& 
öc_åi
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
åüngÀs_öcidít_to_vîãx
[
i
] );

379 
vﬁume_ch™ge
 +
	`sig√d_vﬁume
–
vîãx_√w_posôi⁄
, 
m_surf
.
	`gë_posôi⁄
(
öc_åi
[0]), m_surf.get_position(inc_tri[1]), m_surf.get_position(inc_tri[2]) );

382 i‡–
	`Ábs
(
vﬁume_ch™ge
Ë> 
m_surf
.
m_max_vﬁume_ch™ge
 )

384 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "cﬁœp£Édgêöåodu˚†vﬁumêch™ge" << std::
ídl
; }

385  
åue
;

388  
Ál£
;

390 
	}
}

395 
boﬁ
 
	gEdgeCﬁœp£r
::
	$cﬁœp£_edge_öåodu˚s_bad_™gÀ
–
size_t
 
sour˚_vîãx
,

396 
size_t
 
de°ö©i⁄_vîãx
,

397 
size_t
 
edge_ödex
,

398 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 )

401 
°d
::
ve˘‹
<
size_t
> 
movög_åüngÀs
;

402 
	`gë_movög_åüngÀs
–
sour˚_vîãx
, 
de°ö©i⁄_vîãx
, 
edge_ödex
, 
movög_åüngÀs
 );

404  
size_t
 
i
 = 0; i < 
movög_åüngÀs
.
	`size
(); ++i )

406 c⁄° 
Vec3°
& 
åi
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
movög_åüngÀs
[
i
] );

408 
Vec3d
 
a
 = 
m_surf
.
	`gë_posôi⁄
–
åi
[0] );

410 i‡–
åi
[0] =
sour˚_vîãx
 ||Åri[0] =
de°ö©i⁄_vîãx
 )

412 
a
 = 
vîãx_√w_posôi⁄
;

415 
Vec3d
 
b
 = 
m_surf
.
	`gë_posôi⁄
–
åi
[1] );

417 i‡–
åi
[1] =
sour˚_vîãx
 ||Åri[1] =
de°ö©i⁄_vîãx
 )

419 
b
 = 
vîãx_√w_posôi⁄
;

422 
Vec3d
 
c
 = 
m_surf
.
	`gë_posôi⁄
–
åi
[2] );

424 i‡–
åi
[2] =
sour˚_vîãx
 ||Åri[2] =
de°ö©i⁄_vîãx
 )

426 
c
 = 
vîãx_√w_posôi⁄
;

429 
mö_™gÀ
 = 
	`mö_åüngÀ_™gÀ
–
a
, 
b
, 
c
 );

431 i‡–
	`ød2deg
(
mö_™gÀ
Ë< 
m_surf
.
m_mö_åüngÀ_™gÀ
 )

433  
åue
;

436 
max_™gÀ
 = 
	`max_åüngÀ_™gÀ
–
a
, 
b
, 
c
 );

438 i‡–
	`ød2deg
(
max_™gÀ
Ë> 
m_surf
.
m_max_åüngÀ_™gÀ
 )

440  
åue
;

445  
Ál£
;

447 
	}
}

455 
boﬁ
 
	gEdgeCﬁœp£r
::
	$cﬁœp£_edge
–
size_t
 
edge
 )

458 
size_t
 
vîãx_to_kìp
 = 
m_surf
.
m_mesh
.
m_edges
[
edge
][0];

459 
size_t
 
vîãx_to_dñëe
 = 
m_surf
.
m_mesh
.
m_edges
[
edge
][1];

461 
	`as£π
–!
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[
vîãx_to_kìp
] );

462 
	`as£π
–!
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[
vîãx_to_dñëe
] );

464 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "CﬁœpsögÉdge. Doomed vîãx: " << 
vîãx_to_dñëe
 << " --- VîãxÅÿkìp: " << 
vîãx_to_kìp
 << std::
ídl
; }

470 i‡–
Ál£
 =
m_surf
.
m_Ælow_n⁄_m™ifﬁd
 )

473 
boﬁ
 
would_be_n⁄_m™ifﬁd
 = 
Ál£
;

477  
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_dñëe
].
	`size
(); ++i )

479 
Vec3°
 
√w_åüngÀ
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–m_surf.m_mesh.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_dñëe
][
i
] );

480 i‡–
√w_åüngÀ
[0] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[0] = 
vîãx_to_kìp
; }

481 i‡–
√w_åüngÀ
[1] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[1] = 
vîãx_to_kìp
; }

482 i‡–
√w_åüngÀ
[2] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[2] = 
vîãx_to_kìp
; }

484  
size_t
 
j
 = 0; j < 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_kìp
].
	`size
(); ++j )

486 i‡–
N⁄De°ru˘iveTriMesh
::
	`åüngÀ_has_the£_vîts
–
m_surf
.
m_mesh
.
	`gë_åüngÀ
–m_surf.m_mesh.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_kìp
][
j
] ), 
√w_åüngÀ
 ) )

488 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "would_be_n⁄_m™ifﬁd" << std::
ídl
; }

489 
would_be_n⁄_m™ifﬁd
 = 
åue
;

490  
Ál£
;

495 
	`as£π
 ( !
would_be_n⁄_m™ifﬁd
 );

499 c⁄° 
°d
::
ve˘‹
< 
size_t
 >& 
åüngÀs_öcidít_to_edge
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge
];

500 
°d
::
ve˘‹
< 
size_t
 > 
thúd_vîti˚s
;

502  
size_t
 
i
 = 0; i < 
åüngÀs_öcidít_to_edge
.
	`size
(); ++i )

504 c⁄° 
Vec3°
& 
öc_åüngÀ
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
åüngÀs_öcidít_to_edge
[
i
] );

505 
size_t
 
›posôe
 = 
m_surf
.
m_mesh
.
	`gë_thúd_vîãx
–
edge
, 
öc_åüngÀ
 );

506 
thúd_vîti˚s
.
	`push_back
–
›posôe
 );

509 
°d
::
ve˘‹
<
size_t
> 
adj_vîti˚s0
, 
adj_vîti˚s1
;

510 
m_surf
.
m_mesh
.
	`gë_adja˚¡_vîti˚s
–
vîãx_to_dñëe
, 
adj_vîti˚s0
 );

511 
m_surf
.
m_mesh
.
	`gë_adja˚¡_vîti˚s
–
vîãx_to_kìp
, 
adj_vîti˚s1
 );

513  
size_t
 
i
 = 0; i < 
adj_vîti˚s0
.
	`size
(); ++i )

515  
size_t
 
j
 = 0; j < 
adj_vîti˚s1
.
	`size
(); ++j )

517 i‡–
adj_vîti˚s0
[
i
] =
adj_vîti˚s1
[
j
] )

519 
boﬁ
 
is_⁄_öc_åüngÀ
 = 
Ál£
;

520  
size_t
 
k
 = 0; k < 
thúd_vîti˚s
.
	`size
(); ++k )

522 i‡–
adj_vîti˚s0
[
i
] =
thúd_vîti˚s
[
k
] )

524 
is_⁄_öc_åüngÀ
 = 
åue
;

529 i‡–!
is_⁄_öc_åüngÀ
 )

532 i‡–
m_surf
.
m_vîbo£
 )

534 
°d
::
cout
 << " --- EdgêCﬁœp£r: foundá vîãxádja˚¡ÅÿbŸhÉdgêvîti˚s, which d€¢'àlõ o¿thêöcidíàåüngÀ†" << std::
ídl
;

535 
°d
::
cout
 << " --- Adja˚¡ vîãx: " << 
adj_vîti˚s0
[
i
] << ", incidentÅriangles: ";

538  
Ál£
;

552 c⁄° 
°d
::
ve˘‹
< 
size_t
 >& 
r_åüngÀs_öcidít_to_edge
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge
];

555  
size_t
 
i
=0; i < 
r_åüngÀs_öcidít_to_edge
.
	`size
(); ++i )

557 c⁄° 
Vec3°
& 
åüngÀ_i
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
r_åüngÀs_öcidít_to_edge
[
i
] );

559 i‡–
åüngÀ_i
[0] ==Åriangle_i[1] ||Åriangle_i[1] ==Åriangle_i[2] ||Åriangle_i[2] ==Åriangle_i[0] )

561 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "du∂iˇã vîti˚†⁄ÅrüngÀ" << std::
ídl
; }

562  
Ál£
;

565  
size_t
 
j
=
i
+1; j < 
r_åüngÀs_öcidít_to_edge
.
	`size
(); ++j )

567 c⁄° 
Vec3°
& 
åüngÀ_j
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
r_åüngÀs_öcidít_to_edge
[
j
] );

569 i‡–
N⁄De°ru˘iveTriMesh
::
	`åüngÀ_has_the£_vîts
–
åüngÀ_i
, 
åüngÀ_j
 ) )

571 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "twÿåüngÀ†sh¨êvîti˚s" << std::
ídl
; }

572  
Ál£
;

585 
Vec3d
 
vîãx_√w_posôi⁄
;

587 
	#USE_VERTEX_RANKS


	)

588 #ifde‡
USE_VERTEX_RANKS


590 
kìp_ønk
 = 
m_surf
.
	`˛assify_vîãx
–
vîãx_to_kìp
 );

591 
dñëe_ønk
 = 
m_surf
.
	`˛assify_vîãx
–
vîãx_to_dñëe
 );

593 i‡–
m_surf
.
m_Ælow_vîãx_movemít
 )

595 i‡–
kìp_ønk
 > 
dñëe_ønk
 )

597 
vîãx_√w_posôi⁄
 = 
m_surf
.
	`gë_posôi⁄
(
vîãx_to_kìp
);

599 i‡–
dñëe_ønk
 > 
kìp_ønk
 )

601 
size_t
 
tmp
 = 
vîãx_to_dñëe
;

602 
vîãx_to_dñëe
 = 
vîãx_to_kìp
;

603 
vîãx_to_kìp
 = 
tmp
;

605 
vîãx_√w_posôi⁄
 = 
m_surf
.
	`gë_posôi⁄
(
vîãx_to_kìp
);

610 
m_surf
.
m_subdivisi⁄_scheme
->
	`gíî©e_√w_midpoöt
–
edge
, m_surf, 
vîãx_√w_posôi⁄
 );

617 i‡–
dñëe_ønk
 > 
kìp_ønk
 )

619 
size_t
 
tmp
 = 
vîãx_to_dñëe
;

620 
vîãx_to_dñëe
 = 
vîãx_to_kìp
;

621 
vîãx_to_kìp
 = 
tmp
;

624 
vîãx_√w_posôi⁄
 = 
m_surf
.
	`gë_posôi⁄
(
vîãx_to_kìp
);

629 
m_surf
.
m_subdivisi⁄_scheme
->
	`gíî©e_√w_midpoöt
–
edge
, m_surf, 
vîãx_√w_posôi⁄
 );

634 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "CﬁœpsögÉdge. Doomed vîãx: " << 
vîãx_to_dñëe
 << " --- VîãxÅÿkìp: " << 
vîãx_to_kìp
 << std::
ídl
; }

642 i‡–
	`mag
 ( 
m_surf
.
	`gë_posôi⁄
(m_surf.
m_mesh
.
m_edges
[
edge
][1]) - m_surf.get_position(m_surf.m_mesh.m_edges[edge][0]) ) > 0 )

646 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, 
vîãx_√w_posôi⁄
 );

647 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_dñëe
, 
vîãx_√w_posôi⁄
 );

649 
boﬁ
 
vﬁume_ch™ge
 = 
	`cﬁœp£_edge_öåodu˚s_vﬁume_ch™ge
–
vîãx_to_dñëe
, 
edge
, 
vîãx_√w_posôi⁄
 );

651 i‡–
vﬁume_ch™ge
 )

654 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, m_surf.
	`gë_posôi⁄
(vertex_to_keep) );

655 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_dñëe
, m_surf.
	`gë_posôi⁄
(vertex_to_delete) );

657 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "cﬁœp£_vﬁume_ch™ge" << std::
ídl
; }

659  
Ál£
;

662 
boﬁ
 
n‹mÆ_övîsi⁄
 = 
	`cﬁœp£_edge_öåodu˚s_n‹mÆ_övîsi⁄
–
vîãx_to_dñëe
, 
vîãx_to_kìp
, 
edge
, 
vîãx_√w_posôi⁄
 );

664 i‡–
n‹mÆ_övîsi⁄
 )

667 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, m_surf.
	`gë_posôi⁄
(vertex_to_keep) );

668 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_dñëe
, m_surf.
	`gë_posôi⁄
(vertex_to_delete) );

670 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "n‹mÆ_övîsi⁄" << std::
ídl
; }

672  
Ál£
;

675 
boﬁ
 
bad_™gÀ
 = 
	`cﬁœp£_edge_öåodu˚s_bad_™gÀ
–
vîãx_to_dñëe
, 
vîãx_to_kìp
, 
edge
, 
vîãx_√w_posôi⁄
 );

677 i‡–
bad_™gÀ
 )

680 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, m_surf.
	`gë_posôi⁄
(vertex_to_keep) );

681 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_dñëe
, m_surf.
	`gë_posôi⁄
(vertex_to_delete) );

683 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "bad_™gÀ" << std::
ídl
; }

685  
Ál£
;

689 
boﬁ
 
cﬁlisi⁄
 = 
Ál£
;

691 i‡–
m_surf
.
m_cﬁlisi⁄_ß„ty
 )

693 
cﬁlisi⁄
 = 
	`cﬁœp£_edge_p£udo_mŸi⁄_öåodu˚s_cﬁlisi⁄
–
vîãx_to_dñëe
, 
vîãx_to_kìp
, 
edge
, 
vîãx_√w_posôi⁄
 );

696 i‡–
cﬁlisi⁄
 )

698 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "cﬁlisi⁄" << std::
ídl
; }

702 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, m_surf.
	`gë_posôi⁄
(vertex_to_keep) );

703 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_dñëe
, m_surf.
	`gë_posôi⁄
(vertex_to_delete) );

705 i‡–
cﬁlisi⁄
 )

708  
Ál£
;

712 
°d
::
ve˘‹
<
size_t
> 
edges_öcidít_to_dñëed_vîãx
 = 
m_surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_to_dñëe
];

714 
PªEdgeCﬁœp£Info
 
	`¥e_öfo
–
edge
, 
vîãx_to_kìp
, 
vîãx_to_dñëe
, 
vîãx_√w_posôi⁄
 );

716  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

718 i‡–
Ál£
 =
m_ob£rvîs
[
i
]->
	`›î©i⁄OK
(
m_surf
, 
¥e_öfo
) )

720  
Ál£
;

729 
m_surf
.
	`£t_posôi⁄
–
vîãx_to_kìp
, 
vîãx_√w_posôi⁄
 );

730 
m_surf
.
	`£t_√wposôi⁄
–
vîãx_to_kìp
, 
vîãx_√w_posôi⁄
 );

734 
°d
::
ve˘‹
< 
size_t
 > 
åüngÀs_öcidít_to_edge
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge
];

738  
size_t
 
i
=0; i < 
åüngÀs_öcidít_to_edge
.
	`size
(); ++i )

740 i‡–
m_surf
.
m_vîbo£
 )

742 
°d
::
cout
 << "ªmovögÉdge-öcidíàåüngÀ: " << 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
åüngÀs_öcidít_to_edge
[
i
] ) << std::
ídl
;

745 
m_surf
.
	`ªmove_åüngÀ
–
åüngÀs_öcidít_to_edge
[
i
] );

751 
°d
::
ve˘‹
< 
size_t
 > 
åüngÀs_öcidít_to_vîãx
 = 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_dñëe
];

752 
°d
::
ve˘‹
< 
size_t
 > 
√w_åüngÀs
;

754  
size_t
 
i
=0; i < 
åüngÀs_öcidít_to_vîãx
.
	`size
(); ++i )

756 
	`as£π
–
åüngÀs_öcidít_to_vîãx
[
i
] !
åüngÀs_öcidít_to_edge
[0] );

757 
	`as£π
–
åüngÀs_öcidít_to_vîãx
[
i
] !
åüngÀs_öcidít_to_edge
[1] );

759 
Vec3°
 
√w_åüngÀ
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
åüngÀs_öcidít_to_vîãx
[
i
] );

761 i‡–
√w_åüngÀ
[0] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[0] = 
vîãx_to_kìp
; }

762 i‡–
√w_åüngÀ
[1] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[1] = 
vîãx_to_kìp
; }

763 i‡–
√w_åüngÀ
[2] =
vîãx_to_dñëe
 ) {Çew_åüngÀ[2] = 
vîãx_to_kìp
; }

765 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "addög upd©edÅrüngÀ: " << 
√w_åüngÀ
 << std::
ídl
; }

767 
size_t
 
√w_åüngÀ_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀ
 );

769 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_åüngÀ_ödex
 );

770 
√w_åüngÀs
.
	`push_back
–
√w_åüngÀ_ödex
 );

773  
size_t
 
i
=0; i < 
åüngÀs_öcidít_to_vîãx
.
	`size
(); ++i )

775 i‡–
m_surf
.
m_vîbo£
 )

777 
°d
::
cout
 << "ªmovög vîãx-öcidíàåüngÀ: " << 
m_surf
.
m_mesh
.
	`gë_åüngÀ
–
åüngÀs_öcidít_to_vîãx
[
i
] ) << std::
ídl
;

780 
m_surf
.
	`ªmove_åüngÀ
–
åüngÀs_öcidít_to_vîãx
[
i
] );

785 
	`as£π
–
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_to_dñëe
].
	`em±y
() );

786 
m_surf
.
	`ªmove_vîãx
–
vîãx_to_dñëe
 );

788 
m_surf
.
m_mesh
.
	`upd©e_is_bound¨y_vîãx
–
vîãx_to_kìp
 );

791 
Po°EdgeCﬁœp£Info
 
	`po°_öfo
–
¥e_öfo
, 
åüngÀs_öcidít_to_edge
, 
åüngÀs_öcidít_to_vîãx
, 
√w_åüngÀs
, 
edges_öcidít_to_dñëed_vîãx
 );

793  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

795 
m_ob£rvîs
[
i
]->
	`›î©i⁄Occuºed
(
m_surf
, 
po°_öfo
);

798  
åue
;

800 
	}
}

808 
boﬁ
 
	gEdgeCﬁœp£r
::
	$edge_is_cﬁœpsibÀ
–
size_t
 
edge_ödex
 )

812 i‡–
m_surf
.
m_mesh
.
	`edge_is_dñëed
(
edge_ödex
ËË{  
Ál£
; }

813 i‡–
m_surf
.
	`edge_is_sﬁid
(
edge_ödex
ËË{  
Ál£
; }

816 i‡–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
].
	`size
(Ë!2 ) {  
Ál£
; }

817 i‡–
m_surf
.
m_mesh
.
m_is_bound¨y_edge
[
edge_ödex
] ) {  
Ál£
; }

820 c⁄° 
Vec2°
& 
edge
 = 
m_surf
.
m_mesh
.
m_edges
[
edge_ödex
];

821 i‡–
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[
edge
[0]] || m_surf.m_mesh.m_is_bound¨y_vîãx[edge[1]] ) {  
Ál£
; }

823  
åue
;

825 
	}
}

833 
	gEdgeCﬁœp£r
::
	$¥o˚ss_mesh
()

836 i‡–
m_surf
.
m_vîbo£
 )

838 
°d
::
cout
 << "\n\n\n---------------------- EdgeCﬁœp£r: cﬁœpsög ----------------------" << std::
ídl
;

839 
°d
::
cout
 << "m_mö_edge_Àngth: " << 
m_mö_edge_Àngth
;

840 
°d
::
cout
 << ", m_u£_curv©uª: " << 
m_u£_curv©uª
;

841 
°d
::
cout
 << ", m_mö_curv©uª_mu…ùlõr: " << 
m_mö_curv©uª_mu…ùlõr
 << std::
ídl
;

842 
°d
::
cout
 << "m_surf.m_cﬁlisi⁄_ß„ty: " << 
m_surf
.
m_cﬁlisi⁄_ß„ty
 << std::
ídl
;

845 
boﬁ
 
cﬁœp£_occuºed
 = 
åue
;

847  
cﬁœp£_occuºed
 )

849 
cﬁœp£_occuºed
 = 
Ál£
;

851 
	`as£π
–
m_surf
.
m_dúty_åüngÀs
.
	`size
() == 0 );

853 
°d
::
ve˘‹
<
S‹èbÀEdge
> 
s‹èbÀ_edges_to_åy
;

860  
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
m_edges
.
	`size
(); i++ )

862 i‡–
m_surf
.
m_mesh
.
	`edge_is_dñëed
(
i
) ) { ; }

863 i‡–
m_surf
.
	`edge_is_sﬁid
(
i
) ) { ; }

865 i‡–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
	`size
() < 2 ) { ; }

867 if–
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[m_surf.m_mesh.
m_edges
[
i
][0]] ||

868 
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[m_surf.m_mesh.
m_edges
[
i
][1]] )

873 
cuºít_Àngth
;

875 i‡–
m_u£_curv©uª
 )

877 
cuºít_Àngth
 = 
	`gë_curv©uª_sˇÀd_Àngth
–
m_surf
, m_surf.
m_mesh
.
m_edges
[
i
][0], m_surf.m_mesh.m_edges[i][1], 
m_mö_curv©uª_mu…ùlõr
, 1e+30 );

881 
cuºít_Àngth
 = 
m_surf
.
	`gë_edge_Àngth
(
i
);

884 i‡–
cuºít_Àngth
 < 
m_mö_edge_Àngth
 )

886 
s‹èbÀ_edges_to_åy
.
	`push_back
–
	`S‹èbÀEdge
–
i
, 
cuºít_Àngth
 ) );

894 
°d
::
	`s‹t
–
s‹èbÀ_edges_to_åy
.
	`begö
(), s‹èbÀ_edges_to_åy.
	`íd
() );

896 i‡–
m_surf
.
m_vîbo£
 )

898 
°d
::
cout
 << 
s‹èbÀ_edges_to_åy
.
	`size
(Ë<< " c™did©êedge†s‹ãd" << std::
ídl
;

899 
°d
::
cout
 << "tŸÆÉdges: " << 
m_surf
.
m_mesh
.
m_edges
.
	`size
(Ë<< std::
ídl
;

906  
size_t
 
si
 = 0; sò< 
s‹èbÀ_edges_to_åy
.
	`size
(); ++si )

908 
size_t
 
e
 = 
s‹èbÀ_edges_to_åy
[
si
].
edge_ödex
;

910 
	`as£π
–
e
 < 
m_surf
.
m_mesh
.
m_edges
.
	`size
() );

912 i‡–
m_surf
.
m_mesh
.
	`edge_is_dñëed
(
e
) ) { ; }

914 
edge_Àngth
;

916 i‡–
m_u£_curv©uª
 )

918 
edge_Àngth
 = 
	`gë_curv©uª_sˇÀd_Àngth
–
m_surf
, m_surf.
m_mesh
.
m_edges
[
e
][0], m_surf.m_mesh.m_edges[e][1], 
m_mö_curv©uª_mu…ùlõr
, 1e+30 );

922 
edge_Àngth
 = 
m_surf
.
	`gë_edge_Àngth
(
e
);

925 i‡–
edge_Àngth
 < 
m_mö_edge_Àngth
 )

927 i‡–
m_surf
.
m_vîbo£
 )

929 
	`¥ötf
–"cﬁœpsögÉdgê%d / %d,Üígth = %f\n", ()
e
, ()
m_surf
.
m_mesh
.
m_edges
.
	`size
(), 
edge_Àngth
 );

930 
	`¥ötf
–"edgê%d %d... ", ()
m_surf
.
m_mesh
.
m_edges
[
e
][0], ()m_surf.m_mesh.m_edges[e][1] );

933 i‡–
m_surf
.
m_mesh
.
m_edges
[
e
][0] == m_surf.m_mesh.m_edges[e][1] ) { ; }

934 i‡–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
].
	`size
() < 2 ) { ; }

936 if–
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[m_surf.m_mesh.
m_edges
[
e
][0]] ||

937 
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[m_surf.m_mesh.
m_edges
[
e
][1]] )

942 
boﬁ
 
ªsu…
 = 
	`cﬁœp£_edge
–
e
 );

944 i‡–
ªsu…
 )

947 
m_surf
.
	`åim_n⁄_m™ifﬁd
–m_surf.
m_dúty_åüngÀs
 );

950 
cﬁœp£_occuºed
 |
ªsu…
;

957 
	}
}

960 
	gEdgeCﬁœp£r
::
	$add_ob£rvî
–
EdgeCﬁœp£Ob£rvî
* 
ob£rvî
 )

962 
m_ob£rvîs
.
	`push_back
(
ob£rvî
);

963 
	}
}

	@eltopo3d/edgecollapser.h

10 #i‚de‡
EL_TOPO_EDGECOLLAPSER_H


11 
	#EL_TOPO_EDGECOLLAPSER_H


	)

17 
	~<mesh›î©‹.h
>

18 
	~<ve˘‹
>

19 
	~<vec.h
>

25 
˛ass
 
	gSurfTøck
;

26 
˛ass
 
	gEdgeCﬁœp£Ob£rvî
;

32 ˛as†
	cEdgeCﬁœp£r
 : 
public
 
MeshO≥øt‹


35 
public
:

37 ˛as†
	cPªEdgeCﬁœp£Info


39 
public
:

40 
PªEdgeCﬁœp£Info
–
size_t
 
edge
, size_à
vîãx_to_kìp
, size_à
vîãx_to_dñëe
, c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 );

41 
size_t
 
	mm_edge
;

42 
size_t
 
	mm_vîãx_to_kìp
;

43 
size_t
 
	mm_vîãx_to_dñëe
;

44 
Vec3d
 
	mm_vîãx_√w_posôi⁄
;

47 ˛as†
	cPo°EdgeCﬁœp£Info


49 
	gpublic
:

50 
Po°EdgeCﬁœp£Info
–c⁄° 
PªEdgeCﬁœp£Info
& 
¥e_cﬁœp£_öfo
,

51 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_öcidít_to_edge
,

52 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_öcidít_to_dñëed_vîãx
,

53 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
√w_åüngÀs
,

54 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
edges_öcidít_to_dñëed_vîãx
 );

56 
PªEdgeCﬁœp£Info
 
	gm_¥e_cﬁœp£_öfo
;

57 
	g°d
::
ve˘‹
< 
size_t
 > 
m_åüngÀs_öcidít_to_edge
;

58 
	g°d
::
ve˘‹
< 
size_t
 > 
m_åüngÀs_öcidít_to_dñëed_vîãx
;

59 
	g°d
::
ve˘‹
< 
size_t
 > 
m_√w_åüngÀs
;

60 
	g°d
::
ve˘‹
< 
size_t
 > 
m_edges_öcidít_to_dñëed_vîãx
;

65 
EdgeCﬁœp£r
–
SurfTøck
& 
surf
, 
boﬁ
 
u£_curv©uª
, 
mö_curv©uª_mu…ùlõr
 );

67 
boﬁ
 
smÆl_™gÀ_cﬁœp£_∑ss
();

69 
¥o˚ss_mesh
();

71 
add_ob£rvî
–
EdgeCﬁœp£Ob£rvî
* 
ob£rvî
 );

74 
	gm_mö_edge_Àngth
;

76 
boﬁ
 
	gm_u£_curv©uª
;

77 
	gm_mö_curv©uª_mu…ùlõr
;

80 
	g¥iv©e
:

82 
‰õnd
 
˛ass
 
SurfTøck
;

84 
boﬁ
 
edge_is_cﬁœpsibÀ
–
size_t
 
edge_ödex
 );

86 
gë_movög_åüngÀs
–
size_t
 
sour˚_vîãx
,

87 
size_t
 
de°ö©i⁄_vîãx
,

88 
size_t
 
edge_ödex
,

89 
°d
::
ve˘‹
<
size_t
>& 
movög_åüngÀs
 );

91 
gë_movög_edges
–
size_t
 
sour˚_vîãx
,

92 
size_t
 
de°ö©i⁄_vîãx
,

93 
size_t
 
edge_ödex
,

94 
°d
::
ve˘‹
<
size_t
>& 
movög_edges
 );

96 
boﬁ
 
cﬁœp£_edge_p£udo_mŸi⁄_öåodu˚s_cﬁlisi⁄
–
size_t
 
sour˚_vîãx
,

97 
size_t
 
de°ö©i⁄_vîãx
,

98 
size_t
 
edge_ödex
,

99 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 );

101 
boﬁ
 
cﬁœp£_edge_öåodu˚s_n‹mÆ_övîsi⁄
–
size_t
 
sour˚_vîãx
,

102 
size_t
 
de°ö©i⁄_vîãx
,

103 
size_t
 
edge_ödex
,

104 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 );

106 
boﬁ
 
cﬁœp£_edge_öåodu˚s_vﬁume_ch™ge
–
size_t
 
sour˚_vîãx
,

107 
size_t
 
edge_ödex
,

108 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 );

110 
boﬁ
 
cﬁœp£_edge_öåodu˚s_bad_™gÀ
–
size_t
 
sour˚_vîãx
,

111 
size_t
 
de°ö©i⁄_vîãx
,

112 
size_t
 
edge_ödex
,

113 c⁄° 
Vec3d
& 
vîãx_√w_posôi⁄
 );

115 
boﬁ
 
cﬁœp£_edge
–
size_t
 
edge
 );

120 
	g°d
::
ve˘‹
<
EdgeCﬁœp£Ob£rvî
*> 
m_ob£rvîs
;

131 ˛as†
	cEdgeCﬁœp£Ob£rvî


133 
	mpublic
:

135 
vútuÆ
 ~
	$EdgeCﬁœp£Ob£rvî
() {}

137 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° 
EdgeCﬁœp£r
::
PªEdgeCﬁœp£Info
& )

139  
åue
;

140 
	}
}

142 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° 
EdgeCﬁœp£r
::
Po°EdgeCﬁœp£Info
& )

144 
	}
}

	@eltopo3d/edgeflipper.cpp

10 
	~<edgeÊù≥r.h
>

12 
	~<brﬂdpha£.h
>

13 
	~<ccd_wøµî.h
>

14 
	~<cﬁlisi⁄quîõs.h
>

15 
	~<cﬁlisi⁄pùñöe.h
>

16 
	~<n⁄de°ru˘ivërimesh.h
>

17 
	~<run°©s.h
>

18 
	~<sur·øck.h
>

19 
	~<åüngÀquÆôy.h
>

28 
	gEdgeFlù≥r
::
PªEdgeFlùInfo
::
	$PªEdgeFlùInfo
–
size_t
 
edge
, size_à
åi0
, size_à
åi1
 ) :

29 
	`m_edge
(
edge
),

30 
	`m_åi0
(
åi0
),

31 
	$m_åi1
(
åi1
)

32 {
	}
}

42 
	gEdgeFlù≥r
::
Po°EdgeFlùInfo
::
	$Po°EdgeFlùInfo
(c⁄° 
PªEdgeFlùInfo
& 
¥e_•lô_öfo
,

43 
size_t
 
√w_åüngÀ_ödex_0
,

44 
size_t
 
√w_åüngÀ_ödex_1
 ) :

45 
	`m_¥e_Êù_öfo
(
¥e_•lô_öfo
),

46 
	`m_√w_åüngÀ_ödex_0
(
√w_åüngÀ_ödex_0
),

47 
	$m_√w_åüngÀ_ödex_1
(
√w_åüngÀ_ödex_1
)

48 {
	}
}

56 
boﬁ
 
	gEdgeFlù≥r
::
	$Êù_öåodu˚s_cﬁlisi⁄
–
size_t
 
edge_ödex
,

57 c⁄° 
Vec2°
& 
√w_edge
,

58 c⁄° 
Vec3°
& 
√w_åüngÀ_a
,

59 c⁄° 
Vec3°
& 
√w_åüngÀ_b
 )

62 
N⁄De°ru˘iveTriMesh
& 
m_mesh
 = 
m_surf
.m_mesh;

63 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 = 
m_surf
.
	`gë_posôi⁄s
();

65 i‡–!
m_surf
.
m_cﬁlisi⁄_ß„ty
 )

67  
Ál£
;

70 c⁄° 
Vec2°
& 
ﬁd_edge
 = 
m_mesh
.
m_edges
[
edge_ödex
];

72 
size_t
 
ãt_vîãx_ödi˚s
[4] = { 
ﬁd_edge
[0], old_edge[1], 
√w_edge
[0],Çew_edge[1] };

74 c⁄° 
Vec3d
 
ãt_vîãx_posôi⁄s
[4] = { 
xs
[ 
ãt_vîãx_ödi˚s
[0] ],

75 
xs
[ 
ãt_vîãx_ödi˚s
[1] ],

76 
xs
[ 
ãt_vîãx_ödi˚s
[2] ],

77 
xs
[ 
ãt_vîãx_ödi˚s
[3] ] };

79 
Vec3d
 
low
, 
high
;

80 
	`mömax
–
ãt_vîãx_posôi⁄s
[0],Åë_vîãx_posôi⁄s[1],Åë_vîãx_posôi⁄s[2],Åë_vîãx_posôi⁄s[3], 
low
, 
high
 );

82 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_vîti˚s
;

83 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_vîãx_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_vîti˚s
 );

86  
size_t
 
i
 = 0; i < 
ovîœµög_vîti˚s
.
	`size
(); ++i )

88 i‡–(
ovîœµög_vîti˚s
[
i
] =
ﬁd_edge
[0]) || (overlapping_vertices[i] == old_edge[1]) ||

89 (
ovîœµög_vîti˚s
[
i
] =
√w_edge
[0]) || (overlapping_vertices[i] ==Çew_edge[1]) )

94 i‡–
	`poöt_ãåahedr⁄_öãr£˘i⁄
–
xs
[
ovîœµög_vîti˚s
[
i
]], overlapping_vertices[i],

95 
ãt_vîãx_posôi⁄s
[0], 
ãt_vîãx_ödi˚s
[0],

96 
ãt_vîãx_posôi⁄s
[1], 
ãt_vîãx_ödi˚s
[1],

97 
ãt_vîãx_posôi⁄s
[2], 
ãt_vîãx_ödi˚s
[2],

98 
ãt_vîãx_posôi⁄s
[3], 
ãt_vîãx_ödi˚s
[3] ) )

100  
åue
;

108 
	`mömax
–
xs
[
√w_åüngÀ_a
[0]], xs[√w_åüngÀ_a[1]], xs[√w_åüngÀ_a[2]], 
low
, 
high
 );

109 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

110 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_edges
 );

112  
size_t
 
i
 = 0; i < 
ovîœµög_edges
.
	`size
(); ++i )

114 
size_t
 
ovîœµög_edge_ödex
 = 
ovîœµög_edges
[
i
];

115 c⁄° 
Vec2°
& 
edge
 = 
m_mesh
.
m_edges
[
ovîœµög_edge_ödex
];

117 i‡–
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
edge
[0],Édge[1],

118 
√w_åüngÀ_a
[0],Çew_triangle_a[1],Çew_triangle_a[2],

119 
xs
, 
m_surf
.
m_vîbo£
 ) )

121  
åue
;

129 
	`mömax
–
xs
[
√w_åüngÀ_b
[0]], xs[√w_åüngÀ_b[1]], xs[√w_åüngÀ_b[2]], 
low
, 
high
 );

131 
ovîœµög_edges
.
	`˛ór
();

132 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_edges
 );

134  
size_t
 
i
 = 0; i < 
ovîœµög_edges
.
	`size
(); ++i )

136 
size_t
 
ovîœµög_edge_ödex
 = 
ovîœµög_edges
[
i
];

137 c⁄° 
Vec2°
& 
edge
 = 
m_mesh
.
m_edges
[
ovîœµög_edge_ödex
];

139 i‡–
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
edge
[0],Édge[1],

140 
√w_åüngÀ_b
[0],Çew_triangle_b[1],Çew_triangle_b[2],

141 
xs
, 
m_surf
.
m_vîbo£
 ) )

143  
åue
;

151 
	`mömax
–
xs
[
√w_edge
[0]], xs[√w_edge[1]], 
low
, 
high
 );

152 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

153 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

155  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

157 c⁄° 
Vec3°
& 
åi
 = 
m_mesh
.
	`gë_åüngÀ
(
ovîœµög_åüngÀs
[
i
]);

159 i‡–
	`check_edge_åüngÀ_öãr£˘i⁄_by_ödex
–
√w_edge
[0],Çew_edge[1],

160 
åi
[0],Åri[1],Åri[2],

161 
xs
, 
m_surf
.
m_vîbo£
 ) )

163  
åue
;

167  
Ál£
;

169 
	}
}

173 
size_t
 
	gEdgeFlù≥r
::
	$vîãx_vÆí˚
–
size_t
 
vîãx_ödex
 )

175  
m_surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[ 
vîãx_ödex
 ].
	`size
();

176 
	}
}

178 
	gEdgeFlù≥r
::
	$tŸÆ_mesh_ªguœrôy
()

180 
R
 = 0;

181  
size_t
 
i
 = 0; i < 
m_surf
.
	`gë_num_vîti˚s
(); ++i )

183 i‡–
m_surf
.
m_mesh
.
	`vîãx_is_dñëed
–
i
 ) ) { ; }

185 
R
 +–
°©ic_ˇ°
<>(
	`vîãx_vÆí˚
(
i
)) - 6 ) * ( static_cast<>(vertex_valence(i)) - 6 );

188  
R
;

189 
	}
}

192 
boﬁ
 
	gEdgeFlù≥r
::
	$ªguœrôy_im¥oves
–
size_t
 
edge
,

193 
size_t
 ,

194 
size_t
 ,

195 
size_t
 
thúd_vîãx_0
,

196 
size_t
 
thúd_vîãx_1
 )

201 
±rdiff_t
 
R
 = 0;

203 
size_t
 
a
 = 
m_surf
.
m_mesh
.
m_edges
[ 
edge
 ][0];

204 
size_t
 
b
 = 
m_surf
.
m_mesh
.
m_edges
[ 
edge
 ][1];

206 
±rdiff_t
 
îr
 = 
	`vîãx_vÆí˚
(
a
) - 6;

207 
R
 +
îr
 *Érr;

209 
îr
 = 
	`vîãx_vÆí˚
(
b
) - 6;

210 
R
 +
îr
 *Érr;

212 
îr
 = 
	`vîãx_vÆí˚
(
thúd_vîãx_0
) - 6;

213 
R
 +
îr
 *Érr;

215 
îr
 = 
	`vîãx_vÆí˚
(
thúd_vîãx_1
) - 6;

216 
R
 +
îr
 *Érr;

218 
±rdiff_t
 
R_a·î
 = 0;

220 
îr
 = 
	`vîãx_vÆí˚
(
a
) - 1 - 6;

221 
R_a·î
 +
îr
 *Érr;

223 
îr
 = 
	`vîãx_vÆí˚
(
b
) - 1 - 6;

224 
R_a·î
 +
îr
 *Érr;

226 
îr
 = 
	`vîãx_vÆí˚
(
thúd_vîãx_0
) + 1 - 6;

227 
R_a·î
 +
îr
 *Érr;

229 
îr
 = 
	`vîãx_vÆí˚
(
thúd_vîãx_1
) + 1 - 6;

230 
R_a·î
 +
îr
 *Érr;

232  (
R_a·î
 < 
R
);

234 
	}
}

243 
boﬁ
 
	gEdgeFlù≥r
::
	$Êù_edge
–
size_t
 
edge
,

244 
size_t
 
åi0
,

245 
size_t
 
åi1
,

246 
size_t
 
thúd_vîãx_0
,

247 
size_t
 
thúd_vîãx_1
 )

249 
N⁄De°ru˘iveTriMesh
& 
m_mesh
 = 
m_surf
.m_mesh;

250 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 = 
m_surf
.
	`gë_posôi⁄s
();

252 
Vec2°
& 
edge_vîti˚s
 = 
m_mesh
.
m_edges
[
edge
];

255 
Vec2°
 
	`√w_edge
–
thúd_vîãx_0
, 
thúd_vîãx_1
);

260 
vﬁ
 = 
	`Ábs
–
	`sig√d_vﬁume
–
xs
[
edge_vîti˚s
[0]],

261 
xs
[
edge_vîti˚s
[1]],

262 
xs
[
√w_edge
[0]],

263 
xs
[
√w_edge
[1]] ) );

265 i‡–
vﬁ
 > 
m_surf
.
m_max_vﬁume_ch™ge
 )

267 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed: vﬁumêch™gê" << 
vﬁ
 << std::
ídl
; }

268  
Ál£
;

274 i‡–
Ál£
 =
m_surf
.
m_Ælow_n⁄_m™ifﬁd
 )

276  
size_t
 
i
 = 0; i < 
m_mesh
.
m_vîãx_to_edge_m≠
[ 
thúd_vîãx_0
 ].
	`size
(); ++i )

278 i‡––
m_mesh
.
m_edges
[ m_mesh.
m_vîãx_to_edge_m≠
[
thúd_vîãx_0
][
i
] ][0] =
thúd_vîãx_1
 ) ||

279 –
m_mesh
.
m_edges
[ m_mesh.
m_vîãx_to_edge_m≠
[
thúd_vîãx_0
][
i
] ][1] =
thúd_vîãx_1
 ) )

282 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Édgêexi°s" << std::
ídl
; }

283  
Ál£
;

291 i‡–
thúd_vîãx_0
 =
thúd_vîãx_1
 )

293 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed: degíî©êãt" << std::
ídl
; }

294  
Ál£
;

302 
size_t
 
√w_åüngÀ_thúd_vîãx_0
, 
√w_åüngÀ_thúd_vîãx_1
;

303 i‡–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
edge
][0], m_mesh.m_edges[edge][1], m_mesh.
	`gë_åüngÀ
(
åi0
) ) )

305 
	`as£π
–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
edge
][1], m_mesh.m_edges[edge][0], m_mesh.
	`gë_åüngÀ
(
åi1
) ) );

306 
√w_åüngÀ_thúd_vîãx_0
 = 
m_mesh
.
m_edges
[
edge
][1];

307 
√w_åüngÀ_thúd_vîãx_1
 = 
m_mesh
.
m_edges
[
edge
][0];

311 
	`as£π
–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
edge
][0], m_mesh.m_edges[edge][1], m_mesh.
	`gë_åüngÀ
(
åi1
) ) );

312 
	`as£π
–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
edge
][1], m_mesh.m_edges[edge][0], m_mesh.
	`gë_åüngÀ
(
åi0
) ) );

313 
√w_åüngÀ_thúd_vîãx_0
 = 
m_mesh
.
m_edges
[
edge
][0];

314 
√w_åüngÀ_thúd_vîãx_1
 = 
m_mesh
.
m_edges
[
edge
][1];

317 
Vec3°
 
	`√w_åüngÀ0
–
√w_edge
[0],Çew_edge[1], 
√w_åüngÀ_thúd_vîãx_0
 );

318 
Vec3°
 
	`√w_åüngÀ1
–
√w_edge
[1],Çew_edge[0], 
√w_åüngÀ_thúd_vîãx_1
 );

320 i‡–
m_surf
.
m_vîbo£
 )

322 
°d
::
cout
 << "Êù ---ÇewÅrüngÀ 0: " << 
√w_åüngÀ0
 << std::
ídl
;

323 
°d
::
cout
 << "Êù ---ÇewÅrüngÀ 1: " << 
√w_åüngÀ1
 << std::
ídl
;

329 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
åi0
), m_surf.gë_åüngÀ_n‹mÆ(
åi1
) ) > 0.0 )

331 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
√w_åüngÀ0
), m_surf.gë_åüngÀ_n‹mÆ(
√w_åüngÀ1
) ) < 0.0 )

333 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Ç‹mÆ invîsi⁄" << std::
ídl
; }

334  
Ál£
;

337 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
√w_åüngÀ0
), m_surf.gë_åüngÀ_n‹mÆ(
åi0
) ) < 0.0 )

339 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Ç‹mÆ invîsi⁄" << std::
ídl
; }

340  
Ál£
;

343 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
√w_åüngÀ1
), m_surf.gë_åüngÀ_n‹mÆ(
åi1
) ) < 0.0 )

345 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Ç‹mÆ invîsi⁄" << std::
ídl
; }

346  
Ál£
;

349 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
√w_åüngÀ0
), m_surf.gë_åüngÀ_n‹mÆ(
åi1
) ) < 0.0 )

351 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Ç‹mÆ invîsi⁄" << std::
ídl
; }

352  
Ál£
;

355 i‡–
	`dŸ
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
(
√w_åüngÀ1
), m_surf.gë_åüngÀ_n‹mÆ(
åi0
) ) < 0.0 )

357 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:Ç‹mÆ invîsi⁄" << std::
ídl
; }

358  
Ál£
;

365 i‡–
m_surf
.
m_cﬁlisi⁄_ß„ty
 && 
	`Êù_öåodu˚s_cﬁlisi⁄
–
edge
, 
√w_edge
, 
√w_åüngÀ0
, 
√w_åüngÀ1
 ) )

367 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed: i¡î£˘i⁄" << std::
ídl
; }

368  
Ál£
;

374 i‡–
	`åüngÀ_¨ó
–
xs
[
√w_åüngÀ0
[0]], xs[√w_åüngÀ0[1]], xs[√w_åüngÀ0[2]] ) < 
m_surf
.
m_mö_åüngÀ_¨ó
 )

376 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊùÑeje˘ed:áª®toÿsmÆl" << std::
ídl
; }

377  
Ál£
;

380 i‡–
	`åüngÀ_¨ó
–
xs
[
√w_åüngÀ1
[0]], xs[√w_åüngÀ1[1]], xs[√w_åüngÀ1[2]] ) < 
m_surf
.
m_mö_åüngÀ_¨ó
 )

382 i‡–
m_surf
.
m_vîbo£
 ) {
°d
::
cout
 << "edgêÊùÑeje˘ed:áª®toÿsmÆl" << std::
ídl
; }

383  
Ál£
;

391 
ﬁd_¨ó
 = 
m_surf
.
	`gë_åüngÀ_¨ó
–
åi0
 ) + m_surf.gë_åüngÀ_¨ó–
åi1
 );

392 
√w_¨ó
 = 
	`åüngÀ_¨ó
–
xs
[
√w_åüngÀ0
[0]], xs[new_triangle0[1]], xs[new_triangle0[2]] )

393 + 
	`åüngÀ_¨ó
–
xs
[
√w_åüngÀ1
[0]], xs[new_triangle1[1]], xs[new_triangle1[2]] );

395 i‡–
	`Ábs
–
ﬁd_¨ó
 - 
√w_¨ó
 ) > 0.1 * old_area )

397 i‡–
m_surf
.
m_vîbo£
 ) {
°d
::
cout
 << "edgêÊùÑeje˘ed:áª®ch™gêtoÿgª©" << std::
ídl
; }

398  
Ál£
;

404 i‡––
m_surf
.
	`˛assify_vîãx
–
edge_vîti˚s
[0] ) > 1 ) || ( m_surf.classify_vertex(Édge_vertices[1] ) > 1 ) )

406 i‡–
m_surf
.
m_vîbo£
 ) {
°d
::
cout
 << "edgêÊùÑeje˘ed: vîti˚†nŸ o¿smoŸhÖ©ch" << std::
ídl
; }

407  
Ál£
;

415 
mö_™gÀ
 = 
	`mö_åüngÀ_™gÀ
–
xs
[
√w_åüngÀ0
[0]], xs[new_triangle0[1]], xs[new_triangle0[2]] );

416 
mö_™gÀ
 = 
	`mö
–mö_™gÀ, 
	`mö_åüngÀ_™gÀ
–
xs
[
√w_åüngÀ1
[0]], xs[new_triangle1[1]], xs[new_triangle1[2]] ) );

418 i‡–
	`ød2deg
(
mö_™gÀ
Ë< 
m_surf
.
m_mö_åüngÀ_™gÀ
 )

420  
Ál£
;

423 
max_™gÀ
 = 
	`max_åüngÀ_™gÀ
–
xs
[
√w_åüngÀ0
[0]], xs[new_triangle0[1]], xs[new_triangle0[2]] );

424 
max_™gÀ
 = 
	`max
–max_™gÀ, 
	`max_åüngÀ_™gÀ
–
xs
[
√w_åüngÀ1
[0]], xs[new_triangle1[1]], xs[new_triangle1[2]] ) );

426 i‡–
	`ød2deg
(
max_™gÀ
Ë> 
m_surf
.
m_max_åüngÀ_™gÀ
 )

428  
Ál£
;

433 
PªEdgeFlùInfo
 
	`¥e_öfo
–
edge
, 
åi0
, 
åi1
 );

435  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

437 i‡–
Ál£
 =
m_ob£rvîs
[
i
]->
	`›î©i⁄OK
(
m_surf
, 
¥e_öfo
) )

439  
Ál£
;

447 
Vec3°
 
ﬁd_åi0
 = 
m_mesh
.
	`gë_åüngÀ
(
åi0
);

448 
Vec3°
 
ﬁd_åi1
 = 
m_mesh
.
	`gë_åüngÀ
(
åi1
);

450 
m_surf
.
	`ªmove_åüngÀ
–
åi0
 );

451 
m_surf
.
	`ªmove_åüngÀ
–
åi1
 );

453 
size_t
 
√w_åüngÀ_ödex_0
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀ0
 );

454 
size_t
 
√w_åüngÀ_ödex_1
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀ1
 );

456 i‡–
m_surf
.
m_cﬁlisi⁄_ß„ty
 )

458 i‡–
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–
√w_åüngÀ_ödex_0
 ) )

460 
°d
::
cout
 << "mis£dá¿öãr£˘i⁄. NewÅrüngÀs: " << 
√w_åüngÀ0
 << ", " << 
√w_åüngÀ1
 << std::
ídl
;

461 
°d
::
cout
 << "ﬁdÅrüngÀs: " << 
ﬁd_åi0
 << ", " << 
ﬁd_åi1
 << std::
ídl
;

462 
	`as£π
(0);

465 i‡–
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`check_åüngÀ_vs_Æl_åüngÀs_f‹_öãr£˘i⁄
–
√w_åüngÀ_ödex_1
 ) )

467 
°d
::
cout
 << "mis£dá¿öãr£˘i⁄. NewÅrüngÀs: " << 
√w_åüngÀ0
 << ", " << 
√w_åüngÀ1
 << std::
ídl
;

468 
°d
::
cout
 << "ﬁdÅrüngÀs: " << 
ﬁd_åi0
 << ", " << 
ﬁd_åi1
 << std::
ídl
;

469 
	`as£π
(0);

473 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_åüngÀ_ödex_0
 );

474 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_åüngÀ_ödex_1
 );

476 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "edgêÊù: ok" << std::
ídl
; }

478 
Po°EdgeFlùInfo
 
	`po°_öfo
–
¥e_öfo
, 
√w_åüngÀ_ödex_0
, 
√w_åüngÀ_ödex_1
 );

480  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

482 
m_ob£rvîs
[
i
]->
	`›î©i⁄Occuºed
(
m_surf
, 
po°_öfo
);

486  
åue
;

488 
	}
}

497 
	gEdgeFlù≥r
::
	$¥o˚ss_mesh
( )

500 i‡–
m_surf
.
m_vîbo£
 )

502 
°d
::
cout
 << "---------------------- EdgeFlù≥r: flùpög ----------------------" << std::
ídl
;

505 
m_surf
.
m_dúty_åüngÀs
.
	`˛ór
();

507 
boﬁ
 
Êù_occuºed_evî
 = 
Ál£
;

508 
boﬁ
 
Êù_occuºed
 = 
åue
;

510 
MAX_NUM_FLIP_PASSES
 = 5;

511 
num_Êù_∑s£s
 = 0;

513 
N⁄De°ru˘iveTriMesh
& 
m_mesh
 = 
m_surf
.m_mesh;

514 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
 = 
m_surf
.
	`gë_posôi⁄s
();

520  
Êù_occuºed
 && 
num_Êù_∑s£s
++ < 
MAX_NUM_FLIP_PASSES
 )

522 i‡–
m_surf
.
m_vîbo£
 )

524 
°d
::
cout
 << "---------------------- El Topo: flipping ";

525 
°d
::
cout
 << "∑s†" << 
num_Êù_∑s£s
 << "/" << 
MAX_NUM_FLIP_PASSES
;

526 
°d
::
cout
 << "----------------------" << std::
ídl
;

529 
Êù_occuºed
 = 
Ál£
;

531 
size_t
 
numbî_of_edges
 = 
m_mesh
.
m_edges
.
	`size
();

533  
size_t
 
i
 = 0; i < 
numbî_of_edges
; i++ )

535 i‡–
m_mesh
.
m_edges
[
i
][0] == m_mesh.m_edges[i][1] ) { ; }

536 i‡–
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
	`size
() > 4 || m_mesh.m_edge_to_triangle_map[i].size() < 2 ) { ; }

537 i‡–
m_mesh
.
m_is_bound¨y_vîãx
[ m_mesh.
m_edges
[
i
][0] ] || m_mesh.m_is_boundary_vertex[ m_mesh.m_edges[i][1] ] ) { ; }

539 
size_t
 
åüngÀ_a
 = (size_t)~0, 
åüngÀ_b
 =(size_t)~0;

541 i‡–
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
	`size
() == 2 )

543 
åüngÀ_a
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
][0];

544 
åüngÀ_b
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
][1];

545 
	`as£π
 ( 
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], m_mesh.
	`gë_åüngÀ
(
åüngÀ_a
) )

546 !
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], m_mesh.
	`gë_åüngÀ
(
åüngÀ_b
) ) );

548 i‡–
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
	`size
() == 4 )

550 
åüngÀ_a
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
][0];

553 
j
 = 1;

554  ; 
j
 < 4; ++j )

556 
åüngÀ_b
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
][
j
];

557 i‡–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], m_mesh.
	`gë_åüngÀ
(
åüngÀ_a
) )

558 !
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], m_mesh.
	`gë_åüngÀ
(
åüngÀ_b
) ) )

563 
	`as£π
 ( 
j
 < 4 );

567 
°d
::
cout
 << 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
	`size
(Ë<< "ÅrüngÀ†öcidíàtÿ™Édge" << std::
ídl
;

568 
	`as£π
(0);

572 c⁄° 
Vec3°
& 
åi_a
 = 
m_mesh
.
	`gë_åüngÀ
–
åüngÀ_a
 );

573 c⁄° 
Vec3°
& 
åi_b
 = 
m_mesh
.
	`gë_åüngÀ
–
åüngÀ_b
 );

575 i‡–
åi_a
[0] ==Åri_a[1]

576 || 
åi_a
[1] ==Åri_a[2]

577 || 
åi_a
[2] ==Åri_a[0]

578 || 
åi_b
[0] ==Åri_b[1]

579 || 
åi_b
[1] ==Åri_b[2]

580 || 
åi_b
[2] ==Åri_b[0] )

585 
size_t
 
thúd_vîãx_0
 = 
m_mesh
.
	`gë_thúd_vîãx
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], 
åi_a
 );

586 
size_t
 
thúd_vîãx_1
 = 
m_mesh
.
	`gë_thúd_vîãx
–m_mesh.
m_edges
[
i
][0], m_mesh.m_edges[i][1], 
åi_b
 );

588 i‡–
thúd_vîãx_0
 =
thúd_vîãx_1
 )

593 
boﬁ
 
Êù≥d
 = 
Ál£
;

595 
cuºít_Àngth
 = 
	`mag
–
xs
[
m_mesh
.
m_edges
[
i
][1]] - xs[m_mesh.m_edges[i][0]] );

596 
pŸítül_Àngth
 = 
	`mag
–
xs
[
thúd_vîãx_1
] - xs[
thúd_vîãx_0
] );

597 i‡–
pŸítül_Àngth
 < 
cuºít_Àngth
 - 
m_edge_Êù_mö_Àngth_ch™ge
 )

599 
Êù≥d
 = 
	`Êù_edge
–
i
, 
åüngÀ_a
, 
åüngÀ_b
, 
thúd_vîãx_0
, 
thúd_vîãx_1
 );

616 
Êù_occuºed
 |
Êù≥d
;

619 
Êù_occuºed_evî
 |
Êù_occuºed
;

623 i‡–
Êù_occuºed_evî
 )

625 
m_surf
.
	`åim_n⁄_m™ifﬁd
–m_surf.
m_dúty_åüngÀs
 );

628 
	}
}

636 
	gEdgeFlù≥r
::
	$add_ob£rvî
–
EdgeFlùOb£rvî
* 
ob£rvî
 )

638 
m_ob£rvîs
.
	`push_back
(
ob£rvî
);

639 
	}
}

	@eltopo3d/edgeflipper.h

10 #i‚de‡
EL_TOPO_EDGEFLIPPER_H


11 
	#EL_TOPO_EDGEFLIPPER_H


	)

17 
	~<c°ddef
>

18 
	~<mesh›î©‹.h
>

19 
	~<ve˘‹
>

25 
˛ass
 
	gSurfTøck
;

26 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
> 
	gVec
;

27 
	gVec
<3,> 
	tVec3d
;

28 
	gVec
<2,
	tsize_t
> 
	tVec2°
;

29 
	gVec
<3,
	tsize_t
> 
	tVec3°
;

30 
˛ass
 
	gEdgeFlùOb£rvî
;

36 ˛as†
	cEdgeFlù≥r
 : 
public
 
MeshO≥øt‹


39 
public
:

47 ˛as†
	cPªEdgeFlùInfo


49 
public
:

50 
PªEdgeFlùInfo
–
size_t
 
edge
, size_à
åi0
, size_à
åi1
 );

51 
size_t
 
	mm_edge
;

52 
size_t
 
	mm_åi0
;

53 
size_t
 
	mm_åi1
;

62 ˛as†
	cPo°EdgeFlùInfo


64 
	gpublic
:

65 
Po°EdgeFlùInfo
(c⁄° 
PªEdgeFlùInfo
& 
¥e_•lô_öfo
, 
size_t
 
√w_åüngÀ_ödex_0
, size_à
√w_åüngÀ_ödex_1
 );

66 
PªEdgeFlùInfo
 
	gm_¥e_Êù_öfo
;

67 
size_t
 
	gm_√w_åüngÀ_ödex_0
;

68 
size_t
 
	gm_√w_åüngÀ_ödex_1
;

72 
	$EdgeFlù≥r
–
SurfTøck
& 
surf
, 
edge_Êù_mö_Àngth_ch™ge
 ) :

73 
	`MeshO≥øt‹
–
surf
 ),

74 
	$m_edge_Êù_mö_Àngth_ch™ge
–
edge_Êù_mö_Àngth_ch™ge
 )

75 {
	}
}

79 
¥o˚ss_mesh
();

81 
add_ob£rvî
–
EdgeFlùOb£rvî
* 
ob£rvî
 );

83 
	g¥iv©e
:

86 
m_edge_Êù_mö_Àngth_ch™ge
;

90 
boﬁ
 
Êù_öåodu˚s_cﬁlisi⁄
–
size_t
 
edge_ödex
,

91 c⁄° 
Vec2°
& 
√w_edge
,

92 c⁄° 
Vec3°
& 
√w_åüngÀ_a
,

93 c⁄° 
Vec3°
& 
√w_åüngÀ_b
 );

97 
boﬁ
 
Êù_edge
(
size_t
 
edge
, size_à
åi0
, size_à
åi1
, size_à
thúd_vîãx_0
, size_à
thúd_vîãx_1
 );

99 
size_t
 
vîãx_vÆí˚
–size_à
vîãx_ödex
 );

101 
tŸÆ_mesh_ªguœrôy
();

103 
boﬁ
 
ªguœrôy_im¥oves
–
size_t
 
edge
,

104 
size_t
 
åi0
,

105 
size_t
 
åi1
,

106 
size_t
 
thúd_vîãx_0
,

107 
size_t
 
thúd_vîãx_1
 );

111 
	g°d
::
ve˘‹
<
EdgeFlùOb£rvî
*> 
m_ob£rvîs
;

121 ˛as†
	cEdgeFlùOb£rvî


123 
	mpublic
:

125 
vútuÆ
 ~
	$EdgeFlùOb£rvî
() {}

127 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° 
EdgeFlù≥r
::
PªEdgeFlùInfo
& )

129  
åue
;

130 
	}
}

132 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° 
EdgeFlù≥r
::
Po°EdgeFlùInfo
& )

134 
	}
}

	@eltopo3d/edgesplitter.cpp

10 
	~<edge•lôãr.h
>

12 
	~<brﬂdpha£.h
>

13 
	~<ccd_wøµî.h
>

14 
	~<cﬁlisi⁄quîõs.h
>

15 
	~<run°©s.h
>

16 
	~<subdivisi⁄scheme.h
>

17 
	~<sur·øck.h
>

18 
	~<åüngÀquÆôy.h
>

28 
	gEdgeS∂ôãr
::
PªEdgeS∂ôInfo
::
	$PªEdgeS∂ôInfo
–
size_t
 
edge
, size_à
åi0
, size_à
åi1
, size_à
vîãx_a
,

29 
size_t
 
vîãx_b
,

30 
size_t
 
vîãx_c
,

31 
size_t
 
vîãx_d
 ) :

32 
	`m_edge
(
edge
), 
	`m_åi0
(
åi0
), 
	`m_åi1
(
åi1
), 
	`m_vîãx_a
(
vîãx_a
), 
	`m_vîãx_b
(
vîãx_b
), 
	`m_vîãx_c
(
vîãx_c
), 
	$m_vîãx_d
(
vîãx_d
)

34 
	}
}

42 
	gEdgeS∂ôãr
::
Po°EdgeS∂ôInfo
::
	$Po°EdgeS∂ôInfo
(c⁄° 
PªEdgeS∂ôInfo
& 
¥e_•lô_öfo
,

43 
size_t
 
√w_vîãx
,

44 
size_t
 
√w_åi0
,

45 
size_t
 
√w_åi1
,

46 
size_t
 
√w_åi2
,

47 
size_t
 
√w_åi3
 ) :

48 
	`m_¥e_•lô_öfo
(
¥e_•lô_öfo
),

49 
	`m_√w_vîãx
(
√w_vîãx
),

50 
	`m_√w_åi0
(
√w_åi0
),

51 
	`m_√w_åi1
(
√w_åi1
),

52 
	`m_√w_åi2
(
√w_åi2
),

53 
	$m_√w_åi3
(
√w_åi3
)

55 
	}
}

64 
	gEdgeS∂ôãr
::
	$EdgeS∂ôãr
–
SurfTøck
& 
surf
, 
boﬁ
 
u£_curv©uª
, 
max_curv©uª_mu…ùlõr
 ) :

65 
	`MeshO≥øt‹
–
surf
 ),

66 
	`m_u£_curv©uª
–
u£_curv©uª
 ),

67 
	`m_max_curv©uª_mu…ùlõr
–
max_curv©uª_mu…ùlõr
 ),

68 
	$m_max_edge_Àngth
–
UNINITIALIZED_DOUBLE
 )

69 {
	}
}

79 
boﬁ
 
	gEdgeS∂ôãr
::
	$•lô_edge_edge_cﬁlisi⁄
–
size_t
 
√ighbour_ödex
,

80 c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

81 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

82 c⁄° 
Vec2°
& 
edge
 )

85 
size_t
 
edge_vîãx_0
 = 
edge
[0];

86 
size_t
 
edge_vîãx_1
 = 
edge
[1];

87 
size_t
 
dummy_ödex
 = 
m_surf
.
	`gë_num_vîti˚s
();

89 i‡–
√ighbour_ödex
 =
edge_vîãx_0
 ||Çeighbour_ödex =
edge_vîãx_1
 ) {  
Ál£
; }

91 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
x
 = 
m_surf
.
	`gë_posôi⁄s
();

93 
t_zîo_di°™˚
;

94 
	`check_edge_edge_¥oximôy
–
√w_vîãx_posôi⁄
,

95 
x
[ 
√ighbour_ödex
 ],

96 
x
[ 
edge_vîãx_0
 ],

97 
x
[ 
edge_vîãx_1
 ],

98 
t_zîo_di°™˚
 );

100 i‡–
t_zîo_di°™˚
 < 
m_surf
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 )

102  
åue
;

105 i‡–
edge_vîãx_1
 < 
edge_vîãx_0
 ) { 
	`sw≠
(Édge_vertex_0,Édge_vertex_1 ); }

107 i‡–
	`£gmít_£gmít_cﬁlisi⁄
(
x
[ 
√ighbour_ödex
 ], x[Çeighbour_index ],Çeighbour_index,

108 
√w_vîãx_posôi⁄
, 
√w_vîãx_smoŸh_posôi⁄
, 
dummy_ödex
,

109 
x
[ 
edge_vîãx_0
 ], x[Édge_vertex_0 ],Édge_vertex_0,

110 
x
[ 
edge_vîãx_1
 ], x[Édge_vertex_1 ],Édge_vertex_1 ) )

113  
åue
;

116  
Ál£
;

118 
	}
}

123 
boﬁ
 
	gEdgeS∂ôãr
::
	$•lô_åüngÀ_vîãx_cﬁlisi⁄
–c⁄° 
Vec3°
& 
åüngÀ_ödi˚s
,

124 c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

125 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

126 
size_t
 
ovîœµög_vît_ödex
,

127 c⁄° 
Vec3d
& 
vît
 )

130 i‡–
ovîœµög_vît_ödex
 =
åüngÀ_ödi˚s
[0] || overlapping_vert_index ==Åriangle_indices[1] || overlapping_vert_index ==Åriangle_indices[2] )

132  
Ál£
;

135 
Vec3°
 
s‹ãd_åüngÀ
 = 
	`s‹t_åüngÀ
–
åüngÀ_ödi˚s
 );

137 
Vec3d
 
åi_posôi⁄s
[3];

138 
Vec3d
 
åi_smoŸh_posôi⁄s
[3];

140  
i
 = 0; i < 3; ++i )

142 i‡–
s‹ãd_åüngÀ
[
i
] =
m_surf
.
	`gë_num_vîti˚s
() )

144 
åi_posôi⁄s
[
i
] = 
√w_vîãx_posôi⁄
;

145 
åi_smoŸh_posôi⁄s
[
i
] = 
√w_vîãx_smoŸh_posôi⁄
;

149 
åi_posôi⁄s
[
i
] = 
m_surf
.
	`gë_posôi⁄
–
s‹ãd_åüngÀ
[i] );

150 
åi_smoŸh_posôi⁄s
[
i
] = 
m_surf
.
	`gë_posôi⁄
–
s‹ãd_åüngÀ
[i] );

156 
t_zîo_di°™˚
;

157 
	`check_poöt_åüngÀ_¥oximôy
–
vît
, 
åi_posôi⁄s
[0],Åri_posôi⁄s[1],Åri_posôi⁄s[2], 
t_zîo_di°™˚
 );

160 i‡–
t_zîo_di°™˚
 < 
m_surf
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 )

162  
åue
;

168 i‡–
	`poöt_åüngÀ_cﬁlisi⁄
–
vît
, vît, 
ovîœµög_vît_ödex
,

169 
åi_posôi⁄s
[0], 
åi_smoŸh_posôi⁄s
[0], 
s‹ãd_åüngÀ
[0],

170 
åi_posôi⁄s
[1], 
åi_smoŸh_posôi⁄s
[1], 
s‹ãd_åüngÀ
[1],

171 
åi_posôi⁄s
[2], 
åi_smoŸh_posôi⁄s
[2], 
s‹ãd_åüngÀ
[2] ) )

173  
åue
;

176  
Ál£
;

179 
	}
}

184 
boﬁ
 
	gEdgeS∂ôãr
::
	$•lô_edge_p£udo_mŸi⁄_öåodu˚s_öãr£˘i⁄
–c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

185 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

186 
size_t
 
edge
,

187 
size_t
 
åi0
,

188 
size_t
 
åi1
,

189 
size_t
 
vîãx_a
,

190 
size_t
 
vîãx_b
,

191 
size_t
 
vîãx_c
,

192 
size_t
 
vîãx_d
 )

195 
N⁄De°ru˘iveTriMesh
& 
m_mesh
 = 
m_surf
.m_mesh;

197 i‡–!
m_surf
.
m_cﬁlisi⁄_ß„ty
)

199  
Ál£
;

208 
Vec3d
 
Øbb_low
, 
Øbb_high
;

209 
	`mömax
–
√w_vîãx_posôi⁄
, 
√w_vîãx_smoŸh_posôi⁄
, 
Øbb_low
, 
Øbb_high
 );

211 
Øbb_low
 -
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

212 
Øbb_high
 +
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

214 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

215 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

217  
size_t
 
i
 = 0; i < 
ovîœµög_åüngÀs
.
	`size
(); ++i )

220 i‡–
ovîœµög_åüngÀs
[
i
] =
åi0
 || ovîœµög_åüngÀs[i] =
åi1
 )

225 
size_t
 
åüngÀ_vîãx_0
 = 
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] )[0];

226 
size_t
 
åüngÀ_vîãx_1
 = 
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] )[1];

227 
size_t
 
åüngÀ_vîãx_2
 = 
m_mesh
.
	`gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] )[2];

229 
t_zîo_di°™˚
;

231 
	`check_poöt_åüngÀ_¥oximôy
–
√w_vîãx_posôi⁄
,

232 
m_surf
.
	`gë_posôi⁄
–
åüngÀ_vîãx_0
 ),

233 
m_surf
.
	`gë_posôi⁄
–
åüngÀ_vîãx_1
 ),

234 
m_surf
.
	`gë_posôi⁄
–
åüngÀ_vîãx_2
 ),

235 
t_zîo_di°™˚
 );

237 
size_t
 
dummy_ödex
 = 
m_surf
.
	`gë_num_vîti˚s
();

239 i‡–
t_zîo_di°™˚
 < 
m_surf
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 )

241  
åue
;

244 
Vec3°
 
s‹ãd_åüngÀ
 = 
	`s‹t_åüngÀ
–
	`Vec3°
–
åüngÀ_vîãx_0
, 
åüngÀ_vîãx_1
, 
åüngÀ_vîãx_2
 ) );

247 i‡–
	`poöt_åüngÀ_cﬁlisi⁄
–
√w_vîãx_posôi⁄
, 
√w_vîãx_smoŸh_posôi⁄
, 
dummy_ödex
,

248 
m_surf
.
	`gë_posôi⁄
–
s‹ãd_åüngÀ
[0] ), m_surf.get_position( sorted_triangle[0] ), sorted_triangle[0],

249 
m_surf
.
	`gë_posôi⁄
–
s‹ãd_åüngÀ
[1] ), m_surf.get_position( sorted_triangle[1] ), sorted_triangle[1],

250 
m_surf
.
	`gë_posôi⁄
–
s‹ãd_åüngÀ
[2] ), m_surf.get_position( sorted_triangle[2] ), sorted_triangle[2] ) )

253  
åue
;

265 
Vec3d
 
edge_Øbb_low
, 
edge_Øbb_high
;

268 
	`mömax
–
√w_vîãx_posôi⁄
, 
√w_vîãx_smoŸh_posôi⁄
,

269 
m_surf
.
	`gë_posôi⁄
–
vîãx_a
 ), m_surf.gë_posôi⁄–
vîãx_b
 ), m_surf.gë_posôi⁄–
vîãx_c
 ), m_surf.gë_posôi⁄–
vîãx_d
 ),

270 
edge_Øbb_low
, 
edge_Øbb_high
 );

272 
edge_Øbb_low
 -
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

273 
edge_Øbb_high
 +
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

275 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

276 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
edge_Øbb_low
, 
edge_Øbb_high
, 
åue
,Årue, 
ovîœµög_edges
 );

278 c⁄° 
size_t
 
vîãx_√ighbourhood
[4] = { 
vîãx_a
, 
vîãx_b
, 
vîãx_c
, 
vîãx_d
 };

280  
size_t
 
i
 = 0; i < 
ovîœµög_edges
.
	`size
(); ++i )

283 i‡–
ovîœµög_edges
[
i
] =
edge
 ) { ; }

284 i‡–
m_mesh
.
m_edges
[ 
ovîœµög_edges
[
i
] ][0] == m_mesh.m_edges[ overlapping_edges[i] ][1] ) { ; }

286  
size_t
 
v
 = 0; v < 4; ++v )

288 
boﬁ
 
cﬁlisi⁄
 = 
	`•lô_edge_edge_cﬁlisi⁄
–
vîãx_√ighbourhood
[
v
],

289 
√w_vîãx_posôi⁄
,

290 
√w_vîãx_smoŸh_posôi⁄
,

291 
m_mesh
.
m_edges
[
ovîœµög_edges
[
i
]] );

293 i‡–
cﬁlisi⁄
 ) {  
åue
; }

303 
Vec3d
 
åüngÀ_Øbb_low
, 
åüngÀ_Øbb_high
;

306 
	`mömax
–
√w_vîãx_posôi⁄
, 
√w_vîãx_smoŸh_posôi⁄
,

307 
m_surf
.
	`gë_posôi⁄
–
vîãx_a
 ), m_surf.gë_posôi⁄–
vîãx_b
 ), m_surf.gë_posôi⁄–
vîãx_c
 ), m_surf.gë_posôi⁄–
vîãx_d
 ),

308 
åüngÀ_Øbb_low
, 
åüngÀ_Øbb_high
 );

310 
åüngÀ_Øbb_low
 -
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

311 
åüngÀ_Øbb_high
 +
m_surf
.
m_Øbb_∑ddög
 * 
	`Vec3d
(1,1,1);

313 
°d
::
ve˘‹
<
size_t
> 
ovîœµög_vîti˚s
;

314 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_vîãx_cﬁlisi⁄s
–
åüngÀ_Øbb_low
, 
åüngÀ_Øbb_high
, 
åue
,Årue, 
ovîœµög_vîti˚s
 );

316 
size_t
 
dummy_e
 = 
m_surf
.
	`gë_num_vîti˚s
();

318 
°d
::
ve˘‹
< 
Vec3°
 > 
åüngÀ_ödi˚s
;

320 
åüngÀ_ödi˚s
.
	`push_back
–
	`Vec3°
–
vîãx_a
, 
dummy_e
, 
vîãx_c
 ) );

321 
åüngÀ_ödi˚s
.
	`push_back
–
	`Vec3°
–
vîãx_c
, 
dummy_e
, 
vîãx_b
 ) );

322 
åüngÀ_ödi˚s
.
	`push_back
–
	`Vec3°
–
vîãx_d
, 
vîãx_b
, 
dummy_e
 ) );

323 
åüngÀ_ödi˚s
.
	`push_back
–
	`Vec3°
–
vîãx_d
, 
dummy_e
, 
vîãx_a
 ) );

325  
size_t
 
i
 = 0; i < 
ovîœµög_vîti˚s
.
	`size
(); ++i )

327 i‡–
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
ovîœµög_vîti˚s
[
i
]].
	`em±y
() )

332 
size_t
 
ovîœµög_vît_ödex
 = 
ovîœµög_vîti˚s
[
i
];

333 c⁄° 
Vec3d
& 
vît
 = 
m_surf
.
	`gë_posôi⁄
(
ovîœµög_vît_ödex
);

335  
size_t
 
j
 = 0; j < 
åüngÀ_ödi˚s
.
	`size
(); ++j )

337 
boﬁ
 
cﬁlisi⁄
 = 
	`•lô_åüngÀ_vîãx_cﬁlisi⁄
–
åüngÀ_ödi˚s
[
j
],

338 
√w_vîãx_posôi⁄
,

339 
√w_vîãx_smoŸh_posôi⁄
,

340 
ovîœµög_vît_ödex
,

341 
vît
 );

343 i‡–
cﬁlisi⁄
 )

345  
åue
;

353  
Ál£
;

355 
	}
}

363 
boﬁ
 
	gEdgeS∂ôãr
::
	$•lô_edge
–
size_t
 
edge
 )

365 
	`as£π
–
	`edge_is_•lôèbÀ
(
edge
) );

367 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
m_surf
.
m_mesh
;

372 
	`as£π
 ( 
mesh
.
m_edge_to_åüngÀ_m≠
[
edge
].
	`size
() == 2 );

376 
size_t
 
åi0
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
edge
][0];

377 
size_t
 
åi1
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
edge
][1];

378 
¨ó0
 = 
m_surf
.
	`gë_åüngÀ_¨ó
–
åi0
 );

379 
¨ó1
 = 
m_surf
.
	`gë_åüngÀ_¨ó
–
åi1
 );

382 i‡–
¨ó0
 < 
m_surf
.
m_mö_åüngÀ_¨ó
 || 
¨ó1
 < m_surf.m_min_triangle_area )

384  
Ál£
;

391 
size_t
 
vîãx_a
 = 
mesh
.
m_edges
[
edge
][0];

392 
size_t
 
vîãx_b
 = 
mesh
.
m_edges
[
edge
][1];

393 
size_t
 
vîãx_c
, 
vîãx_d
;

395 i‡–
mesh
.
	`‹õ¡ed
–
vîãx_a
, 
vîãx_b
, mesh.
	`gë_åüngÀ
(
åi0
) ) )

398 
	`as£π
–
mesh
.
	`‹õ¡ed
–
vîãx_b
, 
vîãx_a
, mesh.
	`gë_åüngÀ
(
åi1
) ) );

399 
vîãx_c
 = 
mesh
.
	`gë_thúd_vîãx
–
vîãx_a
, 
vîãx_b
, mesh.
	`gë_åüngÀ
(
åi0
) );

400 
vîãx_d
 = 
mesh
.
	`gë_thúd_vîãx
–
vîãx_b
, 
vîãx_a
, mesh.
	`gë_åüngÀ
(
åi1
) );

405 
	`as£π
–
mesh
.
	`‹õ¡ed
–
vîãx_a
, 
vîãx_b
, mesh.
	`gë_åüngÀ
(
åi1
) ) );

406 
	`as£π
–
mesh
.
	`‹õ¡ed
–
vîãx_b
, 
vîãx_a
, mesh.
	`gë_åüngÀ
(
åi0
) ) );

407 
vîãx_c
 = 
mesh
.
	`gë_thúd_vîãx
–
vîãx_a
, 
vîãx_b
, mesh.
	`gë_åüngÀ
(
åi1
) );

408 
vîãx_d
 = 
mesh
.
	`gë_thúd_vîãx
–
vîãx_b
, 
vîãx_a
, mesh.
	`gë_åüngÀ
(
åi0
) );

415 
Vec3d
 
√w_vîãx_posôi⁄
 = 0.5 * ( 
m_surf
.
	`gë_posôi⁄
–
vîãx_a
 ) + m_surf.gë_posôi⁄–
vîãx_b
 ) );

416 
Vec3d
 
√w_vîãx_smoŸh_posôi⁄
;

419 
m_surf
.
m_subdivisi⁄_scheme
->
	`gíî©e_√w_midpoöt
–
edge
, m_surf, 
√w_vîãx_smoŸh_posôi⁄
 );

425 
boﬁ
 
u£_smoŸh_poöt
 = ! ( 
	`•lô_edge_p£udo_mŸi⁄_öåodu˚s_öãr£˘i⁄
–
√w_vîãx_posôi⁄
,

426 
√w_vîãx_smoŸh_posôi⁄
,

427 
edge
,

428 
åi0
,

429 
åi1
,

430 
vîãx_a
,

431 
vîãx_b
,

432 
vîãx_c
,

433 
vîãx_d
 ) );

439 i‡–
u£_smoŸh_poöt
 )

442 
Vec3d
 
åi0_n‹mÆ
 = 
m_surf
.
	`gë_åüngÀ_n‹mÆ
–
åi0
 );

443 
Vec3d
 
åi1_n‹mÆ
 = 
m_surf
.
	`gë_åüngÀ_n‹mÆ
–
åi1
 );

445 i‡–
	`dŸ
–
åi0_n‹mÆ
, 
åi1_n‹mÆ
 ) >= 0.0 )

447 
Vec3d
 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
vîãx_a
), 
√w_vîãx_smoŸh_posôi⁄
, m_surf.gë_posôi⁄(
vîãx_c
) );

448 i‡–
	`dŸ
–
√w_n‹mÆ
, 
åi0_n‹mÆ
 ) < 0.0 || dŸ–√w_n‹mÆ, 
åi1_n‹mÆ
 ) < 0.0 )

450 
u£_smoŸh_poöt
 = 
Ál£
;

452 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
vîãx_c
), 
√w_vîãx_smoŸh_posôi⁄
, m_surf.gë_posôi⁄(
vîãx_b
) );

453 i‡–
	`dŸ
–
√w_n‹mÆ
, 
åi0_n‹mÆ
 ) < 0.0 || dŸ–√w_n‹mÆ, 
åi1_n‹mÆ
 ) < 0.0 )

455 
u£_smoŸh_poöt
 = 
Ál£
;

457 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
vîãx_d
), m_surf.gë_posôi⁄(
vîãx_b
), 
√w_vîãx_smoŸh_posôi⁄
 );

458 i‡–
	`dŸ
–
√w_n‹mÆ
, 
åi0_n‹mÆ
 ) < 0.0 || dŸ–√w_n‹mÆ, 
åi1_n‹mÆ
 ) < 0.0 )

460 
u£_smoŸh_poöt
 = 
Ál£
;

462 
√w_n‹mÆ
 = 
	`åüngÀ_n‹mÆ
–
m_surf
.
	`gë_posôi⁄
(
vîãx_d
), 
√w_vîãx_smoŸh_posôi⁄
, m_surf.gë_posôi⁄(
vîãx_a
) );

463 i‡–
	`dŸ
–
√w_n‹mÆ
, 
åi0_n‹mÆ
 ) < 0.0 || dŸ–√w_n‹mÆ, 
åi1_n‹mÆ
 ) < 0.0 )

465 
u£_smoŸh_poöt
 = 
Ál£
;

474 i‡–
u£_smoŸh_poöt
 =
Ál£
 )

477 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "nŸ usög smoŸh subdivisi⁄" << std::
ídl
; }

479 
√w_vîãx_smoŸh_posôi⁄
 = 
√w_vîãx_posôi⁄
;

481 i‡–
	`•lô_edge_p£udo_mŸi⁄_öåodu˚s_öãr£˘i⁄
–
√w_vîãx_posôi⁄
,

482 
√w_vîãx_smoŸh_posôi⁄
,

483 
edge
,

484 
åi0
,

485 
åi1
,

486 
vîãx_a
,

487 
vîãx_b
,

488 
vîãx_c
,

489 
vîãx_d
 ) )

491 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "Eví mid-poöàsubdivisi⁄ i¡rodu˚†cﬁlisi⁄. Backög out." << std::
ídl
; }

492  
Ál£
;

497 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "usög smoŸh subdivisi⁄" << std::
ídl
; }

505 c⁄° 
Vec3d
& 
va
 = 
m_surf
.
	`gë_posôi⁄
–
vîãx_a
 );

506 c⁄° 
Vec3d
& 
vb
 = 
m_surf
.
	`gë_posôi⁄
–
vîãx_b
 );

507 c⁄° 
Vec3d
& 
vc
 = 
m_surf
.
	`gë_posôi⁄
–
vîãx_c
 );

508 c⁄° 
Vec3d
& 
vd
 = 
m_surf
.
	`gë_posôi⁄
–
vîãx_d
 );

509 c⁄° 
Vec3d
& 
ve
 = 
√w_vîãx_smoŸh_posôi⁄
;

511 
mö_√w_™gÀ
 = 
	`mö_åüngÀ_™gÀ
–
va
, 
ve
, 
vc
 );

512 
mö_√w_™gÀ
 = 
	`mö
–mö_√w_™gÀ, 
	`mö_åüngÀ_™gÀ
–
vc
, 
ve
, 
vb
 ) );

513 
mö_√w_™gÀ
 = 
	`mö
–mö_√w_™gÀ, 
	`mö_åüngÀ_™gÀ
–
vd
, 
vb
, 
ve
 ) );

514 
mö_√w_™gÀ
 = 
	`mö
–mö_√w_™gÀ, 
	`mö_åüngÀ_™gÀ
–
vd
, 
ve
, 
va
 ) );

516 i‡–
	`ød2deg
(
mö_√w_™gÀ
Ë< 
m_surf
.
m_mö_åüngÀ_™gÀ
 )

518  
Ál£
;

521 
max_cuºít_™gÀ
 = 
	`max_åüngÀ_™gÀ
–
va
, 
vb
, 
vc
 );

522 
max_cuºít_™gÀ
 = 
	`max
–max_cuºít_™gÀ, 
	`max_åüngÀ_™gÀ
–
va
, 
vb
, 
vd
 ) );

524 
max_√w_™gÀ
 = 
	`max_åüngÀ_™gÀ
–
va
, 
ve
, 
vc
 );

525 
max_√w_™gÀ
 = 
	`max
–max_√w_™gÀ, 
	`max_åüngÀ_™gÀ
–
vc
, 
ve
, 
vb
 ) );

526 
max_√w_™gÀ
 = 
	`max
–max_√w_™gÀ, 
	`max_åüngÀ_™gÀ
–
vd
, 
vb
, 
ve
 ) );

527 
max_√w_™gÀ
 = 
	`max
–max_√w_™gÀ, 
	`max_åüngÀ_™gÀ
–
vd
, 
ve
, 
va
 ) );

532 i‡–
	`ød2deg
(
max_√w_™gÀ
Ë> 
m_surf
.
m_max_åüngÀ_™gÀ
 )

537 i‡–
	`ød2deg
(
max_√w_™gÀ
Ë<Ñad2deg(
max_cuºít_™gÀ
) )

539  
Ál£
;

547 
PªEdgeS∂ôInfo
 
	`¥e_öfo
–
edge
, 
åi0
, 
åi1
, 
vîãx_a
, 
vîãx_b
, 
vîãx_c
, 
vîãx_d
 );

549  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

551 i‡–!
m_ob£rvîs
[
i
]->
	`›î©i⁄OK
–
m_surf
, 
¥e_öfo
 ) )

553  
Ál£
;

561 
√w_vîãx_mass
 = 0.5 * ( 
m_surf
.
m_mas£s
[ 
vîãx_a
 ] + m_surf.m_mas£s[ 
vîãx_b
 ] );

562 
size_t
 
vîãx_e
 = 
m_surf
.
	`add_vîãx
–
√w_vîãx_smoŸh_posôi⁄
, 
√w_vîãx_mass
 );

565 
m_surf
.
m_vîãx_ch™ge_hi°‹y
.
	`push_back
–
	`VîãxUpd©eEvít
–
VîãxUpd©eEvít
::
VERTEX_ADD
, 
vîãx_e
, 
	`Vec2°
–
vîãx_a
, 
vîãx_b
) ) );

567 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "√w vîãx: " << 
vîãx_e
 << std::
ídl
; }

569 
m_surf
.
	`ªmove_åüngÀ
–
åi0
 );

570 
m_surf
.
	`ªmove_åüngÀ
–
åi1
 );

572 
size_t
 
√w_åi0
 = 
m_surf
.
	`add_åüngÀ
–
	`Vec3°
–
vîãx_a
, 
vîãx_e
, 
vîãx_c
 ) );

573 
size_t
 
√w_åi1
 = 
m_surf
.
	`add_åüngÀ
–
	`Vec3°
–
vîãx_c
, 
vîãx_e
, 
vîãx_b
 ) );

574 
size_t
 
√w_åi2
 = 
m_surf
.
	`add_åüngÀ
–
	`Vec3°
–
vîãx_d
, 
vîãx_b
, 
vîãx_e
 ) );

575 
size_t
 
√w_åi3
 = 
m_surf
.
	`add_åüngÀ
–
	`Vec3°
–
vîãx_d
, 
vîãx_e
, 
vîãx_a
 ) );

576 
size_t
 
√w_vîãx
 = 
vîãx_e
;

578 
Po°EdgeS∂ôInfo
 
	`po°_öfo
–
¥e_öfo
, 
√w_vîãx
, 
√w_åi0
, 
√w_åi1
, 
√w_åi2
, 
√w_åi3
 );

581  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

583 
m_ob£rvîs
[
i
]->
	`›î©i⁄Occuºed
–
m_surf
, 
po°_öfo
 );

586  
åue
;

588 
	}
}

597 
boﬁ
 
	gEdgeS∂ôãr
::
	$edge_is_•lôèbÀ
–
size_t
 
edge_ödex
 )

601 i‡–
m_surf
.
m_mesh
.
	`edge_is_dñëed
(
edge_ödex
ËË{  
Ál£
; }

602 i‡–
m_surf
.
	`edge_is_sﬁid
(
edge_ödex
ËË{  
Ál£
; }

605 i‡–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
].
	`size
(Ë!2 ) {  
Ál£
; }

606 i‡–
m_surf
.
m_mesh
.
m_is_bound¨y_edge
[
edge_ödex
] ) {  
Ál£
; }

608  
åue
;

610 
	}
}

618 
boﬁ
 
	gEdgeS∂ôãr
::
	$œrge_™gÀ_•lô_∑ss
()

621 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
m_surf
.
m_mesh
;

623 
boﬁ
 
•lô_occuºed
 = 
Ál£
;

625  
size_t
 
e
 = 0;É < 
mesh
.
m_edges
.
	`size
(); ++e )

628 i‡–!
	`edge_is_•lôèbÀ
(
e
) ) { ; }

631 c⁄° 
Vec2°
& 
edge
 = 
m_surf
.
m_mesh
.
m_edges
[
e
];

632 c⁄° 
Vec3d
& 
edge_poöt0
 = 
m_surf
.
	`gë_posôi⁄
–
edge
[0] );

633 c⁄° 
Vec3d
& 
edge_poöt1
 = 
m_surf
.
	`gë_posôi⁄
–
edge
[1] );

636 
size_t
 
t0
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
e
][0];

637 
size_t
 
t1
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
e
][1];

638 c⁄° 
Vec3°
& 
åi0
 = 
mesh
.
	`gë_åüngÀ
(
t0
);

639 c⁄° 
Vec3°
& 
åi1
 = 
mesh
.
	`gë_åüngÀ
(
t1
);

642 
size_t
 
›posôe0
 = 
mesh
.
	`gë_thúd_vîãx
–
e
, 
åi0
 );

643 
size_t
 
›posôe1
 = 
mesh
.
	`gë_thúd_vîãx
–
e
, 
åi1
 );

646 c⁄° 
Vec3d
& 
›posôe_poöt0
 = 
m_surf
.
	`gë_posôi⁄
(
›posôe0
);

647 c⁄° 
Vec3d
& 
›posôe_poöt1
 = 
m_surf
.
	`gë_posôi⁄
(
›posôe1
);

648 
™gÀ0
 = 
	`ød2deg
–
	`acos
–
	`dŸ
–
	`n‹mÆized
(
edge_poöt0
-
›posôe_poöt0
),Ç‹mÆized(
edge_poöt1
-opposite_point0) ) ) );

649 
™gÀ1
 = 
	`ød2deg
–
	`acos
–
	`dŸ
–
	`n‹mÆized
(
edge_poöt0
-
›posôe_poöt1
),Ç‹mÆized(
edge_poöt1
-opposite_point1) ) ) );

653 i‡–
™gÀ0
 > 
m_surf
.
m_max_åüngÀ_™gÀ
 || 
™gÀ1
 > m_surf.m_max_triangle_angle )

656 
boﬁ
 
ªsu…
 = 
	`•lô_edge
–
e
 );

657 
•lô_occuºed
 |
ªsu…
;

662  
•lô_occuºed
;

664 
	}
}

672 
	gEdgeS∂ôãr
::
	$¥o˚ss_mesh
()

675 i‡–
m_surf
.
m_vîbo£
 )

677 
°d
::
cout
 << "---------------------- EdgêS∂ôãr: s∂ôtög ----------------------" << std::
ídl
;

680 
	`as£π
–
m_max_edge_Àngth
 !
UNINITIALIZED_DOUBLE
 );

683 
boﬁ
 
•lô_occuºed
 = 
åue
;

685  
•lô_occuºed
 )

688 
•lô_occuºed
 = 
Ál£
;

690 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
m_surf
.
m_mesh
;

691 
°d
::
ve˘‹
<
S‹èbÀEdge
> 
s‹èbÀ_edges_to_åy
;

693  
size_t
 
i
 = 0; i < 
mesh
.
m_edges
.
	`size
(); i++ )

695 i‡–!
	`edge_is_•lôèbÀ
(
i
) ) { ; }

697 
size_t
 
vîãx_a
 = 
mesh
.
m_edges
[
i
][0];

698 
size_t
 
vîãx_b
 = 
mesh
.
m_edges
[
i
][1];

700 
	`as£π
–
vîãx_a
 < 
m_surf
.
	`gë_num_vîti˚s
() );

701 
	`as£π
–
vîãx_b
 < 
m_surf
.
	`gë_num_vîti˚s
() );

703 
Àngth
;

705 i‡–
m_u£_curv©uª
 )

707 
Àngth
 = 
	`gë_curv©uª_sˇÀd_Àngth
–
m_surf
, 
vîãx_a
, 
vîãx_b
, 0.0, 
m_max_curv©uª_mu…ùlõr
 );

711 
Àngth
 = 
m_surf
.
	`gë_edge_Àngth
(
i
);

714 i‡–
Àngth
 > 
m_max_edge_Àngth
 )

716 
s‹èbÀ_edges_to_åy
.
	`push_back
–
	`S‹èbÀEdge
–
i
, 
Àngth
 ) );

725 
°d
::
	`s‹t
–
s‹èbÀ_edges_to_åy
.
	`begö
(), s‹èbÀ_edges_to_åy.
	`íd
() );

727 
°d
::
ve˘‹
<
S‹èbÀEdge
>::
ªvî£_ôî©‹
 
ôî
 = 
s‹èbÀ_edges_to_åy
.
	`rbegö
();

729  ; 
ôî
 !
s‹èbÀ_edges_to_åy
.
	`ªnd
(); ++iter )

731 
size_t
 
l⁄ge°_edge
 = 
ôî
->
edge_ödex
;

733 i‡–!
	`edge_is_•lôèbÀ
(
l⁄ge°_edge
) ) { ; }

735 
size_t
 
vîãx_a
 = 
mesh
.
m_edges
[
l⁄ge°_edge
][0];

736 
size_t
 
vîãx_b
 = 
mesh
.
m_edges
[
l⁄ge°_edge
][1];

739 
l⁄ge°_edge_Àngth
;

741 i‡–
m_u£_curv©uª
 )

743 
l⁄ge°_edge_Àngth
 = 
	`gë_curv©uª_sˇÀd_Àngth
–
m_surf
, 
vîãx_a
, 
vîãx_b
, 0.0, 
m_max_curv©uª_mu…ùlõr
 );

747 
l⁄ge°_edge_Àngth
 = 
m_surf
.
	`gë_edge_Àngth
(
l⁄ge°_edge
);

750 i‡–
l⁄ge°_edge_Àngth
 > 
m_max_edge_Àngth
 )

753 
boﬁ
 
ªsu…
 = 
	`•lô_edge
–
l⁄ge°_edge
 );

754 
•lô_occuºed
 |
ªsu…
;

760 
boﬁ
 
œrge_™gÀ_•lô_occuºed
 = 
	`œrge_™gÀ_•lô_∑ss
();

762 
•lô_occuºed
 |
œrge_™gÀ_•lô_occuºed
;

766 
	}
}

768 
	gEdgeS∂ôãr
::
	$add_ob£rvî
–
EdgeS∂ôOb£rvî
* 
ob£rvî
 )

770 
m_ob£rvîs
.
	`push_back
–
ob£rvî
 );

771 
	}
}

	@eltopo3d/edgesplitter.h

10 #i‚de‡
EL_TOPO_EDGESPLITTER_H


11 
	#EL_TOPO_EDGESPLITTER_H


	)

17 
	~<mesh›î©‹.h
>

18 
	~<ve˘‹
>

24 
˛ass
 
	gSurfTøck
;

25 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
> 
	gVec
;

26 
	gVec
<3,> 
	tVec3d
;

27 
	gVec
<2,
	tsize_t
> 
	tVec2°
;

28 
	gVec
<3,
	tsize_t
> 
	tVec3°
;

30 
˛ass
 
	gEdgeS∂ôOb£rvî
;

42 ˛as†
	cEdgeS∂ôãr
 : 
public
 
MeshO≥øt‹


45 
public
:

53 ˛as†
	cPªEdgeS∂ôInfo


55 
public
:

56 
PªEdgeS∂ôInfo
–
size_t
 
edge
,

57 
size_t
 
åi0
,

58 
size_t
 
åi1
,

59 
size_t
 
vîãx_a
,

60 
size_t
 
vîãx_b
,

61 
size_t
 
vîãx_c
,

62 
size_t
 
vîãx_d
 );

64 
size_t
 
	mm_edge
;

65 
size_t
 
	mm_åi0
;

66 
size_t
 
	mm_åi1
;

67 
size_t
 
	mm_vîãx_a
;

68 
size_t
 
	mm_vîãx_b
;

69 
size_t
 
	mm_vîãx_c
;

70 
size_t
 
	mm_vîãx_d
;

79 ˛as†
	cPo°EdgeS∂ôInfo


81 
	gpublic
:

82 
Po°EdgeS∂ôInfo
(c⁄° 
PªEdgeS∂ôInfo
& 
¥e_•lô_öfo
,

83 
size_t
 
√w_vîãx
,

84 
size_t
 
√w_åi0
,

85 
size_t
 
√w_åi1
,

86 
size_t
 
√w_åi2
,

87 
size_t
 
√w_åi3
 );

89 
PªEdgeS∂ôInfo
 
	gm_¥e_•lô_öfo
;

90 
size_t
 
	gm_√w_vîãx
;

91 
size_t
 
	gm_√w_åi0
, 
	gm_√w_åi1
, 
	gm_√w_åi2
, 
	gm_√w_åi3
;

95 
EdgeS∂ôãr
–
SurfTøck
& 
surf
, 
boﬁ
 
u£_curv©uª
, 
max_curv©uª_mu…ùlõr
 );

100 
¥o˚ss_mesh
();

104 
add_ob£rvî
–
EdgeS∂ôOb£rvî
* 
ob£rvî
 );

106 
boﬁ
 
	gm_u£_curv©uª
;

109 
	gm_max_curv©uª_mu…ùlõr
;

112 
	gm_max_edge_Àngth
;

114 
	g¥iv©e
:

116 
boﬁ
 
•lô_edge_edge_cﬁlisi⁄
(
size_t
 
√ighbour_ödex
,

117 c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

118 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

119 c⁄° 
Vec2°
& 
edge
 );

121 
boﬁ
 
•lô_åüngÀ_vîãx_cﬁlisi⁄
(c⁄° 
Vec3°
& 
åüngÀ_ödi˚s
,

122 c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

123 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

124 
size_t
 
ovîœµög_vît_ödex
,

125 c⁄° 
Vec3d
& 
vît
 );

128 
boﬁ
 
•lô_edge_p£udo_mŸi⁄_öåodu˚s_öãr£˘i⁄
(c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
,

129 c⁄° 
Vec3d
& 
√w_vîãx_smoŸh_posôi⁄
,

130 
size_t
 
edge
,

131 
size_t
 
åi0
,

132 
size_t
 
åi1
,

133 
size_t
 
vîãx_a
,

134 
size_t
 
vîãx_b
,

135 
size_t
 
vîãx_c
,

136 
size_t
 
vîãx_d
 );

138 
boﬁ
 
edge_is_•lôèbÀ
–
size_t
 
edge_ödex
 );

142 
boﬁ
 
•lô_edge
–
size_t
 
edge
 );

144 
boﬁ
 
œrge_™gÀ_•lô_∑ss
();

148 
	g°d
::
ve˘‹
<
EdgeS∂ôOb£rvî
*> 
m_ob£rvîs
;

158 ˛as†
	cEdgeS∂ôOb£rvî


160 
	mpublic
:

162 
vútuÆ
 ~
	$EdgeS∂ôOb£rvî
() {}

164 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° 
EdgeS∂ôãr
::
PªEdgeS∂ôInfo
& )

166  
åue
;

167 
	}
}

169 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° 
EdgeS∂ôãr
::
Po°EdgeS∂ôInfo
& )

171 
	}
}

	@eltopo3d/eltopo.cpp

11 
	~<ñt›o.h
>

12 
	~<sur·øck.h
>

15 
	$to_öt
–
size_t
 
a
 )

17 
	`as£π
–
a
 < 
INT_MAX
 );

18  
°©ic_ˇ°
<>(
a
);

19 
	}
}

27 
	$ñ_t›o_°©ic_›î©i⁄s
–c⁄° 
ElT›oMesh
* 
öputs
,

28 c⁄° 
ElT›oGíîÆO±i⁄s
* 
gíîÆ_›ti⁄s
,

29 c⁄° 
ElT›oSèticO≥øti⁄sO±i⁄s
* 
›ti⁄s
,

30 
ElT›oDe‰agInf‹m©i⁄
* 
de‰ag_öfo
,

31 
ElT›oMesh
* 
ouçuts
 )

37 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

38 
°d
::
ve˘‹
<> 
mas£s
;

40  
i
 = 0; i < 
öputs
->
num_vîti˚s
; ++i )

42 
vs
.
	`push_back
–
	`Vec3d
–
öputs
->
vîãx_loˇti⁄s
[3*
i
], inputs->vertex_locations[3*i + 1], inputs->vertex_locations[3*i + 2] ) );

43 
mas£s
.
	`push_back
–
öputs
->
vîãx_mas£s
[
i
] );

46 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

47  
i
 = 0; i < 
öputs
->
num_åüngÀs
; ++i )

49 
ts
.
	`push_back
–
	`Vec3°
–
öputs
->
åüngÀs
[3*
i
], inputs->triangles[3*i + 1], inputs->triangles[3*i + 2] ) );

60 
SurfTøckInôüliz©i⁄P¨amëîs
 
c⁄°ru˘i⁄_∑ømëîs
;

62 
c⁄°ru˘i⁄_∑ømëîs
.
m_¥oximôy_ïsû⁄
 = 
gíîÆ_›ti⁄s
->m_proximity_epsilon;

64 
c⁄°ru˘i⁄_∑ømëîs
.
m_u£_‰a˘i⁄
 = 
Ál£
;

65 
c⁄°ru˘i⁄_∑ømëîs
.
m_mö_edge_Àngth
 = 
›ti⁄s
->m_min_edge_length;

66 
c⁄°ru˘i⁄_∑ømëîs
.
m_max_edge_Àngth
 = 
›ti⁄s
->m_max_edge_length;

67 
c⁄°ru˘i⁄_∑ømëîs
.
m_max_vﬁume_ch™ge
 = 
›ti⁄s
->m_max_volume_change;

68 
c⁄°ru˘i⁄_∑ømëîs
.
m_mö_åüngÀ_™gÀ
 = 
›ti⁄s
->m_min_triangle_angle;

69 
c⁄°ru˘i⁄_∑ømëîs
.
m_max_åüngÀ_™gÀ
 = 
›ti⁄s
->m_max_triangle_angle;

70 
c⁄°ru˘i⁄_∑ømëîs
.
m_u£_curv©uª_whí_•lôtög
 = 
›ti⁄s
->m_use_curvature_when_splitting;

71 
c⁄°ru˘i⁄_∑ømëîs
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
›ti⁄s
->m_use_curvature_when_collapsing;

72 
c⁄°ru˘i⁄_∑ømëîs
.
m_mö_curv©uª_mu…ùlõr
 = 
›ti⁄s
->m_min_curvature_multiplier;

73 
c⁄°ru˘i⁄_∑ømëîs
.
m_max_curv©uª_mu…ùlõr
 = 
›ti⁄s
->m_max_curvature_multiplier;

74 
c⁄°ru˘i⁄_∑ømëîs
.
m_Ælow_vîãx_movemít
 = 
›ti⁄s
->m_allow_vertex_movement;

75 
c⁄°ru˘i⁄_∑ømëîs
.
m_edge_Êù_mö_Àngth_ch™ge
 = 
›ti⁄s
->m_edge_flip_min_length_change;

76 
c⁄°ru˘i⁄_∑ømëîs
.
m_mîge_¥oximôy_ïsû⁄
 = 
›ti⁄s
->m_merge_proximity_epsilon;

77 
c⁄°ru˘i⁄_∑ømëîs
.
m_cﬁlisi⁄_ß„ty
 = 
gíîÆ_›ti⁄s
->m_collision_safety;

78 
c⁄°ru˘i⁄_∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = 
›ti⁄s
->m_allow_topology_changes;

79 
c⁄°ru˘i⁄_∑ømëîs
.
m_≥rf‹m_im¥ovemít
 = 
›ti⁄s
->m_perform_improvement;

80 
c⁄°ru˘i⁄_∑ømëîs
.
m_subdivisi⁄_scheme
 = (
Subdivisi⁄Scheme
*Ë
›ti⁄s
->m_subdivision_scheme;

83 
SurfTøck
 
	`surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
c⁄°ru˘i⁄_∑ømëîs
 );

85 
surÁ˚_åackî
.
	`im¥ove_mesh
();

88 
surÁ˚_åackî
.
	`t›ﬁogy_ch™ges
();

90 
surÁ˚_åackî
.
	`de‰ag_mesh
();

95 
de‰ag_öfo
->
num_vîãx_ch™ges
 = 
	`to_öt
(
surÁ˚_åackî
.
m_vîãx_ch™ge_hi°‹y
.
	`size
());

96 
de‰ag_öfo
->
vîãx_is_ªmove
 = (*Ë
	`mÆloc
–de‰ag_öfo->
num_vîãx_ch™ges
 * () );

97 
de‰ag_öfo
->
vîãx_ödex
 = (*Ë
	`mÆloc
–de‰ag_öfo->
num_vîãx_ch™ges
 * () );

98 
de‰ag_öfo
->
•lô_edge
 = (*Ë
	`mÆloc
–2 * de‰ag_öfo->
num_vîãx_ch™ges
 * () );

100  
i
 = 0; i < 
de‰ag_öfo
->
num_vîãx_ch™ges
; ++i )

102 
de‰ag_öfo
->
vîãx_is_ªmove
[
i
] = 
surÁ˚_åackî
.
m_vîãx_ch™ge_hi°‹y
[i].
is_ªmove
 ? 1 : 0;

103 
de‰ag_öfo
->
vîãx_ödex
[
i
] = 
	`to_öt
(
surÁ˚_åackî
.
m_vîãx_ch™ge_hi°‹y
[i].vertex_index);

104 
de‰ag_öfo
->
•lô_edge
[2*
i
+0] = 
	`to_öt
(
surÁ˚_åackî
.
m_vîãx_ch™ge_hi°‹y
[i].split_edge[0]);

105 
de‰ag_öfo
->
•lô_edge
[2*
i
+1] = 
	`to_öt
(
surÁ˚_åackî
.
m_vîãx_ch™ge_hi°‹y
[i].split_edge[1]);

108 
de‰ag_öfo
->
num_åüngÀ_ch™ges
 = 
	`to_öt
(
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
.
	`size
());

109 
de‰ag_öfo
->
åüngÀ_is_ªmove
 = (*Ë
	`mÆloc
–de‰ag_öfo->
num_åüngÀ_ch™ges
 * () );

110 
de‰ag_öfo
->
åüngÀ_ödex
 = (*Ë
	`mÆloc
–de‰ag_öfo->
num_åüngÀ_ch™ges
 * () );

111 
de‰ag_öfo
->
√w_åi
 = (*Ë
	`mÆloc
–3 * de‰ag_öfo->
num_åüngÀ_ch™ges
 * () );

113  
i
 = 0; i < 
de‰ag_öfo
->
num_åüngÀ_ch™ges
; ++i )

115 
de‰ag_öfo
->
åüngÀ_is_ªmove
[
i
] = 
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
[i].
is_ªmove
 ? 1 : 0;

116 
de‰ag_öfo
->
åüngÀ_ödex
[
i
] = 
	`to_öt
(
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
[i].triangle_index);

117 
de‰ag_öfo
->
√w_åi
[3*
i
+0] = 
	`to_öt
(
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
[i].
åi
[0]);

118 
de‰ag_öfo
->
√w_åi
[3*
i
+1] = 
	`to_öt
(
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
[i].
åi
[1]);

119 
de‰ag_öfo
->
√w_åi
[3*
i
+2] = 
	`to_öt
(
surÁ˚_åackî
.
m_åüngÀ_ch™ge_hi°‹y
[i].
åi
[2]);

123 
	`as£π
( "Mesh defrag infoÇotÖresent in C-API" );

149 
ouçuts
->
num_vîti˚s
 = 
	`to_öt
(
surÁ˚_åackî
.
	`gë_num_vîti˚s
());

150 
ouçuts
->
vîãx_loˇti⁄s
 = (*Ë
	`mÆloc
–3 * (ouçuts->
num_vîti˚s
) * () );

151 
ouçuts
->
vîãx_mas£s
 = (*Ë
	`mÆloc
–(ouçuts->
num_vîti˚s
) * () );

153  
i
 = 0; i < 
ouçuts
->
num_vîti˚s
; ++i )

155 c⁄° 
Vec3d
& 
pos
 = 
surÁ˚_åackî
.
	`gë_posôi⁄
(
i
);

156 
ouçuts
->
vîãx_loˇti⁄s
[3*
i
 + 0] = 
pos
[0];

157 
ouçuts
->
vîãx_loˇti⁄s
[3*
i
 + 1] = 
pos
[1];

158 
ouçuts
->
vîãx_loˇti⁄s
[3*
i
 + 2] = 
pos
[2];

159 
ouçuts
->
vîãx_mas£s
[
i
] = 
surÁ˚_åackî
.
m_mas£s
[i];

162 
ouçuts
->
num_åüngÀs
 = 
	`to_öt
(
surÁ˚_åackî
.
m_mesh
.
	`num_åüngÀs
());

163 
ouçuts
->
åüngÀs
 = (*Ë
	`mÆloc
–3 * (ouçuts->
num_åüngÀs
) * () );

165  
i
 = 0; i < 
ouçuts
->
num_åüngÀs
; ++i )

167 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
	`gë_åüngÀ
(
i
);

168 
ouçuts
->
åüngÀs
[3*
i
 + 0] = 
	`to_öt
(
cuº_åi
[0]);

169 
ouçuts
->
åüngÀs
[3*
i
 + 1] = 
	`to_öt
(
cuº_åi
[1]);

170 
ouçuts
->
åüngÀs
[3*
i
 + 2] = 
	`to_öt
(
cuº_åi
[2]);

173 
	}
}

182 
	$ñ_t›o_‰ì_°©ic_›î©i⁄s_ªsu…s
–
ElT›oMesh
* 
ouçuts
, 
ElT›oDe‰agInf‹m©i⁄
* 
de‰ag_öfo
 )

184 
	`‰ì
–
ouçuts
->
vîãx_loˇti⁄s
 );

185 
	`‰ì
–
ouçuts
->
vîãx_mas£s
 );

186 
	`‰ì
–
ouçuts
->
åüngÀs
 );

188 
	`‰ì
–
de‰ag_öfo
->
vîãx_is_ªmove
 );

189 
	`‰ì
–
de‰ag_öfo
->
vîãx_ödex
 );

190 
	`‰ì
–
de‰ag_öfo
->
•lô_edge
 );

191 
	`‰ì
–
de‰ag_öfo
->
åüngÀ_is_ªmove
 );

192 
	`‰ì
–
de‰ag_öfo
->
åüngÀ_ödex
 );

193 
	`‰ì
–
de‰ag_öfo
->
√w_åi
 );

194 
	`‰ì
–
de‰ag_öfo
->
de‰agged_åüngÀ_m≠
 );

195 
	`‰ì
–
de‰ag_öfo
->
de‰agged_vîãx_m≠
 );

196 
	}
}

205 
	$ñ_t›o_öãgøã
–c⁄° 
ElT›oMesh
* 
öputs
,

206 c⁄° * 
ö_vîãx_√w_loˇti⁄s
,

207 c⁄° 
ElT›oGíîÆO±i⁄s
* 
gíîÆ_›ti⁄s
,

208 c⁄° 
ElT›oI¡egøti⁄O±i⁄s
* 
›ti⁄s
,

209 **
out_vîãx_loˇti⁄s
,

210 *
out_dt
 )

216 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

217 
°d
::
ve˘‹
<> 
mas£s
;

219  
i
 = 0; i < 
öputs
->
num_vîti˚s
; ++i )

221 
vs
.
	`push_back
–
	`Vec3d
–
öputs
->
vîãx_loˇti⁄s
[3*
i
], inputs->vertex_locations[3*i + 1], inputs->vertex_locations[3*i + 2] ) );

222 
mas£s
.
	`push_back
–
öputs
->
vîãx_mas£s
[
i
] );

225 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

226  
i
 = 0; i < 
öputs
->
num_åüngÀs
; ++i )

228 
ts
.
	`push_back
–
	`Vec3°
–
öputs
->
åüngÀs
[3*
i
], inputs->triangles[3*i + 1], inputs->triangles[3*i + 2] ) );

238 
Dy«micSurÁ˚
 
	`dy«mic_surÁ˚
(
vs
,

239 
ts
,

240 
mas£s
,

241 
gíîÆ_›ti⁄s
->
m_¥oximôy_ïsû⁄
,

242 
›ti⁄s
->
m_‰i˘i⁄_c€fficõ¡
,

243 
gíîÆ_›ti⁄s
->
m_cﬁlisi⁄_ß„ty
,

244 
gíîÆ_›ti⁄s
->
m_vîbo£
 );

246 
dy«mic_surÁ˚
.
	`£t_Æl_√wposôi⁄s
–
öputs
->
num_vîti˚s
, 
ö_vîãx_√w_loˇti⁄s
 );

249 
a˘uÆ_dt
;

250 
dy«mic_surÁ˚
.
	`öãgøã
–
›ti⁄s
->
m_dt
, 
a˘uÆ_dt
 );

253 *
out_dt
 = 
a˘uÆ_dt
;

262 *
out_vîãx_loˇti⁄s
 = (*Ë
	`mÆloc
–3 * 
öputs
->
num_vîti˚s
 * () );

263  
i
 = 0; i < 
öputs
->
num_vîti˚s
; ++i )

265 c⁄° 
Vec3d
& 
pos
 = 
dy«mic_surÁ˚
.
	`gë_posôi⁄
(
i
);

266 (*
out_vîãx_loˇti⁄s
)[3*
i
] = 
pos
[0];

267 (*
out_vîãx_loˇti⁄s
)[3*
i
 + 1] = 
pos
[1];

268 (*
out_vîãx_loˇti⁄s
)[3*
i
 + 2] = 
pos
[2];

271 
	}
}

281 
	$ñ_t›o_‰ì_öãgøã_ªsu…s
–* 
out_vîãx_loˇti⁄s
 )

283 
	`‰ì
–
out_vîãx_loˇti⁄s
 );

284 
	}
}

	@eltopo3d/eltopo.h

11 #i‚de‡
ELTOPO_H


12 
	#ELTOPO_H


	)

14 #ifde‡
__˝lu•lus


29 
	sElT›oGíîÆO±i⁄s


31 
m_vîbo£
;

33 
m_cﬁlisi⁄_ß„ty
;

36 
m_¥oximôy_ïsû⁄
;

46 
	sElT›oSèticO≥øti⁄sO±i⁄s


49 
m_≥rf‹m_im¥ovemít
;

52 
m_Ælow_t›ﬁogy_ch™ges
;

55 
m_max_vﬁume_ch™ge
;

58 
m_mö_edge_Àngth
;

61 
m_max_edge_Àngth
;

63 
m_mö_åüngÀ_¨ó
;

65 
m_mö_åüngÀ_™gÀ
;

67 
m_max_åüngÀ_™gÀ
;

69 
boﬁ
 
m_u£_curv©uª_whí_•lôtög
;

71 
boﬁ
 
m_u£_curv©uª_whí_cﬁœpsög
;

74 
m_mö_curv©uª_mu…ùlõr
;

76 
m_max_curv©uª_mu…ùlõr
;

78 
boﬁ
 
m_Ælow_vîãx_movemít
;

81 
m_edge_Êù_mö_Àngth_ch™ge
;

84 
m_mîge_¥oximôy_ïsû⁄
;

87 *
m_subdivisi⁄_scheme
;

90 
boﬁ
 
m_cﬁlisi⁄_ß„ty
;

93 
boﬁ
 
m_Ælow_n⁄_m™ifﬁd
;

103 
	sElT›oI¡egøti⁄O±i⁄s


105 
m_‰i˘i⁄_c€fficõ¡
;

108 
m_dt
;

118 
	sElT›oMesh


122 
num_vîti˚s
;

125 * 
vîãx_loˇti⁄s
;

128 
num_åüngÀs
;

131 * 
åüngÀs
;

134 * 
vîãx_mas£s
;

145 
	sElT›oDe‰agInf‹m©i⁄


147 
num_vîãx_ch™ges
;

148 * 
vîãx_is_ªmove
;

149 * 
vîãx_ödex
;

150 * 
•lô_edge
;

152 
num_åüngÀ_ch™ges
;

153 * 
åüngÀ_is_ªmove
;

154 * 
åüngÀ_ödex
;

155 * 
√w_åi
;

157 
de‰agged_åüngÀ_m≠_size
;

158 * 
de‰agged_åüngÀ_m≠
;

160 
de‰agged_vîãx_m≠_size
;

161 * 
de‰agged_vîãx_m≠
;

203 
ñ_t›o_°©ic_›î©i⁄s
–c⁄° 
ElT›oMesh
* 
öputs
,

204 c⁄° 
ElT›oGíîÆO±i⁄s
* 
gíîÆ_›ti⁄s
,

205 c⁄° 
ElT›oSèticO≥øti⁄sO±i⁄s
* 
›ti⁄s
,

206 
ElT›oDe‰agInf‹m©i⁄
* 
de‰ag_öfo
,

207 
ElT›oMesh
* 
ouçuts
 );

215 
ñ_t›o_‰ì_°©ic_›î©i⁄s_ªsu…s
–
ElT›oMesh
* 
ouçuts
, 
ElT›oDe‰agInf‹m©i⁄
* 
de‰ag_öfo
 );

247 
ñ_t›o_öãgøã
(c⁄° 
ElT›oMesh
* 
öputs
,

248 c⁄° * 
ö_vîãx_√w_loˇti⁄s
,

249 c⁄° 
ElT›oGíîÆO±i⁄s
* 
gíîÆ_›ti⁄s
,

250 c⁄° 
ElT›oI¡egøti⁄O±i⁄s
* 
›ti⁄s
,

251 **
out_vîãx_loˇti⁄s
,

252 *
out_dt
 );

261 
ñ_t›o_‰ì_öãgøã_ªsu…s
–* 
out_vîãx_loˇti⁄s
 );

264 #ifde‡
__˝lu•lus


	@eltopo3d/impactzonesolver.cpp

10 
	~<cﬁlisi⁄pùñöe.h
>

12 
	~<ccd_wøµî.h
>

13 
	~<dy«micsurÁ˚.h
>

14 
	~<im∑˘z⁄esﬁvî.h
>

15 
	~<krylov_sﬁvîs.h
>

16 
	~<m©.h
>

17 
	~<•¨£_m©rix.h
>

18 
	~<run°©s.h
>

20 
	g«me•a˚


25 
mîge_im∑˘_z⁄es
–
°d
::
ve˘‹
<
Im∑˘Z⁄e
>& 
√w_im∑˘_z⁄es
, std::ve˘‹<Im∑˘Z⁄e>& 
ma°î_im∑˘_z⁄es
 );

29 
AtDB
(c⁄° 
S∑r£M©rixDy«micCSR
 &
A
, c⁄° * 
dügD
, c⁄° S∑r£M©rixDy«micCSR &
B
, S∑r£M©rixDy«micCSR &
C
);

33 
to_öt
–
±rdiff_t
 
a
 );

37 
to_öt
–
size_t
 
a
 );

46 
mîge_im∑˘_z⁄es
–
°d
::
ve˘‹
<
Im∑˘Z⁄e
>& 
√w_im∑˘_z⁄es
, std::ve˘‹<Im∑˘Z⁄e>& 
ma°î_im∑˘_z⁄es
 )

49 
boﬁ
 
mîge_ocuºed
 = 
åue
;

51  
size_t
 
	gi
 = 0; i < 
	gma°î_im∑˘_z⁄es
.
size
(); ++i )

53 
	gma°î_im∑˘_z⁄es
[
i
].
	gm_Æl_sﬁved
 = 
åue
;

56  
size_t
 
	gi
 = 0; i < 
	g√w_im∑˘_z⁄es
.
size
(); ++i )

58 
	g√w_im∑˘_z⁄es
[
i
].
	gm_Æl_sﬁved
 = 
Ál£
;

61  
	gmîge_ocuºed
 )

64 
	gmîge_ocuºed
 = 
Ál£
;

66  
size_t
 
	gi
 = 0; i < 
	g√w_im∑˘_z⁄es
.
size
(); ++i )

68 
boﬁ
 
	gi_is_disjoöt
 = 
åue
;

70  
size_t
 
	gj
 = 0; j < 
	gma°î_im∑˘_z⁄es
.
size
(); ++j )

74 i‡–
	gma°î_im∑˘_z⁄es
[
j
].
sh¨e_vîti˚s
–
√w_im∑˘_z⁄es
[
i
] ) )

77 
boﬁ
 
	gfound_√w_cﬁlisi⁄
 = 
Ál£
;

80  
size_t
 
	gc
 = 0; c < 
	g√w_im∑˘_z⁄es
[
i
].
	gm_cﬁlisi⁄s
.
size
(); ++c )

83 
boﬁ
 
	gßme_cﬁlisi⁄_exi°s
 = 
Ál£
;

85  
size_t
 
	gm
 = 0; m < 
	gma°î_im∑˘_z⁄es
[
j
].
	gm_cﬁlisi⁄s
.
size
(); ++m )

87 i‡–
	gma°î_im∑˘_z⁄es
[
j
].
	gm_cﬁlisi⁄s
[
m
].
ßme_vîti˚s
–
√w_im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
c
] ) )

90 
	gßme_cﬁlisi⁄_exi°s
 = 
åue
;

96 i‡–!
	gßme_cﬁlisi⁄_exi°s
 )

98 
	gma°î_im∑˘_z⁄es
[
j
].
	gm_cﬁlisi⁄s
.
push_back
–
√w_im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
c
] );

99 
	gfound_√w_cﬁlisi⁄
 = 
åue
;

104 i‡–
	gfound_√w_cﬁlisi⁄
 )

106 
	gma°î_im∑˘_z⁄es
[
j
].
	gm_Æl_sﬁved
 &
√w_im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
;

109 
	gmîge_ocuºed
 = 
åue
;

110 
	gi_is_disjoöt
 = 
Ál£
;

116 i‡–
	gi_is_disjoöt
 )

120 
Im∑˘Z⁄e
 
	g√w_z⁄e
;

121  
size_t
 
	gc
 = 0; c < 
	g√w_im∑˘_z⁄es
[
i
].
	gm_cﬁlisi⁄s
.
size
(); ++c )

123 
	g√w_z⁄e
.
	gm_cﬁlisi⁄s
.
push_back
–
√w_im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
c
] );

126 
	g√w_z⁄e
.
	gm_Æl_sﬁved
 = 
√w_im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
;

128 
	gma°î_im∑˘_z⁄es
.
push_back
–
√w_z⁄e
 );

132 
	g√w_im∑˘_z⁄es
 = 
ma°î_im∑˘_z⁄es
;

133 
	gma°î_im∑˘_z⁄es
.
˛ór
();

137 
	gma°î_im∑˘_z⁄es
 = 
√w_im∑˘_z⁄es
;

147 
AtDB
(c⁄° 
S∑r£M©rixDy«micCSR
 &
A
, c⁄° * 
dügD
, c⁄° S∑r£M©rixDy«micCSR &
B
, S∑r£M©rixDy«micCSR &
C
)

149 
as£π
(
A
.
m
==
B
.m);

150 
	gC
.
ªsize
(
A
.
n
, 
B
.n);

151 
	gC
.
£t_zîo
();

152 
	gk
=0; k<
	gA
.
	gm
; ++k)

154 c⁄° 
	gDy«micS∑r£Ve˘‹
& 
	gr
 = 
A
.
row
[
k
];

156  
	gDy«micS∑r£Ve˘‹
::
c⁄°_ôî©‹
 
p
=
r
.
begö
(); 
	gp
 !r.
íd
(); ++p )

158 
	gi
 = 
p
->
ödex
;

159 
	gmu…ùlõr
 = 
p
->
vÆue
 * 
dügD
[
k
];

160 
	gC
.
add_•¨£_row
–
i
, 
B
.
row
[
k
], 
mu…ùlõr
 );

165 
to_öt
–
±rdiff_t
 
a
 )

167 
as£π
–
a
 < 
INT_MAX
 );

168  
	g°©ic_ˇ°
<>(
	ga
);

171 
to_öt
–
size_t
 
a
 )

173 
as£π
–
a
 < 
INT_MAX
 );

174  
	g°©ic_ˇ°
<>(
	ga
);

186 
	gIm∑˘Z⁄eSﬁvî
::
	$Im∑˘Z⁄eSﬁvî
–
Dy«micSurÁ˚
& 
surÁ˚
) :

187 
	`m_surÁ˚
–
surÁ˚
 ),

188 
	$m_rigid_z⁄e_öföôe_mass
( 1000.0 )

189 {
	}
}

198 
boﬁ
 
	gIm∑˘Z⁄eSﬁvî
::
	$ôî©ed_öña°ic_¥oje˘i⁄
–
Im∑˘Z⁄e
& 
iz
, 
dt
 )

200 
	`as£π
–
m_surÁ˚
.
m_mas£s
.
	`size
(Ë=m_surÁ˚.
	`gë_num_vîti˚s
() );

202 c⁄° 
MAX_PROJECTION_ITERATIONS
 = 20;

204  
i
 = 0; i < 
MAX_PROJECTION_ITERATIONS
; ++i )

206 
boﬁ
 
suc˚ss
 = 
	`öña°ic_¥oje˘i⁄
–
iz
 );

208 i‡–!
suc˚ss
 )

210 i‡–
m_surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "Áûuª i¿öña°i¯¥oje˘i⁄" << std::
ídl
; }

211  
Ál£
;

214 
boﬁ
 
cﬁlisi⁄_°ûl_exi°s
 = 
Ál£
;

216  
size_t
 
c
 = 0; c < 
iz
.
m_cﬁlisi⁄s
.
	`size
(); ++c )

221 
Cﬁlisi⁄
& 
cﬁlisi⁄
 = 
iz
.
m_cﬁlisi⁄s
[
c
];

222 c⁄° 
Vec4°
& 
vs
 = 
cﬁlisi⁄
.
m_vîãx_ödi˚s
;

224 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[0], m_surÁ˚.
	`gë_posôi⁄
(vs[0]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[0]]);

225 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[1], m_surÁ˚.
	`gë_posôi⁄
(vs[1]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[1]]);

226 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[2], m_surÁ˚.
	`gë_posôi⁄
(vs[2]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[2]]);

227 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[3], m_surÁ˚.
	`gë_posôi⁄
(vs[3]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[3]]);

229 i‡–
m_surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "checkög cﬁlisi⁄ " << 
vs
 << std::
ídl
; }

231 i‡–
cﬁlisi⁄
.
m_is_edge_edge
 )

234 
s0
, 
s2
, 
ªl_di•
;

235 
Vec3d
 
n‹mÆ
;

237 
	`as£π
–
vs
[0] < vs[1] && vs[2] < vs[3] );

239 i‡–
	`£gmít_£gmít_cﬁlisi⁄
–
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[0]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[0]), vs[0],

240 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[1]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[1]), vs[1],

241 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[2]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[2]), vs[2],

242 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[3]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[3]), vs[3],

243 
s0
, 
s2
,

244 
n‹mÆ
,

245 
ªl_di•
 ) )

247 
cﬁlisi⁄
.
m_n‹mÆ
 = 
n‹mÆ
;

248 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
 = 
	`Vec4d
–-
s0
, -(1-s0), 
s2
, (1-s2) );

249 
cﬁlisi⁄
.
m_ªœtive_di•œ˚mít
 = 
ªl_di•
;

250 
cﬁlisi⁄_°ûl_exi°s
 = 
åue
;

257 
s1
, 
s2
, 
s3
, 
ªl_di•
;

258 
Vec3d
 
n‹mÆ
;

260 
	`as£π
–
vs
[1] < vs[2] && vs[2] < vs[3] && vs[1] < vs[3] );

262 i‡–
	`poöt_åüngÀ_cﬁlisi⁄
–
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[0]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[0]), vs[0],

263 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[1]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[1]), vs[1],

264 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[2]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[2]), vs[2],

265 
m_surÁ˚
.
	`gë_posôi⁄
(
vs
[3]), m_surÁ˚.
	`gë_√wposôi⁄
(vs[3]), vs[3],

266 
s1
, 
s2
, 
s3
,

267 
n‹mÆ
,

268 
ªl_di•
 ) )

270 
cﬁlisi⁄
.
m_n‹mÆ
 = 
n‹mÆ
;

271 
cﬁlisi⁄
.
m_b¨y˚¡ric_co‹dö©es
 = 
	`Vec4d
–1, -
s1
, -
s2
, -
s3
 );

272 
cﬁlisi⁄
.
m_ªœtive_di•œ˚mít
 = 
ªl_di•
;

273 
cﬁlisi⁄_°ûl_exi°s
 = 
åue
;

280 i‡–
Ál£
 =
cﬁlisi⁄_°ûl_exi°s
 )

282  
åue
;

287 i‡–
m_surÁ˚
.
m_vîbo£
 )

289 
°d
::
cout
 << "ªached max iãøti⁄†f‹Åhi†z⁄e" << std::
ídl
;

292  
Ál£
;

294 
	}
}

303 
boﬁ
 
	gIm∑˘Z⁄eSﬁvî
::
	$öña°ic_¥oje˘i⁄
–c⁄° 
Im∑˘Z⁄e
& 
iz
 )

306 i‡–
m_surÁ˚
.
m_vîbo£
 )

308 
°d
::
cout
 << " ----- usög s∑r£ sﬁvî " << std::
ídl
;

311 c⁄° 
size_t
 
k
 = 
iz
.
m_cﬁlisi⁄s
.
	`size
();

313 
°d
::
ve˘‹
<
size_t
> 
z⁄e_vîti˚s
;

314 
iz
.
	`gë_Æl_vîti˚s
–
z⁄e_vîti˚s
 );

316 c⁄° 
size_t
 
n
 = 
z⁄e_vîti˚s
.
	`size
();

318 i‡–
m_surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "GCT: " << 3*
n
 << "x" << 
k
 << std::
ídl
; }

320 
S∑r£M©rixDy«micCSR
 
	`GCT
–
	`to_öt
(3*
n
),Åo_öt(
k
) );

321 
GCT
.
	`£t_zîo
();

324  
i
 = 0; i < 
	`to_öt
(
k
); ++i )

327 c⁄° 
Cﬁlisi⁄
& 
cﬁl
 = 
iz
.
m_cﬁlisi⁄s
[
i
];

329  
v
 = 0; v < 4; ++v )

332 
size_t
 
j
 = 
cﬁl
.
m_vîãx_ödi˚s
[
v
];

334 
°d
::
ve˘‹
<
size_t
>::
ôî©‹
 
z⁄e_vîãx_ôî
 = 
	`föd
–
z⁄e_vîti˚s
.
	`begö
(), z⁄e_vîti˚s.
	`íd
(), 
j
 );

336 
	`as£π
–
z⁄e_vîãx_ôî
 !
z⁄e_vîti˚s
.
	`íd
() );

338 
m©_j
 = 
	`to_öt
–
z⁄e_vîãx_ôî
 - 
z⁄e_vîti˚s
.
	`begö
() );

340 
	`GCT
(
m©_j
*3, 
i
Ë
cﬁl
.
m_b¨y˚¡ric_co‹dö©es
[
v
] * cﬁl.
m_n‹mÆ
[0];

341 
	`GCT
(
m©_j
*3+1, 
i
Ë
cﬁl
.
m_b¨y˚¡ric_co‹dö©es
[
v
] * cﬁl.
m_n‹mÆ
[1];

342 
	`GCT
(
m©_j
*3+2, 
i
Ë
cﬁl
.
m_b¨y˚¡ric_co‹dö©es
[
v
] * cﬁl.
m_n‹mÆ
[2];

347 
Aºay1d
 
öv_mas£s
;

348 
öv_mas£s
.
	`ª£rve
(3*
n
);

349 
Aºay1d
 
cﬁumn_vñocôõs
;

350 
cﬁumn_vñocôõs
.
	`ª£rve
(3*
n
);

352  
size_t
 
i
 = 0; i < 
n
; ++i )

354 
öv_mas£s
.
	`push_back
–1.0 / 
m_surÁ˚
.
m_mas£s
[
z⁄e_vîti˚s
[
i
]] );

355 
öv_mas£s
.
	`push_back
–1.0 / 
m_surÁ˚
.
m_mas£s
[
z⁄e_vîti˚s
[
i
]] );

356 
öv_mas£s
.
	`push_back
–1.0 / 
m_surÁ˚
.
m_mas£s
[
z⁄e_vîti˚s
[
i
]] );

358 
cﬁumn_vñocôõs
.
	`push_back
–
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][0] );

359 
cﬁumn_vñocôõs
.
	`push_back
–
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][1] );

360 
cﬁumn_vñocôõs
.
	`push_back
–
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][2] );

368 
Aºay1d
 
	`x
(
k
);

370 
KrylovSﬁvîSètus
 
sﬁvî_ªsu…
;

375 
S∑r£M©rixDy«micCSR
 
	`A
–
	`to_öt
(
k
),Åo_int(k) );

376 
A
.
	`£t_zîo
();

377 
	`AtDB
–
GCT
, 
öv_mas£s
.
d©a
, GCT, 
A
 );

379 
Aºay1d
 
	`b
(
k
);

380 
GCT
.
	`≠∂y_å™•o£
–
cﬁumn_vñocôõs
.
d©a
, 
b
.data );

382 i‡–
m_surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "sy°em buût" << std::
ídl
; }

384 
MINRES_CR_Sﬁvî
 
sﬁvî
;

385 
S∑r£M©rixSèticCSR
 
	`sﬁvî_m©rix
–
A
 );

386 
sﬁvî
.
max_ôî©i⁄s
 = 1000;

387 
sﬁvî_ªsu…
 = 
sﬁvî
.
	`sﬁve
–
sﬁvî_m©rix
, 
b
.
d©a
, 
x
.data );

389 i‡–
sﬁvî_ªsu…
 !
KRYLOV_CONVERGED
 )

391 i‡–
m_surÁ˚
.
m_vîbo£
 )

393 
°d
::
cout
 << "CR solver failed: ";

394 i‡–
sﬁvî_ªsu…
 =
KRYLOV_BREAKDOWN
 )

396 
°d
::
cout
 << "KRYLOV_BREAKDOWN" << std::
ídl
;

400 
°d
::
cout
 << "KRYLOV_EXCEEDED_MAX_ITERATIONS" << std::
ídl
;

403 
ªsiduÆ_n‹m
 = 
BLAS
::
	`abs_max
(
sﬁvî
.
r
);

404 
°d
::
cout
 << "ªsiduÆ_n‹m: " << 
ªsiduÆ_n‹m
 << std::
ídl
;

408  
Ál£
;

412 
Aºay1d
 
	`≠∂õd_impul£s
(3*
n
);

413 
GCT
.
	`≠∂y
–
x
.
d©a
, 
≠∂õd_impul£s
.data );

415 c⁄° 
IMPULSE_MULTIPLIER
 = 0.8;

417  
size_t
 
i
 = 0; i < 
≠∂õd_impul£s
.
	`size
(); ++i )

419 
cﬁumn_vñocôõs
[
i
] -
IMPULSE_MULTIPLIER
 * 
öv_mas£s
[i] * 
≠∂õd_impul£s
[i];

422  
size_t
 
i
 = 0; i < 
n
; ++i )

424 
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][0] = 
cﬁumn_vñocôõs
[3*i];

425 
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][1] = 
cﬁumn_vñocôõs
[3*i + 1];

426 
m_surÁ˚
.
m_vñocôõs
[
z⁄e_vîti˚s
[
i
]][2] = 
cﬁumn_vñocôõs
[3*i + 2];

429  
åue
;

430 
	}
}

439 
boﬁ
 
	gIm∑˘Z⁄eSﬁvî
::
	$öña°ic_im∑˘_z⁄es
(
dt
)

443 
°d
::
ve˘‹
<
Vec3d
> 
ﬁd_vñocôõs
 = 
m_surÁ˚
.
m_vñocôõs
;

445 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
im∑˘_z⁄es
;

447 
boﬁ
 
föished_dëe˘ög_cﬁlisi⁄s
 = 
Ál£
;

449 
°d
::
ve˘‹
<
Cﬁlisi⁄
> 
tŸÆ_cﬁlisi⁄s
;

450 
föished_dëe˘ög_cﬁlisi⁄s
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_cﬁlisi⁄s
(
tŸÆ_cﬁlisi⁄s
);

452  
Ál£
 =
tŸÆ_cﬁlisi⁄s
.
	`em±y
() )

455 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
√w_im∑˘_z⁄es
;

456  
size_t
 
i
 = 0; i < 
tŸÆ_cﬁlisi⁄s
.
	`size
(); ++i )

458 
Im∑˘Z⁄e
 
√w_z⁄e
;

459 
√w_z⁄e
.
m_cﬁlisi⁄s
.
	`push_back
–
tŸÆ_cﬁlisi⁄s
[
i
] );

460 
√w_im∑˘_z⁄es
.
	`push_back
–
√w_z⁄e
 );

464 
	`as£π
–
√w_im∑˘_z⁄es
.
	`size
(Ë=
tŸÆ_cﬁlisi⁄s
.size() );

467 
	`mîge_im∑˘_z⁄es
–
√w_im∑˘_z⁄es
, 
im∑˘_z⁄es
 );

470  
i
 = 0; i < (Ë
im∑˘_z⁄es
.
	`size
(); ++i )

472 i‡–
im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
 )

474 
im∑˘_z⁄es
.
	`îa£
–im∑˘_z⁄es.
	`begö
(Ë+ 
i
 );

475 --
i
;

479  
i
 = 0; i < (Ë
im∑˘_z⁄es
.
	`size
(); ++i )

481 
	`as£π
–
Ál£
 =
im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
 );

484 
boﬁ
 
Æl_z⁄es_sﬁved_ok
 = 
åue
;

487  
size_t
 
i
 = 0; i < 
im∑˘_z⁄es
.
	`size
(); ++i )

491  
size_t
 
j
 = 0; j < 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
.
	`size
(); ++j )

493 c⁄° 
Vec4°
& 
vs
 = 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
;

494 
m_surÁ˚
.
m_vñocôõs
[
vs
[0]] = 
ﬁd_vñocôõs
[vs[0]];

495 
m_surÁ˚
.
m_vñocôõs
[
vs
[1]] = 
ﬁd_vñocôõs
[vs[1]];

496 
m_surÁ˚
.
m_vñocôõs
[
vs
[2]] = 
ﬁd_vñocôõs
[vs[2]];

497 
m_surÁ˚
.
m_vñocôõs
[
vs
[3]] = 
ﬁd_vñocôõs
[vs[3]];

502 
Æl_z⁄es_sﬁved_ok
 &
	`ôî©ed_öña°ic_¥oje˘i⁄
–
im∑˘_z⁄es
[
i
], 
dt
 );

505  
size_t
 
j
 = 0; j < 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
.
	`size
(); ++j )

507 c⁄° 
Vec4°
& 
vs
 = 
im∑˘_z⁄es
[
i
].
m_cﬁlisi⁄s
[
j
].
m_vîãx_ödi˚s
;

509 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[0], m_surÁ˚.
	`gë_posôi⁄
(vs[0]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[0]] );

510 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[1], m_surÁ˚.
	`gë_posôi⁄
(vs[1]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[1]] );

511 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[2], m_surÁ˚.
	`gë_posôi⁄
(vs[2]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[2]] );

512 
m_surÁ˚
.
	`£t_√wposôi⁄
–
vs
[3], m_surÁ˚.
	`gë_posôi⁄
(vs[3]Ë+ 
dt
 * m_surÁ˚.
m_vñocôõs
[vs[3]] );

519 i‡–
Ál£
 =
Æl_z⁄es_sﬁved_ok
 )

521 i‡–
m_surÁ˚
.
m_vîbo£
 )

523 
°d
::
cout
 << "©Üó° o√ im∑˘ z⁄êhadá sﬁvîÖrobÀm" << std::
ídl
;

526  
Ál£
;

529 
tŸÆ_cﬁlisi⁄s
.
	`˛ór
();

531 i‡–!
föished_dëe˘ög_cﬁlisi⁄s
 )

533 i‡–
m_surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "©ãm±ögÅÿföish globÆ cﬁlisi⁄ dëe˘i⁄" << std::
ídl
; }

534 
föished_dëe˘ög_cﬁlisi⁄s
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_cﬁlisi⁄s
–
tŸÆ_cﬁlisi⁄s
 );

535 
im∑˘_z⁄es
.
	`˛ór
();

539 
boﬁ
 
dëe˘_ok
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_√w_cﬁlisi⁄s
–
im∑˘_z⁄es
, 
tŸÆ_cﬁlisi⁄s
 );

540 i‡–!
dëe˘_ok
 )

542  
Ál£
;

548  
åue
;

550 
	}
}

559 
boﬁ
 
	gIm∑˘Z⁄eSﬁvî
::
	$rigid_im∑˘_z⁄es
(
dt
)

562 
°d
::
ve˘‹
<
Vec3d
> 
ﬁd_vñocôõs
 = 
m_surÁ˚
.
m_vñocôõs
;

564 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
im∑˘_z⁄es
;

566 
boﬁ
 
föished_dëe˘ög_cﬁlisi⁄s
 = 
Ál£
;

568 
°d
::
ve˘‹
<
Cﬁlisi⁄
> 
tŸÆ_cﬁlisi⁄s
;

569 
föished_dëe˘ög_cﬁlisi⁄s
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_cﬁlisi⁄s
(
tŸÆ_cﬁlisi⁄s
);

571  
Ál£
 =
tŸÆ_cﬁlisi⁄s
.
	`em±y
() )

574 
°d
::
ve˘‹
<
Im∑˘Z⁄e
> 
√w_im∑˘_z⁄es
;

575  
size_t
 
i
 = 0; i < 
tŸÆ_cﬁlisi⁄s
.
	`size
(); ++i )

577 
Im∑˘Z⁄e
 
√w_z⁄e
;

578 
√w_z⁄e
.
m_cﬁlisi⁄s
.
	`push_back
–
tŸÆ_cﬁlisi⁄s
[
i
] );

579 
√w_im∑˘_z⁄es
.
	`push_back
–
√w_z⁄e
 );

583 
	`as£π
–
√w_im∑˘_z⁄es
.
	`size
(Ë=
tŸÆ_cﬁlisi⁄s
.size() );

586 
	`mîge_im∑˘_z⁄es
–
√w_im∑˘_z⁄es
, 
im∑˘_z⁄es
 );

588  
i
 = 0; i < (Ë
im∑˘_z⁄es
.
	`size
(); ++i )

590 i‡–
im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
 )

592 
im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
 = 
Ál£
;

593 
im∑˘_z⁄es
.
	`îa£
–im∑˘_z⁄es.
	`begö
(Ë+ 
i
 );

594 --
i
;

598  
i
 = 0; i < (Ë
im∑˘_z⁄es
.
	`size
(); ++i )

600 
	`as£π
–
Ál£
 =
im∑˘_z⁄es
[
i
].
m_Æl_sﬁved
 );

604  
size_t
 
i
 = 0; i < 
im∑˘_z⁄es
.
	`size
(); ++i )

607 
°d
::
ve˘‹
<
size_t
> 
z⁄e_vîti˚s
;

608 
im∑˘_z⁄es
[
i
].
	`gë_Æl_vîti˚s
–
z⁄e_vîti˚s
 );

609 
boﬁ
 
rigid_mŸi⁄_ok
 = 
	`ˇlcuœã_rigid_mŸi⁄
(
dt
, 
z⁄e_vîti˚s
);

611 i‡–!
rigid_mŸi⁄_ok
 )

613 
°d
::
cout
 << "rigid im∑˘ z⁄êÁûs" << std::
ídl
;

614  
Ál£
;

618 
tŸÆ_cﬁlisi⁄s
.
	`˛ór
();

620 i‡–!
föished_dëe˘ög_cﬁlisi⁄s
 )

622 
föished_dëe˘ög_cﬁlisi⁄s
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_cﬁlisi⁄s
–
tŸÆ_cﬁlisi⁄s
 );

623 
im∑˘_z⁄es
.
	`˛ór
();

627 
boﬁ
 
dëe˘_ok
 = 
m_surÁ˚
.
m_cﬁlisi⁄_pùñöe
.
	`dëe˘_√w_cﬁlisi⁄s
–
im∑˘_z⁄es
, 
tŸÆ_cﬁlisi⁄s
 );

628 
°d
::
cout
 << "√w cﬁlisi⁄†dëe˘ed: " << 
tŸÆ_cﬁlisi⁄s
.
	`size
(Ë<< std::
ídl
;

630 i‡–!
dëe˘_ok
 )

632  
Ál£
;

639  
åue
;

640 
	}
}

649 
boﬁ
 
	gIm∑˘Z⁄eSﬁvî
::
ˇlcuœã_rigid_mŸi⁄
(
dt
, 
°d
::
ve˘‹
<
size_t
>& 
vs
)

651 
Vec3d
 
xcm
(0,0,0);

652 
Vec3d
 
vcm
(0,0,0);

653 
	gmass
 = 0;

655 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

657 
size_t
 
	gidx
 = 
vs
[
i
];

659 
	gm
 = 
m_surÁ˚
.
m_mas£s
[
idx
];

661 i‡–
	gm_surÁ˚
.
vîãx_is_sﬁid
(
idx
) )

663 
	gm
 = 
m_rigid_z⁄e_öföôe_mass
;

666 
as£π
–
m
 !
°d
::
numîic_limôs
<>::
öföôy
() );

668 
	gmass
 +
m
;

670 
	gm_surÁ˚
.
	gm_vñocôõs
[
idx
] = ( 
m_surÁ˚
.
gë_√wposôi⁄
(idxË- m_surÁ˚.
gë_posôi⁄
(idxËË/ 
dt
;

672 
	gxcm
 +
m
 * 
m_surÁ˚
.
gë_posôi⁄
(
idx
);

673 
	gvcm
 +
m
 * 
m_surÁ˚
.
m_vñocôõs
[
idx
];

677 
	gmö_di°_t0
 = 1e+30;

678 
	gmö_di°_t1
 = 1e+30;

679 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

681 
size_t
 
	gj
 = 
i
+1; j < 
	gvs
.
size
(); j++)

683 
	gmö_di°_t0
 = 
mö
–
mö_di°_t0
, 
di°
–
m_surÁ˚
.
gë_posôi⁄
(
vs
[
i
]), m_surÁ˚.gë_posôi⁄(vs[
j
]) ) );

684 
	gmö_di°_t1
 = 
mö
–
mö_di°_t1
, 
di°
–
m_surÁ˚
.
gë_√wposôi⁄
(
vs
[
i
]), m_surÁ˚.gë_√wposôi⁄(vs[
j
]) ) );

688 
as£π
–
mass
 > 0 );

690 
	gxcm
 /
mass
;

691 
	gvcm
 /
mass
;

693 
Vec3d
 
L
(0,0,0);

695 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

697 
size_t
 
	gidx
 = 
vs
[
i
];

699 
	gm
 = 
m_surÁ˚
.
m_mas£s
[
idx
];

701 i‡–
	gm_surÁ˚
.
vîãx_is_sﬁid
(
idx
) )

703 
	gm
 = 
m_rigid_z⁄e_öföôe_mass
;

706 
as£π
–
m
 !
°d
::
numîic_limôs
<>::
öföôy
() );

708 
Vec3d
 
	gxdiff
 = 
m_surÁ˚
.
gë_posôi⁄
(
idx
Ë- 
xcm
;

709 
Vec3d
 
	gvdiff
 = 
m_surÁ˚
.
m_vñocôõs
[
idx
] - 
vcm
;

711 
	gL
 +
m
 * 
¸oss
(
xdiff
, 
vdiff
);

714 
M©33d
 
I
(0,0,0,0,0,0,0,0,0);

716 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

718 
size_t
 
	gidx
 = 
vs
[
i
];

719 
	gm
 = 
m_surÁ˚
.
m_mas£s
[
idx
];

721 i‡–
	gm_surÁ˚
.
vîãx_is_sﬁid
(
idx
) )

723 
	gm
 = 
m_rigid_z⁄e_öföôe_mass
;

726 
as£π
–
m
 !
°d
::
numîic_limôs
<>::
öföôy
() );

728 
Vec3d
 
	gxdiff
 = 
m_surÁ˚
.
gë_posôi⁄
(
idx
Ë- 
xcm
;

729 
M©33d
 
	gãns
 = 
ouãr
(-
xdiff
, xdiff);

731 
	gd
 = 
mag2
(
xdiff
);

732 
ãns
(0,0Ë+
d
;

733 
ãns
(1,1Ë+
d
;

734 
ãns
(2,2Ë+
d
;

736 
	gI
 +
m
 * 
ãns
;

739 
	gdë
 = 
dëîmö™t
(
I
);

740 
as£π
–
dë
 != 0 );

741 
Vec3d
 
	gw
 = 
övî£
(
I
Ë* 
L
;

742 
	gwmag
 = 
mag
(
w
);

744 i‡–
	gwmag
 == 0 )

746  
Ál£
;

749 
as£π
–
wmag
 > 0 );

751 
Vec3d
 
	gwn‹m
 = 
w
/
wmag
;

753 
	gcosdtw
 = 
cos
(
dt
 * 
wmag
);

754 
Vec3d
 
	gsödtww
 = 
sö
(
dt
 * 
wmag
Ë* 
wn‹m
;

756 
Vec3d
 
	gxrigid
 = 
xcm
 + 
dt
 * 
vcm
;

758 
	gmax_vñocôy_mag
 = -1.0;

760 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

762 
size_t
 
	gidx
 = 
vs
[
i
];

764 
Vec3d
 
	gxdiff
 = 
m_surÁ˚
.
gë_posôi⁄
(
idx
Ë- 
xcm
;

765 
Vec3d
 
	gxf
 = 
dŸ
(
xdiff
, 
wn‹m
Ë* 
	gwn‹m
;

766 
Vec3d
 
	gxr
 = 
xdiff
 - 
xf
;

768 
	gm_surÁ˚
.
£t_√wposôi⁄
–
idx
, 
xrigid
 + 
xf
 + 
cosdtw
 * 
xr
 + 
¸oss
(
södtww
, xr) );

770 
	gm_surÁ˚
.
	gm_vñocôõs
[
idx
] = ( 
m_surÁ˚
.
gë_√wposôi⁄
(idxË- m_surÁ˚.
gë_posôi⁄
(idxËË/ 
dt
;

772 
	gmax_vñocôy_mag
 = 
max
–
max_vñocôy_mag
, 
mag
–
m_surÁ˚
.
m_vñocôõs
[
idx
] ) );

776 
	gmö_di°_t1
 = 1e+30;

777 
size_t
 
	gi
 = 0; i < 
	gvs
.
size
(); i++)

779 
size_t
 
	gj
 = 
i
+1; j < 
	gvs
.
size
(); j++)

781 
	gmö_di°_t1
 = 
mö
–
mö_di°_t1
, 
di°
–
m_surÁ˚
.
gë_√wposôi⁄
(
vs
[
i
]), m_surÁ˚.gë_√wposôi⁄(vs[
j
]) ) );

785  
	gåue
;

	@eltopo3d/impactzonesolver.h

11 #i‚de‡
EL_TOPO_IMPACTZONES_H


12 
	#EL_TOPO_IMPACTZONES_H


	)

18 
	~<cﬁlisi⁄pùñöe.h
>

19 
	~<ve˘‹
>

25 
˛ass
 
	gDy«micSurÁ˚
;

37 
	sIm∑˘Z⁄e


39 
Im∑˘Z⁄e
() :

40 
m_cﬁlisi⁄s
(),

41 
m_Æl_sﬁved
–
Ál£
 )

45 
gë_Æl_vîti˚s
–
°d
::
ve˘‹
<
size_t
>& 
vîti˚s
 ) const;

48 
boﬁ
 
sh¨e_vîti˚s
–c⁄° 
Im∑˘Z⁄e
& 
Ÿhî
 ) const;

51 
	m°d
::
ve˘‹
<
Cﬁlisi⁄
> 
m_cﬁlisi⁄s
;

54 
boﬁ
 
	mm_Æl_sﬁved
;

65 ˛as†
	cIm∑˘Z⁄eSﬁvî


68 
	mpublic
:

70 
Im∑˘Z⁄eSﬁvî
–
Dy«micSurÁ˚
& 
surÁ˚
 );

72 
boﬁ
 
öña°ic_im∑˘_z⁄es
(
dt
);

74 
boﬁ
 
rigid_im∑˘_z⁄es
(
dt
);

76 
	m¥Ÿe˘ed
:

80 
boﬁ
 
ôî©ed_öña°ic_¥oje˘i⁄
–
Im∑˘Z⁄e
& 
iz
, 
dt
 );

84 
boﬁ
 
öña°ic_¥oje˘i⁄
–c⁄° 
Im∑˘Z⁄e
& 
iz
 );

88 
boﬁ
 
ˇlcuœã_rigid_mŸi⁄
(
dt
, 
°d
::
ve˘‹
<
size_t
>& 
vs
);

90 
	mDy«micSurÁ˚
& 
	mm_surÁ˚
;

94 c⁄° 
	mm_rigid_z⁄e_öföôe_mass
;

109 
ölöe
 
	gIm∑˘Z⁄e
::
gë_Æl_vîti˚s
–
°d
::
ve˘‹
<
size_t
>& 
vîti˚s
 ) const

111 
vîti˚s
.
˛ór
();

112  
size_t
 
	gi
 = 0; i < 
	gm_cﬁlisi⁄s
.
size
(); ++i )

114 
add_unique
–
vîti˚s
, 
m_cﬁlisi⁄s
[
i
].
m_vîãx_ödi˚s
[0] );

115 
add_unique
–
vîti˚s
, 
m_cﬁlisi⁄s
[
i
].
m_vîãx_ödi˚s
[1] );

116 
add_unique
–
vîti˚s
, 
m_cﬁlisi⁄s
[
i
].
m_vîãx_ödi˚s
[2] );

117 
add_unique
–
vîti˚s
, 
m_cﬁlisi⁄s
[
i
].
m_vîãx_ödi˚s
[3] );

128 
ölöe
 
boﬁ
 
	gIm∑˘Z⁄e
::
	$sh¨e_vîti˚s
–c⁄° 
Im∑˘Z⁄e
& 
Ÿhî
 ) const

130  
size_t
 
i
 = 0; i < 
m_cﬁlisi⁄s
.
	`size
(); ++i )

132  
size_t
 
j
 = 0; j < 
Ÿhî
.
m_cﬁlisi⁄s
.
	`size
(); ++j )

134 i‡–
m_cﬁlisi⁄s
[
i
].
	`ovîœp_vîti˚s
–
Ÿhî
.m_cﬁlisi⁄s[
j
] ) )

136  
åue
;

141  
Ál£
;

142 
	}
}

	@eltopo3d/meshmerger.cpp

11 
	~<meshmîgî.h
>

13 
	~<brﬂdpha£.h
>

14 
	~<cﬁlisi⁄pùñöe.h
>

15 
	~<cﬁlisi⁄quîõs.h
>

16 
	~<queue
>

17 
	~<run°©s.h
>

18 
	~<sur·øck.h
>

27 
	gMeshMîgî
::
PªMeshMîgeInfo
::PªMeshMîgeInfo(
size_t
 
edge_ödex_a
,

28 
size_t
 
edge_ödex_b
,

29 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_to_dñëe
,

30 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs_to_add
 ) :

31 
m_edge_ödex_a
(
edge_ödex_a
),

32 
m_edge_ödex_b
(
edge_ödex_b
),

33 
m_åüngÀs_to_dñëe
(
åüngÀs_to_dñëe
),

34 
	$m_åüngÀs_to_add
(
åüngÀs_to_add
)

35 {
	}
}

44 
	gMeshMîgî
::
Po°MeshMîgeInfo
::
	$Po°MeshMîgeInfo
–c⁄° 
PªMeshMîgeInfo
& 
¥e_mîge_öfo
 ) :

45 
	$m_¥e_mîge_öfo
(
¥e_mîge_öfo
)

46 {
	}
}

55 
MeshMîgî
::
	$twi°_vîti˚s
–
size_t
 *
zù≥r_vîti˚s
 )

57 
mö_di°
 = 1e+30, 
di°
;

58 
Vec2°
 
	`mö_∑ú
((
size_t
)~0, (size_t)~0);

61 
i
=0; i<4; ++i)

63 
j
=4; j<8; ++j)

65 
di°
 = 
	`mag
–
m_surf
.
	`gë_posôi⁄
(
zù≥r_vîti˚s
[
i
]Ë- m_surf.gë_posôi⁄(zù≥r_vîti˚s[
j
]) );

66 i‡(
di°
 < 
mö_di°
)

68 
mö_di°
 = 
di°
;

69 
mö_∑ú
[0] = 
i
;

70 
mö_∑ú
[1] = 
j
;

75 
size_t
 
√w_vîti˚s
[8];

76 
i
=0; i<4; ++i)

78 
√w_vîti˚s
[
i
] = 
zù≥r_vîti˚s
[(
mö_∑ú
[0] + i) % 4];

79 
√w_vîti˚s
[
i
+4] = 
zù≥r_vîti˚s
[(
mö_∑ú
[1] + i - 4) % 4 + 4];

82 
	`mem˝y
–
zù≥r_vîti˚s
, 
√w_vîti˚s
, 8 * (
size_t
) );

84 
	}
}

92 
boﬁ
 
	gMeshMîgî
::
gë_zù≥r_åüngÀs
–
size_t
 
edge_ödex_a
, size_à
edge_ödex_b
, 
°d
::
ve˘‹
<
Vec3°
>& 
ouçut_åüngÀs
 )

94 
as£π
–
ouçut_åüngÀs
.
size
() == 8 );

96 c⁄° 
	gVec2°
& 
	gedge_a
 = 
m_surf
.
m_mesh
.
m_edges
[
edge_ödex_a
];

97 c⁄° 
	gVec2°
& 
	gedge_b
 = 
m_surf
.
m_mesh
.
m_edges
[
edge_ödex_b
];

99 
size_t
 
	gzù≥r_vîti˚s
[8];

101 
	gzù≥r_vîti˚s
[0] = 
edge_a
[0];

102 
	gzù≥r_vîti˚s
[2] = 
edge_a
[1];

103 
	gzù≥r_vîti˚s
[4] = 
edge_b
[0];

104 
	gzù≥r_vîti˚s
[6] = 
edge_b
[1];

106 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs_a
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
];

108 
as£π
–
öcidít_åüngÀs_a
.
size
() == 2 );

110 c⁄° 
	gVec3°
& 
	göc_åi_a0
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
–
öcidít_åüngÀs_a
[0] );

111 c⁄° 
	gVec3°
& 
	göc_åi_a1
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
–
öcidít_åüngÀs_a
[1] );

113 
size_t
 
	gthúd_vîti˚s
[2];

114 
	gthúd_vîti˚s
[0] = 
m_surf
.
m_mesh
.
gë_thúd_vîãx
–
zù≥r_vîti˚s
[0], zù≥r_vîti˚s[2], 
öc_åi_a0
 );

115 
	gthúd_vîti˚s
[1] = 
m_surf
.
m_mesh
.
gë_thúd_vîãx
–
zù≥r_vîti˚s
[0], zù≥r_vîti˚s[2], 
öc_åi_a1
 );

117 i‡–
	gm_surf
.
	gm_mesh
.
‹õ¡ed
(
zù≥r_vîti˚s
[0], zù≥r_vîti˚s[2], 
öc_åi_a0
 ) )

119 
	gzù≥r_vîti˚s
[1] = 
thúd_vîti˚s
[0];

120 
	gzù≥r_vîti˚s
[3] = 
thúd_vîti˚s
[1];

122 i‡–
	gm_surf
.
	gm_mesh
.
‹õ¡ed
(
zù≥r_vîti˚s
[0], zù≥r_vîti˚s[2], 
öc_åi_a1
) )

124 
	gzù≥r_vîti˚s
[3] = 
thúd_vîti˚s
[0];

125 
	gzù≥r_vîti˚s
[1] = 
thúd_vîti˚s
[1];

130 
	g°d
::
cout
 << "Orõ¡©i⁄ check faûed" << 
°d
::
ídl
;

131 
as£π
–
Ál£
 );

134 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs_b
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
];

136 
as£π
–
öcidít_åüngÀs_b
.
size
() == 2 );

138 
as£π
–
edge_ödex_b
 < 
m_surf
.
m_mesh
.
m_edges
.
size
() );

140 c⁄° 
	gVec2°
& 
	g˚
 = 
m_surf
.
m_mesh
.
m_edges
[
edge_ödex_b
];

141 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
ë
 = 
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
];

143 c⁄° 
	gVec3°
& 
	göc_åi_b0
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
–
öcidít_åüngÀs_b
[0] );

144 c⁄° 
	gVec3°
& 
	göc_åi_b1
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
–
öcidít_åüngÀs_b
[1] );

146 
	gthúd_vîti˚s
[0] = 
m_surf
.
m_mesh
.
gë_thúd_vîãx
–
˚
[0], ce[1], m_surf.m_mesh.
gë_åüngÀ
–
ë
[0] ) );

148 
	gthúd_vîti˚s
[0] = 
m_surf
.
m_mesh
.
gë_thúd_vîãx
–
zù≥r_vîti˚s
[4], zù≥r_vîti˚s[6], 
öc_åi_b0
 );

149 
	gthúd_vîti˚s
[1] = 
m_surf
.
m_mesh
.
gë_thúd_vîãx
–
zù≥r_vîti˚s
[4], zù≥r_vîti˚s[6], 
öc_åi_b1
 );

151 i‡–
	gm_surf
.
	gm_mesh
.
‹õ¡ed
(
zù≥r_vîti˚s
[4], zù≥r_vîti˚s[6], 
öc_åi_b0
) )

153 
	gzù≥r_vîti˚s
[5] = 
thúd_vîti˚s
[0];

154 
	gzù≥r_vîti˚s
[7] = 
thúd_vîti˚s
[1];

156 i‡–
	gm_surf
.
	gm_mesh
.
‹õ¡ed
(
zù≥r_vîti˚s
[4], zù≥r_vîti˚s[6], 
öc_åi_b1
) )

158 
	gzù≥r_vîti˚s
[7] = 
thúd_vîti˚s
[0];

159 
	gzù≥r_vîti˚s
[5] = 
thúd_vîti˚s
[1];

164 
	g°d
::
cout
 << "Orõ¡©i⁄ check faûed" << 
°d
::
ídl
;

165 
as£π
–
Ál£
 );

169  
	gi
 = 0; i < 8; ++i)

171  
	gj
 = 
i
+1; j < 8; ++j)

174 i‡–
	gzù≥r_vîti˚s
[
i
] =
zù≥r_vîti˚s
[
j
] )

176  
Ál£
;

182 i‡–(
	gi
 < 4Ë&& (
	gj
 > 3) )

185  
size_t
 
	gii
 = 0; iò< 
	gm_surf
.
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[ 
zù≥r_vîti˚s
[
i
] ].
size
(); ++ii )

187  
size_t
 
	gjj
 = 0; jj < 
	gm_surf
.
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[ 
zù≥r_vîti˚s
[
j
] ].
size
(); ++jj )

189 i‡–
	gm_surf
.
	gm_mesh
.
	gm_vîãx_to_edge_m≠
[ 
zù≥r_vîti˚s
[
i
] ][
ii
] =
m_surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[ zù≥r_vîti˚s[
j
] ][
jj
] )

191  
Ál£
;

201 
twi°_vîti˚s
–
zù≥r_vîti˚s
 );

205 
	gouçut_åüngÀs
[0] = 
Vec3°
–
zù≥r_vîti˚s
[0], zipper_vertices[4], zipper_vertices[1] );

206 
	gouçut_åüngÀs
[1] = 
Vec3°
–
zù≥r_vîti˚s
[1], zipper_vertices[4], zipper_vertices[7] );

207 
	gouçut_åüngÀs
[2] = 
Vec3°
–
zù≥r_vîti˚s
[1], zipper_vertices[7], zipper_vertices[2] );

208 
	gouçut_åüngÀs
[3] = 
Vec3°
–
zù≥r_vîti˚s
[2], zipper_vertices[7], zipper_vertices[6] );

209 
	gouçut_åüngÀs
[4] = 
Vec3°
–
zù≥r_vîti˚s
[2], zipper_vertices[6], zipper_vertices[3] );

210 
	gouçut_åüngÀs
[5] = 
Vec3°
–
zù≥r_vîti˚s
[3], zipper_vertices[6], zipper_vertices[5] );

211 
	gouçut_åüngÀs
[6] = 
Vec3°
–
zù≥r_vîti˚s
[3], zipper_vertices[5], zipper_vertices[0] );

212 
	gouçut_åüngÀs
[7] = 
Vec3°
–
zù≥r_vîti˚s
[0], zipper_vertices[5], zipper_vertices[4] );

214  
	gåue
;

224 
boﬁ
 
	gMeshMîgî
::
zù≥rög_öåodu˚s_cﬁlisi⁄
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åüngÀs
,

225 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
dñëed_åüngÀs
 )

227  
size_t
 
i
 = 0; 
	gi
 < 
	g√w_åüngÀs
.
size
(); ++i )

230 
Vec3d
 
	glow
, 
	ghigh
;

231 
mömax
(
m_surf
.
gë_posôi⁄
(
√w_åüngÀs
[
i
][0]), m_surf.gë_posôi⁄“ew_åüngÀs[i][1]), m_surf.gë_posôi⁄“ew_åüngÀs[i][2]), 
low
, 
high
);

233 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

234 
	gm_surf
.
	gm_brﬂd_pha£
->
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

236 c⁄° 
	gVec3°
& 
	gcuºít_åüngÀ
 = 
√w_åüngÀs
[
i
];

239  
size_t
 
	gt
 = 0;Å < 
	govîœµög_åüngÀs
.
size
(); ++t )

241 c⁄° 
	gVec3°
& 
	gŸhî_åüngÀ
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
(
ovîœµög_åüngÀs
[
t
]);

243 i‡–((
	gcuºít_åüngÀ
[0] =
Ÿhî_åüngÀ
[0]Ë|| (
cuºít_åüngÀ
[0] == other_triangle[1]) || (current_triangle[0] == other_triangle[2]))

244 && ((
cuºít_åüngÀ
[1] =
Ÿhî_åüngÀ
[0]) || (current_triangle[1] == other_triangle[1]) || (current_triangle[1] == other_triangle[2]))

245 && ((
cuºít_åüngÀ
[2] =
Ÿhî_åüngÀ
[0]) || (current_triangle[2] == other_triangle[1]) || (current_triangle[2] == other_triangle[2])) )

247  
åue
;

252  
size_t
 
	gt
 = 0;Å < 
	govîœµög_åüngÀs
.
size
(); ++t )

254 
boﬁ
 
	ggo_to_√xt_åüngÀ
 = 
Ál£
;

255  
size_t
 
	gd
 = 0; d < 
	gdñëed_åüngÀs
.
size
(); ++d )

257 i‡–
	govîœµög_åüngÀs
[
t
] =
dñëed_åüngÀs
[
d
] )

259 
go_to_√xt_åüngÀ
 = 
åue
;

263 i‡–
	ggo_to_√xt_åüngÀ
 )

268 i‡–
check_åüngÀ_åüngÀ_öãr£˘i⁄
(
√w_åüngÀs
[
i
],

269 
m_surf
.
m_mesh
.
gë_åüngÀ
(
ovîœµög_åüngÀs
[
t
]),

270 
m_surf
.
gë_posôi⁄s
() ) )

272  
	gåue
;

277  
size_t
 
	gj
 = 0; j < 
	g√w_åüngÀs
.
size
(); ++j )

279 i‡–
	gi
 =
j
 ) { ; }

281 i‡–
check_åüngÀ_åüngÀ_öãr£˘i⁄
(
√w_åüngÀs
[
i
],

282 
√w_åüngÀs
[
j
],

283 
m_surf
.
gë_posôi⁄s
() ) )

285  
	gåue
;

293  
	gÁl£
;

303 
boﬁ
 
	gMeshMîgî
::
	$zù≥r_edges
–
size_t
 
edge_ödex_a
, size_à
edge_ödex_b
 )

306 i‡–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
].
	`size
(Ë!2 || m_surf.m_mesh.m_edge_to_åüngÀ_m≠[
edge_ödex_b
].size() != 2 )

308  
Ál£
;

315 
°d
::
ve˘‹
<
Vec3°
> 
√w_åüngÀs
;

316 
√w_åüngÀs
.
	`ªsize
(8);

317 i‡–
Ál£
 =
	`gë_zù≥r_åüngÀs
–
edge_ödex_a
, 
edge_ödex_b
, 
√w_åüngÀs
 ) )

319  
Ál£
;

323 
°d
::
ve˘‹
<
size_t
> 
dñëed_åüngÀs
;

324 
dñëed_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
][0] );

325 
dñëed_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
][1] );

326 
dñëed_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
][0] );

327 
dñëed_åüngÀs
.
	`push_back
–
m_surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
][1] );

333 
boﬁ
 
ßved_vîbo£
 = 
m_surf
.
m_vîbo£
;

334 
m_surf
.
m_vîbo£
 = 
Ál£
;

336 i‡–
m_surf
.
m_cﬁlisi⁄_ß„ty
 && 
	`zù≥rög_öåodu˚s_cﬁlisi⁄
–
√w_åüngÀs
, 
dñëed_åüngÀs
 ) )

338 
m_surf
.
m_vîbo£
 = 
ßved_vîbo£
;

339  
Ál£
;

342 
m_surf
.
m_vîbo£
 = 
ßved_vîbo£
;

344 
PªMeshMîgeInfo
 
	`¥e_mîge_öfo
–
edge_ödex_a
, 
edge_ödex_b
, 
dñëed_åüngÀs
, 
√w_åüngÀs
 );

346  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

348 i‡–
Ál£
 =
m_ob£rvîs
[
i
]->
	`›î©i⁄OK
(
m_surf
, 
¥e_mîge_öfo
) )

350  
Ál£
;

359 
size_t
 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[0] );

360 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

361 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[1] );

362 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

363 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[2] );

364 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

365 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[3] );

366 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

367 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[4] );

368 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

369 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[5] );

370 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

371 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[6] );

372 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

373 
√w_ödex
 = 
m_surf
.
	`add_åüngÀ
–
√w_åüngÀs
[7] );

374 
m_surf
.
m_dúty_åüngÀs
.
	`push_back
–
√w_ödex
 );

380 
m_surf
.
	`ªmove_åüngÀ
–m_surf.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
][0] );

381 
m_surf
.
	`ªmove_åüngÀ
–m_surf.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_a
][0] );

382 
m_surf
.
	`ªmove_åüngÀ
–m_surf.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
][0] );

383 
m_surf
.
	`ªmove_åüngÀ
–m_surf.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex_b
][0] );

386 
Po°MeshMîgeInfo
 
	`po°_mîge_öfo
(
¥e_mîge_öfo
);

388  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

390 
m_ob£rvîs
[
i
]->
	`›î©i⁄Occuºed
(
m_surf
, 
po°_mîge_öfo
);

393  
åue
;

395 
	}
}

404 
	gMeshMîgî
::
	$¥o˚ss_mesh
( )

407 
°d
::
queue
<
Vec2°
> 
edge_edge_ˇndid©es
;

413 
boﬁ
 
mîge_occuªd
 = 
åue
;

415  
mîge_occuªd
 )

417 
mîge_occuªd
 = 
Ál£
;

420 
°d
::
ve˘‹
<
S‹èbÀEdgeEdgeProximôy
> 
¥oximôõs
;

422 
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
m_edges
.
	`size
(); i++)

424 c⁄° 
Vec2°
& 
e0
 = 
m_surf
.
m_mesh
.
m_edges
[
i
];

426 i‡–
e0
[0] ==É0[1] ) { ; }

427 i‡–
m_surf
.
	`edge_is_sﬁid
(
i
) ) { ; }

429 i‡–
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[ 
e0
[0] ] || m_surf.m_mesh.m_is_boundary_vertex[É0[1] ] ) { ; }

431 
Vec3d
 
emö
, 
emax
;

432 
m_surf
.
	`edge_°©ic_bounds
(
i
, 
emö
, 
emax
);

433 
emö
 -
m_surf
.
m_mîge_¥oximôy_ïsû⁄
 * 
	`Vec3d
(1,1,1);

434 
emax
 +
m_surf
.
m_mîge_¥oximôy_ïsû⁄
 * 
	`Vec3d
(1,1,1);

436 
°d
::
ve˘‹
<
size_t
> 
edge_ˇndid©es
;

437 
m_surf
.
m_brﬂd_pha£
->
	`gë_pŸítül_edge_cﬁlisi⁄s
–
emö
, 
emax
, 
Ál£
, 
åue
, 
edge_ˇndid©es
 );

439 
size_t
 
j
 = 0; j < 
edge_ˇndid©es
.
	`size
(); j++)

441 
size_t
 
¥oximÆ_edge_ödex
 = 
edge_ˇndid©es
[
j
];

442 c⁄° 
Vec2°
& 
e1
 = 
m_surf
.
m_mesh
.
m_edges
[
¥oximÆ_edge_ödex
];

444 i‡–
¥oximÆ_edge_ödex
 <
i
 )

449 i‡–
m_surf
.
m_mesh
.
m_is_bound¨y_vîãx
[ 
e1
[0] ] || m_surf.m_mesh.m_is_boundary_vertex[É1[1] ] ) { ; }

451 if(
e0
[0] !
e1
[0] &&É0[0] !=É1[1] &&É0[1] !=É1[0] &&É0[1] !=É1[1])

453 
di°™˚
, 
s0
, 
s2
;

454 
Vec3d
 
n‹mÆ
;

456 
	`check_edge_edge_¥oximôy
(
m_surf
.
	`gë_posôi⁄
(
e0
[0]),

457 
m_surf
.
	`gë_posôi⁄
(
e0
[1]),

458 
m_surf
.
	`gë_posôi⁄
(
e1
[0]),

459 
m_surf
.
	`gë_posôi⁄
(
e1
[1]),

460 
di°™˚
, 
s0
, 
s2
, 
n‹mÆ
 );

462 i‡(
di°™˚
 < 
m_surf
.
m_mîge_¥oximôy_ïsû⁄
)

465 i‡–
m_surf
.
m_vîbo£
 )

467 
°d
::
cout
 << "¥oximôy: " << 
di°™˚
 << " / " << 
m_surf
.
m_mîge_¥oximôy_ïsû⁄
 << std::
ídl
;

470 i‡–
	`zù≥r_edges
–
i
, 
¥oximÆ_edge_ödex
 ) )

473 
m_surf
.
	`åim_n⁄_m™ifﬁd
–m_surf.
m_dúty_åüngÀs
 );

475 i‡–
m_surf
.
m_vîbo£
 )

477 
°d
::
cout
 << "zù≥ªd" << std::
ídl
;

480 
mîge_occuªd
 = 
åue
;

488 i‡–
mîge_occuªd
 )

490 
m_surf
.
	`as£π_no_degíî©e_åüngÀs
();

495 
	}
}

498 
	gMeshMîgî
::
	$add_ob£rvî
–
MeshMîgeOb£rvî
* 
ob£rvî
 )

500 
m_ob£rvîs
.
	`push_back
–
ob£rvî
 );

501 
	}
}

	@eltopo3d/meshmerger.h

10 #i‚de‡
EL_TOPO_MESHMERGER_H


11 
	#EL_TOPO_MESHMERGER_H


	)

17 
	~<mesh›î©‹.h
>

18 
	~<ve˘‹
>

19 
	~<vec.h
>

25 
˛ass
 
	gSurfTøck
;

26 
˛ass
 
	gMeshMîgeOb£rvî
;

39 
	sS‹èbÀEdgeEdgeProximôy


41 
S‹èbÀEdgeEdgeProximôy
–
size_t
 
a
, size_à
b
, 
d
 ) :

42 
edge_a
–
a
 ),

43 
edge_b
–
b
 ),

44 
di°™˚
–
d
 )

47 
size_t
 
	medge_a
;

48 
size_t
 
	medge_b
;

49 
	mdi°™˚
;

51 
boﬁ
 
	m›î©‹
<–c⁄° 
	mS‹èbÀEdgeEdgeProximôy
& 
	mŸhî
 ) const

53  
	mdi°™˚
 < 
	mŸhî
.distance;

63 ˛as†
	cMeshMîgî
 : 
public
 
MeshO≥øt‹


66 
public
:

68 ˛as†
	cPªMeshMîgeInfo


70 
public
:

71 
PªMeshMîgeInfo
(
size_t
 
edge_ödex_a
,

72 
size_t
 
edge_ödex_b
,

73 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs_to_dñëe
,

74 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs_to_add
 );

76 
size_t
 
	mm_edge_ödex_a
;

77 
size_t
 
	mm_edge_ödex_b
;

78 
	m°d
::
ve˘‹
<
size_t
> 
m_åüngÀs_to_dñëe
;

79 
	m°d
::
ve˘‹
<
Vec3°
> 
m_åüngÀs_to_add
;

82 ˛as†
	cPo°MeshMîgeInfo


84 
	gpublic
:

85 
Po°MeshMîgeInfo
–c⁄° 
PªMeshMîgeInfo
& 
¥e_mîge_öfo
 );

87 
PªMeshMîgeInfo
 
	gm_¥e_mîge_öfo
;

91 
	$MeshMîgî
–
SurfTøck
& 
surf
 ) :

92 
	$MeshO≥øt‹
–
surf
 )

93 {
	}
}

97 
¥o˚ss_mesh
();

99 
add_ob£rvî
–
MeshMîgeOb£rvî
* 
ob£rvî
 );

101 
	g¥iv©e
:

104 
twi°_vîti˚s
–
size_t
 *
zù≥r_vîti˚s
 );

105 
boﬁ
 
gë_zù≥r_åüngÀs
–
size_t
 
edge_ödex_0
, size_à
edge_ödex_1
, 
°d
::
ve˘‹
<
Vec3°
>& 
ouçut_åüngÀs
 );

106 
boﬁ
 
zù≥rög_öåodu˚s_cﬁlisi⁄
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åüngÀs
, c⁄° std::ve˘‹<
size_t
>& 
dñëed_åüngÀs
 );

107 
boﬁ
 
gë_vîãx_åüngÀ_zù≥r_åüngÀs
–
size_t
 
v
, size_à
t
, 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åüngÀs
 );

108 
boﬁ
 
°ôch_åüngÀ_åüngÀ
–
size_t
 
è
, size_à
tb
, 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åis
 );

110 
boﬁ
 
zù≥r_edges
–
size_t
 
edge_ödex_a
, size_à
edge_ödex_b
 );

112 
	g°d
::
ve˘‹
<
MeshMîgeOb£rvî
*> 
m_ob£rvîs
;

123 ˛as†
	cMeshMîgeOb£rvî


125 
	mpublic
:

127 
vútuÆ
 ~
	$MeshMîgeOb£rvî
() {}

129 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° 
MeshMîgî
::
PªMeshMîgeInfo
& )

131  
åue
;

132 
	}
}

134 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° 
MeshMîgî
::
Po°MeshMîgeInfo
& )

136 
	}
}

	@eltopo3d/meshoperator.h

10 #i‚de‡
EL_TOPO_MESHOPERATOR_H


11 
	#EL_TOPO_MESHOPERATOR_H


	)

13 
	~<comm⁄›ti⁄s.h
>

14 
	~<ve˘‹
>

16 
˛ass
 
	gSurfTøck
;

18 ˛as†
	cMeshO≥øt‹


21 
	m¥Ÿe˘ed
:

23 
SurfTøck
& 
m_surf
;

25 
	mpublic
:

27 
	$MeshO≥øt‹
–
SurfTøck
& 
surf
 ) :

28 
	$m_surf
(
surf
)

31 
vútuÆ
 ~
	$MeshO≥øt‹
(Ë{
	}
}

33 
vútuÆ
 
¥o˚ss_mesh
() = 0;

	@eltopo3d/meshpincher.cpp

10 
	~<meshpöchî.h
>

12 
	~<brﬂdpha£.h
>

13 
	~<cﬁlisi⁄pùñöe.h
>

14 
	~<sur·øck.h
>

22 
	gMeshPöchî
::
PªPöchInfo
::PªPöchInfo(
size_t
 
vîãx_ödex
,

23 c⁄° 
°d
::
ve˘‹
<
TrüngÀSë
>& 
c⁄√˘ed_comp⁄íts
,

24 c⁄° 
TrüngÀSë
& 
åüngÀs_to_dñëe
,

25 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs_to_add
,

26 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
vîti˚s_added
 ) :

27 
m_vîãx_ödex
–
vîãx_ödex
 ),

28 
m_c⁄√˘ed_comp⁄íts
(
c⁄√˘ed_comp⁄íts
),

29 
m_åüngÀs_to_dñëe
(
åüngÀs_to_dñëe
),

30 
m_åüngÀs_to_add
(
åüngÀs_to_add
),

31 
	$m_vîti˚s_added
(
vîti˚s_added
)

32 {
	}
}

40 
	gMeshPöchî
::
Po°PöchInfo
::
	$Po°PöchInfo
–
PªPöchInfo
& 
¥e_pöch_öfo
 ) :

41 
	$m_¥e_pöch_öfo
–
¥e_pöch_öfo
 )

42 {
	}
}

50 
MeshPöchî
::
∑πôi⁄_vîãx_√ighbourhood
–
size_t
 
vîãx_ödex
, 
°d
::
ve˘‹
< 
TrüngÀSë
 >& 
c⁄√˘ed_comp⁄íts
 )

53 
TrüngÀSë
 
åüngÀs_öcidít_to_vîãx
 = 
m_surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_ödex
];

56 
TrüngÀSë
 
	gunvisôed_åüngÀs
, 
	gvisôed_åüngÀs
;

58  
	gåüngÀs_öcidít_to_vîãx
.
size
() > 0 )

60 
	gunvisôed_åüngÀs
.
˛ór
();

61 
	gvisôed_åüngÀs
.
˛ór
();

62 
	gunvisôed_åüngÀs
.
push_back
–
åüngÀs_öcidít_to_vîãx
.
back
() );

64  
	gunvisôed_åüngÀs
.
size
() > 0 )

67 
size_t
 
	gcuº_åi
 = 
unvisôed_åüngÀs
.
back
();

68 
	gunvisôed_åüngÀs
.
p›_back
();

71 
	gåüngÀs_öcidít_to_vîãx
.
îa£
–
föd
(
åüngÀs_öcidít_to_vîãx
.
begö
(),ÅrüngÀs_öcidít_to_vîãx.
íd
(), 
cuº_åi
) );

74 
	gvisôed_åüngÀs
.
push_back
(
cuº_åi
);

77  
size_t
 
	gi
 = 0; i < 
	gåüngÀs_öcidít_to_vîãx
.
size
(); ++i )

79 
size_t
 
	göcidít_åüngÀ_ödex
 = 
åüngÀs_öcidít_to_vîãx
[
i
];

81 i‡–
	gcuº_åi
 =
öcidít_åüngÀ_ödex
 )

86 i‡–
	gm_surf
.
	gm_mesh
.
åüngÀs_¨e_adja˚¡
–
cuº_åi
, 
öcidít_åüngÀ_ödex
 ) )

89 i‡––
föd
(
unvisôed_åüngÀs
.
begö
(), unvisôed_åüngÀs.
íd
(), 
öcidít_åüngÀ_ödex
) == unvisited_triangles.end() ) &&

90 –
föd
(
visôed_åüngÀs
.
begö
(), visôed_åüngÀs.
íd
(), 
öcidít_åüngÀ_ödex
) == visited_triangles.end() ) )

92 
unvisôed_åüngÀs
.
push_back
–
öcidít_åüngÀ_ödex
 );

99 
	gc⁄√˘ed_comp⁄íts
.
push_back
(
visôed_åüngÀs
);

109 
boﬁ
 
	gMeshPöchî
::
puŒ_≠¨t_vîãx
–
size_t
 
vîãx_ödex
, c⁄° 
°d
::
ve˘‹
< 
TrüngÀSë
 >& 
c⁄√˘ed_comp⁄íts
 )

111 
dx
 = 10.0 * 
m_surf
.
m_¥oximôy_ïsû⁄
;

113 
TrüngÀSë
 
	gåüngÀs_to_dñëe
;

114 
	g°d
::
ve˘‹
< 
Vec3°
 > 
åüngÀs_to_add
;

115 
	g°d
::
ve˘‹
< 
size_t
 > 
vîti˚s_added
;

118  
	gi
 = 0; i < ()
	gc⁄√˘ed_comp⁄íts
.
size
() - 1; ++i )

121 
size_t
 
	gdu∂iˇã_vîãx_ödex
 = 
m_surf
.
add_vîãx
–m_surf.
gë_posôi⁄
(
vîãx_ödex
), m_surf.
m_mas£s
[vertex_index] );

123 
	gvîti˚s_added
.
push_back
–
du∂iˇã_vîãx_ödex
 );

125 
Vec3d
 
˚¡roid
( 0.0, 0.0, 0.0 );

128  
size_t
 
	gt
 = 0;Å < 
	gc⁄√˘ed_comp⁄íts
[
i
].
size
(); ++t )

131 
Vec3°
 
	g√w_åüngÀ
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
–
c⁄√˘ed_comp⁄íts
[
i
][
t
] );

133  
	gv
 = 0; v < 3; ++v )

135 i‡–
	g√w_åüngÀ
[
v
] =
vîãx_ödex
 )

137 
√w_åüngÀ
[
v
] = 
du∂iˇã_vîãx_ödex
;

141 
	g˚¡roid
 +
m_surf
.
gë_posôi⁄
–
√w_åüngÀ
[
v
] );

145 
	gåüngÀs_to_add
.
push_back
–
√w_åüngÀ
 );

146 
	gåüngÀs_to_dñëe
.
push_back
–
c⁄√˘ed_comp⁄íts
[
i
][
t
] );

150 
	g˚¡roid
 /–
c⁄√˘ed_comp⁄íts
[
i
].
size
() * 2 );

154 
Vec3d
 
	gadded_vîãx_posôi⁄
 = (1.0 - 
dx
Ë* 
m_surf
.
gë_posôi⁄
(
du∂iˇã_vîãx_ödex
Ë+ dx * 
˚¡roid
;

156 
	gm_surf
.
£t_posôi⁄
–
du∂iˇã_vîãx_ödex
, 
added_vîãx_posôi⁄
 );

157 
	gm_surf
.
£t_√wposôi⁄
–
du∂iˇã_vîãx_ödex
, 
added_vîãx_posôi⁄
 );

163 
boﬁ
 
	gcﬁlisi⁄_occurs
 = 
Ál£
;

165 i‡–
	gm_surf
.
	gm_cﬁlisi⁄_ß„ty
 )

168  
size_t
 
	gi
 = 0; i < 
	gåüngÀs_to_add
.
size
(); ++i )

170 c⁄° 
	gVec3°
& 
	gcuºít_åüngÀ
 = 
åüngÀs_to_add
[
i
];

171 
Vec3d
 
	glow
, 
	ghigh
;

173 
mömax
–
m_surf
.
gë_posôi⁄
(
cuºít_åüngÀ
[0]), m_surf.gë_posôi⁄(cuºít_åüngÀ[1]), m_surf.gë_posôi⁄(cuºít_åüngÀ[2]), 
low
, 
high
 );

175 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

176 
	gm_surf
.
	gm_brﬂd_pha£
->
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
low
, 
high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

178  
size_t
 
	gj
=0; j < 
	govîœµög_åüngÀs
.
size
(); ++j )

180 c⁄° 
	gVec3°
& 
	gåi_j
 = 
m_surf
.
m_mesh
.
gë_åüngÀ
(
ovîœµög_åüngÀs
[
j
]);

182 
as£π
–
åi_j
[0] !=Åri_j[1] );

184 i‡–
check_åüngÀ_åüngÀ_öãr£˘i⁄
–
cuºít_åüngÀ
, 
åi_j
, 
m_surf
.
gë_posôi⁄s
() ) )

187 
	gcﬁlisi⁄_occurs
 = 
åue
;

194  
size_t
 
	gi
 = 0; i < 
	gåüngÀs_to_add
.
size
(); ++i )

196  
size_t
 
	gj
 = 
i
+1; j < 
	gåüngÀs_to_add
.
size
(); ++j )

198 i‡–
check_åüngÀ_åüngÀ_öãr£˘i⁄
–
åüngÀs_to_add
[
i
],ÅrüngÀs_to_add[
j
], 
m_surf
.
gë_posôi⁄s
() ) )

201 
	gcﬁlisi⁄_occurs
 = 
åue
;

210 i‡–
	gcﬁlisi⁄_occurs
 )

212  
size_t
 
	gi
 = 0; i < 
	gvîti˚s_added
.
size
(); ++i )

214 
	gm_surf
.
ªmove_vîãx
–
vîti˚s_added
[
i
] );

216  
	gÁl£
;

220 
PªPöchInfo
 
¥e_pöch_öfo
–
vîãx_ödex
, 
c⁄√˘ed_comp⁄íts
, 
åüngÀs_to_dñëe
, 
åüngÀs_to_add
, 
vîti˚s_added
 );

225  
size_t
 
	gi
 = 0; i < 
	gåüngÀs_to_add
.
size
(); ++i )

227 
	gm_surf
.
add_åüngÀ
–
åüngÀs_to_add
[
i
] );

230  
size_t
 
	gi
 = 0; i < 
	gåüngÀs_to_dñëe
.
size
(); ++i )

232 
	gm_surf
.
ªmove_åüngÀ
–
åüngÀs_to_dñëe
[
i
] );

236 i‡–
	gm_surf
.
	gm_cﬁlisi⁄_ß„ty
 )

238 
	gm_surf
.
	gm_cﬁlisi⁄_pùñöe
.
as£π_mesh_is_öãr£˘i⁄_‰ì
(
Ál£
);

241 i‡–
	gm_surf
.
	gm_vîbo£
 ) { 
	g°d
::
cout
 << "puŒedá∑πá vîãx" << 
°d
::
ídl
; }

244 
Po°PöchInfo
 
po°_pöch_öfo
–
¥e_pöch_öfo
 );

247  
	gåue
;

257 
	gMeshPöchî
::
	$¥o˚ss_mesh
()

260  
size_t
 
i
 = 0; i < 
m_surf
.
	`gë_num_vîti˚s
(); ++i )

263 
°d
::
ve˘‹
< 
TrüngÀSë
 > 
c⁄√˘ed_comp⁄íts
;

264 
	`∑πôi⁄_vîãx_√ighbourhood
–
i
, 
c⁄√˘ed_comp⁄íts
 );

266 i‡–
c⁄√˘ed_comp⁄íts
.
	`size
() > 1 )

268 
	`puŒ_≠¨t_vîãx
–
i
, 
c⁄√˘ed_comp⁄íts
 );

271 
	}
}

279 
	gMeshPöchî
::
	$add_ob£rvî
–
MeshPöchOb£rvî
* 
ob£rvî
 )

281 
m_ob£rvîs
.
	`push_back
(
ob£rvî
);

282 
	}
}

	@eltopo3d/meshpincher.h

10 #i‚de‡
EL_TOPO_MESHPINCHER_H


11 
	#EL_TOPO_MESHPINCHER_H


	)

17 
	~<mesh›î©‹.h
>

18 
	~<ve˘‹
>

19 
	~<vec.h
>

25 
˛ass
 
	gSurfTøck
;

26 
˛ass
 
	gMeshPöchOb£rvî
;

32 ˛as†
	cMeshPöchî
 : 
public
 
MeshO≥øt‹


35 
public
:

37 
°d
::
	tve˘‹
<
	tsize_t
> 
	tTrüngÀSë
;

39 ˛as†
	cPªPöchInfo


41 
	mpublic
:

42 
PªPöchInfo
(
size_t
 
vîãx_ödex
,

43 c⁄° 
°d
::
ve˘‹
<
TrüngÀSë
>& 
c⁄√˘ed_comp⁄íts
,

44 c⁄° 
TrüngÀSë
& 
åüngÀs_to_dñëe
,

45 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs_to_add
,

46 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
vîti˚s_added
 );

48 
size_t
 
	mm_vîãx_ödex
;

49 c⁄° 
	m°d
::
ve˘‹
<
TrüngÀSë
>& 
m_c⁄√˘ed_comp⁄íts
;

50 c⁄° 
	mTrüngÀSë
& 
	mm_åüngÀs_to_dñëe
;

51 c⁄° 
	m°d
::
ve˘‹
<
Vec3°
>& 
m_åüngÀs_to_add
;

52 c⁄° 
	m°d
::
ve˘‹
<
size_t
>& 
m_vîti˚s_added
;

55 ˛as†
	cPo°PöchInfo


57 
	gpublic
:

58 
Po°PöchInfo
–
PªPöchInfo
& 
¥e_pöch_öfo
 );

59 
PªPöchInfo
 
	gm_¥e_pöch_öfo
;

62 
	$MeshPöchî
–
SurfTøck
& 
surf
 ) :

63 
	$MeshO≥øt‹
–
surf
 )

64 {
	}
}

68 
¥o˚ss_mesh
();

70 
add_ob£rvî
–
MeshPöchOb£rvî
* 
ob£rvî
 );

72 
	g¥iv©e
:

74 
∑πôi⁄_vîãx_√ighbourhood
–
size_t
 
vîãx_ödex
, 
°d
::
ve˘‹
< 
TrüngÀSë
 >& 
c⁄√˘ed_comp⁄íts
 );

76 
boﬁ
 
puŒ_≠¨t_vîãx
–
size_t
 
vîãx_ödex
, c⁄° 
°d
::
ve˘‹
< 
TrüngÀSë
 >& 
c⁄√˘ed_comp⁄íts
 );

78 
	g°d
::
ve˘‹
<
MeshPöchOb£rvî
*> 
m_ob£rvîs
;

89 ˛as†
	cMeshPöchOb£rvî


91 
	mpublic
:

93 
vútuÆ
 ~
	$MeshPöchOb£rvî
() {}

95 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° 
MeshPöchî
::
PªPöchInfo
& )

97  
åue
;

98 
	}
}

100 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° 
MeshPöchî
::
Po°PöchInfo
& )

102 
	}
}

	@eltopo3d/meshrenderer.cpp

10 
	~<meshªndîî.h
>

12 #i‚de‡
NO_GUI


14 
	~<dy«micsurÁ˚.h
>

15 
	~<gluvi.h
>

63 
	gMeshRídîî
::
	$ªndî
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
 )

69 
	`glDißbÀ
(
GL_LIGHTING
);

70 
	`glDïthFunc
(
GL_LEQUAL
);

72 i‡–
ªndî_edges
 )

74 
	`glLöeWidth
(2);

75 
	`glBegö
(
GL_LINES
);

77 
size_t
 
e
 = 0;É < 
surÁ˚
.
m_mesh
.
m_edges
.
	`size
();É++)

79 i‡–
surÁ˚
.
m_mesh
.
m_is_bound¨y_edge
[
e
] )

81 
	`glCﬁ‹3d
(1,0,0);

85 
	`glCﬁ‹3d
(0,0,0);

88 c⁄° 
Vec2°
& 
edge
 = 
surÁ˚
.
m_mesh
.
m_edges
[
e
];

89 c⁄° 
Vec3d
& 
vtx0
 = 
surÁ˚
.
	`gë_posôi⁄
(
edge
[0]);

90 c⁄° 
Vec3d
& 
vtx1
 = 
surÁ˚
.
	`gë_posôi⁄
(
edge
[1]);

91 
	`glVîãx3d
(
vtx0
[0], vtx0[1], vtx0[2]);

92 
	`glVîãx3d
(
vtx1
[0], vtx1[1], vtx1[2]);

95 
	`glEnd
();

102 i‡–
ªndî_vîãx_ønk
 )

104 
	`glPoötSize
(5);

105 
	`glBegö
(
GL_POINTS
);

107  
size_t
 
v
 = 0; v < 
surÁ˚
.
	`gë_num_vîti˚s
(); ++v )

109 i‡–
surÁ˚
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
].
	`em±y
() )

114 i‡–
surÁ˚
.
	`vîãx_is_sﬁid
(
v
) )

116 
	`glCﬁ‹3f
( 1.0f, 0.0f, 0.0f );

120 
	`glCﬁ‹3f
( 0.0f, 1.0f, 0.0f );

123 
	`glVîãx3dv
–
surÁ˚
.
	`gë_posôi⁄
(
v
).v );

126 
	`glEnd
();

133 i‡–
ªndî_fûl_åüngÀs
 )

135 i‡–
two_sided
 )

137 
	`glLightModñi
–
GL_LIGHT_MODEL_TWO_SIDE
, 1 );

141 
	`glE«bÀ
(
GL_CULL_FACE
);

144 
	`glE«bÀ
(
GL_LIGHTING
);

145 
	`glShadeModñ
(
GL_SMOOTH
);

146 
Gluvi
::
	`£t_gíîic_lights
();

147 
Gluvi
::
	`£t_gíîic_m©îül
(1.0f, 1.0f, 1.0f, 
GL_FRONT
);

148 
Gluvi
::
	`£t_gíîic_m©îül
(1.0f, 1.0f, 1.0f, 
GL_BACK
);

150 i‡–!
smoŸh_shadög
 )

152 
	`glDißbÀ
(
GL_LIGHTING
);

153 
	`glCﬁ‹3d
(1,1,1);

156 i‡–
ªndî_edges
 )

158 
	`glE«bÀ
(
GL_POLYGON_OFFSET_FILL
);

159 
	`glPﬁyg⁄Off£t
(1.0f, 1.0f);

162 
	`glE«bÀ
(
GL_DEPTH_TEST
);

163 
	`glDïthMask
(
GL_TRUE
);

165 
	`glBegö
(
GL_TRIANGLES
);

167 
size_t
 
i
 = 0; i < 
surÁ˚
.
m_mesh
.
	`num_åüngÀs
(); i++)

169 c⁄° 
Vec3°
& 
åi
 = 
surÁ˚
.
m_mesh
.
	`gë_åüngÀ
(
i
);

171 c⁄° 
Vec3d
& 
v0
 = 
surÁ˚
.
	`gë_posôi⁄
(
åi
[0]);

172 c⁄° 
Vec3d
& 
v1
 = 
surÁ˚
.
	`gë_posôi⁄
(
åi
[1]);

173 c⁄° 
Vec3d
& 
v2
 = 
surÁ˚
.
	`gë_posôi⁄
(
åi
[2]);

175 
	`glN‹mÆ3dv
–
surÁ˚
.
	`gë_vîãx_n‹mÆ
(
åi
[0]).
v
 );

176 
	`glVîãx3d
(
v0
[0], v0[1], v0[2]);

178 
	`glN‹mÆ3dv
–
surÁ˚
.
	`gë_vîãx_n‹mÆ
(
åi
[1]).
v
 );

179 
	`glVîãx3d
(
v1
[0], v1[1], v1[2]);

181 
	`glN‹mÆ3dv
–
surÁ˚
.
	`gë_vîãx_n‹mÆ
(
åi
[2]).
v
 );

182 
	`glVîãx3d
(
v2
[0], v2[1], v2[2]);

186 
	`glEnd
();

189 i‡–
ªndî_edges
 )

191 
	`glDißbÀ
(
GL_POLYGON_OFFSET_FILL
);

194 
	`glDißbÀ
(
GL_LIGHTING
);

198 
	}
}

203 
	gMeshRídîî
::
ªndî
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
,

204 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
n‹mÆs
,

205 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs
,

206 c⁄° 
°d
::
ve˘‹
<
Vec2°
>& 
edges
 )

214 
glDißbÀ
(
GL_LIGHTING
);

215 
glDïthFunc
(
GL_LEQUAL
);

217 i‡–
	gªndî_edges
 )

219 
glLöeWidth
(2);

220 
glCﬁ‹3f
( 0.0f, 0.0f, 0.0f );

221 
glBegö
(
GL_LINES
);

222 
size_t
 
	ge
 = 0;É < 
	gedges
.
size
();É++)

224 c⁄° 
	gVec2°
& 
	gedge
 = 
edges
[
e
];

225 c⁄° 
	gVec3d
& 
	gvtx0
 = 
xs
[
edge
[0]];

226 c⁄° 
	gVec3d
& 
	gvtx1
 = 
xs
[
edge
[1]];

227 
glVîãx3dv
–
vtx0
.
v
 );

228 
glVîãx3dv
–
vtx1
.
v
 );

230 
glEnd
();

237 i‡–
	gªndî_vîãx_ønk
 )

239 
glPoötSize
(5);

240 
glBegö
(
GL_POINTS
);

241  
size_t
 
	gv
 = 0; v < 
	gxs
.
size
(); ++v )

243 
glVîãx3dv
–
xs
[
v
].v );

245 
glEnd
();

252 i‡–
	gªndî_fûl_åüngÀs
 )

254 i‡–
	gtwo_sided
 )

256 
glLightModñi
–
GL_LIGHT_MODEL_TWO_SIDE
, 1 );

260 
glE«bÀ
(
GL_CULL_FACE
);

263 
glE«bÀ
(
GL_LIGHTING
);

264 
glShadeModñ
(
GL_SMOOTH
);

265 
	gGluvi
::
£t_gíîic_lights
();

266 
	gGluvi
::
£t_gíîic_m©îül
(1.0f, 1.0f, 1.0f, 
GL_FRONT
);

267 
	gGluvi
::
£t_gíîic_m©îül
(1.0f, 1.0f, 1.0f, 
GL_BACK
);

269 i‡–!
	gsmoŸh_shadög
 )

271 
glDißbÀ
(
GL_LIGHTING
);

272 
glCﬁ‹3d
(1,1,1);

275 i‡–
	gªndî_edges
 )

277 
glE«bÀ
(
GL_POLYGON_OFFSET_FILL
);

278 
glPﬁyg⁄Off£t
(1.0f, 1.0f);

281 
glE«bÀ
(
GL_DEPTH_TEST
);

282 
glDïthMask
(
GL_TRUE
);

284 
glBegö
(
GL_TRIANGLES
);

285 
size_t
 
	gi
 = 0; i < 
	gåüngÀs
.
size
(); i++)

287 c⁄° 
	gVec3°
& 
	gåi
 = 
åüngÀs
[
i
];

288 
glN‹mÆ3dv
–
n‹mÆs
[
åi
[0]].
v
 );

289 
glVîãx3dv
–
xs
[
åi
[0]].
v
 );

290 
glN‹mÆ3dv
–
n‹mÆs
[
åi
[1]].
v
 );

291 
glVîãx3dv
–
xs
[
åi
[1]].
v
 );

292 
glN‹mÆ3dv
–
n‹mÆs
[
åi
[2]].
v
 );

293 
glVîãx3dv
–
xs
[
åi
[2]].
v
 );

295 
glEnd
();

297 i‡–
	gªndî_edges
 )

299 
glDißbÀ
(
GL_POLYGON_OFFSET_FILL
);

302 
glDißbÀ
(
GL_LIGHTING
);

	@eltopo3d/meshrenderer.h

10 #i‚de‡
EL_TOPO_MESHRENDERER_H


11 
	#EL_TOPO_MESHRENDERER_H


	)

17 
	~<vec.h
>

23 
˛ass
 
	gDy«micSurÁ˚
;

29 ˛as†
	cMeshRídîî


32 
	mpublic
:

34 
	$MeshRídîî
() :

35 
	`ªndî_edges
–
åue
 ),

36 
	`ªndî_fûl_åüngÀs
–
åue
 ),

37 
	`ªndî_vîãx_ønk
–
Ál£
 ),

38 
	`smoŸh_shadög
–
åue
 ),

39 
	$two_sided
–
åue
 )

42 
boﬁ
 
ªndî_edges
;

43 
boﬁ
 
ªndî_fûl_åüngÀs
;

44 
boﬁ
 
ªndî_vîãx_ønk
;

45 
boﬁ
 
smoŸh_shadög
;

46 
boﬁ
 
two_sided
;

50 
	`ªndî
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
 );

52 
	`ªndî
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
xs
,

53 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
n‹mÆs
,

54 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åüngÀs
,

55 c⁄° 
°d
::
ve˘‹
<
Vec2°
>& 
edges
 );

58 
	}
};

	@eltopo3d/meshsmoother.cpp

10 
	~<meshsmoŸhî.h
>

12 
	~<im∑˘z⁄esﬁvî.h
>

13 
	~<œ∑ck_wøµî.h
>

14 
	~<m©.h
>

15 
	~<n⁄de°ru˘ivërimesh.h
>

16 
	~<sur·øck.h
>

28 
	gMeshSmoŸhî
::
compuã_max_time°ï_quadøtic_sﬁve
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

29 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
,

30 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
di•œ˚míts
,

31 
boﬁ
 
vîbo£
 )

33 
	gmax_bëa
 = 1.0;

35 
	gmö_¨ó
 = 
BIG_DOUBLE
;

37  
size_t
 
	gi
 = 0; i < 
	gåis
.
size
(); ++i )

39 i‡–
	gåis
[
i
][0] =
åis
[i][1] ) { ; }

41 c⁄° 
	gVec3d
& 
	gx1
 = 
posôi⁄s
[
åis
[
i
][0]];

42 c⁄° 
	gVec3d
& 
	gx2
 = 
posôi⁄s
[
åis
[
i
][1]];

43 c⁄° 
	gVec3d
& 
	gx3
 = 
posôi⁄s
[
åis
[
i
][2]];

45 c⁄° 
	gVec3d
& 
	gu1
 = 
di•œ˚míts
[
åis
[
i
][0]];

46 c⁄° 
	gVec3d
& 
	gu2
 = 
di•œ˚míts
[
åis
[
i
][1]];

47 c⁄° 
	gVec3d
& 
	gu3
 = 
di•œ˚míts
[
åis
[
i
][2]];

49 
Vec3d
 
	g√w_x1
 = 
x1
 + 
u1
;

50 
Vec3d
 
	g√w_x2
 = 
x2
 + 
u2
;

51 
Vec3d
 
	g√w_x3
 = 
x3
 + 
u3
;

53 c⁄° 
Vec3d
 
	gc0
 = 
¸oss
–(
x2
-
x1
), (
x3
-x1) );

54 c⁄° 
Vec3d
 
	gc1
 = 
¸oss
–(
x2
-
x1
), (
u3
-
u1
ËË- cross–(
x3
-x1), (
u2
-u1) );

55 c⁄° 
Vec3d
 
	gc2
 = 
¸oss
–(
u2
-
u1
), (
u3
-u1) );

56 c⁄° 
	ga
 = 
dŸ
(
c0
, 
c2
);

57 c⁄° 
	gb
 = 
dŸ
(
c0
, 
c1
);

58 c⁄° 
	gc
 = 
dŸ
(
c0
, c0);

60 
	gbëa
 = 1.0;

62 
	gmö_¨ó
 = 
mö
–
mö_¨ó
, 
c
 );

64 i‡–
	gc
 < 1e-14 )

66 i‡–
	gvîbo£
 ) { 
	g°d
::
cout
 << "su≥∏smÆ»åüngÀ " << 
i
 << " (" << 
åis
[i] << ")" << 
°d
::
ídl
; }

69 i‡–
Ábs
(
a
) == 0 )

72 i‡––
Ábs
(
b
Ë> 1e-14 ) && ( -
c
 / b >= 0.0 ) )

74 
bëa
 = -
c
 / 
b
;

78 i‡–
	gvîbo£
 )

80 i‡–
Ábs
(
b
) < 1e-14 )

82 
	g°d
::
cout
 << "åüngÀ " << 
i
 << ": ";

83 
	g°d
::
cout
 << "b =" << 
b
 << 
°d
::
ídl
;

90 
	gdes¸imö™t
 = 
b
*b - 4.0*
a
*
c
;

92 i‡–
	gdes¸imö™t
 < 0.0 )

95 i‡–
	gvîbo£
 )

97 
	g°d
::
cout
 << "åüngÀ " << 
i
 << ": des¸imö™à=" << 
des¸imö™t
 << 
°d
::
ídl
;

100 
	gbëa
 = 1.0;

104 
	gq
;

105 i‡–
	gb
 > 0.0 )

107 
	gq
 = -0.5 * ( 
b
 + 
sqπ
–
des¸imö™t
 ) );

111 
	gq
 = -0.5 * ( 
b
 - 
sqπ
–
des¸imö™t
 ) );

114 
	gbëa_1
 = 
q
 / 
a
;

115 
	gbëa_2
 = 
c
 / 
q
;

117 i‡–
	gbëa_1
 < 0.0 )

119 i‡–
	gbëa_2
 < 0.0 )

121 
as£π
–
dŸ
–
åüngÀ_n‹mÆ
(
x1
, 
x2
, 
x3
),ÅrüngÀ_n‹mÆ(
√w_x1
, 
√w_x2
, 
√w_x3
) ) > 0.0 );

125 
	gbëa
 = 
bëa_2
;

130 i‡–
	gbëa_2
 < 0.0 )

132 
	gbëa
 = 
bëa_1
;

134 i‡–
	gbëa_1
 < 
	gbëa_2
 )

136 
	gbëa
 = 
bëa_1
;

140 
	gbëa
 = 
bëa_2
;

147 
boﬁ
 
	gch™ged
 = 
Ál£
;

148 i‡–
	gbëa
 < 
	gmax_bëa
 )

150 
	gmax_bëa
 = 0.99 * 
bëa
;

151 
	gch™ged
 = 
åue
;

153 i‡–
	gvîbo£
 )

155 
	g°d
::
cout
 << "ch™gög bë®---ÅrüngÀ: " << 
i
 << 
°d
::
ídl
;

156 
	g°d
::
cout
 << "√w max bëa: " << 
max_bëa
 << 
°d
::
ídl
;

157 
	g°d
::
cout
 << "®" << 
a
 << ", b = " << 
b
 << ", c = " << 
c
 << 
°d
::
ídl
;

160 i‡–
	gmax_bëa
 < 1e-4 )

167 
	g√w_x1
 = 
x1
 + 
max_bëa
 * 
u1
;

168 
	g√w_x2
 = 
x2
 + 
max_bëa
 * 
u2
;

169 
	g√w_x3
 = 
x3
 + 
max_bëa
 * 
u3
;

171 
Vec3d
 
	gﬁd_n‹mÆ
 = 
¸oss
(
x2
-
x1
, 
x3
-x1);

172 
Vec3d
 
	g√w_n‹mÆ
 = 
¸oss
(
√w_x2
-
√w_x1
, 
√w_x3
-new_x1);

174 i‡–
dŸ
–
ﬁd_n‹mÆ
, 
√w_n‹mÆ
 ) < 0.0 )

176 
	g°d
::
cout
 << "åüngÀ " << 
i
 << ": " << 
åis
[i] << 
°d
::
ídl
;

177 
	g°d
::
cout
 << "ﬁdÇ‹mÆ: " << 
ﬁd_n‹mÆ
 << 
°d
::
ídl
;

178 
	g°d
::
cout
 << "√wÇ‹mÆ: " << 
√w_n‹mÆ
 << 
°d
::
ídl
;

179 
	g°d
::
cout
 << "dŸÖrodu˘: " << 
dŸ
–
åüngÀ_n‹mÆ
(
x1
, 
x2
, 
x3
),ÅrüngÀ_n‹mÆ(
√w_x1
, 
√w_x2
, 
√w_x3
ËË<< std::
ídl
;

180 
	g°d
::
cout
 << (
ch™ged
 ? "ch™ged" : "nŸ ch™ged"Ë<< 
°d
::
ídl
;

181 
	g°d
::
cout
 << "bëa: " << 
bëa
 << 
°d
::
ídl
;

182 
	g°d
::
cout
 << "max bëa: " << 
max_bëa
 << 
°d
::
ídl
;

186  
	gmax_bëa
;

196 
	gMeshSmoŸhî
::
nuŒ_•a˚_smoŸh_vîãx
–
size_t
 
v
,

197 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

198 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

199 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_˚¡roids
,

200 
Vec3d
& 
di•œ˚mít
 ) const

203 c⁄° 
	gN⁄De°ru˘iveTriMesh
& 
	gmesh
 = 
m_surf
.
m_mesh
;

205 i‡–
	gmesh
.
	gm_vîãx_to_åüngÀ_m≠
[
v
].
em±y
() )

207 
	gdi•œ˚mít
 = 
Vec3d
(0,0,0);

211 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
edges
 = 
mesh
.
m_vîãx_to_edge_m≠
[
v
];

212  
size_t
 
	gj
 = 0; j < 
	gedges
.
size
(); ++j )

214 i‡–
	gmesh
.
	gm_edge_to_åüngÀ_m≠
[ 
edges
[
j
] ].
size
() == 1 )

216 
di•œ˚mít
 = 
Vec3d
(0,0,0);

221 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
 = 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
v
];

223 
	g°d
::
ve˘‹
< 
Vec3d
 > 
N
;

224 
	g°d
::
ve˘‹
< > 
W
;

226  
size_t
 
	gi
 = 0; i < 
	göcidít_åüngÀs
.
size
(); ++i )

228 
size_t
 
	gåüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

229 
	gN
.
push_back
–
åüngÀ_n‹mÆs
[
åüngÀ_ödex
] );

230 
	gW
.
push_back
–
åüngÀ_¨ós
[
åüngÀ_ödex
] );

233 
M©33d
 
A
(0,0,0,0,0,0,0,0,0);

236  
size_t
 
	gi
 = 0; i < 
	gN
.
size
(); ++i )

238 
A
(0,0Ë+
N
[
i
][0] * 
W
[i] * N[i][0];

239 
A
(1,0Ë+
N
[
i
][1] * 
W
[i] * N[i][0];

240 
A
(2,0Ë+
N
[
i
][2] * 
W
[i] * N[i][0];

242 
A
(0,1Ë+
N
[
i
][0] * 
W
[i] * N[i][1];

243 
A
(1,1Ë+
N
[
i
][1] * 
W
[i] * N[i][1];

244 
A
(2,1Ë+
N
[
i
][2] * 
W
[i] * N[i][1];

246 
A
(0,2Ë+
N
[
i
][0] * 
W
[i] * N[i][2];

247 
A
(1,2Ë+
N
[
i
][1] * 
W
[i] * N[i][2];

248 
A
(2,2Ë+
N
[
i
][2] * 
W
[i] * N[i][2];

252 
	geigívÆues
[3];

253 
	gw‹k
[9];

254 
	göfo
 = ~0, 
	gn
 = 3, 
	glw‹k
 = 9;

255 
	gLAPACK
::
gë_eigí_decomposôi⁄
–&
n
, 
A
.
a
, &n, 
eigívÆues
, 
w‹k
, &
lw‹k
, &
öfo
 );

257 i‡–
	göfo
 != 0 )

259 
°d
::
cout
 << "Eigí decomposôi⁄ faûed" << std::
ídl
;

260 
	g°d
::
cout
 << "numbî o‡öcidít_åüngÀs: " << 
öcidít_åüngÀs
.
size
(Ë<< 
°d
::
ídl
;

261  
size_t
 
	gi
 = 0; i < 
	göcidít_åüngÀs
.
size
(); ++i )

263 
size_t
 
	gåüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

264 
	g°d
::
cout
 << "åüngÀ: " << 
m_surf
.
m_mesh
.
gë_åüngÀ
(
åüngÀ_ödex
Ë<< 
°d
::
ídl
;

265 
	g°d
::
cout
 << "n‹mÆ: " << 
åüngÀ_n‹mÆs
[
åüngÀ_ödex
] << 
°d
::
ídl
;

266 
	g°d
::
cout
 << "¨ó: " << 
åüngÀ_¨ós
[
åüngÀ_ödex
] << 
°d
::
ídl
;

269 
as£π
(0);

273 
	g°d
::
ve˘‹
<
Vec3d
> 
T
;

274  
	gi
 = 0; i < 3; ++i )

276 i‡–
	geigívÆues
[
i
] < 
G_EIGENVALUE_RANK_RATIO
 *Éigenvalues[2] )

278 
	gT
.
push_back
–
Vec3d
–
A
(0,
i
), A(1,i), A(2,i) ) );

284 
M©33d
 
nuŒ_•a˚_¥oje˘i⁄
(0,0,0,0,0,0,0,0,0);

285  
	grow
 = 0;Ñow < 3; ++row )

287  
	gcﬁ
 = 0; col < 3; ++col )

289  
size_t
 
	gi
 = 0; i < 
	gT
.
size
(); ++i )

291 
nuŒ_•a˚_¥oje˘i⁄
(
row
, 
cﬁ
Ë+
T
[
i
][row] * T[i][col];

296 
Vec3d
 
t
(0,0,0);

297 
	gsum_¨ós
 = 0;

299  
size_t
 
	gi
 = 0; i < 
	göcidít_åüngÀs
.
size
(); ++i )

301 
	g¨ó
 = 
åüngÀ_¨ós
[
öcidít_åüngÀs
[
i
]];

302 
	gsum_¨ós
 +
¨ó
;

303 
Vec3d
 
	gc
 = 
åüngÀ_˚¡roids
[
öcidít_åüngÀs
[
i
]] - 
m_surf
.
gë_posôi⁄
(
v
);

304 
	gt
 +
¨ó
 * 
c
;

307 
	gt
 = 
nuŒ_•a˚_¥oje˘i⁄
 * 
t
;

308 
	gt
 /
sum_¨ós
;

310 
	gdi•œ˚mít
 = 
t
;

321 
	gMeshSmoŸhî
::
	$¥o˚ss_mesh
( )

323 i‡–
m_surf
.
m_vîbo£
 )

325 
°d
::
cout
 << "---------------------- E»T›o: vîãxÑedi°ributi⁄ ----------------------" << std::
ídl
;

328 
°d
::
ve˘‹
<> 
åüngÀ_¨ós
;

329 
åüngÀ_¨ós
.
	`ª£rve
–
m_surf
.
m_mesh
.
	`num_åüngÀs
());

330 
°d
::
ve˘‹
<
Vec3d
> 
åüngÀ_n‹mÆs
;

331 
åüngÀ_n‹mÆs
.
	`ª£rve
–
m_surf
.
m_mesh
.
	`num_åüngÀs
());

332 
°d
::
ve˘‹
<
Vec3d
> 
åüngÀ_˚¡roids
;

333 
åüngÀ_˚¡roids
.
	`ª£rve
–
m_surf
.
m_mesh
.
	`num_åüngÀs
());

335  
size_t
 
i
 = 0; i < 
m_surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

337 c⁄° 
Vec3°
& 
åi
 = 
m_surf
.
m_mesh
.
	`gë_åüngÀ
(
i
);

338 i‡–
åi
[0] ==Åri[1] )

340 
åüngÀ_¨ós
.
	`push_back
( 0 );

341 
åüngÀ_n‹mÆs
.
	`push_back
–
	`Vec3d
(0,0,0) );

342 
åüngÀ_˚¡roids
.
	`push_back
–
	`Vec3d
(0,0,0) );

346 
åüngÀ_¨ós
.
	`push_back
–
m_surf
.
	`gë_åüngÀ_¨ó
–
i
 ) );

347 
åüngÀ_n‹mÆs
.
	`push_back
–
m_surf
.
	`gë_åüngÀ_n‹mÆ
–
i
 ) );

348 
åüngÀ_˚¡roids
.
	`push_back
–(
m_surf
.
	`gë_posôi⁄
(
åi
[0]) + m_surf.get_position(tri[1]) + m_surf.get_position(tri[2])) / 3 );

352 
°d
::
ve˘‹
<
Vec3d
> 
di•œ˚míts
;

353 
di•œ˚míts
.
	`ªsize
–
m_surf
.
	`gë_num_vîti˚s
(), 
	`Vec3d
(0) );

355 
max_di•œ˚mít
 = 1e-30;

356  
size_t
 
i
 = 0; i < 
m_surf
.
	`gë_num_vîti˚s
(); ++i )

358 i‡–!
m_surf
.
	`vîãx_is_sﬁid
(
i
) )

360 
	`nuŒ_•a˚_smoŸh_vîãx
–
i
, 
åüngÀ_¨ós
, 
åüngÀ_n‹mÆs
, 
åüngÀ_˚¡roids
, 
di•œ˚míts
[i] );

361 
max_di•œ˚mít
 = 
	`max
–max_di•œ˚mít, 
	`mag
–
di•œ˚míts
[
i
] ) );

366 
max_bëa
 = 1.0;

368 i‡–
m_surf
.
m_vîbo£
 ) { 
°d
::
cout
 << "max bëa: " << 
max_bëa
 << std::
ídl
; }

370 
m_surf
.
m_vñocôõs
.
	`ªsize
–m_surf.
	`gë_num_vîti˚s
() );

372  
size_t
 
i
 = 0; i < 
m_surf
.
	`gë_num_vîti˚s
(); ++i )

374 
m_surf
.
	`£t_√wposôi⁄
–
i
, m_surf.
	`gë_posôi⁄
(iË+ (
max_bëa
Ë* 
di•œ˚míts
[i] );

375 
m_surf
.
m_vñocôõs
[
i
] = (m_surf.
	`gë_√wposôi⁄
(iË- m_surf.
	`gë_posôi⁄
(i));

379 i‡–
m_surf
.
m_cﬁlisi⁄_ß„ty
 )

382 
boﬁ
 
Æl_cﬁlisi⁄s_h™dÀd
 = 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`h™dÀ_cﬁlisi⁄s
(1.0);

384 i‡–!
Æl_cﬁlisi⁄s_h™dÀd
 )

386 
Im∑˘Z⁄eSﬁvî
 
	`sﬁvî
–
m_surf
 );

387 
boﬁ
 
ªsu…
 = 
sﬁvî
.
	`öña°ic_im∑˘_z⁄es
( 1.0 );

389 i‡–!
ªsu…
 )

391 
ªsu…
 = 
sﬁvî
.
	`rigid_im∑˘_z⁄es
( 1.0 );

394 i‡–!
ªsu…
 )

397 
°d
::
˚º
 << "WARNING: Ab‹tög meshÇuŒ-•a˚ smoŸhög duêtÿCCDÖrobÀm" << std::
ídl
;

406 
°d
::
ve˘‹
<
I¡î£˘i⁄
> 
öãr£˘i⁄s
;

407 
m_surf
.
m_cﬁlisi⁄_pùñöe
.
	`gë_öãr£˘i⁄s
–
Ál£
, 
åue
, 
öãr£˘i⁄s
 );

409 i‡–
öãr£˘i⁄s
.
	`size
() != 0 )

412 
°d
::
˚º
 << "WARNING: Ab‹tög meshÇuŒ-•a˚ smoŸhög duêtÿCCDÖrobÀm" << std::
ídl
;

418 
m_surf
.
	`£t_posôi⁄s_to_√wposôi⁄s
();

420 
	}
}

	@eltopo3d/meshsmoother.h

11 #i‚de‡
EL_TOPO_MESHSMOOTHER_H


12 
	#EL_TOPO_MESHSMOOTHER_H


	)

18 
	~<mesh›î©‹.h
>

19 
	~<ve˘‹
>

25 
˛ass
 
	gSurfTøck
;

26 
	gãm∂©e
<
	gN
, 
˛ass
 
	gT
> 
	gVec
;

27 
	gVec
<3,> 
	tVec3d
;

28 
	gVec
<2,
	tsize_t
> 
	tVec2°
;

29 
	gVec
<3,
	tsize_t
> 
	tVec3°
;

35 ˛as†
	cMeshSmoŸhî
 : 
public
 
MeshO≥øt‹


38 
public
:

40 
	$MeshSmoŸhî
–
SurfTøck
& 
surf
 ) :

41 
	$MeshO≥øt‹
–
surf
 )

46 
	`¥o˚ss_mesh
();

50 
	`compuã_max_time°ï_quadøtic_sﬁve
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

51 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
,

52 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
di•œ˚míts
,

53 
boﬁ
 
vîbo£
 );

57 
	`nuŒ_•a˚_smoŸh_vîãx
(
size_t
 
v
,

58 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

59 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

60 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_˚¡roids
,

61 
Vec3d
& 
di•œ˚mít
 ) const;

63 
	}
};

	@eltopo3d/nondestructivetrimesh.cpp

16 
	~<n⁄de°ru˘ivërimesh.h
>

18 
	~<cm©h
>

19 
	~<c°d¨g
>

20 
	~<c°dlib
>

21 
	~<f°ªam
>

22 
	~<wÆl˛ocktime.h
>

29 c⁄° 
	gi_∂us_⁄e_mod_thªe
[3] = {1,2,0};

49 
	gN⁄De°ru˘iveTriMesh
::
	$˛ór
()

51 
m_åis
.
	`˛ór
();

52 
	`˛ór_auxûüry_°ru˘uªs
();

53 
	}
}

62 
	gN⁄De°ru˘iveTriMesh
::
	$add_vîãx
(
size_t
 
åi
)

66 
Vec3°
& 
t
 = 
m_åis
[
åi
];

67 
i
 = 0; i < 3; i++)

70 
°d
::
ve˘‹
<
size_t
>& 
vt
 = 
m_vîãx_to_åüngÀ_m≠
[
t
[
i
]];

72  
j
 = 0; j < ()
vt
.
	`size
(); j++ )

75 if(
vt
[
j
] =
åi
)

77 
vt
.
	`îa£
–vt.
	`begö
(Ë+ 
j
 );

78 --
j
;

85 
Vec3°
& 
ã
 = 
m_åüngÀ_to_edge_m≠
[
åi
];

87 
i
 = 0; i < 3; i++)

89 
size_t
 
öc_edge
 = 
ã
[
i
];

91 
°d
::
ve˘‹
<
size_t
>& 
ë
 = 
m_edge_to_åüngÀ_m≠
[
öc_edge
];

93  
j
 = 0; j < (Ë
ë
.
	`size
(); j++)

95 if(
ë
[
j
] =
åi
)

97 
ë
.
	`îa£
–ë.
	`begö
(Ë+ 
j
 );

98 --
j
;

102 i‡–
ë
.
	`size
() == 1 )

104 
m_is_bound¨y_edge
[
öc_edge
] = 
åue
;

108 
m_is_bound¨y_edge
[
öc_edge
] = 
Ál£
;

111 i‡–
ë
.
	`em±y
() )

114 
	`ªmove_edge
–
öc_edge
 );

119 
ã
[0] =Åe[1] =Åe[2] = 0;

121 
	`upd©e_is_bound¨y_vîãx
–
t
[0] );

122 
	`upd©e_is_bound¨y_vîãx
–
t
[1] );

123 
	`upd©e_is_bound¨y_vîãx
–
t
[2] );

126 
t
[0] =Å[1] =Å[2] = 0;

129 
	}
}

138 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$add_åüngÀ
–c⁄° 
Vec3°
& 
åi
 )

140 i‡–
åi
[0] >
m_vîãx_to_edge_m≠
.
	`size
() )

142 
	`£t_num_vîti˚s
(
åi
[0]+1);

145 i‡–
åi
[1] >
m_vîãx_to_edge_m≠
.
	`size
() )

147 
	`£t_num_vîti˚s
(
åi
[1]+1);

150 i‡–
åi
[2] >
m_vîãx_to_edge_m≠
.
	`size
() )

152 
	`£t_num_vîti˚s
(
åi
[2]+1);

156 
size_t
 
idx
 = 
m_åis
.
	`size
();

157 
m_åis
.
	`push_back
(
åi
);

158 
m_åüngÀ_to_edge_m≠
.
	`ªsize
(
idx
+1);

160 
i
 = 0; i < 3; i++)

162 
size_t
 
vtx0
 = 
åi
[ 
i
 ];

163 
size_t
 
vtx1
 = 
åi
[ 
i_∂us_⁄e_mod_thªe
[
i
] ];

166 
size_t
 
e
 = 
	`gë_edge_ödex
(
vtx0
, 
vtx1
);

167 if(
e
 =
m_edges
.
	`size
())

170 
e
 = 
	`add_edge
(
vtx0
, 
vtx1
);

174 
m_edge_to_åüngÀ_m≠
[
e
].
	`push_back
(
idx
);

176 i‡–
m_edge_to_åüngÀ_m≠
[
e
].
	`size
() == 1 )

178 
m_is_bound¨y_edge
[
e
] = 
åue
;

182 
m_is_bound¨y_edge
[
e
] = 
Ál£
;

185 
m_åüngÀ_to_edge_m≠
[
idx
][
i
] = 
e
;

186 
m_vîãx_to_åüngÀ_m≠
[
åi
[
i
]].
	`push_back
(
idx
);

189 
	`upd©e_is_bound¨y_vîãx
–
åi
[0] );

190 
	`upd©e_is_bound¨y_vîãx
–
åi
[1] );

191 
	`upd©e_is_bound¨y_vîãx
–
åi
[2] );

193  
idx
;

195 
	}
}

203 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$add_vîãx
( )

205 
	`as£π
–
m_vîãx_to_edge_m≠
.
	`size
(Ë=
m_vîãx_to_åüngÀ_m≠
.size() );

206 
	`as£π
–
m_vîãx_to_edge_m≠
.
	`size
(Ë=
m_is_bound¨y_vîãx
.size() );

208 
m_vîãx_to_edge_m≠
.
	`ªsize
–m_vîãx_to_edge_m≠.
	`size
() + 1 );

209 
m_vîãx_to_åüngÀ_m≠
.
	`ªsize
–m_vîãx_to_åüngÀ_m≠.
	`size
() + 1 );

210 
m_is_bound¨y_vîãx
.
	`ªsize
–m_is_bound¨y_vîãx.
	`size
() + 1 );

212  
m_vîãx_to_åüngÀ_m≠
.
	`size
() - 1;

213 
	}
}

222 
	gN⁄De°ru˘iveTriMesh
::
	$ªmove_vîãx
(
size_t
 
vtx
)

225 
m_vîãx_to_åüngÀ_m≠
[
vtx
].
	`˛ór
();

228  
size_t
 
i
 = 0; i < 
m_vîãx_to_edge_m≠
[
vtx
].
	`size
(); ++i )

230 
	`as£π
–
m_edges
[ 
m_vîãx_to_edge_m≠
[
vtx
][
i
] ][0] == m_edges[ m_vertex_to_edge_map[vtx][i] ][1] );

233 
m_vîãx_to_edge_m≠
[
vtx
].
	`˛ór
();

234 
	}
}

239 
	gN⁄De°ru˘iveTriMesh
::
	$£t_num_vîti˚s
–
size_t
 
num_vîti˚s
 )

241 i‡–
num_vîti˚s
 >
m_vîãx_to_åüngÀ_m≠
.
	`size
() )

249 
	`as£π
–
m_vîãx_to_åüngÀ_m≠
.
	`size
(Ë=
m_vîãx_to_edge_m≠
.size() );

250 
	`as£π
–
m_vîãx_to_åüngÀ_m≠
.
	`size
(Ë=
m_is_bound¨y_vîãx
.size() );

252  
size_t
 
i
 = 
num_vîti˚s
; i < 
m_vîãx_to_åüngÀ_m≠
.
	`size
(); ++i )

254 
	`as£π
–
	`vîãx_is_dñëed
(
i
) );

255 
	`as£π
–
m_vîãx_to_edge_m≠
[
i
].
	`size
() == 0 );

256 
	`as£π
–
m_vîãx_to_åüngÀ_m≠
[
i
].
	`size
() == 0 );

260 
m_vîãx_to_edge_m≠
.
	`ªsize
–
num_vîti˚s
 );

261 
m_vîãx_to_åüngÀ_m≠
.
	`ªsize
–
num_vîti˚s
 );

262 
m_is_bound¨y_vîãx
.
	`ªsize
–
num_vîti˚s
 );

264 
	}
}

273 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$add_edge
(
size_t
 
vtx0
, size_à
vtx1
)

276 
size_t
 
edge_ödex
 = 
m_edges
.
	`size
();

277 
m_edges
.
	`push_back
(
	`Vec2°
(
vtx0
, 
vtx1
));

279 
m_edge_to_åüngÀ_m≠
.
	`push_back
–
°d
::
ve˘‹
<
size_t
>( 0 ) );

281 
m_is_bound¨y_edge
.
	`push_back
–
åue
 );

283 
m_vîãx_to_edge_m≠
[
vtx0
].
	`push_back
(
edge_ödex
);

284 
m_vîãx_to_edge_m≠
[
vtx1
].
	`push_back
(
edge_ödex
);

286  
edge_ödex
;

287 
	}
}

296 
	gN⁄De°ru˘iveTriMesh
::
	$ªmove_edge
–
size_t
 
edge_ödex
 )

300 
°d
::
ve˘‹
<
size_t
>& 
vîãx_to_edge_m≠
 = 
m_vîãx_to_edge_m≠
[ 
m_edges
[
edge_ödex
][0] ];

301  
i
=0; i < ()
vîãx_to_edge_m≠
.
	`size
(); ++i)

303 i‡–
vîãx_to_edge_m≠
[
i
] =
edge_ödex
 )

305 
vîãx_to_edge_m≠
.
	`îa£
–vîãx_to_edge_m≠.
	`begö
(Ë+ 
i
 );

306 --
i
;

313 
°d
::
ve˘‹
<
size_t
>& 
vîãx_to_edge_m≠
 = 
m_vîãx_to_edge_m≠
[ 
m_edges
[
edge_ödex
][1] ];

314  
i
=0; i < ()
vîãx_to_edge_m≠
.
	`size
(); ++i)

316 i‡–
vîãx_to_edge_m≠
[
i
] =
edge_ödex
 )

318 
vîãx_to_edge_m≠
.
	`îa£
–vîãx_to_edge_m≠.
	`begö
(Ë+ 
i
 );

319 --
i
;

324 
m_edges
[
edge_ödex
][0] = 0;

325 
m_edges
[
edge_ödex
][1] = 0;

327 
	}
}

332 
	gN⁄De°ru˘iveTriMesh
::
	$upd©e_is_bound¨y_vîãx
–
size_t
 
v
 )

334 
m_is_bound¨y_vîãx
[
v
] = 
Ál£
;

336  
size_t
 
i
 = 0; i < 
m_vîãx_to_edge_m≠
[
v
].
	`size
(); ++i )

338 
size_t
 
edge_ödex
 = 
m_vîãx_to_edge_m≠
[
v
][
i
];

340 i‡–
m_is_bound¨y_edge
[
edge_ödex
] )

342 
m_is_bound¨y_vîãx
[
v
] = 
åue
;

347 
	}
}

355 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_edge_ödex
(
size_t
 
vtx0
, size_à
vtx1
) const

357 
	`as£π
–
vtx0
 < 
m_vîãx_to_edge_m≠
.
	`size
() );

358 
	`as£π
–
vtx1
 < 
m_vîãx_to_edge_m≠
.
	`size
() );

360 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
edges0
 = 
m_vîãx_to_edge_m≠
[
vtx0
];

361 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
edges1
 = 
m_vîãx_to_edge_m≠
[
vtx1
];

363 
size_t
 
e0
 = 0;É0 < 
edges0
.
	`size
();É0++)

365 
size_t
 
edge0
 = 
edges0
[
e0
];

367 
size_t
 
e1
 = 0;É1 < 
edges1
.
	`size
();É1++)

369 if–
edge0
 =
edges1
[
e1
] && 
m_edges
[edge0][0] != m_edges[edge0][1] )

371 
	`as£π
––
m_edges
[
edge0
][0] =
vtx0
 && m_edges[edge0][1] =
vtx1
 ) ||

372 –
m_edges
[
edge0
][1] =
vtx0
 && m_edges[edge0][0] =
vtx1
 ) );

374  
edge0
;

379  
m_edges
.
	`size
();

380 
	}
}

389 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_åüngÀ_ödex
–
size_t
 
vtx0
, size_à
vtx1
, size_à
vtx2
 ) const

391 
Vec3°
 
	`vîts
–
vtx0
, 
vtx1
, 
vtx2
 );

393 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
åüngÀs0
 = 
m_vîãx_to_åüngÀ_m≠
[
vtx0
];

394  
size_t
 
i
 = 0; i < 
åüngÀs0
.
	`size
(); ++i )

396 i‡–
	`åüngÀ_has_the£_vîts
–
m_åis
[
åüngÀs0
[
i
]], 
vîts
 ) )

398  
åüngÀs0
[
i
];

402  
m_åis
.
	`size
();

404 
	}
}

414 
	gN⁄De°ru˘iveTriMesh
::
˛ór_dñëed_åüngÀs
–
°d
::
ve˘‹
<
Vec2°
>* 
de‰agged_åüngÀ_m≠
 )

417 
°d
::
ve˘‹
<
Vec3°
> 
√w_åis
;

418 
	g√w_åis
.
ª£rve
–
m_åis
.
size
() );

420 i‡–
	gde‰agged_åüngÀ_m≠
 !
NULL
 )

422  
size_t
 
i
 = 0; 
	gi
 < 
	gm_åis
.
size
(); ++i )

424 i‡–!
åüngÀ_is_dñëed
(
i
) )

426 
	g√w_åis
.
push_back
–
m_åis
[
i
] );

427 
Vec2°
 
m≠_íåy
(
i
, 
√w_åis
.
size
()-1);

428 
	gde‰agged_åüngÀ_m≠
->
push_back
–
m≠_íåy
 );

434  
size_t
 
	gi
 = 0; i < 
	gm_åis
.
size
(); ++i )

436 i‡–!
åüngÀ_is_dñëed
(
i
) )

438 
	g√w_åis
.
push_back
–
m_åis
[
i
] );

443 
ª∂a˚_Æl_åüngÀs
–
√w_åis
 );

454 
	gN⁄De°ru˘iveTriMesh
::
	$˛ór_auxûüry_°ru˘uªs
()

456 
m_edges
.
	`˛ór
();

457 
m_vîãx_to_edge_m≠
.
	`˛ór
();

458 
m_vîãx_to_åüngÀ_m≠
.
	`˛ór
();

459 
m_edge_to_åüngÀ_m≠
.
	`˛ór
();

460 
m_åüngÀ_to_edge_m≠
.
	`˛ór
();

461 
m_is_bound¨y_edge
.
	`˛ór
();

462 
m_is_bound¨y_vîãx
.
	`˛ór
();

464 
	}
}

473 
	gN⁄De°ru˘iveTriMesh
::
	$ªbuûd_auxûüry_°ru˘uªs
( )

476 
	`˛ór_auxûüry_°ru˘uªs
();

478 
size_t
 
nv
 = 0;

479  
size_t
 
i
 = 0; i < 
m_åis
.
	`size
(); ++i )

481 
nv
 = 
	`max
–nv, 
m_åis
[
i
][0] );

482 
nv
 = 
	`max
–nv, 
m_åis
[
i
][1] );

483 
nv
 = 
	`max
–nv, 
m_åis
[
i
][2] );

485 ++
nv
;

487 
m_vîãx_to_åüngÀ_m≠
.
	`ªsize
(
nv
);

488 
m_vîãx_to_edge_m≠
.
	`ªsize
(
nv
);

489 
m_åüngÀ_to_edge_m≠
.
	`ªsize
(
m_åis
.
	`size
());

491 
size_t
 
i
 = 0; i < 
m_åis
.
	`size
(); i++)

493 
Vec3°
& 
t
 = 
m_åis
[
i
];

495 if(
t
[0] !=Å[1])

498 
	`as£π
–
t
[0] < 
nv
 );

499 
	`as£π
–
t
[1] < 
nv
 );

500 
	`as£π
–
t
[2] < 
nv
 );

502 
j
 = 0; j < 3; j++)

503 
m_vîãx_to_åüngÀ_m≠
[
t
[
j
]].
	`push_back
(
i
);

505 
Vec3°
& 
ã
 = 
m_åüngÀ_to_edge_m≠
[
i
];

507 
j
 = 0; j < 3; j++)

509 
size_t
 
vtx0
 = 
t
[
j
];

510 
size_t
 
vtx1
 = 
t
[ 
i_∂us_⁄e_mod_thªe
[
j
] ];

512 
size_t
 
e
 = 
	`gë_edge_ödex
(
vtx0
, 
vtx1
);

514 if(
e
 =
m_edges
.
	`size
())

516 
e
 = 
	`add_edge
(
vtx0
, 
vtx1
);

519 
ã
[
j
] = 
e
;

520 
m_edge_to_åüngÀ_m≠
[
e
].
	`push_back
(
i
);

526 
m_is_bound¨y_edge
.
	`ªsize
–
m_edges
.
	`size
() );

527 
m_is_bound¨y_vîãx
.
	`ªsize
–
nv
, 
Ál£
 );

529  
size_t
 
e
 = 0;É < 
m_edge_to_åüngÀ_m≠
.
	`size
(); ++e )

531 i‡–
m_edge_to_åüngÀ_m≠
[
e
].
	`size
() % 2 == 0 )

533 
m_is_bound¨y_edge
[
e
] = 
Ál£
;

537 
m_is_bound¨y_edge
[
e
] = 
åue
;

538 
m_is_bound¨y_vîãx
[ 
m_edges
[
e
][0] ] = 
åue
;

539 
m_is_bound¨y_vîãx
[ 
m_edges
[
e
][1] ] = 
åue
;

543 
	}
}

	@eltopo3d/nondestructivetrimesh.h

12 #i‚de‡
EL_TOPO_NONDESTRUCTIVETRIMESH_H


13 
	#EL_TOPO_NONDESTRUCTIVETRIMESH_H


	)

19 
	~<ˇs£π
>

20 
	~<›ti⁄s.h
>

21 
	~<ve˘‹
>

22 
	~<vec.h
>

28 
ölöe
 
Vec3°
 
s‹t_åüngÀ
–c⁄° Vec3°& 
t
 );

42 ˛as†
	cN⁄De°ru˘iveTriMesh


45 
	mpublic
:

48 
ölöe
 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
	$gë_åüngÀs
() const;

49 
ölöe
 c⁄° 
Vec3°
& 
	$gë_åüngÀ
–
size_t
 
ödex
 ) const;

50 
ölöe
 
size_t
 
	$num_åüngÀs
() const;

54 
	`˛ór
();

58 
	`˛ór_auxûüry_°ru˘uªs
();

62 
	`ªbuûd_auxûüry_°ru˘uªs
( );

67 
	`upd©e_is_bound¨y_vîãx
–
size_t
 
v
 );

71 
size_t
 
	$gë_edge_ödex
(
size_t
 
vtx0
, size_à
vtx1
) const;

75 
size_t
 
	$gë_åüngÀ_ödex
–
size_t
 
vtx0
, size_à
vtx1
, size_à
vtx2
 ) const;

79 
ölöe
 
	`gë_adja˚¡_åüngÀs
–
size_t
 
åüngÀ_ödex
, 
°d
::
ve˘‹
<size_t>& 
adja˚¡_åüngÀs
 ) const;

83 
ölöe
 
	`gë_adja˚¡_vîti˚s
–
size_t
 
vîãx_ödex
, 
°d
::
ve˘‹
<size_t>& 
adja˚¡_vîti˚s
 ) const;

85 
size_t
 
	`add_åüngÀ
(c⁄° 
Vec3°
& 
åi
);

86 
	`add_vîãx
(
size_t
 
åi
);

90 
ölöe
 
	`ª∂a˚_Æl_åüngÀs
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åis
 );

92 
size_t
 
	`add_vîãx
( );

93 
	`ªmove_vîãx
(
size_t
 
vtx
);

95 
	`£t_num_vîti˚s
–
size_t
 
num_vîti˚s
 );

99 
ölöe
 
size_t
 
	$gë_thúd_vîãx
–
size_t
 
vîãx0
, size_à
vîãx1
, c⁄° 
Vec3°
& 
åüngÀ
 ) const;

100 
ölöe
 
size_t
 
	$gë_thúd_vîãx
–
size_t
 
edge_ödex
, c⁄° 
Vec3°
& 
åüngÀ
 ) const;

101 
ölöe
 
size_t
 
	$gë_thúd_vîãx
–
size_t
 
edge_ödex
, size_à
åüngÀ_ödex
 ) const;

105 
ölöe
 
boﬁ
 
	`‹õ¡ed
–
size_t
 
vîãx0
, size_à
vîãx1
, c⁄° 
Vec3°
& 
åüngÀ
 );

108 
ölöe
 
boﬁ
 
	`åüngÀ_has_the£_vîts
–c⁄° 
Vec3°
& 
åi
, c⁄° Vec3°& 
vîts
 );

112 
ölöe
 
size_t
 
	`ödex_ö_åüngÀ
–c⁄° 
Vec3°
& 
åi
, size_à
v
, 
Vec2ui
& 
Ÿhî_two
 );

114 
ölöe
 
size_t
 
	`gë_comm⁄_edge
–size_à
åüngÀ_a
, size_à
åüngÀ_b
 );

116 
ölöe
 
boﬁ
 
	`åüngÀs_¨e_adja˚¡
–
size_t
 
åüngÀ_a
, size_à
åüngÀ_b
 );

120 
	`˛ór_dñëed_åüngÀs
–
°d
::
ve˘‹
<
Vec2°
>* 
de‰agged_åüngÀ_m≠
 = 
NULL
 );

124 
ölöe
 
boﬁ
 
	$åüngÀ_is_dñëed
–
size_t
 
åüngÀ_ödex
 ) const;

125 
ölöe
 
boﬁ
 
	$edge_is_dñëed
–
size_t
 
edge_ödex
 ) const;

126 
ölöe
 
boﬁ
 
	$vîãx_is_dñëed
–
size_t
 
vîãx_ödex
 ) const;

133 
°d
::
ve˘‹
<
Vec2°
> 
m_edges
;

137 
°d
::
ve˘‹
<
boﬁ
> 
m_is_bound¨y_edge
;

141 
°d
::
ve˘‹
<
boﬁ
> 
m_is_bound¨y_vîãx
;

145 
°d
::
ve˘‹
<°d::ve˘‹<
size_t
> > 
m_vîãx_to_edge_m≠
;

149 
°d
::
ve˘‹
<°d::ve˘‹<
size_t
> > 
m_vîãx_to_åüngÀ_m≠
;

153 
°d
::
ve˘‹
<°d::ve˘‹<
size_t
> > 
m_edge_to_åüngÀ_m≠
;

157 
°d
::
ve˘‹
<
Vec3°
> 
m_åüngÀ_to_edge_m≠
;

160 
¥iv©e
:

162 
size_t
 
	`add_edge
(size_à
vtx0
, size_à
vtx1
);

163 
	`ªmove_edge
–
size_t
 
edge_ödex
 );

167 
°d
::
ve˘‹
<
Vec3°
> 
m_åis
;

181 
ölöe
 
Vec3°
 
	$s‹t_åüngÀ
–c⁄° 
Vec3°
& 
t
 )

183 i‡–
t
[0] <Å[1] )

185 i‡–
t
[0] <Å[2] )

187 i‡–
t
[1] <Å[2] )

189  
t
;

193  
	`Vec3°
–
t
[0],Å[2],Å[1] );

198  
	`Vec3°
–
t
[2],Å[0],Å[1] );

203 i‡–
t
[1] <Å[2] )

205 i‡–
t
[0] <Å[2] )

207  
	`Vec3°
–
t
[1],Å[0],Å[2] );

211  
	`Vec3°
–
t
[1],Å[2],Å[0] );

216  
	`Vec3°
–
t
[2],Å[1],Å[0] );

219 
	}
}

227 
ölöe
 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
N⁄De°ru˘iveTriMesh
::
	$gë_åüngÀs
() const

229  
m_åis
;

230 
	}
}

234 
ölöe
 c⁄° 
	gVec3°
& 
	gN⁄De°ru˘iveTriMesh
::
	$gë_åüngÀ
–
size_t
 
ödex
 ) const

236  
m_åis
[
ödex
];

237 
	}
}

241 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$num_åüngÀs
() const

243  
m_åis
.
	`size
();

244 
	}
}

252 
ölöe
 
	gN⁄De°ru˘iveTriMesh
::
gë_adja˚¡_åüngÀs
–
size_t
 
åüngÀ_ödex
, 
°d
::
ve˘‹
<size_t>& 
adja˚¡_åüngÀs
 ) const

254 
adja˚¡_åüngÀs
.
˛ór
();

256  
	gi
 = 0; i < 3; ++i )

258 
size_t
 
	gedge_ödex
 = 
m_åüngÀ_to_edge_m≠
[
åüngÀ_ödex
][
i
];

260  
size_t
 
	gt
 = 0;Å < 
	gm_edge_to_åüngÀ_m≠
[
edge_ödex
].
size
(); ++t )

262 i‡–
	gm_edge_to_åüngÀ_m≠
[
edge_ödex
][
t
] !
åüngÀ_ödex
 )

264 
adja˚¡_åüngÀs
.
push_back
–
m_edge_to_åüngÀ_m≠
[
edge_ödex
][
t
] );

277 
ölöe
 
	gN⁄De°ru˘iveTriMesh
::
gë_adja˚¡_vîti˚s
–
size_t
 
vîãx_ödex
, 
°d
::
ve˘‹
<size_t>& 
adja˚¡_vîti˚s
 ) const

279 
adja˚¡_vîti˚s
.
˛ór
();

280 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_edges
 = 
m_vîãx_to_edge_m≠
[
vîãx_ödex
];

282  
size_t
 
	gi
 = 0; i < 
	göcidít_edges
.
size
(); ++i )

284 i‡–
	gm_edges
[ 
öcidít_edges
[
i
] ][0] =
vîãx_ödex
 )

286 
adja˚¡_vîti˚s
.
push_back
–
m_edges
[ 
öcidít_edges
[
i
] ][1] );

290 
as£π
–
m_edges
[ 
öcidít_edges
[
i
] ][1] =
vîãx_ödex
 );

291 
	gadja˚¡_vîti˚s
.
push_back
–
m_edges
[ 
öcidít_edges
[
i
] ][0] );

299 
ölöe
 
	gN⁄De°ru˘iveTriMesh
::
ª∂a˚_Æl_åüngÀs
–c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åis
 )

301 
m_åis
 = 
√w_åis
;

302 
ªbuûd_auxûüry_°ru˘uªs
( );

312 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_thúd_vîãx
–
size_t
 
vîãx0
, size_à
vîãx1
, c⁄° 
Vec3°
& 
åüngÀ
 ) const

314 i‡–!––
åüngÀ
[0] =
vîãx0
 ||ÅrüngÀ[1] =vîãx0 ||ÅrüngÀ[2] =vîãx0 ) && (ÅrüngÀ[0] =
vîãx1
 ||Åriangle[1] == vertex1 ||Åriangle[2] == vertex1 ) ) )

316 
°d
::
cout
 << "åi: " << 
åüngÀ
 << std::
ídl
;

317 
°d
::
cout
 << "v0: " << 
vîãx0
 << ", v1: " << 
vîãx1
 << std::
ídl
;

318 
	`as£π
(
Ál£
);

321 i‡–
åüngÀ
[0] =
vîãx0
 )

323 i‡–
åüngÀ
[1] =
vîãx1
 )

325  
åüngÀ
[2];

329  
åüngÀ
[1];

332 i‡–
åüngÀ
[1] =
vîãx0
 )

334 i‡–
åüngÀ
[2] =
vîãx1
 )

336  
åüngÀ
[0];

340  
åüngÀ
[2];

345 i‡–
åüngÀ
[0] =
vîãx1
 )

347  
åüngÀ
[1];

351  
åüngÀ
[0];

355 
	}
}

359 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_thúd_vîãx
–
size_t
 
edge_ödex
, c⁄° 
Vec3°
& 
åüngÀ
 ) const

361  
	`gë_thúd_vîãx
–
m_edges
[
edge_ödex
][0], m_edges[edge_ödex][1], 
åüngÀ
 );

362 
	}
}

366 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_thúd_vîãx
–
size_t
 
edge_ödex
, size_à
åüngÀ_ödex
 ) const

368  
	`gë_thúd_vîãx
–
m_edges
[
edge_ödex
][0], m_edges[edge_ödex][1], 
m_åis
[
åüngÀ_ödex
] );

369 
	}
}

378 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$‹õ¡ed
–
size_t
 
vîãx0
, size_à
vîãx1
, c⁄° 
Vec3°
& 
åüngÀ
 )

380 
	`as£π
 ( 
åüngÀ
[0] =
vîãx0
 ||Åriangle[1] == vertex0 ||Åriangle[2] == vertex0 );

381 
	`as£π
 ( 
åüngÀ
[0] =
vîãx1
 ||Åriangle[1] == vertex1 ||Åriangle[2] == vertex1 );

383 i‡––(
åüngÀ
[0] =
vîãx0
Ë&& (åüngÀ[1] =
vîãx1
) ) ||

384 –(
åüngÀ
[1] =
vîãx0
Ë&& (åüngÀ[2] =
vîãx1
) ) ||

385 –(
åüngÀ
[2] =
vîãx0
Ë&& (åüngÀ[0] =
vîãx1
) ) )

387  
åue
;

390  
Ál£
;

391 
	}
}

399 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$åüngÀ_has_the£_vîts
–c⁄° 
Vec3°
& 
åi
, c⁄° Vec3°& 
vîts
 )

401 i‡––
åi
[0] =
vîts
[0] ||Åri[0] == verts[1] ||Åri[0] == verts[2] ) &&

402 –
åi
[1] =
vîts
[0] ||Åri[1] == verts[1] ||Åri[1] == verts[2] ) &&

403 –
åi
[2] =
vîts
[0] ||Åri[2] == verts[1] ||Åri[2] == verts[2] ) )

405  
åue
;

408  
Ál£
;

409 
	}
}

417 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$ödex_ö_åüngÀ
–c⁄° 
Vec3°
& 
åi
, 
size_t
 
v
, 
Vec2ui
& 
Ÿhî_two
 )

419 i‡–
v
 =
åi
[0] )

421 
Ÿhî_two
[0] = 1;

422 
Ÿhî_two
[1] = 2;

426 i‡–
v
 =
åi
[1] )

428 
Ÿhî_two
[0] = 2;

429 
Ÿhî_two
[1] = 0;

433 i‡–
v
 =
åi
[2] )

435 
Ÿhî_two
[0] = 0;

436 
Ÿhî_two
[1] = 1;

440 
	`as£π
(0);

442 
Ÿhî_two
[0] = 
°©ic_ˇ°
<>(~0);

443 
Ÿhî_two
[1] = 
°©ic_ˇ°
<>(~0);

444  
°©ic_ˇ°
<
size_t
>(~0);

445 
	}
}

454 
ölöe
 
size_t
 
	gN⁄De°ru˘iveTriMesh
::
	$gë_comm⁄_edge
–
size_t
 
åüngÀ_a
, size_à
åüngÀ_b
 )

456 c⁄° 
Vec3°
& 
åüngÀ_a_edges
 = 
m_åüngÀ_to_edge_m≠
[
åüngÀ_a
];

457 c⁄° 
Vec3°
& 
åüngÀ_b_edges
 = 
m_åüngÀ_to_edge_m≠
[
åüngÀ_b
];

459  
i
 = 0; i < 3; ++i )

461  
j
 = 0; j < 3; ++j )

463 i‡–
åüngÀ_a_edges
[
i
] =
åüngÀ_b_edges
[
j
] )

465  
åüngÀ_a_edges
[
i
];

470  
°©ic_ˇ°
<>(~0);

471 
	}
}

480 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$åüngÀs_¨e_adja˚¡
–
size_t
 
åüngÀ_a
, size_à
åüngÀ_b
 )

482  ( 
	`gë_comm⁄_edge
–
åüngÀ_a
, 
åüngÀ_b
 ) !(
size_t
) ~0 );

483 
	}
}

488 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$åüngÀ_is_dñëed
–
size_t
 
åüngÀ_ödex
 ) const

490  (
m_åis
[
åüngÀ_ödex
][0] == m_tris[triangle_index][1] ||

491 
m_åis
[
åüngÀ_ödex
][1] == m_tris[triangle_index][2] ||

492 
m_åis
[
åüngÀ_ödex
][2] == m_tris[triangle_index][0] );

494 
	}
}

498 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$edge_is_dñëed
–
size_t
 
edge_ödex
 ) const

500  ( 
m_edges
[
edge_ödex
][0] == m_edges[edge_index][1] );

501 
	}
}

505 
ölöe
 
boﬁ
 
	gN⁄De°ru˘iveTriMesh
::
	$vîãx_is_dñëed
–
size_t
 
vîãx_ödex
 ) const

507  ( 
m_vîãx_to_edge_m≠
[
vîãx_ödex
].
	`size
() == 0 );

508 
	}
}

	@eltopo3d/options.h

10 #i‚de‡
EL_TOPO_OPTIONS_H


11 
	#EL_TOPO_OPTIONS_H


	)

13 
	~<comm⁄›ti⁄s.h
>

19 c⁄° 
G_EIGENVALUE_RANK_RATIO
;

	@eltopo3d/subdivisionscheme.cpp

14 
	~<subdivisi⁄scheme.h
>

16 
	~<m©.h
>

17 
	~<sur·øck.h
>

41 
	gMidpoötScheme
::
	$gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 )

43 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
surÁ˚
.
m_mesh
;

44 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 = 
surÁ˚
.
	`gë_posôi⁄s
();

45 
size_t
 
p1_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][0];

46 
size_t
 
p2_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][1];

48 
√w_poöt
 = 0.5 * ( 
posôi⁄s
[ 
p1_ödex
 ] +Öosôi⁄s[ 
p2_ödex
 ] );

49 
	}
}

58 
	gBuâîÊyScheme
::
	$gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 )

60 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
surÁ˚
.
m_mesh
;

61 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 = 
surÁ˚
.
	`gë_posôi⁄s
();

63 
size_t
 
p1_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][0];

64 
size_t
 
p2_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][1];

66 
size_t
 
åi0
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
][0];

67 
size_t
 
åi1
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
edge_ödex
][1];

69 
size_t
 
p3_ödex
 = 
mesh
.
	`gë_thúd_vîãx
–mesh.
m_edges
[
edge_ödex
][0], mesh.m_edges[edge_ödex][1], mesh.
	`gë_åüngÀ
(
åi0
) );

70 
size_t
 
p4_ödex
 = 
mesh
.
	`gë_thúd_vîãx
–mesh.
m_edges
[
edge_ödex
][0], mesh.m_edges[edge_ödex][1], mesh.
	`gë_åüngÀ
(
åi1
) );

72 
size_t
 
adj_edges
[4] = { 
mesh
.
	`gë_edge_ödex
–
p1_ödex
, 
p3_ödex
 ),

73 
mesh
.
	`gë_edge_ödex
–
p2_ödex
, 
p3_ödex
 ),

74 
mesh
.
	`gë_edge_ödex
–
p1_ödex
, 
p4_ödex
 ),

75 
mesh
.
	`gë_edge_ödex
–
p2_ödex
, 
p4_ödex
 ) };

77 
size_t
 
q_ödi˚s
[4];

79  
size_t
 
i
 = 0; i < 4; ++i )

81 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
adj_åis
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[ 
adj_edges
[
i
] ];

82 i‡–
adj_åis
.
	`size
() != 2 )

85 
√w_poöt
 = 0.5 * ( 
posôi⁄s
[ 
p1_ödex
 ] +Öosôi⁄s[ 
p2_ödex
 ] );

89 i‡–
adj_åis
[0] =
åi0
 ||ádj_åis[0] =
åi1
 )

91 
q_ödi˚s
[
i
] = 
mesh
.
	`gë_thúd_vîãx
–mesh.
m_edges
[ 
adj_edges
[i] ][0], mesh.m_edges[ádj_edges[i] ][1], mesh.
	`gë_åüngÀ
–
adj_åis
[1] ) );

95 
q_ödi˚s
[
i
] = 
mesh
.
	`gë_thúd_vîãx
–mesh.
m_edges
[ 
adj_edges
[i] ][0], mesh.m_edges[ádj_edges[i] ][1], mesh.
	`gë_åüngÀ
–
adj_åis
[0] ) );

99 
√w_poöt
 = 8. * 
posôi⁄s
[ 
p1_ödex
 ] + 8. *Öosôi⁄s[ 
p2_ödex
 ] + 2. *Öosôi⁄s[ 
p3_ödex
 ] + 2. *Öosôi⁄s[ 
p4_ödex
 ]

100 - 
posôi⁄s
[ 
q_ödi˚s
[0] ] -Öositions[ q_indices[1] ] -Öositions[ q_indices[2] ] -Öositions[ q_indices[3] ];

102 
√w_poöt
 *= 0.0625;

104 
	}
}

113 
boﬁ
 
	gModifõdBuâîÊyScheme
::
gë_adja˚¡_vîti˚s_‹dîed
–
size_t
 
vîãx_ödex
,

114 
size_t
 
fú°_edge
,

115 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
,

116 
°d
::
ve˘‹
<
size_t
>& 
adja˚¡_vîti˚s
 )

118 
adja˚¡_vîti˚s
.
˛ór
();

120 
size_t
 
	gcuºít_edge
 = 
fú°_edge
;

121 
size_t
 
	gcuºít_åüngÀ
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
cuºít_edge
][0];

123 i‡–
	gmesh
.
	gm_edge_to_åüngÀ_m≠
[
cuºít_edge
].
size
() != 2 )

126  
Ál£
;

129 
size_t
 
	gcou¡
 = 0;

130  
	gcou¡
++ < 
	gmesh
.
	gm_vîãx_to_edge_m≠
[
vîãx_ödex
].
size
() + 1 )

133 
	gi
 = 0;

134  ; 
	gi
 < 3; ++i )

136 
size_t
 
	gedge_ödex
 = 
mesh
.
m_åüngÀ_to_edge_m≠
[
cuºít_åüngÀ
][
i
];

137 i‡–
	gedge_ödex
 =
cuºít_edge
 ) { ; }

139 i‡–
	gmesh
.
	gm_edge_to_åüngÀ_m≠
[
cuºít_edge
].
size
() != 2 )

142  
Ál£
;

145 c⁄° 
	gVec2°
& 
	gedge_i
 = 
mesh
.
m_edges
[
edge_ödex
];

146 i‡–(
	gedge_i
[0] =
vîãx_ödex
 || 
edge_i
[1] =vîãx_ödexË&& 
edge_ödex
 !
cuºít_edge
 )

150 i‡–
edge_i
[0] !
vîãx_ödex
 )

152 
as£π
–
edge_i
[1] =
vîãx_ödex
 );

153 
	gadja˚¡_vîti˚s
.
push_back
–
edge_i
[0] );

157 
as£π
–
edge_i
[1] !
vîãx_ödex
 );

158 
	gadja˚¡_vîti˚s
.
push_back
–
edge_i
[1] );

162 
	gcuºít_edge
 = 
edge_ödex
;

167 
as£π
–
i
 < 3 );

169 i‡–
	gcuºít_edge
 =
fú°_edge
 )

172  
åue
;

177 i‡–
	gmesh
.
	gm_edge_to_åüngÀ_m≠
[
cuºít_edge
].
size
() != 2 )

179  
Ál£
;

182 i‡–
	gmesh
.
	gm_edge_to_åüngÀ_m≠
[
cuºít_edge
][0] =
cuºít_åüngÀ
 )

184 
cuºít_åüngÀ
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
cuºít_edge
][1];

188 
as£π
–
mesh
.
m_edge_to_åüngÀ_m≠
[
cuºít_edge
][1] =
cuºít_åüngÀ
 );

189 
	gcuºít_åüngÀ
 = 
mesh
.
m_edge_to_åüngÀ_m≠
[
cuºít_edge
][0];

193 
as£π
( !"get_adjacent_vertices_ordered: didÇot completeÜoop" );

194  
	gÁl£
;

206 
	gModifõdBuâîÊyScheme
::
gë_c€fficõ¡s
–
size_t
 
vîãx_degªe
, 
°d
::
ve˘‹
<>& 
c€fficõ¡s
 )

209 
c€fficõ¡s
.
ªsize
–
vîãx_degªe
 );

211 i‡–
	gvîãx_degªe
 >= 5 )

213  
i
 = 0; 
	gi
 < 
	gvîãx_degªe
; ++i )

215 
	gK
 = 
°©ic_ˇ°
<>(
vîãx_degªe
);

216 
	gc€fficõ¡s
[
i
] = ( 0.25 + 
cos
–2.0 * 
M_PI
 * i / 
K
 ) + 0.5 * cos( 4.0 * M_PI * i / K ) ) / K;

219 i‡–
	gvîãx_degªe
 == 3 )

221 
c€fficõ¡s
[0] = 5.0/12.0;

222 
	gc€fficõ¡s
[1] = -1.0/12.0;

223 
	gc€fficõ¡s
[2] = -1.0/12.0;

225 i‡–
	gvîãx_degªe
 == 4 )

227 
c€fficõ¡s
[0] = 3.0/8.0;

228 
	gc€fficõ¡s
[1] = 0.0;

229 
	gc€fficõ¡s
[2] = -1.0/8.0;

230 
	gc€fficõ¡s
[3] = 0.0;

234 
as£π
(
Ál£
);

245 
	gModifõdBuâîÊyScheme
::
	$gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 )

247 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
surÁ˚
.
m_mesh
;

248 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 = 
surÁ˚
.
	`gë_posôi⁄s
();

249 
size_t
 
p1_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][0];

250 
size_t
 
p2_ödex
 = 
mesh
.
m_edges
[
edge_ödex
][1];

252 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
p1_edges
 = 
mesh
.
m_vîãx_to_edge_m≠
[
p1_ödex
];

253 
size_t
 
p1_degªe
 = 
p1_edges
.
	`size
();

254 
°d
::
ve˘‹
<
size_t
> 
p1_adja˚¡_vîti˚s
;

255 
boﬁ
 
loˇŒy_m™ifﬁd
 = 
	`gë_adja˚¡_vîti˚s_‹dîed
–
p1_ödex
, 
edge_ödex
, 
mesh
, 
p1_adja˚¡_vîti˚s
 );

256 i‡–!
loˇŒy_m™ifﬁd
 )

258 
√w_poöt
 = 0.5 * ( 
posôi⁄s
[
p1_ödex
] +Öosôi⁄s[
p2_ödex
] );

261 
	`as£π
–
p1_adja˚¡_vîti˚s
.
	`size
(Ë=
p1_degªe
 );

263 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
p2_edges
 = 
mesh
.
m_vîãx_to_edge_m≠
[
p2_ödex
];

264 
size_t
 
p2_degªe
 = 
p2_edges
.
	`size
();

265 
°d
::
ve˘‹
<
size_t
> 
p2_adja˚¡_vîti˚s
;

266 
loˇŒy_m™ifﬁd
 = 
	`gë_adja˚¡_vîti˚s_‹dîed
–
p2_ödex
, 
edge_ödex
, 
mesh
, 
p2_adja˚¡_vîti˚s
 );

267 i‡–!
loˇŒy_m™ifﬁd
 )

269 
√w_poöt
 = 0.5 * ( 
posôi⁄s
[
p1_ödex
] +Öosôi⁄s[
p2_ödex
] );

272 
	`as£π
–
p2_adja˚¡_vîti˚s
.
	`size
(Ë=
p2_degªe
 );

274 i‡–
p1_degªe
 =6 && 
p2_degªe
 == 6 )

277 
√w_poöt
 = 0.5 * ( 
posôi⁄s
[
p1_ödex
] +Öosôi⁄s[
p2_ödex
] );

278 
√w_poöt
 +0.125 * ( 
posôi⁄s
[ 
p1_adja˚¡_vîti˚s
[1] ] +Öositions[Ö1_adjacent_vertices[5] ] );

279 
√w_poöt
 +-0.0625 * ( 
posôi⁄s
[ 
p1_adja˚¡_vîti˚s
[2] ] +Öositions[Ö1_adjacent_vertices[4] ] );

280 
√w_poöt
 +-0.0625 * ( 
posôi⁄s
[ 
p2_adja˚¡_vîti˚s
[2] ] +Öositions[Ö2_adjacent_vertices[4] ] );

286 
°d
::
ve˘‹
<> 
p1_√ighbour_c€fficõ¡s
;

287 
	`gë_c€fficõ¡s
–
p1_degªe
, 
p1_√ighbour_c€fficõ¡s
 );

288 
	`as£π
–
p1_√ighbour_c€fficõ¡s
.
	`size
(Ë=
p1_adja˚¡_vîti˚s
.size() );

290 
°d
::
ve˘‹
<> 
p2_√ighbour_c€fficõ¡s
;

291 
	`gë_c€fficõ¡s
–
p2_degªe
, 
p2_√ighbour_c€fficõ¡s
 );

292 
	`as£π
–
p2_√ighbour_c€fficõ¡s
.
	`size
(Ë=
p2_adja˚¡_vîti˚s
.size() );

294 i‡–
p1_degªe
 !6 && 
p2_degªe
 == 6 )

296 
√w_poöt
 = 0.75 * 
posôi⁄s
[
p1_ödex
];

297  
size_t
 
i
 = 0; i < 
p1_degªe
; ++i )

299 
√w_poöt
 +
p1_√ighbour_c€fficõ¡s
[
i
] * 
posôi⁄s
[ 
p1_adja˚¡_vîti˚s
[i] ];

304 i‡–
p1_degªe
 =6 && 
p2_degªe
 != 6 )

306 
√w_poöt
 = 0.75 * 
posôi⁄s
[
p2_ödex
];

307  
size_t
 
i
 = 0; i < 
p2_degªe
; ++i )

309 
√w_poöt
 +
p2_√ighbour_c€fficõ¡s
[
i
] * 
posôi⁄s
[ 
p2_adja˚¡_vîti˚s
[i] ];

317 
Vec3d
 
p1_c⁄åibuti⁄
 = 0.75 * 
posôi⁄s
[
p1_ödex
];

318  
size_t
 
i
 = 0; i < 
p1_degªe
; ++i )

320 
p1_c⁄åibuti⁄
 +
p1_√ighbour_c€fficõ¡s
[
i
] * 
posôi⁄s
[ 
p1_adja˚¡_vîti˚s
[i] ];

323 
Vec3d
 
p2_c⁄åibuti⁄
 = 0.75 * 
posôi⁄s
[
p2_ödex
];

324  
size_t
 
i
 = 0; i < 
p2_degªe
; ++i )

326 
p2_c⁄åibuti⁄
 +
p2_√ighbour_c€fficõ¡s
[
i
] * 
posôi⁄s
[ 
p2_adja˚¡_vîti˚s
[i] ];

329 
√w_poöt
 = 0.5 * ( 
p1_c⁄åibuti⁄
 + 
p2_c⁄åibuti⁄
 );

333 
	`as£π
( !"ShouldÇot get here" );

335 
	}
}

344 
	gQuadøticEº‹MöScheme
::
	$gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 )

346 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
 = 
surÁ˚
.
m_mesh
;

347 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 = 
surÁ˚
.
	`gë_posôi⁄s
();

349 
size_t
 
v0
 = 
mesh
.
m_edges
[
edge_ödex
][0];

350 
size_t
 
v1
 = 
mesh
.
m_edges
[
edge_ödex
][1];

352 
M©33d
 
Q
;

353 
	`zîo
(
Q
);

354 
Vec3d
 
b
;

355 
	`zîo
(
b
);

357 
°d
::
ve˘‹
<
size_t
> 
åüngÀs_cou¡ed
;

359 
M©
<1,1,> 
c⁄°™t_di°
;

360 
c⁄°™t_di°
.
a
[0] = 0;

362  
size_t
 
i
 = 0; i < 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
v0
].
	`size
(); ++i )

364 
size_t
 
t
 = 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
v0
][
i
];

365 c⁄° 
Vec3d
& 
∂™e_n‹mÆ
 = 
surÁ˚
.
	`gë_åüngÀ_n‹mÆ
–
t
 );

366 
Q
 +
	`ouãr
–
∂™e_n‹mÆ
,Ölane_normal );

367 
b
 +
	`dŸ
–
posôi⁄s
[
v0
], 
∂™e_n‹mÆ
 ) *Ölane_normal;

368 
c⁄°™t_di°
.
a
[0] +
	`dŸ
–
∂™e_n‹mÆ
, 
posôi⁄s
[
v0
] ) * dot(Ölane_normal,Öositions[v0] );

369 
åüngÀs_cou¡ed
.
	`push_back
(
t
);

372  
size_t
 
i
 = 0; i < 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
v1
].
	`size
(); ++i )

374 
size_t
 
t
 = 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
v1
][
i
];

376 
boﬁ
 
Æªady_cou¡ed
 = 
Ál£
;

377  
size_t
 
j
 = 0; j < 
åüngÀs_cou¡ed
.
	`size
(); ++j )

379 i‡–
t
 =
åüngÀs_cou¡ed
[
j
] )

381 
Æªady_cou¡ed
 = 
åue
;

385 i‡–!
Æªady_cou¡ed
 )

387 c⁄° 
Vec3d
& 
∂™e_n‹mÆ
 = 
surÁ˚
.
	`gë_åüngÀ_n‹mÆ
–
t
 );

388 
Q
 +
	`ouãr
–
∂™e_n‹mÆ
,Ölane_normal );

389 
b
 +
	`dŸ
–
posôi⁄s
[
v1
], 
∂™e_n‹mÆ
 ) *Ölane_normal;

390 
c⁄°™t_di°
.
a
[0] +
	`dŸ
–
∂™e_n‹mÆ
, 
posôi⁄s
[
v1
] ) * dot(Ölane_normal,Öositions[v1] );

395 
Vec3d
 
n‹mÆ
 = 0.5 * (
surÁ˚
.
	`gë_vîãx_n‹mÆ
(
v0
Ë+ surÁ˚.gë_vîãx_n‹mÆ(
v1
));

396 
	`n‹mÆize
(
n‹mÆ
);

398 
M©
<3,1,> 
n
;

399 
	`n
(0,0Ë
n‹mÆ
[0];

400 
	`n
(1,0Ë
n‹mÆ
[1];

401 
	`n
(2,0Ë
n‹mÆ
[2];

404 
Vec3d
 
midpoöt
 = 0.5 * (
posôi⁄s
[
v0
] +Öosôi⁄s[
v1
]);

405 
M©
<3,1,> 
m
;

406 
	`m
(0,0Ë
midpoöt
[0];

407 
	`m
(1,0Ë
midpoöt
[1];

408 
	`m
(2,0Ë
midpoöt
[2];

410 
M©
<3,1,> 
d
;

411 
	`d
(0,0Ë
b
[0];

412 
	`d
(1,0Ë
b
[1];

413 
	`d
(2,0Ë
b
[2];

415 
LHS
 = 2.0 * (
n
.
	`å™•o£
()*
Q
*n).
a
[0];

416 
RHS
 = ( 2.0 * (
n
.
	`å™•o£
()*
d
Ë- (n.å™•o£()*
Q
*
m
Ë- (m.å™•o£()*Q*nË).
a
[0];

418 
a
;

419 i‡–
	`Ábs
(
LHS
) > 1e-10 )

421 
a
 = 
RHS
 / 
LHS
;

425 
a
 = 0.0;

428 
M©
<3,1,> 
v
 = 
m
 + (
a
 * 
n
);

430 
v_îr‹
 = (
v
.
	`å™•o£
(Ë* 
Q
 * v - 2.0 * (v.å™•o£(Ë* 
d
Ë+ 
c⁄°™t_di°
).
a
[0];

431 
m_îr‹
 = (
m
.
	`å™•o£
(Ë* 
Q
 * m - 2.0 * (m.å™•o£(Ë* 
d
Ë+ 
c⁄°™t_di°
).
a
[0];

435 i‡–
surÁ˚
.
m_vîbo£
 )

437 
°d
::
cout
 << "a: " << 
a
 << std::
ídl
;

438 
°d
::
cout
 << "îr‹áàv: " << 
v_îr‹
 << std::
ídl
;

439 
°d
::
cout
 << "îr‹áàmidpoöt: " << 
m_îr‹
 << std::
ídl
;

442 
√w_poöt
 = 
	`Vec3d
–
v
.
a
[0], v.a[1], v.a[2] );

444 
	}
}

	@eltopo3d/subdivisionscheme.h

10 #i‚de‡
EL_TOPO_SUBDIVISIONSCHEME_H


11 
	#EL_TOPO_SUBDIVISIONSCHEME_H


	)

17 
	~<vec.h
>

23 
˛ass
 
	gSurfTøck
;

24 
˛ass
 
	gN⁄De°ru˘iveTriMesh
;

36 ˛as†
	cSubdivisi⁄Scheme


38 
	mpublic
:

39 
vútuÆ
 ~
	$Subdivisi⁄Scheme
() {}

40 
vútuÆ
 
	`gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 ) = 0;

41 
	}
};

49 ˛as†
	cMidpoötScheme
 : 
public
 
Subdivisi⁄Scheme


51 
public
:

52 
gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 );

61 ˛as†
	cBuâîÊyScheme
 : 
public
 
Subdivisi⁄Scheme


63 
public
:

64 
gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 );

74 ˛as†
	cModifõdBuâîÊyScheme
 : 
public
 
Subdivisi⁄Scheme


76 
boﬁ
 
gë_adja˚¡_vîti˚s_‹dîed
–
size_t
 
vîãx_ödex
,

77 
size_t
 
fú°_edge
,

78 c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
,

79 
°d
::
ve˘‹
<
size_t
>& 
adja˚¡_vîti˚s
 );

81 
gë_c€fficõ¡s
–
size_t
 
vîãx_degªe
, 
°d
::
ve˘‹
<>& 
c€fficõ¡s
 );

83 
	mpublic
:

84 
gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 );

95 ˛as†
	cQuadøticEº‹MöScheme
 : 
public
 
Subdivisi⁄Scheme


97 
public
:

98 
gíî©e_√w_midpoöt
–
size_t
 
edge_ödex
, c⁄° 
SurfTøck
& 
surÁ˚
, 
Vec3d
& 
√w_poöt
 );

	@eltopo3d/surftrack.cpp

17 
	~<sur·øck.h
>

19 
	~<¨øy3.h
>

20 
	~<brﬂdpha£.h
>

21 
	~<ˇs£π
>

22 
	~<ccd_wøµî.h
>

23 
	~<cﬁlisi⁄pùñöe.h
>

24 
	~<cﬁlisi⁄quîõs.h
>

25 
	~<edgeÊù≥r.h
>

26 
	~<im∑˘z⁄esﬁvî.h
>

27 
	~<œ∑ck_wøµî.h
>

28 
	~<n⁄de°ru˘ivërimesh.h
>

29 
	~<queue
>

30 
	~<run°©s.h
>

31 
	~<subdivisi⁄scheme.h
>

32 
	~<°dio.h
>

33 
	~<åüngÀquÆôy.h
>

34 
	~<vec.h
>

35 
	~<ve˘‹
>

36 
	~<wÆl˛ocktime.h
>

43 c⁄° 
	gG_EIGENVALUE_RANK_RATIO
 = 0.03;

63 
	gSurfTøckInôüliz©i⁄P¨amëîs
::
	$SurfTøckInôüliz©i⁄P¨amëîs
() :

64 
	`m_¥oximôy_ïsû⁄
( 1e-4 ),

65 
	`m_‰i˘i⁄_c€fficõ¡
( 0.0 ),

66 
	`m_mö_åüngÀ_¨ó
( 1e-7 ),

67 
	`m_im¥ove_cﬁlisi⁄_ïsû⁄
( 2e-6 ),

68 
	`m_u£_‰a˘i⁄
–
Ál£
 ),

69 
	`m_mö_edge_Àngth
–
UNINITIALIZED_DOUBLE
 ),

70 
	`m_max_edge_Àngth
–
UNINITIALIZED_DOUBLE
 ),

71 
	`m_max_vﬁume_ch™ge
–
UNINITIALIZED_DOUBLE
 ),

72 
	`m_mö_åüngÀ_™gÀ
( 0.0 ),

73 
	`m_max_åüngÀ_™gÀ
( 180.0 ),

74 
	`m_u£_curv©uª_whí_•lôtög
–
Ál£
 ),

75 
	`m_u£_curv©uª_whí_cﬁœpsög
–
Ál£
 ),

76 
	`m_mö_curv©uª_mu…ùlõr
( 1.0 ),

77 
	`m_max_curv©uª_mu…ùlõr
( 1.0 ),

78 
	`m_Ælow_vîãx_movemít
–
åue
 ),

79 
	`m_edge_Êù_mö_Àngth_ch™ge
( 1e-8 ),

80 
	`m_mîge_¥oximôy_ïsû⁄
( 1e-5 ),

81 
	`m_subdivisi⁄_scheme
(
NULL
),

82 
	`m_cﬁlisi⁄_ß„ty
(
åue
),

83 
	`m_Ælow_t›ﬁogy_ch™ges
(
åue
),

84 
	`m_Ælow_n⁄_m™ifﬁd
(
åue
),

85 
	$m_≥rf‹m_im¥ovemít
(
åue
)

86 {
	}
}

95 
	gSurfTøck
::
SurfTøck
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
vs
,

96 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
ts
,

97 c⁄° 
°d
::
ve˘‹
<>& 
mas£s
,

98 c⁄° 
SurfTøckInôüliz©i⁄P¨amëîs
& 
öôül_∑ømëîs
 ) :

99 
Dy«micSurÁ˚
(
vs
,

100 
ts
,

101 
mas£s
,

102 
öôül_∑ømëîs
.
m_¥oximôy_ïsû⁄
,

103 
öôül_∑ømëîs
.
m_‰i˘i⁄_c€fficõ¡
,

104 
öôül_∑ømëîs
.
m_cﬁlisi⁄_ß„ty
 ),

105 
m_cﬁœp£r
–*
this
, 
öôül_∑ømëîs
.
m_u£_curv©uª_whí_cﬁœpsög
, inôül_∑ømëîs.
m_mö_curv©uª_mu…ùlõr
 ),

106 
m_•lôãr
–*
this
, 
öôül_∑ømëîs
.
m_u£_curv©uª_whí_•lôtög
, inôül_∑ømëîs.
m_max_curv©uª_mu…ùlõr
 ),

107 
m_Êù≥r
–*
this
, 
öôül_∑ømëîs
.
m_edge_Êù_mö_Àngth_ch™ge
 ),

108 
m_smoŸhî
–*
this
 ),

109 
m_mîgî
–*
this
 ),

110 
m_pöchî
–*
this
 ),

111 
m_im¥ove_cﬁlisi⁄_ïsû⁄
–
öôül_∑ømëîs
.m_improve_collision_epsilon ),

112 
m_edge_Êù_mö_Àngth_ch™ge
–
öôül_∑ømëîs
.m_edge_flip_min_length_change ),

113 
m_max_vﬁume_ch™ge
–
UNINITIALIZED_DOUBLE
 ),

114 
m_mö_edge_Àngth
–
UNINITIALIZED_DOUBLE
 ),

115 
m_max_edge_Àngth
–
UNINITIALIZED_DOUBLE
 ),

116 
m_mîge_¥oximôy_ïsû⁄
–
öôül_∑ømëîs
.m_merge_proximity_epsilon ),

117 
m_mö_åüngÀ_¨ó
–
öôül_∑ømëîs
.m_min_triangle_area ),

118 
m_mö_åüngÀ_™gÀ
–
öôül_∑ømëîs
.m_min_triangle_angle ),

119 
m_max_åüngÀ_™gÀ
–
öôül_∑ømëîs
.m_max_triangle_angle ),

120 
m_subdivisi⁄_scheme
–
öôül_∑ømëîs
.m_subdivision_scheme ),

121 
should_dñëe_subdivisi⁄_scheme_obje˘
–
m_subdivisi⁄_scheme
 =
NULL
 ? 
åue
 : 
Ál£
 ),

122 
m_dúty_åüngÀs
(0),

123 
m_Ælow_t›ﬁogy_ch™ges
–
öôül_∑ømëîs
.m_allow_topology_changes ),

124 
m_Ælow_n⁄_m™ifﬁd
–
öôül_∑ømëîs
.m_allow_non_manifold ),

125 
m_≥rf‹m_im¥ovemít
–
öôül_∑ømëîs
.m_perform_improvement ),

126 
m_Ælow_vîãx_movemít
–
öôül_∑ømëîs
.m_allow_vertex_movement ),

127 
m_vîãx_ch™ge_hi°‹y
(),

128 
	$m_åüngÀ_ch™ge_hi°‹y
()

131 i‡–
m_vîbo£
 )

133 
°d
::
cout
 << " =======SurfTøck =======" << std::
ídl
;

134 
°d
::
cout
 << "m_Ælow_t›ﬁogy_ch™ges: " << 
m_Ælow_t›ﬁogy_ch™ges
 << std::
ídl
;

135 
°d
::
cout
 << "m_≥rf‹m_im¥ovemít: " << 
m_≥rf‹m_im¥ovemít
 << std::
ídl
;

136 
°d
::
cout
 << "m_mö_åüngÀ_¨ó: " << 
m_mö_åüngÀ_¨ó
 << std::
ídl
;

137 
°d
::
cout
 << "öôül_∑ømëîs.m_u£_‰a˘i⁄: " << 
öôül_∑ømëîs
.
m_u£_‰a˘i⁄
 << std::
ídl
;

140 i‡–
m_cﬁlisi⁄_ß„ty
 )

142 
	`ªbuûd_°©ic_brﬂd_pha£
();

145 
	`as£π
–
öôül_∑ømëîs
.
m_mö_edge_Àngth
 !
UNINITIALIZED_DOUBLE
 );

146 
	`as£π
–
öôül_∑ømëîs
.
m_max_edge_Àngth
 !
UNINITIALIZED_DOUBLE
 );

147 
	`as£π
–
öôül_∑ømëîs
.
m_max_vﬁume_ch™ge
 !
UNINITIALIZED_DOUBLE
 );

149 i‡–
öôül_∑ømëîs
.
m_u£_‰a˘i⁄
 )

151 
avg_Àngth
 = 
Dy«micSurÁ˚
::
	`gë_avîage_n⁄_sﬁid_edge_Àngth
();

152 
m_cﬁœp£r
.
m_mö_edge_Àngth
 = 
öôül_∑ømëîs
.m_mö_edge_Àngth * 
avg_Àngth
;

153 
m_•lôãr
.
m_max_edge_Àngth
 = 
öôül_∑ømëîs
.m_max_edge_Àngth * 
avg_Àngth
;

154 
m_mö_edge_Àngth
 = 
öôül_∑ømëîs
.m_mö_edge_Àngth * 
avg_Àngth
;

155 
m_max_edge_Àngth
 = 
öôül_∑ømëîs
.m_max_edge_Àngth * 
avg_Àngth
;

156 
m_max_vﬁume_ch™ge
 = 
öôül_∑ømëîs
.m_max_vﬁume_ch™gê* 
avg_Àngth
 *ávg_length *ávg_length;

160 
m_cﬁœp£r
.
m_mö_edge_Àngth
 = 
öôül_∑ømëîs
.m_min_edge_length;

161 
m_•lôãr
.
m_max_edge_Àngth
 = 
öôül_∑ømëîs
.m_max_edge_length;

162 
m_mö_edge_Àngth
 = 
öôül_∑ømëîs
.m_min_edge_length;

163 
m_max_edge_Àngth
 = 
öôül_∑ømëîs
.m_max_edge_length;

164 
m_max_vﬁume_ch™ge
 = 
öôül_∑ømëîs
.m_max_volume_change;

167 i‡–
m_vîbo£
 )

169 
°d
::
cout
 << "m_mö_edge_Àngth: " << 
m_mö_edge_Àngth
 << std::
ídl
;

170 
°d
::
cout
 << "m_max_edge_Àngth: " << 
m_max_edge_Àngth
 << std::
ídl
;

171 
°d
::
cout
 << "m_max_vﬁume_ch™ge: " << 
m_max_vﬁume_ch™ge
 << std::
ídl
;

174 i‡–
m_subdivisi⁄_scheme
 =
NULL
 )

176 
m_subdivisi⁄_scheme
 = 
√w
 
	`MidpoötScheme
();

177 
should_dñëe_subdivisi⁄_scheme_obje˘
 = 
åue
;

181 
should_dñëe_subdivisi⁄_scheme_obje˘
 = 
Ál£
;

184 i‡–
Ál£
 =
m_Ælow_t›ﬁogy_ch™ges
 )

186 i‡–
m_Ælow_n⁄_m™ifﬁd
 )

188 
°d
::
˚º
 << "WARNING: Topology changes disallowed, butÇon-manifoldállowed. Must disallowÇon-manifold surfaces ";

189 
°d
::
˚º
 << "i‡t›ﬁogy ch™ge†¨êdißŒowed. SëtögáŒow_n⁄_m™ifﬁdÅÿÁl£." << std::
ídl
;

190 
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

195 
	}
}

203 
	gSurfTøck
::~
	$SurfTøck
()

205 i‡–
should_dñëe_subdivisi⁄_scheme_obje˘
 )

207 
dñëe
 
m_subdivisi⁄_scheme
;

209 
	}
}

218 
size_t
 
	gSurfTøck
::
	$add_åüngÀ
–c⁄° 
Vec3°
& 
t
 )

220 
size_t
 
√w_åüngÀ_ödex
 = 
m_mesh
.
	`add_åüngÀ
–
t
 );

222 
	`as£π
–
t
[0] < 
	`gë_num_vîti˚s
() );

223 
	`as£π
–
t
[1] < 
	`gë_num_vîti˚s
() );

224 
	`as£π
–
t
[2] < 
	`gë_num_vîti˚s
() );

226 i‡–
m_cﬁlisi⁄_ß„ty
 )

229 
Vec3d
 
low
, 
high
;

230 
	`åüngÀ_°©ic_bounds
–
√w_åüngÀ_ödex
, 
low
, 
high
 );

231 
m_brﬂd_pha£
->
	`add_åüngÀ
–
√w_åüngÀ_ödex
, 
low
, 
high
, 
	`åüngÀ_is_sﬁid
(new_triangle_index) );

234 
size_t
 
√w_edge_ödex
 = 
m_mesh
.
	`gë_edge_ödex
–
t
[0],Å[1] );

235 
	`as£π
–
√w_edge_ödex
 !
m_mesh
.
m_edges
.
	`size
() );

236 
	`edge_°©ic_bounds
–
√w_edge_ödex
, 
low
, 
high
 );

237 
m_brﬂd_pha£
->
	`add_edge
–
√w_edge_ödex
, 
low
, 
high
, 
	`edge_is_sﬁid
(Çew_edge_index ) );

239 
√w_edge_ödex
 = 
m_mesh
.
	`gë_edge_ödex
–
t
[1],Å[2] );

240 
	`as£π
–
√w_edge_ödex
 !
m_mesh
.
m_edges
.
	`size
() );

241 
	`edge_°©ic_bounds
–
√w_edge_ödex
, 
low
, 
high
 );

242 
m_brﬂd_pha£
->
	`add_edge
–
√w_edge_ödex
, 
low
, 
high
, 
	`edge_is_sﬁid
(Çew_edge_index ) );

244 
√w_edge_ödex
 = 
m_mesh
.
	`gë_edge_ödex
–
t
[2],Å[0] );

245 
	`as£π
–
√w_edge_ödex
 !
m_mesh
.
m_edges
.
	`size
() );

246 
	`edge_°©ic_bounds
–
√w_edge_ödex
, 
low
, 
high
 );

247 
m_brﬂd_pha£
->
	`add_edge
–
√w_edge_ödex
, 
low
, 
high
, 
	`edge_is_sﬁid
(Çew_edge_index ) );

250 
m_åüngÀ_ch™ge_hi°‹y
.
	`push_back
–
	`TrüngÀUpd©eEvít
–
TrüngÀUpd©eEvít
::
TRIANGLE_ADD
, 
√w_åüngÀ_ödex
, 
t
 ) );

252  
√w_åüngÀ_ödex
;

253 
	}
}

262 
	gSurfTøck
::
	$ªmove_åüngÀ
(
size_t
 
t
)

264 
m_mesh
.
	`add_vîãx
–
t
 );

265 i‡–
m_cﬁlisi⁄_ß„ty
 )

267 
m_brﬂd_pha£
->
	`ªmove_åüngÀ
–
t
 );

270 
m_åüngÀ_ch™ge_hi°‹y
.
	`push_back
–
	`TrüngÀUpd©eEvít
–
TrüngÀUpd©eEvít
::
TRIANGLE_REMOVE
, 
t
, 
	`Vec3°
(0) ) );

272 
	}
}

280 
size_t
 
	gSurfTøck
::
	$add_vîãx
–c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
, 
√w_vîãx_mass
 )

282 
size_t
 
√w_vîãx_ödex
 = 
m_mesh
.
	`add_vîãx
( );

284 if–
√w_vîãx_ödex
 > 
	`gë_num_vîti˚s
() - 1 )

286 
pm_posôi⁄s
.
	`ªsize
–
√w_vîãx_ödex
 + 1 );

287 
pm_√wposôi⁄s
.
	`ªsize
–
√w_vîãx_ödex
 + 1 );

288 
m_mas£s
.
	`ªsize
–
√w_vîãx_ödex
 + 1 );

291 
pm_posôi⁄s
[
√w_vîãx_ödex
] = 
√w_vîãx_posôi⁄
;

292 
pm_√wposôi⁄s
[
√w_vîãx_ödex
] = 
√w_vîãx_posôi⁄
;

293 
m_mas£s
[
√w_vîãx_ödex
] = 
√w_vîãx_mass
;

295 i‡–
m_cﬁlisi⁄_ß„ty
 )

297 
m_brﬂd_pha£
->
	`add_vîãx
–
√w_vîãx_ödex
, 
	`gë_posôi⁄
“ew_vîãx_ödex), gë_posôi⁄“ew_vîãx_ödex), 
	`vîãx_is_sﬁid
(new_vertex_index) );

300  
√w_vîãx_ödex
;

301 
	}
}

310 
	gSurfTøck
::
	$ªmove_vîãx
–
size_t
 
vîãx_ödex
 )

312 
m_mesh
.
	`ªmove_vîãx
–
vîãx_ödex
 );

314 i‡–
m_cﬁlisi⁄_ß„ty
 )

316 
m_brﬂd_pha£
->
	`ªmove_vîãx
–
vîãx_ödex
 );

319 
m_vîãx_ch™ge_hi°‹y
.
	`push_back
–
	`VîãxUpd©eEvít
–
VîãxUpd©eEvít
::
VERTEX_REMOVE
, 
vîãx_ödex
, 
	`Vec2°
(0,0) ) );

321 
	}
}

330 
	gSurfTøck
::
	$de‰ag_mesh
( )

333 
°d
::
ve˘‹
<
Vec2°
> 
ﬁd_edges
 = 
m_mesh
.
m_edges
;

335 
Po°De‰agInfo
 
öfo
;

336 
öfo
.
m_de‰agged_vîãx_m≠
.
	`˛ór
();

343 
boﬁ
 
™y_dñëed
 = 
Ál£
;

344  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

346 i‡–
m_mesh
.
	`vîãx_is_dñëed
(
i
) )

348 
™y_dñëed
 = 
åue
;

353 i‡–!
™y_dñëed
 )

355  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

357 
öfo
.
m_de‰agged_vîãx_m≠
.
	`push_back
–
	`Vec2°
(
i
,i) );

366 
size_t
 
j
 = 0;

368 
°d
::
ve˘‹
<
Vec3°
> 
√w_åis
 = 
m_mesh
.
	`gë_åüngÀs
();

370  
size_t
 
i
 = 0; i < 
	`gë_num_vîti˚s
(); ++i )

372 i‡–!
m_mesh
.
	`vîãx_is_dñëed
(
i
) )

374 
pm_posôi⁄s
[
j
] =Öm_posôi⁄s[
i
];

375 
pm_√wposôi⁄s
[
j
] =Öm_√wposôi⁄s[
i
];

376 
m_mas£s
[
j
] = m_mas£s[
i
];

378 
öfo
.
m_de‰agged_vîãx_m≠
.
	`push_back
–
	`Vec2°
(
i
,
j
) );

383 
°d
::
ve˘‹
<
size_t
> 
öc_åis
 = 
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
];

385  
size_t
 
t
 = 0;Å < 
öc_åis
.
	`size
(); ++t )

387 
Vec3°
 
åüngÀ
 = 
m_mesh
.
	`gë_åüngÀ
–
öc_åis
[
t
] );

389 
	`as£π
–
åüngÀ
[0] =
i
 ||Åriangle[1] == i ||Åriangle[2] == i );

390 i‡–
åüngÀ
[0] =
i
 ) {ÅrüngÀ[0] = 
j
; }

391 i‡–
åüngÀ
[1] =
i
 ) {ÅrüngÀ[1] = 
j
; }

392 i‡–
åüngÀ
[2] =
i
 ) {ÅrüngÀ[2] = 
j
; }

394 
	`ªmove_åüngÀ
(
öc_åis
[
t
]);

395 
	`add_åüngÀ
(
åüngÀ
);

398 ++
j
;

402 
pm_posôi⁄s
.
	`ªsize
(
j
);

403 
pm_√wposôi⁄s
.
	`ªsize
(
j
);

404 
m_mas£s
.
	`ªsize
(
j
);

411 
m_mesh
.
	`£t_num_vîti˚s
–
	`gë_num_vîti˚s
() );

412 
m_mesh
.
	`˛ór_dñëed_åüngÀs
–&
öfo
.
m_de‰agged_åüngÀ_m≠
 );

419 
öfo
.
m_de‰agged_edge_m≠
.
	`˛ór
();

420 
öfo
.
m_de‰agged_edge_m≠
.
	`ªsize
–
ﬁd_edges
.
	`size
(), 
UNINITIALIZED_SIZE_T
 );

424  
size_t
 
i
 = 0; i < 
ﬁd_edges
.
	`size
(); ++i )

426  
v
 = 0; v < 2; ++v )

428 c⁄° 
size_t
 
ﬁd_v
 = 
ﬁd_edges
[
i
][
v
];

429 
size_t
 
√w_v
 = 
ﬁd_v
;

431  
size_t
 
j
 = 0; j < 
öfo
.
m_de‰agged_vîãx_m≠
.
	`size
(); ++j )

433 i‡–
öfo
.
m_de‰agged_vîãx_m≠
[
j
][0] =
ﬁd_v
 )

435 
√w_v
 = 
öfo
.
m_de‰agged_vîãx_m≠
[
j
][1];

436 
	`as£π
–!
m_mesh
.
	`vîãx_is_dñëed
(
√w_v
) );

441 
ﬁd_edges
[
i
][
v
] = 
√w_v
;

447  
i
 = 0; i < 
ﬁd_edges
.
	`size
(); ++i )

449 i‡–
ﬁd_edges
[
i
][0] == old_edges[i][1] )

454 
size_t
 
√w_edge_ödex
 = 
m_mesh
.
	`gë_edge_ödex
–
ﬁd_edges
[
i
][0], old_edges[i][1] );

457 i‡–
√w_edge_ödex
 =
m_mesh
.
m_edges
.
	`size
() )

462 
öfo
.
m_de‰agged_edge_m≠
[
i
] = 
√w_edge_ödex
;

464 
	`as£π
–
√w_edge_ödex
 < 
m_mesh
.
m_edges
.
	`size
() );

468 i‡–
ﬁd_edges
[
i
][0] !
m_mesh
.
m_edges
[
√w_edge_ödex
][0] )

470 
	`as£π
–
ﬁd_edges
[
i
][1] =
m_mesh
.
m_edges
[
√w_edge_ödex
][0] );

471 
	`as£π
–
ﬁd_edges
[
i
][0] =
m_mesh
.
m_edges
[
√w_edge_ödex
][1] );

473 
	`sw≠
–
m_mesh
.
m_edges
[
√w_edge_ödex
][0], m_mesh.m_edges[new_edge_index][1] );

475 
	`as£π
–
ﬁd_edges
[
i
][0] =
m_mesh
.
m_edges
[
√w_edge_ödex
][0] );

476 
	`as£π
–
ﬁd_edges
[
i
][1] =
m_mesh
.
m_edges
[
√w_edge_ödex
][1] );

481  
size_t
 
i
 = 0; i < 
m_ob£rvîs
.
	`size
(); ++i )

483 
m_ob£rvîs
[
i
]->
	`›î©i⁄Occuºed
(*
this
, 
öfo
);

486 i‡–
m_cﬁlisi⁄_ß„ty
 )

488 
	`ªbuûd_c⁄töuous_brﬂd_pha£
();

491 
	}
}

504 
	gSurfTøck
::
	$as£π_no_degíî©e_åüngÀs
( )

508  
size_t
 
i
 = 0; i < 
m_mesh
.
	`num_åüngÀs
(); ++i )

511 c⁄° 
Vec3°
& 
cuºít_åüngÀ
 = 
m_mesh
.
	`gë_åüngÀ
(
i
);

513 i‡–(
cuºít_åüngÀ
[0] == 0) && (current_triangle[1] == 0) && (current_triangle[2] == 0) )

523 
	`as£π
 ( !–(
cuºít_åüngÀ
[0] == current_triangle[1]) ||

524 (
cuºít_åüngÀ
[1] == current_triangle[2]) ||

525 (
cuºít_åüngÀ
[2] == current_triangle[0]) ) );

530 c⁄° 
Vec3°
& 
åi_edges
 = 
m_mesh
.
m_åüngÀ_to_edge_m≠
[
i
];

532 
boﬁ
 
Ê≠_found
 = 
Ál£
;

534  
e
 = 0;É < 3 && 
Ê≠_found
 =
Ál£
; ++e )

536 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
edge_åis
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[ 
åi_edges
[
e
] ];

538  
size_t
 
t
 = 0;Å < 
edge_åis
.
	`size
(); ++t )

540 i‡–
edge_åis
[
t
] =
i
 )

545 
size_t
 
Ÿhî_åüngÀ_ödex
 = 
edge_åis
[
t
];

546 c⁄° 
Vec3°
& 
Ÿhî_åüngÀ
 = 
m_mesh
.
	`gë_åüngÀ
–
Ÿhî_åüngÀ_ödex
 );

548 i‡–(
Ÿhî_åüngÀ
[0] == other_triangle[1]) ||

549 (
Ÿhî_åüngÀ
[1] == other_triangle[2]) ||

550 (
Ÿhî_åüngÀ
[2] == other_triangle[0]) )

552 
	`as£π
( !"repeated vertices" );

555 i‡–((
cuºít_åüngÀ
[0] =
Ÿhî_åüngÀ
[0]) || (current_triangle[0] == other_triangle[1]) || (current_triangle[0] == other_triangle[2])) &&

556 ((
cuºít_åüngÀ
[1] =
Ÿhî_åüngÀ
[0]) || (current_triangle[1] == other_triangle[1]) || (current_triangle[1] == other_triangle[2])) &&

557 ((
cuºít_åüngÀ
[2] =
Ÿhî_åüngÀ
[0]) || (current_triangle[2] == other_triangle[1]) || (current_triangle[2] == other_triangle[2])) )

560 
size_t
 
comm⁄_edge
 = 
åi_edges
[
e
];

561 i‡–
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
comm⁄_edge
][0], m_mesh.m_edges[comm⁄_edge][1], 
cuºít_åüngÀ
 ) ==

562 
m_mesh
.
	`‹õ¡ed
–m_mesh.
m_edges
[
comm⁄_edge
][0], m_mesh.m_edges[comm⁄_edge][1], 
Ÿhî_åüngÀ
 ) )

564 
	`as£π
–
Ál£
 );

568 
	`as£π
–
Ál£
 );

575 
	}
}

584 
	gSurfTøck
::
åim_n⁄_m™ifﬁd
–
°d
::
ve˘‹
<
size_t
>& 
åüngÀ_ödi˚s
 )

589 i‡–
Ál£
 =
m_Ælow_n⁄_m™ifﬁd
 )

593  
size_t
 
i
 = 0; 
	gi
 < 
	gm_mesh
.
	gm_edge_to_åüngÀ_m≠
.
size
(); ++i )

595 i‡–
	gm_mesh
.
edge_is_dñëed
(
i
) ) { ; }

596 
as£π
–
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
size
() == 1 ||

597 
m_mesh
.
m_edge_to_åüngÀ_m≠
[
i
].
size
() == 2 );

600 
	gåüngÀ_ödi˚s
.
˛ór
();

604  
size_t
 
	gj
 = 0; j < 
	gåüngÀ_ödi˚s
.
size
(); ++j )

606 
size_t
 
	gi
 = 
åüngÀ_ödi˚s
[
j
];

608 c⁄° 
	gVec3°
& 
	gcuºít_åüngÀ
 = 
m_mesh
.
gë_åüngÀ
(
i
);

610 i‡–(
	gcuºít_åüngÀ
[0] =0Ë&& (
cuºít_åüngÀ
[1] == 0) && (current_triangle[2] == 0) )

618 i‡–(
	gcuºít_åüngÀ
[0] =
cuºít_åüngÀ
[1])

619 || (
cuºít_åüngÀ
[1] == current_triangle[2])

620 || (
cuºít_åüngÀ
[2] == current_triangle[0]) )

623 i‡–
m_vîbo£
 ) { 
°d
::
cout
 << "dñëög degíî©êåüngÀ " << 
i
 << ": " << 
cuºít_åüngÀ
 << std::
ídl
; }

626 
ªmove_åüngÀ
–
i
 );

635 c⁄° 
	gVec3°
& 
	gåi_edges
 = 
m_mesh
.
m_åüngÀ_to_edge_m≠
[
i
];

637 
boﬁ
 
	gÊ≠_found
 = 
Ál£
;

639  
	ge
 = 0;É < 3 && 
	gÊ≠_found
 =
Ál£
; ++e )

641 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
edge_åis
 = 
m_mesh
.
m_edge_to_åüngÀ_m≠
[ 
åi_edges
[
e
] ];

643  
size_t
 
	gt
 = 0;Å < 
	gedge_åis
.
size
(); ++t )

645 i‡–
	gedge_åis
[
t
] =
i
 )

650 
size_t
 
	gŸhî_åüngÀ_ödex
 = 
edge_åis
[
t
];

651 c⁄° 
	gVec3°
& 
	gŸhî_åüngÀ
 = 
m_mesh
.
gë_åüngÀ
–
Ÿhî_åüngÀ_ödex
 );

653 i‡–(
	gŸhî_åüngÀ
[0] =
Ÿhî_åüngÀ
[1])

654 || (
Ÿhî_åüngÀ
[1] == other_triangle[2])

655 || (
Ÿhî_åüngÀ
[2] == other_triangle[0]) )

660 i‡–((
	gcuºít_åüngÀ
[0] =
Ÿhî_åüngÀ
[0]Ë|| (
cuºít_åüngÀ
[0] == other_triangle[1]) || (current_triangle[0] == other_triangle[2])) &&

661 ((
cuºít_åüngÀ
[1] =
Ÿhî_åüngÀ
[0]) || (current_triangle[1] == other_triangle[1]) || (current_triangle[1] == other_triangle[2])) &&

662 ((
cuºít_åüngÀ
[2] =
Ÿhî_åüngÀ
[0]) || (current_triangle[2] == other_triangle[1]) || (current_triangle[2] == other_triangle[2])) )

665 i‡–
Ál£
 =
m_Ælow_t›ﬁogy_ch™ges
 )

667 
°d
::
cout
 << "Ê≠ found whûêt›ﬁogy ch™ge†dißŒowed" << std::
ídl
;

668 
	g°d
::
cout
 << 
cuºít_åüngÀ
 << 
°d
::
ídl
;

669 
	g°d
::
cout
 << 
Ÿhî_åüngÀ
 << 
°d
::
ídl
;

670 
as£π
(0);

673 
size_t
 
	gcomm⁄_edge
 = 
åi_edges
[
e
];

674 i‡–
	gm_mesh
.
‹õ¡ed
–
m_mesh
.
m_edges
[
comm⁄_edge
][0], m_mesh.m_edges[comm⁄_edge][1], 
cuºít_åüngÀ
 ) ==

675 
m_mesh
.
‹õ¡ed
–m_mesh.
m_edges
[
comm⁄_edge
][0], m_mesh.m_edges[comm⁄_edge][1], 
Ÿhî_åüngÀ
 ) )

684 i‡–
	gm_vîbo£
 )

686 
	g°d
::
cout
 << "Ê≠:ÅrüngÀ†<< " << 
i
 << " [" << 
cuºít_åüngÀ
 <<

687 "]ánd " << 
edge_åis
[
t
] << " [" << 
Ÿhî_åüngÀ
 << "]" << 
°d
::
ídl
;

690 
ªmove_åüngÀ
–
i
 );

694 
ªmove_åüngÀ
–
Ÿhî_åüngÀ_ödex
 );

696 
	gÊ≠_found
 = 
åue
;

706 
	gåüngÀ_ödi˚s
.
˛ór
();

716 
	gSurfTøck
::
	$im¥ove_mesh
( )

719 i‡–
m_≥rf‹m_im¥ovemít
 )

723 
m_•lôãr
.
	`¥o˚ss_mesh
();

726 
m_Êù≥r
.
	`¥o˚ss_mesh
();

729 
m_cﬁœp£r
.
	`¥o˚ss_mesh
();

732 i‡–
m_Ælow_vîãx_movemít
 )

734 
m_smoŸhî
.
	`¥o˚ss_mesh
();

737 i‡–
m_cﬁlisi⁄_ß„ty
 )

739 
m_cﬁlisi⁄_pùñöe
.
	`as£π_mesh_is_öãr£˘i⁄_‰ì
–
Ál£
 );

743 
	}
}

751 
	gSurfTøck
::
	$t›ﬁogy_ch™ges
( )

754 i‡–
Ál£
 =
m_Ælow_t›ﬁogy_ch™ges
 )

759 
m_mîgî
.
	`¥o˚ss_mesh
();

761 
m_pöchî
.
	`¥o˚ss_mesh
();

763 i‡–
m_cﬁlisi⁄_ß„ty
 )

765 
m_cﬁlisi⁄_pùñöe
.
	`as£π_mesh_is_öãr£˘i⁄_‰ì
–
Ál£
 );

768 
	}
}

	@eltopo3d/surftrack.h

11 #i‚de‡
EL_TOPO_SURFTRACK_H


12 
	#EL_TOPO_SURFTRACK_H


	)

14 
	~<dy«micsurÁ˚.h
>

15 
	~<edgecﬁœp£r.h
>

16 
	~<edgeÊù≥r.h
>

17 
	~<edge•lôãr.h
>

18 
	~<meshmîgî.h
>

19 
	~<meshpöchî.h
>

20 
	~<meshsmoŸhî.h
>

26 
˛ass
 
	gSubdivisi⁄Scheme
;

27 
	g°d
::
	tve˘‹
<
	tsize_t
> 
	tTrüngÀSë
;

28 
˛ass
 
	gDe‰agOb£rvî
;

40 
	sSurfTøckInôüliz©i⁄P¨amëîs


44 
SurfTøckInôüliz©i⁄P¨amëîs
();

47 
	mm_¥oximôy_ïsû⁄
;

49 
	mm_‰i˘i⁄_c€fficõ¡
;

51 
	mm_mö_åüngÀ_¨ó
;

56 
	mm_im¥ove_cﬁlisi⁄_ïsû⁄
;

59 
boﬁ
 
	mm_u£_‰a˘i⁄
;

63 
	mm_mö_edge_Àngth
;

64 
	mm_max_edge_Àngth
;

65 
	mm_max_vﬁume_ch™ge
;

68 
	mm_mö_åüngÀ_™gÀ
;

69 
	mm_max_åüngÀ_™gÀ
;

72 
boﬁ
 
	mm_u£_curv©uª_whí_•lôtög
;

73 
boﬁ
 
	mm_u£_curv©uª_whí_cﬁœpsög
;

76 
	mm_mö_curv©uª_mu…ùlõr
;

77 
	mm_max_curv©uª_mu…ùlõr
;

79 
boﬁ
 
	mm_Ælow_vîãx_movemít
;

82 
	mm_edge_Êù_mö_Àngth_ch™ge
;

85 
	mm_mîge_¥oximôy_ïsû⁄
;

88 
Subdivisi⁄Scheme
 *
	mm_subdivisi⁄_scheme
;

91 
boﬁ
 
	mm_cﬁlisi⁄_ß„ty
;

94 
boﬁ
 
	mm_Ælow_t›ﬁogy_ch™ges
;

97 
boﬁ
 
	mm_Ælow_n⁄_m™ifﬁd
;

100 
boﬁ
 
	mm_≥rf‹m_im¥ovemít
;

110 
	sS‹èbÀEdge


112 
size_t
 
	medge_ödex
;

113 
	medge_Àngth
;

115 
S‹èbÀEdge
–
size_t
 
ei
, 
ñ
 ) : 
edge_ödex
”i), 
edge_Àngth
(el) {}

117 
boﬁ
 
	m›î©‹
<–c⁄° 
	mS‹èbÀEdge
& 
	mŸhî
 ) const

119  (
	mthis
->
	medge_Àngth
 < 
	mŸhî
.edge_length);

130 
	sVîãxUpd©eEvít


132 
VîãxUpd©eEvít
–
boﬁ
 
_is_ªmove
 = 
Ál£
, 
size_t
 
_vîãx_ödex
 = (size_t)~0, c⁄° 
Vec2°
& 
_•lô_edge
 = Vec2st((size_t)~0) ) :

133 
is_ªmove
–
_is_ªmove
 ),

134 
vîãx_ödex
–
_vîãx_ödex
 ),

135 
•lô_edge
–
_•lô_edge
 )

138 c⁄° 
boﬁ
 
	mVERTEX_REMOVE
 = 
åue
;

139 c⁄° 
boﬁ
 
	mVERTEX_ADD
 = 
Ál£
;

141 
boﬁ
 
	mis_ªmove
;

142 
size_t
 
	mvîãx_ödex
;

143 
Vec2°
 
	m•lô_edge
;

154 
	sTrüngÀUpd©eEvít


156 
TrüngÀUpd©eEvít
–
boﬁ
 
_is_ªmove
 = 
Ál£
, 
size_t
 
_åüngÀ_ödex
 = (size_t)~0, c⁄° 
Vec3°
& 
_åüngÀ
 = Vec3st((size_t)~0) ) :

157 
is_ªmove
–
_is_ªmove
 ),

158 
åüngÀ_ödex
–
_åüngÀ_ödex
 ),

159 
åi
–
_åüngÀ
 )

162 c⁄° 
boﬁ
 
	mTRIANGLE_REMOVE
 = 
åue
;

163 c⁄° 
boﬁ
 
	mTRIANGLE_ADD
 = 
Ál£
;

165 
boﬁ
 
	mis_ªmove
;

166 
size_t
 
	måüngÀ_ödex
;

167 
Vec3°
 
	måi
;

178 ˛as†
	cSurfTøck
 : 
public
 
Dy«micSurÁ˚


181 
public
:

183 ˛as†
	cPªDe‰agInfo


188 ˛as†
	cPo°De‰agInfo


190 
	gpublic
:

191 
°d
::
ve˘‹
<
Vec2°
> 
m_de‰agged_åüngÀ_m≠
;

192 
	g°d
::
ve˘‹
<
Vec2°
> 
m_de‰agged_vîãx_m≠
;

193 
	g°d
::
ve˘‹
<
size_t
> 
m_de‰agged_edge_m≠
;

198 
SurfTøck
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
vs
,

199 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
ts
,

200 c⁄° 
°d
::
ve˘‹
<>& 
mas£s
,

201 c⁄° 
SurfTøckInôüliz©i⁄P¨amëîs
& 
öôül_∑ømëîs
 );

204 ~
SurfTøck
();

206 
	g¥iv©e
:

210 
SurfTøck
( const SurfTrack& );

211 
	gSurfTøck
& 
	g›î©‹
=–c⁄° 
SurfTøck
& );

214 
	gpublic
:

219 
size_t
 
add_åüngÀ
(c⁄° 
Vec3°
& 
t
);

221 
ªmove_åüngÀ
(
size_t
 
t
);

223 
size_t
 
add_vîãx
–c⁄° 
Vec3d
& 
√w_vîãx_posôi⁄
, 
√w_vîãx_mass
 );

225 
ªmove_vîãx
(
size_t
 
v
);

227 
de‰ag_mesh
();

235 
im¥ove_mesh
( );

239 
t›ﬁogy_ch™ges
( );

248 
åim_n⁄_m™ifﬁd
–
°d
::
ve˘‹
<
size_t
>& 
åüngÀ_ödi˚s
 );

252 
as£π_no_degíî©e_åüngÀs
();

255 
	$add_ob£rvî
–
De‰agOb£rvî
* 
ob£rvî
 )

257 
m_ob£rvîs
.
	`push_back
(
ob£rvî
);

258 
	}
}

265 
EdgeCﬁœp£r
 
	gm_cﬁœp£r
;

266 
EdgeS∂ôãr
 
	gm_•lôãr
;

267 
EdgeFlù≥r
 
	gm_Êù≥r
;

268 
MeshSmoŸhî
 
	gm_smoŸhî
;

270 
MeshMîgî
 
	gm_mîgî
;

271 
MeshPöchî
 
	gm_pöchî
;

274 
	gm_im¥ove_cﬁlisi⁄_ïsû⁄
;

277 
	gm_edge_Êù_mö_Àngth_ch™ge
;

280 
	gm_max_vﬁume_ch™ge
;

283 
	gm_mö_edge_Àngth
;

286 
	gm_max_edge_Àngth
;

289 
	gm_mîge_¥oximôy_ïsû⁄
;

292 
	gm_mö_åüngÀ_¨ó
;

295 
	gm_mö_åüngÀ_™gÀ
;

298 
	gm_max_åüngÀ_™gÀ
;

301 
Subdivisi⁄Scheme
 *
	gm_subdivisi⁄_scheme
;

304 
boﬁ
 
	gshould_dñëe_subdivisi⁄_scheme_obje˘
;

307 
	g°d
::
ve˘‹
<
size_t
> 
m_dúty_åüngÀs
;

310 
boﬁ
 
	gm_Ælow_t›ﬁogy_ch™ges
;

313 
boﬁ
 
	gm_Ælow_n⁄_m™ifﬁd
;

316 
boﬁ
 
	gm_≥rf‹m_im¥ovemít
;

321 
boﬁ
 
	gm_Ælow_vîãx_movemít
;

323 
	g°d
::
ve˘‹
<
VîãxUpd©eEvít
> 
m_vîãx_ch™ge_hi°‹y
;

324 
	g°d
::
ve˘‹
<
TrüngÀUpd©eEvít
> 
m_åüngÀ_ch™ge_hi°‹y
;

326 
	g°d
::
ve˘‹
<
De‰agOb£rvî
*> 
m_ob£rvîs
;

330 ˛as†
	cDe‰agOb£rvî


332 
	mpublic
:

334 
vútuÆ
 ~
	$De‰agOb£rvî
() {}

336 
vútuÆ
 
boﬁ
 
	$›î©i⁄OK
–c⁄° 
SurfTøck
& , c⁄° SurfTøck::
PªDe‰agInfo
& )

338  
åue
;

339 
	}
}

341 
vútuÆ
 
	$›î©i⁄Occuºed
–c⁄° 
SurfTøck
& , c⁄° SurfTøck::
Po°De‰agInfo
& )

343 
	}
}

	@eltopo3d/trianglequality.cpp

10 
	~<åüngÀquÆôy.h
>

11 
	~<limôs
>

12 
	~<sur·øck.h
>

17 
	$mixed_¨ó
–
size_t
 
vîãx_ödex
, size_à
åüngÀ_ödex
, c⁄° 
SurfTøck
& 
surf
 )

19 c⁄° 
Vec3°
& 
åi
 = 
surf
.
m_mesh
.
	`gë_åüngÀ
(
åüngÀ_ödex
);

21 
Vec2°
 
›posôe_edge
;

22 i‡–
vîãx_ödex
 =
åi
[0] )

24 
›posôe_edge
 = 
	`Vec2°
–
åi
[1],Åri[2] );

26 i‡–
vîãx_ödex
 =
åi
[1] )

28 
›posôe_edge
 = 
	`Vec2°
–
åi
[2],Åri[0] );

32 
›posôe_edge
 = 
	`Vec2°
–
åi
[0],Åri[1] );

35 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
(
vîãx_ödex
);

36 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
(
›posôe_edge
[0]);

37 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
(
›posôe_edge
[1]);

39 
boﬁ
 
obtu£_åüngÀ
 = ( ( 
	`dŸ
(
b
-
a
, 
c
-a) < 0.0 ) || ( dot(a-b, c-b) < 0.0 ) || ( dot(a-c, b-c) < 0.0 ) );

41 i‡–
obtu£_åüngÀ
 )

45 i‡–
	`dŸ
(
b
-
a
, 
c
-a) < 0.0 )

48  0.5 * 
surf
.
	`gë_åüngÀ_¨ó
–
åüngÀ_ödex
 );

53  0.25 * 
surf
.
	`gë_åüngÀ_¨ó
–
åüngÀ_ödex
 );

60 
¸oss_c
 = 
	`mag
–
	`¸oss
–
a
-
c
, 
b
-c ) );

61 
cŸ_c
 = 
	`dŸ
–
a
-
c
, 
b
-cË/ 
¸oss_c
;

63 
¸oss_b
 = 
	`mag
–
	`¸oss
–
a
-
b
, 
c
-b ) );

64 
cŸ_b
 = 
	`dŸ
–
a
-
b
, 
c
-bË/ 
¸oss_b
;

66  1.0 / 8.0 * (
	`mag2
(
b
-
a
Ë* 
cŸ_c
 + mag2(
c
-aË* 
cŸ_b
);

69 
	}
}

73 
	$vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
, & 
weight_sum
 )

75 
Vec3d
 
	`món_curv©uª_n‹mÆ
( 0, 0, 0 );

76 
weight_sum
 = 0;

78 
edge_Àngth_sum
 = 0.0;

80  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_ödex
].
	`size
(); ++i )

82 
size_t
 
e
 = 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_ödex
][
i
];

83 c⁄° 
Vec2°
& 
cuº_edge
 = 
surf
.
m_mesh
.
m_edges
[
e
];

84 
Vec3d
 
edge_ve˘‹
;

85 i‡–
cuº_edge
[0] =
vîãx_ödex
 )

87 
edge_ve˘‹
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
vîãx_ödex
 );

91 
	`as£π
–
cuº_edge
[1] =
vîãx_ödex
 );

92 
edge_ve˘‹
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
vîãx_ödex
 );

95 
edge_Àngth_sum
 +
	`mag
–
edge_ve˘‹
 );

97 i‡–
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
].
	`size
() != 2 )

100 
out
 = 
	`Vec3d
(0,0,0);

104 
size_t
 
åi0
 = 
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
][0];

105 
size_t
 
åi1
 = 
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
][1];

107 
size_t
 
thúd_vîãx_0
 = 
surf
.
m_mesh
.
	`gë_thúd_vîãx
–
cuº_edge
[0], cuº_edge[1], surf.m_mesh.
	`gë_åüngÀ
(
åi0
) );

108 
size_t
 
thúd_vîãx_1
 = 
surf
.
m_mesh
.
	`gë_thúd_vîãx
–
cuº_edge
[0], cuº_edge[1], surf.m_mesh.
	`gë_åüngÀ
(
åi1
) );

110 
Vec3d
 
v00
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
thúd_vîãx_0
 );

111 
Vec3d
 
v10
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
thúd_vîãx_0
 );

113 
¸oss_0
 = 
	`mag
–
	`¸oss
–
v00
, 
v10
 ) );

114 i‡–
¸oss_0
 < 1e-10 )

118 
cŸ_0
 = 
	`dŸ
(
v00
, 
v10
Ë/ 
¸oss_0
;

120 
Vec3d
 
v01
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
thúd_vîãx_1
 );

121 
Vec3d
 
v11
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
thúd_vîãx_1
 );

123 
¸oss_1
 = 
	`mag
–
	`¸oss
–
v01
, 
v11
 ) );

124 i‡–
¸oss_1
 < 1e-10 )

129 
cŸ_1
 = 
	`dŸ
(
v01
, 
v11
Ë/ 
¸oss_1
;

131 
weight
 = 
cŸ_0
 + 
cŸ_1
;

132 
weight_sum
 +
weight
;

134 
món_curv©uª_n‹mÆ
 +
weight
 * 
edge_ve˘‹
;

138 
vîãx_¨ó
 = 0.0;

139  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_ödex
].
	`size
(); ++i )

141 
vîãx_¨ó
 +
	`mixed_¨ó
–
vîãx_ödex
, 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[vîãx_ödex][
i
], surf );

144 
c€ff
 = 1.0 / (2.0 * 
vîãx_¨ó
);

146 
weight_sum
 *
c€ff
;

148 
out
 = 
c€ff
 * 
món_curv©uª_n‹mÆ
;

150 
	}
}

155 
	$unsig√d_vîãx_món_curv©uª
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
 )

157 
Vec3d
 
mc_n‹mÆ
;

158 
weight_sum
;

160 
	`vîãx_món_curv©uª_n‹mÆ
–
vîãx_ödex
, 
surf
, 
mc_n‹mÆ
, 
weight_sum
 );

162  
	`mag
–
mc_n‹mÆ
 );

163 
	}
}

169 
	$öv_mö_ødius_curv©uª
–c⁄° 
SurfTøck
& 
surf
, 
size_t
 
vîãx
 )

172 
Vec3d
 
n‹mÆ
 = 
surf
.
	`gë_vîãx_n‹mÆ
–
vîãx
 );

176 
öv_mö_ødius
 = -
BIG_DOUBLE
;

178  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx
].
	`size
(); ++i )

180 
size_t
 
edge_ödex
 = 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx
][
i
];

182 
	`as£π
–
edge_ödex
 < 
surf
.
m_mesh
.
m_edges
.
	`size
() );

184 c⁄° 
Vec2°
& 
edge
 = 
surf
.
m_mesh
.
m_edges
[ 
edge_ödex
 ];

186 
Vec3d
 
P
;

187 i‡–
edge
[0] =
vîãx
 )

189 
P
 = 
surf
.
	`gë_posôi⁄
–
edge
[1] ) - surf.gë_posôi⁄–
vîãx
 );

193 
P
 = 
surf
.
	`gë_posôi⁄
–
edge
[0] ) - surf.gë_posôi⁄–
vîãx
 );

199 
öv_ødius
 = 2.0 * 
	`dŸ
–
n‹mÆ
, 
P
 ) / dot( P, P );

200 
öv_mö_ødius
 = 
	`max
–öv_mö_ødius, 
öv_ødius
 );

204  
öv_mö_ødius
;

206 
	}
}

210 
compuã_vîãx_curv©uªs
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<>& 
vîãx_curv©uªs
 )

213 
vîãx_curv©uªs
.
ªsize
–
surf
.
gë_num_vîti˚s
() );

215  
size_t
 
	gi
 = 0; i < 
	gsurf
.
gë_num_vîti˚s
(); ++i )

218 i‡–
	gsurf
.
	gm_mesh
.
	gm_is_bound¨y_vîãx
[
i
] )

220 
	gvîãx_curv©uªs
[
i
] = 1.0;

224 
	gvîãx_curv©uªs
[
i
] = 
öv_mö_ødius_curv©uª
–
surf
, i );

229 
	#USE_INV_MIN_RADIUS


	)

233 
	$gë_curv©uª_sˇÀd_Àngth
(c⁄° 
SurfTøck
& 
surf
,

234 
size_t
 
vîãx_a
,

235 
size_t
 
vîãx_b
,

236 
mö_curv©uª_mu…ùlõr
,

237 
max_curv©uª_mu…ùlõr
,

238 
ª°_curv©uª
 )

241 
	`as£π
–
vîãx_a
 < 
surf
.
	`gë_num_vîti˚s
() );

242 
	`as£π
–
vîãx_b
 < 
surf
.
	`gë_num_vîti˚s
() );

244 
Àngth
 = 
	`di°
–
surf
.
	`gë_posôi⁄
–
vîãx_a
 ), surf.gë_posôi⁄–
vîãx_b
 ) );

247 #ifde‡
USE_INV_MIN_RADIUS


248 
curv_a
 = 
°d
::
	`Ábs
–
	`öv_mö_ødius_curv©uª
–
surf
, 
vîãx_a
 ) );

250 
curv_a
 = 
	`unsig√d_vîãx_món_curv©uª
–
vîãx_a
, 
surf
 );

253 
curv_a
 /
ª°_curv©uª
;

254 
curv_a
 = 
°d
::
	`max
–
mö_curv©uª_mu…ùlõr
, curv_a );

255 
curv_a
 = 
°d
::
	`mö
–
max_curv©uª_mu…ùlõr
, curv_a );

257 #ifde‡
USE_INV_MIN_RADIUS


258 
curv_b
 = 
°d
::
	`Ábs
–
	`öv_mö_ødius_curv©uª
–
surf
, 
vîãx_b
 ) );

260 
curv_b
 = 
	`unsig√d_vîãx_món_curv©uª
–
vîãx_b
, 
m_surf
 );

263 
curv_b
 /
ª°_curv©uª
;

264 
curv_b
 = 
°d
::
	`max
–
mö_curv©uª_mu…ùlõr
, curv_b );

265 
curv_b
 = 
°d
::
	`mö
–
max_curv©uª_mu…ùlõr
, curv_b );

267 
Àngth
 *0.5 * ( 
curv_a
 + 
curv_b
 );

269  
Àngth
;

271 
	}
}

275 
	$mö_åüngÀ_¨ó
–c⁄° 
SurfTøck
& 
surf
 )

277 
mö_¨ó
 = 
BIG_DOUBLE
;

278  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

280 i‡–
surf
.
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

281 i‡–
surf
.
	`åüngÀ_is_sﬁid
(
i
) ) { ; }

283 
¨ó
 = 
surf
.
	`gë_åüngÀ_¨ó
(
i
);

284 
mö_¨ó
 = 
°d
::
	`mö
–
¨ó
, min_area );

287  
mö_¨ó
;

289 
	}
}

294 
	$mö_åüngÀ_™gÀ
–c⁄° 
SurfTøck
& 
surf
 )

296 
mö_™gÀ
 = 
BIG_DOUBLE
;

297  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

299 i‡–
surf
.
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

301 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[0] );

302 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[1] );

303 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[2] );

305 
cuº_mö_™gÀ
 = 
	`mö_åüngÀ_™gÀ
–
a
, 
b
, 
c
 );

307 
mö_™gÀ
 = 
°d
::
	`mö
–
cuº_mö_™gÀ
, min_angle );

310  
mö_™gÀ
;

312 
	}
}

317 
	$max_åüngÀ_™gÀ
–c⁄° 
SurfTøck
& 
surf
 )

319 
max_™gÀ
 = -
BIG_DOUBLE
;

321  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

323 i‡–
surf
.
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

325 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[0] );

326 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[1] );

327 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[2] );

329 
cuº_max_™gÀ
 = 
	`max_åüngÀ_™gÀ
–
a
, 
b
, 
c
 );

331 
max_™gÀ
 = 
°d
::
	`max
–
cuº_max_™gÀ
, max_angle );

334  
max_™gÀ
;

335 
	}
}

340 
size_t
 
	$num_™gÀs_bñow_thªshﬁd
–c⁄° 
SurfTøck
& 
surf
, 
low_thªshﬁd
 )

342 
size_t
 
num_smÆl_™gÀs
 = 0;

344  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

346 i‡–
surf
.
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

348 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[0] );

349 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[1] );

350 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[2] );

352 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
;

353 
	`åüngÀ_™gÀs
–
a
, 
b
, 
c
, 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

355 i‡–
™gÀ_a
 < 
low_thªshﬁd
 ) { ++
num_smÆl_™gÀs
; }

356 i‡–
™gÀ_b
 < 
low_thªshﬁd
 ) { ++
num_smÆl_™gÀs
; }

357 i‡–
™gÀ_c
 < 
low_thªshﬁd
 ) { ++
num_smÆl_™gÀs
; }

360  
num_smÆl_™gÀs
;

362 
	}
}

366 
size_t
 
	$num_™gÀs_above_thªshﬁd
–c⁄° 
SurfTøck
& 
surf
, 
high_thªshﬁd
 )

368 
size_t
 
num_œrge_™gÀs
 = 0;

370  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

372 i‡–
surf
.
m_mesh
.
	`åüngÀ_is_dñëed
(
i
) ) { ; }

374 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[0] );

375 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[1] );

376 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
–surf.
m_mesh
.
	`gë_åüngÀ
(
i
)[2] );

378 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
;

379 
	`åüngÀ_™gÀs
–
a
, 
b
, 
c
, 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

381 i‡–
™gÀ_a
 > 
high_thªshﬁd
 ) { ++
num_œrge_™gÀs
; }

382 i‡–
™gÀ_b
 > 
high_thªshﬁd
 ) { ++
num_œrge_™gÀs
; }

383 i‡–
™gÀ_c
 > 
high_thªshﬁd
 ) { ++
num_œrge_™gÀs
; }

386  
num_œrge_™gÀs
;

388 
	}
}

393 
	$åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
 
åüngÀ_ödex
 )

395 c⁄° 
Vec3°
& 
åi
 = 
surf
.
m_mesh
.
	`gë_åüngÀ
(
åüngÀ_ödex
);

396 
	`as£π
–
åi
[0] !=Åri[1] );

397  
	`åüngÀ_a•e˘_øtio
–
surf
.
	`gë_posôi⁄
(
åi
[0]), surf.get_position(tri[1]), surf.get_position(tri[2]) );

398 
	}
}

402 
	$mö_åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
& 
ouçut_åüngÀ_ödex
 )

404 
mö_øtio
 = 
°d
::
numîic_limôs
<>::
	`max
();

405 
ouçut_åüngÀ_ödex
 = (
size_t
)~0;

407  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

409 
a_øtio
 = 
	`åüngÀ_a•e˘_øtio
–
surf
, 
i
 );

410 i‡–
a_øtio
 < 
mö_øtio
 )

412 
ouçut_åüngÀ_ödex
 = 
i
;

413 
mö_øtio
 = 
a_øtio
;

416  
mö_øtio
;

417 
	}
}

422 
	$max_åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
& 
ouçut_åüngÀ_ödex
 )

424 
max_øtio
 = -1.0;

425 
ouçut_åüngÀ_ödex
 = (
size_t
)~0;

427  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
	`num_åüngÀs
(); ++i )

429 
a_øtio
 = 
	`åüngÀ_a•e˘_øtio
–
surf
, 
i
 );

430 i‡–
a_øtio
 > 
max_øtio
 )

432 
ouçut_åüngÀ_ödex
 = 
i
;

433 
max_øtio
 = 
a_øtio
;

436  
max_øtio
;

437 
	}
}

	@eltopo3d/trianglequality.h

11 #i‚de‡
EL_TOPO_TRIANGLEQUALITY_H


12 
	#EL_TOPO_TRIANGLEQUALITY_H


	)

14 
	~<vec.h
>

20 
˛ass
 
	gSurfTøck
;

28 
ölöe
 
ød2deg
–
ødüns
 );

32 
ölöe
 
deg2ød
–
degªes
 );

36 
ölöe
 
¨ó
–c⁄° 
Vec3d
& 
v0
, c⁄° Vec3d &
v1
, c⁄° Vec3d &
v2
 );

40 
ölöe
 
cúcumcú˛e_ødius
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 );

44 
ölöe
 
åüngÀ_™gÀs
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
,

45 & 
™gÀ_a
, & 
™gÀ_b
, & 
™gÀ_c
 );

49 
ölöe
 
mö_åüngÀ_™gÀ
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 );

53 
ölöe
 
max_åüngÀ_™gÀ
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 );

58 
unsig√d_vîãx_món_curv©uª
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
 );

62 
öv_mö_ødius_curv©uª
–c⁄° 
SurfTøck
& 
surf
, 
size_t
 
vîãx
 );

66 
compuã_vîãx_curv©uªs
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<>& 
vîãx_curv©uªs
 );

70 
gë_curv©uª_sˇÀd_Àngth
(c⁄° 
SurfTøck
& 
surf
,

71 
size_t
 
vîãx_a
,

72 
size_t
 
vîãx_b
,

73 
mö_curv©uª_mu…ùlõr
,

74 
max_curv©uª_mu…ùlõr
,

75 
ª°_curv©uª
 = 2.0 );

78 
mixed_¨ó
–
size_t
 
vîãx_ödex
, size_à
åüngÀ_ödex
, c⁄° 
SurfTøck
& 
surf
 );

80 
vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
, & 
weight_sum
 );

84 
mö_åüngÀ_¨ó
–c⁄° 
SurfTøck
& 
surf
 );

88 
mö_åüngÀ_™gÀ
–c⁄° 
SurfTøck
& 
surf
 );

92 
max_åüngÀ_™gÀ
–c⁄° 
SurfTøck
& 
surf
 );

96 
size_t
 
num_™gÀs_bñow_thªshﬁd
–c⁄° 
SurfTøck
& 
surf
, 
low_thªshﬁd
 );

100 
size_t
 
num_™gÀs_above_thªshﬁd
–c⁄° 
SurfTøck
& 
surf
, 
high_thªshﬁd
 );

103 
åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
 
åüngÀ_ödex
 );

106 
mö_åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
& 
ouçut_åüngÀ_ödex
 );

109 
max_åüngÀ_a•e˘_øtio
–c⁄° 
SurfTøck
& 
surf
, 
size_t
& 
ouçut_åüngÀ_ödex
 );

117 
ölöe
 
	$ød2deg
–
ødüns
 )

120 c⁄° 
OVER_PI
 = 1.0 / 
M_PI
;

121  
ødüns
 * 180.0 * 
OVER_PI
;

122 
	}
}

125 
ölöe
 
	$deg2ød
–
degªes
 )

128 c⁄° 
OVER_180
 = 1.0 / 180.0;

129  
degªes
 * 
M_PI
 * 
OVER_180
;

130 
	}
}

134 
ölöe
 
	$¨ó
–c⁄° 
Vec3d
& 
v0
, c⁄° Vec3d &
v1
, c⁄° Vec3d &
v2
 )

136  0.5 * 
	`mag
–
	`¸oss
–
v1
 - 
v0
, 
v2
 - v0 ) );

137 
	}
}

141 
ölöe
 
	$cúcumcú˛e_ødius
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 )

143  0.25 * 
	`di°
(
a
,
b
Ë* di°(b,
c
Ë* di°(c,aË/ 
	`¨ó
(á, b, c );

144 
	}
}

148 
ölöe
 
	$åüngÀ_™gÀs
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
,

149 & 
™gÀ_a
, & 
™gÀ_b
, & 
™gÀ_c
 )

151 
™gÀ_a
 = 
	`acos
–
	`dŸ
–
	`n‹mÆized
(
b
-
a
),Ç‹mÆized(
c
-a) ) );

152 
™gÀ_b
 = 
	`acos
–
	`dŸ
–
	`n‹mÆized
(
a
-
b
),Ç‹mÆized(
c
-b) ) );

153 
™gÀ_c
 = 
	`acos
–
	`dŸ
–
	`n‹mÆized
(
b
-
c
),Ç‹mÆized(
a
-c) ) );

154 
	}
}

158 
ölöe
 
	$mö_åüngÀ_™gÀ
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 )

160 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
;

161 
	`åüngÀ_™gÀs
–
a
, 
b
, 
c
, 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

162  
	`mö
–
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

163 
	}
}

167 
ölöe
 
	$max_åüngÀ_™gÀ
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 )

169 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
;

170 
	`åüngÀ_™gÀs
–
a
, 
b
, 
c
, 
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

171  
	`max
–
™gÀ_a
, 
™gÀ_b
, 
™gÀ_c
 );

172 
	}
}

176 
ölöe
 
	$åüngÀ_a•e˘_øtio
–c⁄° 
Vec3d
& 
a
, c⁄° Vec3d& 
b
, c⁄° Vec3d& 
c
 )

179 c⁄° 
NORMALIZATION_FACTOR
 = 6.0 / 
	`sqπ
(3.0);

181 
Àn_01
 = 
	`di°
–
b
, 
a
 );

182 
Àn_12
 = 
	`di°
–
c
, 
b
 );

183 
Àn_20
 = 
	`di°
–
a
, 
c
 );

184 
max_edge_Àngth
 = 
	`max
–
Àn_01
, 
Àn_12
, 
Àn_20
 );

185 
£mùîimëî
 = 0.5 * ( 
Àn_01
 + 
Àn_12
 + 
Àn_20
 );

186 
åi_¨ó
 = 
	`¨ó
–
a
, 
b
, 
c
 );

188  
NORMALIZATION_FACTOR
 * 
åi_¨ó
 / ( 
£mùîimëî
 * 
max_edge_Àngth
 );

189 
	}
}

	@mycode/bareinterface.cpp

2 
	~<°dio.h
>

3 
	~<°dboﬁ.h
>

4 
	~<m©h.h
>

6 
	#NSIZE
 20000

	)

8 
	~<ñt›o.h
>

9 
	~<subdivisi⁄scheme.h
>

11 
ElT›oMesh
 
	göput
;

12 
ElT›oMesh
 
	gouçut
;

13 
ElT›oGíîÆO±i⁄s
 
	ggíîÆ_Ÿi⁄s
;

14 
ElT›oSèticO≥øti⁄sO±i⁄s
 
	g›ti⁄s
;

15 
ElT›oDe‰agInf‹m©i⁄
 
	gde‰ag_öfo
;

17 
	~"mesh.c
"

19 
	$maö
()

22 
gíîÆ_Ÿi⁄s
.
m_vîbo£
 = 1;

23 
gíîÆ_Ÿi⁄s
.
m_cﬁlisi⁄_ß„ty
 = 1;

24 
gíîÆ_Ÿi⁄s
.
m_¥oximôy_ïsû⁄
 = 1e-3;

26 
›ti⁄s
.
m_≥rf‹m_im¥ovemít
 = 
åue
;

27 
›ti⁄s
.
m_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

28 
›ti⁄s
.
m_max_vﬁume_ch™ge
 = 0.1;

29 
›ti⁄s
.
m_mö_edge_Àngth
 = 0.5;

30 
›ti⁄s
.
m_max_edge_Àngth
 = 1.5;

31 
›ti⁄s
.
m_mö_åüngÀ_¨ó
 = 1;

32 
›ti⁄s
.
m_mö_åüngÀ_™gÀ
 = 20;

33 
›ti⁄s
.
m_max_åüngÀ_™gÀ
 = 170;

34 
›ti⁄s
.
m_u£_curv©uª_whí_•lôtög
 = 
åue
;

35 
›ti⁄s
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
åue
;

36 
›ti⁄s
.
m_mö_curv©uª_mu…ùlõr
 = 1.0;

37 
›ti⁄s
.
m_max_curv©uª_mu…ùlõr
 = 1.0;

38 
›ti⁄s
.
m_Ælow_vîãx_movemít
 = 
åue
;

39 
›ti⁄s
.
m_edge_Êù_mö_Àngth_ch™ge
 = 0.001;

40 
›ti⁄s
.
m_mîge_¥oximôy_ïsû⁄
 = 0.0001;

41 
›ti⁄s
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

42 
›ti⁄s
.
m_cﬁlisi⁄_ß„ty
 = 
åue
;

43 
›ti⁄s
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

45 
vîãx_is_ªmove
[
NSIZE
];

46 
vîãx_ödex
[
NSIZE
];

47 
•lô_edge
[2*
NSIZE
];

48 
åüngÀ_is_ªmove
[
NSIZE
];

49 
åüngÀ_ödex
[
NSIZE
];

50 
√w_åi
[3*
NSIZE
];

51 
de‰agged_åüngÀ_m≠
[
NSIZE
];

52 
de‰agged_vîãx_m≠
[
NSIZE
];

53 
de‰ag_öfo
.
num_vîãx_ch™ges
 = 0;

54 
de‰ag_öfo
.
vîãx_is_ªmove
 = vertex_is_remove;

55 
de‰ag_öfo
.
vîãx_ödex
 = vertex_index;

56 
de‰ag_öfo
.
•lô_edge
 = split_edge;

57 
de‰ag_öfo
.
num_åüngÀ_ch™ges
 = 0;

58 
de‰ag_öfo
.
åüngÀ_is_ªmove
 =Åriangle_is_remove;

59 
de‰ag_öfo
.
åüngÀ_ödex
 =Åriangle_index;

60 
de‰ag_öfo
.
√w_åi
 =Çew_tri;

61 
de‰ag_öfo
.
de‰agged_åüngÀ_m≠_size
 = 0;

62 
de‰ag_öfo
.
de‰agged_åüngÀ_m≠
 = defragged_triangle_map;

63 
de‰ag_öfo
.
de‰agged_vîãx_m≠_size
 = 0;

64 
de‰ag_öfo
.
de‰agged_vîãx_m≠
 = defragged_vertex_map;

66 
vîãx_mas£s
[
Nvîticõs
];

67 
i
=0;i<
Nvîticõs
;i++) {

68 
vîãx_mas£s
[
i
] = 1;

71 
öput
.
num_vîti˚s
 = 
Nvîticõs
;

72 
öput
.
vîãx_loˇti⁄s
 = 
vîticõs
;

73 
öput
.
num_åüngÀs
 = 
NåüngÀs
;

74 
öput
.
åüngÀs
 =Åriangles;

75 
öput
.
vîãx_mas£s
 = vertex_masses;

77 
out_vîti˚s
[
NSIZE
];

78 
out_åüngÀs
[
NSIZE
];

79 
out_mas£s
[
NSIZE
];

80 
ouçut
.
vîãx_loˇti⁄s
 = 
out_vîti˚s
;

81 
ouçut
.
åüngÀs
 = 
out_åüngÀs
;

82 
ouçut
.
vîãx_mas£s
 = 
out_mas£s
;

86 
	`ñ_t›o_°©ic_›î©i⁄s
(&
öput
,&
gíîÆ_Ÿi⁄s
,&
›ti⁄s
,&
de‰ag_öfo
,&
ouçut
);

88 
	`¥ötf
("Hello world\n");

90 
	}
}

	@mycode/eltopo.cpp

1 
	~<°dio.h
>

2 
	~<m©h.h
>

4 
	~<ve˘‹
>

5 
	~<vec.h
>

6 
	~<sur·øck.h
>

7 
	~<subdivisi⁄scheme.h
>

10 "C" 
im¥ovemesh


12 * 
ömsh_vîticõs
,

13 
ömsh_Nvîticõs
,

14 * 
ömsh_åüngÀs
,

15 
ömsh_NåüngÀs
,

16 * 
outmsh_vîticõs
,

17 * 
outmsh_Nvîticõs
,

18 * 
outmsh_åüngÀs
,

19 * 
outmsh_NåüngÀs
,

20 
m_¥oximôy_ïsû⁄
,

21 
m_‰i˘i⁄_c€fficõ¡
,

22 
m_mö_åüngÀ_¨ó
,

23 
m_im¥ove_cﬁlisi⁄_ïsû⁄
,

24 
boﬁ
 
m_u£_‰a˘i⁄
,

25 
m_mö_edge_Àngth
,

26 
m_max_edge_Àngth
,

27 
m_max_vﬁume_ch™ge
,

28 
m_mö_åüngÀ_™gÀ
,

29 
m_max_åüngÀ_™gÀ
,

30 
boﬁ
 
m_u£_curv©uª_whí_•lôtög
,

31 
boﬁ
 
m_u£_curv©uª_whí_cﬁœpsög
,

32 
m_mö_curv©uª_mu…ùlõr
,

33 
m_max_curv©uª_mu…ùlõr
,

34 
boﬁ
 
m_Ælow_vîãx_movemít
,

35 
m_edge_Êù_mö_Àngth_ch™ge
,

36 
m_mîge_¥oximôy_ïsû⁄
,

37 
boﬁ
 
m_cﬁlisi⁄_ß„ty
,

38 
boﬁ
 
m_Ælow_t›ﬁogy_ch™ges
,

39 
boﬁ
 
m_Ælow_n⁄_m™ifﬁd
,

40 
boﬁ
 
m_≥rf‹m_im¥ovemít
,

41 
boﬁ
 
m_vîbo£


44 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

45 
°d
::
ve˘‹
<> 
mas£s
;

47  
i
 = 0; i < 
ömsh_Nvîticõs
; ++i )

49 
vs
.
push_back
–
Vec3d
–
ömsh_vîticõs
[3*
i
], inmsh_verticies[3*i + 1], inmsh_verticies[3*i + 2] ) );

50 
mas£s
.
push_back
( 0.5 );

53 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

54  
i
 = 0; i < 
ömsh_NåüngÀs
; ++i )

56 
ts
.
push_back
–
Vec3°
–
ömsh_åüngÀs
[3*
i
], inmsh_triangles[3*i + 1], inmsh_triangles[3*i + 2] ) );

57 
¥ötf
("%d %d %d\n", 
ömsh_åüngÀs
[3*
i
], inmsh_triangles[3*i + 1], inmsh_triangles[3*i + 2] );

62 
SurfTøckInôüliz©i⁄P¨amëîs
 
∑ømëîs
;

64 
∑ømëîs
.
m_¥oximôy_ïsû⁄
 = m_proximity_epsilon;

65 
∑ømëîs
.
m_‰i˘i⁄_c€fficõ¡
 = m_friction_coefficient;

66 
∑ømëîs
.
m_mö_åüngÀ_¨ó
 = m_min_triangle_area;

67 
∑ømëîs
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 = m_improve_collision_epsilon;

68 
∑ømëîs
.
m_u£_‰a˘i⁄
 = m_use_fraction;

69 
∑ømëîs
.
m_mö_edge_Àngth
 = m_min_edge_length;

70 
∑ømëîs
.
m_max_edge_Àngth
 = m_max_edge_length;

71 
∑ømëîs
.
m_max_vﬁume_ch™ge
 = m_max_volume_change;

72 
∑ømëîs
.
m_mö_åüngÀ_™gÀ
 = m_min_triangle_angle;

73 
∑ømëîs
.
m_max_åüngÀ_™gÀ
 = m_max_triangle_angle;

74 
∑ømëîs
.
m_u£_curv©uª_whí_•lôtög
 = m_use_curvature_when_splitting;

75 
∑ømëîs
.
m_u£_curv©uª_whí_cﬁœpsög
 = m_use_curvature_when_collapsing;

76 
∑ømëîs
.
m_mö_curv©uª_mu…ùlõr
 = m_min_curvature_multiplier;

77 
∑ømëîs
.
m_max_curv©uª_mu…ùlõr
 = m_max_curvature_multiplier;

78 
∑ømëîs
.
m_Ælow_vîãx_movemít
 = m_allow_vertex_movement;

79 
∑ømëîs
.
m_edge_Êù_mö_Àngth_ch™ge
 = m_edge_flip_min_length_change;

80 
∑ømëîs
.
m_mîge_¥oximôy_ïsû⁄
 = m_merge_proximity_epsilon;

81 
∑ømëîs
.
m_cﬁlisi⁄_ß„ty
 = m_collision_safety;

82 
∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = m_allow_topology_changes;

83 
∑ømëîs
.
m_Ælow_n⁄_m™ifﬁd
 = m_allow_non_manifold;

84 
∑ømëîs
.
m_≥rf‹m_im¥ovemít
 = m_perform_improvement;

85 
∑ømëîs
.
m_subdivisi⁄_scheme
 = 
√w
 
BuâîÊyScheme
();

87 
SurfTøck
 
surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
∑ømëîs
 );

88 
surÁ˚_åackî
.
m_vîbo£
 = m_verbose;

90 
¥ötf
("Helloágain \n");

93 
surÁ˚_åackî
.
im¥ove_mesh
();

94 
surÁ˚_åackî
.
t›ﬁogy_ch™ges
();

95 
surÁ˚_åackî
.
de‰ag_mesh
();

99 *
outmsh_Nvîticõs
 = 
surÁ˚_åackî
.
gë_num_vîti˚s
();

102  
i
 = 0; i < *
outmsh_Nvîticõs
; ++i )

104 
outmsh_vîticõs
[3*
i
+0] = 
surÁ˚_åackî
.
gë_posôi⁄
(i)[0];

105 
outmsh_vîticõs
[3*
i
+1] = 
surÁ˚_åackî
.
gë_posôi⁄
(i)[1];

106 
outmsh_vîticõs
[3*
i
+2] = 
surÁ˚_åackî
.
gë_posôi⁄
(i)[2];

109 *
outmsh_NåüngÀs
 = 
surÁ˚_åackî
.
m_mesh
.
num_åüngÀs
();

111  
i
 = 0; i < *
outmsh_NåüngÀs
; ++i )

113 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
gë_åüngÀ
(
i
);

114 
outmsh_åüngÀs
[3*
i
 + 0] = 
cuº_åi
[0];

115 
outmsh_åüngÀs
[3*
i
 + 1] = 
cuº_åi
[1];

116 
outmsh_åüngÀs
[3*
i
 + 2] = 
cuº_åi
[2];

119 
¥ötf
("Nvîticõs=%d NåüngÀs=%d vﬁume=%‡\n",*
outmsh_Nvîticõs
,*
outmsh_NåüngÀs
,
surÁ˚_åackî
.
gë_vﬁume
());

130 "C" 
hñlo


132 
a
,

133 
b
,

134 
boﬁ
 
s


137 
¥ötf
("Hñlÿ%f\n",
b
);

	@mycode/mesh.c

1 
	gNvîticõs
 = 472;

2 
	gNåüngÀs
 = 940;

3 
	gvîticõs
[] = {0.3182059931743207,0.2867837141606007,0.21773949064577125,0.29936559003503604,0.27822450882758915,0.2284087363563519,0.30454784340665275,0.25834926170118144,0.24029929977299452,0.34151138705181405,0.2862669825752406,0.21447861445457692,0.32670919736876514,0.2661063540437416,0.22785502596930626,0.36584076420485867,0.2897075919141823,0.21356724837261656,0.35530358895318187,0.2671100469080946,0.22509552601833108,0.38942834063828335,0.2945778087861605,0.21630711808189595,0.3791135759077619,0.2694456396583955,0.22686026340852466,0.40341941606384013,0.2784211573235416,0.22948927322226803,0.27823764041581767,0.31748677583334833,0.22235575218130832,0.2589615798658621,0.3076585826112507,0.2385584887351579,0.27857142166923315,0.2920641859353508,0.23150358804456606,0.29806856074443,0.30275983982882765,0.2174424921634122,0.32325467320340995,0.308387534931169,0.20839106579936797,0.34818213789994557,0.3100653597293629,0.20542503714736773,0.37354632913779034,0.31430743782109766,0.20622374539152843,0.41389270793375627,0.3025698751547472,0.22284613600029507,0.3992096398788794,0.319480998683584,0.21162730796273566,0.4359082632884377,0.3079215017475709,0.23446139050696174,0.2827671741144168,0.34227691586887854,0.21613401815643196,0.26062046691744944,0.333799523506856,0.23063147974721165,0.30228934536812035,0.325892425162318,0.20984823129891272,0.32810051269697255,0.3314428030431984,0.20277213953544315,0.3535967287666375,0.3345729949244674,0.20083877495616115,0.3790034856097458,0.3385965379465488,0.20327318283394555,0.403769721289127,0.34284496045435203,0.21015143017681656,0.42526998550626843,0.3281307880224779,0.22210876945869845,0.2887593738825136,0.36703075680079,0.21413411379036093,0.2650245205030047,0.35890520062764547,0.2267122662790936,0.3077588689787918,0.34997343092429517,0.20607055150479683,0.33371748259727924,0.35564123603144093,0.2009931005521299,0.35922575687184377,0.35953653666820495,0.20058801962855316,0.38432457960846184,0.3631848485426302,0.2045765390192825,0.40823807886860025,0.3680597678317739,0.21295193924919215,0.4252791371032899,0.3535430605307625,0.2203061364633645,0.2967135998726258,0.39159874884044854,0.21609666301254973,0.2720391768733355,0.38349726025995456,0.22630665493855456,0.31431365185472704,0.37454589676123884,0.20638947285020856,0.33992779149576535,0.3804554888293189,0.2034700924179147,0.36507364378108415,0.38442025578806244,0.20478281350113775,0.3893862424799881,0.3877239967293842,0.21026588113825245,0.4139733428107483,0.3886480283746457,0.2199471595374747,0.4342919664602615,0.3761801319118859,0.22871741640557622,0.2814593279911641,0.4075797270400231,0.22963907895594343,0.3220854901261761,0.39945412396811264,0.21116531499279176,0.30528387055565603,0.4161362355039727,0.22300997629388467,0.34782245451149624,0.4050140842349993,0.21046968490170354,0.3734430248675633,0.40849551761486774,0.2138798361592688,0.3989052569242409,0.40939733755905505,0.2212357497747544,0.4254267873379569,0.40401746097085856,0.23213179537238893,0.409858719965244,0.4258234424696563,0.2352492299974714,0.31383644433830676,0.43851729634597675,0.23442800733091884,0.3309079311452538,0.4232554476074951,0.22050431550560778,0.3574040561938392,0.42764617797241933,0.22187408147391158,0.38306860384025593,0.4297291289600054,0.22732264497742447,0.32083183210782595,0.24514000600252828,0.24678372395467785,0.2937106752609166,0.24460628638661974,0.2593155082100649,0.3175804074229226,0.23092316000561802,0.26473760386847744,0.34385700933525293,0.25093926001736955,0.23753118894650604,0.34373651139628303,0.23430750833967878,0.2547318726753925,0.36788999909847375,0.24659181699335758,0.24282399699782903,0.3636228454021273,0.22706141026481422,0.26514411489429024,0.39264399550308804,0.2548633876058955,0.24215513628500182,0.38555268784645313,0.2353888141113007,0.2599984308132426,0.4079210475270965,0.24371413376227216,0.2614084265211434,0.28205334142929706,0.2673395563553072,0.24487862897802898,0.2623579890136108,0.2827942778381658,0.24849990729576654,0.26970696703605535,0.2582110311774691,0.2626626422431538,0.4280929761196631,0.28596429878676666,0.23909050513638053,0.4160760003124476,0.26475072823051066,0.24575737989919297,0.44128465827109636,0.27574974272665526,0.25697306594769836,0.24277446161976035,0.3246075542325901,0.24822619385609618,0.228837551876091,0.3165686401197775,0.2681342236268407,0.24298329904428861,0.29856024306490275,0.25834097358680946,0.4491746334204711,0.32527788460632423,0.24021289193909443,0.45192822732573334,0.2984040228043732,0.2527966481469801,0.46602258522675655,0.32017441842385175,0.25972711148442995,0.2443441667958145,0.3501055791834642,0.24352543137929433,0.22781833329651008,0.34153071711340344,0.2633979701800003,0.44386578506892166,0.34888652569828127,0.23300438226850367,0.4625230287883451,0.34544882241166525,0.25091491144043576,0.24944900356318,0.37452412029326215,0.24142714593691375,0.23048725590357605,0.36578510321473284,0.260738952980357,0.4547863827939871,0.370417371077195,0.24462948733517464,0.4723580118696067,0.36526361488067055,0.2645860726105412,0.2575270606890703,0.3980233075982202,0.24209950221373472,0.23660838482440755,0.38896467067620766,0.2598662324821322,0.44636698161481336,0.3952007329078522,0.24431036664344402,0.4655226785344944,0.38874233059216534,0.26251547242795886,0.24564369484598833,0.4109141518614637,0.26112240058596686,0.2906234617695308,0.4321739446847935,0.23944743547657463,0.2682308956527052,0.42052203850884773,0.24588249110357174,0.434268544312865,0.420300224751632,0.24774203777083798,0.44146123855062247,0.4346092188912357,0.26647681805988777,0.45513134870202343,0.41214288632901297,0.2629042986204662,0.2772655660769775,0.44382286735073206,0.25831046033497385,0.3242542639981993,0.45608536713244824,0.24712603848349546,0.2994624733816357,0.4544207824962891,0.2549092087205033,0.3413183009955074,0.444126904903797,0.2335321766511156,0.3662721209573872,0.4483231465346881,0.23789390322080423,0.39356285853404427,0.4460784150249956,0.24336409834100176,0.40109653088929104,0.46151714164168434,0.2636688257281981,0.41799577019097833,0.4414782233957164,0.2524894370824419,0.32150887900199715,0.4702530679598675,0.26498555610652597,0.3481581534293313,0.4639450567607444,0.25246471591777236,0.36375488704657216,0.47554183544712886,0.2690676168959417,0.37731383184916234,0.46304724503489725,0.2552673499804023,0.3404196680361057,0.2199828451553993,0.2758126918834717,0.3208133611198918,0.21714384280520888,0.2867751504049625,0.3349741025217588,0.2078843093568378,0.3044220132301743,0.35672358127120396,0.21253618792022563,0.2903468875632964,0.37760751008958954,0.20946669353970462,0.30541059361249673,0.3806464641037634,0.21969350167946528,0.28231683567254534,0.2766644445121705,0.23935771183906168,0.2801417122182101,0.2562633655678016,0.25343733415760017,0.28374975524019974,0.2826141668308417,0.2246789684111582,0.30252591728525036,0.29785979071820196,0.22768522775359692,0.28057021484722244,0.40311057178797605,0.22752161928975445,0.2816018024875626,0.42017186128380885,0.22562052386035264,0.3041125747160207,0.4291639126540392,0.2561754535160937,0.2638023816431512,0.42519724883155685,0.23919041318617923,0.2824233084687091,0.2495147746650005,0.2751829179630365,0.2675068261924136,0.22614834407060422,0.2771590008968478,0.3069307978573883,0.2389250077861491,0.2703350672870244,0.2882274769777853,0.45780185108968596,0.27783840530488363,0.27469086939357934,0.4454080751228177,0.2573844874166835,0.28057618542396046,0.47112935455532307,0.27994460536898685,0.2959637052704033,0.2299744684645924,0.29156078949369546,0.2815987539949548,0.46868850028231124,0.29918286749766015,0.27364124840612286,0.21542172888386169,0.33474673385536036,0.28553274617829627,0.2062539583401543,0.34816269996002713,0.3071782784595361,0.21844370556129827,0.31121849067584395,0.2892633888984739,0.47758776644459666,0.34047837826872324,0.2717012096307642,0.48151564935967883,0.3207141497264055,0.2840760062856125,0.4906285046967954,0.3380127009597791,0.2992070051240951,0.2161122212580963,0.3583454829041449,0.2828850566665242,0.20862162527993336,0.37235269241666874,0.30513896676136154,0.485929918539795,0.357640390957038,0.28703428177342605,0.49343821047684755,0.36635893413496845,0.3092831110082397,0.22046877156093198,0.38174949134075087,0.28134411417314925,0.22834317089786244,0.4045222983735686,0.28124729159606254,0.47300484056471426,0.403679640814021,0.2830051840831927,0.48162988604276136,0.3805239042362958,0.2848704032674614,0.2574607802815041,0.4314516962217789,0.26454759221363633,0.22501390861084047,0.41897536929956497,0.30394703712843985,0.4613910983673932,0.4258889941618356,0.28417535590973086,0.4764267803871671,0.4172697295337734,0.3053787865540617,0.23976710109549143,0.4263922308340255,0.2828216175595946,0.27804030251042494,0.45930485744869537,0.2766907231291344,0.2577085814580981,0.4466356450484188,0.28185422852737296,0.42450456295874045,0.45407670882081574,0.27178805219562546,0.429735985538266,0.4634278437123569,0.29276105450825846,0.4468200186975442,0.44615775596619134,0.2877138061288572,0.2789106594800721,0.4715541077648261,0.29831920521181216,0.2992610331645519,0.4704630089046956,0.2764186115237112,0.34064387167019655,0.4798790137674864,0.2755425984507831,0.3202146678317291,0.4838477233107523,0.28919193349436234,0.35964538186995104,0.4875321906550316,0.29090801118416443,0.4082694622072936,0.4726473636582658,0.28626387239759643,0.38553784781407235,0.47787588444265827,0.28010851589247987,0.4227168846009108,0.47549209720254915,0.31173790082021424,0.3381101876211505,0.49195224677813354,0.3030085965709086,0.38031061304055575,0.48906984277718546,0.3026624296458448,0.3055127213627223,0.2144081786940364,0.3037859325055578,0.2906155075915255,0.21433765574494434,0.3261418690461594,0.31534406572798535,0.2064271869326566,0.3238119575442631,0.33956061827024137,0.2016412553189209,0.3304884089384086,0.3592477071765694,0.2039759183782005,0.3169629375021557,0.38589080270438475,0.2057450361429926,0.32994119435638253,0.3988510788753633,0.21544173197485844,0.30519325275377374,0.4104886025047358,0.2144775475229415,0.3282102353930224,0.26179211516770773,0.23788393190962936,0.3036388489210152,0.268833740042361,0.22607417283888004,0.32645371352163577,0.4338976376510281,0.22816198945431734,0.32516684508873445,0.44115436169241096,0.24087230156036218,0.30222942560826177,0.23016280283112062,0.26245717655562434,0.32819861843611725,0.24238483012297926,0.254659070167378,0.3072322281268825,0.4588206156606714,0.2597688295731532,0.29983617348493263,0.47144340013317865,0.2670577247691356,0.3204690070668085,0.21569139480561256,0.2980532126488948,0.3080151235009888,0.20671153935141334,0.30992039311205216,0.3309725945892245,0.2160859103078655,0.28529583733231256,0.330496464028274,0.4812356982394288,0.3010859555203079,0.29629145542608426,0.48373656974020063,0.28966746413892597,0.3187827766978441,0.4912473548973205,0.31563670759077517,0.3130088001099115,0.20797514402050396,0.32371042216935453,0.30953027821333773,0.4971844298737448,0.3424689929401327,0.32207102695398687,0.20170941309730334,0.36081523272753646,0.3301774729889703,0.4991061525239312,0.3598954488986081,0.336983265747308,0.21489547999339936,0.396126696306811,0.30396635402658967,0.20596986445021312,0.3858141001393751,0.3282590183129455,0.4867281931582289,0.39294200815427666,0.30571247205629914,0.49455035781206824,0.38410217626755105,0.32897060081172275,0.2143661274446241,0.409885912117406,0.327259504282044,0.2272390694899115,0.43273806332567477,0.3258304568224004,0.4739306119413752,0.4318075336917543,0.328816731717963,0.486309053411886,0.4086619710281972,0.3281227261057842,0.24002788792205765,0.4406135020800982,0.30314567462980047,0.25875143304975357,0.4587101629297524,0.3014634209558082,0.4454977712251615,0.4589914513414625,0.3112567525172667,0.4626659164523178,0.43940186422934924,0.30741246729057514,0.2652060308570865,0.470632016266394,0.32247002636225225,0.29994170450472635,0.482128858890271,0.2996399791455295,0.28810530696301556,0.4836326259713151,0.3215154735010731,0.400776686921308,0.4844800344189413,0.30714153049891046,0.4359410674960082,0.47159040973749966,0.33183670796596887,0.4109982107494389,0.4858666426033613,0.33212617240047604,0.3145959088963986,0.492110137596343,0.3175768736011415,0.3386603838894632,0.497959716067227,0.3281062673860484,0.36168592480564415,0.495857475719578,0.3169994554870751,0.386121652593688,0.49413736509846495,0.3295147322113494,0.3002481633413122,0.20849446587155684,0.3490312068790123,0.3223566482724223,0.2025848376293393,0.34785174291641585,0.3426221483254625,0.20047474317642486,0.3593682910134358,0.36215635417187214,0.2006711206809175,0.34271241778400335,0.38117356272829755,0.20341514990142867,0.3564102034604427,0.4026187888443323,0.20958030389237114,0.3536840203035185,0.24876486243327228,0.24164827441054643,0.32738693997634394,0.23838072163987506,0.24979832554295378,0.34912756984859616,0.25752563829482306,0.231896847104993,0.35037108419355906,0.2782370147191628,0.2182822678820564,0.35071623270520125,0.42534779045066323,0.22030206319506473,0.3489249824438805,0.44680036080572105,0.23547125581943074,0.34641434743680355,0.45451748908121864,0.2458360312472428,0.3230563163277186,0.4660866935733725,0.25522744361990135,0.34351600953247646,0.22182620315674717,0.2720859137894006,0.3509343301086057,0.4808545368667925,0.2770386865932339,0.3426694524531327,0.2027451857000201,0.3219185194274927,0.35523928567023527,0.2096017017886083,0.2972879157114761,0.35312314413767343,0.49124068003767707,0.3005621083240741,0.33965760331770545,0.49682833953156214,0.32273406620874817,0.3359284839162452,0.20177581776671094,0.33566976661041376,0.3319934397434514,0.4995349130539284,0.3385805586764566,0.3529843153004033,0.20011503887757626,0.3475361887925601,0.3553317974139705,0.49897835061009954,0.3565099482152915,0.3662194828440508,0.20191246778932853,0.3736852542861137,0.35301521693340293,0.49746419049998913,0.3770000402279726,0.3550309390645052,0.20816892064398007,0.39879803629776467,0.3516421273362384,0.21874818426746986,0.42261510190363283,0.3499114424538336,0.48155347218637023,0.4220525297564682,0.35145496096276707,0.49176865081858256,0.39894980267826974,0.3523593352532564,0.24443068564099554,0.4534209269562761,0.32432449156736537,0.23352474497755638,0.4444852883589196,0.34754129074745843,0.45745841395914283,0.4529302465322249,0.3310776952196385,0.4667210269409301,0.44418930116097755,0.3521394898133299,0.25251814722259874,0.46391731215729126,0.34551286617724236,0.2746107074613346,0.47954399456581287,0.34410016589621556,0.2991056593809396,0.49090395205092974,0.3425272234490559,0.40144024845822,0.490815010266631,0.3550033710801016,0.4254606585345717,0.4795904145141456,0.3534660466789541,0.4474370277291217,0.464010053685749,0.3527808786178079,0.32019276416811354,0.4968707439279767,0.34363499645679607,0.3398999114444402,0.49949425915686657,0.3570324028830447,0.3605883086980727,0.4994091276694658,0.3419501373947395,0.3800103182063068,0.49688172081673615,0.35501406931250257,0.29320620445136364,0.21329029727605234,0.374185160084431,0.31701440312466955,0.205322154461621,0.37191509546297113,0.33773928350531923,0.20468975493539168,0.38513698208868463,0.36254937711042934,0.20223481906146476,0.3725380663842792,0.3880852267720826,0.2081859161138604,0.38063137465498414,0.41460939960018917,0.2169074135803314,0.3747384098807121,0.24965540730406116,0.24085865743755108,0.37278442582889276,0.2630933716428604,0.2369208621434601,0.3964795280657588,0.2702850121759365,0.22529317267575988,0.3743665330921649,0.43579419414259835,0.22870173306757002,0.3706418674206356,0.4461785341705003,0.2412002533086099,0.38758064242004453,0.45748057823853716,0.24658352598117508,0.365904659789615,0.2318524683780573,0.2599029833331997,0.37058369158786564,0.24393061430022867,0.2536195696253379,0.3942729946814991,0.4635575059980695,0.2597773776709284,0.3882697171607541,0.4742184535161077,0.26742319082574706,0.3658381309713491,0.20863768850750064,0.3086236969949497,0.3783672071084175,0.21694673650310886,0.2845466409971195,0.3726425896943548,0.48703430640994616,0.2907443784330614,0.3645041435273075,0.4953677101522653,0.31522649536021435,0.3626107977604032,0.20393758236415457,0.33290042181306967,0.37955291153509124,0.49549500556944304,0.3328927614543614,0.38222647581865504,0.20282298149686012,0.360281249544966,0.3770780562877132,0.4948673928810616,0.35917853149027823,0.38780466954658,0.2067874222493382,0.3862288939363635,0.3760312277497311,0.4933120621817314,0.38353102896418,0.3789365327885504,0.21508841982328997,0.4108262602137258,0.37447512211686096,0.22745824419336028,0.43366534860493244,0.37199153306709215,0.47313149796375087,0.4323582857341928,0.3735742864182112,0.48605872742807416,0.40807061063581185,0.3748158592645297,0.24375832402536068,0.4542516609854642,0.3685552544545093,0.2399339420705539,0.4423005428369251,0.3931980634274358,0.25674054634086135,0.46091856872914094,0.3887265466350641,0.45536180650114105,0.45406217018132244,0.3738737191901385,0.4600156858861334,0.4419455996944973,0.39407443199659953,0.4416686566551742,0.4585739175396179,0.39804749543041795,0.26468036136898776,0.4722778960819778,0.3663913206801199,0.28908830719307693,0.4863083807009632,0.36448416480423734,0.41241135044892174,0.4838640671563439,0.37617699103227353,0.4349947038691483,0.4708209985254559,0.3760420166175274,0.31464019874676386,0.4945483913570604,0.3688533024008459,0.3377311360124156,0.4958898168967192,0.3826440852574534,0.36116398584934384,0.49811237747104975,0.37093057714992395,0.38598839382840605,0.4924209603043032,0.3803497211791414,0.3113057914056193,0.21252230655636287,0.39585457476274194,0.3187327897940417,0.21975062354281383,0.4175089734661298,0.33925196640144667,0.211869202031262,0.4074835839721573,0.3635228546853031,0.20786265880852617,0.39597943714508405,0.3837075602625576,0.2158829044277931,0.408106841735045,0.40515609701770494,0.21841717487404888,0.3963008109394089,0.2541195793298596,0.25574106502556965,0.41649960984549483,0.285602526735938,0.2229074799776254,0.39690902675996087,0.2963017909763531,0.22756765832442588,0.41802076197374005,0.40600574880802487,0.22890615525214658,0.418553897516007,0.4266966839285533,0.23063239874384717,0.39867231702637224,0.44585537838291295,0.2507122590979357,0.40876811160513105,0.22793850563399143,0.2727758171307282,0.3904650117176572,0.23605989354683918,0.2745843686663896,0.4118880819867229,0.46319109448158635,0.27160043829029334,0.40950869561489717,0.4780811587886661,0.2816865749803583,0.3877954061419942,0.2191763831941674,0.2946122733811865,0.398139183892545,0.22867790989150324,0.2971906558642927,0.4206549617766667,0.4766847815787598,0.2952058760253942,0.40872452719432867,0.4888098614974552,0.30627426896239257,0.3863301912503101,0.20834145762368703,0.34628341890469877,0.39918378184707226,0.2136738564579022,0.31802004973668435,0.4037816452713675,0.4858440627892606,0.32069048016147644,0.4064565554363937,0.4886627504264444,0.34544957466591686,0.4070257421999268,0.21019142798508608,0.3726658367330342,0.3993945648461657,0.48727794818765724,0.37293319662083996,0.40593597620616606,0.21631429786057957,0.3976805509740028,0.3985252316048639,0.2224936019025192,0.3843130773934967,0.4211669246489874,0.23054800857246907,0.40796640795047223,0.41979339004029326,0.4836580419525439,0.3962074066940749,0.4000040337174948,0.4748528647771708,0.38580940597516755,0.4250296514761939,0.4694714764638631,0.40816780792868584,0.4195921865751903,0.22635791032781857,0.42106132910177874,0.3965072162979567,0.4753045290474955,0.4190950470501923,0.39499610509051936,0.2569785057376954,0.44951477717997135,0.412799766942471,0.2743383869268138,0.46625062688683505,0.4071061472661333,0.4434331852739204,0.4453749926018499,0.4183655664480763,0.4607564018199726,0.42892016788825477,0.4132821187728606,0.2784503218882597,0.4766044330259419,0.3867690236515213,0.2994648858897413,0.4859747078162172,0.38817173137489935,0.2961369462652633,0.47555776059831745,0.41191946540389757,0.3185474488647178,0.4779805745262344,0.421635951665469,0.4011695401119052,0.4825983883335314,0.3979514919067813,0.4024780713302841,0.4709579710039344,0.42152077516403863,0.3814782639825697,0.48435846417079675,0.408795595092731,0.42186319326608274,0.47182795119340804,0.3999362770099877,0.3189492664955867,0.4886692165238947,0.39802812027851076,0.3627066876429826,0.4923749092288692,0.3954744467939404,0.33804675778880017,0.225082593705266,0.43217518850137643,0.3607476250689607,0.21828663803628087,0.4209653354504251,0.27437983824723344,0.23993084642461993,0.4183108524883478,0.2892680421447033,0.24528031521686688,0.43857435810652945,0.31285928538538116,0.23446555585825737,0.4381609864666565,0.33321028580101875,0.24139756096645698,0.45209611027400654,0.3588546677043417,0.2331470882049308,0.4436322159561519,0.3826774975014435,0.2284935855534547,0.4316601028984627,0.4037438210956997,0.24271252343993194,0.44000555020334176,0.42622741678234216,0.24354522059881778,0.42318989597845275,0.24758899195511389,0.277751864831992,0.4324147583626593,0.2634212338793505,0.28226616270218097,0.4520600046146308,0.2675227199730543,0.25999284984125126,0.4371562459015832,0.4233167648630276,0.25929993701976384,0.44433000882752377,0.46025858254635166,0.28599202983958527,0.4290317956952314,0.44442070777917453,0.26433605126198223,0.42903428261893684,0.2281007980785296,0.31771283555107016,0.4312288346756024,0.24400438004996,0.29992112971066887,0.44357903238413526,0.4543336500620615,0.3022046712345362,0.44659242212993994,0.4719011049443904,0.31051200491137476,0.42797960539280394,0.21776248890275443,0.3355136406965428,0.41930646472687083,0.23038316736115344,0.3429819559503808,0.44023613692511315,0.46243332697403616,0.327286751813325,0.44665844682364797,0.47732039946229055,0.33571127771424064,0.42800864244558545,0.2183277803648811,0.35991937036164245,0.42116201703148654,0.2325749608854049,0.3681383558098794,0.4415552305302653,0.4779360811973491,0.36090870578435214,0.42754585266779727,0.46397696465335364,0.35213312736036345,0.44749205760508204,0.23866713380063337,0.39300513640801277,0.44086006353928076,0.46236190840979297,0.37714379810083676,0.44559296921411273,0.2422354185277701,0.42996092556735477,0.4170301824742188,0.24895634478986028,0.4167042253696704,0.43854787439349757,0.26297775171407356,0.4382542388629373,0.4344885650605227,0.449404520057381,0.4244837903658539,0.4340886815504753,0.4573543163856794,0.4017322491860317,0.4410978877225908,0.43616661750725183,0.41718134770812687,0.4527714967657799,0.2799456955726622,0.45721425421838824,0.4280864784940177,0.2865307381165316,0.4437868651970288,0.44836501772724924,0.30264605055636884,0.46314152984774726,0.4363515934757508,0.42348010035147904,0.4590332577138351,0.42219711604105103,0.4286424744809158,0.44064151502278354,0.4399970941858291,0.40517788487646667,0.45392889004954345,0.44302788202269944,0.32683069729153974,0.46351280551144497,0.4452786775565477,0.34166419193968284,0.48803950665695656,0.40809999058421254,0.340701190970501,0.47596824602231164,0.43090446925043924,0.3622534783635082,0.4805467781895433,0.4228518426144818,0.35591976217163834,0.4644197465272047,0.44681465808689025,0.38166386349093745,0.4704924560983479,0.4335402164960983,0.30775601350832343,0.25267694289199294,0.45603616439895706,0.32823848215807194,0.26085629118146125,0.46865848271106036,0.35435168773541653,0.2508252309582847,0.46245189193328784,0.3797243959909512,0.24478311509772566,0.4526930738386707,0.28453501655024316,0.2660245994818751,0.45565258184135193,0.3037458869121078,0.2743114169202251,0.4709619585399827,0.32445734008917687,0.28340793184687463,0.48195858813949755,0.34937509861558547,0.27110093640496796,0.47757173378960893,0.3752842050578921,0.2639711750082642,0.4702487016359501,0.3998649399267561,0.2599376958222924,0.4590975212014603,0.44009785546537317,0.2805372659267419,0.44776146999512917,0.41823218609170376,0.2777709805928047,0.4623714266912284,0.24389989325050115,0.32411472592345403,0.4528237323468033,0.26148277802593367,0.30637482560850604,0.46296701099571325,0.2815616040183587,0.28950928911577256,0.4689834436053221,0.41290654759994344,0.3002480587707829,0.4767576846308758,0.44442746256320376,0.3196186436378963,0.4625185651324865,0.43298783766197907,0.29957627594397535,0.46432614247192494,0.24656268613214072,0.3501108577757341,0.45863107202985487,0.26255960884065227,0.3317804300247152,0.470508195836698,0.44640079779837954,0.34269498176050317,0.4646888089237854,0.4257320586866811,0.3259420803904722,0.4772237076614991,0.25011616364924094,0.37554483178423165,0.45895265396019547,0.2660442846970147,0.35766143326204286,0.47406748288062966,0.44641462138522126,0.3673807118238854,0.4635875505486383,0.42769642434751387,0.3529267154714823,0.47827587450553605,0.25818843445357953,0.4005581731749624,0.45730567346196493,0.27045142571225844,0.3825648788340785,0.4729290567575845,0.44305614493133094,0.3925760018503567,0.45967150020382486,0.4264699882037622,0.37982062469250477,0.4755510702744713,0.2707497856795089,0.42366323388037835,0.4538899971337034,0.28069547867555605,0.4068005464094031,0.47029372906175504,0.2954306869644862,0.42719039557289734,0.4664638695309911,0.4144084203277196,0.4315054226883605,0.45820545948924885,0.4215671520149052,0.406111349262833,0.4692881353546102,0.3989651448967191,0.41779770831503077,0.47452262980066434,0.3106935728070554,0.44719490488602925,0.45727607023712913,0.32077771998202326,0.42950304318253085,0.47379549456772485,0.3375049757100449,0.44888627490740646,0.4620954013460421,0.3451399671886496,0.4288067399726486,0.47753775055235975,0.3625384454041297,0.44533198112927674,0.4651286270256658,0.37264062313179713,0.4259359172373444,0.4773622340316277,0.3803232571763275,0.45650453483908093,0.4511794649764926,0.3907771323640384,0.4393801436650503,0.4633508508771798,0.3015469660644965,0.2988600953604258,0.4824273901271946,0.3458289385758517,0.29431866882431673,0.48921993968214417,0.36971832400185106,0.2855069290249664,0.48398444497316584,0.3951268075917195,0.28049494275441245,0.4750304693019566,0.28146240904010955,0.3149243057519092,0.47873342339279723,0.3224865479853369,0.3085236509323167,0.4915016693408686,0.34394916371449985,0.3193672908912146,0.4967140910509369,0.3656952390390806,0.3113706993185592,0.4940882944599212,0.38780425385382117,0.30234454341358974,0.4871123475406085,0.4030944899255159,0.32057727880799913,0.48716879607697616,0.28410020361311844,0.34081060874784613,0.4844350100404742,0.3035282304871017,0.32599279751869653,0.4905845968353637,0.3270143137172369,0.33610781058698325,0.4975759645044655,0.3561402482367835,0.340209530193697,0.49955415090381994,0.3807275545033826,0.3297367989589487,0.49541396108287394,0.405759936443077,0.3432841673037961,0.48908891788730186,0.28877804803341517,0.36589308233661055,0.4860120675941767,0.308118441080798,0.35351952670514586,0.4939914857006107,0.3338696225245621,0.3599414132829683,0.4987984516869618,0.3592370629785563,0.36447969029302224,0.4990134733389848,0.38239317585395577,0.3535398304994741,0.49641773034072645,0.4068693705701527,0.3672538101565902,0.4877250185189132,0.2932790634823047,0.3887289749299345,0.4833521723161347,0.3145153047683441,0.38059317216248956,0.49249524280253276,0.33900706737275077,0.3848641903857019,0.49547729603275653,0.3630140659050134,0.38775857229458593,0.49458535301646045,0.38489413167019126,0.3777699839941016,0.4932174136198203,0.4045030119544968,0.3928118547157171,0.48302844351373997,0.3065130763540642,0.4079663369083902,0.481334653679962,0.3290562408911834,0.40645651320864845,0.4873827539056979,0.35434354929866096,0.40895307583178075,0.48786104754230764,0.38126975666073454,0.403804594439644,0.48648174945963973};

4 
	gåüngÀs
[] = {1,4,2,1,0,4,0,3,4,4,3,6,3,5,6,6,5,8,5,7,8,8,7,9,21,10,11,12,10,13,12,13,1,1,13,0,3,0,14,0,13,14,5,3,15,3,14,15,5,15,16,5,16,7,9,7,17,7,18,17,7,16,18,17,27,19,20,10,21,12,11,10,13,10,22,10,20,22,14,13,22,14,22,23,15,14,23,15,23,24,16,24,25,15,24,16,18,25,26,16,25,18,17,18,27,18,26,27,28,20,29,20,21,29,22,20,30,20,28,30,23,22,30,23,30,31,24,31,32,23,31,24,25,32,33,24,32,25,26,25,33,26,33,34,27,26,35,26,34,35,36,28,37,28,29,37,28,36,38,28,38,30,31,38,39,30,38,31,32,39,40,31,39,32,33,40,41,32,40,33,34,41,42,33,41,34,35,34,43,34,42,43,44,36,37,38,36,45,36,46,45,36,44,46,39,45,47,38,45,39,40,39,47,40,47,48,41,48,49,40,48,41,49,51,50,49,50,42,41,49,42,43,42,50,53,45,46,47,45,53,46,52,53,48,47,54,47,53,54,49,48,55,48,54,55,51,49,55,57,56,58,58,56,60,56,59,60,60,61,62,59,61,60,62,61,64,61,63,64,64,63,65,67,66,68,1,2,66,66,57,68,2,57,66,2,56,57,56,2,4,56,4,59,59,4,6,59,6,61,61,8,63,6,8,61,63,8,9,63,70,65,9,69,70,9,70,63,70,69,71,73,72,74,72,11,74,11,67,74,12,66,67,12,67,11,66,12,1,69,9,17,69,19,76,69,76,71,17,19,69,19,75,76,76,75,77,78,72,79,72,73,79,78,21,72,21,11,72,19,27,75,27,80,75,77,75,81,75,80,81,82,78,83,78,79,83,82,29,78,29,21,78,27,35,80,43,84,80,81,84,85,80,84,81,86,82,87,82,83,87,86,37,82,37,29,82,35,43,80,43,88,84,85,84,89,84,88,89,90,86,87,44,37,86,44,92,91,86,90,92,86,92,44,46,44,91,50,51,93,43,50,88,93,95,88,93,94,95,93,88,50,89,88,95,96,91,92,52,98,97,46,91,52,52,91,98,91,96,98,53,52,99,52,97,99,54,53,99,54,99,100,55,100,101,54,100,55,51,55,101,51,103,93,101,102,103,101,103,51,94,93,103,104,97,98,99,97,105,97,104,105,100,105,107,99,105,100,101,100,107,105,106,107,102,101,107,109,108,110,110,111,168,108,111,110,112,111,113,115,114,172,114,117,116,57,117,114,57,58,117,117,58,109,58,108,109,58,60,108,108,60,62,108,62,111,62,64,113,62,113,111,113,64,118,118,64,65,118,121,119,118,65,121,65,120,121,128,122,124,122,67,68,122,115,124,122,68,115,68,114,115,114,68,57,120,65,70,120,70,71,120,126,121,120,71,126,71,125,126,126,125,178,128,73,74,128,124,123,128,74,122,122,74,67,125,71,76,125,129,127,76,129,125,76,77,129,131,130,186,130,73,132,79,73,130,132,73,128,77,134,129,133,134,77,81,133,77,134,133,135,136,131,137,130,131,136,136,79,130,83,79,136,81,85,133,85,138,133,135,138,139,133,138,135,140,136,137,141,87,140,83,136,140,87,83,140,85,143,138,89,143,85,89,142,143,139,138,143,90,87,141,90,148,144,90,141,148,92,90,144,95,94,146,89,95,142,95,146,142,142,146,147,148,141,145,96,92,144,96,150,149,96,144,150,144,148,150,98,96,149,103,102,151,94,103,151,94,153,146,94,151,153,151,152,153,147,146,201,154,149,199,104,98,155,98,149,155,155,149,154,105,104,156,104,157,156,104,155,157,106,105,156,106,156,158,107,160,102,158,160,106,106,160,107,102,160,159,102,159,151,151,159,152,152,159,161,162,156,157,158,210,163,156,162,158,160,158,163,165,164,166,110,167,166,110,166,164,109,110,164,167,110,168,111,112,168,168,112,169,112,170,169,112,113,170,169,170,171,172,116,173,114,116,172,173,116,165,116,164,165,116,117,164,164,117,109,170,113,118,170,118,119,170,119,171,171,119,174,174,119,175,119,121,175,176,123,177,123,124,177,177,115,172,124,115,177,175,126,178,121,126,175,178,127,179,125,127,178,181,180,182,180,128,123,180,123,182,182,123,176,127,129,183,127,184,179,127,183,184,184,183,185,186,180,181,132,180,186,130,132,186,180,132,128,183,129,134,135,187,185,135,185,134,134,185,183,137,131,188,131,232,188,139,189,187,139,187,135,140,137,190,137,191,190,137,188,191,141,140,190,143,142,192,139,193,189,143,192,139,139,192,193,194,190,191,195,145,194,145,190,194,145,141,190,142,147,192,147,197,192,147,196,197,193,192,197,148,145,198,145,195,198,150,198,199,148,198,150,153,200,201,152,200,153,147,201,196,153,201,146,154,199,202,150,199,149,155,154,203,154,204,203,154,202,204,157,155,203,159,160,205,161,159,205,161,207,206,161,205,207,152,161,200,161,206,200,208,203,204,162,208,209,157,208,162,157,203,208,158,162,210,162,209,210,160,163,205,163,211,205,163,210,211,207,205,211,212,166,213,165,166,212,213,167,214,166,167,213,214,167,215,167,168,215,215,169,216,168,169,215,216,169,217,169,171,217,219,220,262,218,173,220,173,221,220,172,173,218,221,165,212,173,165,221,217,171,222,171,174,222,222,174,223,175,224,174,174,224,223,223,225,267,226,176,219,177,218,176,176,218,219,218,177,172,224,175,178,224,179,225,179,227,225,178,179,224,228,181,229,181,182,229,229,182,226,182,176,226,227,184,230,179,184,227,230,185,231,184,185,230,232,181,228,186,181,232,185,187,231,187,233,231,234,188,232,131,186,232,187,189,233,189,235,233,236,188,234,191,188,236,189,237,235,193,237,189,194,191,238,191,236,238,195,194,239,194,238,239,197,240,241,196,240,197,193,241,237,197,241,193,195,243,242,195,242,198,195,239,243,199,198,242,201,200,244,196,245,240,244,245,196,201,244,196,246,243,286,202,246,247,242,246,202,199,242,202,204,247,248,202,247,204,206,207,250,207,249,250,206,251,244,206,244,200,206,250,251,245,251,289,208,248,252,204,248,208,209,252,253,208,252,209,210,209,254,209,253,254,211,254,255,210,254,211,207,211,249,211,255,249,256,212,257,212,213,257,257,214,258,213,214,257,258,214,259,214,215,259,259,216,260,215,216,259,260,217,261,216,217,260,219,218,220,262,264,263,220,264,262,220,221,264,264,221,256,221,212,256,261,222,265,217,222,261,265,267,266,223,267,265,222,223,265,223,224,225,268,262,269,219,262,268,226,219,268,269,262,263,266,267,270,271,270,267,227,271,225,225,271,267,272,229,273,228,229,272,273,226,268,229,226,273,271,227,274,227,230,274,274,230,275,230,231,275,276,228,272,232,228,234,233,277,275,233,275,231,278,234,276,234,228,276,233,235,277,235,279,277,280,236,278,236,234,278,235,237,281,235,281,279,238,280,282,236,280,238,239,282,283,238,282,239,241,240,285,240,284,285,237,241,281,241,285,281,286,283,287,243,283,286,243,239,283,288,286,287,290,289,291,240,245,284,289,290,284,245,289,284,242,243,246,247,246,292,286,288,292,246,286,292,248,247,293,247,292,293,250,294,295,249,294,250,295,291,289,250,295,251,251,295,289,244,251,245,252,248,296,248,293,296,253,296,297,252,296,253,254,253,298,253,297,298,255,298,299,254,298,255,249,299,294,255,299,249,300,256,257,300,258,302,300,302,301,257,258,300,302,258,303,258,259,303,260,305,304,260,304,303,259,260,303,305,260,261,306,263,350,263,264,307,307,264,256,307,300,308,307,256,300,308,300,301,304,305,309,305,261,310,305,310,309,261,265,310,310,266,311,265,266,310,312,269,313,268,269,312,313,269,306,269,263,306,311,270,314,266,270,311,314,270,315,270,271,315,316,272,273,316,273,312,316,313,317,273,268,312,315,271,274,315,319,318,315,274,319,319,274,275,272,316,321,272,321,276,276,321,320,321,316,317,318,319,322,277,322,319,323,322,277,277,319,275,324,278,320,278,276,320,277,279,323,279,325,323,326,280,324,326,324,327,280,278,324,328,326,327,330,329,331,279,281,325,329,330,325,281,329,325,282,280,326,283,282,332,282,326,332,332,326,328,285,284,333,285,333,329,329,333,331,281,285,329,287,378,334,283,332,287,288,334,335,287,334,288,290,336,337,291,336,290,284,290,333,290,337,333,292,288,338,288,335,338,293,292,338,293,338,339,339,338,340,346,339,340,343,342,344,295,294,345,294,342,345,345,342,343,291,387,336,295,345,291,296,293,339,297,296,346,340,341,346,296,339,346,298,297,347,297,391,347,299,344,342,347,344,299,298,347,299,294,299,342,348,301,302,302,303,349,302,349,348,349,303,304,350,263,307,350,307,308,350,308,351,351,308,352,352,308,301,352,348,353,352,301,348,353,348,354,348,349,354,349,355,354,304,355,349,304,309,355,355,309,356,309,357,356,309,310,357,357,310,311,316,312,313,358,360,359,306,360,358,306,350,360,306,358,313,360,350,351,356,357,361,357,363,361,311,363,357,311,314,363,314,362,363,362,314,318,364,317,365,317,358,365,317,313,358,365,358,359,363,362,406,315,318,314,367,366,362,318,367,362,368,320,321,368,364,369,321,364,368,321,317,364,367,318,322,367,371,370,367,322,371,371,322,323,372,320,368,324,320,372,372,369,373,368,369,372,370,371,375,371,374,375,323,374,371,325,374,323,327,324,372,328,327,376,372,373,327,327,373,376,330,382,377,377,375,374,330,377,374,325,330,374,378,332,328,378,328,379,379,328,376,380,378,379,382,381,383,331,337,381,331,382,330,331,381,382,287,332,378,335,334,384,334,380,384,334,378,380,384,380,385,386,384,385,388,387,389,337,336,381,336,388,381,336,387,388,381,388,383,333,337,331,338,335,340,340,335,384,340,386,341,340,384,386,341,386,390,390,392,341,341,392,391,393,391,392,393,392,394,343,344,395,393,394,395,344,393,395,345,343,387,343,389,387,343,395,389,291,345,387,346,341,391,347,391,393,346,391,297,344,347,393,396,351,352,396,353,397,352,353,396,397,353,398,353,354,398,398,354,399,354,355,399,399,355,356,400,359,360,397,402,401,396,401,400,360,351,400,351,396,400,402,397,403,396,397,401,403,397,398,403,398,404,404,399,405,398,399,404,361,407,405,356,405,399,356,361,405,361,406,407,406,361,363,408,364,365,359,410,409,365,409,408,365,359,409,359,400,410,410,400,401,407,413,411,406,413,407,362,366,406,406,366,413,366,412,413,412,366,370,414,369,408,369,364,408,414,408,415,408,409,415,413,412,417,412,416,417,367,370,366,370,416,412,418,373,414,373,369,414,418,414,419,414,415,419,417,416,421,416,420,421,370,375,416,375,420,416,422,376,418,376,373,418,422,418,423,418,419,423,421,420,425,420,424,425,375,377,420,377,424,420,379,376,422,422,427,426,379,426,380,379,422,426,422,423,427,428,426,427,430,429,431,383,430,424,383,424,382,383,429,430,424,430,425,377,382,424,385,380,426,385,428,432,385,432,386,385,426,428,432,428,433,434,433,435,432,433,434,436,434,435,436,435,437,438,436,439,436,437,439,388,389,429,389,439,429,429,439,431,438,439,389,383,388,429,390,386,432,392,390,394,390,432,434,394,434,436,390,434,394,395,394,438,394,436,438,389,395,438,440,401,402,440,402,445,402,403,441,441,403,442,403,404,442,442,404,443,404,405,443,443,405,407,444,409,410,444,440,451,410,440,444,410,401,440,445,441,446,402,441,445,446,441,447,441,442,447,442,443,448,442,448,447,443,411,448,407,411,443,448,411,449,449,411,417,450,415,444,415,409,444,450,444,451,440,445,451,451,445,452,445,446,452,452,446,453,446,447,453,453,447,454,447,448,454,454,449,455,448,449,454,413,417,411,417,455,449,456,419,450,419,415,450,456,450,457,450,451,457,457,451,452,457,452,458,458,452,453,458,453,459,459,453,460,453,454,460,460,454,455,460,455,461,417,421,455,421,461,455,462,423,456,423,419,456,456,457,463,456,463,462,463,458,464,457,458,463,464,458,459,464,459,465,465,459,466,459,460,466,466,461,467,460,461,466,421,425,461,425,467,461,427,423,462,428,427,468,462,463,468,427,462,468,463,464,469,463,469,468,469,464,470,464,465,470,470,465,471,465,466,471,430,431,467,471,466,467,431,471,467,425,430,467,433,428,468,435,433,469,433,468,469,437,435,470,435,469,470,439,437,431,437,470,471,431,437,471};

	@mycode/surftrackexample.cpp

3 
	~<°dio.h
>

5 
	~<m©h.h
>

7 
	~<ve˘‹
>

8 
	~<vec.h
>

9 
	~<sur·øck.h
>

10 
	~<subdivisi⁄scheme.h
>

12 
	#NSIZE
 20000

	)

14 
	~"mesh.c
"

16 
	$¥ötmesh
(
i
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

18 
buf
[256];

19 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
i
, ".obj");

21 
FILE
 *
Â
;

23 
Â
 = 
	`f›í
(
buf
, "w+");

27 
i
=0;i<
Nvîticõs
;i++){

28 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

31 
i
=0;i<
NåüngÀs
;i++) {

32 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

37 
	`f˛o£
(
Â
);

38 
	}
}

40 
	$maö
()

44 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

45 
°d
::
ve˘‹
<> 
mas£s
;

47  
i
 = 0; i < 
Nvîticõs
; ++i )

49 
vs
.
	`push_back
–
	`Vec3d
–
vîticõs
[3*
i
], verticies[3*i + 1], verticies[3*i + 2] ) );

50 
mas£s
.
	`push_back
( 0.5 );

53 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

54  
i
 = 0; i < 
NåüngÀs
; ++i )

56 
ts
.
	`push_back
–
	`Vec3°
–
åüngÀs
[3*
i
],Åriangles[3*i + 1],Åriangles[3*i + 2] ) );

59 
SurfTøckInôüliz©i⁄P¨amëîs
 
∑ømëîs
;

61 
∑ømëîs
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

62 
∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

63 
∑ømëîs
.
m_mö_edge_Àngth
 = 0.001;

64 
∑ømëîs
.
m_max_edge_Àngth
 = 0.2;

65 
∑ømëîs
.
m_max_vﬁume_ch™ge
 = 0.1;

66 
∑ømëîs
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

67 
∑ømëîs
.
m_Ælow_vîãx_movemít
 = 
Ál£
;

70 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

72 
SurfTøck
 
	`surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
∑ømëîs
 );

73 
surÁ˚_åackî
.
m_vîbo£
 = 
Ál£
;

82 
Nvîticõs_out
 = 
surÁ˚_åackî
.
	`gë_num_vîti˚s
();

83 
vîticõs_out
[
Nvîticõs_out
*3];

84  
i
 = 0; i < 
Nvîticõs_out
; ++i )

86 c⁄° 
Vec3d
& 
pos
 = 
surÁ˚_åackî
.
	`gë_posôi⁄
(
i
);

87 
vîticõs_out
[3*
i
 + 0] = 
pos
[0];

88 
vîticõs_out
[3*
i
 + 1] = 
pos
[1];

89 
vîticõs_out
[3*
i
 + 2] = 
pos
[2];

92 
NåüngÀs_out
 = 
surÁ˚_åackî
.
m_mesh
.
	`num_åüngÀs
();

93 
åüngÀs_out
[
NåüngÀs_out
];

94  
i
 = 0; i < 
NåüngÀs_out
; ++i )

96 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
	`gë_åüngÀ
(
i
);

97 
åüngÀs_out
[3*
i
 + 0] = 
cuº_åi
[0];

98 
åüngÀs_out
[3*
i
 + 1] = 
cuº_åi
[1];

99 
åüngÀs_out
[3*
i
 + 2] = 
cuº_åi
[2];

103 
	`¥ötf
("Nvîticõs=%d NåüngÀs=%d\n",
Nvîticõs_out
,
NåüngÀs_out
);

104 
	`¥ötmesh
(100,
Nvîticõs_out
,
NåüngÀs_out
,
vîticõs_out
,
åüngÀs_out
);

108 
	`¥ötf
("Hello world\n");

110 
	}
}

	@mycode/surftrackexample2.cpp

3 
	~<°dio.h
>

5 
	~<m©h.h
>

7 
	~<ve˘‹
>

8 
	~<vec.h
>

9 
	~<sur·øck.h
>

10 
	~<subdivisi⁄scheme.h
>

12 
	#NSIZE
 20000

	)

14 
	~"mesh.c
"

16 
	$¥ötmesh
(
ii
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

18 
buf
[256];

19 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
ii
, ".obj");

21 
FILE
 *
Â
;

23 
Â
 = 
	`f›í
(
buf
, "w+");

28 
i
=0;i<
Nvîticõs
;i++){

29 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

32 
i
=0;i<
NåüngÀs
;i++) {

33 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

38 
	`f˛o£
(
Â
);

39 
	}
}

41 
	sElT›oP¨amëîs


43 
ElT›oP¨amëîs
()

45 
	mm_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

46 
	mm_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

47 
	mm_Ælow_vîãx_movemít
 = 
Ál£
;

49 
	mm_max_vﬁume_ch™ge
 = 0.1;

50 
	mm_mö_åüngÀ_™gÀ
 = 35;

51 
	mm_mö_edge_Àngth
 = 0.05;

52 
	mm_max_edge_Àngth
 = 0.2;

54 
boﬁ
 
	mm_Ælow_n⁄_m™ifﬁd
;

55 
boﬁ
 
	mm_Ælow_t›ﬁogy_ch™ges
;

56 
boﬁ
 
	mm_Ælow_vîãx_movemít
;

57 
	mm_max_vﬁume_ch™ge
;

58 
	mm_mö_åüngÀ_™gÀ
;

59 
	mm_mö_edge_Àngth
;

60 
	mm_max_edge_Àngth
;

63 
	sSurÁ˚Mesh


65 * 
	mvîticõs
;

66 
	mNvîticõs
;

67 * 
	måüngÀs
;

68 
	mNåüngÀs
;

71 
SurÁ˚Mesh
 
	$im¥ovemesh
(
SurÁ˚Mesh
 
msh
,
ElT›oP¨amëîs
 
ñ∑ømëîs
)

74 
	}
}

76 
	$maö
()

79 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

80 
°d
::
ve˘‹
<> 
mas£s
;

82  
i
 = 0; i < 
Nvîticõs
; ++i )

84 
vs
.
	`push_back
–
	`Vec3d
–
vîticõs
[3*
i
], verticies[3*i + 1], verticies[3*i + 2] ) );

85 
mas£s
.
	`push_back
( 0.5 );

88 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

89  
i
 = 0; i < 
NåüngÀs
; ++i )

91 
ts
.
	`push_back
–
	`Vec3°
–
åüngÀs
[3*
i
],Åriangles[3*i + 1],Åriangles[3*i + 2] ) );

94 
SurfTøckInôüliz©i⁄P¨amëîs
 
∑ømëîs
;

96 
∑ømëîs
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

97 
∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

98 
∑ømëîs
.
m_mö_edge_Àngth
 = 0.05;

99 
∑ømëîs
.
m_max_edge_Àngth
 = 0.2;

100 
∑ømëîs
.
m_max_vﬁume_ch™ge
 = 0.1;

101 
∑ømëîs
.
m_mö_åüngÀ_™gÀ
 = 35;

102 
∑ømëîs
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

103 
∑ømëîs
.
m_Ælow_vîãx_movemít
 = 
åue
;

106 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

108 
SurfTøck
 
	`surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
∑ømëîs
 );

109 
surÁ˚_åackî
.
m_vîbo£
 = 
Ál£
;

111 
surÁ˚_åackî
.
	`im¥ove_mesh
();

112 
surÁ˚_åackî
.
	`t›ﬁogy_ch™ges
();

113 
surÁ˚_åackî
.
	`de‰ag_mesh
();

117 
Nvîticõs_out
 = 
surÁ˚_åackî
.
	`gë_num_vîti˚s
();

118 
vîticõs_out
[
Nvîticõs_out
*3];

120  
i
 = 0; i < 
Nvîticõs_out
; ++i )

122 
vîticõs_out
[3*
i
+0] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[0];

123 
vîticõs_out
[3*
i
+1] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[1];

124 
vîticõs_out
[3*
i
+2] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[2];

128 
NåüngÀs_out
 = 
surÁ˚_åackî
.
m_mesh
.
	`num_åüngÀs
();

129 
åüngÀs_out
[
NåüngÀs_out
*3];

130  
i
 = 0; i < 
NåüngÀs_out
; ++i )

132 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
	`gë_åüngÀ
(
i
);

133 
åüngÀs_out
[3*
i
 + 0] = 
cuº_åi
[0];

134 
åüngÀs_out
[3*
i
 + 1] = 
cuº_åi
[1];

135 
åüngÀs_out
[3*
i
 + 2] = 
cuº_åi
[2];

138 
	`¥ötf
("Nvîticõs=%d NåüngÀs=%d vﬁume=%‡\n",
Nvîticõs_out
,
NåüngÀs_out
,
surÁ˚_åackî
.
	`gë_vﬁume
());

139 
	`¥ötmesh
(100,
Nvîticõs_out
,
NåüngÀs_out
,
vîticõs_out
,
åüngÀs_out
);

141 
	`¥ötf
("Hello world\n");

143 
	}
}

	@mycode/surftrackexample3.cpp

3 
	~<°dio.h
>

5 
	~<m©h.h
>

7 
	~<ve˘‹
>

8 
	~<vec.h
>

9 
	~<sur·øck.h
>

10 
	~<subdivisi⁄scheme.h
>

12 
	#NSIZE
 20000

	)

14 
	~"mesh.c
"

16 
	$¥ötmesh
(
ii
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

18 
buf
[256];

19 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
ii
, ".obj");

21 
FILE
 *
Â
;

23 
Â
 = 
	`f›í
(
buf
, "w+");

28 
i
=0;i<
Nvîticõs
;i++){

29 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

32 
i
=0;i<
NåüngÀs
;i++) {

33 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

38 
	`f˛o£
(
Â
);

39 
	}
}

41 
	sElT›oP¨amëîs


43 
ElT›oP¨amëîs
()

45 
	mm_cﬁlisi⁄_ß„ty
 = 
åue
;

46 
	mm_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

47 
	mm_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

48 
	mm_Ælow_vîãx_movemít
 = 
Ál£
;

49 
	mm_u£_‰a˘i⁄
 = 
Ál£
;

50 
	mm_vîbo£
 = 
Ál£
;

51 
	mm_u£_curv©uª_whí_•lôtög
 = 
Ál£
;

52 
	mm_u£_curv©uª_whí_cﬁœpsög
 = 
Ál£
;

53 
	mm_≥rf‹m_im¥ovemít
 = 
åue
;

55 
	mm_¥oximôy_ïsû⁄
 = 1e-4;

56 
	mm_‰i˘i⁄_c€fficõ¡
 = 0.0;

57 
	mm_mö_åüngÀ_¨ó
 = 1e-7;

58 
	mm_im¥ove_cﬁlisi⁄_ïsû⁄
 = 2e-6;

59 
	mm_mö_curv©uª_mu…ùlõr
 = 1;

60 
	mm_max_curv©uª_mu…ùlõr
 = 1;

61 
	mm_edge_Êù_mö_Àngth_ch™ge
 = 1e-8;

62 
	mm_mîge_¥oximôy_ïsû⁄
 = 1e-5;

64 
	mm_max_vﬁume_ch™ge
 = 0.1;

65 
	mm_mö_åüngÀ_™gÀ
 = 35;

66 
	mm_max_åüngÀ_™gÀ
 = 180;

67 
	mm_mö_edge_Àngth
 = 0.01;

68 
	mm_max_edge_Àngth
 = 0.005;

72 
	mm_¥oximôy_ïsû⁄
;

74 
	mm_‰i˘i⁄_c€fficõ¡
;

76 
	mm_mö_åüngÀ_¨ó
;

81 
	mm_im¥ove_cﬁlisi⁄_ïsû⁄
;

84 
boﬁ
 
	mm_u£_‰a˘i⁄
;

88 
	mm_mö_edge_Àngth
;

89 
	mm_max_edge_Àngth
;

90 
	mm_max_vﬁume_ch™ge
;

93 
	mm_mö_åüngÀ_™gÀ
;

94 
	mm_max_åüngÀ_™gÀ
;

97 
boﬁ
 
	mm_u£_curv©uª_whí_•lôtög
;

98 
boﬁ
 
	mm_u£_curv©uª_whí_cﬁœpsög
;

101 
	mm_mö_curv©uª_mu…ùlõr
;

102 
	mm_max_curv©uª_mu…ùlõr
;

104 
boﬁ
 
	mm_Ælow_vîãx_movemít
;

107 
	mm_edge_Êù_mö_Àngth_ch™ge
;

110 
	mm_mîge_¥oximôy_ïsû⁄
;

113 
boﬁ
 
	mm_cﬁlisi⁄_ß„ty
;

116 
boﬁ
 
	mm_Ælow_t›ﬁogy_ch™ges
;

119 
boﬁ
 
	mm_Ælow_n⁄_m™ifﬁd
;

122 
boﬁ
 
	mm_≥rf‹m_im¥ovemít
;

125 
boﬁ
 
	mm_vîbo£
;

128 
	sSurÁ˚Mesh


130 * 
	mvîticõs
;

131 
	mNvîticõs
;

132 * 
	måüngÀs
;

133 
	mNåüngÀs
;

136 
	$im¥ovemesh
(
SurÁ˚Mesh
 
msh
,
ElT›oP¨amëîs
 
ñ∑ømëîs
,SurÁ˚Mesh * 
outmsh
)

138 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

139 
°d
::
ve˘‹
<> 
mas£s
;

141  
i
 = 0; i < 
msh
.
Nvîticõs
; ++i )

143 
vs
.
	`push_back
–
	`Vec3d
–
msh
.
vîticõs
[3*
i
], msh.verticies[3*i + 1], msh.verticies[3*i + 2] ) );

144 
mas£s
.
	`push_back
( 0.5 );

147 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

148  
i
 = 0; i < 
msh
.
NåüngÀs
; ++i )

150 
ts
.
	`push_back
–
	`Vec3°
–
msh
.
åüngÀs
[3*
i
], msh.triangles[3*i + 1], msh.triangles[3*i + 2] ) );

153 
SurfTøckInôüliz©i⁄P¨amëîs
 
∑ømëîs
;

155 
∑ømëîs
.
m_¥oximôy_ïsû⁄
 = 
ñ∑ømëîs
.m_proximity_epsilon;

156 
∑ømëîs
.
m_‰i˘i⁄_c€fficõ¡
 = 
ñ∑ømëîs
.m_friction_coefficient;

157 
∑ømëîs
.
m_mö_åüngÀ_¨ó
 = 
ñ∑ømëîs
.m_min_triangle_area;

158 
∑ømëîs
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 = 
ñ∑ømëîs
.m_improve_collision_epsilon;

159 
∑ømëîs
.
m_u£_‰a˘i⁄
 = 
ñ∑ømëîs
.m_use_fraction;

160 
∑ømëîs
.
m_mö_edge_Àngth
 = 
ñ∑ømëîs
.m_min_edge_length;

161 
∑ømëîs
.
m_max_edge_Àngth
 = 
ñ∑ømëîs
.m_max_edge_length;

162 
∑ømëîs
.
m_max_vﬁume_ch™ge
 = 
ñ∑ømëîs
.m_max_volume_change;

163 
∑ømëîs
.
m_mö_åüngÀ_™gÀ
 = 
ñ∑ømëîs
.m_min_triangle_angle;

164 
∑ømëîs
.
m_max_åüngÀ_™gÀ
 = 
ñ∑ømëîs
.m_max_triangle_angle;

165 
∑ømëîs
.
m_u£_curv©uª_whí_•lôtög
 = 
ñ∑ømëîs
.m_use_curvature_when_splitting;

166 
∑ømëîs
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
ñ∑ømëîs
.m_use_curvature_when_collapsing;

167 
∑ømëîs
.
m_mö_curv©uª_mu…ùlõr
 = 
ñ∑ømëîs
.m_min_curvature_multiplier;

168 
∑ømëîs
.
m_max_curv©uª_mu…ùlõr
 = 
ñ∑ømëîs
.m_max_curvature_multiplier;

169 
∑ømëîs
.
m_Ælow_vîãx_movemít
 = 
ñ∑ømëîs
.m_allow_vertex_movement;

170 
∑ømëîs
.
m_edge_Êù_mö_Àngth_ch™ge
 = 
ñ∑ømëîs
.m_edge_flip_min_length_change;

171 
∑ømëîs
.
m_mîge_¥oximôy_ïsû⁄
 = 
ñ∑ømëîs
.m_merge_proximity_epsilon;

172 
∑ømëîs
.
m_cﬁlisi⁄_ß„ty
 = 
ñ∑ømëîs
.m_collision_safety;

173 
∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = 
ñ∑ømëîs
.m_allow_topology_changes;

174 
∑ømëîs
.
m_Ælow_n⁄_m™ifﬁd
 = 
ñ∑ømëîs
.m_allow_non_manifold;

175 
∑ømëîs
.
m_≥rf‹m_im¥ovemít
 = 
ñ∑ømëîs
.m_perform_improvement;

177 
∑ømëîs
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

179 
SurfTøck
 
	`surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
∑ømëîs
 );

180 
surÁ˚_åackî
.
m_vîbo£
 = 
ñ∑ømëîs
.m_verbose;

182 
surÁ˚_åackî
.
	`im¥ove_mesh
();

183 
surÁ˚_åackî
.
	`t›ﬁogy_ch™ges
();

184 
surÁ˚_åackî
.
	`de‰ag_mesh
();

188 
Nvîticõs_out
 = 
surÁ˚_åackî
.
	`gë_num_vîti˚s
();

191  
i
 = 0; i < 
Nvîticõs_out
; ++i )

193 
outmsh
->
vîticõs
[3*
i
+0] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[0];

194 
outmsh
->
vîticõs
[3*
i
+1] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[1];

195 
outmsh
->
vîticõs
[3*
i
+2] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[2];

198 
NåüngÀs_out
 = 
surÁ˚_åackî
.
m_mesh
.
	`num_åüngÀs
();

200  
i
 = 0; i < 
NåüngÀs_out
; ++i )

202 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
	`gë_åüngÀ
(
i
);

203 
outmsh
->
åüngÀs
[3*
i
 + 0] = 
cuº_åi
[0];

204 
outmsh
->
åüngÀs
[3*
i
 + 1] = 
cuº_åi
[1];

205 
outmsh
->
åüngÀs
[3*
i
 + 2] = 
cuº_åi
[2];

208 
	`¥ötf
("Nvîticõs=%d NåüngÀs=%d vﬁume=%‡\n",
Nvîticõs_out
,
NåüngÀs_out
,
surÁ˚_åackî
.
	`gë_vﬁume
());

213 
outmsh
->
Nvîticõs
 = 
Nvîticõs_out
;

215 
outmsh
->
NåüngÀs
 = 
NåüngÀs_out
;

217 
	}
}

219 
	$maö
()

226 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

228 
SurÁ˚Mesh
 
msh
;

229 
msh
.
vîticõs
 = verticies;

230 
msh
.
Nvîticõs
 = Nverticies;

231 
msh
.
åüngÀs
 =Åriangles;

232 
msh
.
NåüngÀs
 = Ntriangles;

234 
ElT›oP¨amëîs
 
ñ∑ømëîs
 = 
	`ElT›oP¨amëîs
();

236 
vîticõsout
[
NSIZE
];

237 
åüngÀsout
[
NSIZE
];

238 
SurÁ˚Mesh
 
mshout
;

239 
mshout
.
vîticõs
 = 
vîticõsout
;

240 
mshout
.
åüngÀs
 = 
åüngÀsout
;

242 
	`im¥ovemesh
(
msh
,
ñ∑ømëîs
,&
mshout
);

244 
	`¥ötmesh
(101,
mshout
.
Nvîticõs
,mshout.
NåüngÀs
,mshout.
vîticõs
,mshout.
åüngÀs
);

248 
	`¥ötf
("Hello world\n");

250 
	}
}

	@mycode/surftrackexample4.cpp

5 
	#NSIZE
 20000

	)

7 
	~<°dio.h
>

8 
	~<m©h.h
>

9 
	~<ve˘‹
>

10 
	~<vec.h
>

11 
	~<sur·øck.h
>

12 
	~<subdivisi⁄scheme.h
>

14 
	~"mesh.c
"

16 
	$¥ötmesh
(
ii
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

18 
buf
[256];

19 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
ii
, ".obj");

21 
FILE
 *
Â
;

23 
Â
 = 
	`f›í
(
buf
, "w+");

24 
i
=0;i<
Nvîticõs
;i++){

25 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

28 
i
=0;i<
NåüngÀs
;i++) {

29 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

32 
	`f˛o£
(
Â
);

33 
	}
}

35 
	sSurÁ˚Mesh


37 * 
	mvîticõs
;

38 
	mNvîticõs
;

39 * 
	måüngÀs
;

40 
	mNåüngÀs
;

43 
	$im¥ovemesh
(
SurÁ˚Mesh
 
msh
,SurÁ˚Mesh * 
outmsh
)

45 
°d
::
ve˘‹
<
Vec3d
> 
vs
;

46 
°d
::
ve˘‹
<> 
mas£s
;

48  
i
 = 0; i < 
msh
.
Nvîticõs
; ++i )

50 
vs
.
	`push_back
–
	`Vec3d
–
msh
.
vîticõs
[3*
i
], msh.verticies[3*i + 1], msh.verticies[3*i + 2] ) );

51 
mas£s
.
	`push_back
( 0.5 );

54 
°d
::
ve˘‹
<
Vec3°
> 
ts
;

55  
i
 = 0; i < 
msh
.
NåüngÀs
; ++i )

57 
ts
.
	`push_back
–
	`Vec3°
–
msh
.
åüngÀs
[3*
i
], msh.triangles[3*i + 1], msh.triangles[3*i + 2] ) );

60 
SurfTøckInôüliz©i⁄P¨amëîs
 
∑ømëîs
;

62 
∑ømëîs
.
m_¥oximôy_ïsû⁄
 = 1e-4;

63 
∑ømëîs
.
m_‰i˘i⁄_c€fficõ¡
 = 0.0;

64 
∑ømëîs
.
m_mö_åüngÀ_¨ó
 = 1e-7;

65 
∑ømëîs
.
m_im¥ove_cﬁlisi⁄_ïsû⁄
 = 2e-6;

66 
∑ømëîs
.
m_u£_‰a˘i⁄
 = 
Ál£
;

67 
∑ømëîs
.
m_mö_edge_Àngth
 = 0.05;

68 
∑ømëîs
.
m_max_edge_Àngth
 = 0.2;

69 
∑ømëîs
.
m_max_vﬁume_ch™ge
 = 0.1;

70 
∑ømëîs
.
m_mö_åüngÀ_™gÀ
 = 35;

71 
∑ømëîs
.
m_max_åüngÀ_™gÀ
 = 180;

72 
∑ømëîs
.
m_u£_curv©uª_whí_•lôtög
 = 
Ál£
;

73 
∑ømëîs
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
Ál£
;

74 
∑ømëîs
.
m_mö_curv©uª_mu…ùlõr
 = 1.0;

75 
∑ømëîs
.
m_max_curv©uª_mu…ùlõr
 = 1.0;

76 
∑ømëîs
.
m_Ælow_vîãx_movemít
 = 
Ál£
;

77 
∑ømëîs
.
m_edge_Êù_mö_Àngth_ch™ge
 = 1e-8;

78 
∑ømëîs
.
m_mîge_¥oximôy_ïsû⁄
 = 1e-5;

79 
∑ømëîs
.
m_cﬁlisi⁄_ß„ty
 = 
åue
;

80 
∑ømëîs
.
m_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

81 
∑ømëîs
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

82 
∑ømëîs
.
m_≥rf‹m_im¥ovemít
 = 
åue
;

84 
∑ømëîs
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

86 
SurfTøck
 
	`surÁ˚_åackî
–
vs
, 
ts
, 
mas£s
, 
∑ømëîs
 );

87 
surÁ˚_åackî
.
m_vîbo£
 = 
Ál£
;

89 
surÁ˚_åackî
.
	`im¥ove_mesh
();

90 
surÁ˚_åackî
.
	`t›ﬁogy_ch™ges
();

91 
surÁ˚_åackî
.
	`de‰ag_mesh
();

95 
Nvîticõs_out
 = 
surÁ˚_åackî
.
	`gë_num_vîti˚s
();

98  
i
 = 0; i < 
Nvîticõs_out
; ++i )

100 
outmsh
->
vîticõs
[3*
i
+0] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[0];

101 
outmsh
->
vîticõs
[3*
i
+1] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[1];

102 
outmsh
->
vîticõs
[3*
i
+2] = 
surÁ˚_åackî
.
	`gë_posôi⁄
(i)[2];

105 
NåüngÀs_out
 = 
surÁ˚_åackî
.
m_mesh
.
	`num_åüngÀs
();

107  
i
 = 0; i < 
NåüngÀs_out
; ++i )

109 c⁄° 
Vec3°
& 
cuº_åi
 = 
surÁ˚_åackî
.
m_mesh
.
	`gë_åüngÀ
(
i
);

110 
outmsh
->
åüngÀs
[3*
i
 + 0] = 
cuº_åi
[0];

111 
outmsh
->
åüngÀs
[3*
i
 + 1] = 
cuº_åi
[1];

112 
outmsh
->
åüngÀs
[3*
i
 + 2] = 
cuº_åi
[2];

115 
	`¥ötf
("Nvîticõs=%d NåüngÀs=%d vﬁume=%‡\n",
Nvîticõs_out
,
NåüngÀs_out
,
surÁ˚_åackî
.
	`gë_vﬁume
());

117 
outmsh
->
Nvîticõs
 = 
Nvîticõs_out
;

118 
outmsh
->
NåüngÀs
 = 
NåüngÀs_out
;

119 
	}
}

121 
	$maö
()

123 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

125 
SurÁ˚Mesh
 
msh
;

126 
msh
.
vîticõs
 = verticies;

127 
msh
.
Nvîticõs
 = Nverticies;

128 
msh
.
åüngÀs
 =Åriangles;

129 
msh
.
NåüngÀs
 = Ntriangles;

131 
vîticõsout
[
NSIZE
];

132 
åüngÀsout
[
NSIZE
];

133 
SurÁ˚Mesh
 
mshout
;

134 
mshout
.
vîticõs
 = 
vîticõsout
;

135 
mshout
.
åüngÀs
 = 
åüngÀsout
;

137 
	`im¥ovemesh
(
msh
,&
mshout
);

138 
	`¥ötmesh
(101,
mshout
.
Nvîticõs
,mshout.
NåüngÀs
,mshout.
vîticõs
,mshout.
åüngÀs
);

140 
	`¥ötf
("Hello world\n");

142 
	}
}

	@mycode/test.c

3 
	~<°dio.h
>

4 
	~<°dboﬁ.h
>

5 
	~<m©h.h
>

7 
	#NSIZE
 2000

	)

9 
	~<ñt›o.h
>

10 
	~<subdivisi⁄scheme.h
>

13 
ElT›oMesh
 
	göput
;

14 
ElT›oMesh
 
	gouçut
;

15 
ElT›oGíîÆO±i⁄s
 
	ggíîÆ_Ÿi⁄s
;

16 
ElT›oSèticO≥øti⁄sO±i⁄s
 
	g›ti⁄s
;

17 
ElT›oDe‰agInf‹m©i⁄
 
	gde‰ag_öfo
;

19 
	~"mesh.c
"

21 
	$¥ötmesh
(
i
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

23 
buf
[256];

24 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
i
, ".obj");

26 
FILE
 *
Â
;

28 
Â
 = 
	`f›í
(
buf
, "w+");

32 
i
=0;i<
Nvîticõs
;i++){

33 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

36 
i
=0;i<
NåüngÀs
;i++) {

37 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

42 
	`f˛o£
(
Â
);

43 
	}
}

46 
	$íright_vñocôy
(
t
, * 
pos
, * 
out
 )

48 
x
 = 
pos
[0];

49 
y
 = 
pos
[1];

50 
z
 = 
pos
[2];

52 
out
[0] = 2.0 * 
	`sö
(
M_PI
*
x
Ë* sö(M_PI*xË* sö(2.0*M_PI*
y
Ë* sö(2.0*M_PI*
z
);

53 
out
[1] = -
	`sö
(2.0*
M_PI
*
x
Ë* sö(M_PI*
y
)*sö(M_PI*yË* sö(2.0*M_PI*
z
);

54 
out
[2] = -
	`sö
(2.0*
M_PI
*
x
Ë* sö(2.0*M_PI*
y
Ë* sö(M_PI*
z
) * sin(M_PI*z);

56 
out
[0] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

57 
out
[1] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

58 
out
[2] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

59 
	}
}

61 
	$£t_¥edi˘ed_vîãx_posôi⁄s
(
Nvîticõs
, * 
cuºít_posôi⁄s
,* 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, 
dt
 )

64 
tmp
[3];

65 
v
[3];

66 
k1
[3];

67 
k2
[3];

68 
k3
[3];

69 
k4
[4];

71 
x
,
y
,
z
;

73 
i
=0; i < 
Nvîticõs
; ++i)

76 
x
 = 
cuºít_posôi⁄s
[3*
i
];

77 
y
 = 
cuºít_posôi⁄s
[3*
i
+1];

78 
z
 = 
cuºít_posôi⁄s
[3*
i
+2];

82 
tmp
[0] = 
x
;

83 
tmp
[1] = 
y
;

84 
tmp
[2] = 
z
;

85 
	`íright_vñocôy
–
cuºít_t
, 
tmp
, 
v
);

86 
k1
[0] = 
dt
 * 
v
[0];

87 
k1
[1] = 
dt
 * 
v
[1];

88 
k1
[2] = 
dt
 * 
v
[2];

91 
tmp
[0] = 
x
 + 0.5 * 
k1
[0];

92 
tmp
[1] = 
y
 + 0.5 * 
k1
[1];

93 
tmp
[2] = 
z
 + 0.5 * 
k1
[2];

94 
	`íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
tmp
, 
v
 );

95 
k2
[0] = 
dt
 * 
v
[0];

96 
k2
[1] = 
dt
 * 
v
[1];

97 
k2
[2] = 
dt
 * 
v
[2];

100 
tmp
[0] = 
x
 + 0.5 * 
k2
[0];

101 
tmp
[1] = 
y
 + 0.5 * 
k2
[1];

102 
tmp
[2] = 
z
 + 0.5 * 
k2
[2];

103 
	`íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
tmp
, 
v
 );

104 
k3
[0] = 
dt
 * 
v
[0];

105 
k3
[1] = 
dt
 * 
v
[1];

106 
k3
[2] = 
dt
 * 
v
[2];

109 
tmp
[0] = 
x
 + 
k3
[0];

110 
tmp
[1] = 
y
 + 
k3
[1];

111 
tmp
[2] = 
z
 + 
k3
[2];

112 
	`íright_vñocôy
–
cuºít_t
 + 
dt
, 
tmp
, 
v
 );

113 
k4
[0] = 
dt
 * 
v
[0];

114 
k4
[1] = 
dt
 * 
v
[1];

115 
k4
[2] = 
dt
 * 
v
[2];

118 
¥edi˘ed_posôi⁄s
[3*
i
] = 
x
 + 1./6. * ( 
k1
[0] + 
k4
[0] ) + 1./3. * ( 
k2
[0] + 
k3
[0] );

119 
¥edi˘ed_posôi⁄s
[3*
i
+1] = 
y
 + 1./6. * ( 
k1
[1] + 
k4
[1] ) + 1./3. * ( 
k2
[1] + 
k3
[1] );

120 
¥edi˘ed_posôi⁄s
[3*
i
+2] = 
z
 + 1./6. * ( 
k1
[2] + 
k4
[2] ) + 1./3. * ( 
k2
[2] + 
k3
[2] );

124 
	}
}

127 
	$maö
()

148 
gíîÆ_Ÿi⁄s
.
m_vîbo£
 = 0;

149 
gíîÆ_Ÿi⁄s
.
m_cﬁlisi⁄_ß„ty
 = 1;

152 
›ti⁄s
.
m_≥rf‹m_im¥ovemít
 = 
åue
;

153 
›ti⁄s
.
m_Ælow_t›ﬁogy_ch™ges
 = 
Ál£
;

154 
›ti⁄s
.
m_max_vﬁume_ch™ge
 = 0.1;

155 
›ti⁄s
.
m_mö_edge_Àngth
 = 0.5;

156 
›ti⁄s
.
m_max_edge_Àngth
 = 1.5;

160 
›ti⁄s
.
m_u£_curv©uª_whí_•lôtög
 = 
åue
;

161 
›ti⁄s
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
åue
;

162 
›ti⁄s
.
m_mö_curv©uª_mu…ùlõr
 = 1.0;

163 
›ti⁄s
.
m_max_curv©uª_mu…ùlõr
 = 1.0;

168 
›ti⁄s
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

169 
›ti⁄s
.
m_cﬁlisi⁄_ß„ty
 = 
åue
;

170 
›ti⁄s
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

173 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

175 
¥edi˘ed
[
NSIZE
];

176 
dt
 = 0.1;

177 
t
 = 0;

179 
j
=1;j<10;j++) {

181 
	`£t_¥edi˘ed_vîãx_posôi⁄s
(
Nvîticõs
,
vîticõs
,
¥edi˘ed
,
t
,
dt
);

182 
i
=0;i<
Nvîticõs
*3;i++) {

183 
vîticõs
[
i
] = 
¥edi˘ed
[i];

186 
	`¥ötmesh
(
j
,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

187 
t
 +
dt
;

190 
	`¥ötf
("Hello world\n");

192 
	}
}

	@mycode/test2.c

3 
	~<°dio.h
>

4 
	~<°dboﬁ.h
>

5 
	~<m©h.h
>

7 
	#NSIZE
 20000

	)

9 
	~<ñt›o.h
>

10 
	~<subdivisi⁄scheme.h
>

13 
ElT›oMesh
 
	göput
;

14 
ElT›oMesh
 
	gouçut
;

15 
ElT›oGíîÆO±i⁄s
 
	ggíîÆ_Ÿi⁄s
;

16 
ElT›oSèticO≥øti⁄sO±i⁄s
 
	g›ti⁄s
;

17 
ElT›oDe‰agInf‹m©i⁄
 
	gde‰ag_öfo
;

19 
	~"mesh.c
"

21 
	$¥ötmesh
(
i
, 
Nvîticõs
, 
NåüngÀs
, * 
vîticõs
, * 
åüngÀs
) {

23 
buf
[256];

24 
	`¢¥ötf
(
buf
,  buf, "%s%d%s", "ouçut/", 
i
, ".obj");

26 
FILE
 *
Â
;

28 
Â
 = 
	`f›í
(
buf
, "w+");

32 
i
=0;i<
Nvîticõs
;i++){

33 
	`Ârötf
(
Â
,"v %‡%‡%‡\n",
vîticõs
[3*
i
],verticies[3*i+1],verticies[3*i+2]);

36 
i
=0;i<
NåüngÀs
;i++) {

37 
	`Ârötf
(
Â
,"‡%d %d %d\n",
åüngÀs
[3*
i
]+1,triangles[3*i+1]+1,triangles[3*i+2]+1);

42 
	`f˛o£
(
Â
);

43 
	}
}

46 
	$íright_vñocôy
(
t
, * 
pos
, * 
out
 )

48 
x
 = 
pos
[0];

49 
y
 = 
pos
[1];

50 
z
 = 
pos
[2];

52 
out
[0] = 2.0 * 
	`sö
(
M_PI
*
x
Ë* sö(M_PI*xË* sö(2.0*M_PI*
y
Ë* sö(2.0*M_PI*
z
);

53 
out
[1] = -
	`sö
(2.0*
M_PI
*
x
Ë* sö(M_PI*
y
)*sö(M_PI*yË* sö(2.0*M_PI*
z
);

54 
out
[2] = -
	`sö
(2.0*
M_PI
*
x
Ë* sö(2.0*M_PI*
y
Ë* sö(M_PI*
z
) * sin(M_PI*z);

56 
out
[0] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

57 
out
[1] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

58 
out
[2] *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

59 
	}
}

61 
	$£t_¥edi˘ed_vîãx_posôi⁄s
(
Nvîticõs
, * 
cuºít_posôi⁄s
,* 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, 
dt
 )

64 
tmp
[3];

65 
v
[3];

66 
k1
[3];

67 
k2
[3];

68 
k3
[3];

69 
k4
[4];

71 
x
,
y
,
z
;

73 
i
=0; i < 
Nvîticõs
; ++i)

76 
x
 = 
cuºít_posôi⁄s
[3*
i
];

77 
y
 = 
cuºít_posôi⁄s
[3*
i
+1];

78 
z
 = 
cuºít_posôi⁄s
[3*
i
+2];

82 
tmp
[0] = 
x
;

83 
tmp
[1] = 
y
;

84 
tmp
[2] = 
z
;

85 
	`íright_vñocôy
–
cuºít_t
, 
tmp
, 
v
);

86 
k1
[0] = 
dt
 * 
v
[0];

87 
k1
[1] = 
dt
 * 
v
[1];

88 
k1
[2] = 
dt
 * 
v
[2];

91 
tmp
[0] = 
x
 + 0.5 * 
k1
[0];

92 
tmp
[1] = 
y
 + 0.5 * 
k1
[1];

93 
tmp
[2] = 
z
 + 0.5 * 
k1
[2];

94 
	`íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
tmp
, 
v
 );

95 
k2
[0] = 
dt
 * 
v
[0];

96 
k2
[1] = 
dt
 * 
v
[1];

97 
k2
[2] = 
dt
 * 
v
[2];

100 
tmp
[0] = 
x
 + 0.5 * 
k2
[0];

101 
tmp
[1] = 
y
 + 0.5 * 
k2
[1];

102 
tmp
[2] = 
z
 + 0.5 * 
k2
[2];

103 
	`íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
tmp
, 
v
 );

104 
k3
[0] = 
dt
 * 
v
[0];

105 
k3
[1] = 
dt
 * 
v
[1];

106 
k3
[2] = 
dt
 * 
v
[2];

109 
tmp
[0] = 
x
 + 
k3
[0];

110 
tmp
[1] = 
y
 + 
k3
[1];

111 
tmp
[2] = 
z
 + 
k3
[2];

112 
	`íright_vñocôy
–
cuºít_t
 + 
dt
, 
tmp
, 
v
 );

113 
k4
[0] = 
dt
 * 
v
[0];

114 
k4
[1] = 
dt
 * 
v
[1];

115 
k4
[2] = 
dt
 * 
v
[2];

118 
¥edi˘ed_posôi⁄s
[3*
i
] = 
x
 + 1./6. * ( 
k1
[0] + 
k4
[0] ) + 1./3. * ( 
k2
[0] + 
k3
[0] );

119 
¥edi˘ed_posôi⁄s
[3*
i
+1] = 
y
 + 1./6. * ( 
k1
[1] + 
k4
[1] ) + 1./3. * ( 
k2
[1] + 
k3
[1] );

120 
¥edi˘ed_posôi⁄s
[3*
i
+2] = 
z
 + 1./6. * ( 
k1
[2] + 
k4
[2] ) + 1./3. * ( 
k2
[2] + 
k3
[2] );

124 
	}
}

127 
	$maö
()

130 
gíîÆ_Ÿi⁄s
.
m_vîbo£
 = 0;

131 
gíîÆ_Ÿi⁄s
.
m_cﬁlisi⁄_ß„ty
 = 1;

132 
gíîÆ_Ÿi⁄s
.
m_¥oximôy_ïsû⁄
 = 1e-3;

134 
›ti⁄s
.
m_≥rf‹m_im¥ovemít
 = 
åue
;

135 
›ti⁄s
.
m_Ælow_t›ﬁogy_ch™ges
 = 
åue
;

136 
›ti⁄s
.
m_max_vﬁume_ch™ge
 = 0.1;

137 
›ti⁄s
.
m_mö_edge_Àngth
 = 0.5;

138 
›ti⁄s
.
m_max_edge_Àngth
 = 1.5;

139 
›ti⁄s
.
m_mö_åüngÀ_¨ó
 = 1;

140 
›ti⁄s
.
m_mö_åüngÀ_™gÀ
 = 20;

141 
›ti⁄s
.
m_max_åüngÀ_™gÀ
 = 160;

142 
›ti⁄s
.
m_u£_curv©uª_whí_•lôtög
 = 
åue
;

143 
›ti⁄s
.
m_u£_curv©uª_whí_cﬁœpsög
 = 
åue
;

144 
›ti⁄s
.
m_mö_curv©uª_mu…ùlõr
 = 1.0;

145 
›ti⁄s
.
m_max_curv©uª_mu…ùlõr
 = 1.0;

146 
›ti⁄s
.
m_Ælow_vîãx_movemít
 = 
åue
;

147 
›ti⁄s
.
m_edge_Êù_mö_Àngth_ch™ge
 = 0.01;

148 
›ti⁄s
.
m_mîge_¥oximôy_ïsû⁄
 = 0.01;

149 
›ti⁄s
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

150 
›ti⁄s
.
m_cﬁlisi⁄_ß„ty
 = 
åue
;

151 
›ti⁄s
.
m_Ælow_n⁄_m™ifﬁd
 = 
Ál£
;

153 
vîãx_is_ªmove
[
NSIZE
];

154 
vîãx_ödex
[
NSIZE
];

155 
•lô_edge
[2*
NSIZE
];

156 
åüngÀ_is_ªmove
[
NSIZE
];

157 
åüngÀ_ödex
[
NSIZE
];

158 
√w_åi
[3*
NSIZE
];

159 
de‰agged_åüngÀ_m≠
[
NSIZE
];

160 
de‰agged_vîãx_m≠
[
NSIZE
];

161 
de‰ag_öfo
.
vîãx_is_ªmove
 = vertex_is_remove;

162 
de‰ag_öfo
.
vîãx_ödex
 = vertex_index;

163 
de‰ag_öfo
.
•lô_edge
 = split_edge;

164 
de‰ag_öfo
.
åüngÀ_is_ªmove
 =Åriangle_is_remove;

165 
de‰ag_öfo
.
åüngÀ_ödex
 =Åriangle_index;

166 
de‰ag_öfo
.
√w_åi
 =Çew_tri;

167 
de‰ag_öfo
.
de‰agged_åüngÀ_m≠
 = defragged_triangle_map;

168 
de‰ag_öfo
.
de‰agged_vîãx_m≠
 = defragged_vertex_map;

170 
vîãx_mas£s
[
Nvîticõs
];

171 
i
=0;i<
Nvîticõs
;i++) {

172 
vîãx_mas£s
[
i
] = 0.5;

175 
öput
.
num_vîti˚s
 = 
Nvîticõs
;

176 
öput
.
vîãx_loˇti⁄s
 = 
vîticõs
;

177 
öput
.
num_åüngÀs
 = 
NåüngÀs
;

178 
öput
.
åüngÀs
 =Åriangles;

179 
öput
.
vîãx_mas£s
 = vertex_masses;

181 
out_vîti˚s
[
NSIZE
];

182 
out_åüngÀs
[
NSIZE
];

183 
out_mas£s
[
NSIZE
];

184 
ouçut
.
vîãx_loˇti⁄s
 = 
out_vîti˚s
;

185 
ouçut
.
åüngÀs
 = 
out_åüngÀs
;

186 
ouçut
.
vîãx_mas£s
 = 
out_mas£s
;

190 
	`ñ_t›o_°©ic_›î©i⁄s
(&
öput
,&
gíîÆ_Ÿi⁄s
,&
›ti⁄s
,&
de‰ag_öfo
,&
ouçut
);

194 
	`¥ötmesh
(0,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

196 
¥edi˘ed
[
NSIZE
];

197 
dt
 = 0.1;

198 
t
 = 0;

200 
j
=1;j<10;j++) {

202 
	`£t_¥edi˘ed_vîãx_posôi⁄s
(
Nvîticõs
,
vîticõs
,
¥edi˘ed
,
t
,
dt
);

203 
i
=0;i<
Nvîticõs
*3;i++) {

204 
vîticõs
[
i
] = 
¥edi˘ed
[i];

207 
	`¥ötmesh
(
j
,
Nvîticõs
,
NåüngÀs
,
vîticõs
,
åüngÀs
);

208 
t
 +
dt
;

211 
	`¥ötf
("Hello world\n");

213 
	}
}

	@talpa/curlnoise/curlnoise.h

1 #i‚de‡
CURLNOISE_H


2 
	#CURLNOISE_H


	)

6 
	~<vec.h
>

8 
	sCuæNoi£3


10 
	mt
;

11 
	mdñè_x
;

13 
CuæNoi£3
()

14 : 
t
(0), 
dñè_x
(1e-4)

17 
	mvútuÆ
 ~
CuæNoi£3
()

20 
vútuÆ
 
boﬁ
 
£ed_∑πi˛es
–
°d
::
ve˘‹
<
Vec3d
> &
x
, 
dt
) const;

22 
vútuÆ
 
Vec3d
 
pŸítül
(
x
, 
y
, 
z
) const;

24 
vútuÆ
 
adv™˚_time
(
dt
)

26 
	mt
+=
dt
;

29 
gë_vñocôy
(c⁄° 
Vec3d
 &
x
, Vec3d &
v
) const

31 
	mv
[0]=–(
pŸítül
(
x
[0], x[1]+
dñè_x
, x[2])[2] -Öotential(x[0], x[1]-delta_x, x[2])[2])

32 -(
pŸítül
(
x
[0], x[1], x[2]+
dñè_x
)[1] -ÖŸítül(x[0], x[1], x[2]-dñè_x)[1]ËË/ (2*
	mdñè_x
);

33 
	mv
[1]=–(
pŸítül
(
x
[0], x[1], x[2]+
dñè_x
)[0] -Öotential(x[0], x[1], x[2]-delta_x)[0])

34 -(
pŸítül
(
x
[0]+
dñè_x
, x[1], x[2])[2] -ÖŸítül(x[0]-dñè_x, x[1], x[2])[2]ËË/ (2*
	mdñè_x
);

35 
	mv
[2]=–(
pŸítül
(
x
[0]+
dñè_x
, x[1], x[2])[1] -Öotential(x[0]-delta_x, x[1], x[2])[1])

36 -(
pŸítül
(
x
[0], x[1]+
dñè_x
, x[2])[0] -ÖŸítül(x[0], x[1]-dñè_x, x[2])[0]ËË/ (2*
	mdñè_x
);

40 
ölöe
 
boﬁ
 
	gCuæNoi£3
::
£ed_∑πi˛es
–
°d
::
ve˘‹
<
Vec3d
>&, ) const

42  
	gÁl£
;

45 
ölöe
 
Vec3d
 
	gCuæNoi£3
::
	$pŸítül
( , , ) const

47  
	`Vec3d
(0.0, 0.0, 0.0);

48 
	}
}

	@talpa/curlnoise/noise.cpp

1 
	~<noi£.h
>

3 
	g«me•a˚
 {

5 
	gãm∂©e
<
	gN
>

6 
	gVec
<
	gN
,> 
ßm∂e_•hîe
(&
£ed
)

8 
	gVec
<
	gN
,> 
	gv
;

9 
	gm2
;

11 
	gi
=0; i<
	gN
; ++i){

12 
	gv
[
i
]=
øndhashf
(
£ed
++,-1,1);

14 
	gm2
=
mag2
(
v
);

15 }
	gm2
>1 || m2==0);

16  
	gv
/
	g°d
::
sqπ
(
m2
);

23 
	gNoi£2
::

24 
	$Noi£2
(
£ed
)

26 
i
=0; i<
n
; ++i){

27 
thëa
=()(
i
*2*
M_PI
)/
n
;

28 
basis
[
i
][0]=
°d
::
	`cos
(
thëa
);

29 
basis
[
i
][1]=
°d
::
	`sö
(
thëa
);

30 
≥rm
[
i
]=i;

32 
	`ªöôülize
(
£ed
);

33 
	}
}

35 
	gNoi£2
::

36 
	$ªöôülize
(
£ed
)

38 
i
=1; i<
n
; ++i){

39 
j
=
	`øndhash
(
£ed
++)%(
i
+1);

40 
	`sw≠
(
≥rm
[
i
],Öîm[
j
]);

42 
	}
}

44 
	gNoi£2
::

45 
	$›î©‹
()(
x
, 
y
) const

47 
Êo‹x
=
°d
::
	`Êo‹
(
x
), 
Êo‹y
=°d::Êo‹(
y
);

48 
i
=()
Êo‹x
, 
j
=()
Êo‹y
;

49 c⁄° 
Vec2d
 &
n00
=
basis
[
	`hash_ödex
(
i
,
j
)];

50 c⁄° 
Vec2d
 &
n10
=
basis
[
	`hash_ödex
(
i
+1,
j
)];

51 c⁄° 
Vec2d
 &
n01
=
basis
[
	`hash_ödex
(
i
,
j
+1)];

52 c⁄° 
Vec2d
 &
n11
=
basis
[
	`hash_ödex
(
i
+1,
j
+1)];

53 
fx
=
x
-
Êo‹x
, 
fy
=
y
-
Êo‹y
;

54 
sx
=
fx
*fx*fx*(10-fx*(15-fx*6)),

55 
sy
=
fy
*fy*fy*(10-fy*(15-fy*6));

56  
	`bûîp
–
fx
*
n00
[0] + 
fy
*n00[1],

57 (
fx
-1)*
n10
[0] + 
fy
*n10[1],

58 
fx
*
n01
[0] + (
fy
-1)*n01[1],

59 (
fx
-1)*
n11
[0] + (
fy
-1)*n11[1],

60 
sx
, 
sy
);

61 
	}
}

65 
	gNoi£3
::

66 
	$Noi£3
(
£ed
)

68 
i
=0; i<
n
; ++i){

69 
basis
[
i
]=
ßm∂e_•hîe
<3>(
£ed
);

70 
≥rm
[
i
]=i;

72 
	`ªöôülize
(
£ed
);

73 
	}
}

75 
	gNoi£3
::

76 
	$ªöôülize
(
£ed
)

78 
i
=1; i<
n
; ++i){

79 
j
=
	`øndhash
(
£ed
++)%(
i
+1);

80 
	`sw≠
(
≥rm
[
i
],Öîm[
j
]);

82 
	}
}

84 
	gNoi£3
::

85 
	$›î©‹
()(
x
, 
y
, 
z
) const

87 
Êo‹x
=
°d
::
	`Êo‹
(
x
), 
Êo‹y
=°d::Êo‹(
y
), 
Êo‹z
=°d::Êo‹(
z
);

88 
i
=()
Êo‹x
, 
j
=()
Êo‹y
, 
k
=()
Êo‹z
;

89 c⁄° 
Vec3d
 &
n000
=
basis
[
	`hash_ödex
(
i
,
j
,
k
)];

90 c⁄° 
Vec3d
 &
n100
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
)];

91 c⁄° 
Vec3d
 &
n010
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
)];

92 c⁄° 
Vec3d
 &
n110
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
)];

93 c⁄° 
Vec3d
 &
n001
=
basis
[
	`hash_ödex
(
i
,
j
,
k
+1)];

94 c⁄° 
Vec3d
 &
n101
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
+1)];

95 c⁄° 
Vec3d
 &
n011
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
+1)];

96 c⁄° 
Vec3d
 &
n111
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
+1)];

97 
fx
=
x
-
Êo‹x
, 
fy
=
y
-
Êo‹y
, 
fz
=
z
-
Êo‹z
;

98 
sx
=
fx
*fx*fx*(10-fx*(15-fx*6)),

99 
sy
=
fy
*fy*fy*(10-fy*(15-fy*6)),

100 
sz
=
fz
*fz*fz*(10-fz*(15-fz*6));

101  
	`åûîp
–
fx
*
n000
[0] + 
fy
*n000[1] + 
fz
*n000[2],

102 (
fx
-1)*
n100
[0] + 
fy
*n100[1] + 
fz
*n100[2],

103 
fx
*
n010
[0] + (
fy
-1)*n010[1] + 
fz
*n010[2],

104 (
fx
-1)*
n110
[0] + (
fy
-1)*n110[1] + 
fz
*n110[2],

105 
fx
*
n001
[0] + 
fy
*n001[1] + (
fz
-1)*n001[2],

106 (
fx
-1)*
n101
[0] + 
fy
*n101[1] + (
fz
-1)*n101[2],

107 
fx
*
n011
[0] + (
fy
-1)*n011[1] + (
fz
-1)*n011[2],

108 (
fx
-1)*
n111
[0] + (
fy
-1)*n111[1] + (
fz
-1)*n111[2],

109 
sx
, 
sy
, 
sz
);

110 
	}
}

115 
	gNoi£4
::

116 
	$Noi£4
(
£ed
)

118 
i
=0; i<
n
; ++i){

119 
basis
[
i
]=
ßm∂e_•hîe
<4>(
£ed
);

120 
≥rm
[
i
]=i;

122 
	`ªöôülize
(
£ed
);

123 
	}
}

125 
	gNoi£4
::

126 
	$ªöôülize
(
£ed
)

128 
i
=1; i<
n
; ++i){

129 
j
=
	`øndhash
(
£ed
++)%(
i
+1);

130 
	`sw≠
(
≥rm
[
i
],Öîm[
j
]);

132 
	}
}

134 
	gNoi£4
::

135 
	$›î©‹
()(
x
, 
y
, 
z
, 
t
) const

137 
Êo‹x
=
°d
::
	`Êo‹
(
x
), 
Êo‹y
=°d::Êo‹(
y
), 
Êo‹z
=°d::Êo‹(
z
), 
Êo‹t
=°d::Êo‹(
t
);

138 
i
=()
Êo‹x
, 
j
=()
Êo‹y
, 
k
=()
Êo‹z
, 
l
=()
Êo‹t
;

139 c⁄° 
Vec4d
 &
n0000
=
basis
[
	`hash_ödex
(
i
,
j
,
k
,
l
)];

140 c⁄° 
Vec4d
 &
n1000
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
,
l
)];

141 c⁄° 
Vec4d
 &
n0100
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
,
l
)];

142 c⁄° 
Vec4d
 &
n1100
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
,
l
)];

143 c⁄° 
Vec4d
 &
n0010
=
basis
[
	`hash_ödex
(
i
,
j
,
k
+1,
l
)];

144 c⁄° 
Vec4d
 &
n1010
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
+1,
l
)];

145 c⁄° 
Vec4d
 &
n0110
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
+1,
l
)];

146 c⁄° 
Vec4d
 &
n1110
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
+1,
l
)];

147 c⁄° 
Vec4d
 &
n0001
=
basis
[
	`hash_ödex
(
i
,
j
,
k
,
l
+1)];

148 c⁄° 
Vec4d
 &
n1001
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
,
l
+1)];

149 c⁄° 
Vec4d
 &
n0101
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
,
l
+1)];

150 c⁄° 
Vec4d
 &
n1101
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
,
l
+1)];

151 c⁄° 
Vec4d
 &
n0011
=
basis
[
	`hash_ödex
(
i
,
j
,
k
+1,
l
+1)];

152 c⁄° 
Vec4d
 &
n1011
=
basis
[
	`hash_ödex
(
i
+1,
j
,
k
+1,
l
+1)];

153 c⁄° 
Vec4d
 &
n0111
=
basis
[
	`hash_ödex
(
i
,
j
+1,
k
+1,
l
+1)];

154 c⁄° 
Vec4d
 &
n1111
=
basis
[
	`hash_ödex
(
i
+1,
j
+1,
k
+1,
l
+1)];

155 
fx
=
x
-
Êo‹x
, 
fy
=
y
-
Êo‹y
, 
fz
=
z
-
Êo‹z
, 
·
=
t
-
Êo‹t
;

156 
sx
=
fx
*fx*fx*(10-fx*(15-fx*6)),

157 
sy
=
fy
*fy*fy*(10-fy*(15-fy*6)),

158 
sz
=
fz
*fz*fz*(10-fz*(15-fz*6)),

159 
°
=
·
*ft*ft*(10-ft*(15-ft*6));

160  
	`quadÀΩ
–
fx
*
n0000
[0] + 
fy
*n0000[1] + 
fz
*n0000[2] + 
·
*n0000[3],

161 (
fx
-1)*
n1000
[0] + 
fy
*n1000[1] + 
fz
*n1000[2] + 
·
*n1000[3],

162 
fx
*
n0100
[0] + (
fy
-1)*n0100[1] + 
fz
*n0100[2] + 
·
*n0100[3],

163 (
fx
-1)*
n1100
[0] + (
fy
-1)*n1100[1] + 
fz
*n1100[2] + 
·
*n1100[3],

164 
fx
*
n0010
[0] + 
fy
*n0010[1] + (
fz
-1)*n0010[2] + 
·
*n0010[3],

165 (
fx
-1)*
n1010
[0] + 
fy
*n1010[1] + (
fz
-1)*n1010[2] + 
·
*n1010[3],

166 
fx
*
n0110
[0] + (
fy
-1)*n0110[1] + (
fz
-1)*n0110[2] + 
·
*n0110[3],

167 (
fx
-1)*
n1110
[0] + (
fy
-1)*n1110[1] + (
fz
-1)*n1110[2] + 
·
*n1110[3],

168 
fx
*
n0001
[0] + 
fy
*n0001[1] + 
fz
*n0001[2] + (1-
·
)*n0001[3],

169 (
fx
-1)*
n1001
[0] + 
fy
*n1001[1] + 
fz
*n1001[2] + (1-
·
)*n1001[3],

170 
fx
*
n0101
[0] + (
fy
-1)*n0101[1] + 
fz
*n0101[2] + (1-
·
)*n0101[3],

171 (
fx
-1)*
n1101
[0] + (
fy
-1)*n1101[1] + 
fz
*n1101[2] + (1-
·
)*n1101[3],

172 
fx
*
n0011
[0] + 
fy
*n0011[1] + (
fz
-1)*n0011[2] + (1-
·
)*n0011[3],

173 (
fx
-1)*
n1011
[0] + 
fy
*n1011[1] + (
fz
-1)*n1011[2] + (1-
·
)*n1011[3],

174 
fx
*
n0111
[0] + (
fy
-1)*n0111[1] + (
fz
-1)*n0111[2] + (1-
·
)*n0111[3],

175 (
fx
-1)*
n1111
[0] + (
fy
-1)*n1111[1] + (
fz
-1)*n1111[2] + (1-
·
)*n1111[3],

176 
sx
, 
sy
, 
sz
, 
°
);

177 
	}
}

181 
	gFlowNoi£2
::

182 
	$FlowNoi£2
(
£ed
, 
•ö_v¨üti⁄
)

183 : 
	$Noi£2
(
£ed
)

185 
£ed
+=
n
;

186 
i
=0; i<
n
; ++i){

187 
‹igöÆ_basis
[
i
]=
basis
[i];

188 
•ö_øã
[
i
]=2.0*()
M_PI
*
	`øndhashd
(
£ed
++, 1.0 - 0.5*
•ö_v¨üti⁄
, 1.0 + 0.5*spin_variation);

190 
	}
}

192 
	gFlowNoi£2
::

193 
	$£t_time
(
t
)

195 
i
=0; i<
n
; ++i){

196 
thëa
=
•ö_øã
[
i
]*
t
;

197 
c
=
°d
::
	`cos
(
thëa
), 
s
=°d::
	`sö
(theta);

198 
basis
[
i
][0]
c
*
‹igöÆ_basis
[i][0]+
s
*original_basis[i][1];

199 
basis
[
i
][1]=-
s
*
‹igöÆ_basis
[i][0]+
c
*original_basis[i][1];

201 
	}
}

205 
	gFlowNoi£3
::

206 
	$FlowNoi£3
(
£ed
, 
•ö_v¨üti⁄
)

207 : 
	$Noi£3
(
£ed
)

209 
£ed
+=8*
n
;

210 
i
=0; i<
n
; ++i){

211 
‹igöÆ_basis
[
i
]=
basis
[i];

212 
•ö_axis
[
i
]=
ßm∂e_•hîe
<3>(
£ed
);

213 
•ö_øã
[
i
]=2.0*
M_PI
*
	`øndhashd
(
£ed
++, 0.1 - 0.5*
•ö_v¨üti⁄
, 0.1 + 0.5*spin_variation);

215 
	}
}

217 
	gFlowNoi£3
::

218 
	$£t_time
(
t
)

220 
i
=0; i<
n
; ++i){

221 
thëa
=
•ö_øã
[
i
]*
t
;

222 
c
=
°d
::
	`cos
(
thëa
), 
s
=°d::
	`sö
(theta);

224 
R00
=
c
+(1-c)*
	`sqr
(
•ö_axis
[
i
][0]),

225 
R01
=(1-
c
)*
•ö_axis
[
i
][0]*•ö_axis[i][1]-
s
*spin_axis[i][2],

226 
R02
=(1-
c
)*
•ö_axis
[
i
][0]*•ö_axis[i][2]+
s
*spin_axis[i][1];

227 
R10
=(1-
c
)*
•ö_axis
[
i
][0]*•ö_axis[i][1]+
s
*spin_axis[i][2],

228 
R11
=
c
+(1-c)*
	`sqr
(
•ö_axis
[
i
][1]),

229 
R12
=(1-
c
)*
•ö_axis
[
i
][1]*•ö_axis[i][2]-
s
*spin_axis[i][0];

230 
R20
=(1-
c
)*
•ö_axis
[
i
][0]*•ö_axis[i][2]-
s
*spin_axis[i][1],

231 
R21
=(1-
c
)*
•ö_axis
[
i
][1]*•ö_axis[i][2]+
s
*spin_axis[i][0],

232 
R22
=
c
+(1-c)*
	`sqr
(
•ö_axis
[
i
][2]);

233 
basis
[
i
][0]=
R00
*
‹igöÆ_basis
[i][0] + 
R01
*‹igöÆ_basis[i][1] + 
R02
*original_basis[i][2];

234 
basis
[
i
][1]=
R10
*
‹igöÆ_basis
[i][0] + 
R11
*‹igöÆ_basis[i][1] + 
R12
*original_basis[i][2];

235 
basis
[
i
][2]=
R20
*
‹igöÆ_basis
[i][0] + 
R21
*‹igöÆ_basis[i][1] + 
R22
*original_basis[i][2];

237 
	}
}

	@talpa/curlnoise/noise.h

1 #i‚de‡
NOISE_H


2 
	#NOISE_H


	)

4 
	~<vec.h
>

6 
	sNoi£2


8 
Noi£2
(
£ed
=171717);

9 
	mvútuÆ
 ~
Noi£2
() {};

11 
ªöôülize
(
£ed
);

12 
›î©‹
()(
	mx
, 
	my
) const;

13 
›î©‹
()(c⁄° 
	mVec2d
 &
	mx
Ëc⁄° {  (*
	mthis
)(x[0], x[1]); }

15 
	m¥Ÿe˘ed
:

16 c⁄° 
n
=128;

17 
Vec2d
 
	mbasis
[
n
];

18 
	m≥rm
[
n
];

20 
hash_ödex
(
i
, 
j
) const

21 {  
	m≥rm
[(
≥rm
[
i
%
n
]+
	mj
)%
	mn
]; }

24 
	sNoi£3


26 
Noi£3
(
£ed
=171717);

27 
	mvútuÆ
 ~
Noi£3
() {};

29 
ªöôülize
(
£ed
);

30 
›î©‹
()(
	mx
, 
	my
, 
	mz
) const;

31 
›î©‹
()(c⁄° 
	mVec3d
 &
	mx
Ëc⁄° {  (*
	mthis
)(x[0], x[1], x[2]); }

33 
	m¥Ÿe˘ed
:

34 c⁄° 
n
=128;

35 
Vec3d
 
	mbasis
[
n
];

36 
	m≥rm
[
n
];

38 
hash_ödex
(
i
, 
j
, 
k
) const

39 {  
	m≥rm
[(
≥rm
[’îm[
i
%
n
]+
	mj
)%
	mn
]+
	mk
)%n]; }

42 
	sNoi£4


44 
Noi£4
(
£ed
=171717);

45 
ªöôülize
(
£ed
);

46 
›î©‹
()(
	mx
, 
	my
, 
	mz
, 
	mt
) const;

47 
›î©‹
()(c⁄° 
	mVec4d
 &
	mx
Ëc⁄° {  (*
	mthis
)(x[0], x[1], x[2], x[3]); }

49 
	m¥Ÿe˘ed
:

50 c⁄° 
n
=128;

51 
Vec4d
 
	mbasis
[
n
];

52 
	m≥rm
[
n
];

54 
hash_ödex
(
i
, 
j
, 
k
, 
l
) const

55 {  
	m≥rm
[(
≥rm
[’îm[’îm[
i
%
n
]+
	mj
)%
	mn
]+
	mk
)%n]+
	ml
)%n]; }

60 
	gFlowNoi£2
: 
public
 
Noi£2


62 
FlowNoi£2
(
£ed
=171717, 
•ö_v¨üti⁄
=0.2);

63 
£t_time
(
t
);

65 
	g¥Ÿe˘ed
:

66 
Vec2d
 
‹igöÆ_basis
[
n
];

67 
	g•ö_øã
[
n
];

70 
	gFlowNoi£3
: 
public
 
Noi£3


72 
FlowNoi£3
(
£ed
=171717, 
•ö_v¨üti⁄
=0.2);

73 
£t_time
(
t
);

75 
	g¥Ÿe˘ed
:

76 
Vec3d
 
‹igöÆ_basis
[
n
];

77 
	g•ö_øã
[
n
];

78 
Vec3d
 
	g•ö_axis
[
n
];

	@talpa/drivers/enrightdriver.h

10 #i‚de‡
EL_TOPO_ENRIGHT_DRIVER_H


11 
	#EL_TOPO_ENRIGHT_DRIVER_H


	)

17 
	~<cm©h
>

18 
	~<meshdrivî.h
>

19 
	~<run°©s.h
>

20 
	~<sur·øck.h
>

36 ˛as†
	cEƒightDrivî
 : 
public
 
MeshDrivî


39 
public
:

41 
	$EƒightDrivî
(Ë: 
	$m_öôül_vﬁume
(
UNINITIALIZED_DOUBLE
) {}

43 
ölöe
 
	`öôülize
–c⁄° 
SurfTøck
& );

46 
ölöe
 
	`íright_vñocôy
–
t
, c⁄° 
Vec3d
& 
pos
, Vec3d& 
out
 );

48 
ölöe
 
vútuÆ
 
	`£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 );

50 
ölöe
 
	`compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 );

53 
m_öôül_vﬁume
;

55 
	}
};

67 
ölöe
 
	gEƒightDrivî
::
	$öôülize
–c⁄° 
SurfTøck
& 
surf
 )

69 
m_öôül_vﬁume
 = 
surf
.
	`gë_vﬁume
();

70 
	}
}

79 
ölöe
 
	gEƒightDrivî
::
	$íright_vñocôy
–
t
, c⁄° 
Vec3d
& 
pos
, Vec3d& 
out
 )

81 
x
 = 
pos
[0];

82 
y
 = 
pos
[1];

83 
z
 = 
pos
[2];

85 
out
 = 
	`Vec3d
–2.0 * 
°d
::
	`sö
(
M_PI
*
x
Ë* std::sö(M_PI*xË* std::sö(2.0*M_PI*
y
Ë* std::sö(2.0*M_PI*
z
),

86 -
°d
::
	`sö
(2.0*
M_PI
*
x
Ë* std::sö(M_PI*
y
)*°d::sö(M_PI*yË* std::sö(2.0*M_PI*
z
),

87 -
°d
::
	`sö
(2.0*
M_PI
*
x
Ë* std::sö(2.0*M_PI*
y
Ë* std::sö(M_PI*
z
) * std::sin(M_PI*z) );

89 
out
 *
	`sö
(
M_PI
 * 
t
 * 2 / 3);

91 
	}
}

101 
ölöe
 
	gEƒightDrivî
::
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
dt
 )

103 c⁄° 
	g°d
::
ve˘‹
<
Vec3d
>& 
x
 = 
surf
.
gë_posôi⁄s
();

105 
	g¥edi˘ed_posôi⁄s
.
ªsize
–
x
.
size
() );

107 
	gi
=0; i < 
	gx
.
size
(); ++i)

109 
Vec3d
 
	gv
;

114 
íright_vñocôy
–
cuºít_t
, 
x
[
i
], 
v
 );

115 
Vec3d
 
	gk1
 = 
dt
 * 
v
;

118 
íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
x
[
i
] + 0.5 * 
k1
, 
v
 );

119 
Vec3d
 
	gk2
 = 
dt
 * 
v
;

122 
íright_vñocôy
–
cuºít_t
 + 0.5*
dt
, 
x
[
i
] + 0.5 * 
k2
, 
v
 );

123 
Vec3d
 
	gk3
 = 
dt
 * 
v
;

126 
íright_vñocôy
–
cuºít_t
 + 
dt
, 
x
[
i
] + 
k3
, 
v
 );

127 
Vec3d
 
	gk4
 = 
dt
 * 
v
;

129 
	g¥edi˘ed_posôi⁄s
[
i
] = 
x
[i] + 1./6. * ( 
k1
 + 
k4
 ) + 1./3. * ( 
k2
 + 
k3
 );

141 
ölöe
 
	gEƒightDrivî
::
	$compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 )

143 
dñè_vﬁume
 = 
surf
.
	`gë_vﬁume
(Ë- 
m_öôül_vﬁume
;

144 
≥r˚¡_îr‹
 = 
dñè_vﬁume
 / 
m_öôül_vﬁume
 * 100;

146 
cuº_‰ame
 = 0;

147 
RunSèts
 
g_°©s
;

148 
g_°©s
.
	`£t_doubÀ
–"œ°_t", 
cuºít_t
 );

149 
g_°©s
.
	`£t_doubÀ
–"dñè_vﬁume", 
dñè_vﬁume
 );

150 
g_°©s
.
	`£t_doubÀ
–"≥r˚¡_îr‹", 
≥r˚¡_îr‹
 );

151 ++
cuº_‰ame
;

152 
	}
}

	@talpa/drivers/faceoff.cpp

14 
	~<Á˚off.h
>

16 
	~<ˇs£π
>

17 
	~<geomëryöô.h
>

18 
	~<œ∑ck_wøµî.h
>

19 
	~<meshsmoŸhî.h
>

20 
	~<n⁄de°ru˘ivërimesh.h
>

21 
	~<run°©s.h
>

22 
	~<sur·øck.h
>

42 
	g«me•a˚
 {

44 
eigí_decomposôi⁄_des˚ndög
–c⁄° 
M©33d
& 
m©
, * 
eigívÆues
, * 
eigíve˘‹s
 )

46 
	geigíve˘‹s
[0] = 
m©
(0,0);

47 
	geigíve˘‹s
[1] = 
m©
(1,0);

48 
	geigíve˘‹s
[2] = 
m©
(2,0);

49 
	geigíve˘‹s
[3] = 
m©
(0,1);

50 
	geigíve˘‹s
[4] = 
m©
(1,1);

51 
	geigíve˘‹s
[5] = 
m©
(2,1);

52 
	geigíve˘‹s
[6] = 
m©
(0,2);

53 
	geigíve˘‹s
[7] = 
m©
(1,2);

54 
	geigíve˘‹s
[8] = 
m©
(2,2);

56 
	gw‹k
[9];

57 
	göfo
 = ~0, 
	gn
 = 3, 
	glw‹k
 = 9;

58 
	gLAPACK
::
gë_eigí_decomposôi⁄
–&
n
, 
eigíve˘‹s
, &n, 
eigívÆues
, 
w‹k
, &
lw‹k
, &
öfo
 );

60 
as£π
–
öfo
 == 0 );

63 
sw≠
–
eigívÆues
[0],Éigenvalues[2] );

65 
sw≠
–
eigíve˘‹s
[0],Éigenvectors[6] );

66 
sw≠
–
eigíve˘‹s
[1],Éigenvectors[7] );

67 
sw≠
–
eigíve˘‹s
[2],Éigenvectors[8] );

76 
	gFa˚OffDrivî
::
	$öôülize
–c⁄° 
SurfTøck
& )

78 
	}
}

86 
Fa˚OffDrivî
::
compuã_quadric_mëric_ãns‹
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

87 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

88 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
,

89 
M©33d
& 
quadric_mëric_ãns‹
 )

91 
	g°d
::
ve˘‹
< 
Vec3d
 > 
N
;

92 
	g°d
::
ve˘‹
< > 
W
;

93 
	g°d
::
ve˘‹
< > 
d
;

95  
size_t
 
	gi
 = 0; i < 
	göcidít_åüngÀs
.
size
(); ++i )

97 
size_t
 
	gåüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

98 
	gN
.
push_back
–
åüngÀ_n‹mÆs
[
åüngÀ_ödex
] );

99 
	gW
.
push_back
–
åüngÀ_¨ós
[
åüngÀ_ödex
] );

101 
as£π
–
åüngÀ_¨ós
[
åüngÀ_ödex
] > 0.0 );

104 
zîo
–
quadric_mëric_ãns‹
 );

107  
size_t
 
	gi
 = 0; i < 
	gN
.
size
(); ++i )

109 
quadric_mëric_ãns‹
(0,0Ë+
N
[
i
][0] * 
W
[i] * N[i][0];

110 
quadric_mëric_ãns‹
(1,0Ë+
N
[
i
][1] * 
W
[i] * N[i][0];

111 
quadric_mëric_ãns‹
(2,0Ë+
N
[
i
][2] * 
W
[i] * N[i][0];

113 
quadric_mëric_ãns‹
(0,1Ë+
N
[
i
][0] * 
W
[i] * N[i][1];

114 
quadric_mëric_ãns‹
(1,1Ë+
N
[
i
][1] * 
W
[i] * N[i][1];

115 
quadric_mëric_ãns‹
(2,1Ë+
N
[
i
][2] * 
W
[i] * N[i][1];

117 
quadric_mëric_ãns‹
(0,2Ë+
N
[
i
][0] * 
W
[i] * N[i][2];

118 
quadric_mëric_ãns‹
(1,2Ë+
N
[
i
][1] * 
W
[i] * N[i][2];

119 
quadric_mëric_ãns‹
(2,2Ë+
N
[
i
][2] * 
W
[i] * N[i][2];

122 
	gvÆ
[3], 
	gvec
[9];

123 
eigí_decomposôi⁄_des˚ndög
–
quadric_mëric_ãns‹
, 
vÆ
, 
vec
 );

125 i‡–! ( 
	gvÆ
[0] >-1e-10 && 
vÆ
[1] >= -1e-10 && val[2] >= -1e-10 ) )

127 
°d
::
cout
 << "quadri¯mëri¯ãns‹ i†nŸÖosôivê£mi-deföôe" << std::
ídl
;

128 
as£π
(0);

139 
	gFa˚OffDrivî
::
öãr£˘i⁄_poöt
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

140 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_∂™e_di°™˚s
,

141 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

142 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
,

143 
Vec3d
& 
out
 )

146 
	g°d
::
ve˘‹
< 
Vec3d
 > 
N
;

147 
	g°d
::
ve˘‹
< > 
W
;

148 
	g°d
::
ve˘‹
< > 
d
;

150  
size_t
 
	gi
 = 0; i < 
	göcidít_åüngÀs
.
size
(); ++i )

152 
size_t
 
	gåüngÀ_ödex
 = 
öcidít_åüngÀs
[
i
];

153 
	gN
.
push_back
–
åüngÀ_n‹mÆs
[
åüngÀ_ödex
] );

154 
	gW
.
push_back
–
åüngÀ_¨ós
[
åüngÀ_ödex
] );

155 
	gd
.
push_back
–
åüngÀ_∂™e_di°™˚s
[
åüngÀ_ödex
] );

158 
M©33d
 
A
(0,0,0,0,0,0,0,0,0);

159 
Vec3d
 
b
(0,0,0);

161 
compuã_quadric_mëric_ãns‹
–
åüngÀ_n‹mÆs
, 
åüngÀ_¨ós
, 
öcidít_åüngÀs
, 
A
 );

163  
size_t
 
	gi
 = 0; i < 
	gN
.
size
(); ++i )

166 
	gb
[0] +
N
[
i
][0] * 
W
[i] * 
d
[i];

167 
	gb
[1] +
N
[
i
][1] * 
W
[i] * 
d
[i];

168 
	gb
[2] +
N
[
i
][2] * 
W
[i] * 
d
[i];

171 
	geigívÆues
[3];

172 
	gw‹k
[9];

173 
	göfo
 = ~0, 
	gn
 = 3, 
	glw‹k
 = 9;

174 
	gLAPACK
::
gë_eigí_decomposôi⁄
–&
n
, 
A
.
a
, &n, 
eigívÆues
, 
w‹k
, &
lw‹k
, &
öfo
 );

176 i‡–
	göfo
 != 0 )

178 
as£π
(0);

181 
Vec3d
 
di•œ˚mít_ve˘‹
(0,0,0);

183  
	gi
 = 0; i < 3; ++i )

185 i‡–
	geigívÆues
[
i
] > 
G_EIGENVALUE_RANK_RATIO
 *Éigenvalues[2] )

187 
Vec3d
 
eigíve˘‹
–
A
(0,
i
), A(1,i), A(2,i) );

188 
	gdi•œ˚mít_ve˘‹
 +
dŸ
(
eigíve˘‹
, 
b
Ë* 
	geigíve˘‹
 / 
	geigívÆues
[
i
];

194 
	gout
 = 
di•œ˚mít_ve˘‹
;

204 
	gFa˚OffDrivî
::
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
,

205 
°d
::
ve˘‹
<
Vec3d
>& 
√w_posôi⁄s
,

206 
cuºít_t
,

207 & 
ad≠tive_dt
 )

209 c⁄° 
	gN⁄De°ru˘iveTriMesh
& 
	gmesh
 = 
surf
.
m_mesh
;

210 
	g°d
::
ve˘‹
<> 
åüngÀ_¨ós
;

211 
	gåüngÀ_¨ós
.
ª£rve
(
mesh
.
num_åüngÀs
());

212 
	g°d
::
ve˘‹
<
Vec3d
> 
åüngÀ_n‹mÆs
;

213 
	gåüngÀ_n‹mÆs
.
ª£rve
(
mesh
.
num_åüngÀs
());

214 
	g°d
::
ve˘‹
<
Vec3d
> 
åüngÀ_˚¡roids
;

215 
	gåüngÀ_˚¡roids
.
ª£rve
(
mesh
.
num_åüngÀs
());

216 
	g°d
::
ve˘‹
<> 
åüngÀ_∂™e_di°™˚s
;

217 
	gåüngÀ_∂™e_di°™˚s
.
ª£rve
(
mesh
.
num_åüngÀs
());

219 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
mesh
.
gë_åüngÀs
();

220  
size_t
 
	gi
 = 0; i < 
	gåis
.
size
(); ++i )

222 i‡–
	gåis
[
i
][0] =
åis
[i][1] )

224 
åüngÀ_¨ós
.
push_back
( 0 );

225 
	gåüngÀ_n‹mÆs
.
push_back
–
Vec3d
(0,0,0) );

226 
	gåüngÀ_˚¡roids
.
push_back
–
Vec3d
(0,0,0) );

230 
	gåüngÀ_¨ós
.
push_back
–
surf
.
gë_åüngÀ_¨ó
–
i
 ) );

231 
	gåüngÀ_n‹mÆs
.
push_back
–
surf
.
gë_åüngÀ_n‹mÆ
–
i
 ) );

232 
	gåüngÀ_˚¡roids
.
push_back
–(
surf
.
gë_posôi⁄
(
åis
[
i
][0]) + surf.get_position(tris[i][1]) + surf.get_position(tris[i][2])) / 3 );

235 
	gswôch_•ìd
 = (
cuºít_t
 >1.0Ë? -
•ìd
 : speed;

236 
	gåüngÀ_∂™e_di°™˚s
.
push_back
–
ad≠tive_dt
 * 
swôch_•ìd
 );

239 
	g°d
::
ve˘‹
<
Vec3d
> 
di•œ˚míts
;

240 
	gdi•œ˚míts
.
ªsize
–
surf
.
gë_num_vîti˚s
() );

247  
size_t
 
	gi
 = 0; i < 
	gsurf
.
gë_num_vîti˚s
(); ++i )

249 c⁄° 
	gMeshSmoŸhî
& 
	gsmoŸhî
 = 
surf
.
m_smoŸhî
;

250 
	gsmoŸhî
.
nuŒ_•a˚_smoŸh_vîãx
–
i
, 
åüngÀ_¨ós
, 
åüngÀ_n‹mÆs
, 
åüngÀ_˚¡roids
, 
di•œ˚míts
[i] );

258  
size_t
 
	gp
 = 0;Ö < 
	gsurf
.
gë_num_vîti˚s
(); ++p )

260 
Vec3d
 
	gn‹mÆ_di•a˚mít
;

261 
öãr£˘i⁄_poöt
–
åüngÀ_n‹mÆs
, 
åüngÀ_∂™e_di°™˚s
, 
åüngÀ_¨ós
, 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
p
], 
n‹mÆ_di•a˚mít
 );

262 
	gdi•œ˚míts
[
p
] +
n‹mÆ_di•a˚mít
;

268 i‡–
	gsurf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
p
].
em±y
() )

273 
	gsum_mu_l
 = 0, 
	gsum_mu
 = 0;

275 c⁄° 
	g°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
 = 
mesh
.
m_vîãx_to_åüngÀ_m≠
[
p
];

277  
size_t
 
	gj
 = 0; j < 
	göcidít_åüngÀs
.
size
(); ++j )

279 
size_t
 
	gåüngÀ_ödex
 = 
öcidít_åüngÀs
[
j
];

281 c⁄° 
	gVec3°
& 
	gåi
 = 
surf
.
m_mesh
.
gë_åüngÀ
–
åüngÀ_ödex
 );

283 
Vec3d
 
	gedge_ve˘‹
;

284 i‡–
	gåi
[0] =
p
 )

286 
edge_ve˘‹
 = 
surf
.
gë_posôi⁄
(
åi
[1]) - surf.get_position(tri[2]);

288 i‡–
	gåi
[1] =
p
 )

290 
edge_ve˘‹
 = 
surf
.
gë_posôi⁄
(
åi
[2]) - surf.get_position(tri[0]);

294 
	gedge_ve˘‹
 = 
surf
.
gë_posôi⁄
(
åi
[0]) - surf.get_position(tri[1]);

297 
Vec3d
 
	gs
 = 
¸oss
–
åüngÀ_n‹mÆs
[
åüngÀ_ödex
], 
edge_ve˘‹
 );

299 
boﬁ
 
	gc⁄åa˘ög
 = 
dŸ
–
s
, 
di•œ˚míts
[
p
] ) >= 0.0;

301 
	gcos_thëa
 = 
dŸ
–
åüngÀ_n‹mÆs
[
åüngÀ_ödex
], 
n‹mÆ_di•a˚mít
 ) / 
mag
(normal_dispacement);

303 
	gmu
 = 
åüngÀ_¨ós
[
åüngÀ_ödex
];

304 i‡–
	gc⁄åa˘ög
 )

306 
	gmu
 *
cos_thëa
 * cos_theta;

309 
	gli
 = 
Ábs
–
åüngÀ_∂™e_di°™˚s
[
åüngÀ_ödex
] );

311 i‡–
	gc⁄åa˘ög
 )

313 
	gli
 /
Ábs
–
cos_thëa
 );

316 
	gsum_mu_l
 +
mu
 * 
li
;

317 
	gsum_mu
 +
mu
;

320 
	gÀngth
 = 
sum_mu_l
 / 
sum_mu
;

322 
	gdi•œ˚míts
[
p
] +
Àngth
 * 
n‹mÆ_di•a˚mít
 / 
mag
(normal_dispacement);

326 
	gbëa
 = 
MeshSmoŸhî
::
compuã_max_time°ï_quadøtic_sﬁve
–
surf
.
m_mesh
.
gë_åüngÀs
(), surf.
gë_posôi⁄s
(), 
di•œ˚míts
, 
Ál£
 );

328 
	gad≠tive_dt
 *
bëa
;

330 
size_t
 
	gi
 = 0; i < 
	gsurf
.
gë_num_vîti˚s
(); i++)

332 
	g√w_posôi⁄s
[
i
] = 
surf
.
gë_posôi⁄
(iË+ 
bëa
 * 
di•œ˚míts
[i];

345 
	gFa˚OffDrivî
::
	$compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 )

348 
tŸÆ_îr‹
 = 0.0;

349 
tŸÆ_¨ó
 = 0.0;

351  
size_t
 
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

353 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

359 
di°
 = 
	`Ábs
–
	`sig√d_di°™˚_íå›y
–
surf
.
	`gë_posôi⁄
(
i
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
max_ødius
, 
öãri‹_ødius
 ) );

361 
¨ó
 = 0;

362  
size_t
 
j
 = 0; j < 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`size
(); ++j )

364 
¨ó
 +
surf
.
	`gë_åüngÀ_¨ó
–surf.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] );

366 
¨ó
 /= 3;

368 
tŸÆ_îr‹
 +
di°
 * 
¨ó
;

369 
tŸÆ_¨ó
 +
¨ó
;

372 
tŸÆ_îr‹
 /
tŸÆ_¨ó
;

374  
tŸÆ_îr‹
;

376 
	}
}

385 
	gFa˚OffDrivî
::
	$compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 )

388 
max_îr‹
 = -1.0;

390  
size_t
 
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

392 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

398 
di°
 = 
	`sig√d_di°™˚_íå›y
–
surf
.
	`gë_posôi⁄
(
i
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
max_ødius
, 
öãri‹_ødius
 );

399 
max_îr‹
 = 
	`max
–max_îr‹, 
	`Ábs
(
di°
) );

402  
max_îr‹
;

404 
	}
}

413 
	gFa˚OffDrivî
::
	$compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 )

415 
öf_îr‹
 = 
	`compuã_öf_îr‹
(
surf
);

416 
l1_îr‹
 = 
	`compuã_l1_îr‹
(
surf
);

418 
cuº_‰ame
 = 0;

419 
RunSèts
 
g_°©s
;

420 
g_°©s
.
	`£t_doubÀ
–"œ°_t", 
cuºít_t
 );

421 
g_°©s
.
	`£t_doubÀ
–"œ°_öf_îr‹", 
öf_îr‹
 );

422 
g_°©s
.
	`£t_doubÀ
–"œ°_l1_îr‹", 
l1_îr‹
 );

423 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_öf_îr‹", 
	`Ábs
(
öf_îr‹
) );

424 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_l1_îr‹", 
	`Ábs
(
l1_îr‹
) );

425 ++
cuº_‰ame
;

427 
	}
}

	@talpa/drivers/faceoff.h

10 #i‚de‡
EL_TOPO_FACEOFF_H


11 
	#EL_TOPO_FACEOFF_H


	)

17 
	~<meshdrivî.h
>

18 
	~<m©.h
>

19 
	~<vec.h
>

20 
	~<ve˘‹
>

23 
	~<mesh›î©‹.h
>

29 
˛ass
 
	gN⁄De°ru˘iveTriMesh
;

45 ˛as†
	cFa˚OffDrivî
 : 
public
 
MeshDrivî


47 
public
:

51 
	$Fa˚OffDrivî
–
ö_•ìd
, c⁄° 
Vec3d
& 
ö_•hîe_a_˚¡ª
, c⁄° Vec3d& 
ö_•hîe_b_˚¡ª
, 
ö_max_ødius
, 
ö_öãri‹_ødius
 ) :

52 
	`•ìd
(
ö_•ìd
) ,

53 
	`•hîe_a_˚¡ª
(
ö_•hîe_a_˚¡ª
),

54 
	`•hîe_b_˚¡ª
(
ö_•hîe_b_˚¡ª
),

55 
	`max_ødius
(
ö_max_ødius
),

56 
	$öãri‹_ødius
(
ö_öãri‹_ødius
)

59 
	`öôülize
–c⁄° 
SurfTøck
& );

63 
	`compuã_quadric_mëric_ãns‹
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

64 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

65 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
,

66 
M©33d
& 
quadric_mëric_ãns‹
 );

70 
	`öãr£˘i⁄_poöt
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
åüngÀ_n‹mÆs
,

71 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_∂™e_di°™˚s
,

72 c⁄° 
°d
::
ve˘‹
<>& 
åüngÀ_¨ós
,

73 c⁄° 
°d
::
ve˘‹
<
size_t
>& 
öcidít_åüngÀs
,

74 
Vec3d
& 
out
);

78 
	`£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 );

82 
	`compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 );

86 
	`compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 );

90 
	`compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 );

93 
•ìd
;

100 
Vec3d
 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
;

103 
max_ødius
;

106 
öãri‹_ødius
;

108 
	}
};

	@talpa/drivers/meancurvature.cpp

14 
	~<móncurv©uª.h
>

16 
	~<¨øy3_utûs.h
>

17 
	~<f°ªam
>

18 
	~<iomesh.h
>

19 
	~<run°©s.h
>

20 
	~<sur·øck.h
>

45 
	gMónCurv©uªDrivî
::
	$MónCurv©uªDrivî
–
ö_curv©uª_mu…ùlõr
,

46 c⁄° 
Aºay3d
& 
ö_föÆ_sig√d_di°™˚
,

47 c⁄° 
Vec3d
& 
ö_domaö_low
,

48 
ö_domaö_dx
 ) :

49 
	`curv©uª_mu…ùlõr
–
ö_curv©uª_mu…ùlõr
 ),

50 
	`föÆ_sig√d_di°™˚
–
ö_föÆ_sig√d_di°™˚
 ),

51 
	`föÆ_domaö_low
–
ö_domaö_low
 ),

52 
	$föÆ_domaö_dx
–
ö_domaö_dx
 )

53 {
	}
}

61 
	gMónCurv©uªDrivî
::
	$mixed_¨ó
–
size_t
 
vîãx_ödex
, size_à
åüngÀ_ödex
, c⁄° 
SurfTøck
& 
surf
 )

63 c⁄° 
Vec3°
& 
åi
 = 
surf
.
m_mesh
.
	`gë_åüngÀ
(
åüngÀ_ödex
);

65 
Vec2°
 
›posôe_edge
;

66 i‡–
vîãx_ödex
 =
åi
[0] )

68 
›posôe_edge
 = 
	`Vec2°
–
åi
[1],Åri[2] );

70 i‡–
vîãx_ödex
 =
åi
[1] )

72 
›posôe_edge
 = 
	`Vec2°
–
åi
[2],Åri[0] );

76 
›posôe_edge
 = 
	`Vec2°
–
åi
[0],Åri[1] );

79 c⁄° 
Vec3d
& 
a
 = 
surf
.
	`gë_posôi⁄
(
vîãx_ödex
);

80 c⁄° 
Vec3d
& 
b
 = 
surf
.
	`gë_posôi⁄
(
›posôe_edge
[0]);

81 c⁄° 
Vec3d
& 
c
 = 
surf
.
	`gë_posôi⁄
(
›posôe_edge
[1]);

83 
boﬁ
 
obtu£_åüngÀ
 = ( ( 
	`dŸ
(
b
-
a
, 
c
-a) < 0.0 ) || ( dot(a-b, c-b) < 0.0 ) || ( dot(a-c, b-c) < 0.0 ) );

85 i‡–
obtu£_åüngÀ
 )

89 i‡–
	`dŸ
(
b
-
a
, 
c
-a) < 0.0 )

92  0.5 * 
surf
.
	`gë_åüngÀ_¨ó
–
åüngÀ_ödex
 );

97  0.25 * 
surf
.
	`gë_åüngÀ_¨ó
–
åüngÀ_ödex
 );

104 
¸oss_c
 = 
	`mag
–
	`¸oss
–
a
-
c
, 
b
-c ) );

105 
cŸ_c
 = 
	`dŸ
–
a
-
c
, 
b
-cË/ 
¸oss_c
;

107 
¸oss_b
 = 
	`mag
–
	`¸oss
–
a
-
b
, 
c
-b ) );

108 
cŸ_b
 = 
	`dŸ
–
a
-
b
, 
c
-bË/ 
¸oss_b
;

110  1.0 / 8.0 * (
	`mag2
(
b
-
a
Ë* 
cŸ_c
 + mag2(
c
-aË* 
cŸ_b
);

113 
	}
}

123 
	gMónCurv©uªDrivî
::
	$vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
 )

125 
dummy
;

126 
	`vîãx_món_curv©uª_n‹mÆ
–
vîãx_ödex
, 
surf
, 
out
, 
dummy
 );

127 
	}
}

135 
	gMónCurv©uªDrivî
::
	$vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
, & 
weight_sum
 )

137 
Vec3d
 
	`món_curv©uª_n‹mÆ
( 0, 0, 0 );

138 
weight_sum
 = 0;

140 
edge_Àngth_sum
 = 0.0;

142  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_ödex
].
	`size
(); ++i )

144 
size_t
 
e
 = 
surf
.
m_mesh
.
m_vîãx_to_edge_m≠
[
vîãx_ödex
][
i
];

145 c⁄° 
Vec2°
& 
cuº_edge
 = 
surf
.
m_mesh
.
m_edges
[
e
];

146 
Vec3d
 
edge_ve˘‹
;

147 i‡–
cuº_edge
[0] =
vîãx_ödex
 )

149 
edge_ve˘‹
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
vîãx_ödex
 );

153 
	`as£π
–
cuº_edge
[1] =
vîãx_ödex
 );

154 
edge_ve˘‹
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
vîãx_ödex
 );

157 
edge_Àngth_sum
 +
	`mag
–
edge_ve˘‹
 );

159 i‡–
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
].
	`size
() != 2 )

165 
size_t
 
åi0
 = 
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
][0];

166 
size_t
 
åi1
 = 
surf
.
m_mesh
.
m_edge_to_åüngÀ_m≠
[
e
][1];

168 
size_t
 
thúd_vîãx_0
 = 
surf
.
m_mesh
.
	`gë_thúd_vîãx
–
cuº_edge
[0], cuº_edge[1], surf.m_mesh.
	`gë_åüngÀ
(
åi0
) );

169 
size_t
 
thúd_vîãx_1
 = 
surf
.
m_mesh
.
	`gë_thúd_vîãx
–
cuº_edge
[0], cuº_edge[1], surf.m_mesh.
	`gë_åüngÀ
(
åi1
) );

171 
Vec3d
 
v00
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
thúd_vîãx_0
 );

172 
Vec3d
 
v10
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
thúd_vîãx_0
 );

174 
¸oss_0
 = 
	`mag
–
	`¸oss
–
v00
, 
v10
 ) );

175 i‡–
¸oss_0
 < 1e-10 )

179 
cŸ_0
 = 
	`dŸ
(
v00
, 
v10
Ë/ 
¸oss_0
;

181 
Vec3d
 
v01
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[0] ) - surf.gë_posôi⁄–
thúd_vîãx_1
 );

182 
Vec3d
 
v11
 = 
surf
.
	`gë_posôi⁄
–
cuº_edge
[1] ) - surf.gë_posôi⁄–
thúd_vîãx_1
 );

184 
¸oss_1
 = 
	`mag
–
	`¸oss
–
v01
, 
v11
 ) );

185 i‡–
¸oss_1
 < 1e-10 )

190 
cŸ_1
 = 
	`dŸ
(
v01
, 
v11
Ë/ 
¸oss_1
;

192 
weight
 = 
cŸ_0
 + 
cŸ_1
;

193 
weight_sum
 +
weight
;

195 
món_curv©uª_n‹mÆ
 +
weight
 * 
edge_ve˘‹
;

199 
vîãx_¨ó
 = 0.0;

200  
size_t
 
i
 = 0; i < 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
vîãx_ödex
].
	`size
(); ++i )

202 
vîãx_¨ó
 +
	`mixed_¨ó
–
vîãx_ödex
, 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[vîãx_ödex][
i
], surf );

205 
c€ff
 = 1.0 / (2.0 * 
vîãx_¨ó
);

207 
weight_sum
 *
c€ff
;

209 
out
 = 
c€ff
 * 
món_curv©uª_n‹mÆ
;

211 
	}
}

220 
	gMónCurv©uªDrivî
::
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, , & 
ad≠tive_dt
 )

223 
size_t
 
	gn
 = 
surf
.
gë_num_vîti˚s
();

224 
	g¥edi˘ed_posôi⁄s
.
ªsize
(
n
);

226 
	gt_limô
 = 
BIG_DOUBLE
;

228 
	g°d
::
ve˘‹
<
Vec3d
> 
vñocôõs
(
n
);

230  
size_t
 
	gi
 = 0; i < 
	gn
; ++i )

232 i‡–
	gsurf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
i
].
size
() > 0 )

234 
	gweight_sum
;

235 
vîãx_món_curv©uª_n‹mÆ
–
i
, 
surf
, 
vñocôõs
[i], 
weight_sum
 );

237 
	gvñocôõs
[
i
] *
curv©uª_mu…ùlõr
;

239 i‡–
	gweight_sum
 == 0 )

241 
vñocôõs
[
i
] = 
Vec3d
(0,0,0);

245 
	gt_limô
 = 
mö
–
t_limô
, 1.0 / (
curv©uª_mu…ùlõr
 * 
weight_sum
) );

250 
	gvñocôõs
[
i
] = 
Vec3d
(0,0,0);

254 
	gad≠tive_dt
 = 
mö
–
ad≠tive_dt
, 
t_limô
 );

256  
size_t
 
	gi
 = 0; i < 
	gn
; ++i )

258 
	g¥edi˘ed_posôi⁄s
[
i
] = 
surf
.
gë_posôi⁄
(iË+ 
ad≠tive_dt
 * 
vñocôõs
[i];

270 
	gMónCurv©uªDrivî
::
	$compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 ) const

273 
tŸÆ_îr‹
 = 0.0;

274 
tŸÆ_¨ó
 = 0.0;

276  
size_t
 
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

278 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

283 c⁄° 
Vec3d
& 
p
 = 
surf
.
	`gë_posôi⁄
(
i
);

284 
di°
 = 
	`cubic_öãΩﬁ©e_vÆue
–(1.0/
föÆ_domaö_dx
Ë* (
p
 - 
föÆ_domaö_low
), 
föÆ_sig√d_di°™˚
 );

286 
¨ó
 = 0;

287  
size_t
 
j
 = 0; j < 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`size
(); ++j )

289 
¨ó
 +
surf
.
	`gë_åüngÀ_¨ó
–surf.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] );

291 
¨ó
 /= 3;

293 
tŸÆ_îr‹
 +
di°
 * 
¨ó
;

294 
tŸÆ_¨ó
 +
¨ó
;

297 
tŸÆ_îr‹
 /
tŸÆ_¨ó
;

299  
tŸÆ_îr‹
;

301 
	}
}

309 
	gMónCurv©uªDrivî
::
	$compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 ) const

311 
max_îr‹
 = -1.0;

313  
size_t
 
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

315 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

320 c⁄° 
Vec3d
& 
p
 = 
surf
.
	`gë_posôi⁄
(
i
);

321 
di°
 = 
	`cubic_öãΩﬁ©e_vÆue
–(1.0/
föÆ_domaö_dx
Ë* (
p
 - 
föÆ_domaö_low
), 
föÆ_sig√d_di°™˚
 );

323 
max_îr‹
 = 
	`max
 ( max_îr‹, 
di°
 );

326  
max_îr‹
;

328 
	}
}

337 
	gMónCurv©uªDrivî
::
	$compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 )

339 
öf_îr‹
 = 
	`compuã_öf_îr‹
(
surf
);

340 
l1_îr‹
 = 
	`compuã_l1_îr‹
(
surf
);

342 
cuº_‰ame
 = 0;

343 
RunSèts
 
g_°©s
;

344 
g_°©s
.
	`£t_doubÀ
–"œ°_t", 
cuºít_t
 );

345 
g_°©s
.
	`£t_doubÀ
–"œ°_öf_îr‹", 
öf_îr‹
 );

346 
g_°©s
.
	`£t_doubÀ
–"œ°_l1_îr‹", 
l1_îr‹
 );

347 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_öf_îr‹", 
	`Ábs
(
öf_îr‹
) );

348 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_l1_îr‹", 
	`Ábs
(
l1_îr‹
) );

349 ++
cuº_‰ame
;

351 
	}
}

	@talpa/drivers/meancurvature.h

10 #i‚de‡
EL_TOPO_MEANCURVATURE_H


11 
	#EL_TOPO_MEANCURVATURE_H


	)

17 
	~<meshdrivî.h
>

18 
	~<vec.h
>

34 ˛as†
	cMónCurv©uªDrivî
 : 
public
 
MeshDrivî


36 
public
:

40 
MónCurv©uªDrivî
–
ö_curv©uª_mu…ùlõr
,

41 c⁄° 
Aºay3d
& 
ö_föÆ_sig√d_di°™˚
,

42 c⁄° 
Vec3d
& 
ö_föÆ_domaö_low
,

43 
ö_föÆ_domaö_dx
 );

47 
mixed_¨ó
–
size_t
 
vîãx_ödex
, size_à
åüngÀ_ödex
, c⁄° 
SurfTøck
& 
surf
 );

51 
vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
 );

55 
vîãx_món_curv©uª_n‹mÆ
–
size_t
 
vîãx_ödex
, c⁄° 
SurfTøck
& 
surf
, 
Vec3d
& 
out
, & 
weight_sum
 );

59 
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 );

63 
	$compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 ) const;

67 
	$compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 ) const;

71 
	`compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 );

75 
curv©uª_mu…ùlõr
;

81 
Aºay3d
 
föÆ_sig√d_di°™˚
;

82 
Vec3d
 
föÆ_domaö_low
;

83 
föÆ_domaö_dx
;

	@talpa/drivers/meshdriver.h

10 #i‚de‡
EL_TOPO_MESHDRIVER_H


11 
	#EL_TOPO_MESHDRIVER_H


	)

17 
	~<sur·øck.h
>

18 
	~<vec.h
>

19 
	~<ve˘‹
>

36 ˛as†
	cMeshDrivî


38 
	mpublic
:

40 ˛as†
	cMeshDrivîRídîî


42 
public
:

43 
vútuÆ
 ~
MeshDrivîRídîî
() {}

44 
vútuÆ
 
ªndî
() const {}

47 
vútuÆ
 c⁄° 
MeshDrivîRídîî
* 
	$gë_ªndîî
()

49  
NULL
;

50 
	}
}

55 
	gvútuÆ
 ~
	$MeshDrivî
(Ë{
	}
}

59 
vútuÆ
 
	$öôülize
–c⁄° 
SurfTøck
& ) {
	}
}

63 
vútuÆ
 
	$di•œy
(Ë{
	}
}

67 
vútuÆ
 
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 ) = 0;

71 
vútuÆ
 
	$compuã_îr‹
–c⁄° 
SurfTøck
&, Ë{
	}
}

75 
vútuÆ
 
nŸify_d⁄e_öãgøti⁄
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& ,

76 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& ,

82 
vútuÆ
 
	$upd©e_simuœti⁄_ñemíts
–
SurfTøck
& 
surf
 )

84 
°d
::
ve˘‹
<
VîãxUpd©eEvít
>& 
vîãx_hi°‹y
 = 
surf
.
m_vîãx_ch™ge_hi°‹y
;

85 
vîãx_hi°‹y
.
	`˛ór
();

87 
°d
::
ve˘‹
<
TrüngÀUpd©eEvít
>& 
åüngÀ_hi°‹y
 = 
surf
.
m_åüngÀ_ch™ge_hi°‹y
;

88 
åüngÀ_hi°‹y
.
	`˛ór
();

89 
	}
}

91 
vútuÆ
 
	$wrôe_to_disk
–* , Ë{
	}
}

	@talpa/drivers/normaldriver.cpp

15 
	~<n‹mÆdrivî.h
>

17 
	~<Á˚off.h
>

18 
	~<geomëryöô.h
>

19 
	~<meshsmoŸhî.h
>

20 
	~<n⁄de°ru˘ivërimesh.h
>

21 
	~<run°©s.h
>

22 
	~<sur·øck.h
>

47 
	gN‹mÆDrivî
::
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 )

49 
	g°d
::
ve˘‹
<
Vec3d
> 
di•œ˚míts
–
surf
.
gë_num_vîti˚s
(), Vec3d(0,0,0) );

50 
	g°d
::
ve˘‹
<
Vec3d
> 
vñocôõs
–
surf
.
gë_num_vîti˚s
(), Vec3d(0,0,0) );

52  
	gi
 = 0; i < 
	gsurf
.
gë_num_vîti˚s
(); ++i )

54 i‡–
	gsurf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
i
].
em±y
() )

56 
	gdi•œ˚míts
[
i
] = 
Vec3d
(0,0,0);

60 
Vec3d
 
n‹mÆ
(0,0,0);

61 
	gsum_¨ós
 = 0.0;

62  
	gj
 = 0; j < 
	gsurf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
i
].
size
(); ++j )

64 
	g¨ó
 = 
surf
.
gë_åüngÀ_¨ó
–surf.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] );

65 
	gn‹mÆ
 +
surf
.
gë_åüngÀ_n‹mÆ
–surf.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] ) * 
¨ó
;

66 
	gsum_¨ós
 +
¨ó
;

69 
	gn‹mÆ
 /
mag
(
n‹mÆ
);

71 
	gswôch_•ìd
 = (
cuºít_t
 >1.0Ë? -
•ìd
 : speed;

72 
	gvñocôõs
[
i
] = 
swôch_•ìd
 * 
n‹mÆ
;

73 
	gdi•œ˚míts
[
i
] = 
ad≠tive_dt
 * 
vñocôõs
[i];

76 
	gˇµed_dt
 = 
MeshSmoŸhî
::
compuã_max_time°ï_quadøtic_sﬁve
–
surf
.
m_mesh
.
gë_åüngÀs
(), surf.
gë_posôi⁄s
(), 
di•œ˚míts
, 
Ál£
 );

78 
	gad≠tive_dt
 = 
mö
–
ad≠tive_dt
, 
ˇµed_dt
 );

80  
	gi
 = 0; i < 
	gsurf
.
gë_num_vîti˚s
(); ++i )

82 
	g¥edi˘ed_posôi⁄s
[
i
] = 
surf
.
gë_posôi⁄
(iË+ 
ad≠tive_dt
 * 
vñocôõs
[i];

93 
	gN‹mÆDrivî
::
	$compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 )

96 
tŸÆ_îr‹
 = 0.0;

97 
tŸÆ_¨ó
 = 0.0;

99  
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

101 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

107 
di°
 = 
	`Ábs
–
	`sig√d_di°™˚_íå›y
–
surf
.
	`gë_posôi⁄
(
i
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
max_ødius
, 
öãri‹_ødius
 ) );

109 
¨ó
 = 0;

110  
j
 = 0; j < 
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`size
(); ++j )

112 
¨ó
 +
surf
.
	`gë_åüngÀ_¨ó
–surf.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] );

114 
¨ó
 /= 3;

116 
tŸÆ_îr‹
 +
di°
 * 
¨ó
;

117 
tŸÆ_¨ó
 +
¨ó
;

120 
tŸÆ_îr‹
 /
tŸÆ_¨ó
;

122  
tŸÆ_îr‹
;

124 
	}
}

133 
	gN‹mÆDrivî
::
	$compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 )

136 
max_îr‹
 = -1.0;

138  
i
 = 0; i < 
surf
.
	`gë_num_vîti˚s
(); ++i )

140 i‡–
surf
.
m_mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
	`em±y
() )

146 
di°
 = 
	`sig√d_di°™˚_íå›y
–
surf
.
	`gë_posôi⁄
(
i
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
max_ødius
, 
öãri‹_ødius
 );

147 
max_îr‹
 = 
	`max
–max_îr‹, 
	`Ábs
(
di°
) );

150  
max_îr‹
;

152 
	}
}

161 
	gN‹mÆDrivî
::
	$compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 )

163 
öf_îr‹
 = 
	`compuã_öf_îr‹
(
surf
);

164 
l1_îr‹
 = 
	`compuã_l1_îr‹
(
surf
);

166 
cuº_‰ame
 = 0;

167 
RunSèts
 
g_°©s
;

168 
g_°©s
.
	`£t_doubÀ
–"œ°_t", 
cuºít_t
 );

169 
g_°©s
.
	`£t_doubÀ
–"œ°_öf_îr‹", 
öf_îr‹
 );

170 
g_°©s
.
	`£t_doubÀ
–"œ°_l1_îr‹", 
l1_îr‹
 );

171 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_öf_îr‹", 
	`Ábs
(
öf_îr‹
) );

172 
g_°©s
.
	`upd©e_mö_doubÀ
–"mö_l1_îr‹", 
	`Ábs
(
l1_îr‹
) );

173 ++
cuº_‰ame
;

174 
	}
}

	@talpa/drivers/normaldriver.h

11 #i‚de‡
EL_TOPO_NORMALDRIVER_H


12 
	#EL_TOPO_NORMALDRIVER_H


	)

18 
	~<meshdrivî.h
>

19 
	~<m©.h
>

20 
	~<vec.h
>

21 
	~<ve˘‹
>

27 
˛ass
 
	gN⁄De°ru˘iveTriMesh
;

28 
˛ass
 
	gSurfTøck
;

45 ˛as†
	cN‹mÆDrivî
 : 
public
 
MeshDrivî


47 
public
:

49 
	$N‹mÆDrivî
–
ö_•ìd
,

50 c⁄° 
Vec3d
& 
ö_•hîe_a_˚¡ª
,

51 c⁄° 
Vec3d
& 
ö_•hîe_b_˚¡ª
,

52 
ö_max_ødius
,

53 
ö_öãri‹_ødius
 ) :

54 
	`•ìd
(
ö_•ìd
),

55 
	`•hîe_a_˚¡ª
(
ö_•hîe_a_˚¡ª
),

56 
	`•hîe_b_˚¡ª
(
ö_•hîe_b_˚¡ª
),

57 
	`max_ødius
(
ö_max_ødius
),

58 
	$öãri‹_ødius
(
ö_öãri‹_ødius
)

61 
	$öôülize
–c⁄° 
SurfTøck
& ) {
	}
}

65 
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 );

69 
compuã_l1_îr‹
–c⁄° 
SurfTøck
& 
surf
 );

73 
compuã_öf_îr‹
–c⁄° 
SurfTøck
& 
surf
 );

77 
compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 );

80 
	g•ìd
;

87 
Vec3d
 
	g•hîe_a_˚¡ª
, 
	g•hîe_b_˚¡ª
;

90 
	gmax_ødius
;

93 
	göãri‹_ødius
;

	@talpa/drivers/sisccurlnoisedriver.cpp

14 
	~<sisccuænoi£drivî.h
>

16 
	~<run°©s.h
>

17 
	~<sur·øck.h
>

42 
	gSISCCuæNoi£Drivî
::
	$SISCCuæNoi£Drivî
() :

43 
	`CuæNoi£3
( ),

44 
	`noi£_ÀngthsˇÀ
(1),

45 
	`noi£_gaö
(1),

46 
	`noi£
(),

47 
	$m_öôül_vﬁume
(
UNINITIALIZED_DOUBLE
)

49 
noi£_ÀngthsˇÀ
[0]=1.5;

50 
noi£_gaö
[0]=1.3;

51 
	}
}

60 
	gSISCCuæNoi£Drivî
::
	$öôülize
–c⁄° 
SurfTøck
& 
surf
 )

62 
m_öôül_vﬁume
 = 
surf
.
	`gë_vﬁume
();

63 
	}
}

71 
Vec3d
 
	gSISCCuæNoi£Drivî
::
	$pŸítül
(
x
, 
y
, 
z
) const

73 
Vec3d
 
	`psi
(0,0,0);

74 
height_Á˘‹
=0.5;

76 c⁄° 
Vec3d
 
	`˚¡ª
( 0.0, 1.0, 0.0 );

77 
ødius
 = 4.0;

79 
i
=0; i<
noi£_ÀngthsˇÀ
.
	`size
(); ++i)

81 
sx
=
x
/
noi£_ÀngthsˇÀ
[
i
];

82 
sy
=
y
/
noi£_ÀngthsˇÀ
[
i
];

83 
sz
=
z
/
noi£_ÀngthsˇÀ
[
i
];

85 
Vec3d
 
	`psi_i
–0.f, 0.f, 
	`noi£2
(
sx
,
sy
,
sz
));

87 
di°
 = 
	`mag
–
	`Vec3d
(
x
,
y
,
z
Ë- 
˚¡ª
 );

88 
sˇÀ
 = 
	`max
–(
ødius
 - 
di°
)/radius, 0.0 );

89 
psi_i
 *
sˇÀ
;

91 
psi
+=
height_Á˘‹
*
noi£_gaö
[
i
]*
psi_i
;

94  
psi
;

95 
	}
}

105 
	gSISCCuæNoi£Drivî
::
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, , & 
ad≠tive_dt
 )

107 c⁄° 
	g°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
 = 
surf
.
gë_posôi⁄s
();

108 
Vec3d
 
	gv
, 
	gmidx
;

111  
	gi
 = 0; i < 
	gposôi⁄s
.
size
(); ++i )

114 c⁄° 
	gVec3d
& 
	gp
 = 
posôi⁄s
[
i
];

116 i‡–
	gsurf
.
	gm_mesh
.
	gm_vîãx_to_åüngÀ_m≠
[
i
].
em±y
() )

118 
	g¥edi˘ed_posôi⁄s
[
i
] = 
p
;

125 
gë_vñocôy
–
p
, 
v
 );

126 
Vec3d
 
	gk1
 = 
ad≠tive_dt
 * 
v
;

129 
adv™˚_time
–0.5*
ad≠tive_dt
 );

130 
gë_vñocôy
–
p
 + 0.5 * 
k1
, 
v
 );

131 
Vec3d
 
	gk2
 = 
ad≠tive_dt
 * 
v
;

134 
gë_vñocôy
–
p
 + 0.5 * 
k2
, 
v
 );

135 
Vec3d
 
	gk3
 = 
ad≠tive_dt
 * 
v
;

138 
adv™˚_time
–0.5*
ad≠tive_dt
 );

139 
gë_vñocôy
–
p
 + 0.5 * 
k3
, 
v
 );

140 
Vec3d
 
	gk4
 = 
ad≠tive_dt
 * 
v
;

142 
	g¥edi˘ed_posôi⁄s
[
i
] = 
p
 + 1.0/6.0 * ( 
k1
 + 
k4
 ) + 1.0/3.0 * ( 
k2
 + 
k3
 );

144 
adv™˚_time
–-
ad≠tive_dt
 );

147 
adv™˚_time
–
ad≠tive_dt
 );

157 
	gSISCCuæNoi£Drivî
::
	$compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 )

159 
dñè_vﬁume
 = 
surf
.
	`gë_vﬁume
(Ë- 
m_öôül_vﬁume
;

160 
≥r˚¡_îr‹
 = 
dñè_vﬁume
 / 
m_öôül_vﬁume
 * 100;

162 
cuº_‰ame
 = 0;

163 
RunSèts
 
g_°©s
;

164 
g_°©s
.
	`£t_doubÀ
–"œ°_t", 
cuºít_t
 );

165 
g_°©s
.
	`£t_doubÀ
–"œ°_dñè_vﬁume", 
dñè_vﬁume
 );

166 
g_°©s
.
	`£t_doubÀ
–"œ°_≥r˚¡_îr‹", 
≥r˚¡_îr‹
 );

167 ++
cuº_‰ame
;

169 
	}
}

	@talpa/drivers/sisccurlnoisedriver.h

10 #i‚de‡
EL_TOPO_SISCCURLNOISEDRIVER_H


11 
	#EL_TOPO_SISCCURLNOISEDRIVER_H


	)

17 
	~<cuænoi£.h
>

18 
	~<meshdrivî.h
>

19 
	~<noi£.h
>

25 
˛ass
 
	gSurfTøck
;

37 
	gSISCCuæNoi£Drivî
: 
public
 
CuæNoi£3
,Öubli¯
	gMeshDrivî


42 
SISCCuæNoi£Drivî
();

46 
öôülize
–c⁄° 
SurfTøck
& 
surf
 );

52 
vútuÆ
 
boﬁ
 
£ed_∑πi˛es
(
°d
::
ve˘‹
<
Vec3d
>& , Ëc⁄° {  
	gåue
; }

53 
adv™˚_time
() {}

57 
noi£2
(
x
, 
y
, 
z
Ëc⁄° {  
noi£
(z-203.994, x+169.47, y-205.31); }

61 
Vec3d
 
pŸítül
(
x
, 
y
, 
z
) const;

65 
vútuÆ
 
£t_¥edi˘ed_vîãx_posôi⁄s
–c⁄° 
SurfTøck
& 
surf
, 
°d
::
ve˘‹
<
Vec3d
>& 
¥edi˘ed_posôi⁄s
, 
cuºít_t
, & 
ad≠tive_dt
 );

69 
compuã_îr‹
–c⁄° 
SurfTøck
& 
surf
, 
cuºít_t
 );

73 
	g°d
::
ve˘‹
<> 
noi£_ÀngthsˇÀ
, 
	gnoi£_gaö
;

77 
FlowNoi£3
 
	gnoi£
;

81 
	gm_öôül_vﬁume
;

	@talpa/framestepper.h

12 #i‚de‡
EL_TOPO_FRAMESTEPPER_H


13 
	#EL_TOPO_FRAMESTEPPER_H


	)

15 ˛as†
	cFømeSãµî


19 
	mpublic
:

21 
‰ame_Àngth
;

22 
	m‰ame_cou¡
;

23 
	mcuºít_time
;

24 
	m°ï_cou¡
;

27 
	$FømeSãµî
 ( 
‰ame_Àn
 ) :

28 
	`‰ame_Àngth
(
‰ame_Àn
),

29 
	`‰ame_cou¡
(0),

30 
	`cuºít_time
(0),

31 
	$°ï_cou¡
(0)

35 
	$gë_°ï_Àngth
(
max_°ï
)

37 if(
cuºít_time
 + 
max_°ï
 > 
‰ame_Àngth
)

38 
max_°ï
 = 
‰ame_Àngth
 - 
cuºít_time
;

40  
max_°ï
;

41 
	}
}

44 
boﬁ
 
	$d⁄e_‰ame
()

46  
cuºít_time
 >
‰ame_Àngth
 - 1e-7;

47 
	}
}

49 
	$adv™˚_°ï
(
°ï_Àngth
)

51 
cuºít_time
 +
°ï_Àngth
;

52 ++
°ï_cou¡
;

53 
	}
}

55 
	$√xt_‰ame
()

57 
cuºít_time
 = 0;

58 
°ï_cou¡
 = 0;

59 ++
‰ame_cou¡
;

60 
	}
}

62 
	$gë_°ï_cou¡
()

64  
°ï_cou¡
;

65 
	}
}

67 
	$gë_‰ame
()

69  
‰ame_cou¡
;

70 
	}
}

72 
	$gë_time
()

74  (
‰ame_cou¡
-1)*
‰ame_Àngth
 + 
cuºít_time
;

75 
	}
}

	@talpa/geometryinit.cpp

14 
	~<geomëryöô.h
>

15 
	~<¨øy2.h
>

16 
	~<f°ªam
>

17 
	~<m¨chög_tûes_húes.h
>

18 
	~<sur·øck.h
>

32 
≠≥nd_mesh
–
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

33 
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

34 
°d
::
ve˘‹
<>& 
mas£s
,

35 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åis
,

36 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
√w_vîts
,

37 c⁄° 
°d
::
ve˘‹
<>& 
√w_mas£s
 )

39 
size_t
 
ﬁd_num_vîts
 = 
vîts
.
size
();

41  
size_t
 
	gi
 = 0; i < 
	g√w_vîts
.
size
(); ++i )

43 
	gvîts
.
push_back
–
√w_vîts
[
i
] );

46  
size_t
 
	gi
 = 0; i < 
	g√w_åis
.
size
(); ++i )

48 
	gåis
.
push_back
–
√w_åis
[
i
] + 
Vec3°
(
ﬁd_num_vîts
) );

51  
size_t
 
	gi
 = 0; i < 
	g√w_mas£s
.
size
(); ++i )

53 
	gmas£s
.
push_back
–
√w_mas£s
[
i
] );

65 
c⁄tour_phi
–c⁄° 
Vec3d
& 
domaö_low
, 
domaö_dx
, 
Aºay3d
& 
phi
, 
°d
::
ve˘‹
<
Vec3°
>& 
åis
, std::ve˘‹<Vec3d>& 
vîts
 )

67 
M¨chögTûesHiRes
 
tûes
–
domaö_low
, 
domaö_dx
, 
phi
 );

69 
	g°d
::
cout
 << "C⁄tourög..." << 
°d
::
ídl
;

70 
	gtûes
.
c⁄tour
();

72 
	g°d
::
cout
 << "Im¥ovög..." << 
°d
::
ídl
;

73 
	gtûes
.
im¥ove_mesh
();

75 
	g°d
::
cout
 << "C›yög..." << 
°d
::
ídl
;

76  
size_t
 
	gi
 = 0; i < 
	gtûes
.
	gåi
.
size
(); ++i )

78 
	gåis
.
push_back
–
Vec3°
–
tûes
.
åi
[
i
] ) );

81  
size_t
 
	gi
 = 0; i < 
	gtûes
.
	gx
.
size
(); ++i )

83 
	gvîts
.
push_back
–
tûes
.
x
[
i
] );

86 
	g°d
::
cout
 << "d⁄e" << 
°d
::
ídl
;

90 
¸óã_cú˛e
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

91 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

92 
°d
::
ve˘‹
<>& 
mas£s
,

93 c⁄° 
Vec3d
& 
˚¡ª
,

94 
ødius
,

95 
size_t
 
nx
 )

97 
Vec3d
 
	glow
 = 
˚¡ª
 - Vec3d–
ødius
, 0.0,Ñadius );

99 
	gdx
 = 2.0 * 
ødius
 / ()
nx
;

101 
	gAºay2
<
	gVec3d
> 
	ggrid_poöts
;

102 
	ggrid_poöts
.
ªsize
(
nx
,Çx);

103  
size_t
 
	gi
 = 0; i < 
	gnx
; ++i )

105  
size_t
 
	gj
 = 0; j < 
	gnx
; ++j )

107 
grid_poöts
(
i
,
j
Ë
low
 + 
dx
 * 
Vec3d
( i, 0, j );

108 
	gvîts
.
push_back
–
low
 + 
dx
 * 
Vec3d
–
i
, 0, 
j
 ) );

113  
size_t
 
	gi
 = 0; i < 
	gnx
-1; ++i )

115  
size_t
 
	gj
 = 0; j < 
	gnx
-1; ++j )

117 
size_t
 
	ga
 = 
i
 + 
nx
*
j
;

118 
size_t
 
	gb
 = 
i
+1 + 
nx
*
j
;

119 
size_t
 
	gc
 = 
i
+1 + 
nx
*(
j
+1);

120 
size_t
 
	gd
 = 
i
 + 
nx
*(
j
+1);

123 i‡––
di°
–
vîts
[
a
], 
˚¡ª
 ) < 
	gødius
 ) &&

124 –
di°
–
vîts
[
b
], 
˚¡ª
 ) < 
	gødius
 ) &&

125 –
di°
–
vîts
[
d
], 
˚¡ª
 ) < 
	gødius
 ) )

127 
	gåis
.
push_back
–
Vec3°
–
a
, 
b
, 
d
 ) );

130 i‡––
di°
–
vîts
[
b
], 
˚¡ª
 ) < 
	gødius
 ) &&

131 –
di°
–
vîts
[
c
], 
˚¡ª
 ) < 
	gødius
 ) &&

132 –
di°
–
vîts
[
d
], 
˚¡ª
 ) < 
	gødius
 ) )

134 
	gåis
.
push_back
–
Vec3°
–
b
, 
c
, 
d
 ) );

139 
	gmas£s
.
˛ór
();

140 
	gmas£s
.
ªsize
–
vîts
.
size
(), 1.0 );

142 
N⁄De°ru˘iveTriMesh
 
	gãmp_åi_mesh
;

143 
	gãmp_åi_mesh
.
£t_num_vîti˚s
–
vîts
.
size
() );

144  
size_t
 
	gi
 = 0; i < 
	gåis
.
size
(); ++i )

146 
	gãmp_åi_mesh
.
add_åüngÀ
–
åis
[
i
] );

152 
	g°d
::
ve˘‹
<
Vec2d
> 
ª°_vîti˚s
;

161 
¸óã_shìt
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

162 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

163 c⁄° 
Vec3d
& 
low_c‹√r
,

164 
dx
,

165 
size_t
 
nx
,

166 
size_t
 
ny
 )

169 
size_t
 
	gi
 = 0; i < 
	gny
; i++)

171 
size_t
 
	gj
 = 0; j < 
	gnx
; j++)

175 
Vec3d
 
	goff£t
;

176 
	goff£t
[0] = 
dx
*
j
;

177 
	goff£t
[1] = 0.0;

178 
	goff£t
[2] = 
dx
*
i
;

180 
	gvîts
.
push_back
–
low_c‹√r
 + 
off£t
 );

182 
	gª°_vîti˚s
.
push_back
–
Vec2d
(
off£t
[0], offset[2]) );

186 
size_t
 
	gi
 = 0; i < 
	gny
-1; i++)

188 
size_t
 
	gj
 = 0; j < 
	gnx
-1; j++)

190 
size_t
 
	gidx
 = 
i
*(
nx
)+
j
;

191 
	gåis
.
push_back
(
Vec3°
(
idx
, idx+(
nx
), idx+1));

192 
	gåis
.
push_back
(
Vec3°
(
idx
+1, idx+(
nx
), idx+(nx)+1));

200 
¸óã_curved_shìt
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

201 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

202 c⁄° 
Vec3d
& 
low_c‹√r
,

203 
dx
,

204 
size_t
 
nx
,

205 
size_t
 
ny
 )

207 
	g°d
::
cout
 << "shìt: " << 
low_c‹√r
 << ", " << 
dx
 << 
°d
::
ídl
;

208 
	g°d
::
cout
 << "ªsﬁuti⁄: " << 
nx
 << "x" << 
ny
 << 
°d
::
ídl
;

209 
	g°d
::
cout
 << "dimísi⁄s: " << 
dx
*
nx
 << "x" << dx*
ny
 << 
°d
::
ídl
;

211 
	gnum_curves
 = 4;

212 
	gam∂ôude
 = 
dx
*
nx
 / 20.0;

214 
size_t
 
	gi
 = 0; i < 
	gny
; i++)

216 
size_t
 
	gj
 = 0; j < 
	gnx
; j++)

219 
	gthëa
 = 2.0 * 
M_PI
 * ()
j
 / ()
nx
 * ()
num_curves
;

222 
	gx
 = 
dx
*
j
;

223 
	gz
 = 
dx
*
i
;

224 
	gy
 = 1e-3*
z
 + 
am∂ôude
 * 
sö
–
thëa
 );

225 
	gvîts
.
push_back
(
Vec3d
(
x
,
y
,
z
Ë+ 
low_c‹√r
);

230 
size_t
 
	gi
 = 0; i < 
	gny
-1; i++)

232 
size_t
 
	gj
 = 0; j < 
	gnx
-1; j++)

234 
size_t
 
	gidx
 = 
i
*(
nx
)+
j
;

235 
	gåis
.
push_back
(
Vec3°
(
idx
, idx+(
nx
), idx+1));

236 
	gåis
.
push_back
(
Vec3°
(
idx
+1, idx+(
nx
), idx+(nx)+1));

340 
¥oje˘_to_exa˘_cube
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

341 c⁄° 
Vec3d
& 
cube_low
,

342 c⁄° 
Vec3d
& 
cube_high
 )

345  
size_t
 
	gi
 = 0; i < 
	gvîts
.
size
(); ++i )

347 
	gVec3d
& 
	gv
 = 
vîts
[
i
];

348 
Vec3d
 
p
(0,0,0);

349 
	gmö_di°
 = 1e+30;

351 i‡–
Ábs
–
v
[0] - 
cube_low
[0] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[0] - cube_low[0] ); 
	gp
 = v;Ö[0] = cube_low[0]; }

352 i‡–
Ábs
–
v
[1] - 
cube_low
[1] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[1] - cube_low[1] ); 
	gp
 = v;Ö[1] = cube_low[1]; }

353 i‡–
Ábs
–
v
[2] - 
cube_low
[2] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[2] - cube_low[2] ); 
	gp
 = v;Ö[2] = cube_low[2]; }

354 i‡–
Ábs
–
v
[0] - 
cube_high
[0] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[0] - cube_high[0] ); 
	gp
 = v;Ö[0] = cube_high[0]; }

355 i‡–
Ábs
–
v
[1] - 
cube_high
[1] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[1] - cube_high[1] ); 
	gp
 = v;Ö[1] = cube_high[1]; }

356 i‡–
Ábs
–
v
[2] - 
cube_high
[2] ) < 
	gmö_di°
 ) { mö_di° = fabs–v[2] - cube_high[2] ); 
	gp
 = v;Ö[2] = cube_high[2]; }

358 
	gv
 = 
p
;

368 
¥oje˘_to_exa˘_•hîe
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
, c⁄° Vec3d& 
•hîe_˚¡ª
, 
•hîe_ødius
 )

370  
size_t
 
	gi
 = 0; i < 
	gvîts
.
size
(); ++i )

372 
	gVec3d
& 
	gv
 = 
vîts
[
i
];

374 
	gdi°
 = 
mag
–
v
 - 
•hîe_˚¡ª
 ) - 
•hîe_ødius
;

376 
	gv
 -
di°
 * ( 
v
 - 
•hîe_˚¡ª
 ) / 
mag
( v - sphere_centre );

387 
¥oje˘_to_exa˘_dumbbñl
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

388 c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

389 c⁄° 
Vec3d
 
•hîe_b_˚¡ª
,

390 
•hîe_ødius
,

391 
h™dÀ_width
 )

394  
size_t
 
	gi
 = 0; i < 
	gvîts
.
size
(); ++i )

396 
	gVec3d
& 
	g±
 = 
vîts
[
i
];

397 
	gdx
 = 1e-6;

399 
	gx_pos
 = 
sig√d_di°™˚_dumbbñl
–
±
 + 
Vec3d
(
dx
,0,0), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

400 
	gx_√g
 = 
sig√d_di°™˚_dumbbñl
–
±
 - 
Vec3d
(
dx
,0,0), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

401 
	gy_pos
 = 
sig√d_di°™˚_dumbbñl
–
±
 + 
Vec3d
(0,
dx
,0), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

402 
	gy_√g
 = 
sig√d_di°™˚_dumbbñl
–
±
 - 
Vec3d
(0,
dx
,0), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

403 
	gz_pos
 = 
sig√d_di°™˚_dumbbñl
–
±
 + 
Vec3d
(0,0,
dx
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

404 
	gz_√g
 = 
sig√d_di°™˚_dumbbñl
–
±
 - 
Vec3d
(0,0,
dx
), 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

406 
Vec3d
 
n
–
x_pos
 - 
x_√g
, 
y_pos
 - 
y_√g
, 
z_pos
 - 
z_√g
 );

407 
n‹mÆize
–
n
 );

409 
	gdi°
 = 
sig√d_di°™˚_dumbbñl
–
±
, 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

411 
	g±
 -
di°
 * 
n
;

413 
as£π
–
Ábs
–
sig√d_di°™˚_dumbbñl
–
±
, 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 )) < 1e-8 );

425 
	$ªad_sig√d_di°™˚
–c⁄° * 
fûíame
, 
Aºay3d
& 
sig√d_di°™˚
 )

427 
FILE
* 
fûe
 = 
	`f›í
–
fûíame
, "r" );

428 i‡–
fûe
 =
NULL
 )

430 
°d
::
cout
 << "ÁûedÅÿ›í fûe: " << 
fûíame
 << std::
ídl
;

431 
	`as£π
(0);

435 
num_dim
;

436 
	`fsˇnf
–
fûe
, "%d ", &
num_dim
 );

438 i‡–
num_dim
 != 3 )

440 
°d
::
cout
 << "num_dim: " << 
num_dim
 << std::
ídl
;

441 
	`as£π
(0);

444 
dims
[3];

445 
	`fsˇnf
–
fûe
, "%d %d %d ", &(
dims
[0]), &(dims[1]), &(dims[2]) );

447 
num_ñemíts
 = 
dims
[0]*dims[1]*dims[2];

449 
sig√d_di°™˚
.
ni
 = 
dims
[0];

450 
sig√d_di°™˚
.
nj
 = 
dims
[1];

451 
sig√d_di°™˚
.
nk
 = 
dims
[2];

453 
sig√d_di°™˚
.
a
.
	`ªsize
(
num_ñemíts
);

456  
i
 = 0; i < 
num_ñemíts
; ++i )

458 
buf
;

459 
	`fsˇnf
–
fûe
, "%‡", &
buf
 );

460 
sig√d_di°™˚
.
a
[
i
] = 
buf
;

463 
	`f˛o£
(
fûe
);

465 
°d
::
cout
 << "Ród m© fûe" << std::
ídl
;

467 
	}
}

477 
	$¸óã_ˇpsuÀ_sig√d_di°™˚
–c⁄° 
Vec3d
& 
ˇpsuÀ_íd_a
,

478 c⁄° 
Vec3d
& 
ˇpsuÀ_íd_b
,

479 
ˇpsuÀ_ødius
,

480 
dx
,

481 c⁄° 
Vec3d
& 
domaö_low
,

482 c⁄° 
Vec3d
& 
domaö_high
,

483 
Aºay3d
& 
phi
 )

485 
phi
.
	`ªsize
–(Ë
	`˚û
–(
domaö_high
[0]-
domaö_low
[0]Ë/ 
dx
), () ceil( (domain_high[1]-domain_low[1]) / dx), () ceil( (domain_high[2]-domain_low[2]) / dx) );

487 
°d
::
cout
 << "Gíî©ög sig√d di°™˚ fun˘i⁄. GridÑesﬁuti⁄: " << 
phi
.
ni
 << " x " <<Öhi.
nj
 << " x " <<Öhi.
nk
 << std::
ídl
;

489  
i
 = 0; i < 
phi
.
ni
; ++i )

491  
j
 = 0; j < 
phi
.
nj
; ++j )

493  
k
 = 0; k < 
phi
.
nk
; ++k )

495 
Vec3d
 
±
 = 
domaö_low
 + 
dx
 * 
	`Vec3d
(
i
,
j
,
k
);

497 
di°™˚
;

499 
Vec3d
 
	`˚¡øl_£gmít
(
ˇpsuÀ_íd_b
 - 
ˇpsuÀ_íd_a
);

500 
m2
=
	`mag2
(
˚¡øl_£gmít
);

503 
s
 = 
	`dŸ
(
ˇpsuÀ_íd_b
 - 
±
, 
˚¡øl_£gmít
)/
m2
;

505 i‡–
s
 < 0.0 )

509 
di°™˚
 = 
	`di°
(
±
, 
ˇpsuÀ_íd_b
);

510 
di°™˚
 -
ˇpsuÀ_ødius
;

514 i‡–
s
 > 1.0 )

517 
di°™˚
 = 
	`di°
(
±
, 
ˇpsuÀ_íd_a
 );

518 
di°™˚
 -
ˇpsuÀ_ødius
;

525 
di°™˚
 = 
	`di°
(
±
, 
s
*
ˇpsuÀ_íd_a
 + (1-s)*
ˇpsuÀ_íd_b
);

526 
di°™˚
 -
ˇpsuÀ_ødius
;

529 
	`phi
(
i
,
j
,
k
Ë
di°™˚
;

534 
	}
}

543 
	$¸óã_cube_sig√d_di°™˚
–c⁄° 
Vec3d
& 
cube_low
,

544 c⁄° 
Vec3d
& 
cube_high
,

545 
dx
,

546 c⁄° 
Vec3d
& 
domaö_low
,

547 c⁄° 
Vec3d
& 
domaö_high
,

548 
Aºay3d
& 
phi
 )

550 
phi
.
	`ªsize
–(Ë
	`˚û
–(
domaö_high
[0]-
domaö_low
[0]Ë/ 
dx
), () ceil( (domain_high[1]-domain_low[1]) / dx), () ceil( (domain_high[2]-domain_low[2]) / dx) );

552 
°d
::
cout
 << "Gíî©ög sig√d di°™˚ fun˘i⁄. GridÑesﬁuti⁄: " << 
phi
.
ni
 << " x " <<Öhi.
nj
 << " x " <<Öhi.
nk
 << std::
ídl
;

554  
i
 = 0; i < 
phi
.
ni
; ++i )

556  
j
 = 0; j < 
phi
.
nj
; ++j )

558  
k
 = 0; k < 
phi
.
nk
; ++k )

560 
Vec3d
 
±
 = 
domaö_low
 + 
dx
 * 
	`Vec3d
(
i
,
j
,
k
);

562 
di°_low_x
 = 
cube_low
[0] - 
±
[0];

563 
di°_high_x
 = 
±
[0] - 
cube_high
[0];

565 
di°_low_y
 = 
cube_low
[1] - 
±
[1];

566 
di°_high_y
 = 
±
[1] - 
cube_high
[1];

568 
di°_low_z
 = 
cube_low
[2] - 
±
[2];

569 
di°_high_z
 = 
±
[2] - 
cube_high
[2];

571 
	`phi
(
i
,
j
,
k
Ë
	`max
–
di°_low_x
, 
di°_high_x
, 
di°_low_y
, 
di°_high_y
, 
di°_low_z
, 
di°_high_z
 );

576 
	}
}

585 
	$¸óã_•hîe_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_˚¡ª
,

586 
•hîe_ødius
,

587 
dx
,

588 c⁄° 
Vec3d
& 
domaö_low
,

589 c⁄° 
Vec3d
& 
domaö_high
,

590 
Aºay3d
& 
phi
 )

592 
phi
.
	`ªsize
–(Ë
	`˚û
–(
domaö_high
[0]-
domaö_low
[0]Ë/ 
dx
), () ceil( (domain_high[1]-domain_low[1]) / dx), () ceil( (domain_high[2]-domain_low[2]) / dx) );

594 
°d
::
cout
 << "Gíî©ög sig√d di°™˚ fun˘i⁄. GridÑesﬁuti⁄: " << 
phi
.
ni
 << " x " <<Öhi.
nj
 << " x " <<Öhi.
nk
 << std::
ídl
;

596  
i
 = 0; i < 
phi
.
ni
; ++i )

598  
j
 = 0; j < 
phi
.
nj
; ++j )

600  
k
 = 0; k < 
phi
.
nk
; ++k )

602 
Vec3d
 
±
 = 
domaö_low
 + 
dx
 * 
	`Vec3d
(
i
,
j
,
k
);

603 
di°
 = 
	`mag
–
±
 - 
•hîe_˚¡ª
 );

604 
	`phi
(
i
,
j
,
k
Ë
di°
 - 
•hîe_ødius
;

608 
	}
}

616 
¸óã_•hîe
–c⁄° 
Vec3d
& 
•hîe_˚¡ª
,

617 
•hîe_ødius
,

618 
dx
,

619 
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

620 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 )

623 c⁄° 
Vec3d
 
domaö_low
 = 
•hîe_˚¡ª
 - Vec3d(
•hîe_ødius
 + 3*
dx
);

624 c⁄° 
Vec3d
 
	gdomaö_high
 = 
•hîe_˚¡ª
 + Vec3d(
•hîe_ødius
 + 3*
dx
);

625 
Aºay3d
 
	gphi
;

626 
¸óã_•hîe_sig√d_di°™˚
–
•hîe_˚¡ª
, 
•hîe_ødius
, 
dx
, 
domaö_low
, 
domaö_high
, 
phi
 );

628 
M¨chögTûesHiRes
 
m¨chög_tûes
–
domaö_low
, 
dx
, 
phi
 );

629 
	gm¨chög_tûes
.
c⁄tour
();

630 
	gm¨chög_tûes
.
im¥ove_mesh
();

632 
	g°d
::
ve˘‹
<
Vec3d
> 
√w_vîts
–
m¨chög_tûes
.
x
.
size
() );

633  
size_t
 
	gi
 = 0; i < 
	g√w_vîts
.
size
(); ++i )

635 
	g√w_vîts
[
i
] = 
m¨chög_tûes
.
x
[i];

638 
	g°d
::
ve˘‹
<
Vec3°
> 
√w_åis
–
m¨chög_tûes
.
åi
.
size
() );

639  
size_t
 
	gi
 = 0; i < 
	g√w_åis
.
size
(); ++i )

641 
	g√w_åis
[
i
] = 
Vec3°
–
m¨chög_tûes
.
åi
[i] );

644 
¥oje˘_to_exa˘_•hîe
–
√w_vîts
, 
•hîe_˚¡ª
, 
•hîe_ødius
 );

646 
Vec3°
 
off£t
–
vîts
.
size
() );

647  
size_t
 
	gi
 = 0; i < 
	g√w_vîts
.
size
(); ++i )

649 
	gvîts
.
push_back
–
√w_vîts
[
i
] );

652  
size_t
 
	gi
 = 0; i < 
	g√w_åis
.
size
(); ++i )

654 
	gåis
.
push_back
–
√w_åis
[
i
] + 
off£t
 );

661 
¸óã_icosohedr⁄
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

662 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 )

665 
t
 = 0.5 * ( 1. - 
sqπ
(5.) );

666 
	gc
 = 1. / 
sqπ
–1. - 
t
*t );

668 
Vec3°
 
off£t
–
vîts
.
size
() );

670 
	gvîts
.
push_back
–
c
 * 
Vec3d
–
t
, 1, 0 ) );

671 
	gvîts
.
push_back
–
c
 * 
Vec3d
–-
t
, 1, 0 ) );

672 
	gvîts
.
push_back
–
c
 * 
Vec3d
–
t
, -1, 0 ) );

673 
	gvîts
.
push_back
–
c
 * 
Vec3d
–-
t
, -1, 0 ) );

674 
	gvîts
.
push_back
–
c
 * 
Vec3d
–1, 0, 
t
 ) );

675 
	gvîts
.
push_back
–
c
 * 
Vec3d
–1, 0, -
t
 ) );

676 
	gvîts
.
push_back
–
c
 * 
Vec3d
–-1, 0, 
t
 ) );

677 
	gvîts
.
push_back
–
c
 * 
Vec3d
–-1, 0, -
t
 ) );

678 
	gvîts
.
push_back
–
c
 * 
Vec3d
–0, 
t
, 1 ) );

679 
	gvîts
.
push_back
–
c
 * 
Vec3d
–0, -
t
, 1 ) );

680 
	gvîts
.
push_back
–
c
 * 
Vec3d
–0, 
t
, -1 ) );

681 
	gvîts
.
push_back
–
c
 * 
Vec3d
–0, -
t
, -1 ) );

683 
	gåis
.
push_back
–
Vec3°
(0,8,4Ë+ 
off£t
 );

684 
	gåis
.
push_back
–
Vec3°
(0,5,10Ë+ 
off£t
 );

685 
	gåis
.
push_back
–
Vec3°
(2,4,9Ë+ 
off£t
 );

686 
	gåis
.
push_back
–
Vec3°
(2,11,5Ë+ 
off£t
 );

687 
	gåis
.
push_back
–
Vec3°
(1,6,8Ë+ 
off£t
 );

688 
	gåis
.
push_back
–
Vec3°
(1,10,7Ë+ 
off£t
 );

689 
	gåis
.
push_back
–
Vec3°
(3,9,6Ë+ 
off£t
 );

690 
	gåis
.
push_back
–
Vec3°
(3,7,11Ë+ 
off£t
 );

691 
	gåis
.
push_back
–
Vec3°
(0,10,8Ë+ 
off£t
 );

692 
	gåis
.
push_back
–
Vec3°
(1,8,10Ë+ 
off£t
 );

693 
	gåis
.
push_back
–
Vec3°
(2,9,11Ë+ 
off£t
 );

694 
	gåis
.
push_back
–
Vec3°
(3,9,11Ë+ 
off£t
 );

695 
	gåis
.
push_back
–
Vec3°
(4,2,0Ë+ 
off£t
 );

696 
	gåis
.
push_back
–
Vec3°
(5,0,2Ë+ 
off£t
 );

697 
	gåis
.
push_back
–
Vec3°
(6,1,3Ë+ 
off£t
 );

698 
	gåis
.
push_back
–
Vec3°
(7,3,1Ë+ 
off£t
 );

699 
	gåis
.
push_back
–
Vec3°
(8,6,4Ë+ 
off£t
 );

700 
	gåis
.
push_back
–
Vec3°
(9,4,6Ë+ 
off£t
 );

701 
	gåis
.
push_back
–
Vec3°
(10,5,7Ë+ 
off£t
 );

702 
	gåis
.
push_back
–
Vec3°
(11,7,5Ë+ 
off£t
 );

713 
	$sig√d_di°™˚_íå›y
(c⁄° 
Vec3d
& 
x
,

714 c⁄° 
Vec3d
& 
a
,

715 c⁄° 
Vec3d
& 
b
,

716 
max_ødius
,

717 
öãri‹_ødius
)

719 
d
=
	`di°
(
a
, 
b
);

720 
Æpha
=
	`dŸ
(
x
-
a
, 
b
-a)/
d
;

722 if(
Æpha
<=0){

723  
	`di°
(
x
, 
a
Ë- 
max_ødius
 + 
öãri‹_ødius
;

725 }if(
Æpha
>=
d
){

726  
	`di°
(
x
, 
b
Ë- 
max_ødius
 + 
öãri‹_ødius
;

728 }if(
Æpha
<=0.5*
d
){

729 if(
max_ødius
<=0.5*
d
){

730  
	`di°
(
x
, 
a
Ë- 
max_ødius
 + 
öãri‹_ødius
;

732 
bëa
=
°d
::
	`sqπ
(
	`di°2
(
x
, 
a
Ë- 
	`sqr
(
Æpha
));

733 
gamma
=
°d
::
	`sqπ
(
	`sqr
(
max_ødius
Ë- sqr(0.5*
d
));

734 if(
bëa
/
Æpha
>=
gamma
/(0.5*
d
)){

735  
	`di°
(
x
, 
a
Ë- 
max_ødius
 + 
öãri‹_ødius
;

738  
öãri‹_ødius
 - 
	`sqπ
(
	`sqr
(
gamma
-
bëa
Ë+ sqr(0.5*
d
-
Æpha
));

742 if(
max_ødius
<=0.5*
d
){

743  
	`di°
(
x
, 
b
Ë- 
max_ødius
 + 
öãri‹_ødius
;

745 
bëa
=
°d
::
	`sqπ
(
	`di°2
(
x
, 
a
Ë- 
	`sqr
(
Æpha
));

746 
gamma
=
°d
::
	`sqπ
(
	`sqr
(
max_ødius
Ë- sqr(0.5*
d
));

747 if(
bëa
/(
d
-
Æpha
)>=
gamma
/(0.5*d)){

748  
	`di°
(
x
, 
b
Ë- 
max_ødius
 + 
öãri‹_ødius
;

751  
öãri‹_ødius
 - 
	`sqπ
(
	`sqr
(
gamma
-
bëa
Ë+ sqr(
Æpha
-0.5*
d
));

755 
	}
}

764 
	$¸óã_two_•hîe_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

765 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

766 
•hîe_ødius
,

767 
dx
,

768 c⁄° 
Vec3d
& 
domaö_low
,

769 c⁄° 
Vec3d
& 
domaö_high
,

770 
Aºay3d
& 
phi
 )

772 
phi
.
	`ªsize
–(Ë
	`˚û
–(
domaö_high
[0]-
domaö_low
[0]Ë/ 
dx
), () ceil( (domain_high[1]-domain_low[1]) / dx), () ceil( (domain_high[2]-domain_low[2]) / dx) );

774 
°d
::
cout
 << "Gíî©ög sig√d di°™˚ fun˘i⁄. GridÑesﬁuti⁄: " << 
phi
.
ni
 << " x " <<Öhi.
nj
 << " x " <<Öhi.
nk
 << std::
ídl
;

776  
i
 = 0; i < 
phi
.
ni
; ++i )

778  
j
 = 0; j < 
phi
.
nj
; ++j )

780  
k
 = 0; k < 
phi
.
nk
; ++k )

782 
Vec3d
 
±
 = 
domaö_low
 + 
dx
 * 
	`Vec3d
(
i
,
j
,
k
);

783 
	`phi
(
i
,
j
,
k
Ë
	`sig√d_di°™˚_íå›y
–
±
, 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 0.0 );

788 
	}
}

797 
	$sig√d_di°™˚_dumbbñl
–c⁄° 
Vec3d
& 
±
,

798 c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

799 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

800 
•hîe_ødius
,

801 
h™dÀ_width
 )

803 
di°_•hîes
 = ( 
	`mö
–
	`mag
(
±
 - 
•hîe_a_˚¡ª
), mag’à- 
•hîe_b_˚¡ª
ËË- 
•hîe_ødius
 );

804  
	`mö
–
di°_•hîes
, 
	`max
–
	`Ábs
(
±
[0]Ë- 
•hîe_b_˚¡ª
[0], 
	`sqπ
–±[1]*±[1] +Öt[2]*±[2] ) - 
h™dÀ_width
 ) );

805 
	}
}

814 
	$¸óã_dumbbñl_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

815 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

816 
•hîe_ødius
,

817 
h™dÀ_width
,

818 
dx
,

819 c⁄° 
Vec3d
& 
domaö_low
,

820 c⁄° 
Vec3d
& 
domaö_high
,

821 
Aºay3d
& 
phi
 )

824 
phi
.
	`ªsize
–(Ë
	`˚û
–(
domaö_high
[0]-
domaö_low
[0]Ë/ 
dx
), () ceil( (domain_high[1]-domain_low[1]) / dx), () ceil( (domain_high[2]-domain_low[2]) / dx) );

826 
°d
::
cout
 << "Gíî©ög sig√d di°™˚ fun˘i⁄. GridÑesﬁuti⁄: " << 
phi
.
ni
 << " x " <<Öhi.
nj
 << " x " <<Öhi.
nk
 << std::
ídl
;

828  
i
 = 0; i < 
phi
.
ni
; ++i )

830  
j
 = 0; j < 
phi
.
nj
; ++j )

832  
k
 = 0; k < 
phi
.
nk
; ++k )

834 
Vec3d
 
±
 = 
domaö_low
 + 
dx
 * 
	`Vec3d
(
i
,
j
,
k
);

835 
	`phi
(
i
,
j
,
k
Ë
	`sig√d_di°™˚_dumbbñl
–
±
, 
•hîe_a_˚¡ª
, 
•hîe_b_˚¡ª
, 
•hîe_ødius
, 
h™dÀ_width
 );

840 
	}
}

	@talpa/geometryinit.h

10 #i‚de‡
EL_TOPO_GEOMETRYINIT_H


11 
	#EL_TOPO_GEOMETRYINIT_H


	)

17 
	~<vec.h
>

23 
˛ass
 
	gSurfTøck
;

29 
≠≥nd_mesh
–
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

30 
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

31 
°d
::
ve˘‹
<>& 
mas£s
,

32 c⁄° 
°d
::
ve˘‹
<
Vec3°
>& 
√w_åis
,

33 c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
√w_vîts
,

34 c⁄° 
°d
::
ve˘‹
<>& 
√w_mas£s
 );

36 
c⁄tour_phi
–c⁄° 
Vec3d
& 
domaö_low
, 
domaö_dx
, 
Aºay3d
& 
phi
, 
°d
::
ve˘‹
<
Vec3°
>& 
åis
, std::ve˘‹<Vec3d>& 
vîts
 );

38 
¸óã_cú˛e
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

39 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

40 
°d
::
ve˘‹
<>& 
mas£s
,

41 c⁄° 
Vec3d
& 
˚¡ª
,

42 
ødius
,

43 
size_t
 
nx
 );

47 
¸óã_shìt
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

48 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

49 c⁄° 
Vec3d
& 
low_c‹√r
,

50 
width
,

51 
size_t
 
nx
,

52 
size_t
 
ny
 );

56 
¸óã_curved_shìt
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

57 
°d
::
ve˘‹
<
Vec3°
>& 
åis
,

58 c⁄° 
Vec3d
& 
low_c‹√r
,

59 
width
,

60 
size_t
 
nx
,

61 
size_t
 
ny
 );

65 
¥oje˘_to_exa˘_cube
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

66 c⁄° 
Vec3d
& 
cube_low
,

67 c⁄° 
Vec3d
& 
cube_high
 );

71 
¥oje˘_to_exa˘_•hîe
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

72 c⁄° 
Vec3d
& 
•hîe_˚¡ª
,

73 
ødius
 );

78 
¥oje˘_to_exa˘_dumbbñl
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

79 c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

80 c⁄° 
Vec3d
 
•hîe_b_˚¡ª
,

81 
•hîe_ødius
,

82 
h™dÀ_width
 );

86 
ªad_sig√d_di°™˚
–c⁄° * 
fûíame
, 
Aºay3d
& 
sig√d_di°™˚
 );

90 
¸óã_ˇpsuÀ_sig√d_di°™˚
–c⁄° 
Vec3d
& 
ˇpsuÀ_íd_a
,

91 c⁄° 
Vec3d
& 
ˇpsuÀ_íd_b
,

92 
ˇpsuÀ_ødius
,

93 
dx
,

94 c⁄° 
Vec3d
& 
domaö_low
,

95 c⁄° 
Vec3d
& 
domaö_high
,

96 
Aºay3d
& 
phi
 );

100 
¸óã_cube_sig√d_di°™˚
–c⁄° 
Vec3d
& 
cube_low
,

101 c⁄° 
Vec3d
& 
cube_high
,

102 
dx
,

103 c⁄° 
Vec3d
& 
domaö_low
,

104 c⁄° 
Vec3d
& 
domaö_high
,

105 
Aºay3d
& 
phi
 );

109 
¸óã_•hîe_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_˚¡ª
,

110 
•hîe_ødius
,

111 
dx
,

112 c⁄° 
Vec3d
& 
domaö_low
,

113 c⁄° 
Vec3d
& 
domaö_high
,

114 
Aºay3d
& 
phi
 );

116 
¸óã_icosohedr⁄
–
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

117 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 );

121 
¸óã_•hîe
–c⁄° 
Vec3d
& 
•hîe_˚¡ª
,

122 
•hîe_ødius
,

123 
dx
,

124 
°d
::
ve˘‹
<
Vec3d
>& 
vîts
,

125 
°d
::
ve˘‹
<
Vec3°
>& 
åis
 );

130 
sig√d_di°™˚_íå›y
–c⁄° 
Vec3d
& 
±
,

131 c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

132 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

133 
•hîe_max_ødius
,

134 
•hîe_öãri‹_ødius
 );

138 
¸óã_two_•hîe_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

139 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

140 
•hîe_ødius
,

141 
dx
,

142 c⁄° 
Vec3d
& 
domaö_low
,

143 c⁄° 
Vec3d
& 
domaö_high
,

144 
Aºay3d
& 
phi
 );

148 
sig√d_di°™˚_dumbbñl
–c⁄° 
Vec3d
& 
±
,

149 c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

150 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

151 
•hîe_ødius
,

152 
h™dÀ_width
 );

156 
¸óã_dumbbñl_sig√d_di°™˚
–c⁄° 
Vec3d
& 
•hîe_a_˚¡ª
,

157 c⁄° 
Vec3d
& 
•hîe_b_˚¡ª
,

158 
•hîe_ødius
,

159 
h™dÀ_width
,

160 
dx
,

161 c⁄° 
Vec3d
& 
domaö_low
,

162 c⁄° 
Vec3d
& 
domaö_high
,

163 
Aºay3d
& 
phi
 );

	@talpa/highrestimer.h

8 #i‚de‡
ñt›o3d_¥oje˘_highª°imî_h


9 
	#ñt›o3d_¥oje˘_highª°imî_h


	)

11 
	~<mach/˛ock.h
>

12 
	~<mach/mach_time.h
>

13 
	~<mach/mach.h
>

14 
	~<C‹eSîvi˚s/C‹eSîvi˚s.h
>

17 
ölöe
 
uöt64_t
 
	$gë_absﬁuã_time
()

19  
	`mach_absﬁuã_time
();

20 
	}
}

23 
ölöe
 
uöt64_t
 
	$c⁄vît_öãrvÆ_to_«no£c⁄ds
–
uöt64_t
 
time_öãrvÆ
 )

25 
N™o£c⁄ds
 
ñ≠£d_«no
 = 
	`AbsﬁuãToN™o£c⁄ds
–*(
AbsﬁuãTime
 *Ë&
time_öãrvÆ
 );

26  * (
uöt64_t
 *Ë&
ñ≠£d_«no
;

27 
	}
}

29 
ölöe
 
	$c⁄vît_öãrvÆ_to_£c⁄ds
–
uöt64_t
 
time_öãrvÆ
 )

31 
N™o£c⁄ds
 
ñ≠£d_«no
 = 
	`AbsﬁuãToN™o£c⁄ds
–*(
AbsﬁuãTime
 *Ë&
time_öãrvÆ
 );

32  1e-9 * (*(
uöt64_t
*)&
ñ≠£d_«no
);

33 
	}
}

	@talpa/iomesh.cpp

11 
	~<iomesh.h
>

13 
	~<bf°ªam.h
>

14 
	~<c°d¨g
>

15 
	~<c°dlib
>

16 
	~<cm©h
>

17 
	~<f°ªam
>

18 
	~<n⁄de°ru˘ivërimesh.h
>

20 #i‚de‡
NO_GUI


21 
	~<gluvi.h
>

24 
	#LINESIZE
 1024

25 

	)

33 
boﬁ
 
wrôe_bö¨y_fûe
–c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
,

34 c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
,

35 c⁄° 
°d
::
ve˘‹
<> &
mas£s
,

36 
cuº_t
,

37 c⁄° *
fûíame_f‹m©
, ...)

39 
va_li°
 
	g≠
;

40 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

41 
bof°ªam
 
outfûe
–
fûíame_f‹m©
, 
≠
 );

42 
va_íd
(
≠
);

44 
	goutfûe
.
wrôe_ídünôy
();

46 
	goutfûe
 << 
	gcuº_t
;

48 
	gnvîts
 = 
°©ic_ˇ°
<>–
x
.
size
() );

49 
	goutfûe
 << 
	gnvîts
;

50  
	gi
 = 0; i < 
	gx
.
size
(); ++i )

52 
	goutfûe
 << 
	gx
[
i
][0];

53 
	goutfûe
 << 
	gx
[
i
][1];

54 
	goutfûe
 << 
	gx
[
i
][2];

57 
as£π
–
x
.
size
(Ë=
mas£s
.size() );

59  
	gi
 = 0; i < 
	gmas£s
.
size
(); ++i )

61 
	goutfûe
 << 
	gmas£s
[
i
];

64 
	g¡ris
 = 
°©ic_ˇ°
<>–
mesh
.
num_åüngÀs
() );

65 
	goutfûe
 << 
	g¡ris
;

67  
	gt
 = 0;Å < 
	gmesh
.
num_åüngÀs
(); ++t )

69 c⁄° 
	gVec3ui
& 
	gåi
 = 
Vec3ui
–
mesh
.
gë_åüngÀ
(
t
) );

70 
	goutfûe
 << 
	gåi
[0];

71 
	goutfûe
 << 
	gåi
[1];

72 
	goutfûe
 << 
	gåi
[2];

75 
	goutfûe
.
˛o£
();

77  
	goutfûe
.
good
();

86 
boﬁ
 
wrôe_bö¨y_fûe_wôh_vñocôõs
–c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
,

87 c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
,

88 c⁄° 
°d
::
ve˘‹
<> &
mas£s
,

89 c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
v
,

90 
cuº_t
,

91 c⁄° *
fûíame_f‹m©
, ...)

93 
va_li°
 
	g≠
;

94 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

95 
bof°ªam
 
outfûe
–
fûíame_f‹m©
, 
≠
 );

96 
va_íd
(
≠
);

98 
	goutfûe
.
wrôe_ídünôy
();

100 
	goutfûe
 << 
	gcuº_t
;

102 
	gnvîts
 = 
°©ic_ˇ°
<>–
x
.
size
() );

103 
	goutfûe
 << 
	gnvîts
;

105  
	gi
 = 0; i < 
	gx
.
size
(); ++i )

107 
	goutfûe
 << 
	gx
[
i
][0];

108 
	goutfûe
 << 
	gx
[
i
][1];

109 
	goutfûe
 << 
	gx
[
i
][2];

112 
as£π
–
x
.
size
(Ë=
mas£s
.size() );

114  
	gi
 = 0; i < 
	gmas£s
.
size
(); ++i )

116 
	goutfûe
 << 
	gmas£s
[
i
];

119  
	gi
 = 0; i < 
	gv
.
size
(); ++i )

121 
	goutfûe
 << 
	gv
[
i
][0];

122 
	goutfûe
 << 
	gv
[
i
][1];

123 
	goutfûe
 << 
	gv
[
i
][2];

126 
	g¡ris
 = 
°©ic_ˇ°
<>–
mesh
.
num_åüngÀs
() );

127 
	goutfûe
 << 
	g¡ris
;

129  
	gt
 = 0;Å < 
	gmesh
.
num_åüngÀs
(); ++t )

131 c⁄° 
	gVec3ui
& 
	gåi
 = 
Vec3ui
–
mesh
.
gë_åüngÀ
(
t
) );

132 
	goutfûe
 << 
	gåi
[0];

133 
	goutfûe
 << 
	gåi
[1];

134 
	goutfûe
 << 
	gåi
[2];

137 
	goutfûe
.
˛o£
();

139  
	goutfûe
.
good
();

144 
boﬁ
 
wrôe_surÁ˚_ids
–c⁄° 
°d
::
ve˘‹
<
size_t
> &
ids
,

145 c⁄° *
fûíame_f‹m©
, ... )

147 
va_li°
 
	g≠
;

148 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

149 
bof°ªam
 
outfûe
–
fûíame_f‹m©
, 
≠
 );

150 
va_íd
(
≠
);

152 
	goutfûe
.
wrôe_ídünôy
();

154 
size_t
 
	gnids
 = 
ids
.
size
();

155 
	goutfûe
 << 
	gnids
;

157  
	gi
 = 0; i < 
	gids
.
size
(); ++i )

159 
	gcuº_id
 = 
°©ic_ˇ°
<>(
ids
[
i
]);

160 
	goutfûe
 << 
	gcuº_id
;

163 
	goutfûe
.
˛o£
();

165  
	goutfûe
.
good
();

175 
boﬁ
 
ªad_bö¨y_fûe
–
N⁄De°ru˘iveTriMesh
 &
mesh
,

176 
°d
::
ve˘‹
<
Vec3d
> &
x
,

177 
°d
::
ve˘‹
<> &
mas£s
,

178 & 
cuº_t
,

179 c⁄° *
fûíame_f‹m©
, ...)

181 
va_li°
 
	g≠
;

182 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

183 
bif°ªam
 
öfûe
–
fûíame_f‹m©
, 
≠
 );

184 
va_íd
(
≠
);

186 
as£π
–
öfûe
.
good
() );

188 
	göfûe
.
ªad_ídünôy
();

190 
	göfûe
 >> 
	gcuº_t
;

192 
	gnvîts
;

193 
	göfûe
 >> 
	gnvîts
;

194 
	gx
.
ªsize
–
nvîts
 );

195  
	gi
 = 0; i < 
	gnvîts
; ++i )

197 
	göfûe
 >> 
	gx
[
i
][0];

198 
	göfûe
 >> 
	gx
[
i
][1];

199 
	göfûe
 >> 
	gx
[
i
][2];

200 
	gmesh
.
add_vîãx
();

203 
	gmas£s
.
ªsize
–
nvîts
 );

204  
	gi
 = 0; i < 
	gnvîts
; ++i )

206 
	göfûe
 >> 
	gmas£s
[
i
];

209 
	g¡ris
;

210 
	göfûe
 >> 
	g¡ris
;

212  
	gt
 = 0;Å < 
	g¡ris
; ++t )

214 
Vec3ui
 
	gåi
;

215 
	göfûe
 >> 
	gåi
[0];

216 
	göfûe
 >> 
	gåi
[1];

217 
	göfûe
 >> 
	gåi
[2];

219 
	gmesh
.
add_åüngÀ
–
Vec3°
(
åi
) );

222 
	göfûe
.
˛o£
();

224  
	göfûe
.
good
();

234 
boﬁ
 
ªad_bö¨y_fûe_wôh_vñocôõs
–
N⁄De°ru˘iveTriMesh
 &
mesh
,

235 
°d
::
ve˘‹
<
Vec3d
> &
x
,

236 
°d
::
ve˘‹
<> &
mas£s
,

237 
°d
::
ve˘‹
<
Vec3d
> &
v
,

238 & 
cuº_t
,

239 c⁄° *
fûíame_f‹m©
, ...)

241 
va_li°
 
	g≠
;

242 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

243 
bif°ªam
 
öfûe
–
fûíame_f‹m©
, 
≠
 );

244 
va_íd
(
≠
);

246 
	göfûe
.
ªad_ídünôy
();

248 
	göfûe
 >> 
	gcuº_t
;

250 
	gnvîts
;

251 
	göfûe
 >> 
	gnvîts
;

253 
	gmesh
.
£t_num_vîti˚s
(
nvîts
);

255 
	gx
.
ªsize
–
nvîts
 );

256  
	gi
 = 0; i < 
	gnvîts
; ++i )

258 
	göfûe
 >> 
	gx
[
i
][0];

259 
	göfûe
 >> 
	gx
[
i
][1];

260 
	göfûe
 >> 
	gx
[
i
][2];

263 
	gmas£s
.
ªsize
–
nvîts
 );

264  
	gi
 = 0; i < 
	gmas£s
.
size
(); ++i )

266 
	göfûe
 >> 
	gmas£s
[
i
];

269 
	gv
.
ªsize
–
nvîts
 );

270  
	gi
 = 0; i < 
	gnvîts
; ++i )

272 
	göfûe
 >> 
	gv
[
i
][0];

273 
	göfûe
 >> 
	gv
[
i
][1];

274 
	göfûe
 >> 
	gv
[
i
][2];

278 
	g¡ris
;

279 
	göfûe
 >> 
	g¡ris
;

281  
	gt
 = 0;Å < 
	g¡ris
; ++t )

283 
Vec3°
 
	gåi
;

284 
	göfûe
 >> 
	gåi
[0];

285 
	göfûe
 >> 
	gåi
[1];

286 
	göfûe
 >> 
	gåi
[2];

287 
	gmesh
.
add_åüngÀ
(
åi
);

290 
	göfûe
.
˛o£
();

292  
	göfûe
.
good
();

298 
boﬁ
 
ªad_surÁ˚_ids
–
°d
::
ve˘‹
<>& 
ids
,

299 c⁄° *
fûíame_f‹m©
, ... )

302 
va_li°
 
	g≠
;

303 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

304 
bif°ªam
 
öfûe
–
fûíame_f‹m©
, 
≠
 );

305 
va_íd
(
≠
);

307 
	göfûe
.
ªad_ídünôy
();

309 
	gn
;

310 
	göfûe
 >> 
	gn
;

312 
	gids
.
ªsize
(
n
);

313  
	gi
 = 0; i < 
	gids
.
size
(); ++i )

315 
	göfûe
 >> 
	gids
[
i
];

318 
	göfûe
.
˛o£
();

320  
	göfûe
.
good
();

331 
boﬁ
 
wrôe_objfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° *
fûíame_f‹m©
, ...)

334 #ifde‡
_MSC_VER


335 
va_li°
 
	g≠
;

336 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

337 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

339 *
	gfûíame
=
√w
 [
Àn
];

340 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

341 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

343 
	gdñëe
[] 
	gfûíame
;

344 
va_íd
(
≠
);

346 
va_li°
 
	g≠
;

347 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

348 *
	gfûíame
;

349 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

351 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

352 
	g°d
::
‰ì
(
fûíame
);

353 
va_íd
(
≠
);

355 if(!
	gouçut
.
good
()Ë 
	gÁl£
;

357 
	gouçut
<<"# gíî©ed byÉdômesh"<<
	g°d
::
ídl
;

358 
	gi
=0; i<
	gx
.
size
(); ++i)

359 
	gouçut
<<"v "<<
	gx
[
i
]<<
	g°d
::
ídl
;

360 
	gt
=0;Å<
	gmesh
.
num_åüngÀs
(); ++t)

361 
	gouçut
<<"‡"<<
	gmesh
.
gë_åüngÀ
(
t
)[0]+1<<' '<<mesh.gë_åüngÀ—)[1]+1<<' '<<mesh.gë_åüngÀ—)[2]+1<<
	g°d
::
ídl
;

362  
	gouçut
.
good
();

365 
	g«me•a˚
 {

373 
boﬁ
 
ªad_öt
(c⁄° *
s
, &
vÆue
, boﬁ &
Àadög_¶ash
, &
posôi⁄
)

375 
	gÀadög_¶ash
=
Ál£
;

376 
	gposôi⁄
=0; 
	gs
[
posôi⁄
]!=0; ++position){

377 
	gs
[
posôi⁄
]){

379 
Àadög_¶ash
=
åue
;

382 
found_öt
;

385  
	gÁl£
;

387 
	gfound_öt
:

388 
vÆue
=0;

389 ;; ++
	gposôi⁄
){

390 
	gs
[
posôi⁄
]){

392 
vÆue
=10*vÆue+
s
[
posôi⁄
]-'0';

395  
åue
;

398  
	gåue
;

407 
ªad_Á˚_li°
(c⁄° *
s
, 
°d
::
ve˘‹
<> &
vîãx_li°
)

409 
vîãx_li°
.
˛ór
();

410 
	gv
, 
	gskù
;

411 
boﬁ
 
	gÀadög_¶ash
;

412 
	gi
=0;;){

413 if(
ªad_öt
(
s
+
i
, 
v
, 
Àadög_¶ash
, 
skù
)){

414 if(!
	gÀadög_¶ash
)

415 
	gvîãx_li°
.
push_back
(
v
-1);

416 
	gi
+=
skù
;

430 
boﬁ
 
ªad_objfûe
(
N⁄De°ru˘iveTriMesh
 &
mesh
, 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° *
fûíame_f‹m©
, ...)

433 #ifde‡
_MSC_VER


434 
va_li°
 
	g≠
;

435 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

436 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

438 *
	gfûíame
=
√w
 [
Àn
];

439 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

440 
	g°d
::
if°ªam
 
öput
(
fûíame
, 
°d
::if°ªam::
bö¨y
);

441 
	gdñëe
[] 
	gfûíame
;

442 
va_íd
(
≠
);

444 
va_li°
 
	g≠
;

445 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

446 *
	gfûíame
;

447 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

448 
	g°d
::
if°ªam
 
öput
(
fûíame
, 
°d
::if°ªam::
bö¨y
);

449 
	g°d
::
‰ì
(
fûíame
);

450 
va_íd
(
≠
);

453 if(!
	göput
.
good
()Ë 
	gÁl£
;

455 
	gx
.
˛ór
();

456 
	gmesh
.
˛ór
();

458 
	glöe
[
LINESIZE
];

459 
	g°d
::
ve˘‹
<> 
vîãx_li°
;

460 
	göput
.
good
()){

461 
	göput
.
gëlöe
(
löe
, 
LINESIZE
);

462 
	glöe
[0]){

464 if(
löe
[1]==' '){

465 
Vec3d
 
√w_vîãx
;

466 
	g°d
::
ssˇnf
(
löe
+2, "%l‡%l‡%lf", &
√w_vîãx
[0], &new_vertex[1], &new_vertex[2]);

467 
	gx
.
push_back
(
√w_vîãx
);

471 if(
löe
[1]==' '){

472 
ªad_Á˚_li°
(
löe
+2, 
vîãx_li°
);

473 
	gj
=0; j<()
	gvîãx_li°
.
size
()-2; ++j)

474 
	gmesh
.
add_åüngÀ
–
Vec3°
(
vîãx_li°
[0], vîãx_li°[
j
+1], vertex_list[j+2]) );

479  
	gåue
;

488 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° *
fûíame_f‹m©
, ...)

490 #ifde‡
_MSC_VER


491 
va_li°
 
	g≠
;

492 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

493 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

495 *
	gfûíame
=
√w
 [
Àn
];

496 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

497 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

498 
	gdñëe
[] 
	gfûíame
;

499 
va_íd
(
≠
);

501 
va_li°
 
	g≠
;

502 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

503 *
	gfûíame
;

504 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

505 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

506 
	g°d
::
‰ì
(
fûíame
);

507 
va_íd
(
≠
);

509 if(!
	gouçut
.
good
()Ë 
	gÁl£
;

510  
wrôe_ribfûe
(
mesh
, 
x
, 
ouçut
);

519 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::
o°ªam
 &
ouçut
)

521 
ouçut
<<"# gíî©ed byÉdômesh"<<
°d
::
ídl
;

522 
	gouçut
<<"PoötsPﬁyg⁄s"<<
	g°d
::
ídl
;

523 
	gouçut
<<" [ ";

524 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
mesh
.
gë_åüngÀs
();

525 
	gi
=0; i<
	gåis
.
size
(); ++i){

526 
	gouçut
<<"3 ";

527 if(
	gi
%38==37 && 
i
!=
åis
.
size
()-1Ë
ouçut
<<
°d
::
ídl
;

529 
	gouçut
<<"]"<<
	g°d
::
ídl
;

530 
	gouçut
<<" [ ";

531 
	gi
=0; i<
	gåis
.
size
(); ++i){

532 
	gouçut
<<
	gåis
[
i
]<<" ";

533 if(
	gi
%6==5 && 
i
!=
åis
.
size
()-1Ë
ouçut
<<
°d
::
ídl
;

535 
	gouçut
<<"]"<<
	g°d
::
ídl
;

536 
	gouçut
<<" \"P\" [";

537 
	gi
=0; i<
	gx
.
size
(); ++i){

538 
	gouçut
<<
	gx
[
i
]<<" ";

539 if(
	gi
%4==3 && 
i
!=
x
.
size
()-1Ë
ouçut
<<
°d
::
ídl
;

541 
	gouçut
<<"]"<<
	g°d
::
ídl
;

543  
	gouçut
.
good
();

552 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, 
FILE
 *
ouçut
)

554 
Ârötf
–
ouçut
, "# generated byÉditmesh\n" );

555 
Ârötf
–
ouçut
, "PointsPolygons\n" );

556 
Ârötf
–
ouçut
, " [ " );

557 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
mesh
.
gë_åüngÀs
();

558 
	gi
=0; i<
	gåis
.
size
(); ++i){

559 
Ârötf
–
ouçut
, "3 " );

560 if(
	gi
%38==37 && 
i
!=
åis
.
size
()-1Ë
Ârötf
–
ouçut
, "\n" );

562 
Ârötf
–
ouçut
, "]\n" );

563 
Ârötf
–
ouçut
, " [ " );

564 
	gi
=0; i<
	gåis
.
size
(); ++i){

565 
Vec3ui
 
	g√w_åi
;

566 
Ârötf
–
ouçut
, " %d %d %d ", ()
åis
[
i
][0], ()tris[i][1], ()tris[i][2] );

567 if(
	gi
%6==5 && 
i
!=
åis
.
size
()-1Ë
Ârötf
–
ouçut
, "\n" );

569 
Ârötf
–
ouçut
, "]\n" );

570 
Ârötf
–
ouçut
, " \"P\" [" );

571 
	gi
=0; i<
	gx
.
size
(); ++i){

572 
Ârötf
–
ouçut
, " %‡", 
x
[
i
] );

573 if(
	gi
%4==3 && 
i
!=
x
.
size
()-1Ë
Ârötf
–
ouçut
, "\n" );

575 
Ârötf
–
ouçut
, "]\n" );

577  
	gåue
;

581 #i‚de‡
NO_GUI


589 
boﬁ
 
ouçut_shadow_rib
–
Gluvi
::
T¨gë3D
& 
light
, c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
, c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
, c⁄° *
fûíame_f‹m©
, ...)

591 #ifde‡
_MSC_VER


592 
va_li°
 
	g≠
;

593 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

594 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

596 *
	gfûíame
=
√w
 [
Àn
];

597 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

599 
	g°d
::
of°ªam
 
out
;

600 
	gout
.
›í
–
fûíame
 );

602 
	gdñëe
[] 
	gfûíame
;

604 if–
	gout
 =
NULL
 )

606  
Ál£
;

609 
	gÀn
=
_vs˝rötf
("åack%04d_shadow.tiff", 
≠
)

611 
	gfûíame
=
√w
 [
Àn
];

612 
v•rötf
–
fûíame
, "åack%04d_shadow.tiff", 
≠
 );

614 
va_íd
(
≠
);

616 
va_li°
 
	g≠
;

617 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

618 *
	gfûíame
;

619 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

621 
	g°d
::
of°ªam
 
out
;

622 
	gout
.
›í
–
fûíame
 );

624 
	gdñëe
[] 
	gfûíame
;

626 if–
	gout
 =
NULL
 )

628  
Ál£
;

631 
va•rötf
–&
fûíame
, "åack%04d_shadow.tiff", 
≠
 );

633 
va_íd
(
≠
);

636 
	g°d
::
ve˘‹
<> 
xs
;

637  
	gi
 = 0; i < 
	gposôi⁄s
.
size
(); ++i )

639 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][0] );

640 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][1] );

641 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][2] );

644 
	gout
 << "Di•œy \"" << 
	gfûíame
 << "\" \"fûe\" \"z\"" << 
	g°d
::
ídl
;

645 
	gdñëe
[] 
	gfûíame
;

648 
	gout
 << "F‹m© " << "1024 1024 1" << 
	g°d
::
ídl
;

649 
	gout
 << "PixñFûã∏\"box\" 1 1 " << 
	g°d
::
ídl
;

652 
	glight
.
exp‹t_rib
(
out
);

655 
	gout
 << "WorldBegin\n";

657 
	gout
 << "AttributeBegin\n";

658 
	gout
 << " Color [0.6 0.6 0.2]\n";

659 
	gout
 << " Opacity [1 1 1]\n";

660 
	gout
 << " Surface \"matte\" \"Kd\" 1\n";

662 c⁄° 
	g∂™e_limô
 = 50.0f;

663 
	gbuf
[256];

664 
•rötf
–
buf
, " Polygon \"P\" [-%f -%f -%f %f -%f -%f %f %f -%f -%f %f -%f]\n",

665 
∂™e_limô
,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit,Ölane_limit );

666 
	gout
 << 
	gbuf
;

668 
	gout
 << "AttributeEnd\n";

670 
	gout
 << "Color [0.7 0.7 0.9]\n";

671 
	gout
 << "Surface \"matte\" \n";

673 
wrôe_ribfûe
–
mesh
, 
xs
, 
out
);

676 
	gout
 << "WorldEnd\n";

678 
	gout
.
Êush
();

679 
	gout
.
˛o£
();

681  
	gåue
;

691 
boﬁ
 
ouçut_rib
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
, c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
, c⁄° *
fûíame_f‹m©
, ...)

693 #ifde‡
_MSC_VER


694 
va_li°
 
	g≠
;

695 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

696 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

698 *
	gfûíame
=
√w
 [
Àn
];

699 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

701 
	g°d
::
of°ªam
 
out
;

702 
	gout
.
›í
–
fûíame
 );

704 
	gdñëe
[] 
	gfûíame
;

706 if–
	gout
 =
NULL
 )

708  
Ál£
;

712 
	gÀn
=
_vs˝rötf
("åack%04d.tiff", 
≠
)

714 
	gfûíame
=
√w
 [
Àn
];

715 
v•rötf
–
fûíame
, "åack%04d.tiff", 
≠
 );

717 
	gÀn
=
_vs˝rötf
("åack%04d_shadow.shad", 
≠
)

719 *
	gshadow_fûíame
=
√w
 [
Àn
];

720 
v•rötf
–
shadow_fûíame
, "åack%04d_shadow.shad", 
≠
 );

722 
va_íd
(
≠
);

724 
va_li°
 
	g≠
;

725 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

726 *
	gfûíame
;

727 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

729 
	g°d
::
of°ªam
 
out
;

730 
	gout
.
›í
–
fûíame
 );

732 
	gdñëe
[] 
	gfûíame
;

734 if–
	gout
 =
NULL
 )

736  
Ál£
;

740 
va•rötf
–&
fûíame
, "åack%04d.tiff", 
≠
 );

742 *
	gshadow_fûíame
;

743 
va•rötf
–&
shadow_fûíame
, "åack%04d_shadow.shad", 
≠
 );

745 
va_íd
(
≠
);

748 
	g°d
::
ve˘‹
<> 
xs
;

749  
	gi
 = 0; i < 
	gposôi⁄s
.
size
(); ++i )

751 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][0] );

752 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][1] );

753 
	gxs
.
push_back
–(Ë
posôi⁄s
[
i
][2] );

756 
	g°d
::
ve˘‹
<
Vec3f
> 
n‹mÆs
;

757  
	gi
 = 0; i < 
	gposôi⁄s
.
size
(); ++i )

759 
Vec3f
 
n
(0,0,0);

760  
	gj
 = 0; j < 
	gmesh
.
	gm_vîãx_to_åüngÀ_m≠
[
i
].
size
(); ++j )

762 c⁄° 
	gVec3°
& 
	gåi
 = 
mesh
.
gë_åüngÀ
–mesh.
m_vîãx_to_åüngÀ_m≠
[
i
][
j
] );

763 
Vec3d
 
	gu
 = 
posôi⁄s
[ 
åi
[1] ] -Öositions[Åri[0] ];

764 
Vec3d
 
	gv
 = 
posôi⁄s
[ 
åi
[2] ] -Öositions[Åri[0] ];

765 
Vec3d
 
	gä
 = 
n‹mÆized
(
¸oss
(
u
, 
v
));

766 
	gn
 +
Vec3f
–()
ä
[0], ()tn[1], ()tn[2] );

768 
	gn‹mÆs
.
push_back
–
n
 / (Ë
mesh
.
m_vîãx_to_åüngÀ_m≠
[
i
].
size
() );

772 
	gout
 << "Di•œy \"" << 
	gfûíame
 << "\" \"fûe\" \"rgb\"" << 
	g°d
::
ídl
;

773 
	gdñëe
[] 
	gfûíame
;

776 
	gout
 << "F‹m© " << 
	gGluvi
::
wöwidth
 << " " << 
Gluvi
::
wöheight
 << " 1" << 
°d
::
ídl
;

777 
	gout
 << "PixñSam∂e†2 2" << 
	g°d
::
ídl
;

778 
	gout
 << "Exposuª 1.0 2.2" << 
	g°d
::
ídl
;

781 
	gGluvi
::
ˇmîa
->
exp‹t_rib
(
out
);

784 
	gout
 << "WorldBegin\n";

786 
	gout
 << "LightSource \"ambientlight\" 1 \"intensity\" .3 \"lightcolor\" [1 1 1]\n";

803 
	gout
 << "AttributeBegin\n";

804 
	gout
 << " Color [0.6 0.6 0.2]\n";

805 
	gout
 << " Opacity [1 1 1]\n";

806 
	gout
 << " Surface \"matte\" \"Kd\" 1\n";

808 c⁄° 
	g∂™e_limô
 = 50.0f;

809 c⁄° 
	g∂™e_di°™˚
 = 10.0f;

810 
	gbuf
[256];

811 
•rötf
–
buf
, " Polygon \"P\" [-%f -%f -%f %f -%f -%f %f %f -%f -%f %f -%f]\n",

812 
∂™e_limô
,Öœ√_limô, 
∂™e_di°™˚
,

813 
∂™e_limô
,Öœ√_limô, 
∂™e_di°™˚
,

814 
∂™e_limô
,Öœ√_limô, 
∂™e_di°™˚
,

815 
∂™e_limô
,Öœ√_limô, 
∂™e_di°™˚
 );

816 
	gout
 << 
	gbuf
;

818 
	gout
 << "AttributeEnd\n";

820 
	gout
 << "Color [0.3 0.3 0.9]\n";

821 
	gout
 << "Surface \"matte\" \n";

823 
wrôe_ribfûe
–
mesh
, 
xs
, 
out
);

825 
	gout
 << " \"N\" [";

826 
	gi
=0; i<
	gn‹mÆs
.
size
(); ++i)

828 
	gout
 << 
	gn‹mÆs
[
i
] << " ";

830 
	gout
 << "]" << 
	g°d
::
ídl
;

833 
	gout
 << "WorldEnd\n";

835 
	gout
.
Êush
();

836 
	gout
.
˛o£
();

838  
	gåue
;

849 
boﬁ
 
wrôe_pbπfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° *
fûíame_f‹m©
, ...)

852 #ifde‡
_MSC_VER


853 
va_li°
 
	g≠
;

854 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

855 
	gÀn
=
_vs˝rötf
(
fûíame_f‹m©
, 
≠
)

857 *
	gfûíame
=
√w
 [
Àn
];

858 
v•rötf
(
fûíame
, 
fûíame_f‹m©
, 
≠
);

859 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

860 
	gdñëe
[] 
	gfûíame
;

861 
va_íd
(
≠
);

863 
va_li°
 
	g≠
;

864 
va_°¨t
(
≠
, 
fûíame_f‹m©
);

865 *
	gfûíame
;

866 
va•rötf
(&
fûíame
, 
fûíame_f‹m©
, 
≠
);

867 
	g°d
::
of°ªam
 
ouçut
(
fûíame
, 
°d
::of°ªam::
bö¨y
);

868 
	g°d
::
‰ì
(
fûíame
);

869 
va_íd
(
≠
);

871 if(!
	gouçut
.
good
()Ë 
	gÁl£
;

872  
wrôe_ribfûe
(
mesh
, 
x
, 
ouçut
);

881 
boﬁ
 
wrôe_pbπfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::
o°ªam
 &
ouçut
)

883 
ouçut
<<"# gíî©ed byÉdômesh"<<
°d
::
ídl
;

886 
	gouçut
<<"\"poöàP\" ["<<
	g°d
::
ídl
;

887 
	gi
=0; i<
	gx
.
size
(); ++i){

888 
	gouçut
<<
	gx
[
i
]<<" ";

889 if(
	gi
%4==3 && 
i
!=
x
.
size
()-1Ë
ouçut
<<
°d
::
ídl
;

891 
	gouçut
<<"]"<<
	g°d
::
ídl
;

892 
	gouçut
<<" \"öãgî indi˚s\" ["<<
	g°d
::
ídl
;

893 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
åis
 = 
mesh
.
gë_åüngÀs
();

894 
	gi
=0; i<
	gåis
.
size
(); ++i){

895 
	gouçut
<<
	gåis
[
i
]<<" ";

896 if(
	gi
%6==5 && 
i
!=
åis
.
size
()-1Ë
ouçut
<<
°d
::
ídl
;

898 
	gouçut
<<"]"<<
	g°d
::
ídl
;

900  
	gouçut
.
good
();

	@talpa/iomesh.h

9 #i‚de‡
EL_TOPO_IOMESH_H


10 
	#EL_TOPO_IOMESH_H


	)

16 
	~<f°ªam
>

17 
	~<vec.h
>

18 
	~<ve˘‹
>

25 
˛ass
 
	gN⁄De°ru˘iveTriMesh
;

27 
«me•a˚
 
	gGluvi


29 
	gT¨gë3D
;

42 
boﬁ
 
wrôe_bö¨y_fûe
–c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° std::ve˘‹<> &
mas£s
, 
cuº_t
, c⁄° *
fûíame_f‹m©
, ...);

43 
boﬁ
 
wrôe_bö¨y_fûe_wôh_vñocôõs
–c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° std::ve˘‹<> &
mas£s
, c⁄° std::ve˘‹<Vec3d> &
v
, 
cuº_t
, c⁄° *
fûíame_f‹m©
, ...);

45 
boﬁ
 
wrôe_surÁ˚_ids
–c⁄° 
°d
::
ve˘‹
<
size_t
> &
ids
,

46 c⁄° *
fûíame_f‹m©
, ... );

48 
boﬁ
 
ªad_bö¨y_fûe
–
N⁄De°ru˘iveTriMesh
 &
mesh
, 
°d
::
ve˘‹
<
Vec3d
> &
x
, std::ve˘‹<> &
mas£s
, & 
cuº_t
, c⁄° *
fûíame_f‹m©
, ...);

49 
boﬁ
 
ªad_bö¨y_fûe_wôh_vñocôõs
–
N⁄De°ru˘iveTriMesh
 &
mesh
, 
°d
::
ve˘‹
<
Vec3d
> &
x
, std::ve˘‹<> &
mas£s
, std::ve˘‹<Vec3d> &
v
, & 
cuº_t
, c⁄° *
fûíame_f‹m©
, ...);

51 
boﬁ
 
ªad_surÁ˚_ids
–
°d
::
ve˘‹
<> &
ids
,

52 c⁄° *
fûíame_f‹m©
, ... );

61 
boﬁ
 
wrôe_objfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° *
fûíame_f‹m©
, ...);

62 
boﬁ
 
ªad_objfûe
(
N⁄De°ru˘iveTriMesh
 &
mesh
, 
°d
::
ve˘‹
<
Vec3d
> &
x
, c⁄° *
fûíame_f‹m©
, ...);

70 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° *
fûíame_f‹m©
, ...);

71 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::
o°ªam
 &
ouçut
);

72 
boﬁ
 
wrôe_ribfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, 
FILE
 *
ouçut
);

80 
boﬁ
 
ouçut_shadow_rib
–
Gluvi
::
T¨gë3D
& 
light
, c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
, c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
, c⁄° *
fûíame_f‹m©
, ...);

88 
boﬁ
 
ouçut_rib
–c⁄° 
°d
::
ve˘‹
<
Vec3d
>& 
posôi⁄s
, c⁄° 
N⁄De°ru˘iveTriMesh
& 
mesh
, c⁄° *
fûíame_f‹m©
, ...);

96 
boﬁ
 
wrôe_pbπfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, c⁄° *
fûíame_f‹m©
, ...);

97 
boﬁ
 
wrôe_pbπfûe
(c⁄° 
N⁄De°ru˘iveTriMesh
 &
mesh
, c⁄° 
°d
::
ve˘‹
<> &
x
, std::
o°ªam
 &
ouçut
);

106 
	gãm∂©e
<
˛ass
 
	gT
> 
dump_ve˘‹_to_fûe
–c⁄° * 
fûíame
, c⁄° 
°d
::
ve˘‹
<
T
, std::
Æloˇt‹
<T> >& 
vec
 )

108 
°d
::
of°ªam
 
outfûe
–
fûíame
, std::
ios
::
out
|°d::ios::
åunc
 );

109  
	gi
 = 0; i < 
	gvec
.
size
(); ++i )

111 
	goutfûe
 << 
	gvec
[
i
] << 
	g°d
::
ídl
;

113 
	goutfûe
.
˛o£
();

	@talpa/lexer.cpp

1 
	~<Àxî.h
>

2 
	~<c°dio
>

4 
	gTokí
::

5 
	$Tokí
(c⁄° 
Tokí
 &
sour˚
) :

6 
	`ty≥
(
sour˚
.
ty≥
),

7 
	`numbî_vÆue
–
sour˚
.
numbî_vÆue
 ),

8 
	$°rög_vÆue
–
sour˚
.
°rög_vÆue
 )

10 
	}
}

12 
	gTokí
 &Token::

13 
›î©‹
=(c⁄° 
Tokí
 &
sour˚
)

15 
numbî_vÆue
=
sour˚
.number_value;

16 
	g°rög_vÆue
=
sour˚
.
°rög_vÆue
;

17  *
	gthis
;

20 
	gTokí
::

21 
	$£t
(
TokíTy≥
 
ty≥_
)

23 
ty≥
=
ty≥_
;

24 
numbî_vÆue
=0;

25 
°rög_vÆue
.
	`˛ór
();

26 
	}
}

28 
	gTokí
::

29 
	$£t
(
TokíTy≥
 
ty≥_
, c⁄° 
°d
::
°rög
 &
vÆue
)

31 
	`˛ór
();

32 
ty≥
=
ty≥_
;

33 
°rög_vÆue
=
vÆue
;

34 
	}
}

36 
	gTokí
::

37 
	$£t
(
TokíTy≥
 
ty≥_
, 
vÆue
)

39 
	`˛ór
();

40 
ty≥
=
ty≥_
;

41 
numbî_vÆue
=
vÆue
;

42 
	}
}

44 
	gTokí
::

45 
	$˛ór
()

47 
°rög_vÆue
.
	`˛ór
();

48 
	}
}

50 
	g°d
::
o°ªam
& 
›î©‹
<<(
°d
::o°ªam& 
out
, c⁄° 
	gTokí
& 
	gt
)

52 
	gt
.
	gty≥
){

53 
	gTOKEN_EOF
: 
out
<<"EOF"; ;

54 
	gTOKEN_ERROR
: 
out
<<"ERROR("<<
t
.
°rög_vÆue
<<")"; ;

55 
	gTOKEN_IDENTIFIER
: 
out
<<"ID("<<
t
.
°rög_vÆue
<<")"; ;

56 
	gTOKEN_NUMBER
: 
out
<<"NUMBER("<<
t
.
numbî_vÆue
<<")"; ;

57 
	gTOKEN_STRING
: 
out
<<"STRING("<<
t
.
°rög_vÆue
<<")"; ;

58 
	gTOKEN_LEFT_PAREN
: 
out
<<"LEFT_PAREN"; ;

59 
	gTOKEN_RIGHT_PAREN
: 
out
<<"RIGHT_PAREN"; ;

60 
	gTOKEN_LEFT_BRACKET
: 
out
<<"LEFT_BRACKET"; ;

61 
	gTOKEN_RIGHT_BRACKET
: 
out
<<"RIGHT_BRACKET"; ;

63  
	gout
;

66 
	g«me•a˚
 {

68 
doubÀ_of_°rög
(c⁄° 
°d
::
°rög
 &
s
)

70 
v
;

71 
	g°d
::
ssˇnf
(
s
.
c_°r
(), "%lf", &
v
);

72  
	gv
;

77 
	gLexî
::

78 
	$ªad
(
Tokí
 &
tok
)

80 
c
;

81 íum {
MODE_UNKNOWN
, 
MODE_ERROR
, 
MODE_MINUS
, 
MODE_NUMBER
, 
MODE_MANTISSA
, 
MODE_E
,

82 
MODE_EMINUS
, 
MODE_EXPONENT
, 
MODE_IDENTIFIER
, 
MODE_STRING
, 
MODE_STRINGESCAPE
} 
mode
=
MODE_UNKNOWN
;

83 
°d
::
°rög
 
tokí_°rög
;

86 
öput
.
	`gë
(
c
);

87 if(
öput
.
	`eof
(Ë|| !öput.
	`good
()){

88 
mode
){

89 
MODE_UNKNOWN
:

90 
tok
.
	`£t
(
TOKEN_EOF
); ;

91 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
: 
MODE_STRING
: 
MODE_STRINGESCAPE
:

92 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

93 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

94 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

95 
MODE_IDENTIFIER
:

96 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

99 
c
){

101 
tokí_°rög
.
	`push_back
(
c
);

102 
mode
){

103 
MODE_UNKNOWN
:

104 
mode
=
MODE_MINUS
;

106 
MODE_IDENTIFIER
: 
MODE_STRING
:

108 
MODE_STRINGESCAPE
:

109 
mode
=
MODE_STRING
;

111 
MODE_E
:

112 
mode
=
MODE_EMINUS
;

115 
mode
=
MODE_ERROR
;

121 
tokí_°rög
.
	`push_back
(
c
);

122 
mode
){

123 
MODE_UNKNOWN
: 
MODE_MINUS
:

124 
mode
=
MODE_NUMBER
;

126 
MODE_E
: 
MODE_EMINUS
:

127 
mode
=
MODE_EXPONENT
;

129 
MODE_STRINGESCAPE
:

130 
mode
=
MODE_STRING
;

138 
tokí_°rög
.
	`push_back
(
c
);

139 
mode
){

140 
MODE_UNKNOWN
: 
MODE_NUMBER
: 
MODE_MINUS
:

141 
mode
=
MODE_MANTISSA
;

143 
MODE_IDENTIFIER
: 
MODE_STRING
:

145 
MODE_STRINGESCAPE
:

146 
mode
=
MODE_STRING
;

149 
mode
=
MODE_ERROR
;

154 
tokí_°rög
.
	`push_back
(
c
);

155 
mode
){

156 
MODE_NUMBER
: 
MODE_MANTISSA
:

157 
mode
=
MODE_E
;

159 
MODE_IDENTIFIER
: 
MODE_STRING
:

161 
MODE_STRINGESCAPE
:

162 
mode
=
MODE_STRING
;

164 
MODE_UNKNOWN
:

165 
mode
=
MODE_IDENTIFIER
;

168 
mode
=
MODE_ERROR
;

173 
mode
){

174 
MODE_UNKNOWN
:

175 
mode
=
MODE_STRING
;

177 
MODE_STRING
:

178 
tok
.
	`£t
(
TOKEN_STRING
, 
tokí_°rög
); ;

179 
MODE_STRINGESCAPE
:

180 
tokí_°rög
.
	`push_back
(
c
);

181 
mode
=
MODE_STRING
;

183 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

184 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

185 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

186 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

187 
MODE_IDENTIFIER
:

188 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

193 
mode
){

194 
MODE_UNKNOWN
: 
MODE_IDENTIFIER
:

195 
tokí_°rög
.
	`push_back
(
c
);

196 
mode
=
MODE_IDENTIFIER
;

198 
MODE_STRING
:

199 
mode
=
MODE_STRINGESCAPE
;

201 
MODE_STRINGESCAPE
:

202 
tokí_°rög
.
	`push_back
(
c
);

203 
mode
=
MODE_STRING
;

205 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

206 
tokí_°rög
.
	`push_back
(
c
);

207 
mode
=
MODE_ERROR
;

209 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

210 
öput
.
	`putback
('(');

211 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

216 
mode
){

217 
MODE_UNKNOWN
:

219 
MODE_STRING
:

220 
tokí_°rög
.
	`push_back
(
c
);

222 
MODE_STRINGESCAPE
:

223 
tokí_°rög
.
	`push_back
(
c
);

224 
mode
=
MODE_STRING
;

226 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

227 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

228 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

229 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

230 
MODE_IDENTIFIER
:

231 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

236 
mode
){

237 
MODE_STRING
:

238 
tokí_°rög
.
	`push_back
(
c
);

240 
MODE_STRINGESCAPE
:

241 
tokí_°rög
.
	`push_back
(
c
);

242 
mode
=
MODE_STRING
;

245 dÿ
öput
.
	`gë
(
c
);

246 !
öput
.
	`eof
(Ë&& i≈ut.
	`good
(Ë&& 
c
!='\n' && c!='\r');

251 
mode
){

252 
MODE_UNKNOWN
:

253 
tok
.
	`£t
(
TOKEN_LEFT_PAREN
); ;

254 
MODE_STRING
:

255 
tokí_°rög
.
	`push_back
(
c
);

257 
MODE_STRINGESCAPE
:

258 
tokí_°rög
.
	`push_back
(
c
);

259 
mode
=
MODE_STRING
;

261 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

262 
öput
.
	`putback
('(');

263 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

264 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

265 
öput
.
	`putback
('(');

266 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

267 
MODE_IDENTIFIER
:

268 
öput
.
	`putback
('(');

269 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

274 
mode
){

275 
MODE_UNKNOWN
:

276 
tok
.
	`£t
(
TOKEN_RIGHT_PAREN
); ;

277 
MODE_STRING
:

278 
tokí_°rög
.
	`push_back
(
c
);

280 
MODE_STRINGESCAPE
:

281 
tokí_°rög
.
	`push_back
(
c
);

282 
mode
=
MODE_STRING
;

284 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

285 
öput
.
	`putback
(')');

286 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

287 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

288 
öput
.
	`putback
(')');

289 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

290 
MODE_IDENTIFIER
:

291 
öput
.
	`putback
(')');

292 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

297 
mode
){

298 
MODE_UNKNOWN
:

299 
tok
.
	`£t
(
TOKEN_LEFT_BRACKET
); ;

300 
MODE_STRING
:

301 
tokí_°rög
.
	`push_back
(
c
);

303 
MODE_STRINGESCAPE
:

304 
tokí_°rög
.
	`push_back
(
c
);

305 
mode
=
MODE_STRING
;

307 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

308 
öput
.
	`putback
('[');

309 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

310 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

311 
öput
.
	`putback
('[');

312 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

313 
MODE_IDENTIFIER
:

314 
öput
.
	`putback
('[');

315 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

320 
mode
){

321 
MODE_UNKNOWN
:

322 
tok
.
	`£t
(
TOKEN_RIGHT_BRACKET
); ;

323 
MODE_STRING
:

324 
tokí_°rög
.
	`push_back
(
c
);

326 
MODE_STRINGESCAPE
:

327 
tokí_°rög
.
	`push_back
(
c
);

328 
mode
=
MODE_STRING
;

330 
MODE_ERROR
: 
MODE_MINUS
: 
MODE_E
: 
MODE_EMINUS
:

331 
öput
.
	`putback
(']');

332 
tok
.
	`£t
(
TOKEN_ERROR
, 
tokí_°rög
); ;

333 
MODE_NUMBER
: 
MODE_MANTISSA
: 
MODE_EXPONENT
:

334 
öput
.
	`putback
(']');

335 
tok
.
	`£t
(
TOKEN_NUMBER
, 
	`doubÀ_of_°rög
(
tokí_°rög
)); ;

336 
MODE_IDENTIFIER
:

337 
öput
.
	`putback
(']');

338 
tok
.
	`£t
(
TOKEN_IDENTIFIER
, 
tokí_°rög
); ;

343 
tokí_°rög
.
	`push_back
(
c
);

344 
mode
){

345 
MODE_UNKNOWN
:

346 
mode
=
MODE_IDENTIFIER
;

348 
MODE_IDENTIFIER
: 
MODE_STRING
:

350 
MODE_STRINGESCAPE
:

351 
mode
=
MODE_STRING
;

354 
mode
=
MODE_ERROR
;

360 
	}
}

	@talpa/lexer.h

1 #i‚de‡
LEXER_H


2 
	#LEXER_H


	)

4 
	~<io°ªam
>

5 
	~<°rög
>

7 
	eTokíTy≥
 {
	mTOKEN_EOF
, 
	mTOKEN_ERROR
, 
	mTOKEN_IDENTIFIER
, 
	mTOKEN_NUMBER
, 
	mTOKEN_STRING
,

8 
	mTOKEN_LEFT_PAREN
, 
	mTOKEN_RIGHT_PAREN
,

9 
	mTOKEN_LEFT_BRACKET
, 
	mTOKEN_RIGHT_BRACKET
};

11 
	sTokí


13 
TokíTy≥
 
	mty≥
;

15 
	mnumbî_vÆue
;

16 
	m°d
::
°rög
 
°rög_vÆue
;

18 
Tokí
(Ë: 
ty≥
(
TOKEN_ERROR
), 
numbî_vÆue
(1e+30), 
°rög_vÆue
("ERROR") {}

19 ~
Tokí
(Ë{ 
˛ór
(); }

21 
Tokí
(c⁄° Tokí &
sour˚
);

22 
	mTokí
 &
	m›î©‹
=(c⁄° 
Tokí
 &
sour˚
);

24 
£t
(
TokíTy≥
 
ty≥_
);

25 
£t
(
TokíTy≥
 
ty≥_
, c⁄° 
°d
::
°rög
 &
vÆue
);

26 
£t
(
TokíTy≥
 
ty≥_
, 
vÆue
);

27 
˛ór
();

30 
	g°d
::
o°ªam
& 
›î©‹
<<(
°d
::o°ªam& 
out
, c⁄° 
	gTokí
& 
	gt
);

32 
	sLexî


34 
	m°d
::
i°ªam
& 
öput
;

36 
Lexî
(
°d
::
i°ªam
& 
öput_
Ë: 
öput
(input_) {}

38 
ªad
(
Tokí
 &
tok
);

	@talpa/main.cpp

21 #i‚de‡
NO_GUI


22 
	#USE_GUI


	)

26 
	#RUN_ASYNC


	)

37 
	~<c°dio
>

38 
	~<„nv_ö˛ude.h
>

39 
	~<f°ªam
>

40 
	~<ve˘‹
>

41 
	~<queue
>

44 
	~<¨øy2.h
>

45 
	~<ccd_wøµî.h
>

46 
	~<cﬁlisi⁄quîõs.h
>

47 
	~<ex∑nsi⁄.h
>

48 
	~<m¨chög_tûes_húes.h
>

49 
	~<utû.h
>

50 
	~<vec.h
>

51 
	~<wÆl˛ocktime.h
>

54 
	~<cﬁlisi⁄pùñöe.h
>

55 
	~<ñt›o.h
>

56 
	~<iomesh.h
>

57 
	~<meshªndîî.h
>

58 
	~<run°©s.h
>

59 
	~<sur·øck.h
>

60 
	~<åüngÀquÆôy.h
>

63 
	~<‰ame°ï≥r.h
>

64 
	~<móncurv©uª.h
>

65 
	~<meshdrivî.h
>

66 
	~<s¸ùtöô.h
>

67 
	~<simuœti⁄.h
>

69 
	~<°dio.h
>

70 
	~<sys/ty≥s.h
>

71 
	~<dúít.h
>

72 
	~<sys/°©.h
>

74 #ifde‡
_MSC_VER


76 
	~<±hªad.h
>

80 
	#¢¥ötf
 
_¢¥ötf


	)

85 #ifde‡
USE_GUI


86 
	~<gluvi.h
>

95 
exa˘öô
();

98 
maö
(
¨gc
, **
¨gv
);

104 
RunSèts
 
	gg_°©s
;

106 
	gg_ouçut_∑th
[256];

107 
	gg_ba£_ouçut_∑th
[256];

108 
boﬁ
 
	gg_ªndî_to_ãxtuª
;

110 #ifde‡
USE_GUI


112 
	gˇmîa_èrgë
[] = {0.0f, 0.0f, 0.0f};

113 
	gGluvi
::
T¨gë3D
 
gluvi_ˇm
–
ˇmîa_èrgë
, 10.0f, 0.0f, 0.0f, 45.0f, 0.1f, 20.0f );

114 
boﬁ
 
	gg_èke_s¸ìnshŸs
 = 
Ál£
;

117 
	shack_ˇmîa


119 
	mèrgë
[3];

120 
	mdi°
;

121 
	mpôch
;

122 
	mhódög
;

123 } 
	ggluvi_ˇm
;

129 
SurfTøck
* 
	gg_surf
 = 
NULL
;

131 
	g°d
::
ve˘‹
<
Vec3d
> 
ªndîabÀ_vîti˚s
;

132 
	g°d
::
ve˘‹
<
Vec3d
> 
ªndîabÀ_vîãx_n‹mÆs
;

133 
	g°d
::
ve˘‹
<
Vec3°
> 
ªndîabÀ_sﬁid_åüngÀs
;

134 
	g°d
::
ve˘‹
<
Vec3°
> 
ªndîabÀ_n⁄_sﬁid_åüngÀs
;

135 
	g°d
::
ve˘‹
<
Vec2°
> 
ªndîabÀ_edges
;

139 
	g«me•a˚
 {

141 
MeshDrivî
* 
	gdrivî
 = 
NULL
;

147 
adv™˚_sim
–
dt
 );

148 
adv™˚_‰ame
();

149 
run_simuœti⁄
( );

150 
£t_up_ouçut_∑th
( );

152 #ifde‡
USE_GUI


153 íum { 
	gRAY_HIT_VERTEX
, 
	gRAY_HIT_EDGE
, 
	gRAY_HIT_TRIANGLE
, 
	gRAY_HIT_NOTHING
 };

155 
upd©e_ªndîabÀ_obje˘s
();

156 * 
adv™˚_‰ame_async
–* 
nŸhög
 );

157 
°¨t_adv™˚_‰ame
();

158 
adv™˚_‰ame_d⁄e
();

159 
timî_adv™˚_‰ame
–
junk
 );

160 
øy_ˇ°
–c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
, c⁄° 
Vec3f
& 
øy_‹igö
, c⁄° Vec3f& 
øy_dúe˘i⁄
, 
¥imôive_ty≥
, 
size_t
& 
hô_ödex
 );

161 
keybﬂrd
(
key
, 
x
, 
y
);

162 
mou£
(
buâ⁄
, 
°©e
, 
x
, 
y
);

163 
mou£MŸi⁄
(
x
, 
y
);

164 
di•œy
();

165 
öô_gui
–c⁄° 
S¸ùtInô
& 
s¸ùt_öô
 );

168 
öô_simuœti⁄
–*
s¸ùt_fûíame
 );

175 
Simuœti⁄
* 
	gsim
 = 
NULL
;

176 
FømeSãµî
* 
	g‰ame_°ï≥r
 = 
NULL
;

179 #ifde‡
USE_GUI


181 
boﬁ
 
	gdi•œy_drivî
 = 
Ál£
;

182 
MeshRídîî
 
	gmesh_ªndîî
;

183 c⁄° 
	gMeshDrivî
::
MeshDrivîRídîî
* 
drivî_ªndîî
;

184 
	gGluvi
::
Dy«micText
* 
°©us_ãxt_widgë
;

187 
±rdiff_t
 
	g£À˘ed_vîãx
 = -1;

188 
±rdiff_t
 
	g£À˘ed_edge
 = -1;

189 
±rdiff_t
 
	g£À˘ed_åüngÀ
 = -1;

195 
boﬁ
 
	gadv™˚_sögÀ_‰ame
 = 
Ál£
;

196 
boﬁ
 
	gdi•œy_°©us_ãxt
 = 
åue
;

198 
±hªad_muãx_t
 
	gthªad_is_ru¬ög_muãx
 = 
PTHREAD_MUTEX_INITIALIZER
;

199 
boﬁ
 
	gthªad_is_ru¬ög
 = 
Ál£
;

200 
±hªad_t
 
	gadv™˚_‰ame_thªad
;

201 
boﬁ
 
	gwaôög_f‹_thªad_to_föish
 = 
Ál£
;

202 
±hªad_muãx_t
 
	gsurf_muãx
 = 
PTHREAD_MUTEX_INITIALIZER
;

213 #ifde‡
USE_C_API


224 
ñ_t›o_wøµî_°©ic_›î©i⁄s
()

229 
ElT›oMesh
 
	göputs
;

230 
	göputs
.
	gnum_vîti˚s
 = 
g_surf
->
gë_num_vîti˚s
();

231 
	göputs
.
	gvîãx_loˇti⁄s
 = 
√w
 [ 3*
öputs
.
num_vîti˚s
 ];

232 
mem˝y
–
öputs
.
vîãx_loˇti⁄s
, &(
g_surf
->
gë_posôi⁄
(0)), 3*öputs.
num_vîti˚s
*() );

234 
	göputs
.
	gnum_åüngÀs
 = 
g_surf
->
m_mesh
.
num_åüngÀs
();

235 
	göputs
.
	gåüngÀs
 = 
√w
 [ 3*
öputs
.
num_åüngÀs
 ];

236  
	gi
 = 0; i < 
	göputs
.
	gnum_åüngÀs
; ++i )

238 
	göputs
.
	gåüngÀs
[3*
i
+0] = 
g_surf
->
m_mesh
.
gë_åüngÀ
(i)[0];

239 
	göputs
.
	gåüngÀs
[3*
i
+1] = 
g_surf
->
m_mesh
.
gë_åüngÀ
(i)[1];

240 
	göputs
.
	gåüngÀs
[3*
i
+2] = 
g_surf
->
m_mesh
.
gë_åüngÀ
(i)[2];

243 
	göputs
.
	gvîãx_mas£s
 = 
√w
 [ 
öputs
.
num_vîti˚s
 ];

244 
mem˝y
–
öputs
.
vîãx_mas£s
, &(
g_surf
->
m_mas£s
[0]), i≈uts.
num_vîti˚s
*() );

246 
ElT›oGíîÆO±i⁄s
 
	ggíîÆ_›ti⁄s
;

247 
	ggíîÆ_›ti⁄s
.
	gm_vîbo£
 = 
g_surf
->
m_vîbo£
;

248 
	ggíîÆ_›ti⁄s
.
	gm_cﬁlisi⁄_ß„ty
 = 
g_surf
->
m_cﬁlisi⁄_ß„ty
;

249 
	ggíîÆ_›ti⁄s
.
	gm_¥oximôy_ïsû⁄
 = 
g_surf
->
m_¥oximôy_ïsû⁄
;

251 
ElT›oSèticO≥øti⁄sO±i⁄s
 
	g›ti⁄s
;

252 
	g›ti⁄s
.
	gm_≥rf‹m_im¥ovemít
 = 
g_surf
->
m_≥rf‹m_im¥ovemít
;

253 
	g›ti⁄s
.
	gm_Ælow_t›ﬁogy_ch™ges
 = 
g_surf
->
m_Ælow_t›ﬁogy_ch™ges
;

254 
	g›ti⁄s
.
	gm_max_vﬁume_ch™ge
 = 
g_surf
->
m_max_vﬁume_ch™ge
;

255 
	g›ti⁄s
.
	gm_mö_edge_Àngth
 = 
g_surf
->
m_mö_edge_Àngth
;

256 
	g›ti⁄s
.
	gm_max_edge_Àngth
 = 
g_surf
->
m_max_edge_Àngth
;

257 
	g›ti⁄s
.
	gm_mö_åüngÀ_¨ó
 = 
g_surf
->
m_mö_åüngÀ_¨ó
;

258 
	g›ti⁄s
.
	gm_mö_åüngÀ_™gÀ
 = 
g_surf
->
m_mö_åüngÀ_™gÀ
;

259 
	g›ti⁄s
.
	gm_max_åüngÀ_™gÀ
 = 
g_surf
->
m_max_åüngÀ_™gÀ
;

260 
	g›ti⁄s
.
	gm_u£_curv©uª_whí_•lôtög
 = 
g_surf
->
m_•lôãr
.
m_u£_curv©uª
;

261 
	g›ti⁄s
.
	gm_u£_curv©uª_whí_cﬁœpsög
 = 
g_surf
->
m_cﬁœp£r
.
m_u£_curv©uª
;

262 
	g›ti⁄s
.
	gm_mö_curv©uª_mu…ùlõr
 = 
g_surf
->
m_cﬁœp£r
.
m_mö_curv©uª_mu…ùlõr
;

263 
	g›ti⁄s
.
	gm_max_curv©uª_mu…ùlõr
 = 
g_surf
->
m_•lôãr
.
m_max_curv©uª_mu…ùlõr
;

264 
	g›ti⁄s
.
	gm_Ælow_vîãx_movemít
 = 
g_surf
->
m_Ælow_vîãx_movemít
;

265 
	g›ti⁄s
.
	gm_edge_Êù_mö_Àngth_ch™ge
 = 
g_surf
->
m_edge_Êù_mö_Àngth_ch™ge
;

266 
	g›ti⁄s
.
	gm_mîge_¥oximôy_ïsû⁄
 = 
g_surf
->
m_mîge_¥oximôy_ïsû⁄
;

267 
	g›ti⁄s
.
	gm_subdivisi⁄_scheme
 = 
g_surf
->
m_subdivisi⁄_scheme
;

269 
ElT›oMesh
 
	gouçuts
;

270 
ElT›oDe‰agInf‹m©i⁄
 
	gde‰ag_öfo
;

272 
ñ_t›o_°©ic_›î©i⁄s
–&
öputs
, &
gíîÆ_›ti⁄s
, &
›ti⁄s
, &
de‰ag_öfo
, &
ouçuts
 );

275 
	gg_surf
->
im¥ove_mesh
();

276 
	gg_surf
->
t›ﬁogy_ch™ges
();

277 
	gg_surf
->
de‰ag_mesh
();

279 
as£π
–
g_surf
->
m_mesh
.
num_åüngÀs
(Ë=
ouçuts
.num_triangles );

280 
as£π
–
g_surf
->
gë_num_vîti˚s
(Ë=
ouçuts
.
num_vîti˚s
 );

288 
	gg_surf
->
£t_Æl_posôi⁄s
–
ouçuts
.
num_vîti˚s
, ouçuts.
vîãx_loˇti⁄s
 );

290 
	gg_surf
->
	gm_mas£s
.
ªsize
–
ouçuts
.
num_vîti˚s
 );

291  
	gi
 = 0; i < 
	gouçuts
.
	gnum_vîti˚s
; ++i )

293 
	gg_surf
->
	gm_mas£s
[
i
] = 
ouçuts
.
vîãx_mas£s
[i];

296 
	g°d
::
ve˘‹
<
Vec3ui
> 
√w_åüngÀs
–
ouçuts
.
num_åüngÀs
 );

297  
size_t
 
	gi
 = 0; i < 
	g√w_åüngÀs
.
size
(); ++i )

299 
	g√w_åüngÀs
[
i
][0] = 
ouçuts
.
åüngÀs
[3*i+0];

300 
	g√w_åüngÀs
[
i
][1] = 
ouçuts
.
åüngÀs
[3*i+1];

301 
	g√w_åüngÀs
[
i
][2] = 
ouçuts
.
åüngÀs
[3*i+2];

304 
	gg_surf
->
	gm_mesh
.
ª∂a˚_Æl_åüngÀs
–
√w_åüngÀs
 );

310 
	gg_surf
->
	gm_vîãx_ch™ge_hi°‹y
.
ªsize
–
de‰ag_öfo
.
num_vîãx_ch™ges
 );

312  
	gi
 = 0; i < 
	gde‰ag_öfo
.
	gnum_vîãx_ch™ges
; ++i )

314 
	gg_surf
->
	gm_vîãx_ch™ge_hi°‹y
[
i
].
	gis_ªmove
 = 
de‰ag_öfo
.
vîãx_is_ªmove
[i];

315 
	gg_surf
->
	gm_vîãx_ch™ge_hi°‹y
[
i
].
	gvîãx_ödex
 = 
de‰ag_öfo
.
vîãx_ödex
[i];

316 
	gg_surf
->
	gm_vîãx_ch™ge_hi°‹y
[
i
].
	g•lô_edge
[0] = 
de‰ag_öfo
.
•lô_edge
[2*i+0];

317 
	gg_surf
->
	gm_vîãx_ch™ge_hi°‹y
[
i
].
	g•lô_edge
[1] = 
de‰ag_öfo
.
•lô_edge
[2*i+1];

320 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
.
ªsize
–
de‰ag_öfo
.
num_åüngÀ_ch™ges
 );

322  
	gi
 = 0; i < 
	gde‰ag_öfo
.
	gnum_åüngÀ_ch™ges
; ++i )

324 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
[
i
].
	gis_ªmove
 = 
de‰ag_öfo
.
åüngÀ_is_ªmove
[i];

325 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
[
i
].
	gåüngÀ_ödex
 = 
de‰ag_öfo
.
åüngÀ_ödex
[i];

326 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
[
i
].
	gåi
[0] = 
de‰ag_öfo
.
√w_åi
[3*i+0];

327 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
[
i
].
	gåi
[1] = 
de‰ag_öfo
.
√w_åi
[3*i+1];

328 
	gg_surf
->
	gm_åüngÀ_ch™ge_hi°‹y
[
i
].
	gåi
[2] = 
de‰ag_öfo
.
√w_åi
[3*i+2];

331 
	gg_surf
->
	gm_de‰agged_åüngÀ_m≠
.
ªsize
–
de‰ag_öfo
.
de‰agged_åüngÀ_m≠_size
 );

333  
	gi
 = 0; i < 
	gde‰ag_öfo
.
	gde‰agged_åüngÀ_m≠_size
; ++i )

335 
	gg_surf
->
	gm_de‰agged_åüngÀ_m≠
[
i
][0] = 
de‰ag_öfo
.
de‰agged_åüngÀ_m≠
[2*i+0];

336 
	gg_surf
->
	gm_de‰agged_åüngÀ_m≠
[
i
][1] = 
de‰ag_öfo
.
de‰agged_åüngÀ_m≠
[2*i+1];

339 
	gg_surf
->
	gm_de‰agged_vîãx_m≠
.
ªsize
–
de‰ag_öfo
.
de‰agged_vîãx_m≠_size
 );

341  
	gi
 = 0; i < 
	gde‰ag_öfo
.
	gde‰agged_vîãx_m≠_size
; ++i )

343 
	gg_surf
->
	gm_de‰agged_vîãx_m≠
[
i
][0] = 
de‰ag_öfo
.
de‰agged_vîãx_m≠
[2*i+0];

344 
	gg_surf
->
	gm_de‰agged_vîãx_m≠
[
i
][1] = 
de‰ag_öfo
.
de‰agged_vîãx_m≠
[2*i+1];

347 
	gdrivî
->
upd©e_simuœti⁄_ñemíts
–*
g_surf
 );

352 
	gdñëe
[] 
	göputs
.
	gåüngÀs
;

353 
	gdñëe
[] 
	göputs
.
	gvîãx_loˇti⁄s
;

354 
	gdñëe
[] 
	göputs
.
	gvîãx_mas£s
;

356 
ñ_t›o_‰ì_°©ic_›î©i⁄s_ªsu…s
–&
ouçuts
, &
de‰ag_öfo
 );

369 
ñ_t›o_wøµî_öãgøã
–
dt
, & 
out_dt
 )

372 
ElT›oMesh
 
	göputs
;

373 
	göputs
.
	gnum_vîti˚s
 = 
g_surf
->
gë_num_vîti˚s
();

374 
	göputs
.
	gvîãx_loˇti⁄s
 = 
√w
 [ 3*
öputs
.
num_vîti˚s
 ];

375 
mem˝y
–
öputs
.
vîãx_loˇti⁄s
, &(
g_surf
->
gë_posôi⁄
(0)), 3*öputs.
num_vîti˚s
*() );

377 
	göputs
.
	gnum_åüngÀs
 = 
g_surf
->
m_mesh
.
num_åüngÀs
();

378 
	göputs
.
	gåüngÀs
 = 
√w
 [ 3*
öputs
.
num_åüngÀs
 ];

379 
mem˝y
–
öputs
.
åüngÀs
, &(
g_surf
->
m_mesh
.
gë_åüngÀs
()[0]), 3*öputs.
num_åüngÀs
*() );

381 
	göputs
.
	gvîãx_mas£s
 = 
√w
 [ 
öputs
.
num_vîti˚s
 ];

382 
mem˝y
–
öputs
.
vîãx_mas£s
, &(
g_surf
->
m_mas£s
[0]), i≈uts.
num_vîti˚s
*() );

384 
as£π
–
g_surf
->
m_mas£s
.
size
(Ë=
öputs
.
num_vîti˚s
 );

385  
	gi
 = 0; i < 
	göputs
.
	gnum_vîti˚s
; ++i )

387 
as£π
–
g_surf
->
m_mas£s
[
i
] == g_surf->m_masses[i] );

388 
as£π
–
g_surf
->
m_mas£s
[
i
] != 0.0 );

389 
as£π
–
öputs
.
vîãx_mas£s
[
i
] == inputs.vertex_masses[i] );

390 
as£π
–
öputs
.
vîãx_mas£s
[
i
] != 0.0 );

393 
ElT›oGíîÆO±i⁄s
 
	ggíîÆ_›ti⁄s
;

394 
	ggíîÆ_›ti⁄s
.
	gm_vîbo£
 = 
g_surf
->
m_vîbo£
;

395 
	ggíîÆ_›ti⁄s
.
	gm_cﬁlisi⁄_ß„ty
 = 
g_surf
->
m_cﬁlisi⁄_ß„ty
;

396 
	ggíîÆ_›ti⁄s
.
	gm_¥oximôy_ïsû⁄
 = 
g_surf
->
m_¥oximôy_ïsû⁄
;

398 
ElT›oI¡egøti⁄O±i⁄s
 
	g›ti⁄s
;

399 
	g›ti⁄s
.
	gm_dt
 = 
dt
;

400 
	g›ti⁄s
.
	gm_‰i˘i⁄_c€fficõ¡
 = 
g_surf
->
m_cﬁlisi⁄_pùñöe
.
m_‰i˘i⁄_c€fficõ¡
;

402 * 
	g√w_vîãx_loˇti⁄s
 = 
√w
 [ 3 * 
g_surf
->
gë_num_vîti˚s
() ];

404 
mem˝y
–
√w_vîãx_loˇti⁄s
, &(
g_surf
->
gë_√wposôi⁄
(0)), 3 * g_surf->
gë_num_vîti˚s
() * () );

406 * 
	gout_vîãx_loˇti⁄s
;

408 
ñ_t›o_öãgøã
–&
öputs
, 
√w_vîãx_loˇti⁄s
, &
gíîÆ_›ti⁄s
, &
›ti⁄s
, &
out_vîãx_loˇti⁄s
, &
out_dt
 );

410 
	gg_surf
->
£t_Æl_posôi⁄s
–
g_surf
->
gë_num_vîti˚s
(), 
out_vîãx_loˇti⁄s
 );

411 
	gg_surf
->
£t_Æl_√wposôi⁄s
–
g_surf
->
gë_num_vîti˚s
(), 
out_vîãx_loˇti⁄s
 );

413 
	gdñëe
[] 
	göputs
.
	gåüngÀs
;

414 
	gdñëe
[] 
	göputs
.
	gvîãx_loˇti⁄s
;

415 
	gdñëe
[] 
	göputs
.
	gvîãx_mas£s
;

417 
	gdñëe
[] 
	g√w_vîãx_loˇti⁄s
;

419 
ñ_t›o_‰ì_öãgøã_ªsu…s
–
out_vîãx_loˇti⁄s
 );

433 
adv™˚_sim
–
sim_dt
 )

436 
	g°¨t_time
 = 
gë_time_ö_£c⁄ds
();

438 
	gaccum_dt
 = 0;

440  (
	gaccum_dt
 < 0.99 * 
	gsim_dt
Ë&& (
	gsim
->
	gm_cuº_t
 +áccum_dà< sim->
	gm_max_t
) )

443 
	g°d
::
cout
 << "\n\n ------- sim step ------- \n\n";

445 
	g°d
::
cout
 << "cuºÅ: " << 
sim
->
m_cuº_t
 + 
accum_dt
 << " / " << sim->
m_max_t
 << 
°d
::
ídl
;

451 
	gg_°©s
.
add_to_öt
( "total_sim_steps", 1 );

452 
	gg_°©s
.
upd©e_mö_öt
–"mö_num_åüngÀs", (Ë
g_surf
->
m_mesh
.
num_åüngÀs
() );

453 
	gg_°©s
.
upd©e_max_öt
–"max_num_åüngÀs", (Ë
g_surf
->
m_mesh
.
num_åüngÀs
() );

454 
	gg_°©s
.
add_to_öt
–"tŸÆ_num_vîti˚s", 
g_surf
->
gë_num_vîti˚s
() );

455 
	gg_°©s
.
upd©e_mö_öt
–"mö_num_vîti˚s", (Ë
g_surf
->
gë_num_vîti˚s
() );

456 
	gg_°©s
.
upd©e_max_öt
–"max_num_vîti˚s", (Ë
g_surf
->
gë_num_vîti˚s
() );

457 
	gg_°©s
.
add_to_öt
–"tŸÆ_num_åüngÀs", 
g_surf
->
m_mesh
.
num_åüngÀs
() );

459 
	g°¨t_time_sub_°ï
 = 
gë_time_ö_£c⁄ds
();

466 #ifde‡
USE_C_API


467 
ñ_t›o_wøµî_°©ic_›î©i⁄s
();

472 
	g¥e_im¥ove_time
 = 
gë_time_ö_£c⁄ds
();

473 
	gg_surf
->
im¥ove_mesh
();

474 
	gpo°_im¥ove_time
 = 
gë_time_ö_£c⁄ds
();

475 
	gg_°©s
.
add_to_doubÀ
–"tŸÆ_im¥ove_time", 
po°_im¥ove_time
 - 
¥e_im¥ove_time
 );

477 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"‰ame_im¥ove_time", 
‰ame_°ï≥r
->
gë_‰ame
(), 
po°_im¥ove_time
 - 
¥e_im¥ove_time
 );

481 
	g¥e_t›ﬁogy_time
 = 
gë_time_ö_£c⁄ds
();

482 
	gg_surf
->
t›ﬁogy_ch™ges
();

483 
	gpo°_t›ﬁogy_time
 = 
gë_time_ö_£c⁄ds
();

484 
	gg_°©s
.
add_to_doubÀ
–"tŸÆ_t›ﬁogy_time", 
po°_t›ﬁogy_time
 - 
¥e_t›ﬁogy_time
 );

486 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"‰ame_t›o_time", 
‰ame_°ï≥r
->
gë_‰ame
(), 
po°_t›ﬁogy_time
 - 
¥e_t›ﬁogy_time
 );

488 
	g¥e_de‰ag_time
 = 
gë_time_ö_£c⁄ds
();

489 
	gg_surf
->
de‰ag_mesh
();

490 
	gpo°_de‰ag_time
 = 
gë_time_ö_£c⁄ds
();

492 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"‰ame_de‰ag_time", 
‰ame_°ï≥r
->
gë_‰ame
(), 
po°_de‰ag_time
 - 
¥e_de‰ag_time
 );

496 
	gdrivî
->
upd©e_simuœti⁄_ñemíts
–*
g_surf
 );

502 
	gmö_™gÀ
 = 
mö_åüngÀ_™gÀ
–*
g_surf
 );

503 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"mö_™gÀ", 
‰ame_°ï≥r
->
gë_‰ame
(), 
ød2deg
(
mö_™gÀ
) );

504 
	gmax_™gÀ
 = 
max_åüngÀ_™gÀ
–*
g_surf
 );

505 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"max_™gÀ", 
‰ame_°ï≥r
->
gë_‰ame
(), 
ød2deg
(
max_™gÀ
) );

507 
	gimp_°©s_fûíame
[256];

508 
•rötf
–
imp_°©s_fûíame
, "%s/Øa-imp-°©s.txt", 
g_ouçut_∑th
 );

509 
	gg_°©s
.
wrôe_to_fûe
–
imp_°©s_fûíame
 );

515 
	gcuº_dt
 = 
sim_dt
 - 
accum_dt
;

516 
	gcuº_dt
 = 
mö
–
cuº_dt
, 
sim
->
m_max_t
 - sim->
m_cuº_t
 - 
accum_dt
 );

518 
	g°d
::
cout
 << "cuº_dt: " << 
cuº_dt
 << 
°d
::
ídl
;

520 
	gtime_bef‹e_drivî
 = 
gë_time_ö_£c⁄ds
();

522 
	g°d
::
ve˘‹
<
Vec3d
> 
√w_posôi⁄s
–
g_surf
->
gë_num_vîti˚s
() );

523 
	gdrivî
->
£t_¥edi˘ed_vîãx_posôi⁄s
–*
g_surf
, 
√w_posôi⁄s
, 
sim
->
m_cuº_t
 + 
accum_dt
, 
cuº_dt
 );

525 
	gg_surf
->
£t_Æl_√wposôi⁄s
–
√w_posôi⁄s
 );

527 
	g°d
::
cout
 << "sim_dt: " << 
cuº_dt
 << 
°d
::
ídl
;

529 
	gtime_a·î_drivî
 = 
gë_time_ö_£c⁄ds
();

530 
	gg_°©s
.
add_to_doubÀ
–"tŸÆ_drivî_time", 
time_a·î_drivî
 - 
time_bef‹e_drivî
 );

536 
	gtime_bef‹e_öãgøti⁄
 = 
gë_time_ö_£c⁄ds
();

537 
	ga˘uÆ_dt
;

539 
	g°d
::
ve˘‹
<
Vec3d
> 
öôül_posôi⁄s
 = 
g_surf
->
gë_posôi⁄s
();

541 #ifde‡
USE_C_API


542 
ñ_t›o_wøµî_öãgøã
–
cuº_dt
, 
a˘uÆ_dt
 );

544 
	gg_surf
->
öãgøã
–
cuº_dt
, 
a˘uÆ_dt
 );

547 
	gcuº_dt
 = 
a˘uÆ_dt
;

549 
	g°d
::
cout
 << "a˘uÆ_dt: " << 
a˘uÆ_dt
 << 
°d
::
ídl
;

551 
	g°d
::
ve˘‹
<
Vec3d
> 
föÆ_posôi⁄s
 = 
g_surf
->
gë_posôi⁄s
();

553 
	gcuº_öãgøti⁄_time
 = 
gë_time_ö_£c⁄ds
(Ë- 
time_bef‹e_öãgøti⁄
;

554 
	gg_°©s
.
add_to_doubÀ
–"tŸÆ_öãgøti⁄_time", 
cuº_öãgøti⁄_time
 );

556 
	gaccum_dt
 +
cuº_dt
;

562 
	gdrivî
->
nŸify_d⁄e_öãgøti⁄
–
öôül_posôi⁄s
, 
föÆ_posôi⁄s
, 
a˘uÆ_dt
 );

564 
	gdrivî
->
compuã_îr‹
–*
g_surf
, 
sim
->
m_cuº_t
 + 
accum_dt
 );

567 
	gíd_time_sub_°ï
 = 
gë_time_ö_£c⁄ds
();

568 
	gg_°©s
.
add_≥r_‰ame_doubÀ
–"sim_time", 
‰ame_°ï≥r
->
gë_‰ame
(), 
íd_time_sub_°ï
 - 
°¨t_time_sub_°ï
 );

570 
	gg_°©s
.
add_≥r_‰ame_öt
–"num_vîti˚s", 
‰ame_°ï≥r
->
gë_‰ame
(), 
g_surf
->
gë_num_vîti˚s
() );

571 
	gg_°©s
.
add_≥r_‰ame_öt
–"num_åüngÀs", 
‰ame_°ï≥r
->
gë_‰ame
(), 
g_surf
->
m_mesh
.
num_åüngÀs
() );

577 
	gbö¨y_fûíame
[256];

578 
•rötf
–
bö¨y_fûíame
, "%s/‰ame%04d.bö", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

579 
wrôe_bö¨y_fûe
–
g_surf
->
m_mesh
, g_surf->
gë_posôi⁄s
(), g_surf->
m_mas£s
, 
sim
->
m_cuº_t
, 
bö¨y_fûíame
 );

581 
	g°©s_fûíame
[256];

582 
•rötf
–
°©s_fûíame
, "%s/Øa-°©s.txt", 
g_ouçut_∑th
 );

583 
	gg_°©s
.
wrôe_to_fûe
–
°©s_fûíame
 );

587 
	g°d
::
cout
 << " --------------Énd sim sã∞-------------- \n" << 
°d
::
ídl
;

589 
	gsim_°ï_time
 = 
gë_time_ö_£c⁄ds
(Ë- 
°¨t_time
;

590 
	gg_°©s
.
add_to_doubÀ
–"tŸÆ_sim_time", 
sim_°ï_time
 );

592 
	gsim
->
	gm_cuº_t
 +
accum_dt
;

599 i‡–
	gsim
->
d⁄e_simuœti⁄
() )

601 
	gsim
->
	gm_ru¬ög
 = 
Ál£
;

602 
	g°d
::
cout
 << "tŸÆÅimê°ïs: " << 
g_°©s
.
gë_öt
–"tŸÆ_sim_°ïs" ) << 
°d
::
ídl
;

614 
adv™˚_‰ame
()

617 if–!
	gsim
->
	gm_cuºíéy_adv™cög_simuœti⁄
 )

619 
	gsim
->
	gm_cuºíéy_adv™cög_simuœti⁄
 = 
åue
;

625 
	g°d
::
cout
 << "\¿--------------- fømê" << 
‰ame_°ï≥r
->
gë_‰ame
(Ë<< " --------------- \n" << 
°d
::
ídl
;

627  !(
	g‰ame_°ï≥r
->
d⁄e_‰ame
()) )

629 
	gdt
 = 
‰ame_°ï≥r
->
gë_°ï_Àngth
–
sim
->
m_dt
 );

630 
adv™˚_sim
–
dt
 );

631 
	g‰ame_°ï≥r
->
adv™˚_°ï
–
dt
 );

634 
	g°d
::
cout
 << " ---------------Énd fømê" << 
‰ame_°ï≥r
->
gë_‰ame
(Ë<< " --------------- \n" << 
°d
::
ídl
;

637 
	g‰ame_°ï≥r
->
√xt_‰ame
();

639 
	gsim
->
	gm_cuºíéy_adv™cög_simuœti⁄
 = 
Ál£
;

652 
run_simuœti⁄
( )

654 
	gsim
->
	gm_ru¬ög
 = 
åue
;

655  
	gsim
->
	gm_ru¬ög
 )

657 
adv™˚_‰ame
();

659 
	gsim
->
	gm_ru¬ög
 = 
Ál£
;

669 
run_Æl_sisc_exam∂es
–c⁄° * 
sisc_s¸ùt_dúe˘‹y
 )

671 
	g°d
::
cout
 << "\n\n\¿--------------Ñu¬ögáŒ SISCÉxam∂e†-------------- \n\n\n" << 
°d
::
ídl
;

673 
	g°d
::
ve˘‹
<
°d
::
°rög
> 
sisc_s¸ùt_fûíames
;

674 
	gsisc_s¸ùt_fûíames
.
push_back
( "faceoff-params-1.txt" );

675 
	gsisc_s¸ùt_fûíames
.
push_back
( "faceoff-params-2.txt" );

676 
	gsisc_s¸ùt_fûíames
.
push_back
( "faceoff-params-3.txt" );

677 
	gsisc_s¸ùt_fûíames
.
push_back
( "normal-params-1.txt" );

678 
	gsisc_s¸ùt_fûíames
.
push_back
( "normal-params-2.txt" );

679 
	gsisc_s¸ùt_fûíames
.
push_back
( "normal-params-3.txt" );

680 
	gsisc_s¸ùt_fûíames
.
push_back
( "mc-params-1.txt" );

681 
	gsisc_s¸ùt_fûíames
.
push_back
( "mc-params-2.txt" );

682 
	gsisc_s¸ùt_fûíames
.
push_back
( "mc-params-3.txt" );

683 
	gsisc_s¸ùt_fûíames
.
push_back
( "enright-parameters.txt" );

684 
	gsisc_s¸ùt_fûíames
.
push_back
( "open-curlnoise-parameters.txt" );

685 
	gsisc_s¸ùt_fûíames
.
push_back
( "curlnoise-parameters.txt" );

686 
	gsisc_s¸ùt_fûíames
.
push_back
( "tangled.txt" );

688  
	gi
 = 0; i < 
	gsisc_s¸ùt_fûíames
.
size
(); ++i )

690 
dñëe
 
	gsim
;

691 
dñëe
 
	gg_surf
;

692 
dñëe
 
	gdrivî
;

695 
	gfûíame
[256];

696 
¢¥ötf
–
fûíame
, 256, "%s/%s", 
sisc_s¸ùt_dúe˘‹y
, 
sisc_s¸ùt_fûíames
[
i
].
c_°r
() );

698 
öô_simuœti⁄
–
fûíame
 );

700 
	gg_°©s
.
˛ór
();

702 
	g°d
::
cout
 << "\n\n\¿---------------------------- " << 
°d
::
ídl
;

703 
	g°d
::
cout
 << "ouçuà∑th: " << 
g_ouçut_∑th
 << 
°d
::
ídl
;

705 
	gmkdú_comm™d
[1024];

706 
•rötf
–
mkdú_comm™d
, "mkdú -∞%s", 
g_ouçut_∑th
 );

707 
sy°em
(
mkdú_comm™d
);

709 
run_simuœti⁄
();

711 
	g°d
::
cout
 << "\¿-------------- sim d⁄ê-------------- \n\n\n" << 
°d
::
ídl
;

722 #ifde‡
USE_GUI


727 
upd©e_ªndîabÀ_obje˘s
()

730 #ifde‡
RUN_ASYNC


731 
±hªad_muãx_lock
–&
surf_muãx
 );

734 
	gªndîabÀ_vîti˚s
 = 
g_surf
->
gë_posôi⁄s
();

736 c⁄° 
	g°d
::
ve˘‹
<
Vec3°
>& 
mesh_åüngÀs
 = 
g_surf
->
m_mesh
.
gë_åüngÀs
();

738 
	gªndîabÀ_sﬁid_åüngÀs
.
˛ór
();

739 
	gªndîabÀ_n⁄_sﬁid_åüngÀs
.
˛ór
();

740  
size_t
 
	gi
 = 0; i < 
	gmesh_åüngÀs
.
size
(); ++i )

742 i‡–
	gg_surf
->
åüngÀ_is_sﬁid
(
i
) )

744 
	gªndîabÀ_sﬁid_åüngÀs
.
push_back
–
mesh_åüngÀs
[
i
] );

748 
	gªndîabÀ_n⁄_sﬁid_åüngÀs
.
push_back
–
mesh_åüngÀs
[
i
] );

752 
	gªndîabÀ_edges
.
˛ór
();

753  
size_t
 
	gi
 = 0; i < 
	gg_surf
->
	gm_mesh
.
	gm_edges
.
size
(); ++i )

755 
	gªndîabÀ_edges
.
push_back
–
g_surf
->
m_mesh
.
m_edges
[
i
] );

759 
	gg_surf
->
gë_Æl_vîãx_n‹mÆs
–
ªndîabÀ_vîãx_n‹mÆs
 );

762 
	gdrivî_ªndîî
 = 
drivî
->
gë_ªndîî
();

764 #ifde‡
RUN_ASYNC


766 
	gok
 = 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

767 
as£π
–
ok
 == 0 );

775 * 
adv™˚_‰ame_async
( * )

778 
±hªad_muãx_lock
–&
surf_muãx
 );

779 
adv™˚_‰ame
();

780 
	gok
 = 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

781 
as£π
–
ok
 == 0 );

784 
±hªad_muãx_lock
–&
thªad_is_ru¬ög_muãx
 );

785 
	gthªad_is_ru¬ög
 = 
Ál£
;

786 
	gok
 = 
±hªad_muãx_u∆ock
–&
thªad_is_ru¬ög_muãx
 );

787 
as£π
–
ok
 == 0 );

789  
	gNULL
;

795 
°¨t_adv™˚_‰ame
()

800 
±hªad_muãx_lock
–&
thªad_is_ru¬ög_muãx
 );

802 i‡–!
	gthªad_is_ru¬ög
 && !
	gwaôög_f‹_thªad_to_föish
 )

804 
	gthªad_is_ru¬ög
 = 
åue
;

806 
	gok
 = 
±hªad_muãx_u∆ock
–&
thªad_is_ru¬ög_muãx
 );

807 
as£π
–
ok
 == 0 );

809 i‡–
	gg_èke_s¸ìnshŸs
 )

812 i‡–
	g‰ame_°ï≥r
->
gë_‰ame
() == 0 )

815 
sgi_fûíame
[256];

816 
•rötf
–
sgi_fûíame
, "%s/‰ame%04d.sgi", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

817 
	gGluvi
::
sgi_s¸ìnshŸ
–
sgi_fûíame
 );

821 
	gwaôög_f‹_thªad_to_föish
 = 
åue
;

823 #ifde‡
RUN_ASYNC


825 
±hªad_¸óã
–&
adv™˚_‰ame_thªad
, 
NULL
, 
adv™˚_‰ame_async
, NULL );

827 
adv™˚_‰ame_async
( 0 );

830 
±hªad_muãx_lock
–&
thªad_is_ru¬ög_muãx
 );

834 
	gok
 = 
±hªad_muãx_u∆ock
–&
thªad_is_ru¬ög_muãx
 );

835 
as£π
–
ok
 == 0 );

841 
adv™˚_‰ame_d⁄e
()

844 
upd©e_ªndîabÀ_obje˘s
();

846 
±hªad_muãx_lock
–&
surf_muãx
 );

848 i‡–
	gg_èke_s¸ìnshŸs
 )

850 
	gsgi_fûíame
[256];

851 
•rötf
–
sgi_fûíame
, "%s/‰ame%04d.sgi", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

852 
	gGluvi
::
sgi_s¸ìnshŸ
–
sgi_fûíame
 );

856 
	gdrivî
->
wrôe_to_disk
–
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

858 
	gok
 = 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

859 
as£π
–
ok
 == 0 );

866 
timî_adv™˚_‰ame
( )

869 i‡–
	gsim
->
	gm_ru¬ög
 || 
	gadv™˚_sögÀ_‰ame
 )

871 
°¨t_adv™˚_‰ame
();

872 
	gadv™˚_sögÀ_‰ame
 = 
Ál£
;

875 
glutPo°Redi•œy
();

885 
keybﬂrd
(
key
, , )

888 if(
	gkey
 == 'q')

890 
±hªad_muãx_lock
–&
surf_muãx
 );

891 
dñëe
 
	gg_surf
;

892 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

893 
dñëe
 
	gdrivî
;

894 
exô
(0);

897 i‡–
	gkey
 == 's' )

899 
di•œy_drivî
 = !display_driver;

909 if(
	gkey
 == 'n')

911 
adv™˚_sögÀ_‰ame
 = 
åue
;

914 i‡–
	gkey
 == 'e' )

916 
mesh_ªndîî
.
ªndî_edges
 = !mesh_renderer.render_edges;

919 i‡–
	gkey
 == 't' )

921 
mesh_ªndîî
.
ªndî_fûl_åüngÀs
 = !mesh_renderer.render_fill_triangles;

924 i‡–
	gkey
 == 'v' )

926 
mesh_ªndîî
.
ªndî_vîãx_ønk
 = !mesh_renderer.render_vertex_rank;

932 i‡–
	gkey
 == 'r' )

934 
gluvi_ˇm
.
ªtu∫_to_deÁu…
();

939 i‡–
	gkey
 == 'd' )

941 
gluvi_ˇm
.
deÁu…_èrgë
[0] = gluvi_ˇm.
èrgë
[0];

942 
	ggluvi_ˇm
.
	gdeÁu…_èrgë
[1] = 
gluvi_ˇm
.
èrgë
[1];

943 
	ggluvi_ˇm
.
	gdeÁu…_èrgë
[2] = 
gluvi_ˇm
.
èrgë
[2];

944 
	ggluvi_ˇm
.
	gdeÁu…_di°
 = 
gluvi_ˇm
.
di°
;

945 
	ggluvi_ˇm
.
	gdeÁu…_hódög
 = 
gluvi_ˇm
.
hódög
;

946 
	ggluvi_ˇm
.
	gdeÁu…_pôch
 = 
gluvi_ˇm
.
pôch
;

948 
	g°d
::
cout
 << "ˇm_èrgë " << 
gluvi_ˇm
.
deÁu…_èrgë
[0] << " " << gluvi_ˇm.deÁu…_èrgë[1] << " " << gluvi_ˇm.deÁu…_èrgë[2] << 
°d
::
ídl
;

949 
	g°d
::
cout
 << "ˇm_di°™˚ " << 
gluvi_ˇm
.
deÁu…_di°
 << 
°d
::
ídl
;

950 
	g°d
::
cout
 << "ˇm_hódög " << 
gluvi_ˇm
.
deÁu…_hódög
 << 
°d
::
ídl
;

951 
	g°d
::
cout
 << "ˇm_pôch " << 
gluvi_ˇm
.
deÁu…_pôch
 << 
°d
::
ídl
;

956 if(
	gkey
 == 'b')

958 
±hªad_muãx_lock
–&
surf_muãx
 );

959 
	gbö¨y_fûíame
[256];

960 
•rötf
–
bö¨y_fûíame
, "%s/‰ame%04d.bö", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

961 
wrôe_bö¨y_fûe
–
g_surf
->
m_mesh
, g_surf->
gë_posôi⁄s
(), g_surf->
m_mas£s
, 
sim
->
m_cuº_t
, 
bö¨y_fûíame
 );

962 
	g°d
::
cout
 << "bö¨y fûêwrôãn" << 
°d
::
ídl
;

963 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

968 if(
	gkey
 == 'o')

970 
±hªad_muãx_lock
–&
surf_muãx
 );

971 
	gobj_fûíame
[256];

972 
•rötf
–
obj_fûíame
, "%s/‰ame%04d.obj", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

973 
wrôe_objfûe
–
g_surf
->
m_mesh
, g_surf->
gë_posôi⁄s
(), 
obj_fûíame
 );

974 
	g°d
::
cout
 << "obj fûêwrôãn" << 
°d
::
ídl
;

975 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

980 if(
	gkey
 == 'p')

982 
±hªad_muãx_lock
–&
surf_muãx
 );

983 
	gsgi_fûíame
[256];

984 
•rötf
–
sgi_fûíame
, "%s/‰ame%04d.sgi", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
gë_‰ame
() );

985 
	gGluvi
::
sgi_s¸ìnshŸ
–
sgi_fûíame
 );

986 
	g°d
::
cout
 << "sgòs¸ì¿shŸÅakí" << 
°d
::
ídl
;

987 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

992 if(
	gkey
 == ' ')

994 
adv™˚_sögÀ_‰ame
 = 
Ál£
;

995 
	gsim
->
	gm_ru¬ög
 = !
sim
->
m_ru¬ög
;

996 
	g°d
::
cout
 << "ru¬ög: " << (
sim
->
m_ru¬ög
 ? "yes" : "no"Ë<< 
°d
::
ídl
;

1011 i‡–
	gkey
 == 'Z' )

1013 
run_Æl_sisc_exam∂es
( "./sisc-scripts/" );

1016 i‡–
	gkey
 == 'c' )

1018 
°d
::
cout
 << "lﬂdög meshes" << std::
ídl
;

1022 
	gdt
;

1023 
	g°d
::
ve˘‹
<
Vec3d
> 
xs
;

1024 
ªad_bö¨y_fûe
–
g_surf
->
m_mesh
, 
xs
, g_surf->
m_mas£s
, 
dt
, "/Users/tyson/scratch/tbrochu/collisiondebug/current.bin" );

1025 
	gg_surf
->
£t_Æl_posôi⁄s
(
xs
);

1027 
N⁄De°ru˘iveTriMesh
 
	gãmp_mesh
;

1028 
	g°d
::
ve˘‹
<
Vec3d
> 
√w_xs
;

1029 
ªad_bö¨y_fûe
–
ãmp_mesh
, 
√w_xs
, 
g_surf
->
m_mas£s
, 
dt
, "/Users/tyson/scratch/tbrochu/collisiondebug/predicted.bin" );

1030 
	gg_surf
->
£t_Æl_√wposôi⁄s
(
√w_xs
);

1033 
	g°d
::
ve˘‹
< 
Vec3°
 > 
åis
;

1034  
	gi
 = 0; i < 
	gãmp_mesh
.
gë_åüngÀs
().
size
(); ++i )

1036 
boﬁ
 
	gfound
 = 
Ál£
;

1037  
	gj
 = 0; j < 
	gåis
.
size
(); ++j )

1039 i‡–
	gåis
[
j
] =
ãmp_mesh
.
gë_åüngÀ
(
i
) )

1041 
found
 = 
åue
;

1046 i‡–!
	gfound
 )

1048 
	gåis
.
push_back
–
ãmp_mesh
.
gë_åüngÀ
(
i
) );

1052 i‡–
	gdt
 =0.0 ) { 
dt
 = 1.0; }

1054 
	gg_surf
->
	gm_mesh
.
˛ór
();

1055 
	gg_surf
->
	gm_mesh
.
ª∂a˚_Æl_åüngÀs
–
åis
 );

1056 
	gg_surf
->
de‰ag_mesh
();

1058 
	g°d
::
cout
 << "öãgøtög" << 
°d
::
ídl
;

1060 
	ga˘uÆ_dt
;

1061 
	gg_surf
->
öãgøã
–
dt
, 
a˘uÆ_dt
 );

1064 
timî_adv™˚_‰ame
(0);

1066 
glutPo°Redi•œy
();

1075 
øy_ˇ°
(c⁄° 
Dy«micSurÁ˚
& 
surÁ˚
,

1076 c⁄° 
Vec3f
& 
øy_‹igö
,

1077 c⁄° 
Vec3f
& 
øy_dúe˘i⁄
,

1078 
¥imôive_ty≥
,

1079 
size_t
& 
hô_ödex
 )

1082 c⁄° 
	gRAY_CAST_HIT_DISTANCE
 = 2e-2;

1084 
Vec3d
 
r‹igö
–
øy_‹igö
[0],Ñay_origin[1],Ñay_origin[2] );

1085 
Vec3d
 
	grhód
 = 
r‹igö
 + 100.0 * Vec3d–
øy_dúe˘i⁄
[0],Ñay_direction[1],Ñay_direction[2] );

1088 
Vec3d
 
	gØbb_low
, 
	gØbb_high
;

1089 
mömax
–
r‹igö
, 
rhód
, 
Øbb_low
, 
Øbb_high
 );

1091 i‡–
	g¥imôive_ty≥
 == 0)

1097 i‡–
surÁ˚
.
m_vîbo£
 ) { 
°d
::
cout
 << "lookög f‹ vîti˚s..." << std::
ídl
; }

1099 
	gvîãx_mö_∑ømëî
 = 
BIG_DOUBLE
;

1100 
size_t
 
	gvîãx_mö_ödex
 = (size_t)~0;

1102 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_vîti˚s
;

1103 
	gsurÁ˚
.
	gm_brﬂd_pha£
->
gë_pŸítül_vîãx_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_vîti˚s
 );

1105 i‡–
	gsurÁ˚
.
	gm_vîbo£
 ) { 
	g°d
::
cout
 << "pŸítü»vîti˚s: " << 
ovîœµög_vîti˚s
.
size
(Ë<< 
°d
::
ídl
; }

1107  
size_t
 
	gi
 = 0; i < 
	govîœµög_vîti˚s
.
size
(); ++i )

1109 c⁄° 
	gVec3d
& 
	gv
 = 
surÁ˚
.
gë_posôi⁄
–
ovîœµög_vîti˚s
[
i
] );

1112 
	gdi°™˚
 = 
UNINITIALIZED_DOUBLE
;

1113 
	gøy_∑ømëî
 = 
UNINITIALIZED_DOUBLE
;

1114 
Vec3d
 
n‹mÆ
(
UNINITIALIZED_DOUBLE
, UNINITIALIZED_DOUBLE, UNINITIALIZED_DOUBLE);

1115 
	gn‹mÆ_mu…ùlõr
 = 
UNINITIALIZED_DOUBLE
;

1117 
check_poöt_edge_¥oximôy
–
Ál£
, 
v
, 
rhód
, 
r‹igö
, 
di°™˚
, 
øy_∑ømëî
, 
n‹mÆ
, 
n‹mÆ_mu…ùlõr
 );

1119 i‡–
	gdi°™˚
 < 
	gRAY_CAST_HIT_DISTANCE
 )

1121 i‡–
	gøy_∑ømëî
 < 
	gvîãx_mö_∑ømëî
 )

1123 
	gvîãx_mö_∑ømëî
 = 
øy_∑ømëî
 - 
RAY_CAST_HIT_DISTANCE
;

1124 
	gvîãx_mö_ödex
 = 
ovîœµög_vîti˚s
[
i
];

1129 i‡–
	gvîãx_mö_∑ømëî
 < 
	gBIG_DOUBLE
 )

1131 
	ghô_ödex
 = 
vîãx_mö_ödex
;

1132  
	gRAY_HIT_VERTEX
;

1136  
	gRAY_HIT_NOTHING
;

1140 i‡–
	g¥imôive_ty≥
 == 1)

1147 
edge_mö_di°™˚
 = 
BIG_DOUBLE
;

1148 
size_t
 
	gedge_mö_ödex
 = (size_t)~0;

1150 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_edges
;

1151 
	gsurÁ˚
.
	gm_brﬂd_pha£
->
gë_pŸítül_edge_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_edges
 );

1153  
size_t
 
	gi
 = 0; i < 
	govîœµög_edges
.
size
(); ++i )

1155 c⁄° 
	gVec2°
& 
	ge
 = 
surÁ˚
.
m_mesh
.
m_edges
[ 
ovîœµög_edges
[
i
] ];

1156 c⁄° 
	gVec3d
& 
	gv0
 = 
surÁ˚
.
gë_posôi⁄
–
e
[0] );

1157 c⁄° 
	gVec3d
& 
	gv1
 = 
surÁ˚
.
gë_posôi⁄
–
e
[1] );

1159 
	gdi°™˚
;

1160 
	gøy_∑ømëî
, 
	gedge_∑ømëî
;

1161 
Vec3d
 
	gn‹mÆ
;

1163 
check_edge_edge_¥oximôy
–
rhód
,

1164 
r‹igö
,

1165 
v0
,

1166 
v1
,

1167 
di°™˚
, 
øy_∑ømëî
, 
edge_∑ømëî
, 
n‹mÆ
 );

1169 i‡–
	gdi°™˚
 < 
	gRAY_CAST_HIT_DISTANCE
 && 
	gedge_∑ømëî
 > 0.0 &&Édge_parameter < 1.0 )

1171 i‡–
	gdi°™˚
 < 
	gedge_mö_di°™˚
 )

1173 
	gedge_mö_di°™˚
 = 
di°™˚
;

1174 
	gedge_mö_ödex
 = 
ovîœµög_edges
[
i
];

1180 i‡–
	gedge_mö_di°™˚
 < 
	gBIG_DOUBLE
 )

1182 
	ghô_ödex
 = 
edge_mö_ödex
;

1183  
	gRAY_HIT_EDGE
;

1187  
	gRAY_HIT_NOTHING
;

1198 
	gåüngÀ_mö_∑ømëî
 = 
BIG_DOUBLE
;

1199 
size_t
 
	gåüngÀ_mö_ödex
 = (size_t)~0;

1201 
	g°d
::
ve˘‹
<
size_t
> 
ovîœµög_åüngÀs
;

1202 
	gsurÁ˚
.
	gm_brﬂd_pha£
->
gë_pŸítül_åüngÀ_cﬁlisi⁄s
–
Øbb_low
, 
Øbb_high
, 
åue
,Årue, 
ovîœµög_åüngÀs
 );

1204  
size_t
 
	gi
 = 0; i < 
	govîœµög_åüngÀs
.
size
(); ++i )

1206 c⁄° 
	gVec3°
& 
	gåi
 = 
surÁ˚
.
m_mesh
.
gë_åüngÀ
–
ovîœµög_åüngÀs
[
i
] );

1208 
Vec3°
 
	gt
 = 
s‹t_åüngÀ
–
åi
 );

1209 
as£π
–
t
[0] <Å[1] &&Å[0] <Å[2] &&Å[1] <Å[2] );

1211 c⁄° 
	gVec3d
& 
	gv0
 = 
surÁ˚
.
gë_posôi⁄
–
t
[0] );

1212 c⁄° 
	gVec3d
& 
	gv1
 = 
surÁ˚
.
gë_posôi⁄
–
t
[1] );

1213 c⁄° 
	gVec3d
& 
	gv2
 = 
surÁ˚
.
gë_posôi⁄
–
t
[2] );

1215 
	g‹igö_∑ømëî
, 
	gøy_∑ømëî
, 
	gs0
, 
	gs1
, 
	gs2
;

1216 
Vec3d
 
	gn‹mÆ
;

1217 
size_t
 
	gdummy_ödex
 = 
surÁ˚
.
gë_num_vîti˚s
();

1220 
boﬁ
 
	gøy_hô
 = 
£gmít_åüngÀ_öãr£˘i⁄
–
r‹igö
, 
dummy_ödex
,

1221 
rhód
, 
dummy_ödex
 + 1,

1222 
v0
, 
t
[0],

1223 
v1
, 
t
[1],

1224 
v2
, 
t
[2],

1225 
‹igö_∑ømëî
, 
øy_∑ømëî
, 
s0
, 
s1
, 
s2
,

1226 
Ál£
 );

1228 i‡–
	gøy_hô
 )

1230 i‡–
	gøy_∑ømëî
 < 
	gåüngÀ_mö_∑ømëî
 )

1232 
	gåüngÀ_mö_∑ømëî
 = 
øy_∑ømëî
;

1233 
	gåüngÀ_mö_ödex
 = 
ovîœµög_åüngÀs
[
i
];

1238 i‡–
	gåüngÀ_mö_∑ømëî
 < 
	gBIG_DOUBLE
 )

1240 
	ghô_ödex
 = 
åüngÀ_mö_ödex
;

1241  
	gRAY_HIT_TRIANGLE
;

1245  
	gRAY_HIT_NOTHING
;

1259 
mou£
(
buâ⁄
, 
°©e
, 
x
, 
y
)

1261 i‡–
glutGëModifõrs
(Ë=
GLUT_ACTIVE_ALT
 )

1263 
£À˘ed_vîãx
 = 
£À˘ed_edge
 = 
£À˘ed_åüngÀ
 = -1;

1265 
	gøy_‹igö
[3], 
	gøy_dúe˘i⁄
[3];

1267 
	ggluvi_ˇm
.
å™sf‹m_mou£
–
x
, 
y
, 
øy_‹igö
, 
øy_dúe˘i⁄
 );

1269 
size_t
 
	ghô_ödex
;

1271 
	gøy_ˇ°_ty≥
;

1272 i‡–
	gbuâ⁄
==
GLUT_LEFT_BUTTON
 ) { 
øy_ˇ°_ty≥
 = 0; }

1273 i‡–
	gbuâ⁄
==
GLUT_MIDDLE_BUTTON
 ) { 
øy_ˇ°_ty≥
 = 1; }

1274 { 
	gøy_ˇ°_ty≥
 = 2; }

1276 
±hªad_muãx_lock
–&
surf_muãx
 );

1277 
	gøy_hô_ty≥
 = 
øy_ˇ°
–*
g_surf
, 
Vec3f
–
øy_‹igö
 ), Vec3f–
øy_dúe˘i⁄
 ), 
øy_ˇ°_ty≥
, 
hô_ödex
 );

1278 
±hªad_muãx_u∆ock
–&
surf_muãx
 );

1280 
	gøy_hô_ty≥
)

1282 
	gRAY_HIT_VERTEX
:

1283 
£À˘ed_vîãx
 = 
hô_ödex
;

1285 
	gRAY_HIT_EDGE
:

1286 
£À˘ed_edge
 = 
hô_ödex
;

1288 
	gRAY_HIT_TRIANGLE
:

1289 
£À˘ed_åüngÀ
 = 
hô_ödex
;

1292 
as£π
–
øy_hô_ty≥
 =
RAY_HIT_NOTHING
 );

1296 
glutPo°Redi•œy
();

1300 
	ggluvi_ˇm
.
˛ick
(
buâ⁄
, 
°©e
, 
x
, 
y
);

1309 
mou£MŸi⁄
(
x
, 
y
)

1311 
	ggluvi_ˇm
.
døg
(
x
, 
y
);

1321 
di•œy
()

1324 i‡–! 
	gGluvi
::
èkög_s¸ìnshŸ
 )

1327 i‡–
di•œy_°©us_ãxt
 )

1329 
±hªad_muãx_lock
–&
thªad_is_ru¬ög_muãx
 );

1330 i‡–
	gthªad_is_ru¬ög
 )

1332 i‡–
	gsim
->
	gm_ru¬ög
 )

1335 
	g°©us_ãxt_widgë
->
£t_cﬁ‹
( 0.0f, 0.0f, 0.0f );

1336 
	g°©us_ãxt_widgë
->
	gãxt
 = "Ru¬ög ---Ö©h:" + 
°d
::
°rög
–
g_ouçut_∑th
 );

1341 
	g°©us_ãxt_widgë
->
£t_cﬁ‹
( 0.8f, 0.2f, 0.2f );

1342 
	g°©us_ãxt_widgë
->
	gãxt
 = "Stopping...";

1347 i‡–
	gwaôög_f‹_thªad_to_föish
 )

1352 
±hªad_joö
–
adv™˚_‰ame_thªad
, 
NULL
 );

1354 
	gwaôög_f‹_thªad_to_föish
 = 
Ál£
;

1356 
adv™˚_‰ame_d⁄e
();

1358 
	g°©us_ãxt_widgë
->
£t_cﬁ‹
( 0.0f, 0.0f, 0.0f );

1359 
	g°©us_ãxt_widgë
->
	gãxt
 = "Ready";

1363 
	gok
 = 
±hªad_muãx_u∆ock
–&
thªad_is_ru¬ög_muãx
 );

1364 
as£π
–
ok
 == 0 );

1368 
	g°©us_ãxt_widgë
->
£t_cﬁ‹
( 1.0f, 1.0f, 1.0f );

1369 
	g°©us_ãxt_widgë
->
	gãxt
 = "";

1374 
timî_adv™˚_‰ame
(0);

1383 
	gmesh_ªndîî
.
ªndî
(
ªndîabÀ_vîti˚s
,

1384 
ªndîabÀ_vîãx_n‹mÆs
,

1385 
ªndîabÀ_n⁄_sﬁid_åüngÀs
,

1386 
ªndîabÀ_edges
 );

1392 i‡–
	gdi•œy_drivî
 && 
	gdrivî_ªndîî
 !
NULL
 )

1394 
drivî_ªndîî
->
ªndî
();

1406 
öô_gui
–c⁄° 
S¸ùtInô
& 
s¸ùt_öô
 )

1409 
glCÀ¨Cﬁ‹
(1,1,1,0);

1410 
	gGluvi
::
ˇmîa
 = &
gluvi_ˇm
;

1412 
	ggluvi_ˇm
.
	gèrgë
[0] = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_èrgë
[0]);

1413 
	ggluvi_ˇm
.
	gèrgë
[1] = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_èrgë
[1]);

1414 
	ggluvi_ˇm
.
	gèrgë
[2] = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_èrgë
[2]);

1415 
	ggluvi_ˇm
.
	gdi°
 = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_di°™˚
);

1416 
	ggluvi_ˇm
.
	ghódög
 = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_hódög
);

1417 
	ggluvi_ˇm
.
	gpôch
 = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
ˇmîa_pôch
);

1420 
	ggluvi_ˇm
.
	gdeÁu…_èrgë
[0] = 
gluvi_ˇm
.
èrgë
[0];

1421 
	ggluvi_ˇm
.
	gdeÁu…_èrgë
[1] = 
gluvi_ˇm
.
èrgë
[1];

1422 
	ggluvi_ˇm
.
	gdeÁu…_èrgë
[2] = 
gluvi_ˇm
.
èrgë
[2];

1423 
	ggluvi_ˇm
.
	gdeÁu…_di°
 = 
gluvi_ˇm
.
di°
;

1424 
	ggluvi_ˇm
.
	gdeÁu…_hódög
 = 
gluvi_ˇm
.
hódög
;

1425 
	ggluvi_ˇm
.
	gdeÁu…_pôch
 = 
gluvi_ˇm
.
pôch
;

1428 
	gGluvi
::
u£rDi•œyFunc
=
di•œy
;

1430 
glutKeybﬂrdFunc
(
keybﬂrd
);

1431 
glutMou£Func
(
mou£
);

1432 
glutMŸi⁄Func
(
mou£MŸi⁄
);

1434 
	g°©us_ãxt_widgë
 = 
√w
 
Gluvi
::
Dy«micText
( "Ready" );

1435 
	gGluvi
::
roŸ
.
li°
.
push_back
–
°©us_ãxt_widgë
 );

1437 
	ggluvi_ˇm
.
gl_å™sf‹m
();

1439 
upd©e_ªndîabÀ_obje˘s
();

1447 
£t_up_ouçut_∑th
( )

1450 
DIR
 *
	gdp
;

1451 
dúít
 *
	gï
;

1452 
	gdp
 = 
›ídú
 ( 
g_ouçut_∑th
 );

1454 
	gmax_dú
 = 0;

1456 i‡(
	gdp
 !
NULL
)

1458  (
ï
 = 
ªaddú
 (
dp
)) != 0 )

1461 
°d
::
°rög
 
«me_°rög
–
ï
->
d_«me
 );

1465 
	gi
;

1466 
	gnum_v¨übÀs_ªad
 = 
ssˇnf
 (
«me_°rög
.
c_°r
(), "run%04d", &
i
 );

1467 i‡–
	gnum_v¨übÀs_ªad
 > 0 )

1469 
	gmax_dú
 = 
max
–
max_dú
, 
i
 );

1474 (Ë
˛o£dú
 (
dp
);

1478 
	g°d
::
cout
 << "Couldn'à›íÅhê•ecifõd ouçuàdúe˘‹y" << 
°d
::
ídl
;

1481 
•rötf
–
g_ouçut_∑th
, "%s/run%04d", g_ouçut_∑th, 
max_dú
 + 1 );

1482 
	g°d
::
cout
 << "Ouçuà∑th: " << 
g_ouçut_∑th
 << 
°d
::
ídl
;

1484 
	gmkdú_comm™d
[1024];

1485 
•rötf
–
mkdú_comm™d
, "mkdú -∞%s", 
g_ouçut_∑th
 );

1486 
sy°em
(
mkdú_comm™d
);

1497 
öô_simuœti⁄
–*
s¸ùt_fûíame
 )

1500 
SurfTøckInôüliz©i⁄P¨amëîs
 
	göô_∑øms
;

1502 
	g°d
::
ve˘‹
<
Vec3ui
> 
åis
;

1503 
	g°d
::
ve˘‹
<
Vec3d
> 
vîts
;

1504 
	g°d
::
ve˘‹
<
Vec3d
> 
vñocôõs
;

1505 
	g°d
::
ve˘‹
<> 
mas£s
;

1507 
S¸ùtInô
 
	gs¸ùt_öô
;

1508 
	gs¸ùt_öô
.
∑r£_s¸ùt
–
s¸ùt_fûíame
 );

1510 i‡–
	gs¸ùt_öô
.
	gouçut_∑th_is_ªœtive
 )

1512 
¢¥ötf
–
g_ouçut_∑th
, 256, "%s/%s", 
g_ba£_ouçut_∑th
, 
s¸ùt_öô
.
ouçut_∑th
.
c_°r
() );

1516 
¢¥ötf
–
g_ouçut_∑th
, 256, "%s", 
s¸ùt_öô
.
ouçut_∑th
.
c_°r
() );

1521 
	g‰ame_°ï≥r
 = 
√w
 
FømeSãµî
–
s¸ùt_öô
.
‰ame_dt
 );

1525 i‡–
	gs¸ùt_öô
.
	gíd_sim_t
 !
UNINITIALIZED_DOUBLE
 )

1527 
sim
 = 
√w
 
Simuœti⁄
–
s¸ùt_öô
.
sim_dt
, s¸ùt_öô.
íd_sim_t
 );

1531 
	gsim
 = 
√w
 
Simuœti⁄
–
s¸ùt_öô
.
sim_dt
 );

1534 i‡–
	gs¸ùt_öô
.
	gcuº_t_•ecifõd
 )

1536 
	gsim
->
	gm_cuº_t
 = 
s¸ùt_öô
.
cuº_t
;

1538 
	gcuº_‰ame
 = 
°©ic_ˇ°
<>(
s¸ùt_öô
.
cuº_t
 / s¸ùt_öô.
‰ame_dt
);

1539 
	g°d
::
cout
 << "cuº_t: " << 
sim
->
m_cuº_t
 << 
°d
::
ídl
;

1540 
	g°d
::
cout
 << "cuº_‰ame: " << 
cuº_‰ame
 << 
°d
::
ídl
;

1542 
	g‰ame_°ï≥r
->
	g‰ame_cou¡
 = 
cuº_‰ame
;

1548 
	gg_surf
 = 
√w
 
SurfTøck
–
s¸ùt_öô
.
vîti˚s
, s¸ùt_öô.
åüngÀs
, s¸ùt_öô.
mas£s
, s¸ùt_öô.
surf_åack_∑øms
 );

1550 
	gg_surf
->
de‰ag_mesh
();

1554 
	gdrivî
 = 
s¸ùt_öô
.
drivî
;

1555 
	gdrivî
->
öôülize
–*
g_surf
 );

1557 i‡–
	gg_surf
->
	gm_cﬁlisi⁄_ß„ty
 )

1559 
	gg_surf
->
	gm_cﬁlisi⁄_pùñöe
.
as£π_mesh_is_öãr£˘i⁄_‰ì
–
Ál£
 );

1562 
	gg_°©s
.
£t_doubÀ
–"max_edge_Àngth", 
g_surf
->
m_•lôãr
.
m_max_edge_Àngth
 );

1563 
	gg_°©s
.
£t_doubÀ
–"mö_edge_Àngth", 
g_surf
->
m_cﬁœp£r
.
m_mö_edge_Àngth
 );

1564 
	gg_°©s
.
£t_doubÀ
–"max_vﬁume_ch™ge", 
g_surf
->
m_max_vﬁume_ch™ge
 );

1566 
£t_time_ba£
();

1568 #ifde‡
USE_GUI


1570 
öô_gui
–
s¸ùt_öô
 );

1585 
	$maö
(
¨gc
, **
¨gv
)

1588 
°d
::
cout
 << "TÆ∑: Demÿ≠∂iˇti⁄†o‡E»T›o" << std::
ídl
;

1589 
°d
::
cout
 << "-----------------------------------" << std::
ídl
 << std::endl;

1591 if–
¨gc
 < 2 )

1593 
°d
::
cout
 << "Ußge: <execuèbÀ> <s¸ùtfûe> <ouçutba£dúe˘‹y>" << std::
ídl
;

1594 
°d
::
cout
 << "e.g.: " << std::
ídl
;

1595 
°d
::
cout
 << "$ ./èÕa_ªÀa£ cuænoi£-∑ømëîs.txà/v¨/tmp/" << std::
ídl
;

1601 i‡–
¨gc
 > 2 )

1603 
	`°∫˝y
–
g_ba£_ouçut_∑th
, 
¨gv
[2], (g_base_output_path) );

1608 
	`°∫˝y
–
g_ba£_ouçut_∑th
, "./", (g_base_output_path) );

1611 #ifde‡
USE_GUI


1612 
±hªad_muãx©å_t
 
mè
;

1613 
rc
 = 
	`±hªad_muãx©å_öô
(&
mè
);

1614 
rc
 = 
	`±hªad_muãx©å_£ây≥
(&
mè
, 
PTHREAD_MUTEX_ERRORCHECK
 );

1615 
rc
 = 
	`±hªad_muãx_öô
(&
thªad_is_ru¬ög_muãx
, &
mè
);

1617 
Gluvi
::
wöwidth
 = 800;

1618 
Gluvi
::
wöheight
 = 600;

1620 
Gluvi
::
	`öô
–"TÆ∑", &
¨gc
, 
¨gv
 );

1627 
	`öô_simuœti⁄
–
¨gv
[1] );

1634 
	`£t_up_ouçut_∑th
();

1640 * 
s¸ùt_fûíame
 = 
¨gv
[1];

1641 
°d
::
if°ªam
 
	`‹igöÆ_fûe_°ªam
–
s¸ùt_fûíame
 );

1642 
	`as£π
–
‹igöÆ_fûe_°ªam
.
	`good
() );

1644 
s¸ùt_c›y_fûíame
[256];

1645 
	`¢¥ötf
–
s¸ùt_c›y_fûíame
, 256, "%s/Øa-s¸ùt.txt", 
g_ouçut_∑th
 );

1647 
comm™d
[1024];

1648 
	`•rötf
–
comm™d
, "˝ %†%s", 
s¸ùt_fûíame
, 
s¸ùt_c›y_fûíame
 );

1649 
	`sy°em
(
comm™d
);

1651 
	`§™d
( 1 );

1654 
bö¨y_fûíame
[256];

1655 
	`•rötf
–
bö¨y_fûíame
, "%s/‰ame%04d.bö", 
g_ouçut_∑th
, 
‰ame_°ï≥r
->
	`gë_‰ame
() );

1656 
	`wrôe_bö¨y_fûe
–
g_surf
->
m_mesh
, g_surf->
	`gë_posôi⁄s
(), g_surf->
m_mas£s
, 
sim
->
m_cuº_t
, 
bö¨y_fûíame
 );

1658 
drivî
->
	`wrôe_to_disk
–
g_ouçut_∑th
, 
‰ame_°ï≥r
->
	`gë_‰ame
() );

1664 #ifde‡
USE_GUI


1666 
Gluvi
::
	`run
();

1670 
	`run_simuœti⁄
();

1678 
	}
}

	@talpa/newparser.cpp

1 
	~<√w∑r£r.h
>

2 
	~<Àxî.h
>

4 c⁄° 
P¨£Tªe
* 
	gP¨£Tªe
::

5 
	$gë_bønch
(c⁄° 
°d
::
°rög
& 
«me
) const

7 
°d
::
m≠
<°d::
°rög
,
P¨£Tªe
>::
c⁄°_ôî©‹
 
p
=
bønches
.
	`föd
(
«me
);

8 if(
p
==
bønches
.
	`íd
())  0;

9  &
p
->
£c⁄d
;

10 
	}
}

12 
boﬁ
 
	gP¨£Tªe
::
	$ªmove_fú°_m©chög_bønch
–c⁄° 
°d
::
°rög
& 
«me
 )

14 
°d
::
m≠
<°d::
°rög
,
P¨£Tªe
>::
ôî©‹
 
p
=
bønches
.
	`föd
(
«me
);

15 if(
p
==
bønches
.
	`íd
()Ë 
Ál£
;

16 
bønches
.
	`îa£
–
p
 );

17  
åue
;

18 
	}
}

20 
boﬁ
 
	gP¨£Tªe
::

21 
	$gë_numbî
(c⁄° 
°d
::
°rög
& 
«me
, & 
ªsu…
) const

23 
°d
::
m≠
<°d::
°rög
,>::
c⁄°_ôî©‹
 
p
=
numbîs
.
	`föd
(
«me
);

24 if(
p
==
numbîs
.
	`íd
()Ë 
Ál£
;

25 
ªsu…
=
p
->
£c⁄d
;

26  
åue
;

27 
	}
}

29 
boﬁ
 
	gP¨£Tªe
::

30 
	$gë_öt
(c⁄° 
°d
::
°rög
& 
«me
, & 
ªsu…
) const

32 
numbî
;

33 if(
	`gë_numbî
(
«me
, 
numbî
)){

34 
ªsu…
=()
°d
::
	`Êo‹
(
numbî
);

35  
åue
;

37  
Ál£
;

38 
	}
}

40 
boﬁ
 
	gP¨£Tªe
::

41 
	$gë_°rög
(c⁄° 
°d
::
°rög
& 
«me
, std::°rög& 
ªsu…
) const

43 
°d
::
m≠
<°d::
°rög
,°d::°rög>::
c⁄°_ôî©‹
 
p
=
°rögs
.
	`föd
(
«me
);

44 if(
p
==
°rögs
.
	`íd
()Ë 
Ál£
;

45 
ªsu…
=
p
->
£c⁄d
;

46  
åue
;

47 
	}
}

49 c⁄° 
Aºay1d
* 
	gP¨£Tªe
::

50 
	$gë_ve˘‹
(c⁄° 
°d
::
°rög
& 
«me
) const

52 
°d
::
m≠
<°d::
°rög
,
Aºay1d
>::
c⁄°_ôî©‹
 
p
=
ve˘‹s
.
	`föd
(
«me
);

53 if(
p
==
ve˘‹s
.
	`íd
())  0;

54  &
p
->
£c⁄d
;

55 
	}
}

57 
boﬁ
 
	gP¨£Tªe
::

58 
	$gë_vec2d
(c⁄° 
°d
::
°rög
& 
«me
, 
Vec2d
& 
v
) const

60 
°d
::
m≠
<°d::
°rög
,
Aºay1d
>::
c⁄°_ôî©‹
 
p
=
ve˘‹s
.
	`föd
(
«me
);

61 if(
p
==
ve˘‹s
.
	`íd
()Ë 
Ál£
;

62 if(
p
->
£c⁄d
.
n
!=2){

63 
°d
::
˚º
<<"Eº‹:Üookög f‹ 2d ve˘‹ ["<<
«me
<<"] buàgŸ dimísi⁄ "<<
p
->
£c⁄d
.
n
<<°d::
ídl
;

64  
Ál£
;

66 
v
[0]=
p
->
£c⁄d
[0];

67 
v
[1]=
p
->
£c⁄d
[1];

68  
åue
;

69 
	}
}

71 
boﬁ
 
	gP¨£Tªe
::

72 
	$gë_vec3d
(c⁄° 
°d
::
°rög
& 
«me
, 
Vec3d
& 
v
) const

74 
°d
::
m≠
<°d::
°rög
,
Aºay1d
>::
c⁄°_ôî©‹
 
p
=
ve˘‹s
.
	`föd
(
«me
);

75 if(
p
==
ve˘‹s
.
	`íd
()Ë 
Ál£
;

76 if(
p
->
£c⁄d
.
n
!=3){

77 
°d
::
˚º
<<"Eº‹:Üookög f‹ 3d ve˘‹ ["<<
«me
<<"] buàgŸ dimísi⁄ "<<
p
->
£c⁄d
.
n
<<°d::
ídl
;

78  
Ál£
;

80 
v
[0]=
p
->
£c⁄d
[0];

81 
v
[1]=
p
->
£c⁄d
[1];

82 
v
[2]=
p
->
£c⁄d
[2];

83  
åue
;

84 
	}
}

86 
	g«me•a˚
 {

125 
boﬁ
 
∑r£_ve˘‹
(
Lexî
& 
Àxî
, 
Aºay1d
& 
v
)

127 
Tokí
 
	gtokí
;

128 
	gv
.
ªsize
(0);

130 
	gÀxî
.
ªad
(
tokí
);

131 
	gtokí
.
	gty≥
){

132 
	gTOKEN_EOF
:

133 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹ closög bøckë buàhôÉnd-of-fûe"<<°d::
ídl
;

134  
	gÁl£
;

135 
	gTOKEN_ERROR
:

136 
°d
::
˚º
<<"LexÉº‹: c™nŸ makê£n£ o‡["<<
tokí
.
°rög_vÆue
<<"]"<<°d::
ídl
;

137  
	gÁl£
;

138 
	gTOKEN_NUMBER
:

139 
v
.
push_back
(
tokí
.
numbî_vÆue
);

141 
	gTOKEN_RIGHT_BRACKET
:

142  
åue
;

144 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹áÇumbî o∏®˛osög bøckë, gŸ u√x≥˘edÅokí "<<
tokí
<<°d::
ídl
;

145  
	gÁl£
;

150 
boﬁ
 
ªcursive_∑r£
(
Lexî
& 
Àxî
, 
P¨£Tªe
& 
åì
, boﬁ 
roŸ_Àvñ
)

152 
Tokí
 
	gtokí
;

153 
	g°d
::
°rög
 
«me
;

155 
	gÀxî
.
ªad
(
tokí
);

156 
	gtokí
.
	gty≥
){

157 
	gTOKEN_EOF
:

158 if(!
roŸ_Àvñ
){

159 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹ closögÖ¨íthesi†buàhôÉnd-of-fûe"<<°d::
ídl
;

160  
	gÁl£
;

162  
	gåue
;

163 
	gTOKEN_ERROR
:

164 
°d
::
˚º
<<"LexÉº‹: c™nŸ makê£n£ o‡["<<
tokí
.
°rög_vÆue
<<"]"<<°d::
ídl
;

165  
	gÁl£
;

166 
	gTOKEN_IDENTIFIER
: 
TOKEN_STRING
:

167 
«me
=
tokí
.
°rög_vÆue
;

168 if(
	gåì
.
	gbønches
.
föd
(
«me
)!=
åì
.
bønches
.
íd
()

169 || 
åì
.
numbîs
.
föd
(
«me
)!Òªe.numbîs.
íd
()

170 || 
åì
.
°rögs
.
föd
(
«me
)!Òªe.°rögs.
íd
()

171 || 
åì
.
ve˘‹s
.
föd
(
«me
)!Òªe.ve˘‹s.
íd
()){

172 
°d
::
˚º
<<"P¨£Éº‹:Çamê["<<
«me
<<"]áµór†mu…ùÀÅime†öÑec‹d"<<°d::
ídl
;

173  
	gÁl£
;

176 
	gTOKEN_RIGHT_PAREN
:

177 if(
roŸ_Àvñ
){

178 
°d
::
˚º
<<"P¨£Éº‹: hô closögÖ¨íthesi†©ÑoŸÜevñ"<<°d::
ídl
;

179  
	gÁl£
;

181  
	gåue
;

183 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹áÇame, gŸ u√x≥˘edÅokí "<<
tokí
<<°d::
ídl
;

184  
	gÁl£
;

187 
	gÀxî
.
ªad
(
tokí
);

188 
	gtokí
.
	gty≥
){

189 
	gTOKEN_EOF
:

190 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹á vÆuêf‹ ["<<
«me
<<"] buàhôÉnd-of-fûe"<<°d::
ídl
;

191  
	gÁl£
;

192 
	gTOKEN_ERROR
:

193 
°d
::
˚º
<<"LexÉº‹: c™nŸ makê£n£ o‡["<<
tokí
.
°rög_vÆue
<<"]"<<°d::
ídl
;

194  
	gÁl£
;

195 
	gTOKEN_IDENTIFIER
: 
TOKEN_STRING
:

196 
åì
.
°rögs
.
ö£π
(
°d
::
make_∑ú
(
«me
, 
tokí
.
°rög_vÆue
));

198 
	gTOKEN_NUMBER
:

199 
åì
.
numbîs
.
ö£π
(
°d
::
make_∑ú
(
«me
, 
tokí
.
numbî_vÆue
));

201 
	gTOKEN_LEFT_PAREN
:

203 
P¨£Tªe
 
subåì
;

204 if(!
ªcursive_∑r£
(
Àxî
, 
subåì
, 
Ál£
)Ë 
	gÁl£
;

205 
	gåì
.
	gbønches
.
ö£π
(
°d
::
make_∑ú
(
«me
, 
subåì
));

208 
	gTOKEN_RIGHT_PAREN
:

209 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹á vÆuêf‹ ["<<
«me
<<"] buàhô closögÖ¨íthesis"<<°d::
ídl
;

210  
	gÁl£
;

211 
	gTOKEN_LEFT_BRACKET
:

213 
Aºay1d
 
v
;

214 if(!
∑r£_ve˘‹
(
Àxî
, 
v
)Ë 
	gÁl£
;

215 
	gåì
.
	gve˘‹s
.
ö£π
(
°d
::
make_∑ú
(
«me
, 
v
));

218 
	gTOKEN_RIGHT_BRACKET
:

219 
°d
::
˚º
<<"P¨£Éº‹:Üookög f‹á vÆuêf‹ ["<<
«me
<<"] buàhô closög bøckë"<<°d::
ídl
;

220  
	gÁl£
;

228 
boﬁ
 
	$∑r£_°ªam
(
°d
::
i°ªam
& 
öput
, 
P¨£Tªe
& 
åì
)

230 
Lexî
 
	`Àxî
(
öput
);

231  
	`ªcursive_∑r£
(
Àxî
, 
åì
, 
åue
);

232 
	}
}

	@talpa/newparser.h

1 #i‚de‡
NEWPARSER_H


2 
	#NEWPARSER_H


	)

4 
	~<io°ªam
>

5 
	~<m≠
>

6 
	~<°rög
>

7 
	~<¨øy1.h
>

8 
	~<vec.h
>

10 
	sP¨£Tªe


12 
P¨£Tªe
() :

13 
bønches
(),

14 
numbîs
(),

15 
°rögs
(),

16 
ve˘‹s
()

19 
	m°d
::
m≠
<
°d
::
°rög
, 
	mP¨£Tªe
> 
	mbønches
;

20 
	m°d
::
m≠
<
°d
::
°rög
, > 
	mnumbîs
;

21 
	m°d
::
m≠
<
°d
::
°rög
, std::°rög> 
°rögs
;

22 
	m°d
::
m≠
<
°d
::
°rög
, 
	mAºay1d
> 
	mve˘‹s
;

24 c⁄° 
P¨£Tªe
* 
gë_bønch
(c⁄° 
°d
::
°rög
& 
«me
) const;

25 
boﬁ
 
gë_numbî
(c⁄° 
°d
::
°rög
& 
«me
, & 
ªsu…
) const;

26 
boﬁ
 
gë_öt
(c⁄° 
°d
::
°rög
& 
«me
, & 
ªsu…
) const;

27 
boﬁ
 
gë_°rög
(c⁄° 
°d
::
°rög
& 
«me
, std::°rög& 
ªsu…
) const;

28 c⁄° 
Aºay1d
* 
gë_ve˘‹
(c⁄° 
°d
::
°rög
& 
«me
) const;

29 
boﬁ
 
gë_vec2d
(c⁄° 
°d
::
°rög
& 
«me
, 
Vec2d
& 
v
) const;

30 
boﬁ
 
gë_vec3d
(c⁄° 
°d
::
°rög
& 
«me
, 
Vec3d
& 
v
) const;

32 
boﬁ
 
ªmove_fú°_m©chög_bønch
–c⁄° 
°d
::
°rög
& 
«me
 );

36 
	g°d
::
o°ªam
& 
›î©‹
<<(
°d
::o°ªam& 
out
, c⁄° 
	gP¨£Tªe
& 
	gåì
);

39 
boﬁ
 
∑r£_°ªam
(
°d
::
i°ªam
& 
öput
, 
P¨£Tªe
& 
åì
);

	@talpa/scriptinit.cpp

11 
	~<s¸ùtöô.h
>

13 
	~<írightdrivî.h
>

14 
	~<Á˚off.h
>

15 
	~<f°ªam
>

16 
	~<geomëryöô.h
>

17 
	~<iomesh.h
>

18 
	~<móncurv©uª.h
>

19 
	~<n‹mÆdrivî.h
>

20 
	~<sisccuænoi£drivî.h
>

21 
	~<subdivisi⁄scheme.h
>

23 #ifde‡
_MSC_VER


26 
	#¢¥ötf
 
_¢¥ötf


	)

30 
	gS¸ùtInô
::
	$∑r£_sur·øck_∑ømëîs
–c⁄° 
P¨£Tªe
& 
sur·øck_bønch
 )

33 
u£_‰a˘i⁄
, 
≥rf‹m_im¥ovemít
, 
t›ﬁogy_ch™ges
, 
cﬁlisi⁄_ß„ty
, 
n⁄_m™ifﬁd
;

34 
°d
::
°rög
 
subdivisi⁄_scheme
;

36 
sur·øck_bønch
.
	`gë_öt
–"u£_‰a˘i⁄", 
u£_‰a˘i⁄
 );

37 
sur·øck_bønch
.
	`gë_numbî
–"mö_edge_Àngth", 
surf_åack_∑øms
.
m_mö_edge_Àngth
 );

38 
sur·øck_bønch
.
	`gë_numbî
–"max_edge_Àngth", 
surf_åack_∑øms
.
m_max_edge_Àngth
 );

39 
sur·øck_bønch
.
	`gë_numbî
–"max_vﬁume_ch™ge", 
surf_åack_∑øms
.
m_max_vﬁume_ch™ge
 );

40 
sur·øck_bønch
.
	`gë_numbî
–"mö_åüngÀ_™gÀ", 
surf_åack_∑øms
.
m_mö_åüngÀ_™gÀ
 );

41 
sur·øck_bønch
.
	`gë_numbî
–"max_åüngÀ_™gÀ", 
surf_åack_∑øms
.
m_max_åüngÀ_™gÀ
 );

42 
sur·øck_bønch
.
	`gë_numbî
–"mö_åüngÀ_¨ó", 
surf_åack_∑øms
.
m_mö_åüngÀ_¨ó
 );

44 
u£_curv©uª_whí_•lôtög
;

45 i‡–
sur·øck_bønch
.
	`gë_öt
–"u£_curv©uª_whí_•lôtög", 
u£_curv©uª_whí_•lôtög
 ) )

47 
surf_åack_∑øms
.
m_u£_curv©uª_whí_•lôtög
 = ( 
u£_curv©uª_whí_•lôtög
 != 0 );

50 
u£_curv©uª_whí_cﬁœpsög
;

51 i‡–
sur·øck_bønch
.
	`gë_öt
–"u£_curv©uª_whí_cﬁœpsög", 
u£_curv©uª_whí_cﬁœpsög
 ) )

53 
surf_åack_∑øms
.
m_u£_curv©uª_whí_cﬁœpsög
 = ( 
u£_curv©uª_whí_cﬁœpsög
 != 0 );

56 
sur·øck_bønch
.
	`gë_numbî
–"mö_curv©uª_mu…ùlõr", 
surf_åack_∑øms
.
m_mö_curv©uª_mu…ùlõr
 );

57 
sur·øck_bønch
.
	`gë_numbî
–"max_curv©uª_mu…ùlõr", 
surf_åack_∑øms
.
m_max_curv©uª_mu…ùlõr
 );

58 
sur·øck_bønch
.
	`gë_numbî
–"mîge_¥oximôy", 
surf_åack_∑øms
.
m_mîge_¥oximôy_ïsû⁄
 );

59 
sur·øck_bønch
.
	`gë_numbî
–"ªpulsi⁄_¥oximôy", 
surf_åack_∑øms
.
m_¥oximôy_ïsû⁄
 );

60 
sur·øck_bønch
.
	`gë_numbî
–"‰i˘i⁄_c€fficõ¡", 
surf_åack_∑øms
.
m_‰i˘i⁄_c€fficõ¡
 );

61 
sur·øck_bønch
.
	`gë_öt
–"≥rf‹m_im¥ovemít", 
≥rf‹m_im¥ovemít
 );

62 
sur·øck_bønch
.
	`gë_öt
–"Ælow_t›ﬁogy_ch™ges", 
t›ﬁogy_ch™ges
 );

63 
sur·øck_bønch
.
	`gë_öt
–"cﬁlisi⁄_ß„ty", 
cﬁlisi⁄_ß„ty
 );

64 
sur·øck_bønch
.
	`gë_°rög
–"subdivisi⁄_scheme", 
subdivisi⁄_scheme
 );

66 
surf_åack_∑øms
.
m_u£_‰a˘i⁄
 = ( 
u£_‰a˘i⁄
 != 0 );

67 
surf_åack_∑øms
.
m_≥rf‹m_im¥ovemít
 = (
≥rf‹m_im¥ovemít
 != 0);

68 
surf_åack_∑øms
.
m_Ælow_t›ﬁogy_ch™ges
 = (
t›ﬁogy_ch™ges
 != 0);

69 
surf_åack_∑øms
.
m_cﬁlisi⁄_ß„ty
 = (
cﬁlisi⁄_ß„ty
 != 0);

71 i‡–
sur·øck_bønch
.
	`gë_öt
–"Ælow_n⁄_m™ifﬁd", 
n⁄_m™ifﬁd
 ) )

73 
surf_åack_∑øms
.
m_Ælow_n⁄_m™ifﬁd
 = (
n⁄_m™ifﬁd
 != 0);

76 i‡–
	`°rcmp
–
subdivisi⁄_scheme
.
	`c_°r
(), "butterfly" ) == 0 )

78 
surf_åack_∑øms
.
m_subdivisi⁄_scheme
 = 
√w
 
	`BuâîÊyScheme
();

82 
surf_åack_∑øms
.
m_subdivisi⁄_scheme
 = 
√w
 
	`MidpoötScheme
();

85 
Ælow_vîãx_movemít
;

86 i‡–
sur·øck_bønch
.
	`gë_öt
–"Ælow_vîãx_movemít", 
Ælow_vîãx_movemít
 ) )

88 
surf_åack_∑øms
.
m_Ælow_vîãx_movemít
 = ( 
Ælow_vîãx_movemít
 != 0 );

91 
	}
}

95 
	gS¸ùtInô
::
	$∑r£_Á˚off
–c⁄° 
P¨£Tªe
& 
Á˚€ff_sim_bønch
 )

97 
•ìd
;

98 
Á˚€ff_sim_bønch
.
	`gë_numbî
–"•ìd", 
•ìd
 );

99 
drivî
 = 
√w
 
	`Fa˚OffDrivî
–
•ìd
, 
	`Vec3d
( -0.25, 0.0, 0.0 ), Vec3d( 0.25, 0.0, 0.0 ), 0.4, 0.2 );

100 
	}
}

104 
	gS¸ùtInô
::
	$∑r£_n‹mÆ
–c⁄° 
P¨£Tªe
& 
n‹mÆ_sim_bønch
 )

106 
•ìd
;

107 
n‹mÆ_sim_bønch
.
	`gë_numbî
–"•ìd", 
•ìd
 );

108 
drivî
 = 
√w
 
	`N‹mÆDrivî
–
•ìd
, 
	`Vec3d
( -0.25, 0.0, 0.0 ), Vec3d( 0.25, 0.0, 0.0 ), 0.4, 0.2 );

109 
	}
}

113 
	gS¸ùtInô
::
	$∑r£_món_curv©uª
–c⁄° 
P¨£Tªe
& 
món_curv©uª_sim_bønch
 )

115 
•ìd
;

116 
món_curv©uª_sim_bønch
.
	`gë_numbî
–"•ìd", 
•ìd
 );

118 
°d
::
°rög
 
ground_åuth_fûe
;

119 
món_curv©uª_sim_bønch
.
	`gë_°rög
–"ground_åuth_fûe", 
ground_åuth_fûe
 );

121 
Aºay3d
 
£thün_föÆ
;

122 
	`ªad_sig√d_di°™˚
–
ground_åuth_fûe
.
	`c_°r
(), 
£thün_föÆ
 );

124 
Vec3d
 
phi_domaö_low
;

125 
món_curv©uª_sim_bønch
.
	`gë_vec3d
–"phi_domaö_low", 
phi_domaö_low
 );

127 
phi_domaö_dx
;

128 
món_curv©uª_sim_bønch
.
	`gë_numbî
–"phi_domaö_dx", 
phi_domaö_dx
 );

130 
drivî
 = 
√w
 
	`MónCurv©uªDrivî
–
•ìd
, 
£thün_föÆ
, 
phi_domaö_low
, 
phi_domaö_dx
 );

131 
	}
}

135 
	gS¸ùtInô
::
	$∑r£_sisc_cuæ_noi£
–c⁄° 
P¨£Tªe
& )

137 
drivî
 = 
√w
 
	`SISCCuæNoi£Drivî
( );

138 
	}
}

141 
	gS¸ùtInô
::
	$∑r£_íright
–c⁄° 
P¨£Tªe
& )

143 
drivî
 = 
√w
 
	`EƒightDrivî
( );

144 
	}
}

148 
	gS¸ùtInô
::
	$∑r£_ˇmîa
–c⁄° 
P¨£Tªe
& 
ˇmîa_bønch
 )

150 
ˇmîa_bønch
.
	`gë_vec3d
–"èrgë", 
ˇmîa_èrgë
 );

151 
ˇmîa_bønch
.
	`gë_numbî
–"di°™˚", 
ˇmîa_di°™˚
 );

152 
ˇmîa_bønch
.
	`gë_numbî
–"hódög", 
ˇmîa_hódög
 );

153 
ˇmîa_bønch
.
	`gë_numbî
–"pôch", 
ˇmîa_pôch
 );

154 
	}
}

158 
	gS¸ùtInô
::
	$∑r£_shìt
–c⁄° 
P¨£Tªe
& 
shìt_bønch
 )

160 
Vec3d
 
lowî_c‹√r
;

161 
shìt_bønch
.
	`gë_vec3d
–"c‹√r", 
lowî_c‹√r
 );

163 
shìt_dx
;

164 
shìt_bønch
.
	`gë_numbî
–"dx", 
shìt_dx
 );

166 
shìt_ni
, 
shìt_nj
;

167 
shìt_bønch
.
	`gë_öt
–"ni", 
shìt_ni
 );

168 
shìt_bønch
.
	`gë_öt
–"nj", 
shìt_nj
 );

170 
°d
::
ve˘‹
<
Vec3d
> 
shìt_vîts
;

171 
°d
::
ve˘‹
<
Vec3°
> 
shìt_åis
;

173 
	`¸óã_shìt
–
shìt_vîts
, 
shìt_åis
, 
lowî_c‹√r
, 
shìt_dx
, 
shìt_ni
, 
shìt_nj
 );

176 
Vec3d
 
rŸ©e_axis
;

177 
rŸ©e_ødüns
;

178 i‡–
shìt_bønch
.
	`gë_vec3d
–"rŸ©e_axis", 
rŸ©e_axis
 ) )

180 i‡–
shìt_bønch
.
	`gë_numbî
–"rŸ©e_ødüns", 
rŸ©e_ødüns
 ) )

182 
Vec3d
 
	`˚¡ª
(0,0,0);

183  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

185 
˚¡ª
 +
shìt_vîts
[
i
];

187 
˚¡ª
 /
°©ic_ˇ°
<>–
shìt_vîts
.
	`size
() );

189  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

191 
shìt_vîts
[
i
] -
˚¡ª
;

194  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

196 
shìt_vîts
[
i
] = 
	`rŸ©e
–shìt_vîts[i], 
rŸ©e_ødüns
, 
rŸ©e_axis
 );

197 
shìt_vîts
[
i
] +
˚¡ª
;

204 
is_sﬁid
 = 0;

205 
shìt_bønch
.
	`gë_öt
–"is_sﬁid", 
is_sﬁid
 );

207 
°d
::
ve˘‹
<> 
shìt_mas£s
;

209 i‡–
is_sﬁid
 )

211 
shìt_mas£s
.
	`ªsize
–
shìt_vîts
.
	`size
(), 
°d
::
numîic_limôs
<>::
	`öföôy
() );

215 
shìt_mas£s
.
	`ªsize
–
shìt_vîts
.
	`size
(), 1.0 );

218 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
shìt_åis
, 
shìt_vîts
, 
shìt_mas£s
 );

220 
	}
}

225 
	gS¸ùtInô
::
	$∑r£_curved_shìt
–c⁄° 
P¨£Tªe
& 
shìt_bønch
 )

227 
Vec3d
 
lowî_c‹√r
;

228 
shìt_bønch
.
	`gë_vec3d
–"c‹√r", 
lowî_c‹√r
 );

230 
shìt_dx
;

231 
shìt_bønch
.
	`gë_numbî
–"dx", 
shìt_dx
 );

233 
shìt_ni
, 
shìt_nj
;

234 
shìt_bønch
.
	`gë_öt
–"ni", 
shìt_ni
 );

235 
shìt_bønch
.
	`gë_öt
–"nj", 
shìt_nj
 );

237 
°d
::
ve˘‹
<
Vec3d
> 
shìt_vîts
;

238 
°d
::
ve˘‹
<
Vec3°
> 
shìt_åis
;

240 
	`¸óã_curved_shìt
–
shìt_vîts
, 
shìt_åis
, 
lowî_c‹√r
, 
shìt_dx
, 
shìt_ni
, 
shìt_nj
 );

242 
Vec3d
 
rŸ©e_axis
;

243 
rŸ©e_ødüns
;

244 i‡–
shìt_bønch
.
	`gë_vec3d
–"rŸ©e_axis", 
rŸ©e_axis
 ) )

246 i‡–
shìt_bønch
.
	`gë_numbî
–"rŸ©e_ødüns", 
rŸ©e_ødüns
 ) )

248 
Vec3d
 
	`˚¡ª
(0,0,0);

249  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

251 
˚¡ª
 +
shìt_vîts
[
i
];

253 
˚¡ª
 /
°©ic_ˇ°
<>–
shìt_vîts
.
	`size
() );

255  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

257 
shìt_vîts
[
i
] -
˚¡ª
;

260  
i
 = 0; i < 
shìt_vîts
.
	`size
(); ++i )

262 
shìt_vîts
[
i
] = 
	`rŸ©e
–shìt_vîts[i], 
rŸ©e_ødüns
, 
rŸ©e_axis
 );

263 
shìt_vîts
[
i
] +
˚¡ª
;

270 
°d
::
ve˘‹
<> 
	`shìt_mas£s
–
shìt_vîts
.
	`size
(), 1.0 );

272 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
shìt_åis
, 
shìt_vîts
, 
shìt_mas£s
 );

274 
	}
}

278 
	gS¸ùtInô
::
	$∑r£_•hîe
–c⁄° 
P¨£Tªe
& 
•hîe_bønch
 )

280 
Vec3d
 
•hîe_˚¡î
;

281 
•hîe_bønch
.
	`gë_vec3d
–"•hîe_˚¡î", 
•hîe_˚¡î
 );

282 
•hîe_ødius
;

283 
•hîe_bønch
.
	`gë_numbî
–"•hîe_ødius", 
•hîe_ødius
 );

285 
dx
;

286 
•hîe_bønch
.
	`gë_numbî
–"•hîe_dx", 
dx
 );

288 
is_sﬁid
 = 0;

289 
•hîe_bønch
.
	`gë_öt
–"is_sﬁid", 
is_sﬁid
 );

291 
°d
::
ve˘‹
<
Vec3d
> 
•hîe_vîti˚s
;

292 
°d
::
ve˘‹
<
Vec3°
> 
•hîe_åüngÀs
;

294 
	`¸óã_•hîe
–
•hîe_˚¡î
, 
•hîe_ødius
, 
dx
, 
•hîe_vîti˚s
, 
•hîe_åüngÀs
 );

296 
°d
::
ve˘‹
<
Vec3d
> 
	`•hîe_vñocôõs
–
•hîe_vîti˚s
.
	`size
(), 
	`Vec3d
(0) );

298 
°d
::
ve˘‹
<> 
•hîe_mas£s
;

299 i‡–
is_sﬁid
 == 0 )

301 
•hîe_mas£s
.
	`ªsize
–
•hîe_vîti˚s
.
	`size
(), 1.0 );

305 
•hîe_mas£s
.
	`ªsize
–
•hîe_vîti˚s
.
	`size
(), 
°d
::
numîic_limôs
<>::
	`öföôy
() );

308 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
•hîe_åüngÀs
, 
•hîe_vîti˚s
, 
•hîe_mas£s
 );

309 
	}
}

314 
	gS¸ùtInô
::
	$∑r£_dumbbñl
–c⁄° 
P¨£Tªe
& 
dumbbñl_bønch
 )

316 
domaö_dx
;

317 
dumbbñl_bønch
.
	`gë_numbî
–"domaö_dx", 
domaö_dx
 );

319 
Vec3d
 
˚¡ª_a
;

320 
dumbbñl_bønch
.
	`gë_vec3d
–"˚¡ª_a", 
˚¡ª_a
 );

322 
Vec3d
 
˚¡ª_b
;

323 
dumbbñl_bønch
.
	`gë_vec3d
–"˚¡ª_b", 
˚¡ª_b
 );

325 
•hîe_ødius
;

326 
dumbbñl_bønch
.
	`gë_numbî
–"•hîe_ødius", 
•hîe_ødius
 );

328 
h™dÀ_width
;

329 
dumbbñl_bønch
.
	`gë_numbî
–"h™dÀ_width", 
h™dÀ_width
 );

331 
Vec3d
 
domaö_low
 = 
	`mö_uni⁄
–
˚¡ª_a
, 
˚¡ª_b
 ) - 2.0 * 
	`Vec3d
–
•hîe_ødius
 );

332 
Vec3d
 
domaö_high
 = 
	`max_uni⁄
–
˚¡ª_a
, 
˚¡ª_b
 ) + 2.0 * 
	`Vec3d
–
•hîe_ødius
 );

334 
Aºay3d
 
phi
;

335 
	`¸óã_dumbbñl_sig√d_di°™˚
–
˚¡ª_a
, 
˚¡ª_b
, 
•hîe_ødius
, 
h™dÀ_width
, 
domaö_dx
, 
domaö_low
, 
domaö_high
, 
phi
 );

337 
°d
::
ve˘‹
<
Vec3°
> 
√w_åis
;

338 
°d
::
ve˘‹
<
Vec3d
> 
√w_vîts
;

339 
	`c⁄tour_phi
–
domaö_low
, 
domaö_dx
, 
phi
, 
√w_åis
, 
√w_vîts
 );

340 
	`¥oje˘_to_exa˘_dumbbñl
–
√w_vîts
, 
˚¡ª_a
, 
˚¡ª_b
, 
•hîe_ødius
, 
h™dÀ_width
 );

342 
°d
::
ve˘‹
<> 
	`√w_mas£s
–
√w_vîts
.
	`size
(), 1.0 );

343 
°d
::
ve˘‹
<
Vec3d
> 
	`√w_vñocôõs
–
√w_vîts
.
	`size
(), 
	`Vec3d
(0,0,0) );

344 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
√w_åis
, 
√w_vîts
, 
√w_mas£s
 );

345 
	}
}

350 
	gS¸ùtInô
::
	$∑r£_s¸ùt
–c⁄° * 
fûíame
 )

353 
°d
::
if°ªam
 
	`fûe°ªam
–
fûíame
 );

354 i‡–!
fûe°ªam
.
	`good
() )

356 
°d
::
˚º
 << "CouldÇŸ o≥¿s¸ùàfûe" << std::
ídl
;

357 
	`exô
(1);

360 
°d
::
cout
 << "s¸ùàfûe: " << 
fûíame
 << std::
ídl
;

362 
P¨£Tªe
 
åì
;

363 
	`∑r£_°ªam
–
fûe°ªam
, 
åì
 );

370 
boﬁ
 
ok
 = 
åì
.
	`gë_numbî
–"‰ame_dt", 
‰ame_dt
 );

371 
	`as£π
–
ok
 );

373 
num_sub°ïs
;

374 
boﬁ
 
sub°ïs_•ecifõd
 = 
åì
.
	`gë_öt
–"num_sub°ïs", 
num_sub°ïs
 );

375 i‡–
sub°ïs_•ecifõd
 )

377 
sim_dt
 = 
‰ame_dt
 / (Ë
num_sub°ïs
;

380 
ªad_sim_dt
;

381 i‡–
åì
.
	`gë_numbî
–"sim_dt", 
ªad_sim_dt
 ) )

383 i‡–
sub°ïs_•ecifõd
 )

385 
°d
::
˚º
 << "WARNING: BŸh sim_dà™dÇum_sub°ï†•ecifõd i¿c⁄fig s¸ùt. Goög wôh sim_dt." << std::
ídl
;

388 
sim_dt
 = 
ªad_sim_dt
;

391 
åì
.
	`gë_numbî
–"íd_sim_t", 
íd_sim_t
 );

393 
cuº_t_•ecifõd
 = 
åì
.
	`gë_numbî
–"cuº_t", 
cuº_t
 );

400 i‡–
åì
.
	`gë_°rög
–"ouçut_∑th", 
ouçut_∑th
 ) )

402 
ouçut_∑th_is_ªœtive
 = 
Ál£
;

404 i‡–
åì
.
	`gë_°rög
–"ªœtive_ouçut_∑th", 
ouçut_∑th
 ) )

406 
ouçut_∑th_is_ªœtive
 = 
åue
;

411 
ouçut_∑th_is_ªœtive
 = 
Ál£
;

412 
ouçut_∑th
 = 
°d
::
	`°rög
( "./" );

419 c⁄° 
P¨£Tªe
* 
ˇmîa_bønch
 = 
åì
.
	`gë_bønch
( "camera" );

420 
	`∑r£_ˇmîa
–*
ˇmîa_bønch
 );

428 
curved_shìt_n
 = 0;

429 
curved_shìt_«me
[256];

430 
	`¢¥ötf
–
curved_shìt_«me
, 256, "curved_shìt%d", 
curved_shìt_n
 );

431 c⁄° 
P¨£Tªe
* 
curved_shìt_bønch
 = 
åì
.
	`gë_bønch
–
curved_shìt_«me
 );

433  
curved_shìt_bønch
 !
NULL
 )

435 
	`∑r£_curved_shìt
–*
curved_shìt_bønch
 );

436 
curved_shìt_bønch
 = 
NULL
;

437 ++
curved_shìt_n
;

438 
	`¢¥ötf
–
curved_shìt_«me
, 256, "curved_shìt%d", 
curved_shìt_n
 );

439 
curved_shìt_bønch
 = 
åì
.
	`gë_bønch
–
curved_shìt_«me
 );

444 
shìt_n
 = 0;

445 
shìt_«me
[256];

446 
	`¢¥ötf
–
shìt_«me
, 256, "shìt%d", 
shìt_n
 );

447 c⁄° 
P¨£Tªe
* 
shìt_bønch
 = 
åì
.
	`gë_bønch
–
shìt_«me
 );

449  
shìt_bønch
 !
NULL
 )

451 
	`∑r£_shìt
–*
shìt_bønch
 );

452 
shìt_bønch
 = 
NULL
;

453 ++
shìt_n
;

454 
	`¢¥ötf
–
shìt_«me
, 256, "shìt%d", 
shìt_n
 );

455 
shìt_bønch
 = 
åì
.
	`gë_bønch
–
shìt_«me
 );

460 
•hîe_n
 = 0;

461 
•hîe_«me
[256];

462 
	`¢¥ötf
–
•hîe_«me
, 256, "•hîe%d", 
•hîe_n
 );

463 c⁄° 
P¨£Tªe
* 
•hîe_bønch
 = 
åì
.
	`gë_bønch
–
•hîe_«me
 );

465  
•hîe_bønch
 !
NULL
 )

467 
	`∑r£_•hîe
–*
•hîe_bønch
 );

468 
•hîe_bønch
 = 
NULL
;

469 ++
•hîe_n
;

470 
	`¢¥ötf
–
•hîe_«me
, 256, "•hîe%d", 
•hîe_n
 );

471 
•hîe_bønch
 = 
åì
.
	`gë_bønch
–
•hîe_«me
 );

476 c⁄° 
P¨£Tªe
* 
•hîe_bønch
 = 
åì
.
	`gë_bønch
( "sphere" );

477 i‡–
•hîe_bønch
 !
NULL
 )

479 
	`∑r£_•hîe
–*
•hîe_bønch
 );

482 c⁄° 
P¨£Tªe
* 
dumbbñl_bønch
 = 
åì
.
	`gë_bønch
( "dumbbell" );

483 i‡–
dumbbñl_bønch
 !
NULL
 )

485 
	`∑r£_dumbbñl
–*
dumbbñl_bønch
 );

488 c⁄° 
P¨£Tªe
* 
åimesh_bønch
 = 
åì
.
	`gë_bønch
( "trimesh" );

489 i‡–
åimesh_bønch
 !
NULL
 )

491 
	`¥ötf
("FoundÅrimesh branch\n");

493 
°d
::
°rög
 
mesh∑th
;

494 
åimesh_bønch
->
	`gë_°rög
("fûï©h", 
mesh∑th
);

495 
	`¥ötf
("GŸÖ©h: %s\n", 
mesh∑th
.
	`c_°r
());

497 
N⁄De°ru˘iveTriMesh
 
åimesh
;

499 
	`¥ötf
("Reading file\n");

501 
°d
::
ve˘‹
<
Vec3d
> 
öput_vîti˚s
;

502 
°d
::
ve˘‹
<> 
ö_mas£s
;

503 
	`ªad_bö¨y_fûe
–
åimesh
, 
öput_vîti˚s
, 
ö_mas£s
, 
cuº_t
, 
mesh∑th
.
	`c_°r
() );

504 
cuº_t_•ecifõd
 = 
åue
;

506 
is_sﬁid
 = 0;

507 i‡–
åimesh_bønch
->
	`gë_öt
–"is_sﬁid", 
is_sﬁid
 ) )

509 
ö_mas£s
.
	`˛ór
();

510 i‡–
is_sﬁid
 )

512 
ö_mas£s
.
	`ªsize
–
öput_vîti˚s
.
	`size
(), 
°d
::
numîic_limôs
<>::
	`öföôy
() );

516 
ö_mas£s
.
	`ªsize
–
öput_vîti˚s
.
	`size
(), 1.0 );

520 
Vec3d
 
å™¶©e
;

521 i‡–
åimesh_bønch
->
	`gë_vec3d
("å™¶©e", 
å™¶©e
) )

523  
size_t
 
i
 = 0; i < 
öput_vîti˚s
.
	`size
(); ++i )

525 
öput_vîti˚s
[
i
] +
å™¶©e
;

529 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
åimesh
.
	`gë_åüngÀs
(), 
öput_vîti˚s
, 
ö_mas£s
 );

531 
	`¥ötf
("lﬂded fûê%s", 
mesh∑th
.
	`c_°r
());

535 c⁄° 
P¨£Tªe
* 
obj_bønch
 = 
åì
.
	`gë_bønch
( "objfile" );

536 i‡–
obj_bønch
 !
NULL
 )

538 
	`¥ötf
("Found obj branch\n");

540 
°d
::
°rög
 
mesh∑th
;

541 
obj_bønch
->
	`gë_°rög
("fûï©h", 
mesh∑th
);

542 
	`¥ötf
("GŸÖ©h: %s\n", 
mesh∑th
.
	`c_°r
());

544 
N⁄De°ru˘iveTriMesh
 
åimesh
;

546 
	`¥ötf
("Reading file\n");

548 
°d
::
ve˘‹
<
Vec3d
> 
obj_vîti˚s
;

549 
	`ªad_objfûe
–
åimesh
, 
obj_vîti˚s
, 
mesh∑th
.
	`c_°r
() );

551 
°d
::
ve˘‹
<
Vec3°
> 
obj_åüngÀs
 = 
åimesh
.
	`gë_åüngÀs
();

553 
Vec3d
 
å™¶©e
;

554 i‡–
obj_bønch
->
	`gë_vec3d
("å™¶©e", 
å™¶©e
) )

556  
size_t
 
i
 = 0; i < 
obj_vîti˚s
.
	`size
(); ++i )

558 
obj_vîti˚s
[
i
] +
å™¶©e
;

562 
°d
::
ve˘‹
<> 
	`obj_mas£s
(0);

563 
is_sﬁid
 = 0;

564 
obj_bønch
->
	`gë_öt
–"is_sﬁid", 
is_sﬁid
 );

566 i‡–
is_sﬁid
 )

568 
obj_mas£s
.
	`ªsize
–
obj_vîti˚s
.
	`size
(), 
°d
::
numîic_limôs
<>::
	`öföôy
() );

572 
obj_mas£s
.
	`ªsize
–
obj_vîti˚s
.
	`size
(), 1.0 );

575 
	`≠≥nd_mesh
–
åüngÀs
, 
vîti˚s
, 
mas£s
, 
obj_åüngÀs
, 
obj_vîti˚s
, 
obj_mas£s
 );

582 c⁄° 
P¨£Tªe
* 
sur·øck_bønch
 = 
åì
.
	`gë_bønch
( "surftrack_parameters" );

583 
	`∑r£_sur·øck_∑ømëîs
–*
sur·øck_bønch
 );

590 c⁄° 
P¨£Tªe
* 
Á˚€ff_sim_bønch
 = 
åì
.
	`gë_bønch
( "faceoff_simulation" );

591 i‡–
Á˚€ff_sim_bønch
 !
NULL
 )

593 
	`∑r£_Á˚off
–*
Á˚€ff_sim_bønch
 );

596 c⁄° 
P¨£Tªe
* 
n‹mÆ_sim_bønch
 = 
åì
.
	`gë_bønch
( "normal_simulation" );

597 i‡–
n‹mÆ_sim_bønch
 !
NULL
 )

599 
	`∑r£_n‹mÆ
–*
n‹mÆ_sim_bønch
 );

602 c⁄° 
P¨£Tªe
* 
món_curv©uª_sim_bønch
 = 
åì
.
	`gë_bønch
( "mean_curvature_simulation" );

603 i‡–
món_curv©uª_sim_bønch
 !
NULL
 )

605 
	`∑r£_món_curv©uª
–*
món_curv©uª_sim_bønch
 );

608 c⁄° 
P¨£Tªe
* 
sisc_cuæ_noi£_sim_bønch
 = 
åì
.
	`gë_bønch
( "sisc_curl_noise_simulation" );

609 i‡–
sisc_cuæ_noi£_sim_bønch
 !
NULL
 )

611 
	`∑r£_sisc_cuæ_noi£
–*
sisc_cuæ_noi£_sim_bønch
 );

614 c⁄° 
P¨£Tªe
* 
íright_bønch
 = 
åì
.
	`gë_bønch
( "enright_simulation" );

615 i‡–
íright_bønch
 !
NULL
 )

617 
	`∑r£_íright
–*
íright_bønch
 );

620 
	}
}

	@talpa/scriptinit.h

10 #i‚de‡
EL_TOPO_SCRIPTINIT_H


11 
	#EL_TOPO_SCRIPTINIT_H


	)

13 
	~<√w∑r£r.h
>

14 
	~<sur·øck.h
>

15 
	~<vec.h
>

16 
	~<ve˘‹
>

18 
˛ass
 
	gMeshDrivî
;

20 ˛as†
	cS¸ùtInô


23 
	mpublic
:

25 
	$S¸ùtInô
() :

26 
	`ouçut_∑th
(),

27 
	`ouçut_∑th_is_ªœtive
(
Ál£
),

28 
	`‰ame_dt
–
UNINITIALIZED_DOUBLE
 ),

29 
	`sim_dt
–
UNINITIALIZED_DOUBLE
 ),

30 
	`íd_sim_t
–
UNINITIALIZED_DOUBLE
 ),

31 
	`cuº_t_•ecifõd
(
Ál£
),

32 
	`cuº_t
(0.0),

33 
	`vîti˚s
(),

34 
	`åüngÀs
(),

35 
	`mas£s
(),

36 
	`surf_åack_∑øms
(),

37 
	`drivî
–
NULL
 ),

38 
	`ˇmîa_èrgë
–
UNINITIALIZED_DOUBLE
 ),

39 
	`ˇmîa_di°™˚
–
UNINITIALIZED_DOUBLE
 ),

40 
	`ˇmîa_hódög
–
UNINITIALIZED_DOUBLE
 ),

41 
	$ˇmîa_pôch
–
UNINITIALIZED_DOUBLE
 )

44 
	`∑r£_s¸ùt
–c⁄° * 
fûíame
 );

46 
¥iv©e
:

48 
	`S¸ùtInô
–c⁄° 
S¸ùtInô
& 
Ÿhî
 );

49 c⁄° 
S¸ùtInô
& 
›î©‹
=–c⁄° S¸ùtInô& 
Ÿhî
 );

51 
	`∑r£_sur·øck_∑ømëîs
–c⁄° 
P¨£Tªe
& 
sur·øck_bønch
 );

56 
	`∑r£_Á˚off
–c⁄° 
P¨£Tªe
& 
Á˚€ff_sim_bønch
 );

57 
	`∑r£_n‹mÆ
–c⁄° 
P¨£Tªe
& 
n‹mÆ_sim_bønch
 );

58 
	`∑r£_món_curv©uª
–c⁄° 
P¨£Tªe
& 
món_curv©uª_sim_bønch
 );

59 
	`∑r£_sisc_cuæ_noi£
–c⁄° 
P¨£Tªe
& 
sisc_cuæ_noi£_sim_bønch
 );

60 
	`∑r£_íright
–c⁄° 
P¨£Tªe
& 
íright_sim_bønch
 );

62 
	`∑r£_ˇmîa
–c⁄° 
P¨£Tªe
& 
ˇmîa_bønch
 );

67 
	`∑r£_shìt
–c⁄° 
P¨£Tªe
& 
shìt_bønch
 );

68 
	`∑r£_curved_shìt
–c⁄° 
P¨£Tªe
& 
curved_shìt_bønch
 );

69 
	`∑r£_•hîe
–c⁄° 
P¨£Tªe
& 
•hîe_bønch
 );

70 
	`∑r£_dumbbñl
–c⁄° 
P¨£Tªe
& 
dumbbñl_bønch
 );

72 
public
:

78 
°d
::
°rög
 
ouçut_∑th
;

79 
boﬁ
 
ouçut_∑th_is_ªœtive
;

81 
‰ame_dt
;

82 
sim_dt
;

83 
íd_sim_t
;

85 
boﬁ
 
cuº_t_•ecifõd
;

86 
cuº_t
;

91 
°d
::
ve˘‹
<
Vec3d
> 
vîti˚s
;

92 
°d
::
ve˘‹
<
Vec3°
> 
åüngÀs
;

93 
°d
::
ve˘‹
<> 
mas£s
;

99 
SurfTøckInôüliz©i⁄P¨amëîs
 
surf_åack_∑øms
;

104 
MeshDrivî
* 
drivî
;

109 
Vec3d
 
ˇmîa_èrgë
;

110 
ˇmîa_di°™˚
, 
ˇmîa_hódög
, 
ˇmîa_pôch
;

112 
	}
};

	@talpa/simulation.h

10 #i‚de‡
EL_TOPO_SIMULATION_H


11 
	#EL_TOPO_SIMULATION_H


	)

17 
	~<›ti⁄s.h
>

33 ˛as†
	cSimuœti⁄


35 
	mpublic
:

39 
m_dt
;

43 
	mm_max_t
;

47 
	mm_cuº_t
;

51 
boﬁ
 
	mm_ru¬ög
;

55 
boﬁ
 
	mm_cuºíéy_adv™cög_simuœti⁄
;

60 
	$Simuœti⁄
–
ö_dt
, 
ö_max_t
 = 
BIG_DOUBLE
 ) :

61 
	`m_dt
(
ö_dt
),

62 
	`m_max_t
(
ö_max_t
),

63 
	`m_cuº_t
(0),

64 
	`m_ru¬ög
(
Ál£
),

65 
	$m_cuºíéy_adv™cög_simuœti⁄
(
Ál£
)

67 
	`as£π
–
m_dt
 > 0 );

68 
	`as£π
–
m_max_t
 > 0 );

71 
boﬁ
 
	$d⁄e_simuœti⁄
( )

73  
m_cuº_t
 > 
m_max_t
 - 1e-7;

74 
	}
}

	@/usr/include/GL/glut.h

1 #i‚de‡ 
__GLUT_H__


2 
	#__GLUT_H__


	)

17 
	~"‰ìglut_°d.h
"

	@/usr/include/cblas.h

1 #i‚de‡
CBLAS_H


2 
	#CBLAS_H


	)

3 
	~<°ddef.h
>

6 #ifde‡
__˝lu•lus


13 #ifde‡
WeúdNEC


14 
	#CBLAS_INDEX
 

	)

16 
	#CBLAS_INDEX
 

	)

19 íum {
CbœsRowMaj‹
=101, 
CbœsCﬁMaj‹
=102} 
	tCBLAS_LAYOUT
;

20 íum {
CbœsNoTøns
=111, 
CbœsTøns
=112, 
CbœsC⁄jTøns
=113} 
	tCBLAS_TRANSPOSE
;

21 íum {
CbœsUµî
=121, 
CbœsLowî
=122} 
	tCBLAS_UPLO
;

22 íum {
CbœsN⁄Unô
=131, 
CbœsUnô
=132} 
	tCBLAS_DIAG
;

23 íum {
CbœsLe·
=141, 
CbœsRight
=142} 
	tCBLAS_SIDE
;

25 
CBLAS_LAYOUT
 
	tCBLAS_ORDER
;

27 
	~"cbœs_m™glög.h
"

35 
cbœs_dˇbs1
(c⁄° *
z
);

36 
cbœs_sˇbs1
(c⁄° *
c
);

38 
cbœs_sdsdŸ
(c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

39 c⁄° 
öcX
, c⁄° *
Y
, c⁄° 
öcY
);

40 
cbœs_dsdŸ
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
, c⁄° *
Y
,

41 c⁄° 
öcY
);

42 
cbœs_sdŸ
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

43 c⁄° *
Y
, c⁄° 
öcY
);

44 
cbœs_ddŸ
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

45 c⁄° *
Y
, c⁄° 
öcY
);

50 
cbœs_cdŸu_sub
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

51 c⁄° *
Y
, c⁄° 
öcY
, *
dŸu
);

52 
cbœs_cdŸc_sub
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

53 c⁄° *
Y
, c⁄° 
öcY
, *
dŸc
);

55 
cbœs_zdŸu_sub
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

56 c⁄° *
Y
, c⁄° 
öcY
, *
dŸu
);

57 
cbœs_zdŸc_sub
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

58 c⁄° *
Y
, c⁄° 
öcY
, *
dŸc
);

64 
cbœs_¢rm2
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

65 
cbœs_ßsum
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

67 
cbœs_dƒm2
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

68 
cbœs_dasum
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

70 
cbœs_s˙rm2
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

71 
cbœs_sˇsum
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

73 
cbœs_dzƒm2
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

74 
cbœs_dzasum
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

80 
CBLAS_INDEX
 
cbœs_ißmax
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

81 
CBLAS_INDEX
 
cbœs_idamax
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

82 
CBLAS_INDEX
 
cbœs_iˇmax
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

83 
CBLAS_INDEX
 
cbœs_izamax
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
);

94 
cbœs_ssw≠
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

95 *
Y
, c⁄° 
öcY
);

96 
cbœs_sc›y
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

97 *
Y
, c⁄° 
öcY
);

98 
cbœs_ßxpy
(c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

99 c⁄° 
öcX
, *
Y
, c⁄° 
öcY
);

101 
cbœs_dsw≠
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

102 *
Y
, c⁄° 
öcY
);

103 
cbœs_dc›y
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

104 *
Y
, c⁄° 
öcY
);

105 
cbœs_daxpy
(c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

106 c⁄° 
öcX
, *
Y
, c⁄° 
öcY
);

108 
cbœs_csw≠
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

109 *
Y
, c⁄° 
öcY
);

110 
cbœs_cc›y
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

111 *
Y
, c⁄° 
öcY
);

112 
cbœs_ˇxpy
(c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
X
,

113 c⁄° 
öcX
, *
Y
, c⁄° 
öcY
);

115 
cbœs_zsw≠
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

116 *
Y
, c⁄° 
öcY
);

117 
cbœs_zc›y
(c⁄° 
N
, c⁄° *
X
, c⁄° 
öcX
,

118 *
Y
, c⁄° 
öcY
);

119 
cbœs_zaxpy
(c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
X
,

120 c⁄° 
öcX
, *
Y
, c⁄° 
öcY
);

126 
cbœs_§Ÿg
(*
a
, *
b
, *
c
, *
s
);

127 
cbœs_§Ÿmg
(*
d1
, *
d2
, *
b1
, c⁄° 
b2
, *
P
);

128 
cbœs_§Ÿ
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

129 *
Y
, c⁄° 
öcY
, c⁄° 
c
, c⁄° 
s
);

130 
cbœs_§Ÿm
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

131 *
Y
, c⁄° 
öcY
, c⁄° *
P
);

133 
cbœs_drŸg
(*
a
, *
b
, *
c
, *
s
);

134 
cbœs_drŸmg
(*
d1
, *
d2
, *
b1
, c⁄° 
b2
, *
P
);

135 
cbœs_drŸ
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

136 *
Y
, c⁄° 
öcY
, c⁄° 
c
, c⁄° 
s
);

137 
cbœs_drŸm
(c⁄° 
N
, *
X
, c⁄° 
öcX
,

138 *
Y
, c⁄° 
öcY
, c⁄° *
P
);

144 
cbœs_ssˇl
(c⁄° 
N
, c⁄° 
Æpha
, *
X
, c⁄° 
öcX
);

145 
cbœs_dsˇl
(c⁄° 
N
, c⁄° 
Æpha
, *
X
, c⁄° 
öcX
);

146 
cbœs_csˇl
(c⁄° 
N
, c⁄° *
Æpha
, *
X
, c⁄° 
öcX
);

147 
cbœs_zsˇl
(c⁄° 
N
, c⁄° *
Æpha
, *
X
, c⁄° 
öcX
);

148 
cbœs_cssˇl
(c⁄° 
N
, c⁄° 
Æpha
, *
X
, c⁄° 
öcX
);

149 
cbœs_zdsˇl
(c⁄° 
N
, c⁄° 
Æpha
, *
X
, c⁄° 
öcX
);

160 
cbœs_sgemv
(c⁄° 
CBLAS_LAYOUT
 
œyout
,

161 c⁄° 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

162 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

163 c⁄° *
X
, c⁄° 
öcX
, c⁄° 
bëa
,

164 *
Y
, c⁄° 
öcY
);

165 
cbœs_sgbmv
(
CBLAS_LAYOUT
 
œyout
,

166 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

167 c⁄° 
KL
, c⁄° 
KU
, c⁄° 
Æpha
,

168 c⁄° *
A
, c⁄° 
lda
, c⁄° *
X
,

169 c⁄° 
öcX
, c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

170 
cbœs_°rmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

171 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

172 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
,

173 *
X
, c⁄° 
öcX
);

174 
cbœs_°bmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

175 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

176 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

177 *
X
, c⁄° 
öcX
);

178 
cbœs_°pmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

179 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

180 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

181 
cbœs_°rsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

182 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

183 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
, *
X
,

184 c⁄° 
öcX
);

185 
cbœs_°bsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

186 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

187 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

188 *
X
, c⁄° 
öcX
);

189 
cbœs_°psv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

190 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

191 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

193 
cbœs_dgemv
(
CBLAS_LAYOUT
 
œyout
,

194 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

195 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

196 c⁄° *
X
, c⁄° 
öcX
, c⁄° 
bëa
,

197 *
Y
, c⁄° 
öcY
);

198 
cbœs_dgbmv
(
CBLAS_LAYOUT
 
œyout
,

199 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

200 c⁄° 
KL
, c⁄° 
KU
, c⁄° 
Æpha
,

201 c⁄° *
A
, c⁄° 
lda
, c⁄° *
X
,

202 c⁄° 
öcX
, c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

203 
cbœs_dåmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

204 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

205 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
,

206 *
X
, c⁄° 
öcX
);

207 
cbœs_dtbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

208 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

209 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

210 *
X
, c⁄° 
öcX
);

211 
cbœs_dçmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

212 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

213 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

214 
cbœs_dåsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

215 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

216 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
, *
X
,

217 c⁄° 
öcX
);

218 
cbœs_dtbsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

219 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

220 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

221 *
X
, c⁄° 
öcX
);

222 
cbœs_dçsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

223 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

224 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

226 
cbœs_cgemv
(
CBLAS_LAYOUT
 
œyout
,

227 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

228 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

229 c⁄° *
X
, c⁄° 
öcX
, c⁄° *
bëa
,

230 *
Y
, c⁄° 
öcY
);

231 
cbœs_cgbmv
(
CBLAS_LAYOUT
 
œyout
,

232 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

233 c⁄° 
KL
, c⁄° 
KU
, c⁄° *
Æpha
,

234 c⁄° *
A
, c⁄° 
lda
, c⁄° *
X
,

235 c⁄° 
öcX
, c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

236 
cbœs_˘rmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

237 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

238 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
,

239 *
X
, c⁄° 
öcX
);

240 
cbœs_˘bmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

241 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

242 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

243 *
X
, c⁄° 
öcX
);

244 
cbœs_˘pmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

245 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

246 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

247 
cbœs_˘rsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

248 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

249 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
, *
X
,

250 c⁄° 
öcX
);

251 
cbœs_˘bsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

252 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

253 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

254 *
X
, c⁄° 
öcX
);

255 
cbœs_˘psv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

256 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

257 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

259 
cbœs_zgemv
(
CBLAS_LAYOUT
 
œyout
,

260 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

261 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

262 c⁄° *
X
, c⁄° 
öcX
, c⁄° *
bëa
,

263 *
Y
, c⁄° 
öcY
);

264 
cbœs_zgbmv
(
CBLAS_LAYOUT
 
œyout
,

265 
CBLAS_TRANSPOSE
 
TønsA
, c⁄° 
M
, c⁄° 
N
,

266 c⁄° 
KL
, c⁄° 
KU
, c⁄° *
Æpha
,

267 c⁄° *
A
, c⁄° 
lda
, c⁄° *
X
,

268 c⁄° 
öcX
, c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

269 
cbœs_zåmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

270 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

271 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
,

272 *
X
, c⁄° 
öcX
);

273 
cbœs_ztbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

274 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

275 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

276 *
X
, c⁄° 
öcX
);

277 
cbœs_zçmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

278 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

279 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

280 
cbœs_zåsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

281 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

282 c⁄° 
N
, c⁄° *
A
, c⁄° 
lda
, *
X
,

283 c⁄° 
öcX
);

284 
cbœs_ztbsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

285 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

286 c⁄° 
N
, c⁄° 
K
, c⁄° *
A
, c⁄° 
lda
,

287 *
X
, c⁄° 
öcX
);

288 
cbœs_zçsv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

289 
CBLAS_TRANSPOSE
 
TønsA
, 
CBLAS_DIAG
 
Düg
,

290 c⁄° 
N
, c⁄° *
Ap
, *
X
, c⁄° 
öcX
);

296 
cbœs_ssymv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

297 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
A
,

298 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

299 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

300 
cbœs_ssbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

301 c⁄° 
N
, c⁄° 
K
, c⁄° 
Æpha
, c⁄° *
A
,

302 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

303 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

304 
cbœs_s•mv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

305 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
Ap
,

306 c⁄° *
X
, c⁄° 
öcX
,

307 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

308 
cbœs_sgî
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

309 c⁄° 
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

310 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

311 
cbœs_ssyr
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

312 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

313 c⁄° 
öcX
, *
A
, c⁄° 
lda
);

314 
cbœs_s•r
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

315 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

316 c⁄° 
öcX
, *
Ap
);

317 
cbœs_ssyr2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

318 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

319 c⁄° 
öcX
, c⁄° *
Y
, c⁄° 
öcY
, *
A
,

320 c⁄° 
lda
);

321 
cbœs_s•r2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

322 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

323 c⁄° 
öcX
, c⁄° *
Y
, c⁄° 
öcY
, *
A
);

325 
cbœs_dsymv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

326 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
A
,

327 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

328 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

329 
cbœs_dsbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

330 c⁄° 
N
, c⁄° 
K
, c⁄° 
Æpha
, c⁄° *
A
,

331 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

332 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

333 
cbœs_d•mv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

334 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
Ap
,

335 c⁄° *
X
, c⁄° 
öcX
,

336 c⁄° 
bëa
, *
Y
, c⁄° 
öcY
);

337 
cbœs_dgî
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

338 c⁄° 
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

339 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

340 
cbœs_dsyr
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

341 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

342 c⁄° 
öcX
, *
A
, c⁄° 
lda
);

343 
cbœs_d•r
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

344 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

345 c⁄° 
öcX
, *
Ap
);

346 
cbœs_dsyr2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

347 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

348 c⁄° 
öcX
, c⁄° *
Y
, c⁄° 
öcY
, *
A
,

349 c⁄° 
lda
);

350 
cbœs_d•r2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

351 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

352 c⁄° 
öcX
, c⁄° *
Y
, c⁄° 
öcY
, *
A
);

358 
cbœs_chemv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

359 c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
A
,

360 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

361 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

362 
cbœs_chbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

363 c⁄° 
N
, c⁄° 
K
, c⁄° *
Æpha
, c⁄° *
A
,

364 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

365 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

366 
cbœs_chpmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

367 c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
Ap
,

368 c⁄° *
X
, c⁄° 
öcX
,

369 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

370 
cbœs_cgîu
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

371 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

372 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

373 
cbœs_cgîc
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

374 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

375 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

376 
cbœs_chî
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

377 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

378 *
A
, c⁄° 
lda
);

379 
cbœs_ch¥
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

380 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

381 c⁄° 
öcX
, *
A
);

382 
cbœs_chî2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
, c⁄° 
N
,

383 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

384 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

385 
cbœs_ch¥2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
, c⁄° 
N
,

386 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

387 c⁄° *
Y
, c⁄° 
öcY
, *
Ap
);

389 
cbœs_zhemv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

390 c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
A
,

391 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

392 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

393 
cbœs_zhbmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

394 c⁄° 
N
, c⁄° 
K
, c⁄° *
Æpha
, c⁄° *
A
,

395 c⁄° 
lda
, c⁄° *
X
, c⁄° 
öcX
,

396 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

397 
cbœs_zhpmv
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

398 c⁄° 
N
, c⁄° *
Æpha
, c⁄° *
Ap
,

399 c⁄° *
X
, c⁄° 
öcX
,

400 c⁄° *
bëa
, *
Y
, c⁄° 
öcY
);

401 
cbœs_zgîu
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

402 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

403 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

404 
cbœs_zgîc
(
CBLAS_LAYOUT
 
œyout
, c⁄° 
M
, c⁄° 
N
,

405 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

406 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

407 
cbœs_zhî
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

408 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

409 *
A
, c⁄° 
lda
);

410 
cbœs_zh¥
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

411 c⁄° 
N
, c⁄° 
Æpha
, c⁄° *
X
,

412 c⁄° 
öcX
, *
A
);

413 
cbœs_zhî2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
, c⁄° 
N
,

414 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

415 c⁄° *
Y
, c⁄° 
öcY
, *
A
, c⁄° 
lda
);

416 
cbœs_zh¥2
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
, c⁄° 
N
,

417 c⁄° *
Æpha
, c⁄° *
X
, c⁄° 
öcX
,

418 c⁄° *
Y
, c⁄° 
öcY
, *
Ap
);

429 
cbœs_sgemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_TRANSPOSE
 
TønsA
,

430 
CBLAS_TRANSPOSE
 
TønsB
, c⁄° 
M
, c⁄° 
N
,

431 c⁄° 
K
, c⁄° 
Æpha
, c⁄° *
A
,

432 c⁄° 
lda
, c⁄° *
B
, c⁄° 
ldb
,

433 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

434 
cbœs_ssymm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

435 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

436 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

437 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

438 *
C
, c⁄° 
ldc
);

439 
cbœs_ssyrk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

440 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

441 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

442 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

443 
cbœs_ssyr2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

444 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

445 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

446 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

447 *
C
, c⁄° 
ldc
);

448 
cbœs_°rmm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

449 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

450 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

451 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

452 *
B
, c⁄° 
ldb
);

453 
cbœs_°rsm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

454 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

455 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

456 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

457 *
B
, c⁄° 
ldb
);

459 
cbœs_dgemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_TRANSPOSE
 
TønsA
,

460 
CBLAS_TRANSPOSE
 
TønsB
, c⁄° 
M
, c⁄° 
N
,

461 c⁄° 
K
, c⁄° 
Æpha
, c⁄° *
A
,

462 c⁄° 
lda
, c⁄° *
B
, c⁄° 
ldb
,

463 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

464 
cbœs_dsymm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

465 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

466 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

467 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

468 *
C
, c⁄° 
ldc
);

469 
cbœs_dsyrk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

470 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

471 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

472 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

473 
cbœs_dsyr2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

474 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

475 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

476 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

477 *
C
, c⁄° 
ldc
);

478 
cbœs_dåmm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

479 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

480 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

481 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

482 *
B
, c⁄° 
ldb
);

483 
cbœs_dåsm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

484 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

485 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

486 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

487 *
B
, c⁄° 
ldb
);

489 
cbœs_cgemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_TRANSPOSE
 
TønsA
,

490 
CBLAS_TRANSPOSE
 
TønsB
, c⁄° 
M
, c⁄° 
N
,

491 c⁄° 
K
, c⁄° *
Æpha
, c⁄° *
A
,

492 c⁄° 
lda
, c⁄° *
B
, c⁄° 
ldb
,

493 c⁄° *
bëa
, *
C
, c⁄° 
ldc
);

494 
cbœs_csymm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

495 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

496 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

497 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

498 *
C
, c⁄° 
ldc
);

499 
cbœs_csyrk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

500 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

501 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

502 c⁄° *
bëa
, *
C
, c⁄° 
ldc
);

503 
cbœs_csyr2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

504 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

505 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

506 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

507 *
C
, c⁄° 
ldc
);

508 
cbœs_˘rmm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

509 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

510 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

511 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

512 *
B
, c⁄° 
ldb
);

513 
cbœs_˘rsm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

514 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

515 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

516 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

517 *
B
, c⁄° 
ldb
);

519 
cbœs_zgemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_TRANSPOSE
 
TønsA
,

520 
CBLAS_TRANSPOSE
 
TønsB
, c⁄° 
M
, c⁄° 
N
,

521 c⁄° 
K
, c⁄° *
Æpha
, c⁄° *
A
,

522 c⁄° 
lda
, c⁄° *
B
, c⁄° 
ldb
,

523 c⁄° *
bëa
, *
C
, c⁄° 
ldc
);

524 
cbœs_zsymm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

525 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

526 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

527 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

528 *
C
, c⁄° 
ldc
);

529 
cbœs_zsyrk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

530 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

531 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

532 c⁄° *
bëa
, *
C
, c⁄° 
ldc
);

533 
cbœs_zsyr2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

534 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

535 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

536 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

537 *
C
, c⁄° 
ldc
);

538 
cbœs_zåmm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

539 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

540 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

541 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

542 *
B
, c⁄° 
ldb
);

543 
cbœs_zåsm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

544 
CBLAS_UPLO
 
U∂o
, 
CBLAS_TRANSPOSE
 
TønsA
,

545 
CBLAS_DIAG
 
Düg
, c⁄° 
M
, c⁄° 
N
,

546 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

547 *
B
, c⁄° 
ldb
);

553 
cbœs_chemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

554 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

555 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

556 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

557 *
C
, c⁄° 
ldc
);

558 
cbœs_chîk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

559 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

560 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

561 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

562 
cbœs_chî2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

563 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

564 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

565 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

566 *
C
, c⁄° 
ldc
);

568 
cbœs_zhemm
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_SIDE
 
Side
,

569 
CBLAS_UPLO
 
U∂o
, c⁄° 
M
, c⁄° 
N
,

570 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

571 c⁄° *
B
, c⁄° 
ldb
, c⁄° *
bëa
,

572 *
C
, c⁄° 
ldc
);

573 
cbœs_zhîk
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

574 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

575 c⁄° 
Æpha
, c⁄° *
A
, c⁄° 
lda
,

576 c⁄° 
bëa
, *
C
, c⁄° 
ldc
);

577 
cbœs_zhî2k
(
CBLAS_LAYOUT
 
œyout
, 
CBLAS_UPLO
 
U∂o
,

578 
CBLAS_TRANSPOSE
 
Tøns
, c⁄° 
N
, c⁄° 
K
,

579 c⁄° *
Æpha
, c⁄° *
A
, c⁄° 
lda
,

580 c⁄° *
B
, c⁄° 
ldb
, c⁄° 
bëa
,

581 *
C
, c⁄° 
ldc
);

583 
cbœs_xîbœ
(
p
, c⁄° *
rout
, c⁄° *
f‹m
, ...);

585 #ifde‡
__˝lu•lus


	@/usr/include/dirent.h

22 #i‚def 
_DIRENT_H


23 
	#_DIRENT_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


29 
	~<bôs/ty≥s.h
>

31 #ifde‡
__USE_XOPEN


32 #i‚de‡
__öo_t_deföed


33 #i‚de‡
__USE_FILE_OFFSET64


34 
__öo_t
 
	töo_t
;

36 
__öo64_t
 
	töo_t
;

38 
	#__öo_t_deföed


	)

40 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


41 
__öo64_t
 
	töo64_t
;

42 
	#__öo64_t_deföed


	)

61 
	~<bôs/dúít.h
>

63 #i‡
deföed
 
__USE_MISC
 && !deföed 
d_fûío


64 
	#d_öo
 
d_fûío


	)

81 #ifde‡
_DIRENT_HAVE_D_NAMLEN


82 
	#_D_EXACT_NAMLEN
(
d
Ë((d)->
d_«mÀn
)

	)

83 
	#_D_ALLOC_NAMLEN
(
d
Ë(
	`_D_EXACT_NAMLEN
 (dË+ 1)

	)

85 
	#_D_EXACT_NAMLEN
(
d
Ë(
	`°æí
 ((d)->
d_«me
))

	)

86 #ifde‡
_DIRENT_HAVE_D_RECLEN


87 
	#_D_ALLOC_NAMLEN
(
d
Ë(((*Ë(dË+ (d)->
d_ª˛í
Ë- &(d)->
d_«me
[0])

	)

89 
	#_D_ALLOC_NAMLEN
(
d
Ë( (d)->
d_«me
 > 1 ?  (d)->d_name : \

90 
	`_D_EXACT_NAMLEN
 (
d
Ë+ 1)

	)

95 #ifde‡
__USE_MISC


99 
	mDT_UNKNOWN
 = 0,

100 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

101 
	mDT_FIFO
 = 1,

102 
	#DT_FIFO
 
DT_FIFO


	)

103 
	mDT_CHR
 = 2,

104 
	#DT_CHR
 
DT_CHR


	)

105 
	mDT_DIR
 = 4,

106 
	#DT_DIR
 
DT_DIR


	)

107 
	mDT_BLK
 = 6,

108 
	#DT_BLK
 
DT_BLK


	)

109 
	mDT_REG
 = 8,

110 
	#DT_REG
 
DT_REG


	)

111 
	mDT_LNK
 = 10,

112 
	#DT_LNK
 
DT_LNK


	)

113 
	mDT_SOCK
 = 12,

114 
	#DT_SOCK
 
DT_SOCK


	)

115 
	mDT_WHT
 = 14

116 
	#DT_WHT
 
DT_WHT


	)

120 
	#IFTODT
(
mode
Ë(((modeË& 0170000Ë>> 12)

	)

121 
	#DTTOIF
(
dúty≥
Ë((dúty≥Ë<< 12)

	)

127 
__dú°ªam
 
	tDIR
;

134 
DIR
 *
	$›ídú
 (c⁄° *
__«me
Ë
	`__n⁄nuŒ
 ((1));

136 #ifde‡
__USE_XOPEN2K8


141 
DIR
 *
	`fd›ídú
 (
__fd
);

149 
	$˛o£dú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

161 #i‚de‡
__USE_FILE_OFFSET64


162 
dúít
 *
	$ªaddú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

164 #ifde‡
__REDIRECT


165 
dúít
 *
	`__REDIRECT
 (
ªaddú
, (
DIR
 *
__dúp
), 
ªaddú64
)

166 
	`__n⁄nuŒ
 ((1));

168 
	#ªaddú
 
ªaddú64


	)

172 #ifde‡
__USE_LARGEFILE64


173 
dúít64
 *
	$ªaddú64
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

176 #ifde‡
__USE_POSIX


182 #i‚de‡
__USE_FILE_OFFSET64


183 
	$ªaddú_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

184 
dúít
 *
__ª°ri˘
 
__íåy
,

185 
dúít
 **
__ª°ri˘
 
__ªsu…
)

186 
	`__n⁄nuŒ
 ((1, 2, 3));

188 #ifde‡
__REDIRECT


189 
	`__REDIRECT
 (
ªaddú_r
,

190 (
DIR
 *
__ª°ri˘
 
__dúp
,

191 
dúít
 *
__ª°ri˘
 
__íåy
,

192 
dúít
 **
__ª°ri˘
 
__ªsu…
),

193 
ªaddú64_r
Ë
	`__n⁄nuŒ
 ((1, 2, 3));

195 
	#ªaddú_r
 
ªaddú64_r


	)

199 #ifde‡
__USE_LARGEFILE64


200 
	$ªaddú64_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

201 
dúít64
 *
__ª°ri˘
 
__íåy
,

202 
dúít64
 **
__ª°ri˘
 
__ªsu…
)

203 
	`__n⁄nuŒ
 ((1, 2, 3));

208 
	$ªwöddú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

210 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


211 
	~<bôs/ty≥s.h
>

214 
	$£ekdú
 (
DIR
 *
__dúp
, 
__pos
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
	$ãŒdú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

220 #ifde‡
__USE_XOPEN2K8


223 
	$dúfd
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

225 #i‡
deföed
 
__OPTIMIZE__
 && deföed 
_DIR_dúfd


226 
	#dúfd
(
dúp
Ë
	`_DIR_dúfd
 (dúp)

	)

229 #ifde‡
__USE_MISC


230 #i‚de‡
MAXNAMLEN


232 
	~<bôs/posix1_lim.h
>

235 #ifde‡
NAME_MAX


236 
	#MAXNAMLEN
 
NAME_MAX


	)

238 
	#MAXNAMLEN
 255

	)

243 
	#__√ed_size_t


	)

244 
	~<°ddef.h
>

253 #i‚de‡
__USE_FILE_OFFSET64


254 
	$sˇndú
 (c⁄° *
__ª°ri˘
 
__dú
,

255 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

256 (*
__£À˘‹
Ë(c⁄° 
dúít
 *),

257 (*
__cmp
Ë(c⁄° 
dúít
 **,

258 c⁄° 
dúít
 **))

259 
	`__n⁄nuŒ
 ((1, 2));

261 #ifde‡
__REDIRECT


262 
	`__REDIRECT
 (
sˇndú
,

263 (c⁄° *
__ª°ri˘
 
__dú
,

264 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

265 (*
__£À˘‹
Ë(c⁄° 
dúít
 *),

266 (*
__cmp
Ë(c⁄° 
dúít
 **,

267 c⁄° 
dúít
 **)),

268 
sˇndú64
Ë
	`__n⁄nuŒ
 ((1, 2));

270 
	#sˇndú
 
sˇndú64


	)

274 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


277 
	$sˇndú64
 (c⁄° *
__ª°ri˘
 
__dú
,

278 
dúít64
 ***
__ª°ri˘
 
__«mñi°
,

279 (*
__£À˘‹
Ë(c⁄° 
dúít64
 *),

280 (*
__cmp
Ë(c⁄° 
dúít64
 **,

281 c⁄° 
dúít64
 **))

282 
	`__n⁄nuŒ
 ((1, 2));

285 #ifde‡
__USE_GNU


291 #i‚de‡
__USE_FILE_OFFSET64


292 
	$sˇndú©
 (
__dfd
, c⁄° *
__ª°ri˘
 
__dú
,

293 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

294 (*
__£À˘‹
Ë(c⁄° 
dúít
 *),

295 (*
__cmp
Ë(c⁄° 
dúít
 **,

296 c⁄° 
dúít
 **))

297 
	`__n⁄nuŒ
 ((2, 3));

299 #ifde‡
__REDIRECT


300 
	`__REDIRECT
 (
sˇndú©
,

301 (
__dfd
, c⁄° *
__ª°ri˘
 
__dú
,

302 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

303 (*
__£À˘‹
Ë(c⁄° 
dúít
 *),

304 (*
__cmp
Ë(c⁄° 
dúít
 **,

305 c⁄° 
dúít
 **)),

306 
sˇndú©64
Ë
	`__n⁄nuŒ
 ((2, 3));

308 
	#sˇndú©
 
sˇndú©64


	)

314 
	$sˇndú©64
 (
__dfd
, c⁄° *
__ª°ri˘
 
__dú
,

315 
dúít64
 ***
__ª°ri˘
 
__«mñi°
,

316 (*
__£À˘‹
Ë(c⁄° 
dúít64
 *),

317 (*
__cmp
Ë(c⁄° 
dúít64
 **,

318 c⁄° 
dúít64
 **))

319 
	`__n⁄nuŒ
 ((2, 3));

323 #i‚de‡
__USE_FILE_OFFSET64


324 
	$Æphas‹t
 (c⁄° 
dúít
 **
__e1
,

325 c⁄° 
dúít
 **
__e2
)

326 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

328 #ifde‡
__REDIRECT


329 
	`__REDIRECT_NTH
 (
Æphas‹t
,

330 (c⁄° 
dúít
 **
__e1
,

331 c⁄° 
dúít
 **
__e2
),

332 
Æphas‹t64
Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

334 
	#Æphas‹t
 
Æphas‹t64


	)

338 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


339 
	$Æphas‹t64
 (c⁄° 
dúít64
 **
__e1
,

340 c⁄° 
dúít64
 **
__e2
)

341 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

346 #ifde‡
__USE_MISC


351 #i‚de‡
__USE_FILE_OFFSET64


352 
__ssize_t
 
	$gëdúíåõs
 (
__fd
, *
__ª°ri˘
 
__buf
,

353 
size_t
 
__nbyãs
,

354 
__off_t
 *
__ª°ri˘
 
__ba£p
)

355 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

357 #ifde‡
__REDIRECT


358 
__ssize_t
 
	`__REDIRECT_NTH
 (
gëdúíåõs
,

359 (
__fd
, *
__ª°ri˘
 
__buf
,

360 
size_t
 
__nbyãs
,

361 
__off64_t
 *
__ª°ri˘
 
__ba£p
),

362 
gëdúíåõs64
Ë
	`__n⁄nuŒ
 ((2, 4));

364 
	#gëdúíåõs
 
gëdúíåõs64


	)

368 #ifde‡
__USE_LARGEFILE64


369 
__ssize_t
 
	$gëdúíåõs64
 (
__fd
, *
__ª°ri˘
 
__buf
,

370 
size_t
 
__nbyãs
,

371 
__off64_t
 *
__ª°ri˘
 
__ba£p
)

372 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

376 #ifde‡
__USE_GNU


378 #i‚de‡
__USE_FILE_OFFSET64


379 
	$vîsi⁄s‹t
 (c⁄° 
dúít
 **
__e1
,

380 c⁄° 
dúít
 **
__e2
)

381 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

383 #ifde‡
__REDIRECT


384 
	`__REDIRECT_NTH
 (
vîsi⁄s‹t
,

385 (c⁄° 
dúít
 **
__e1
,

386 c⁄° 
dúít
 **
__e2
),

387 
vîsi⁄s‹t64
)

388 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

390 
	#vîsi⁄s‹t
 
vîsi⁄s‹t64


	)

394 #ifde‡
__USE_LARGEFILE64


395 
	$vîsi⁄s‹t64
 (c⁄° 
dúít64
 **
__e1
,

396 c⁄° 
dúít64
 **
__e2
)

397 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

401 
__END_DECLS


	@/usr/include/errno.h

22 #i‚def 
_ERRNO_H


26 #i‚def 
__√ed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 
	~<bôs/î∫o.h
>

36 #unde‡
__√ed_Em©h


38 #ifdef 
_ERRNO_H


45 #i‚def 
î∫o


46 
î∫o
;

49 #ifde‡
__USE_GNU


54 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

58 
	g__END_DECLS


66 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


67 #i‚de‡
__îr‹_t_deföed


68 
	tîr‹_t
;

69 
	#__îr‹_t_deföed
 1

	)

71 #unde‡
__√ed_îr‹_t


	@/usr/include/fenv.h

22 #i‚de‡
_FENV_H


23 
	#_FENV_H
 1

	)

25 
	~<„©uªs.h
>

57 
	~<bôs/„nv.h
>

59 
__BEGIN_DECLS


64 
	$„˛óªx˚±
 (
__ex˚±s
Ë
__THROW
;

68 
	$„gëex˚±Êag
 (
„x˚±_t
 *
__Êagp
, 
__ex˚±s
Ë
__THROW
;

71 
	$„øi£ex˚±
 (
__ex˚±s
Ë
__THROW
;

75 
	$„£ãx˚±Êag
 (c⁄° 
„x˚±_t
 *
__Êagp
, 
__ex˚±s
Ë
__THROW
;

79 
	$„ã°ex˚±
 (
__ex˚±s
Ë
__THROW
;

85 
	$„gëround
 (Ë
__THROW
 
__©åibuã_puª__
;

88 
	$„£åound
 (
__roundög_dúe˘i⁄
Ë
__THROW
;

95 
	$„gëív
 (
„nv_t
 *
__ívp
Ë
__THROW
;

100 
	$„hﬁdex˚±
 (
„nv_t
 *
__ívp
Ë
__THROW
;

104 
	$„£ãnv
 (c⁄° 
„nv_t
 *
__ívp
Ë
__THROW
;

109 
	$„upd©ìnv
 (c⁄° 
„nv_t
 *
__ívp
Ë
__THROW
;

113 #ifde‡
__OPTIMIZE__


114 
	~<bôs/„nvölöe.h
>

117 #ifde‡
__USE_GNU


122 
	$„íabÀex˚±
 (
__ex˚±s
Ë
__THROW
;

127 
	$„dißbÀex˚±
 (
__ex˚±s
Ë
__THROW
;

130 
	$„gëex˚±
 (Ë
__THROW
;

133 
__END_DECLS


	@/usr/include/math.h

23 #i‚def 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	~<bôs/m©h-ve˘‹.h
>

35 
	~<bôs/huge_vÆ.h
>

36 #ifde‡
__USE_ISOC99


37 
	~<bôs/huge_vÆf.h
>

38 
	~<bôs/huge_vÆl.h
>

41 
	~<bôs/öf.h
>

44 
	~<bôs/«n.h
>

48 
	~<bôs/m©hdef.h
>

55 
	#__SIMD_DECL
(
fun˘i⁄
Ë
	`__CONCAT
 (
__DECL_SIMD_
, fun˘i⁄)

	)

57 
	#__MATHCALL_VEC
(
fun˘i⁄
, 
suffix
, 
¨gs
) \

58 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
fun˘i⁄
, 
suffix
)) \

59 
	`__MATHCALL
 (
fun˘i⁄
, 
suffix
, 
¨gs
)

	)

61 
	#__MATHDECL_VEC
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

62 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
fun˘i⁄
, 
suffix
)) \

63 
	`__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
)

	)

65 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

66 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

67 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

68 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

69 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

70 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

71 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

72 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

73 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

74 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

75 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

76 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

78 
	#_MdoubÀ_
 

	)

79 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

80 
	#__MATH_DECLARING_DOUBLE
 1

	)

81 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

82 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

83 
	~<bôs/m©hˇŒs.h
>

84 #unde‡
_MdoubÀ_


85 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


86 #unde‡
_MdoubÀ_END_NAMESPACE


87 #unde‡
__MATH_PRECNAME


88 #unde‡
__MATH_DECLARING_DOUBLE


90 #ifde‡
__USE_ISOC99


96 #i‚de‡
_MÊﬂt_


97 
	#_MÊﬂt_
 

	)

99 
	#_MdoubÀ_
 
_MÊﬂt_


	)

100 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

101 
	#__MATH_DECLARING_DOUBLE
 0

	)

102 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

103 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

104 
	~<bôs/m©hˇŒs.h
>

105 #unde‡
_MdoubÀ_


106 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


107 #unde‡
_MdoubÀ_END_NAMESPACE


108 #unde‡
__MATH_PRECNAME


109 #unde‡
__MATH_DECLARING_DOUBLE


111 #i‡!(
deföed
 
__NO_LONG_DOUBLE_MATH
 && deföed 
_LIBC
) \

112 || 
deföed
 
__LDBL_COMPAT
 \

113 || 
deföed
 
_LIBC_TEST


114 #ifde‡
__LDBL_COMPAT


116 #ifde‡
__USE_ISOC99


117 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

118 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

119 #ifde‡
__REDIRECT_NTH


120 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

121 
__∆dbl_√xâow¨df
)

122 
	`__©åibuã__
 ((
__c⁄°__
));

123 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

124 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

125 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

126 (
__x
, 
__y
),

127 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

131 #unde‡
__MATHDECL_1


132 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

133 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

134 
¨gs
, 
Æüs
)

	)

135 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

136 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

142 #i‚de‡
_Ml⁄g_doubÀ_


143 
	#_Ml⁄g_doubÀ_
 

	)

145 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

146 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

147 
	#__MATH_DECLARING_DOUBLE
 0

	)

148 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

149 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

150 
	#__MATH_DECLARE_LDOUBLE
 1

	)

151 
	~<bôs/m©hˇŒs.h
>

152 #unde‡
_MdoubÀ_


153 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


154 #unde‡
_MdoubÀ_END_NAMESPACE


155 #unde‡
__MATH_PRECNAME


156 #unde‡
__MATH_DECLARING_DOUBLE


161 #unde‡
__MATHDECL_1


162 #unde‡
__MATHDECL


163 #unde‡
__MATHCALL


166 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


168 
signgam
;

173 #ifde‡
__USE_ISOC99


211 
FP_NAN
 =

212 
	#FP_NAN
 0

	)

213 
FP_NAN
,

214 
FP_INFINITE
 =

215 
	#FP_INFINITE
 1

	)

216 
FP_INFINITE
,

217 
FP_ZERO
 =

218 
	#FP_ZERO
 2

	)

219 
FP_ZERO
,

220 
FP_SUBNORMAL
 =

221 
	#FP_SUBNORMAL
 3

	)

222 
FP_SUBNORMAL
,

223 
FP_NORMAL
 =

224 
	#FP_NORMAL
 4

	)

225 
FP_NORMAL


233 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__
 \

234 && !
deföed
 
__OPTIMIZE_SIZE__


235 
	#Â˛assify
(
x
Ë
	`__buûtö_Â˛assify
 (
FP_NAN
, 
FP_INFINITE
, \

236 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

237 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


238 
	#Â˛assify
(
x
) \

239 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

241 
	#Â˛assify
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__Â˛assifyf
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

249 #i‡
	`__GNUC_PREREQ
 (4,0)

250 
	#signbô
(
x
) \

251 ( (
x
) ==  () \

252 ? 
	`__buûtö_signbôf
 (
x
) \

253 :  (
x
) ==  () \

254 ? 
	`__buûtö_signbô
 (
x
Ë: 
	`__buûtö_signbôl
 (x))

	)

256 #ifde‡
__NO_LONG_DOUBLE_MATH


257 
	#signbô
(
x
) \

258 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

260 
	#signbô
(
x
) \

261 ( (
x
) ==  () \

262 ? 
	`__signbôf
 (
x
) \

263 :  (
x
) ==  () \

264 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

269 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


270 
	#isföôe
(
x
Ë
	`__buûtö_isföôe
 (x)

	)

271 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


272 
	#isföôe
(
x
) \

273 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

275 
	#isföôe
(
x
) \

276 ( (
x
) ==  () \

277 ? 
	`__föôef
 (
x
) \

278 :  (
x
) ==  () \

279 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

283 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


284 
	#i¢‹mÆ
(
x
Ë
	`__buûtö_i¢‹mÆ
 (x)

	)

286 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

291 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


292 
	#i¢™
(
x
Ë
	`__buûtö_i¢™
 (x)

	)

293 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


294 
	#i¢™
(
x
) \

295 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

297 
	#i¢™
(
x
) \

298 ( (
x
) ==  () \

299 ? 
	`__i¢™f
 (
x
) \

300 :  (
x
) ==  () \

301 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

305 #i‡
	`__GNUC_PREREQ
 (4,4Ë&& !
deföed
 
__SUPPORT_SNAN__


306 
	#isöf
(
x
Ë
	`__buûtö_isöf_sign
 (x)

	)

307 #ñi‡
deföed
 
__NO_LONG_DOUBLE_MATH


308 
	#isöf
(
x
) \

309 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

311 
	#isöf
(
x
) \

312 ( (
x
) ==  () \

313 ? 
	`__isöff
 (
x
) \

314 :  (
x
) ==  () \

315 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

319 
	#MATH_ERRNO
 1

	)

320 
	#MATH_ERREXCEPT
 2

	)

325 #i‚de‡
__FAST_MATH__


326 
	#m©h_îrh™dlög
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

331 #ifde‡
__USE_GNU


333 #ifde‡
__NO_LONG_DOUBLE_MATH


334 
	#issig«lög
(
x
) \

335 ( (
x
Ë= (Ë? 
	`__issig«lögf
 (xË: 
	`__issig«lög
 (x))

	)

337 
	#issig«lög
(
x
) \

338 ( (
x
) ==  () \

339 ? 
	`__issig«lögf
 (
x
) \

340 :  (
x
) ==  () \

341 ? 
	`__issig«lög
 (
x
Ë: 
	`__issig«lögl
 (x))

	)

345 #ifdef 
__USE_MISC


349 
_IEEE_
 = -1,

350 
_SVID_
,

351 
_XOPEN_
,

352 
_POSIX_
,

353 
_ISOC_


354 } 
	t_LIB_VERSION_TYPE
;

359 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

363 #ifde‡
__USE_MISC


369 #ifde‡
__˝lu•lus


370 
__ex˚±i⁄


372 
ex˚±i⁄


375 
ty≥
;

376 *
«me
;

377 
¨g1
;

378 
¨g2
;

379 
ªtvÆ
;

380 
	}
};

382 #ifde‡
__˝lu•lus


383 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

385 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

388 
	#X_TLOSS
 1.41484755040568800000e+16

	)

391 
	#DOMAIN
 1

	)

392 
	#SING
 2

	)

393 
	#OVERFLOW
 3

	)

394 
	#UNDERFLOW
 4

	)

395 
	#TLOSS
 5

	)

396 
	#PLOSS
 6

	)

399 
	#HUGE
 3.40282347e+38F

	)

403 #ifde‡
__USE_XOPEN


405 
	#MAXFLOAT
 3.40282347e+38F

	)

412 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


413 
	#M_E
 2.7182818284590452354

	)

414 
	#M_LOG2E
 1.4426950408889634074

	)

415 
	#M_LOG10E
 0.43429448190325182765

	)

416 
	#M_LN2
 0.69314718055994530942

	)

417 
	#M_LN10
 2.30258509299404568402

	)

418 
	#M_PI
 3.14159265358979323846

	)

419 
	#M_PI_2
 1.57079632679489661923

	)

420 
	#M_PI_4
 0.78539816339744830962

	)

421 
	#M_1_PI
 0.31830988618379067154

	)

422 
	#M_2_PI
 0.63661977236758134308

	)

423 
	#M_2_SQRTPI
 1.12837916709551257390

	)

424 
	#M_SQRT2
 1.41421356237309504880

	)

425 
	#M_SQRT1_2
 0.70710678118654752440

	)

431 #ifde‡
__USE_GNU


432 
	#M_El
 2.718281828459045235360287471352662498L

	)

433 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

434 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

435 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

436 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

437 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

438 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

439 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

440 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

441 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

442 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

443 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

444 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

451 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


452 
	#__NO_MATH_INLINES
 1

	)

455 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

462 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

463 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

464 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

465 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

466 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

467 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

471 #ifde‡
__USE_EXTERN_INLINES


472 
	~<bôs/m©hölöe.h
>

477 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

478 
	~<bôs/m©h-föôe.h
>

481 #ifde‡
__USE_ISOC99


485 #i‚de‡
isgª©î


486 
	#isgª©î
(
x
, 
y
) \

487 (
__exãnsi⁄__
 \

488 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

489 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

493 #i‚de‡
isgª©îequÆ


494 
	#isgª©îequÆ
(
x
, 
y
) \

495 (
__exãnsi⁄__
 \

496 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

497 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

501 #i‚de‡
i¶ess


502 
	#i¶ess
(
x
, 
y
) \

503 (
__exãnsi⁄__
 \

504 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

505 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

509 #i‚de‡
i¶es£quÆ


510 
	#i¶es£quÆ
(
x
, 
y
) \

511 (
__exãnsi⁄__
 \

512 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

513 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

517 #i‚de‡
i¶essgª©î


518 
	#i¶essgª©î
(
x
, 
y
) \

519 (
__exãnsi⁄__
 \

520 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

521 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

525 #i‚de‡
isun‹dîed


526 
	#isun‹dîed
(
u
, 
v
) \

527 (
__exãnsi⁄__
 \

528 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

529 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

534 
	g__END_DECLS


	@/usr/include/pthread.h

18 #i‚de‡
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<„©uªs.h
>

22 
	~<ídün.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<bôs/±hªadty≥s.h
>

27 
	~<bôs/£tjmp.h
>

28 
	~<bôs/w‹dsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifde‡
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifde‡
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


85 #ifde‡
__PTHREAD_MUTEX_HAVE_PREV


86 
	#PTHREAD_MUTEX_INITIALIZER
 \

87 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

88 #ifde‡
__USE_GNU


89 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

90 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

91 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

93 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

100 #ifde‡
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

113 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


125 #i‚de‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


126 #i‡
__WORDSIZE
 == 64

127 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

132 
	#PTHREAD_RWLOCK_INITIALIZER
 \

133 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

134 #ifde‡
__USE_GNU


135 #ifde‡
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 0, 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, \

138 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

140 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


141 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

142 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

143 0, 
__PTHREAD_RWLOCK_ELISION_EXTRA
, 0, 0 } }

	)

145 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

146 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

147 0 } }

	)

157 
	mPTHREAD_INHERIT_SCHED
,

158 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

159 
	mPTHREAD_EXPLICIT_SCHED


160 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

167 
	mPTHREAD_SCOPE_SYSTEM
,

168 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

169 
	mPTHREAD_SCOPE_PROCESS


170 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

177 
	mPTHREAD_PROCESS_PRIVATE
,

178 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

179 
	mPTHREAD_PROCESS_SHARED


180 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

186 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

190 
	s_±hªad_˛ónup_buf„r


192 (*
	m__routöe
) (*);

193 *
	m__¨g
;

194 
	m__ˇn˚…y≥
;

195 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

201 
	mPTHREAD_CANCEL_ENABLE
,

202 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

203 
	mPTHREAD_CANCEL_DISABLE


204 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

208 
	mPTHREAD_CANCEL_DEFERRED
,

209 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

210 
	mPTHREAD_CANCEL_ASYNCHRONOUS


211 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

213 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

217 
	#PTHREAD_ONCE_INIT
 0

	)

220 #ifde‡
__USE_XOPEN2K


224 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

228 
__BEGIN_DECLS


233 
	$±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

234 c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

235 *(*
__°¨t_routöe
) (*),

236 *
__ª°ri˘
 
__¨g
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 3));

242 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

250 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

252 #ifde‡
__USE_GNU


255 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

263 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

264 c⁄° 
time•ec
 *
__ab°ime
);

271 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

275 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

278 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
)

279 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

287 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

291 
__THROW
 
	`__n⁄nuŒ
 ((1));

294 
	$±hªad_©å_gëdëach°©e
 (c⁄° 
±hªad_©å_t
 *
__©å
,

295 *
__dëach°©e
)

296 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

299 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

300 
__dëach°©e
)

301 
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$±hªad_©å_gëgu¨dsize
 (c⁄° 
±hªad_©å_t
 *
__©å
,

306 
size_t
 *
__gu¨dsize
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

311 
size_t
 
__gu¨dsize
)

312 
__THROW
 
	`__n⁄nuŒ
 ((1));

316 
	$±hªad_©å_gësched∑øm
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

317 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

321 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

322 c⁄° 
sched_∑øm
 *
__ª°ri˘


323 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

326 
	$±hªad_©å_gëschedpﬁicy
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


327 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

328 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

331 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

332 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	$±hªad_©å_gëöhîôsched
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


336 
__©å
, *
__ª°ri˘
 
__öhîô
)

337 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

340 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

341 
__öhîô
)

342 
__THROW
 
	`__n⁄nuŒ
 ((1));

346 
	$±hªad_©å_gësc›e
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

347 *
__ª°ri˘
 
__sc›e
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

351 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

352 
__THROW
 
	`__n⁄nuŒ
 ((1));

355 
	$±hªad_©å_gë°ackaddr
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


356 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

357 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

363 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

364 *
__°ackaddr
)

365 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

368 
	$±hªad_©å_gë°acksize
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘


369 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

370 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

375 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

376 
size_t
 
__°acksize
)

377 
__THROW
 
	`__n⁄nuŒ
 ((1));

379 #ifde‡
__USE_XOPEN2K


381 
	$±hªad_©å_gë°ack
 (c⁄° 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

382 **
__ª°ri˘
 
__°ackaddr
,

383 
size_t
 *
__ª°ri˘
 
__°acksize
)

384 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

389 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

390 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 #ifde‡
__USE_GNU


396 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

397 
size_t
 
__˝u£tsize
,

398 c⁄° 
˝u_£t_t
 *
__˝u£t
)

399 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

403 
	$±hªad_©å_gëafföôy_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
,

404 
size_t
 
__˝u£tsize
,

405 
˝u_£t_t
 *
__˝u£t
)

406 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

409 
	$±hªad_gë©å_deÁu…_≈
 (
±hªad_©å_t
 *
__©å
)

410 
__THROW
 
	`__n⁄nuŒ
 ((1));

414 
	$±hªad_£èâr_deÁu…_≈
 (c⁄° 
±hªad_©å_t
 *
__©å
)

415 
__THROW
 
	`__n⁄nuŒ
 ((1));

420 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

421 
__THROW
 
	`__n⁄nuŒ
 ((2));

429 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

430 c⁄° 
sched_∑øm
 *
__∑øm
)

431 
__THROW
 
	`__n⁄nuŒ
 ((3));

434 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

435 *
__ª°ri˘
 
__pﬁicy
,

436 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

437 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

440 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

441 
__THROW
;

444 #ifde‡
__USE_GNU


446 
	$±hªad_gë«me_≈
 (
±hªad_t
 
__èrgë_thªad
, *
__buf
,

447 
size_t
 
__buÊí
)

448 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$±hªad_£äame_≈
 (
±hªad_t
 
__èrgë_thªad
, c⁄° *
__«me
)

452 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 #ifde‡
__USE_UNIX98


458 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

461 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

464 #ifde‡
__USE_GNU


469 
	$±hªad_yõld
 (Ë
__THROW
;

474 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

475 c⁄° 
˝u_£t_t
 *
__˝u£t
)

476 
__THROW
 
	`__n⁄nuŒ
 ((3));

479 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

480 
˝u_£t_t
 *
__˝u£t
)

481 
__THROW
 
	`__n⁄nuŒ
 ((3));

494 
	$±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

495 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

506 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

510 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

513 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

518 
	`±hªad_ã°ˇn˚l
 ();

527 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

528 
__mask_was_ßved
;

529 } 
__ˇn˚l_jmp_buf
[1];

530 *
__∑d
[4];

531 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

534 #i‚de‡
__˛ónup_f˘_©åibuã


535 
	#__˛ónup_f˘_©åibuã


	)

540 
	s__±hªad_˛ónup_‰ame


542 (*
__ˇn˚l_routöe
) (*);

543 *
__ˇn˚l_¨g
;

544 
__do_ô
;

545 
__ˇn˚l_ty≥
;

548 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


549 #ifde‡
__˝lu•lus


551 ˛as†
	c__±hªad_˛ónup_˛ass


553 (*
__ˇn˚l_routöe
) (*);

554 *
__ˇn˚l_¨g
;

555 
__do_ô
;

556 
__ˇn˚l_ty≥
;

558 
public
:

559 
	$__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

560 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

561 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

562 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

563 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

564 &
__ˇn˚l_ty≥
); 
	}
}

565 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

575 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

577 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

581 
	#±hªad_˛ónup_p›
(
execuã
) \

582 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

583 } 0)

	)

585 #ifde‡
__USE_GNU


589 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

591 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

592 
__˛‰ame
.
	`__de„r
 ()

	)

597 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

598 
__˛‰ame
.
	`__ª°‹e
 (); \

599 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

600 } 0)

	)

607 
__exã∫_ölöe
 

608 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

610 i‡(
__‰ame
->
__do_ô
)

611 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

612 
	}
}

621 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

623 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

624 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

625 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

626 .
__do_ô
 = 1 };

	)

630 
	#±hªad_˛ónup_p›
(
execuã
) \

631 
__˛‰ame
.
__do_ô
 = (
execuã
); \

632 } 0)

	)

634 #ifde‡
__USE_GNU


638 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

640 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

641 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

642 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

643 .
__do_ô
 = 1 }; \

644 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

645 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

650 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

651 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

652 
__˛‰ame
.
__do_ô
 = (
execuã
); \

653 } 0)

	)

664 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

666 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

667 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

668 *
__ˇn˚l_¨g
 = (
¨g
); \

669 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

670 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

671 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

673 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

674 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

678 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

679 dÿ{

	)

680 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

681 
__˛ónup_f˘_©åibuã
;

685 
	#±hªad_˛ónup_p›
(
execuã
) \

688 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

689 i‡(
execuã
) \

690 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

691 } 0)

	)

692 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

693 
__˛ónup_f˘_©åibuã
;

695 #ifde‡
__USE_GNU


699 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

701 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

702 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

703 *
__ˇn˚l_¨g
 = (
¨g
); \

704 
__nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) (*) \

705 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

706 i‡(
	`__glibc_u∆ikñy
 (
__nŸ_fú°_ˇŒ
)) \

708 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

709 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

713 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

714 dÿ{

	)

715 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

716 
__˛ónup_f˘_©åibuã
;

721 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

724 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

725 i‡(
execuã
) \

726 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

727 
	}
} 0)

	)

728 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

729 
__˛ónup_f˘_©åibuã
;

733 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

734 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

735 #i‚de‡
SHARED


736 
	`__©åibuã__
 ((
__wók__
))

742 
__jmp_buf_èg
;

743 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROWNL
;

749 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

750 c⁄° 
±hªad_muãx©å_t
 *
__muãx©å
)

751 
__THROW
 
	`__n⁄nuŒ
 ((1));

754 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

755 
__THROW
 
	`__n⁄nuŒ
 ((1));

758 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

759 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

762 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

763 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

765 #ifde‡
__USE_XOPEN2K


767 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

768 c⁄° 
time•ec
 *
__ª°ri˘


769 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

773 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

774 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

778 
	$±hªad_muãx_gë¥io˚ûög
 (c⁄° 
±hªad_muãx_t
 *

779 
__ª°ri˘
 
__muãx
,

780 *
__ª°ri˘
 
__¥io˚ûög
)

781 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

785 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

786 
__¥io˚ûög
,

787 *
__ª°ri˘
 
__ﬁd_˚ûög
)

788 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

791 #ifde‡
__USE_XOPEN2K8


793 
	$±hªad_muãx_c⁄si°ít
 (
±hªad_muãx_t
 *
__muãx
)

794 
__THROW
 
	`__n⁄nuŒ
 ((1));

795 #ifde‡
__USE_GNU


796 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

797 
__THROW
 
	`__n⁄nuŒ
 ((1));

806 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

807 
__THROW
 
	`__n⁄nuŒ
 ((1));

810 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1));

814 
	$±hªad_muãx©å_gëpsh¨ed
 (c⁄° 
±hªad_muãx©å_t
 *

815 
__ª°ri˘
 
__©å
,

816 *
__ª°ri˘
 
__psh¨ed
)

817 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

820 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

821 
__psh¨ed
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

824 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


826 
	$±hªad_muãx©å_gëty≥
 (c⁄° 
±hªad_muãx©å_t
 *
__ª°ri˘


827 
__©å
, *
__ª°ri˘
 
__köd
)

828 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

833 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1));

838 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (c⁄° 
±hªad_muãx©å_t
 *

839 
__ª°ri˘
 
__©å
,

840 *
__ª°ri˘
 
__¥Ÿocﬁ
)

841 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

845 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

846 
__¥Ÿocﬁ
)

847 
__THROW
 
	`__n⁄nuŒ
 ((1));

850 
	$±hªad_muãx©å_gë¥io˚ûög
 (c⁄° 
±hªad_muãx©å_t
 *

851 
__ª°ri˘
 
__©å
,

852 *
__ª°ri˘
 
__¥io˚ûög
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

856 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

857 
__¥io˚ûög
)

858 
__THROW
 
	`__n⁄nuŒ
 ((1));

860 #ifde‡
__USE_XOPEN2K


862 
	$±hªad_muãx©å_gërobu°
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

863 *
__robu°√ss
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

865 #ifde‡
__USE_GNU


866 
	$±hªad_muãx©å_gërobu°_≈
 (c⁄° 
±hªad_muãx©å_t
 *
__©å
,

867 *
__robu°√ss
)

868 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

872 
	$±hªad_muãx©å_£åobu°
 (
±hªad_muãx©å_t
 *
__©å
,

873 
__robu°√ss
)

874 
__THROW
 
	`__n⁄nuŒ
 ((1));

875 #ifde‡
__USE_GNU


876 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

877 
__robu°√ss
)

878 
__THROW
 
	`__n⁄nuŒ
 ((1));

883 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


888 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

889 c⁄° 
±hªad_rwlock©å_t
 *
__ª°ri˘


890 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

893 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

894 
__THROW
 
	`__n⁄nuŒ
 ((1));

897 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

898 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

901 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

902 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

904 #ifde‡
__USE_XOPEN2K


906 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

907 c⁄° 
time•ec
 *
__ª°ri˘


908 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

912 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

916 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

917 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

919 #ifde‡
__USE_XOPEN2K


921 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

922 c⁄° 
time•ec
 *
__ª°ri˘


923 
__ab°ime
Ë
__THROWNL
 
	`__n⁄nuŒ
 ((1, 2));

927 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

934 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

935 
__THROW
 
	`__n⁄nuŒ
 ((1));

938 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

939 
__THROW
 
	`__n⁄nuŒ
 ((1));

942 
	$±hªad_rwlock©å_gëpsh¨ed
 (c⁄° 
±hªad_rwlock©å_t
 *

943 
__ª°ri˘
 
__©å
,

944 *
__ª°ri˘
 
__psh¨ed
)

945 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

948 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

949 
__psh¨ed
)

950 
__THROW
 
	`__n⁄nuŒ
 ((1));

953 
	$±hªad_rwlock©å_gëköd_≈
 (c⁄° 
±hªad_rwlock©å_t
 *

954 
__ª°ri˘
 
__©å
,

955 *
__ª°ri˘
 
__¥ef
)

956 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

959 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

960 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

968 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

969 c⁄° 
±hªad_c⁄d©å_t
 *
__ª°ri˘
 
__c⁄d_©å
)

970 
__THROW
 
	`__n⁄nuŒ
 ((1));

973 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

974 
__THROW
 
	`__n⁄nuŒ
 ((1));

977 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

978 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

981 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

982 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

989 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

990 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

991 
	`__n⁄nuŒ
 ((1, 2));

1000 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

1001 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

1002 c⁄° 
time•ec
 *
__ª°ri˘
 
__ab°ime
)

1003 
	`__n⁄nuŒ
 ((1, 2, 3));

1008 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

1009 
__THROW
 
	`__n⁄nuŒ
 ((1));

1012 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

1013 
__THROW
 
	`__n⁄nuŒ
 ((1));

1016 
	$±hªad_c⁄d©å_gëpsh¨ed
 (c⁄° 
±hªad_c⁄d©å_t
 *

1017 
__ª°ri˘
 
__©å
,

1018 *
__ª°ri˘
 
__psh¨ed
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1022 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

1023 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1025 #ifde‡
__USE_XOPEN2K


1027 
	$±hªad_c⁄d©å_gë˛ock
 (c⁄° 
±hªad_c⁄d©å_t
 *

1028 
__ª°ri˘
 
__©å
,

1029 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1033 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

1034 
__˛ockid_t
 
__˛ock_id
)

1035 
__THROW
 
	`__n⁄nuŒ
 ((1));

1039 #ifde‡
__USE_XOPEN2K


1044 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1045 
__THROW
 
	`__n⁄nuŒ
 ((1));

1048 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1049 
__THROW
 
	`__n⁄nuŒ
 ((1));

1052 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1053 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1056 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1057 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1060 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1061 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1068 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1069 c⁄° 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1070 
__©å
, 
__cou¡
)

1071 
__THROW
 
	`__n⁄nuŒ
 ((1));

1074 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1075 
__THROW
 
	`__n⁄nuŒ
 ((1));

1078 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1079 
__THROWNL
 
	`__n⁄nuŒ
 ((1));

1083 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1084 
__THROW
 
	`__n⁄nuŒ
 ((1));

1087 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1088 
__THROW
 
	`__n⁄nuŒ
 ((1));

1091 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (c⁄° 
±hªad_b¨rõøâr_t
 *

1092 
__ª°ri˘
 
__©å
,

1093 *
__ª°ri˘
 
__psh¨ed
)

1094 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1097 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1098 
__psh¨ed
)

1099 
__THROW
 
	`__n⁄nuŒ
 ((1));

1111 
	$±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1112 (*
__de°r_fun˘i⁄
) (*))

1113 
__THROW
 
	`__n⁄nuŒ
 ((1));

1116 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1119 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1122 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1123 c⁄° *
__poöãr
Ë
__THROW
 ;

1126 #ifde‡
__USE_XOPEN2K


1128 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1129 
__˛ockid_t
 *
__˛ock_id
)

1130 
__THROW
 
	`__n⁄nuŒ
 ((2));

1145 
	$±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1146 (*
__∑ª¡
) (),

1147 (*
__chûd
Ë()Ë
__THROW
;

1150 #ifde‡
__USE_EXTERN_INLINES


1152 
__exã∫_ölöe
 

1153 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1155  
__thªad1
 =
__thªad2
;

1156 
	}
}

1159 
	g__END_DECLS


	@/usr/include/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

144 #i‡
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
Ë¯## 
L


	)

146 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

148 
	#__INT64_C
(
c
Ë¯## 
LL


	)

149 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #i‡
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #i‡
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #i‡
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #i‡
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #i‡
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #i‡
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifde‡
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #i‚de‡
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
Ë
	)
c

283 
	#INT16_C
(
c
Ë
	)
c

284 
	#INT32_C
(
c
Ë
	)
c

285 #i‡
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
Ë¯## 
L


	)

288 
	#INT64_C
(
c
Ë¯## 
LL


	)

292 
	#UINT8_C
(
c
Ë
	)
c

293 
	#UINT16_C
(
c
Ë
	)
c

294 
	#UINT32_C
(
c
Ë¯## 
U


	)

295 #i‡
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
Ë¯## 
UL


	)

298 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

302 #i‡
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
Ë¯## 
L


	)

304 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

306 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

307 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_MISC


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #ifde‡
__USE_POSIX


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #ifde‡
__USE_POSIX


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #ifde‡
__USE_POSIX2


872 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

878 
	`p˛o£
 (
FILE
 *
__°ªam
);

882 #ifdef 
__USE_POSIX


884 *
	$˘îmid
 (*
__s
Ë
__THROW
;

888 #ifde‡
__USE_XOPEN


890 *
	`cu£rid
 (*
__s
);

894 #ifdef 
__USE_GNU


895 
ob°ack
;

898 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

899 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

900 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

901 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

902 c⁄° *
__ª°ri˘
 
__f‹m©
,

903 
_G_va_li°
 
__¨gs
)

904 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

908 #ifde‡
__USE_POSIX


912 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

916 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

919 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

922 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


926 
	#__√ed_gë›t


	)

927 
	~<gë›t.h
>

932 #ifde‡
__USE_EXTERN_INLINES


933 
	~<bôs/°dio.h
>

935 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


936 
	~<bôs/°dio2.h
>

938 #ifde‡
__LDBL_COMPAT


939 
	~<bôs/°dio-ldbl.h
>

942 
__END_DECLS


	@/usr/include/sys/stat.h

22 #i‚def 
_SYS_STAT_H


23 
	#_SYS_STAT_H
 1

	)

25 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K
 || deföed 
__USE_ATFILE


30 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


31 
	#__√ed_time_t


	)

33 #ifde‡
__USE_ATFILE


34 
	#__√ed_time•ec


	)

36 
	~<time.h
>

39 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


42 #i‚de‡
__dev_t_deföed


43 
__dev_t
 
	tdev_t
;

44 
	#__dev_t_deföed


	)

47 #i‚de‡
__gid_t_deföed


48 
__gid_t
 
	tgid_t
;

49 
	#__gid_t_deföed


	)

52 #i‚de‡
__öo_t_deföed


53 #i‚de‡
__USE_FILE_OFFSET64


54 
__öo_t
 
	töo_t
;

56 
__öo64_t
 
	töo_t
;

58 
	#__öo_t_deföed


	)

61 #i‚de‡
__mode_t_deföed


62 
__mode_t
 
	tmode_t
;

63 
	#__mode_t_deföed


	)

66 #i‚de‡
__∆ök_t_deföed


67 
__∆ök_t
 
	t∆ök_t
;

68 
	#__∆ök_t_deföed


	)

71 #i‚de‡
__off_t_deföed


72 #i‚de‡
__USE_FILE_OFFSET64


73 
__off_t
 
	toff_t
;

75 
__off64_t
 
	toff_t
;

77 
	#__off_t_deföed


	)

80 #i‚de‡
__uid_t_deföed


81 
__uid_t
 
	tuid_t
;

82 
	#__uid_t_deföed


	)

86 #ifde‡
__USE_UNIX98


87 #i‚de‡
__blk˙t_t_deföed


88 #i‚de‡
__USE_FILE_OFFSET64


89 
__blk˙t_t
 
	tblk˙t_t
;

91 
__blk˙t64_t
 
	tblk˙t_t
;

93 
	#__blk˙t_t_deföed


	)

96 #i‚de‡
__blksize_t_deföed


97 
__blksize_t
 
	tblksize_t
;

98 
	#__blksize_t_deföed


	)

102 
	g__BEGIN_DECLS


104 
	~<bôs/°©.h
>

106 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


107 
	#S_IFMT
 
__S_IFMT


	)

108 
	#S_IFDIR
 
__S_IFDIR


	)

109 
	#S_IFCHR
 
__S_IFCHR


	)

110 
	#S_IFBLK
 
__S_IFBLK


	)

111 
	#S_IFREG
 
__S_IFREG


	)

112 #ifde‡
__S_IFIFO


113 
	#S_IFIFO
 
__S_IFIFO


	)

115 #ifde‡
__S_IFLNK


116 
	#S_IFLNK
 
__S_IFLNK


	)

118 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_UNIX98
) \

119 && 
deföed
 
	g__S_IFSOCK


120 
	#S_IFSOCK
 
__S_IFSOCK


	)

126 
	#__S_ISTYPE
(
mode
, 
mask
Ë(((modeË& 
__S_IFMT
Ë=(mask))

	)

128 
	#S_ISDIR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

129 
	#S_ISCHR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

130 
	#S_ISBLK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

131 
	#S_ISREG
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

132 #ifde‡
__S_IFIFO


133 
	#S_ISFIFO
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

135 #ifde‡
__S_IFLNK


136 
	#S_ISLNK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

139 #i‡
deföed
 
__USE_MISC
 && !deföed 
__S_IFLNK


140 
	#S_ISLNK
(
mode
Ë0

	)

143 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K
) \

144 && 
deföed
 
	g__S_IFSOCK


145 
	#S_ISSOCK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

146 #ñi‡
deföed
 
__USE_XOPEN2K


147 
	#S_ISSOCK
(
mode
Ë0

	)

154 #ifdef 
__USE_POSIX199309


155 
	#S_TYPEISMQ
(
buf
Ë
	`__S_TYPEISMQ
(buf)

	)

156 
	#S_TYPEISSEM
(
buf
Ë
	`__S_TYPEISSEM
(buf)

	)

157 
	#S_TYPEISSHM
(
buf
Ë
	`__S_TYPEISSHM
(buf)

	)

163 
	#S_ISUID
 
__S_ISUID


	)

164 
	#S_ISGID
 
__S_ISGID


	)

166 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


168 
	#S_ISVTX
 
__S_ISVTX


	)

171 
	#S_IRUSR
 
__S_IREAD


	)

172 
	#S_IWUSR
 
__S_IWRITE


	)

173 
	#S_IXUSR
 
__S_IEXEC


	)

175 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

177 #ifde‡
__USE_MISC


178 
	#S_IREAD
 
S_IRUSR


	)

179 
	#S_IWRITE
 
S_IWUSR


	)

180 
	#S_IEXEC
 
S_IXUSR


	)

183 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

184 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

185 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

187 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

189 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

190 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

191 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

193 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

196 #ifdef 
__USE_MISC


198 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
Ë

	)

199 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

200 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

202 
	#S_BLKSIZE
 512

	)

206 #i‚de‡
__USE_FILE_OFFSET64


208 
	$°©
 (c⁄° *
__ª°ri˘
 
__fûe
,

209 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

213 
	$f°©
 (
__fd
, 
°©
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

215 #ifde‡
__REDIRECT_NTH


216 
	`__REDIRECT_NTH
 (
°©
, (c⁄° *
__ª°ri˘
 
__fûe
,

217 
°©
 *
__ª°ri˘
 
__buf
), 
°©64
)

218 
	`__n⁄nuŒ
 ((1, 2));

219 
	`__REDIRECT_NTH
 (
f°©
, (
__fd
, 
°©
 *
__buf
), 
f°©64
)

220 
	`__n⁄nuŒ
 ((2));

222 
	#°©
 
°©64


	)

223 
	#f°©
 
f°©64


	)

226 #ifde‡
__USE_LARGEFILE64


227 
	$°©64
 (c⁄° *
__ª°ri˘
 
__fûe
,

228 
°©64
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

229 
	$f°©64
 (
__fd
, 
°©64
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

232 #ifde‡
__USE_ATFILE


236 #i‚de‡
__USE_FILE_OFFSET64


237 
	$f°©©
 (
__fd
, c⁄° *
__ª°ri˘
 
__fûe
,

238 
°©
 *
__ª°ri˘
 
__buf
, 
__Êag
)

239 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

241 #ifde‡
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
f°©©
, (
__fd
, c⁄° *
__ª°ri˘
 
__fûe
,

243 
°©
 *
__ª°ri˘
 
__buf
,

244 
__Êag
),

245 
f°©©64
Ë
	`__n⁄nuŒ
 ((2, 3));

247 
	#f°©©
 
f°©©64


	)

251 #ifde‡
__USE_LARGEFILE64


252 
	$f°©©64
 (
__fd
, c⁄° *
__ª°ri˘
 
__fûe
,

253 
°©64
 *
__ª°ri˘
 
__buf
, 
__Êag
)

254 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

258 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


259 #i‚de‡
__USE_FILE_OFFSET64


262 
	$l°©
 (c⁄° *
__ª°ri˘
 
__fûe
,

263 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

265 #ifde‡
__REDIRECT_NTH


266 
	`__REDIRECT_NTH
 (
l°©
,

267 (c⁄° *
__ª°ri˘
 
__fûe
,

268 
°©
 *
__ª°ri˘
 
__buf
), 
l°©64
)

269 
	`__n⁄nuŒ
 ((1, 2));

271 
	#l°©
 
l°©64


	)

274 #ifde‡
__USE_LARGEFILE64


275 
	$l°©64
 (c⁄° *
__ª°ri˘
 
__fûe
,

276 
°©64
 *
__ª°ri˘
 
__buf
)

277 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

283 
	$chmod
 (c⁄° *
__fûe
, 
__mode_t
 
__mode
)

284 
__THROW
 
	`__n⁄nuŒ
 ((1));

286 #ifde‡
__USE_MISC


290 
	$lchmod
 (c⁄° *
__fûe
, 
__mode_t
 
__mode
)

291 
__THROW
 
	`__n⁄nuŒ
 ((1));

295 #ifde‡
__USE_POSIX


296 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
Ë
__THROW
;

299 #ifde‡
__USE_ATFILE


302 
	$fchmod©
 (
__fd
, c⁄° *
__fûe
, 
__mode_t
 
__mode
,

303 
__Êag
)

304 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

311 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
Ë
__THROW
;

313 #ifdef 
__USE_GNU


316 
__mode_t
 
	$gëumask
 (Ë
__THROW
;

320 
	$mkdú
 (c⁄° *
__∑th
, 
__mode_t
 
__mode
)

321 
__THROW
 
	`__n⁄nuŒ
 ((1));

323 #ifde‡
__USE_ATFILE


327 
	$mkdú©
 (
__fd
, c⁄° *
__∑th
, 
__mode_t
 
__mode
)

328 
__THROW
 
	`__n⁄nuŒ
 ((2));

334 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


335 
	$mknod
 (c⁄° *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

336 
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_ATFILE


342 
	$mknod©
 (
__fd
, c⁄° *
__∑th
, 
__mode_t
 
__mode
,

343 
__dev_t
 
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

349 
	$mkfifo
 (c⁄° *
__∑th
, 
__mode_t
 
__mode
)

350 
__THROW
 
	`__n⁄nuŒ
 ((1));

352 #ifde‡
__USE_ATFILE


356 
	$mkfifﬂt
 (
__fd
, c⁄° *
__∑th
, 
__mode_t
 
__mode
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 #ifde‡
__USE_ATFILE


363 
	$utimíßt
 (
__fd
, c⁄° *
__∑th
,

364 c⁄° 
time•ec
 
__times
[2],

365 
__Êags
)

366 
__THROW
 
	`__n⁄nuŒ
 ((2));

369 #ifde‡
__USE_XOPEN2K8


371 
	$futimís
 (
__fd
, c⁄° 
time•ec
 
__times
[2]Ë
__THROW
;

389 #i‚de‡
_STAT_VER


390 
	#_STAT_VER
 0

	)

392 #i‚de‡
_MKNOD_VER


393 
	#_MKNOD_VER
 0

	)

397 #i‚de‡
__USE_FILE_OFFSET64


398 
	$__fx°©
 (
__vî
, 
__fûdes
, 
°©
 *
__°©_buf
)

399 
__THROW
 
	`__n⁄nuŒ
 ((3));

400 
	$__x°©
 (
__vî
, c⁄° *
__fûíame
,

401 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

402 
	$__lx°©
 (
__vî
, c⁄° *
__fûíame
,

403 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

404 
	$__fx°©©
 (
__vî
, 
__fûdes
, c⁄° *
__fûíame
,

405 
°©
 *
__°©_buf
, 
__Êag
)

406 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

408 #ifde‡
__REDIRECT_NTH


409 
	`__REDIRECT_NTH
 (
__fx°©
, (
__vî
, 
__fûdes
,

410 
°©
 *
__°©_buf
), 
__fx°©64
)

411 
	`__n⁄nuŒ
 ((3));

412 
	`__REDIRECT_NTH
 (
__x°©
, (
__vî
, c⁄° *
__fûíame
,

413 
°©
 *
__°©_buf
), 
__x°©64
)

414 
	`__n⁄nuŒ
 ((2, 3));

415 
	`__REDIRECT_NTH
 (
__lx°©
, (
__vî
, c⁄° *
__fûíame
,

416 
°©
 *
__°©_buf
), 
__lx°©64
)

417 
	`__n⁄nuŒ
 ((2, 3));

418 
	`__REDIRECT_NTH
 (
__fx°©©
, (
__vî
, 
__fûdes
,

419 c⁄° *
__fûíame
,

420 
°©
 *
__°©_buf
, 
__Êag
),

421 
__fx°©©64
Ë
	`__n⁄nuŒ
 ((3, 4));

424 
	#__fx°©
 
__fx°©64


	)

425 
	#__x°©
 
__x°©64


	)

426 
	#__lx°©
 
__lx°©64


	)

430 #ifde‡
__USE_LARGEFILE64


431 
	$__fx°©64
 (
__vî
, 
__fûdes
, 
°©64
 *
__°©_buf
)

432 
__THROW
 
	`__n⁄nuŒ
 ((3));

433 
	$__x°©64
 (
__vî
, c⁄° *
__fûíame
,

434 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

435 
	$__lx°©64
 (
__vî
, c⁄° *
__fûíame
,

436 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

437 
	$__fx°©©64
 (
__vî
, 
__fûdes
, c⁄° *
__fûíame
,

438 
°©64
 *
__°©_buf
, 
__Êag
)

439 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

441 
	$__xmknod
 (
__vî
, c⁄° *
__∑th
, 
__mode_t
 
__mode
,

442 
__dev_t
 *
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

444 
	$__xmknod©
 (
__vî
, 
__fd
, c⁄° *
__∑th
,

445 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

446 
__THROW
 
	`__n⁄nuŒ
 ((3, 5));

448 #ifde‡
__USE_EXTERN_INLINES


451 
__exã∫_ölöe
 

452 
	`__NTH
 (
	$°©
 (c⁄° *
__∑th
, 
°©
 *
__°©buf
))

454  
	`__x°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

455 
	}
}

457 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


458 
__exã∫_ölöe
 

459 
__NTH
 (
	$l°©
 (c⁄° *
__∑th
, 
°©
 *
__°©buf
))

461  
	`__lx°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

462 
	}
}

465 
__exã∫_ölöe
 

466 
__NTH
 (
	$f°©
 (
__fd
, 
°©
 *
__°©buf
))

468  
	`__fx°©
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

469 
	}
}

471 #ifde‡
__USE_ATFILE


472 
__exã∫_ölöe
 

473 
__NTH
 (
	$f°©©
 (
__fd
, c⁄° *
__fûíame
, 
°©
 *
__°©buf
,

474 
__Êag
))

476  
	`__fx°©©
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

477 
	}
}

480 #ifde‡
__USE_MISC


481 
__exã∫_ölöe
 

482 
__NTH
 (
	$mknod
 (c⁄° *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

484  
	`__xmknod
 (
_MKNOD_VER
, 
__∑th
, 
__mode
, &
__dev
);

485 
	}
}

488 #ifde‡
__USE_ATFILE


489 
__exã∫_ölöe
 

490 
__NTH
 (
	$mknod©
 (
__fd
, c⁄° *
__∑th
, 
__mode_t
 
__mode
,

491 
__dev_t
 
__dev
))

493  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__∑th
, 
__mode
, &
__dev
);

494 
	}
}

497 #i‡
deföed
 
__USE_LARGEFILE64
 \

498 && (! 
deföed
 
	g__USE_FILE_OFFSET64
 \

499 || (
deföed
 
	g__REDIRECT_NTH
 && deföed 
	g__OPTIMIZE__
))

500 
__exã∫_ölöe
 

501 
__NTH
 (
	$°©64
 (c⁄° *
__∑th
, 
°©64
 *
__°©buf
))

503  
	`__x°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

504 
	}
}

506 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


507 
__exã∫_ölöe
 

508 
__NTH
 (
	$l°©64
 (c⁄° *
__∑th
, 
°©64
 *
__°©buf
))

510  
	`__lx°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

511 
	}
}

514 
__exã∫_ölöe
 

515 
__NTH
 (
	$f°©64
 (
__fd
, 
°©64
 *
__°©buf
))

517  
	`__fx°©64
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

518 
	}
}

520 #ifde‡
__USE_ATFILE


521 
__exã∫_ölöe
 

522 
__NTH
 (
	$f°©©64
 (
__fd
, c⁄° *
__fûíame
, 
°©64
 *
__°©buf
,

523 
__Êag
))

525  
	`__fx°©©64
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

526 
	}
}

533 
	g__END_DECLS


	@/usr/include/sys/time.h

18 #i‚de‡
_SYS_TIME_H


19 
	#_SYS_TIME_H
 1

	)

21 
	~<„©uªs.h
>

23 
	~<bôs/ty≥s.h
>

24 
	#__√ed_time_t


	)

25 
	~<time.h
>

26 
	#__√ed_timevÆ


	)

27 
	~<bôs/time.h
>

29 
	~<sys/£À˘.h
>

31 #i‚de‡
__su£c⁄ds_t_deföed


32 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

33 
	#__su£c⁄ds_t_deföed


	)

37 
	g__BEGIN_DECLS


39 #ifde‡
__USE_GNU


41 
	#TIMEVAL_TO_TIMESPEC
(
tv
, 
ts
) { \

42 (
ts
)->
tv_£c
 = (
tv
)->tv_sec; \

43 (
ts
)->
tv_n£c
 = (
tv
)->
tv_u£c
 * 1000; \

44 }

	)

45 
	#TIMESPEC_TO_TIMEVAL
(
tv
, 
ts
) { \

46 (
tv
)->
tv_£c
 = (
ts
)->tv_sec; \

47 (
tv
)->
tv_u£c
 = (
ts
)->
tv_n£c
 / 1000; \

48 }

	)

52 #ifde‡
__USE_MISC


55 
	stimez⁄e


57 
	mtz_möuãswe°
;

58 
	mtz_d°time
;

61 
timez⁄e
 *
	t__ª°ri˘
 
	t__timez⁄e_±r_t
;

63 *
	t__ª°ri˘
 
	t__timez⁄e_±r_t
;

71 
	$gëtimeofday
 (
timevÆ
 *
__ª°ri˘
 
__tv
,

72 
__timez⁄e_±r_t
 
__tz
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

74 #ifde‡
__USE_MISC


77 
	$£âimeofday
 (c⁄° 
timevÆ
 *
__tv
,

78 c⁄° 
timez⁄e
 *
__tz
)

79 
__THROW
;

85 
	$adjtime
 (c⁄° 
timevÆ
 *
__dñè
,

86 
timevÆ
 *
__ﬁddñè
Ë
__THROW
;

91 
	e__ôimî_which


94 
ITIMER_REAL
 = 0,

95 
	#ITIMER_REAL
 
ITIMER_REAL


	)

97 
ITIMER_VIRTUAL
 = 1,

98 
	#ITIMER_VIRTUAL
 
ITIMER_VIRTUAL


	)

101 
ITIMER_PROF
 = 2

102 
	#ITIMER_PROF
 
ITIMER_PROF


	)

107 
	sôimîvÆ


110 
timevÆ
 
ô_öãrvÆ
;

112 
timevÆ
 
ô_vÆue
;

115 #i‡
deföed
 
__USE_GNU
 && !deföed 
__˝lu•lus


118 
__ôimî_which
 
	t__ôimî_which_t
;

120 
	t__ôimî_which_t
;

125 
	$gëôimî
 (
__ôimî_which_t
 
__which
,

126 
ôimîvÆ
 *
__vÆue
Ë
__THROW
;

131 
	$£tôimî
 (
__ôimî_which_t
 
__which
,

132 c⁄° 
ôimîvÆ
 *
__ª°ri˘
 
__√w
,

133 
ôimîvÆ
 *
__ª°ri˘
 
__ﬁd
Ë
__THROW
;

138 
	$utimes
 (c⁄° *
__fûe
, c⁄° 
timevÆ
 
__tvp
[2])

139 
__THROW
 
	`__n⁄nuŒ
 ((1));

141 #ifde‡
__USE_MISC


143 
	$lutimes
 (c⁄° *
__fûe
, c⁄° 
timevÆ
 
__tvp
[2])

144 
__THROW
 
	`__n⁄nuŒ
 ((1));

147 
	$futimes
 (
__fd
, c⁄° 
timevÆ
 
__tvp
[2]Ë
__THROW
;

150 #ifde‡
__USE_GNU


154 
	$futimeßt
 (
__fd
, c⁄° *
__fûe
,

155 c⁄° 
timevÆ
 
__tvp
[2]Ë
__THROW
;

159 #ifde‡
__USE_MISC


162 
	#timîis£t
(
tvp
Ë(—vp)->
tv_£c
 || (tvp)->
tv_u£c
)

	)

163 
	#timî˛ór
(
tvp
Ë(—vp)->
tv_£c
 = (tvp)->
tv_u£c
 = 0)

	)

164 
	#timîcmp
(
a
, 
b
, 
CMP
) \

165 (((
a
)->
tv_£c
 =(
b
)->tv_sec) ? \

166 ((
a
)->
tv_u£c
 
	`CMP
 (
b
)->tv_usec) : \

167 ((
a
)->
tv_£c
 
	`CMP
 (
b
)->tv_£c))

	)

168 
	#timîadd
(
a
, 
b
, 
ªsu…
) \

170 (
ªsu…
)->
tv_£c
 = (
a
)->tv_£¯+ (
b
)->tv_sec; \

171 (
ªsu…
)->
tv_u£c
 = (
a
)->tv_u£¯+ (
b
)->tv_usec; \

172 i‡((
ªsu…
)->
tv_u£c
 >= 1000000) \

174 ++(
ªsu…
)->
tv_£c
; \

175 (
ªsu…
)->
tv_u£c
 -= 1000000; \

177 
	}
} 0)

	)

178 
	#timîsub
(
a
, 
b
, 
ªsu…
) \

180 (
ªsu…
)->
tv_£c
 = (
a
)->tv_£¯- (
b
)->tv_sec; \

181 (
ªsu…
)->
tv_u£c
 = (
a
)->tv_u£¯- (
b
)->tv_usec; \

182 i‡((
ªsu…
)->
tv_u£c
 < 0) { \

183 --(
ªsu…
)->
tv_£c
; \

184 (
ªsu…
)->
tv_u£c
 += 1000000; \

186 } 0)

	)

189 
	g__END_DECLS


	@/usr/include/sys/types.h

22 #i‚def 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<„©uªs.h
>

27 
	g__BEGIN_DECLS


29 
	~<bôs/ty≥s.h
>

31 #ifdef 
__USE_MISC


32 #i‚de‡
__u_ch¨_deföed


33 
__u_ch¨
 
	tu_ch¨
;

34 
__u_sh‹t
 
	tu_sh‹t
;

35 
__u_öt
 
	tu_öt
;

36 
__u_l⁄g
 
	tu_l⁄g
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¨_deföed


	)

44 
__loff_t
 
	tloff_t
;

46 #i‚de‡
__öo_t_deföed


47 #i‚de‡
__USE_FILE_OFFSET64


48 
__öo_t
 
	töo_t
;

50 
__öo64_t
 
	töo_t
;

52 
	#__öo_t_deföed


	)

54 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


55 
__öo64_t
 
	töo64_t
;

56 
	#__öo64_t_deföed


	)

59 #i‚de‡
__dev_t_deföed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_deföed


	)

64 #i‚de‡
__gid_t_deföed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_deföed


	)

69 #i‚de‡
__mode_t_deföed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_deföed


	)

74 #i‚de‡
__∆ök_t_deföed


75 
__∆ök_t
 
	t∆ök_t
;

76 
	#__∆ök_t_deföed


	)

79 #i‚de‡
__uid_t_deföed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_deföed


	)

84 #i‚de‡
__off_t_deföed


85 #i‚de‡
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_deföed


	)

92 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_deföed


	)

97 #i‚de‡
__pid_t_deföed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_deföed


	)

102 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
) \

103 && !
deföed
 
__id_t_deföed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_deföed


	)

108 #i‚de‡
__ssize_t_deföed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_deföed


	)

113 #ifdef 
__USE_MISC


114 #i‚de‡
__daddr_t_deföed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ˇddr_t
 
	tˇddr_t
;

117 
	#__daddr_t_deföed


	)

121 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__key_t_deföed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_deföed


	)

126 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


127 
	#__√ed_˛ock_t


	)

129 
	#__√ed_time_t


	)

130 
	#__√ed_timî_t


	)

131 
	#__√ed_˛ockid_t


	)

132 
	~<time.h
>

134 #ifde‡
__USE_XOPEN


135 #i‚de‡
__u£c⁄ds_t_deföed


136 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

137 
	#__u£c⁄ds_t_deföed


	)

139 #i‚de‡
__su£c⁄ds_t_deföed


140 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

141 
	#__su£c⁄ds_t_deföed


	)

145 
	#__√ed_size_t


	)

146 
	~<°ddef.h
>

148 #ifde‡
__USE_MISC


150 
	tul⁄g
;

151 
	tush‹t
;

152 
	tuöt
;

157 #i‡!
__GNUC_PREREQ
 (2, 7)

160 #i‚de‡
__öt8_t_deföed


161 
	#__öt8_t_deföed


	)

162 
	töt8_t
;

163 
	töt16_t
;

164 
	töt32_t
;

165 #i‡
__WORDSIZE
 == 64

166 
	töt64_t
;

168 
__exãnsi⁄__
 
	töt64_t
;

173 
	tu_öt8_t
;

174 
	tu_öt16_t
;

175 
	tu_öt32_t
;

176 #i‡
__WORDSIZE
 == 64

177 
	tu_öt64_t
;

179 
__exãnsi⁄__
 
	tu_öt64_t
;

182 
	tªgi°î_t
;

187 
	#__ötN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_ötN_t
(
	tN
, 
	tMODE
) \

190 
	tu_öt
##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #i‚de‡
	t__öt8_t_deföed


193 
	t__öt8_t_deföed


	)

194 
	t__ötN_t
 (8, 
	t__QI__
);

195 
__ötN_t
 (16, 
__HI__
);

196 
__ötN_t
 (32, 
__SI__
);

197 
__ötN_t
 (64, 
__DI__
);

200 
__u_ötN_t
 (8, 
__QI__
);

201 
__u_ötN_t
 (16, 
__HI__
);

202 
__u_ötN_t
 (32, 
__SI__
);

203 
__u_ötN_t
 (64, 
__DI__
);

205 
	tªgi°î_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__w‹d__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_MISC


216 
	~<ídün.h
>

219 
	~<sys/£À˘.h
>

222 
	~<sys/sysma¸os.h
>

226 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
) \

227 && !
deföed
 
__blksize_t_deföed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_deföed


	)

233 #i‚de‡
__USE_FILE_OFFSET64


234 #i‚de‡
__blk˙t_t_deföed


235 
__blk˙t_t
 
	tblk˙t_t
;

236 
	#__blk˙t_t_deföed


	)

238 #i‚de‡
__fsblk˙t_t_deföed


239 
__fsblk˙t_t
 
	tfsblk˙t_t
;

240 
	#__fsblk˙t_t_deföed


	)

242 #i‚de‡
__fsfû˙t_t_deföed


243 
__fsfû˙t_t
 
	tfsfû˙t_t
;

244 
	#__fsfû˙t_t_deföed


	)

247 #i‚de‡
__blk˙t_t_deföed


248 
__blk˙t64_t
 
	tblk˙t_t
;

249 
	#__blk˙t_t_deföed


	)

251 #i‚de‡
__fsblk˙t_t_deföed


252 
__fsblk˙t64_t
 
	tfsblk˙t_t
;

253 
	#__fsblk˙t_t_deföed


	)

255 #i‚de‡
__fsfû˙t_t_deföed


256 
__fsfû˙t64_t
 
	tfsfû˙t_t
;

257 
	#__fsfû˙t_t_deföed


	)

261 #ifde‡
__USE_LARGEFILE64


262 
__blk˙t64_t
 
	tblk˙t64_t
;

263 
__fsblk˙t64_t
 
	tfsblk˙t64_t
;

264 
__fsfû˙t64_t
 
	tfsfû˙t64_t
;

269 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


270 
	~<bôs/±hªadty≥s.h
>

273 
	g__END_DECLS


	@/usr/include/bits/dirent.h

18 #i‚de‡
_DIRENT_H


22 
	sdúít


24 #i‚de‡
__USE_FILE_OFFSET64


25 
__öo_t
 
	md_öo
;

26 
__off_t
 
	md_off
;

28 
__öo64_t
 
	md_öo
;

29 
__off64_t
 
	md_off
;

31 
	md_ª˛í
;

32 
	md_ty≥
;

33 
	md_«me
[256];

36 #ifde‡
__USE_LARGEFILE64


37 
	sdúít64


39 
__öo64_t
 
	md_öo
;

40 
__off64_t
 
	md_off
;

41 
	md_ª˛í
;

42 
	md_ty≥
;

43 
	md_«me
[256];

47 
	#d_fûío
 
d_öo


	)

49 #unde‡
_DIRENT_HAVE_D_NAMLEN


50 
	#_DIRENT_HAVE_D_RECLEN


	)

51 
	#_DIRENT_HAVE_D_OFF


	)

52 
	#_DIRENT_HAVE_D_TYPE


	)

54 #i‡
deföed
 
__OFF_T_MATCHES_OFF64_T
 && deföed 
__INO_T_MATCHES_INO64_T


56 
	#_DIRENT_MATCHES_DIRENT64
 1

	)

	@/usr/include/bits/errno.h

19 #ifde‡
_ERRNO_H


21 #unde‡
EDOM


22 #unde‡
EILSEQ


23 #unde‡
ERANGE


24 
	~<löux/î∫o.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #i‚de‡
ECANCELED


31 
	#ECANCELED
 125

	)

35 #i‚de‡
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #i‚de‡
ERFKILL


41 
	#ERFKILL
 132

	)

44 #i‚de‡
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #i‚de‡
__ASSEMBLER__


50 *
	$__î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

52 #i‡!
deföed
 
_LIBC
 || deföed 
_LIBC_REENTRANT


54 
	#î∫o
 (*
	`__î∫o_loˇti⁄
 ())

	)

59 #i‡!
deföed
 
_ERRNO_H
 && deföed 
__√ed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/fenv.h

18 #i‚de‡
_FENV_H


26 
	mFE_INVALID
 =

27 
	#FE_INVALID
 0x01

	)

28 
FE_INVALID
,

29 
	m__FE_DENORM
 = 0x02,

30 
	mFE_DIVBYZERO
 =

31 
	#FE_DIVBYZERO
 0x04

	)

32 
FE_DIVBYZERO
,

33 
	mFE_OVERFLOW
 =

34 
	#FE_OVERFLOW
 0x08

	)

35 
FE_OVERFLOW
,

36 
	mFE_UNDERFLOW
 =

37 
	#FE_UNDERFLOW
 0x10

	)

38 
FE_UNDERFLOW
,

39 
	mFE_INEXACT
 =

40 
	#FE_INEXACT
 0x20

	)

41 
FE_INEXACT


44 
	#FE_ALL_EXCEPT
 \

45 (
FE_INEXACT
 | 
FE_DIVBYZERO
 | 
FE_UNDERFLOW
 | 
FE_OVERFLOW
 | 
FE_INVALID
)

	)

52 
	mFE_TONEAREST
 =

53 
	#FE_TONEAREST
 0

	)

54 
FE_TONEAREST
,

55 
	mFE_DOWNWARD
 =

56 
	#FE_DOWNWARD
 0x400

	)

57 
FE_DOWNWARD
,

58 
	mFE_UPWARD
 =

59 
	#FE_UPWARD
 0x800

	)

60 
FE_UPWARD
,

61 
	mFE_TOWARDZERO
 =

62 
	#FE_TOWARDZERO
 0xc00

	)

63 
FE_TOWARDZERO


68 
	t„x˚±_t
;

77 
	m__c⁄åﬁ_w‹d
;

78 
	m__glibc_ª£rved1
;

79 
	m__°©us_w‹d
;

80 
	m__glibc_ª£rved2
;

81 
	m__ègs
;

82 
	m__glibc_ª£rved3
;

83 
	m__eù
;

84 
	m__cs_£À˘‹
;

85 
	m__›code
:11;

86 
	m__glibc_ª£rved4
:5;

87 
	m__d©a_off£t
;

88 
	m__d©a_£À˘‹
;

89 
	m__glibc_ª£rved5
;

90 #ifde‡
__x86_64__


91 
	m__mxc§
;

94 
	t„nv_t
;

97 
	#FE_DFL_ENV
 ((c⁄° 
„nv_t
 *Ë-1)

	)

99 #ifde‡
__USE_GNU


101 
	#FE_NOMASK_ENV
 ((c⁄° 
„nv_t
 *Ë-2)

	)

105 #ifde‡
__USE_EXTERN_INLINES


106 
__BEGIN_DECLS


109 
__REDIRECT_NTH
 (
__„øi£ex˚±_ª«med
, (), 
„øi£ex˚±
);

110 
__exã∫_Æways_ölöe
 

111 
__NTH
 (
	$__„øi£ex˚±_övÆid_divbyzîo
 (
__ex˚±s
))

113 i‡((
FE_INVALID
 & 
__ex˚±s
) != 0)

116 
__f
 = 0.0;

118 #ifde‡
__SSE_MATH__


119 
__asm__
 
	`__vﬁ©ûe__
 ("divs†%0, %0 " : : "x" (
__f
));

121 
__asm__
 
	`__vﬁ©ûe__
 ("fdiv %%st, %%st(0); fwait"

122 : "Ò" (
__f
) : "0" (__f));

124 (Ë&
__f
;

126 i‡((
FE_DIVBYZERO
 & 
__ex˚±s
) != 0)

128 
__f
 = 1.0;

129 
__g
 = 0.0;

131 #ifde‡
__SSE_MATH__


132 
__asm__
 
	`__vﬁ©ûe__
 ("divs†%1, %0" : : "x" (
__f
), "x" (
__g
));

134 
__asm__
 
	`__vﬁ©ûe__
 ("fdivp %%st, %%st(1); fwait"

135 : "Ò" (
__f
Ë: "0" (__f), "u" (
__g
) : "st(1)");

137 (Ë&
__f
;

139 
	}
}

140 
__exã∫_ölöe
 

141 
__NTH
 (
	$„øi£ex˚±
 (
__ex˚±s
))

143 i‡(
	`__buûtö_c⁄°™t_p
 (
__ex˚±s
)

144 && (
__ex˚±s
 & ~(
FE_INVALID
 | 
FE_DIVBYZERO
)) == 0)

146 
	`__„øi£ex˚±_övÆid_divbyzîo
 (
__ex˚±s
);

150  
	`__„øi£ex˚±_ª«med
 (
__ex˚±s
);

151 
	}
}

153 
	g__END_DECLS


	@/usr/include/bits/fenvinline.h

4 #i‚de‡
__NO_MATH_INLINES


	@/usr/include/bits/huge_val.h

20 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

27 
	#HUGE_VAL
 (
	`__buûtö_huge_vÆ
())

	)

28 #ñi‡
__GNUC_PREREQ
(2,96)

29 
	#HUGE_VAL
 (
__exãnsi⁄__
 0x1.0
p2047
)

	)

30 #ñi‡
deföed
 
__GNUC__


32 
	#HUGE_VAL
 \

33 (
__exãnsi⁄__
 \

34 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

35 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

39 
	~<ídün.h
>

41 uni⁄ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_vÆ_t
;

43 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


44 
	#__HUGE_VAL_byãs
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

46 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


47 
	#__HUGE_VAL_byãs
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7‡}

	)

50 
__huge_vÆ_t
 
	g__huge_vÆ
 = { 
__HUGE_VAL_byãs
 };

51 
	#HUGE_VAL
 (
__huge_vÆ
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

20 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

27 
	#HUGE_VALF
 (
	`__buûtö_huge_vÆf
())

	)

28 #ñi‡
__GNUC_PREREQ
(2,96)

29 
	#HUGE_VALF
 (
__exãnsi⁄__
 0x1.0
p255f
)

	)

30 #ñi‡
deföed
 
__GNUC__


32 
	#HUGE_VALF
 \

33 (
__exãnsi⁄__
 \

34 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7f800000UL }).
__d
)

	)

39 uni⁄ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_vÆf_t
;

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#__HUGE_VALF_byãs
 { 0x7f, 0x80, 0, 0 }

	)

44 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


45 
	#__HUGE_VALF_byãs
 { 0, 0, 0x80, 0x7‡}

	)

48 
__huge_vÆf_t
 
	g__huge_vÆf
 = { 
__HUGE_VALF_byãs
 };

49 
	#HUGE_VALF
 (
__huge_vÆf
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

20 #i‚de‡
_MATH_H


24 #i‡
__GNUC_PREREQ
(3,3)

25 
	#HUGE_VALL
 (
	`__buûtö_huge_vÆl
())

	)

26 #ñi‡
__GNUC_PREREQ
(2,96)

27 
	#HUGE_VALL
 (
__exãnsi⁄__
 0x1.0
p32767L
)

	)

30 
	#__HUGE_VALL_byãs
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

32 
	#__huge_vÆl_t
 uni⁄ { 
__c
[12]; 
__ld
; }

	)

33 #ifde‡
__GNUC__


34 
	#HUGE_VALL
 (
__exãnsi⁄__
 \

35 ((
__huge_vÆl_t
Ë{ 
__c
: 
__HUGE_VALL_byãs
 }).
__ld
)

	)

37 
__huge_vÆl_t
 
	g__huge_vÆl
 = { 
__HUGE_VALL_byãs
 };

38 
	#HUGE_VALL
 (
__huge_vÆl
.
__ld
)

	)

	@/usr/include/bits/inf.h

19 #i‚de‡
_MATH_H


25 #i‡
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__buûtö_öff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #i‚de‡
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_föôe
);

25 #ifde‡
__USE_ISOC99


26 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_föôe
);

27 #ifde‡
__MATH_DECLARE_LDOUBLE


28 #ifde‡
__NO_LONG_DOUBLE_MATH


29 
__REDIRECT_NTH
 (
aco¶
, (), 
__acos_föôe
);

31 
__REDIRECT_NTH
 (
aco¶
, (), 
__aco¶_föôe
);

36 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


38 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_föôe
);

40 #ifde‡
__USE_ISOC99


41 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_föôe
);

42 #ifde‡
__MATH_DECLARE_LDOUBLE


43 #ifde‡
__NO_LONG_DOUBLE_MATH


44 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_föôe
);

46 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_föôe
);

52 
__REDIRECT_NTH
 (
asö
, (), 
__asö_föôe
);

53 #ifde‡
__USE_ISOC99


54 
__REDIRECT_NTH
 (
asöf
, (), 
__asöf_föôe
);

55 #ifde‡
__MATH_DECLARE_LDOUBLE


56 #ifde‡
__NO_LONG_DOUBLE_MATH


57 
__REDIRECT_NTH
 (
asöl
, (), 
__asö_föôe
);

59 
__REDIRECT_NTH
 (
asöl
, (), 
__asöl_föôe
);

65 
__REDIRECT_NTH
 (
©™2
, (, ), 
__©™2_föôe
);

66 #ifde‡
__USE_ISOC99


67 
__REDIRECT_NTH
 (
©™2f
, (, ), 
__©™2f_föôe
);

68 #ifde‡
__MATH_DECLARE_LDOUBLE


69 #ifde‡
__NO_LONG_DOUBLE_MATH


70 
__REDIRECT_NTH
 (
©™2l
, (, ),

71 
__©™2_föôe
);

73 
__REDIRECT_NTH
 (
©™2l
, (, ),

74 
__©™2l_föôe
);

79 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


81 
__REDIRECT_NTH
 (
©™h
, (), 
__©™h_föôe
);

83 #ifde‡
__USE_ISOC99


84 
__REDIRECT_NTH
 (
©™hf
, (), 
__©™hf_föôe
);

85 #ifde‡
__MATH_DECLARE_LDOUBLE


86 #ifde‡
__NO_LONG_DOUBLE_MATH


87 
__REDIRECT_NTH
 (
©™hl
, (), 
__©™h_föôe
);

89 
__REDIRECT_NTH
 (
©™hl
, (), 
__©™hl_föôe
);

95 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_föôe
);

96 #ifde‡
__USE_ISOC99


97 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_föôe
);

98 #ifde‡
__MATH_DECLARE_LDOUBLE


99 #ifde‡
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_föôe
);

102 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_föôe
);

108 
__REDIRECT_NTH
 (
exp
, (), 
__exp_föôe
);

109 #ifde‡
__USE_ISOC99


110 
__REDIRECT_NTH
 (
expf
, (), 
__expf_föôe
);

111 #ifde‡
__MATH_DECLARE_LDOUBLE


112 #ifde‡
__NO_LONG_DOUBLE_MATH


113 
__REDIRECT_NTH
 (
ex∂
, (), 
__exp_föôe
);

115 
__REDIRECT_NTH
 (
ex∂
, (), 
__ex∂_föôe
);

120 #ifde‡
__USE_GNU


122 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_föôe
);

123 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_föôe
);

124 #ifde‡
__MATH_DECLARE_LDOUBLE


125 #ifde‡
__NO_LONG_DOUBLE_MATH


126 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_föôe
);

128 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_föôe
);

133 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_föôe
);

134 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_föôe
);

135 #ifde‡
__MATH_DECLARE_LDOUBLE


136 #ifde‡
__NO_LONG_DOUBLE_MATH


137 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_föôe
);

139 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_föôe
);

144 #ifde‡
__USE_ISOC99


146 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_föôe
);

147 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_föôe
);

148 #ifde‡
__MATH_DECLARE_LDOUBLE


149 #ifde‡
__NO_LONG_DOUBLE_MATH


150 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_föôe
);

152 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_föôe
);

158 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_föôe
);

159 #ifde‡
__USE_ISOC99


160 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_föôe
);

161 #ifde‡
__MATH_DECLARE_LDOUBLE


162 #ifde‡
__NO_LONG_DOUBLE_MATH


163 
__REDIRECT_NTH
 (
fmodl
, (, ),

164 
__fmod_föôe
);

166 
__REDIRECT_NTH
 (
fmodl
, (, ),

167 
__fmodl_föôe
);

172 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_ISOC99


174 
__REDIRECT_NTH
 (
hypŸ
, (, ), 
__hypŸ_föôe
);

176 #ifde‡
__USE_ISOC99


177 
__REDIRECT_NTH
 (
hypŸf
, (, ), 
__hypŸf_föôe
);

178 #ifde‡
__MATH_DECLARE_LDOUBLE


179 #ifde‡
__NO_LONG_DOUBLE_MATH


180 
__REDIRECT_NTH
 (
hypŸl
, (, ),

181 
__hypŸ_föôe
);

183 
__REDIRECT_NTH
 (
hypŸl
, (, ),

184 
__hypŸl_föôe
);

189 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


191 
__REDIRECT_NTH
 (
j0
, (), 
__j0_föôe
);

193 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


194 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_föôe
);

195 #ifde‡
__MATH_DECLARE_LDOUBLE


196 #ifde‡
__NO_LONG_DOUBLE_MATH


197 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_föôe
);

199 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_föôe
);

204 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


206 
__REDIRECT_NTH
 (
y0
, (), 
__y0_föôe
);

208 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


209 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_föôe
);

210 #ifde‡
__MATH_DECLARE_LDOUBLE


211 #ifde‡
__NO_LONG_DOUBLE_MATH


212 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_föôe
);

214 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_föôe
);

219 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


221 
__REDIRECT_NTH
 (
j1
, (), 
__j1_föôe
);

223 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


224 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_föôe
);

225 #ifde‡
__MATH_DECLARE_LDOUBLE


226 #ifde‡
__NO_LONG_DOUBLE_MATH


227 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_föôe
);

229 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_föôe
);

234 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


236 
__REDIRECT_NTH
 (
y1
, (), 
__y1_föôe
);

238 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


239 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_föôe
);

240 #ifde‡
__MATH_DECLARE_LDOUBLE


241 #ifde‡
__NO_LONG_DOUBLE_MATH


242 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_föôe
);

244 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_föôe
);

249 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


251 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_föôe
);

253 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


254 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_föôe
);

255 #ifde‡
__MATH_DECLARE_LDOUBLE


256 #ifde‡
__NO_LONG_DOUBLE_MATH


257 
__REDIRECT_NTH
 (
j∆
, (, ), 
__jn_föôe
);

259 
__REDIRECT_NTH
 (
j∆
, (, ), 
__j∆_föôe
);

264 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


266 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_föôe
);

268 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


269 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_föôe
);

270 #ifde‡
__MATH_DECLARE_LDOUBLE


271 #ifde‡
__NO_LONG_DOUBLE_MATH


272 
__REDIRECT_NTH
 (
y∆
, (, ), 
__yn_föôe
);

274 
__REDIRECT_NTH
 (
y∆
, (, ), 
__y∆_föôe
);

279 #ifde‡
__USE_MISC


281 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_föôe
);

282 #ifde‡
__USE_ISOC99


283 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_föôe
);

284 #ifde‡
__MATH_DECLARE_LDOUBLE


285 #ifde‡
__NO_LONG_DOUBLE_MATH


286 
__REDIRECT_NTH
 (
lgammÆ_r
, (, *),

287 
__lgamma_r_föôe
);

289 
__REDIRECT_NTH
 (
lgammÆ_r
, (, *),

290 
__lgammÆ_r_föôe
);

296 
__lgamma_r_föôe
 (, *);

297 
__lgammaf_r_föôe
 (, *);

298 #ifde‡
__NO_LONG_DOUBLE_MATH


299 
__REDIRECT_NTH
 (
__lgammÆ_r_föôe
, (, *),

300 
__lgamma_r_föôe
);

302 
__lgammÆ_r_föôe
 (, *);

305 #i‡((
deföed
 
__USE_XOPEN
 || deföed 
__USE_ISOC99
) \

306 && 
deföed
 
	g__exã∫_Æways_ölöe
)

308 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgamma
 (
__d
))

310 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


311  
	`__lgamma_r_föôe
 (
__d
, &
signgam
);

313 
__loˇl_signgam
 = 0;

314  
	`__lgamma_r_föôe
 (
__d
, &
__loˇl_signgam
);

316 
	}
}

318 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__exã∫_Æways_ölöe


319 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgammaf
 (
__d
))

321 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


322  
	`__lgammaf_r_föôe
 (
__d
, &
signgam
);

324 
__loˇl_signgam
 = 0;

325  
	`__lgammaf_r_föôe
 (
__d
, &
__loˇl_signgam
);

327 
	}
}

328 #ifde‡
__MATH_DECLARE_LDOUBLE


329 
__exã∫_Æways_ölöe
 
__NTH
 (
	$lgammÆ
 (
__d
))

331 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


332  
	`__lgammÆ_r_föôe
 (
__d
, &
signgam
);

334 
__loˇl_signgam
 = 0;

335  
	`__lgammÆ_r_föôe
 (
__d
, &
__loˇl_signgam
);

337 
	}
}

341 #i‡((
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)) \

342 && 
deföed
 
	g__exã∫_Æways_ölöe
)

344 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gamma
 (
__d
))

346  
	`__lgamma_r_föôe
 (
__d
, &
signgam
);

347 
	}
}

348 #ifde‡
__USE_ISOC99


349 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gammaf
 (
__d
))

351  
	`__lgammaf_r_föôe
 (
__d
, &
signgam
);

352 
	}
}

353 #ifde‡
__MATH_DECLARE_LDOUBLE


354 
__exã∫_Æways_ölöe
 
__NTH
 (
	$gammÆ
 (
__d
))

356  
	`__lgammÆ_r_föôe
 (
__d
, &
signgam
);

357 
	}
}

363 
__REDIRECT_NTH
 (
log
, (), 
__log_föôe
);

364 #ifde‡
__USE_ISOC99


365 
__REDIRECT_NTH
 (
logf
, (), 
__logf_föôe
);

366 #ifde‡
__MATH_DECLARE_LDOUBLE


367 #ifde‡
__NO_LONG_DOUBLE_MATH


368 
__REDIRECT_NTH
 (
logl
, (), 
__log_föôe
);

370 
__REDIRECT_NTH
 (
logl
, (), 
__logl_föôe
);

376 
__REDIRECT_NTH
 (
log10
, (), 
__log10_föôe
);

377 #ifde‡
__USE_ISOC99


378 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_föôe
);

379 #ifde‡
__MATH_DECLARE_LDOUBLE


380 #ifde‡
__NO_LONG_DOUBLE_MATH


381 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_föôe
);

383 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_föôe
);

388 #ifde‡
__USE_ISOC99


390 
__REDIRECT_NTH
 (
log2
, (), 
__log2_föôe
);

391 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_föôe
);

392 #ifde‡
__MATH_DECLARE_LDOUBLE


393 #ifde‡
__NO_LONG_DOUBLE_MATH


394 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_föôe
);

396 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_föôe
);

402 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_föôe
);

403 #ifde‡
__USE_ISOC99


404 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_föôe
);

405 #ifde‡
__MATH_DECLARE_LDOUBLE


406 #ifde‡
__NO_LONG_DOUBLE_MATH


407 
__REDIRECT_NTH
 (
powl
, (, ),

408 
__pow_föôe
);

410 
__REDIRECT_NTH
 (
powl
, (, ),

411 
__powl_föôe
);

416 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


418 
__REDIRECT_NTH
 (
ªmaödî
, (, ), 
__ªmaödî_föôe
);

420 #ifde‡
__USE_ISOC99


421 
__REDIRECT_NTH
 (
ªmaödîf
, (, ), 
__ªmaödîf_föôe
);

422 #ifde‡
__MATH_DECLARE_LDOUBLE


423 #ifde‡
__NO_LONG_DOUBLE_MATH


424 
__REDIRECT_NTH
 (
ªmaödîl
, (, ),

425 
__ªmaödî_föôe
);

427 
__REDIRECT_NTH
 (
ªmaödîl
, (, ),

428 
__ªmaödîl_föôe
);

433 #i‡(
deföed
 
__USE_MISC
 \

434 || (
deföed
 
	g__USE_XOPEN_EXTENDED
 && !deföed 
	g__USE_XOPEN2K8
))

436 
__REDIRECT_NTH
 (
sˇlb
, (, ), 
__sˇlb_föôe
);

438 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_ISOC99


439 
__REDIRECT_NTH
 (
sˇlbf
, (, ), 
__sˇlbf_föôe
);

440 #ifde‡
__MATH_DECLARE_LDOUBLE


441 #ifde‡
__NO_LONG_DOUBLE_MATH


442 
__REDIRECT_NTH
 (
sˇlbl
, (, ),

443 
__sˇlb_föôe
);

445 
__REDIRECT_NTH
 (
sˇlbl
, (, ),

446 
__sˇlbl_föôe
);

452 
__REDIRECT_NTH
 (
söh
, (), 
__söh_föôe
);

453 #ifde‡
__USE_ISOC99


454 
__REDIRECT_NTH
 (
söhf
, (), 
__söhf_föôe
);

455 #ifde‡
__MATH_DECLARE_LDOUBLE


456 #ifde‡
__NO_LONG_DOUBLE_MATH


457 
__REDIRECT_NTH
 (
söhl
, (), 
__söh_föôe
);

459 
__REDIRECT_NTH
 (
söhl
, (), 
__söhl_föôe
);

465 
__REDIRECT_NTH
 (
sqπ
, (), 
__sqπ_föôe
);

466 #ifde‡
__USE_ISOC99


467 
__REDIRECT_NTH
 (
sqπf
, (), 
__sqπf_föôe
);

468 #ifde‡
__MATH_DECLARE_LDOUBLE


469 #ifde‡
__NO_LONG_DOUBLE_MATH


470 
__REDIRECT_NTH
 (
sqπl
, (), 
__sqπ_föôe
);

472 
__REDIRECT_NTH
 (
sqπl
, (), 
__sqπl_föôe
);

477 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__exã∫_Æways_ölöe


479 
__gamma_r_föôe
 (, *);

480 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgamma
 (
__d
))

482 
__loˇl_signgam
 = 0;

483 
__ªs
 = 
	`__gamma_r_föôe
 (
__d
, &
__loˇl_signgam
);

484  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

485 
	}
}

486 
__gammaf_r_föôe
 (, *);

487 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgammaf
 (
__d
))

489 
__loˇl_signgam
 = 0;

490 
__ªs
 = 
	`__gammaf_r_föôe
 (
__d
, &
__loˇl_signgam
);

491  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

492 
	}
}

493 #ifde‡
__MATH_DECLARE_LDOUBLE


494 
__gammÆ_r_föôe
 (, *);

495 
__exã∫_Æways_ölöe
 
__NTH
 (
	$tgammÆ
 (
__d
))

497 
__loˇl_signgam
 = 0;

498 #ifde‡
__NO_LONG_DOUBLE_MATH


499 
__ªs
 = 
	`__gamma_r_föôe
 (
__d
, &
__loˇl_signgam
);

501 
__ªs
 = 
	`__gammÆ_r_föôe
 (
__d
, &
__loˇl_signgam
);

503  
__loˇl_signgam
 < 0 ? -
__ªs
 : __res;

504 
	}
}

	@/usr/include/bits/math-vector.h

19 #i‚de‡
_MATH_H


25 
	~<bôs/libm-simd-de˛-°ubs.h
>

27 #i‡
deföed
 
__x86_64__
 && deföed 
__FAST_MATH__


28 #i‡
deföed
 
_OPENMP
 && _OPENMP >= 201307

30 
	#__DECL_SIMD_x86_64
 
	`_Pøgma
 ("om∞de˛¨êsimdÇŸöbønch")

	)

31 #ñi‡
__GNUC_PREREQ
 (6,0)

33 
	#__DECL_SIMD_x86_64
 
	`__©åibuã__
 ((
	`__simd__
 ("nŸöbønch")))

	)

36 #ifde‡
__DECL_SIMD_x86_64


37 #unde‡
__DECL_SIMD_cos


38 
	#__DECL_SIMD_cos
 
__DECL_SIMD_x86_64


	)

39 #unde‡
__DECL_SIMD_cosf


40 
	#__DECL_SIMD_cosf
 
__DECL_SIMD_x86_64


	)

41 #unde‡
__DECL_SIMD_sö


42 
	#__DECL_SIMD_sö
 
__DECL_SIMD_x86_64


	)

43 #unde‡
__DECL_SIMD_söf


44 
	#__DECL_SIMD_söf
 
__DECL_SIMD_x86_64


	)

45 #unde‡
__DECL_SIMD_söcos


46 
	#__DECL_SIMD_söcos
 
__DECL_SIMD_x86_64


	)

47 #unde‡
__DECL_SIMD_söcosf


48 
	#__DECL_SIMD_söcosf
 
__DECL_SIMD_x86_64


	)

49 #unde‡
__DECL_SIMD_log


50 
	#__DECL_SIMD_log
 
__DECL_SIMD_x86_64


	)

51 #unde‡
__DECL_SIMD_logf


52 
	#__DECL_SIMD_logf
 
__DECL_SIMD_x86_64


	)

53 #unde‡
__DECL_SIMD_exp


54 
	#__DECL_SIMD_exp
 
__DECL_SIMD_x86_64


	)

55 #unde‡
__DECL_SIMD_expf


56 
	#__DECL_SIMD_expf
 
__DECL_SIMD_x86_64


	)

57 #unde‡
__DECL_SIMD_pow


58 
	#__DECL_SIMD_pow
 
__DECL_SIMD_x86_64


	)

59 #unde‡
__DECL_SIMD_powf


60 
	#__DECL_SIMD_powf
 
__DECL_SIMD_x86_64


	)

	@/usr/include/bits/mathcalls.h

45 #i‚de‡
_MATH_H


52 
_MdoubÀ_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubÀ_
 
__x
));

56 
__MATHCALL
 (
asö
,, (
_MdoubÀ_
 
__x
));

58 
__MATHCALL
 (
©™
,, (
_MdoubÀ_
 
__x
));

60 
__MATHCALL
 (
©™2
,, (
_MdoubÀ_
 
__y
, _MdoubÀ_ 
__x
));

63 
__MATHCALL_VEC
 (
cos
,, (
_MdoubÀ_
 
__x
));

65 
__MATHCALL_VEC
 (
sö
,, (
_MdoubÀ_
 
__x
));

67 
__MATHCALL
 (
èn
,, (
_MdoubÀ_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubÀ_
 
__x
));

74 
__MATHCALL
 (
söh
,, (
_MdoubÀ_
 
__x
));

76 
__MATHCALL
 (
ènh
,, (
_MdoubÀ_
 
__x
));

77 
	g_MdoubÀ_END_NAMESPACE


79 #ifde‡
__USE_GNU


81 
__MATHDECL_VEC
 (,
söcos
,,

82 (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__söx
, _MdoubÀ_ *
__cosx
));

85 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubÀ_
 
__x
));

90 
__MATHCALL
 (
asöh
,, (
_MdoubÀ_
 
__x
));

92 
__MATHCALL
 (
©™h
,, (
_MdoubÀ_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubÀ_BEGIN_NAMESPACE


100 
__MATHCALL_VEC
 (
exp
,, (
_MdoubÀ_
 
__x
));

103 
__MATHCALL
 (
‰exp
,, (
_MdoubÀ_
 
__x
, *
__exp⁄ít
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubÀ_
 
__x
, 
__exp⁄ít
));

109 
__MATHCALL_VEC
 (
log
,, (
_MdoubÀ_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubÀ_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__ùå
)Ë
__n⁄nuŒ
 ((2));

116 
	g_MdoubÀ_END_NAMESPACE


118 #ifde‡
__USE_GNU


120 
__MATHCALL
 (
exp10
,, (
_MdoubÀ_
 
__x
));

122 
__MATHCALL
 (
pow10
,, (
_MdoubÀ_
 
__x
));

125 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
__MATHCALL
 (
expm1
,, (
_MdoubÀ_
 
__x
));

131 
__MATHCALL
 (
log1p
,, (
_MdoubÀ_
 
__x
));

134 
__MATHCALL
 (
logb
,, (
_MdoubÀ_
 
__x
));

135 
	g__END_NAMESPACE_C99


138 #ifde‡
__USE_ISOC99


139 
__BEGIN_NAMESPACE_C99


141 
__MATHCALL
 (
exp2
,, (
_MdoubÀ_
 
__x
));

144 
__MATHCALL
 (
log2
,, (
_MdoubÀ_
 
__x
));

145 
	g__END_NAMESPACE_C99


151 
_MdoubÀ_BEGIN_NAMESPACE


153 
__MATHCALL_VEC
 (
pow
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

156 
__MATHCALL
 (
sqπ
,, (
_MdoubÀ_
 
__x
));

157 
	g_MdoubÀ_END_NAMESPACE


159 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_ISOC99


160 
__BEGIN_NAMESPACE_C99


162 
__MATHCALL
 (
hypŸ
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

163 
	g__END_NAMESPACE_C99


166 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


167 
__BEGIN_NAMESPACE_C99


169 
__MATHCALL
 (
cbπ
,, (
_MdoubÀ_
 
__x
));

170 
	g__END_NAMESPACE_C99


176 
_MdoubÀ_BEGIN_NAMESPACE


178 
__MATHCALLX
 (
˚û
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

181 
__MATHCALLX
 (
Ábs
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

184 
__MATHCALLX
 (
Êo‹
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

187 
__MATHCALL
 (
fmod
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

192 
__MATHDECL_1
 (,
__isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

195 
__MATHDECL_1
 (,
__föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

196 
	g_MdoubÀ_END_NAMESPACE


198 #ifde‡
__USE_MISC


199 #i‡(!
deföed
 
__˝lu•lus
 \

200 || 
	g__˝lu•lus
 < 201103L \

201 || 
	g__MATH_DECLARING_DOUBLE
 == 0)

204 
__MATHDECL_1
 (,
isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

208 
__MATHDECL_1
 (,
föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

211 
__MATHCALL
 (
dªm
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

215 
__MATHCALL
 (
signifiˇnd
,, (
_MdoubÀ_
 
__x
));

218 #ifde‡
__USE_ISOC99


219 
__BEGIN_NAMESPACE_C99


221 
__MATHCALLX
 (
c›ysign
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

222 
	g__END_NAMESPACE_C99


225 #ifde‡
__USE_ISOC99


226 
__BEGIN_NAMESPACE_C99


228 
__MATHCALLX
 (
«n
,, (c⁄° *
__ègb
), (
__c⁄°__
));

229 
	g__END_NAMESPACE_C99


234 
__MATHDECL_1
 (,
__i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

236 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

237 #i‡(!
deföed
 
__˝lu•lus
 \

238 || 
	g__˝lu•lus
 < 201103L \

239 || 
	g__MATH_DECLARING_DOUBLE
 == 0)

241 
__MATHDECL_1
 (,
i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

245 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && 
__MATH_DECLARING_DOUBLE
)

247 
__MATHCALL
 (
j0
,, (
_MdoubÀ_
));

248 
__MATHCALL
 (
j1
,, (
_MdoubÀ_
));

249 
__MATHCALL
 (
jn
,, (, 
_MdoubÀ_
));

250 
__MATHCALL
 (
y0
,, (
_MdoubÀ_
));

251 
__MATHCALL
 (
y1
,, (
_MdoubÀ_
));

252 
__MATHCALL
 (
yn
,, (, 
_MdoubÀ_
));

256 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
îf
,, (
_MdoubÀ_
));

260 
__MATHCALL
 (
îfc
,, (
_MdoubÀ_
));

261 
__MATHCALL
 (
lgamma
,, (
_MdoubÀ_
));

262 
	g__END_NAMESPACE_C99


265 #ifde‡
__USE_ISOC99


266 
__BEGIN_NAMESPACE_C99


268 
__MATHCALL
 (
tgamma
,, (
_MdoubÀ_
));

269 
	g__END_NAMESPACE_C99


272 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

274 
__MATHCALL
 (
gamma
,, (
_MdoubÀ_
));

277 #ifde‡
__USE_MISC


281 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubÀ_
, *
__signgamp
));

285 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


286 
__BEGIN_NAMESPACE_C99


289 
__MATHCALL
 (
röt
,, (
_MdoubÀ_
 
__x
));

292 
__MATHCALLX
 (
√xè·î
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

293 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__LDBL_COMPAT


294 
__MATHCALLX
 (
√xâow¨d
,, (
_MdoubÀ_
 
__x
, 
__y
), (
__c⁄°__
));

298 
__MATHCALL
 (
ªmaödî
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

300 #ifde‡
__USE_ISOC99


302 
__MATHCALL
 (
sˇlbn
,, (
_MdoubÀ_
 
__x
, 
__n
));

306 
__MATHDECL
 (,
ûogb
,, (
_MdoubÀ_
 
__x
));

309 #ifde‡
__USE_ISOC99


311 
__MATHCALL
 (
sˇlb 
,, (
_MdoubÀ_
 
__x
, 
__n
));

315 
__MATHCALL
 (
√¨byöt
,, (
_MdoubÀ_
 
__x
));

319 
__MATHCALLX
 (
round
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

323 
__MATHCALLX
 (
åunc
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

328 
__MATHCALL
 (
ªmquo
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, *
__quo
));

335 
__MATHDECL
 (,
Ãöt
,, (
_MdoubÀ_
 
__x
));

336 
__exãnsi⁄__


337 
__MATHDECL
 (,
Œröt
,, (
_MdoubÀ_
 
__x
));

341 
__MATHDECL
 (,
Ãound
,, (
_MdoubÀ_
 
__x
));

342 
__exãnsi⁄__


343 
__MATHDECL
 (,
Œround
,, (
_MdoubÀ_
 
__x
));

347 
__MATHCALL
 (
fdim
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

350 
__MATHCALLX
 (
fmax
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

353 
__MATHCALLX
 (
fmö
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

357 
__MATHDECL_1
 (, 
__Â˛assify
,, (
_MdoubÀ_
 
__vÆue
))

358 
__©åibuã__
 ((
__c⁄°__
));

361 
__MATHDECL_1
 (, 
__signbô
,, (
_MdoubÀ_
 
__vÆue
))

362 
__©åibuã__
 ((
__c⁄°__
));

366 
__MATHCALL
 (
fma
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, _MdoubÀ_ 
__z
));

369 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


370 
	g__END_NAMESPACE_C99


373 #ifde‡
__USE_GNU


375 
__MATHDECL_1
 (, 
__issig«lög
,, (
_MdoubÀ_
 
__vÆue
))

376 
__©åibuã__
 ((
__c⁄°__
));

379 #i‡
deföed
 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

380 && 
	g__MATH_DECLARING_DOUBLE
 \

381 && !
deföed
 
	g__USE_XOPEN2K8
)

383 
__MATHCALL
 (
sˇlb
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #i‡!
deföed
 
_MATH_H
 && !deföed 
_COMPLEX_H


22 #i‡
deföed
 
__USE_ISOC99
 && deföed 
_MATH_H
 && !deföed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #i‡
deföed
 
__x86_64__
 || (deföed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tÊﬂt_t
;

29 
	tdoubÀ_t
;

35 
	tÊﬂt_t
;

37 
	tdoubÀ_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #ifde‡
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #ifde‡
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #ifde‡
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #i‚de‡
_MATH_H


23 #i‚de‡
__exã∫_Æways_ölöe


24 
	#__MATH_INLINE
 
__ölöe


	)

26 
	#__MATH_INLINE
 
__exã∫_Æways_ölöe


	)

30 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__
 && __GNUC__ >= 2

32 #i‡!
__GNUC_PREREQ
 (2,97)

37 #unde‡
isgª©î


38 #unde‡
isgª©îequÆ


39 #unde‡
i¶ess


40 #unde‡
i¶es£quÆ


41 #unde‡
i¶essgª©î


42 #unde‡
isun‹dîed


43 #ifde‡
__i686__


46 
	#isgª©î
(
x
, 
y
) \

47 ({ 
__ªsu…
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__ªsu…
; })

	)

51 
	#isgª©îequÆ
(
x
, 
y
) \

52 ({ 
__ªsu…
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__ªsu…
; })

	)

57 
	#i¶ess
(
x
, 
y
) \

58 ({ 
__ªsu…
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__ªsu…
; })

	)

63 
	#i¶es£quÆ
(
x
, 
y
) \

64 ({ 
__ªsu…
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__ªsu…
; })

	)

69 
	#i¶essgª©î
(
x
, 
y
) \

70 ({ 
__ªsu…
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__ªsu…
; })

	)

75 
	#isun‹dîed
(
x
, 
y
) \

76 ({ 
__ªsu…
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__ªsu…
; })

	)

82 
	#isgª©î
(
x
, 
y
) \

83 ({ 
__ªsu…
; \

84 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

85 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__ªsu…
; })

	)

88 
	#isgª©îequÆ
(
x
, 
y
) \

89 ({ 
__ªsu…
; \

90 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

91 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__ªsu…
; })

	)

94 
	#i¶ess
(
x
, 
y
) \

95 ({ 
__ªsu…
; \

96 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

97 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__ªsu…
; })

	)

100 
	#i¶es£quÆ
(
x
, 
y
) \

101 ({ 
__ªsu…
; \

102 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

103 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__ªsu…
; })

	)

106 
	#i¶essgª©î
(
x
, 
y
) \

107 ({ 
__ªsu…
; \

108 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x44, %%ah; setz %%al" \

109 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__ªsu…
; })

	)

112 
	#isun‹dîed
(
x
, 
y
) \

113 ({ 
__ªsu…
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__ªsu…
; })

	)

122 #i‡
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signbôf
 (
__x
))

129 #ifde‡
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__exãnsi⁄__
 uni⁄ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signbô
 (
__x
))

141 #ifde‡
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "Ù" (
__m
Ë: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__exãnsi⁄__
 uni⁄ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signbôl
 (
__x
))

153 
__exãnsi⁄__
 uni⁄ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #i‡
__GNUC_PREREQ
 (2, 8)

165 #i‡!
__GNUC_PREREQ
 (3, 4Ë&& !
deföed
 
__NO_MATH_INLINES
 \

166 && 
deföed
 
	g__OPTIMIZE__


170 #ifde‡
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifde‡
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ãötf
 (
__x
))

178 
__ªs
;

183 
__asm
 
	`__vﬁ©ûe__
 ("cvtss2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

184  
__ªs
;

185 
	}
}

187 #ifde‡
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ãöt
 (
__x
))

191 
__ªs
;

196 
__asm
 
	`__vﬁ©ûe__
 ("cvtsd2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

197  
__ªs
;

198 
	}
}

200 #ifde‡
__x86_64__


201 
__exãnsi⁄__


202 
__MATH_INLINE
 

203 
__NTH
 (
	$Œrötf
 (
__x
))

205 
__ªs
;

210 
__asm
 
	`__vﬁ©ûe__
 ("cvtss2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

211  
__ªs
;

212 
	}
}

213 
__exãnsi⁄__


214 
__MATH_INLINE
 

215 
__NTH
 (
	$Œröt
 (
__x
))

217 
__ªs
;

222 
__asm
 
	`__vﬁ©ûe__
 ("cvtsd2sò%1, %0" : "Ù" (
__ªs
Ë: "xm" (
__x
));

223  
__ªs
;

224 
	}
}

227 #i‡
deföed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

228 && 
deföed
 
__SSE2_MATH__


230 
__MATH_INLINE
 

231 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

233 #ifde‡
__AVX__


234 
__ªs
;

235 
	`__asm
 ("vmaxs†%2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

236  
__ªs
;

238 
	`__asm
 ("maxs†%1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

239  
__x
;

241 
	}
}

242 
__MATH_INLINE
 

243 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

245 #ifde‡
__AVX__


246 
__ªs
;

247 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

248  
__ªs
;

250 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

251  
__x
;

253 
	}
}

256 
__MATH_INLINE
 

257 
__NTH
 (
	$fmöf
 (
__x
, 
__y
))

259 #ifde‡
__AVX__


260 
__ªs
;

261 
	`__asm
 ("vmös†%2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

262  
__ªs
;

264 
	`__asm
 ("mös†%1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

265  
__x
;

267 
	}
}

268 
__MATH_INLINE
 

269 
__NTH
 (
	$fmö
 (
__x
, 
__y
))

271 #ifde‡
__AVX__


272 
__ªs
;

273 
	`__asm
 ("vmösd %2, %1, %0" : "=x" (
__ªs
Ë: "x" (
x
), "xm" (
__y
));

274  
__ªs
;

276 
	`__asm
 ("mösd %1, %0" : "+x" (
__x
Ë: "xm" (
__y
));

277  
__x
;

279 
	}
}

282 
	g__END_NAMESPACE_C99


285 #i‡
deföed
 
__SSE4_1__
 && deföed 
__SSE2_MATH__


286 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


287 
__BEGIN_NAMESPACE_C99


290 
__MATH_INLINE
 

291 
__NTH
 (
	$röt
 (
__x
))

293 
__ªs
;

298 
__asm
 
	`__vﬁ©ûe__
 ("roundsd $4, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

299  
__ªs
;

300 
	}
}

301 
__MATH_INLINE
 

302 
__NTH
 (
	$rötf
 (
__x
))

304 
__ªs
;

309 
__asm
 
	`__vﬁ©ûe__
 ("rounds†$4, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

310  
__ªs
;

311 
	}
}

313 #ifde‡
__USE_ISOC99


315 
__MATH_INLINE
 

316 
__NTH
 (
	$√¨byöt
 (
__x
))

318 
__ªs
;

323 
__asm
 
	`__vﬁ©ûe__
 ("roundsd $0xc, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

324  
__ªs
;

325 
	}
}

326 
__MATH_INLINE
 

327 
__NTH
 (
	$√¨byötf
 (
__x
))

329 
__ªs
;

334 
__asm
 
	`__vﬁ©ûe__
 ("rounds†$0xc, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

335  
__ªs
;

336 
	}
}

339 
	g__END_NAMESPACE_C99


342 
__BEGIN_NAMESPACE_STD


344 
__MATH_INLINE
 

345 
__NTH
 (
	$˚û
 (
__x
))

347 
__ªs
;

348 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

349  
__ªs
;

350 
	}
}

351 
__END_NAMESPACE_STD


353 
__BEGIN_NAMESPACE_C99


354 
__MATH_INLINE
 

355 
__NTH
 (
	$˚ûf
 (
__x
))

357 
__ªs
;

358 
	`__asm
 ("rounds†$2, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

359  
__ªs
;

360 
	}
}

361 
__END_NAMESPACE_C99


363 
__BEGIN_NAMESPACE_STD


365 
__MATH_INLINE
 

366 
__NTH
 (
	$Êo‹
 (
__x
))

368 
__ªs
;

369 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

370  
__ªs
;

371 
	}
}

372 
__END_NAMESPACE_STD


374 
__BEGIN_NAMESPACE_C99


375 
__MATH_INLINE
 

376 
__NTH
 (
	$Êo‹f
 (
__x
))

378 
__ªs
;

379 
	`__asm
 ("rounds†$1, %1, %0" : "=x" (
__ªs
Ë: "xm" (
__x
));

380  
__ªs
;

381 
	}
}

382 
	g__END_NAMESPACE_C99


390 #i‡!
deföed
 
__SSE2_MATH__
 && !deföed 
__x86_64__


391 #i‡((!
deföed
 
__NO_MATH_INLINES
 || deföed 
__LIBC_INTERNAL_MATH_INLINES
) \

392 && 
deföed
 
	g__OPTIMIZE__
)

396 #unde‡
m©h_îrh™dlög


405 #ifde‡
__USE_ISOC99


406 
	#__ölöe_m©h›
(
func
, 
›
) \

407 
	`__ölöe_m©h›_
 (, 
func
, 
›
) \

408 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

409 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

410 
	#__ölöe_m©h›NP
(
func
, 
›
) \

411 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
) \

412 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

413 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

415 
	#__ölöe_m©h›
(
func
, 
›
) \

416 
	`__ölöe_m©h›_
 (, 
func
, 
›
)

	)

417 
	#__ölöe_m©h›NP
(
func
, 
›
) \

418 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
)

	)

421 
	#__ölöe_m©h›_
(
Êﬂt_ty≥
, 
func
, 
›
) \

422 
	`__ölöe_m©h›_de˛_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

423 
	#__ölöe_m©h›NP_
(
Êﬂt_ty≥
, 
func
, 
›
) \

424 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

427 #ifde‡
__USE_ISOC99


428 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

429 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
) \

430 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

431 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

432 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

433 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
) \

434 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

435 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

437 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

438 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
)

	)

439 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

440 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
)

	)

443 
	#__ölöe_m©h›_de˛_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

444 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

445 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
)

	)

447 
	#__ölöe_m©h›_de˛NP_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

448 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
__x
)) \

450 
Êﬂt_ty≥
 
__ªsu…
; \

451 
__asm
 
	`__vﬁ©ûe__
 (
›
 : "Ò" (
__ªsu…
Ë: 
∑øms
); \

452  
__ªsu…
; \

453 }

	)

456 #ifde‡
__USE_ISOC99


457 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

458 
	`__ölöe_m©hcode_
 (, 
func
, 
¨g
, 
code
) \

459 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

460 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

461 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

462 
	`__ölöe_m©hcodeNP_
 (, 
func
, 
¨g
, 
code
) \

463 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

464 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

465 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

466 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

467 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

468 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

469 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

470 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

471 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

472 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

473 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

474 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

475 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

476 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

477 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

478 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

479 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

480 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

482 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

483 
	`__ölöe_m©hcode_
 (, 
func
, (
¨g
), 
code
)

	)

484 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

485 
	`__ölöe_m©hcodeNP_
 (, 
func
, (
¨g
), 
code
)

	)

486 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

487 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

488 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

489 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

490 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

491 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

492 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

493 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

496 
	#__ölöe_m©hcode_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

497 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

498 
	`__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
)

	)

500 
	#__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

501 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g
)) \

503 
code
; \

504 }

	)

507 
	#__ölöe_m©hcode2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

508 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

509 
	`__ölöe_m©hcodeNP2_
 (
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

511 
	#__ölöe_m©hcodeNP2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

512 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
)) \

514 
code
; \

515 }

	)

517 
	#__ölöe_m©hcode3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

518 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

519 
	`__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

521 
	#__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

522 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
, \

523 
Êﬂt_ty≥
 
¨g3
)) \

525 
code
; \

526 }

	)

530 #i‡!
deföed
 
__NO_MATH_INLINES
 && deföed 
__OPTIMIZE__


534 #ifde‡
__FAST_MATH__


535 #ifde‡
__USE_GNU


536 
	#__söcos_code
 \

537 
__co§
; \

538 
__sör
; \

539 
__swtmp
; \

540 
__asm
 
__vﬁ©ûe__
 \

555 : "Ò" (
__co§
), "=u" (
__sör
), "˜" (
__swtmp
Ë: "0" (
__x
)); \

556 *
__söx
 = 
__sör
; \

557 *
__cosx
 = 
__co§


	)

559 
__MATH_INLINE
 

560 
__NTH
 (
	$__söcos
 (
__x
, *
__söx
, *
__cosx
))

562 
__söcos_code
;

563 
	}
}

565 
__MATH_INLINE
 

566 
__NTH
 (
	$__söcosf
 (
__x
, *
__söx
, *
__cosx
))

568 
__söcos_code
;

569 
	}
}

571 
__MATH_INLINE
 

572 
__NTH
 (
	$__söco¶
 (
__x
, *
__söx
, *
__cosx
))

574 
__söcos_code
;

575 
	}
}

582 #i‡
__GNUC_PREREQ
 (3, 5)

583 
	#__expm1_code
 \

584 
__ãmp
; \

585 
__ãmp
 = 
	`__buûtö_expm1l
 (
__x
); \

586  
__ãmp
 ? __ãm∞: 
__x


	)

588 
	#__expm1_code
 \

589 
__vÆue
; \

590 
__exp⁄ít
; \

591 
__ãmp
; \

592 
__asm
 
__vﬁ©ûe__
 \

601 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

602 
__asm
 
__vﬁ©ûe__
 \

604 : "Ò" (
__ãmp
Ë: "0" (1.0), "u" (
__exp⁄ít
)); \

605 
__ãmp
 -= 1.0; \

606 
__ãmp
 +
__vÆue
; \

607  
__ãmp
 ? __ãm∞: 
__x


	)

609 
	$__ölöe_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

611 #i‡
	`__GNUC_PREREQ
 (3, 4)

612 
	`__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
,  
	$__buûtö_ex∂
 (
__x
))

614 
	#__exp_code
 \

615 
__vÆue
; \

616 
__exp⁄ít
; \

617 
__asm
 
__vﬁ©ûe__
 \

625 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

626 
__vÆue
 += 1.0; \

627 
__asm
 
__vﬁ©ûe__
 \

629 : "Ò" (
__vÆue
Ë: "0" (__vÆue), "u" (
__exp⁄ít
)); \

630  
__vÆue


	)

631 
	$__ölöe_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

632 
	$__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
, 
__exp_code
)

636 #i‡!
	`__GNUC_PREREQ
 (3, 5)

637 
	`__ölöe_m©hcodeNP
 (
èn
, 
__x
, \

638 
__vÆue
; \

639 
__vÆue2
 
	`__©åibuã__
 ((
__unu£d__
)); \

640 
__asm
 
__vﬁ©ûe__
 \

642 : "Ò" (
__vÆue2
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

643  
__vÆue
)

648 #i‡
	`__GNUC_PREREQ
 (3, 4)

649 
	`__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
,

650  
	$__buûtö_©™2l
 (
__y
, 
__x
))

652 
	#__©™2_code
 \

653 
__vÆue
; \

654 
__asm
 
__vﬁ©ûe__
 \

656 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "st(1)"); \

657  
__vÆue


	)

658 #ifde‡
__FAST_MATH__


659 
	$__ölöe_m©hcodeNP2
 (
©™2
, 
__y
, 
__x
, 
__©™2_code
)

661 
	$__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
, 
__©™2_code
)

665 #i‡
deföed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

666 
	`__ölöe_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

667 
__vÆue
; \

668 
__asm
 
__vﬁ©ûe__
 \

673 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

674  
__vÆue
)

678 #ifde‡
__FAST_MATH__


679 #i‡!
	`__GNUC_PREREQ
 (3,3)

680 
	`__ölöe_m©h›NP
 (
sqπ
, "fsqrt")

681 
	`__ölöe_m©h›NP_
 (, 
__sqπl
, "fsqrt")

682 
	#__libc_sqπl
(
n
Ë
	`__sqπl
 (n)

	)

684 
	#__libc_sqπl
(
n
Ë
	`__buûtö_sqπl
 (n)

	)

688 #i‡
	`__GNUC_PREREQ
 (2, 8)

689 
	`__ölöe_m©hcodeNP_
 (, 
Ábs
, 
__x
,  
	$__buûtö_Ábs
 (
__x
))

690 #ifde‡
__USE_ISOC99


691 
	`__ölöe_m©hcodeNP_
 (, 
Ábsf
, 
__x
,  
	$__buûtö_Ábsf
 (
__x
))

692 
	`__ölöe_m©hcodeNP_
 (, 
Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

694 
	`__ölöe_m©hcodeNP_
 (, 
__Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

696 
	`__ölöe_m©h›
 (
Ábs
, "fabs")

697 
	`__ölöe_m©h›_
 (, 
__Áb¶
, "fabs")

700 #ifde‡
__FAST_MATH__


701 #i‡!
	`__GNUC_PREREQ
 (3, 4)

703 
	`__ölöe_m©h›NP
 (
sö
, "fsin")

705 
	`__ölöe_m©h›NP
 (
cos
, "fcos")

707 
	`__ölöe_m©h›_de˛NP
 (
log
, "Êd 2; fxch; fyl2x", "0" (
__x
) : "st(1)")

710 #i‡!
	`__GNUC_PREREQ
 (3, 5)

711 
	`__ölöe_m©h›_de˛NP
 (
log10
, "Êdlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

713 
	`__ölöe_m©hcodeNP
 (
asö
, 
__x
,  
	`__©™2l
 (__x, 
	`__libc_sqπl
 (1.0 - __x * __x)))

714 
	`__ölöe_m©hcodeNP
 (
acos
, 
__x
,  
	`__©™2l
 (
	`__libc_sqπl
 (1.0 - __x * __x), __x))

717 #i‡!
	`__GNUC_PREREQ
 (3, 4)

718 
	`__ölöe_m©h›_de˛NP
 (
©™
, "Êd1; f∑èn", "0" (
__x
) : "st(1)")

722 
	`__ölöe_m©hcode_
 (, 
__sgn1l
, 
__x
, \

723 
__exãnsi⁄__
 uni⁄ { 
__xld
; 
__xi
[3]; } 
__n
 = \

724 { 
__xld
: 
__x
 
	}
}; \

725 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

726 
	g__n
.
	g__xi
[1] = 0x80000000; \

727 
	g__n
.
	g__xi
[0] = 0; \

728  
	g__n
.
	g__xld
)

731 #ifde‡
__FAST_MATH__


733 
__ölöe_m©hcodeNP
 (
söh
, 
__x
, \

734 
__exm1
 = 
__expm1l
 (
__Áb¶
 (
__x
)); \

735  0.5 * (
__exm1
 / (__exm1 + 1.0Ë+ __exm1Ë* 
	$__sgn1l
 (
__x
))

737 
	`__ölöe_m©hcodeNP
 (
cosh
, 
__x
, \

738 
__ex
 = 
	`__ex∂
 (
__x
); \

739  0.5 * (
__ex
 + 1.0 / __ex))

741 
	`__ölöe_m©hcodeNP
 (
ènh
, 
__x
, \

742 
__exm1
 = 
	`__expm1l
 (-
	`__Áb¶
 (
__x
 + __x)); \

743  
__exm1
 / (__exm1 + 2.0Ë* 
	`__sgn1l
 (-
__x
))

746 
	`__ölöe_m©hcodeNP
 (
Êo‹
, 
__x
, \

747 
__vÆue
; \

748 
__ign‹e
; \

749 
__cw
; \

750 
__cwtmp
; \

751 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

759 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

760 "=m" (
__cw
) \

761 : "0" (
__x
)); \

762  
__vÆue
)

764 
	`__ölöe_m©hcodeNP
 (
˚û
, 
__x
, \

765 
__vÆue
; \

766 
__ign‹e
; \

767 
__cw
; \

768 
__cwtmp
; \

769 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

777 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

778 "=m" (
__cw
) \

779 : "0" (
__x
)); \

780  
__vÆue
)

782 #ifde‡
__FAST_MATH__


783 
	#__ldexp_code
 \

784 
__vÆue
; \

785 
__asm
 
__vﬁ©ûe__
 \

787 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" ((Ë
__y
)); \

788  
__vÆue


	)

790 
__MATH_INLINE
 

791 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

793 
__ldexp_code
;

794 
	}
}

799 #ifde‡
__USE_ISOC99


801 #ifde‡
__FAST_MATH__


802 
	$__ölöe_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

806 
	#__M_SQRT2
 1.41421356237309504880L

	)

808 #i‡!
	`__GNUC_PREREQ
 (3, 5)

809 
	`__ölöe_m©hcodeNP
 (
log1p
, 
__x
, \

810 
__vÆue
; \

811 i‡(
	`__Áb¶
 (
__x
Ë>1.0 - 0.5 * 
__M_SQRT2
) \

812 
__vÆue
 = 
	`logl
 (1.0 + 
__x
); \

814 
__asm
 
__vﬁ©ûe__
 \

818 : "Ò" (
__vÆue
Ë: "0" (
__x
) : "st(1)"); \

819  
__vÆue
)

824 
	`__ölöe_m©hcodeNP
 (
asöh
, 
__x
, \

825 
__y
 = 
	`__Áb¶
 (
__x
); \

826  (
	`log1∂
 (
__y
 * __y / (
	`__libc_sqπl
 (__y * __y + 1.0) + 1.0) + __y) \

827 * 
	$__sgn1l
 (
__x
)))

829 
	`__ölöe_m©hcodeNP
 (
acosh
, 
__x
, \

830  
	`logl
 (
__x
 + 
	`__libc_sqπl
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

832 
	`__ölöe_m©hcodeNP
 (
©™h
, 
__x
, \

833 
__y
 = 
	`__Áb¶
 (
__x
); \

834  -0.5 * 
	`log1∂
 (-(
__y
 + __yË/ (1.0 + __y)Ë* 
	$__sgn1l
 (
__x
))

837 
	`__ölöe_m©hcodeNP2
 (
hypŸ
, 
__x
, 
__y
,

838  
	`__libc_sqπl
 (
__x
 * __x + 
__y
 * __y))

840 #i‡!
	`__GNUC_PREREQ
 (3, 5)

841 
	`__ölöe_m©hcodeNP
(
logb
, 
__x
, \

842 
__vÆue
; \

843 
__junk
; \

844 
__asm
 
__vﬁ©ûe__
 \

846 : "Ò" (
__junk
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

847  
__vÆue
)

853 #ifde‡
__USE_ISOC99


854 #ifde‡
__FAST_MATH__


856 #i‡!
	`__GNUC_PREREQ
 (3, 5)

857 
	`__ölöe_m©h›_de˛NP
 (
log2
, "Êd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

860 
__MATH_INLINE
 

861 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

863 
__ldexp_code
;

864 
	}
}

866 
__MATH_INLINE
 

867 
__NTH
 (
	$ldex∂
 (
__x
, 
__y
))

869 
__ldexp_code
;

870 
	}
}

872 
__ölöe_m©h›NP
 (
röt
, "frndint")

875 
	#__Ãöt_code
 \

876 
__Ãöåes
; \

877 
__asm__
 
__vﬁ©ûe__
 \

879 : "=m" (
__Ãöåes
Ë: "t" (
__x
) : "st"); \

880  
__Ãöåes


	)

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ãötf
 (
__x
))

884 
__Ãöt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$Ãöt
 (
__x
))

889 
__Ãöt_code
;

890 
	}
}

891 
__MATH_INLINE
 

892 
__NTH
 (
	$Ãöé
 (
__x
))

894 
__Ãöt_code
;

895 
	}
}

896 #unde‡
__Ãöt_code


898 
	#__Œröt_code
 \

899 
__Œröåes
; \

900 
__asm__
 
__vﬁ©ûe__
 \

902 : "=m" (
__Œröåes
Ë: "t" (
__x
) : "st"); \

903  
__Œröåes


	)

904 
__exãnsi⁄__


905 
__MATH_INLINE
 

906 
__NTH
 (
	$Œrötf
 (
__x
))

908 
__Œröt_code
;

909 
	}
}

910 
__exãnsi⁄__


911 
__MATH_INLINE
 

912 
__NTH
 (
	$Œröt
 (
__x
))

914 
__Œröt_code
;

915 
	}
}

916 
__exãnsi⁄__


917 
__MATH_INLINE
 

918 
__NTH
 (
	$Œröé
 (
__x
))

920 
__Œröt_code
;

921 
	}
}

922 #unde‡
__Œröt_code


927 #ifde‡
__USE_MISC


929 #i‡
deföed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

930 
__ölöe_m©hcodeNP2
 (
dªm
, 
__x
, 
__y
, \

931 
__vÆue
; \

932 
__˛obbîed
; \

933 
__asm
 
__vﬁ©ûe__
 \

938 : "Ò" (
__vÆue
), "=&a" (
__˛obbîed
Ë: "0" (
__x
), "u" (
__y
) : "cc"); \

939  
__vÆue
)

944 
__MATH_INLINE
 

945 
__NTH
 (
	$__föôe
 (
__x
))

947  (
__exãnsi⁄__


948 (((((uni⁄ { 
__d
; 
__i
[2]; }Ë{__d: 
__x
}).__i[1]

950 
	}
}

955 #unde‡
__©™2_code


956 #ifde‡
__FAST_MATH__


957 #unde‡
__expm1_code


958 #unde‡
__exp_code


959 #unde‡
__söcos_code


966 #ifde‡
__LIBC_INTERNAL_MATH_INLINES


967 
__ölöe_m©h›
 (
__õì754_sqπ
, "fsqrt")

968 
__ölöe_m©hcode2_
 (, 
__õì754_©™2l
, 
__y
, 
__x
,

969 
__vÆue
;

970 
__asm
 
__vﬁ©ûe__
 ("fpatan\n\t"

971 : "Ò" (
__vÆue
)

972 : "0" (
__x
), "u" (
__y
) : "st(1)");

973  
__vÆue
;)

	@/usr/include/bits/nan.h

19 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__buûtö_«nf
 (""))

	)

30 #ñi‡
deföed
 
__GNUC__


32 
	#NAN
 \

33 (
__exãnsi⁄__
 \

34 ((uni⁄ { 
__l
 
	`__©åibuã__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<ídün.h
>

41 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


42 
	#__q«n_byãs
 { 0x7f, 0xc0, 0, 0 }

	)

44 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


45 
	#__q«n_byãs
 { 0, 0, 0xc0, 0x7‡}

	)

48 uni⁄ { 
	m__c
[4]; 
	m__d
; } 
__q«n_uni⁄


49 
__©åibuã__
 ((
__unu£d__
)Ë{ 
__q«n_byãs
 };

50 
	#NAN
 (
__q«n_uni⁄
.
__d
)

	)

	@/usr/include/bits/posix1_lim.h

24 #i‚def 
_BITS_POSIX1_LIM_H


25 
	#_BITS_POSIX1_LIM_H
 1

	)

31 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

34 
	#_POSIX_AIO_MAX
 1

	)

37 
	#_POSIX_ARG_MAX
 4096

	)

40 #ifde‡
__USE_XOPEN2K


41 
	#_POSIX_CHILD_MAX
 25

	)

43 
	#_POSIX_CHILD_MAX
 6

	)

47 
	#_POSIX_DELAYTIMER_MAX
 32

	)

51 
	#_POSIX_HOST_NAME_MAX
 255

	)

54 
	#_POSIX_LINK_MAX
 8

	)

57 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

60 
	#_POSIX_MAX_CANON
 255

	)

64 
	#_POSIX_MAX_INPUT
 255

	)

67 
	#_POSIX_MQ_OPEN_MAX
 8

	)

70 
	#_POSIX_MQ_PRIO_MAX
 32

	)

73 
	#_POSIX_NAME_MAX
 14

	)

76 #ifde‡
__USE_XOPEN2K


77 
	#_POSIX_NGROUPS_MAX
 8

	)

79 
	#_POSIX_NGROUPS_MAX
 0

	)

83 #ifde‡
__USE_XOPEN2K


84 
	#_POSIX_OPEN_MAX
 20

	)

86 
	#_POSIX_OPEN_MAX
 16

	)

89 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


92 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

96 
	#_POSIX_PATH_MAX
 256

	)

99 
	#_POSIX_PIPE_BUF
 512

	)

103 
	#_POSIX_RE_DUP_MAX
 255

	)

106 
	#_POSIX_RTSIG_MAX
 8

	)

109 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

112 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

115 
	#_POSIX_SIGQUEUE_MAX
 32

	)

118 
	#_POSIX_SSIZE_MAX
 32767

	)

121 
	#_POSIX_STREAM_MAX
 8

	)

124 
	#_POSIX_SYMLINK_MAX
 255

	)

128 
	#_POSIX_SYMLOOP_MAX
 8

	)

131 
	#_POSIX_TIMER_MAX
 32

	)

134 
	#_POSIX_TTY_NAME_MAX
 9

	)

137 #ifde‡
__USE_XOPEN2K


138 
	#_POSIX_TZNAME_MAX
 6

	)

140 
	#_POSIX_TZNAME_MAX
 3

	)

143 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


145 
	#_POSIX_QLIMIT
 1

	)

149 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

152 
	#_POSIX_UIO_MAXIOV
 16

	)

156 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

160 
	~<bôs/loˇl_lim.h
>

163 #i‚def 
SSIZE_MAX


164 
	#SSIZE_MAX
 
LONG_MAX


	)

171 #i‚def 
NGROUPS_MAX


172 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/pthreadtypes.h

18 #i‚de‡
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<bôs/w‹dsize.h
>

23 #ifde‡
__x86_64__


24 #i‡
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±hªad_t
;

63 
	u±hªad_©å_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__Æign
;

68 #i‚de‡
__have_±hªad_©å_t


69 
±hªad_©å_t
 
	t±hªad_©å_t
;

70 
	#__have_±hªad_©å_t
 1

	)

74 #ifde‡
__x86_64__


75 
	s__±hªad_öã∫Æ_li°


77 
__±hªad_öã∫Æ_li°
 *
	m__¥ev
;

78 
__±hªad_öã∫Æ_li°
 *
	m__√xt
;

79 } 
	t__±hªad_li°_t
;

81 
	s__±hªad_öã∫Æ_¶i°


83 
__±hªad_öã∫Æ_¶i°
 *
	m__√xt
;

84 } 
	t__±hªad_¶i°_t
;

92 
	s__±hªad_muãx_s


94 
	m__lock
;

95 
	m__cou¡
;

96 
	m__ow√r
;

97 #ifde‡
__x86_64__


98 
	m__nu£rs
;

102 
	m__köd
;

103 #ifde‡
__x86_64__


104 
	m__•ös
;

105 
	m__ñisi⁄
;

106 
__±hªad_li°_t
 
	m__li°
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

109 
	#__PTHREAD_SPINS
 0, 0

	)

111 
	m__nu£rs
;

112 
__exãnsi⁄__
 union

116 
	m__e•ös
;

117 
	m__ñisi⁄
;

118 
	#__•ös
 
__ñisi⁄_d©a
.
__e•ös


	)

119 
	#__ñisi⁄
 
__ñisi⁄_d©a
.
__ñisi⁄


	)

120 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

121 } 
	m__ñisi⁄_d©a
;

122 
__±hªad_¶i°_t
 
	m__li°
;

125 } 
	m__d©a
;

126 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

127 
	m__Æign
;

128 } 
	t±hªad_muãx_t
;

132 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

133 
	m__Æign
;

134 } 
	t±hªad_muãx©å_t
;

143 
	m__lock
;

144 
	m__fuãx
;

145 
__exãnsi⁄__
 
	m__tŸÆ_£q
;

146 
__exãnsi⁄__
 
	m__wakeup_£q
;

147 
__exãnsi⁄__
 
	m__wokí_£q
;

148 *
	m__muãx
;

149 
	m__nwaôîs
;

150 
	m__brﬂdˇ°_£q
;

151 } 
	m__d©a
;

152 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

153 
__exãnsi⁄__
 
	m__Æign
;

154 } 
	t±hªad_c⁄d_t
;

158 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

159 
	m__Æign
;

160 } 
	t±hªad_c⁄d©å_t
;

164 
	t±hªad_key_t
;

168 
	t±hªad_⁄˚_t
;

171 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


176 #ifde‡
__x86_64__


179 
	m__lock
;

180 
	m__ƒ_ªadîs
;

181 
	m__ªadîs_wakeup
;

182 
	m__wrôî_wakeup
;

183 
	m__ƒ_ªadîs_queued
;

184 
	m__ƒ_wrôîs_queued
;

185 
	m__wrôî
;

186 
	m__sh¨ed
;

187 sig√d 
	m__rwñisi⁄
;

188 #ifde‡ 
__ILP32__


189 
	m__∑d1
[3];

190 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0 }

	)

192 
	m__∑d1
[7];

193 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0, 0, 0, 0, 0 }

	)

195 
	m__∑d2
;

198 
	m__Êags
;

199 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

200 } 
	m__d©a
;

204 
	m__lock
;

205 
	m__ƒ_ªadîs
;

206 
	m__ªadîs_wakeup
;

207 
	m__wrôî_wakeup
;

208 
	m__ƒ_ªadîs_queued
;

209 
	m__ƒ_wrôîs_queued
;

212 
	m__Êags
;

213 
	m__sh¨ed
;

214 sig√d 
	m__rwñisi⁄
;

215 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0

	)

216 
	m__∑d2
;

217 
	m__wrôî
;

218 } 
	m__d©a
;

220 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

221 
	m__Æign
;

222 } 
	t±hªad_rwlock_t
;

226 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

227 
	m__Æign
;

228 } 
	t±hªad_rwlock©å_t
;

232 #ifde‡
__USE_XOPEN2K


234 vﬁ©ûê
	t±hªad_•ölock_t
;

241 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

242 
	m__Æign
;

243 } 
	t±hªad_b¨rõr_t
;

247 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

248 
	m__Æign
;

249 } 
	t±hªad_b¨rõøâr_t
;

253 #i‚de‡
__x86_64__


255 
	#__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
	`__ªg∑rm__
 (1)))

	)

	@/usr/include/bits/setjmp.h

19 #i‚de‡
_BITS_SETJMP_H


20 
	#_BITS_SETJMP_H
 1

	)

22 #i‡!
deföed
 
_SETJMP_H
 && !deföed 
_PTHREAD_H


26 
	~<bôs/w‹dsize.h
>

28 #i‚de‡
_ASM


30 #i‡
__WORDSIZE
 == 64

31 
	t__jmp_buf
[8];

32 #ñi‡
deföed
 
__x86_64__


33 
__exãnsi⁄__
 
	t__jmp_buf
[8];

35 
	t__jmp_buf
[6];

	@/usr/include/bits/stat.h

18 #i‡!
deföed
 
_SYS_STAT_H
 && !deföed 
_FCNTL_H


22 #i‚de‡
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #i‚de‡
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s°©


48 
__dev_t
 
	m°_dev
;

49 #i‚de‡
__x86_64__


50 
	m__∑d1
;

52 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


53 
__öo_t
 
	m°_öo
;

55 
__öo_t
 
	m__°_öo
;

57 #i‚de‡
__x86_64__


58 
__mode_t
 
	m°_mode
;

59 
__∆ök_t
 
	m°_∆ök
;

61 
__∆ök_t
 
	m°_∆ök
;

62 
__mode_t
 
	m°_mode
;

64 
__uid_t
 
	m°_uid
;

65 
__gid_t
 
	m°_gid
;

66 #ifde‡
__x86_64__


67 
	m__∑d0
;

69 
__dev_t
 
	m°_rdev
;

70 #i‚de‡
__x86_64__


71 
	m__∑d2
;

73 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m°_size
;

76 
__off64_t
 
	m°_size
;

78 
__blksize_t
 
	m°_blksize
;

79 #i‡
deföed
 
__x86_64__
 || !deföed 
__USE_FILE_OFFSET64


80 
__blk˙t_t
 
	m°_blocks
;

82 
__blk˙t64_t
 
	m°_blocks
;

84 #ifde‡
__USE_XOPEN2K8


91 
time•ec
 
	m°_©im
;

92 
time•ec
 
	m°_mtim
;

93 
time•ec
 
	m°_˘im
;

94 
	#°_©ime
 
°_©im
.
tv_£c


	)

95 
	#°_mtime
 
°_mtim
.
tv_£c


	)

96 
	#°_˘ime
 
°_˘im
.
tv_£c


	)

98 
__time_t
 
	m°_©ime
;

99 
__sysˇŒ_ul⁄g_t
 
	m°_©imí£c
;

100 
__time_t
 
	m°_mtime
;

101 
__sysˇŒ_ul⁄g_t
 
	m°_mtimí£c
;

102 
__time_t
 
	m°_˘ime
;

103 
__sysˇŒ_ul⁄g_t
 
	m°_˘imí£c
;

105 #ifde‡
__x86_64__


106 
__sysˇŒ_¶⁄g_t
 
	m__glibc_ª£rved
[3];

108 #i‚de‡
__USE_FILE_OFFSET64


109 
	m__glibc_ª£rved4
;

110 
	m__glibc_ª£rved5
;

112 
__öo64_t
 
	m°_öo
;

117 #ifde‡
__USE_LARGEFILE64


119 
	s°©64


121 
__dev_t
 
	m°_dev
;

122 #ifde‡
__x86_64__


123 
__öo64_t
 
	m°_öo
;

124 
__∆ök_t
 
	m°_∆ök
;

125 
__mode_t
 
	m°_mode
;

127 
	m__∑d1
;

128 
__öo_t
 
	m__°_öo
;

129 
__mode_t
 
	m°_mode
;

130 
__∆ök_t
 
	m°_∆ök
;

132 
__uid_t
 
	m°_uid
;

133 
__gid_t
 
	m°_gid
;

134 #ifde‡
__x86_64__


135 
	m__∑d0
;

136 
__dev_t
 
	m°_rdev
;

137 
__off_t
 
	m°_size
;

139 
__dev_t
 
	m°_rdev
;

140 
	m__∑d2
;

141 
__off64_t
 
	m°_size
;

143 
__blksize_t
 
	m°_blksize
;

144 
__blk˙t64_t
 
	m°_blocks
;

145 #ifde‡
__USE_XOPEN2K8


152 
time•ec
 
	m°_©im
;

153 
time•ec
 
	m°_mtim
;

154 
time•ec
 
	m°_˘im
;

156 
__time_t
 
	m°_©ime
;

157 
__sysˇŒ_ul⁄g_t
 
	m°_©imí£c
;

158 
__time_t
 
	m°_mtime
;

159 
__sysˇŒ_ul⁄g_t
 
	m°_mtimí£c
;

160 
__time_t
 
	m°_˘ime
;

161 
__sysˇŒ_ul⁄g_t
 
	m°_˘imí£c
;

163 #ifde‡
__x86_64__


164 
__sysˇŒ_¶⁄g_t
 
	m__glibc_ª£rved
[3];

166 
__öo64_t
 
	m°_öo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifde‡
__USE_ATFILE


206 
	#UTIME_NOW
 ((1»<< 30Ë- 1l)

	)

207 
	#UTIME_OMIT
 ((1»<< 30Ë- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

19 #i‚de‡
_STDIO_H


23 
__BEGIN_NAMESPACE_STD


24 
	$__LDBL_REDIR_DECL
 (
Ârötf
)

25 
	$__LDBL_REDIR_DECL
 (
¥ötf
)

26 
	$__LDBL_REDIR_DECL
 (
•rötf
)

27 
	$__LDBL_REDIR_DECL
 (
vÂrötf
)

28 
	$__LDBL_REDIR_DECL
 (
v¥ötf
)

29 
	$__LDBL_REDIR_DECL
 (
v•rötf
)

30 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

31 && !
deföed
 
__REDIRECT
 \

32 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

33 
	$__LDBL_REDIR1_DECL
 (
fsˇnf
, 
__∆dbl___isoc99_fsˇnf
)

34 
	$__LDBL_REDIR1_DECL
 (
sˇnf
, 
__∆dbl___isoc99_sˇnf
)

35 
	$__LDBL_REDIR1_DECL
 (
ssˇnf
, 
__∆dbl___isoc99_ssˇnf
)

37 
	$__LDBL_REDIR_DECL
 (
fsˇnf
)

38 
	$__LDBL_REDIR_DECL
 (
sˇnf
)

39 
	$__LDBL_REDIR_DECL
 (
ssˇnf
)

41 
__END_NAMESPACE_STD


43 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
¢¥ötf
)

46 
	$__LDBL_REDIR_DECL
 (
v¢¥ötf
)

47 
__END_NAMESPACE_C99


50 #ifdef 
__USE_ISOC99


51 
__BEGIN_NAMESPACE_C99


52 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

53 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

54 
	$__LDBL_REDIR1_DECL
 (
vfsˇnf
, 
__∆dbl___isoc99_vfsˇnf
)

55 
	$__LDBL_REDIR1_DECL
 (
vsˇnf
, 
__∆dbl___isoc99_vsˇnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vssˇnf
, 
__∆dbl___isoc99_vssˇnf
)

58 
	$__LDBL_REDIR_DECL
 (
vfsˇnf
)

59 
	$__LDBL_REDIR_DECL
 (
vssˇnf
)

60 
	$__LDBL_REDIR_DECL
 (
vsˇnf
)

62 
__END_NAMESPACE_C99


65 #ifde‡
__USE_XOPEN2K8


66 
	$__LDBL_REDIR_DECL
 (
vd¥ötf
)

67 
	$__LDBL_REDIR_DECL
 (
d¥ötf
)

70 #ifde‡
__USE_GNU


71 
	$__LDBL_REDIR_DECL
 (
va•rötf
)

72 
	$__LDBL_REDIR_DECL
 (
__a•rötf
)

73 
	$__LDBL_REDIR_DECL
 (
a•rötf
)

74 
	$__LDBL_REDIR_DECL
 (
ob°ack_¥ötf
)

75 
	$__LDBL_REDIR_DECL
 (
ob°ack_v¥ötf
)

78 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


79 
	$__LDBL_REDIR_DECL
 (
__•rötf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v•rötf_chk
)

81 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


82 
	$__LDBL_REDIR_DECL
 (
__¢¥ötf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__v¢¥ötf_chk
)

85 #i‡
__USE_FORTIFY_LEVEL
 > 1

86 
	$__LDBL_REDIR_DECL
 (
__Ârötf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__¥ötf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__vÂrötf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__v¥ötf_chk
)

90 #ifde‡
__USE_XOPEN2K8


91 
	$__LDBL_REDIR_DECL
 (
__d¥ötf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd¥ötf_chk
)

94 #ifde‡
__USE_GNU


95 
	$__LDBL_REDIR_DECL
 (
__a•rötf_chk
)

96 
	$__LDBL_REDIR_DECL
 (
__va•rötf_chk
)

97 
	$__LDBL_REDIR_DECL
 (
__ob°ack_¥ötf_chk
)

98 
	$__LDBL_REDIR_DECL
 (
__ob°ack_v¥ötf_chk
)

	@/usr/include/bits/stdio.h

19 #i‚de‡
_STDIO_H


23 #i‚de‡
__exã∫_ölöe


24 
	#__STDIO_INLINE
 
ölöe


	)

26 
	#__STDIO_INLINE
 
__exã∫_ölöe


	)

30 #ifde‡
__USE_EXTERN_INLINES


33 #i‡!(
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄
)

35 
__STDIO_INLINE
 

36 
	$v¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

38  
	`vÂrötf
 (
°dout
, 
__fmt
, 
__¨g
);

39 
	}
}

43 
__STDIO_INLINE
 

44 
	$gëch¨
 ()

46  
	`_IO_gëc
 (
°dö
);

47 
	}
}

50 #ifde‡
__USE_MISC


52 
__STDIO_INLINE
 

53 
	$fgëc_u∆ocked
 (
FILE
 *
__Â
)

55  
	`_IO_gëc_u∆ocked
 (
__Â
);

56 
	}
}

60 #ifde‡
__USE_POSIX


62 
__STDIO_INLINE
 

63 
	$gëc_u∆ocked
 (
FILE
 *
__Â
)

65  
	`_IO_gëc_u∆ocked
 (
__Â
);

66 
	}
}

69 
__STDIO_INLINE
 

70 
	$gëch¨_u∆ocked
 ()

72  
	`_IO_gëc_u∆ocked
 (
°dö
);

73 
	}
}

78 
__STDIO_INLINE
 

79 
	$putch¨
 (
__c
)

81  
	`_IO_putc
 (
__c
, 
°dout
);

82 
	}
}

85 #ifde‡
__USE_MISC


87 
__STDIO_INLINE
 

88 
	$Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

90  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

91 
	}
}

95 #ifde‡
__USE_POSIX


97 
__STDIO_INLINE
 

98 
	$putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

100  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

101 
	}
}

104 
__STDIO_INLINE
 

105 
	$putch¨_u∆ocked
 (
__c
)

107  
	`_IO_putc_u∆ocked
 (
__c
, 
°dout
);

108 
	}
}

112 #ifdef 
__USE_GNU


114 
__STDIO_INLINE
 
_IO_ssize_t


115 
	$gëlöe
 (**
__löïå
, 
size_t
 *
__n
, 
FILE
 *
__°ªam
)

117  
	`__gëdñim
 (
__löïå
, 
__n
, '\n', 
__°ªam
);

118 
	}
}

122 #ifde‡
__USE_MISC


124 
__STDIO_INLINE
 

125 
__NTH
 (
	$„of_u∆ocked
 (
FILE
 *
__°ªam
))

127  
	`_IO_„of_u∆ocked
 (
__°ªam
);

128 
	}
}

131 
__STDIO_INLINE
 

132 
__NTH
 (
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
))

134  
	`_IO_„º‹_u∆ocked
 (
__°ªam
);

135 
	}
}

141 #i‡
deföed
 
__USE_MISC
 && deföed 
__GNUC__
 && deföed 
__OPTIMIZE__
 \

142 && !
deföed
 
	g__˝lu•lus


144 
	#‰ód_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

145 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

146 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

147 && (
size_t
Ë(
size
) != 0) \

148 ? ({ *
__±r
 = (*Ë(
±r
); \

149 
FILE
 *
__°ªam
 = (
°ªam
); \

150 
size_t
 
__˙t
; \

151 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

152 
__˙t
 > 0; --__cnt) \

154 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
); \

155 i‡(
__c
 =
EOF
) \

157 *
__±r
++ = 
__c
; \

159 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

160 / (
size_t
Ë(
size
); }) \

161 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

162 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

164 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

165 (Ë(
n
), (
size_t
) 0) \

166 : 
	`‰ód_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

168 
	#fwrôe_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

169 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

170 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

171 && (
size_t
Ë(
size
) != 0) \

172 ? ({ c⁄° *
__±r
 = (c⁄° *Ë(
±r
); \

173 
FILE
 *
__°ªam
 = (
°ªam
); \

174 
size_t
 
__˙t
; \

175 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

176 
__˙t
 > 0; --__cnt) \

177 i‡(
	`_IO_putc_u∆ocked
 (*
__±r
++, 
__°ªam
Ë=
EOF
) \

179 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

180 / (
size_t
Ë(
size
); }) \

181 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

182 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

184 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

185 (Ë(
n
), (
size_t
) 0) \

186 : 
	`fwrôe_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

190 #unde‡
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #i‚de‡
_STDIO_H


23 
	$__•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

24 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

25 
	$__v•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

26 c⁄° *
__ª°ri˘
 
__f‹m©
,

27 
_G_va_li°
 
__≠
Ë
__THROW
;

29 #ifde‡
__va_¨g_∑ck


30 
__f‹tify_fun˘i⁄
 

31 
	`__NTH
 (
	$•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__fmt
, ...))

33  
	`__buûtö___•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

34 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

35 
	}
}

36 #ñi‡!
deföed
 
__˝lu•lus


37 
	#•rötf
(
°r
, ...) \

38 
	`__buûtö___•rötf_chk
 (
°r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

39 
__VA_ARGS__
)

	)

42 
__f‹tify_fun˘i⁄
 

43 
__NTH
 (
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__fmt
,

44 
_G_va_li°
 
__≠
))

46  
	`__buûtö___v•rötf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

47 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

48 
	}
}

50 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


52 
	$__¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

53 
size_t
 
__¶í
, c⁄° *
__ª°ri˘
 
__f‹m©
,

54 ...Ë
__THROW
;

55 
	$__v¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

56 
size_t
 
__¶í
, c⁄° *
__ª°ri˘
 
__f‹m©
,

57 
_G_va_li°
 
__≠
Ë
__THROW
;

59 #ifde‡
__va_¨g_∑ck


60 
__f‹tify_fun˘i⁄
 

61 
	`__NTH
 (
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

62 c⁄° *
__ª°ri˘
 
__fmt
, ...))

64  
	`__buûtö___¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

65 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¨g_∑ck
 ());

66 
	}
}

67 #ñi‡!
deföed
 
__˝lu•lus


68 
	#¢¥ötf
(
°r
, 
Àn
, ...) \

69 
	`__buûtö___¢¥ötf_chk
 (
°r
, 
Àn
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

70 
__VA_ARGS__
)

	)

73 
__f‹tify_fun˘i⁄
 

74 
__NTH
 (
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
,

75 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

77  
	`__buûtö___v¢¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

78 
	`__bos
 (
__s
), 
__fmt
, 
__≠
);

79 
	}
}

83 #i‡
__USE_FORTIFY_LEVEL
 > 1

85 
__Ârötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

86 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

87 
__¥ötf_chk
 (
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

88 
__vÂrötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

89 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__≠
);

90 
__v¥ötf_chk
 (
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
,

91 
_G_va_li°
 
__≠
);

93 #ifde‡
__va_¨g_∑ck


94 
__f‹tify_fun˘i⁄
 

95 
	$Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, c⁄° *__ª°ri˘ 
__fmt
, ...)

97  
	`__Ârötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

98 
	`__va_¨g_∑ck
 ());

99 
	}
}

101 
__f‹tify_fun˘i⁄
 

102 
	$¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, ...)

104  
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

105 
	}
}

106 #ñi‡!
deföed
 
__˝lu•lus


107 
	#¥ötf
(...) \

108 
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

109 
	#Ârötf
(
°ªam
, ...) \

110 
	`__Ârötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

113 
__f‹tify_fun˘i⁄
 

114 
	$v¥ötf
 (c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

116 #ifde‡
__USE_EXTERN_INLINES


117  
	`__vÂrötf_chk
 (
°dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

119  
	`__v¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

121 
	}
}

123 
__f‹tify_fun˘i⁄
 

124 
	$vÂrötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

125 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

127  
	`__vÂrötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

128 
	}
}

130 #ifde‡
__USE_XOPEN2K8


131 
	$__d¥ötf_chk
 (
__fd
, 
__Êag
, c⁄° *
__ª°ri˘
 
__fmt
,

132 ...Ë
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

133 
	$__vd¥ötf_chk
 (
__fd
, 
__Êag
,

134 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

135 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

137 #ifde‡
__va_¨g_∑ck


138 
__f‹tify_fun˘i⁄
 

139 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

141  
	`__d¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

142 
	`__va_¨g_∑ck
 ());

143 
	}
}

144 #ñi‡!
deföed
 
__˝lu•lus


145 
	#d¥ötf
(
fd
, ...) \

146 
	`__d¥ötf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

149 
__f‹tify_fun˘i⁄
 

150 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
)

152  
	`__vd¥ötf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

153 
	}
}

156 #ifde‡
__USE_GNU


158 
	$__a•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

159 c⁄° *
__ª°ri˘
 
__fmt
, ...)

160 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 4))Ë
__wur
;

161 
	$__va•rötf_chk
 (**
__ª°ri˘
 
__±r
, 
__Êag
,

162 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

163 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 3, 0))Ë
__wur
;

164 
	$__ob°ack_¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

165 
__Êag
, c⁄° *
__ª°ri˘
 
__f‹m©
,

167 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

168 
	$__ob°ack_v¥ötf_chk
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

169 
__Êag
,

170 c⁄° *
__ª°ri˘
 
__f‹m©
,

171 
_G_va_li°
 
__¨gs
)

172 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

174 #ifde‡
__va_¨g_∑ck


175 
__f‹tify_fun˘i⁄
 

176 
	`__NTH
 (
	$a•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
, ...))

178  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

179 
	`__va_¨g_∑ck
 ());

180 
	}
}

182 
__f‹tify_fun˘i⁄
 

183 
__NTH
 (
	$__a•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
,

186  
	`__a•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

187 
	`__va_¨g_∑ck
 ());

188 
	}
}

190 
__f‹tify_fun˘i⁄
 

191 
__NTH
 (
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

192 c⁄° *
__ª°ri˘
 
__fmt
, ...))

194  
	`__ob°ack_¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

195 
	`__va_¨g_∑ck
 ());

196 
	}
}

197 #ñi‡!
deföed
 
__˝lu•lus


198 
	#a•rötf
(
±r
, ...) \

199 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

200 
	#__a•rötf
(
±r
, ...) \

201 
	`__a•rötf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

202 
	#ob°ack_¥ötf
(
ob°ack
, ...) \

203 
	`__ob°ack_¥ötf_chk
 (
ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

206 
__f‹tify_fun˘i⁄
 

207 
__NTH
 (
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__fmt
,

208 
_G_va_li°
 
__≠
))

210  
	`__va•rötf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

211 
	}
}

213 
__f‹tify_fun˘i⁄
 

214 
__NTH
 (
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

215 c⁄° *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__≠
))

217  
	`__ob°ack_v¥ötf_chk
 (
__ob°ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

218 
__≠
);

219 
	}
}

225 #i‡!
deföed
 
__USE_ISOC11
 \

226 || (
deföed
 
	g__˝lu•lus
 && __˝lu•lu†<201103L && !deföed 
__USE_GNU
)

227 *
	$__gës_chk
 (*
__°r
, 
size_t
Ë
__wur
;

228 *
	`__REDIRECT
 (
__gës_w¨n
, (*
__°r
), 
gës
)

229 
__wur
 
	`__w¨«âr
 ("please use fgets or getline instead, gets can't "

232 
__f‹tify_fun˘i⁄
 
__wur
 *

233 
	$gës
 (*
__°r
)

235 i‡(
	`__bos
 (
__°r
Ë!(
size_t
) -1)

236  
	`__gës_chk
 (
__°r
, 
	`__bos
 (__str));

237  
	`__gës_w¨n
 (
__°r
);

238 
	}
}

241 *
	$__fgës_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

242 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

243 *
	`__REDIRECT
 (
__fgës_Æüs
,

244 (*
__ª°ri˘
 
__s
, 
__n
,

245 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës
Ë
__wur
;

246 *
	`__REDIRECT
 (
__fgës_chk_w¨n
,

247 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

248 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_chk
)

249 
__wur
 
	`__w¨«âr
 ("fgets called with bigger sizeÅhanÜength "

252 
__f‹tify_fun˘i⁄
 
__wur
 *

253 
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

255 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

257 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

258  
	`__fgës_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

260 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

261  
	`__fgës_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

263  
	`__fgës_Æüs
 (
__s
, 
__n
, 
__°ªam
);

264 
	}
}

266 
size_t
 
	$__‰ód_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

267 
size_t
 
__size
, size_à
__n
,

268 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

269 
size_t
 
	`__REDIRECT
 (
__‰ód_Æüs
,

270 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

271 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

272 
‰ód
Ë
__wur
;

273 
size_t
 
	`__REDIRECT
 (
__‰ód_chk_w¨n
,

274 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

275 
size_t
 
__size
, size_à
__n
,

276 
FILE
 *
__ª°ri˘
 
__°ªam
),

277 
__‰ód_chk
)

278 
__wur
 
	`__w¨«âr
 ("fread called with bigger size *ÇmembÅhanÜength "

281 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


282 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

283 
FILE
 *
__ª°ri˘
 
__°ªam
)

285 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

287 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

288 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

289 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

290  
	`__‰ód_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

292 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

293  
	`__‰ód_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__°ªam
);

295  
	`__‰ód_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

296 
	}
}

298 #ifde‡
__USE_GNU


299 *
	$__fgës_u∆ocked_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
,

300 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

301 *
	`__REDIRECT
 (
__fgës_u∆ocked_Æüs
,

302 (*
__ª°ri˘
 
__s
, 
__n
,

303 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës_u∆ocked
Ë
__wur
;

304 *
	`__REDIRECT
 (
__fgës_u∆ocked_chk_w¨n
,

305 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

306 
FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgës_u∆ocked_chk
)

307 
__wur
 
	`__w¨«âr
 ("fgets_unlocked called with bigger sizeÅhanÜength "

310 
__f‹tify_fun˘i⁄
 
__wur
 *

311 
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

313 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

315 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

316  
	`__fgës_u∆ocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

318 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
))

319  
	`__fgës_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

321  
	`__fgës_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

322 
	}
}

325 #ifde‡
__USE_MISC


326 #unde‡
‰ód_u∆ocked


327 
size_t
 
	$__‰ód_u∆ocked_chk
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

328 
size_t
 
__size
, size_à
__n
,

329 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

330 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_Æüs
,

331 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

332 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
),

333 
‰ód_u∆ocked
Ë
__wur
;

334 
size_t
 
	`__REDIRECT
 (
__‰ód_u∆ocked_chk_w¨n
,

335 (*
__ª°ri˘
 
__±r
, 
size_t
 
__±æí
,

336 
size_t
 
__size
, size_à
__n
,

337 
FILE
 *
__ª°ri˘
 
__°ªam
),

338 
__‰ód_u∆ocked_chk
)

339 
__wur
 
	`__w¨«âr
 ("fread_unlocked called with bigger size *ÇmembÅhan "

342 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


343 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
, size_à
__n
,

344 
FILE
 *
__ª°ri˘
 
__°ªam
)

346 i‡(
	`__bos0
 (
__±r
Ë!(
size_t
) -1)

348 i‡(!
	`__buûtö_c⁄°™t_p
 (
__size
)

349 || !
	`__buûtö_c⁄°™t_p
 (
__n
)

350 || (
__size
 | 
__n
Ë>(((
size_t
) 1) << (8 *  (size_t) / 2)))

351  
	`__‰ód_u∆ocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

352 
__°ªam
);

354 i‡(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

355  
	`__‰ód_u∆ocked_chk_w¨n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

356 
__°ªam
);

359 #ifde‡
__USE_EXTERN_INLINES


360 i‡(
	`__buûtö_c⁄°™t_p
 (
__size
)

361 && 
	`__buûtö_c⁄°™t_p
 (
__n
)

362 && (
__size
 | 
__n
Ë< (((
size_t
) 1) << (8 *  (size_t) / 2))

363 && 
__size
 * 
__n
 <= 8)

365 
size_t
 
__˙t
 = 
__size
 * 
__n
;

366 *
__˝å
 = (*Ë
__±r
;

367 i‡(
__˙t
 == 0)

370 ; 
__˙t
 > 0; --__cnt)

372 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
);

373 i‡(
__c
 =
EOF
)

375 *
__˝å
++ = 
__c
;

377  (
__˝å
 - (*Ë
__±r
Ë/ 
__size
;

380  
	`__‰ód_u∆ocked_Æüs
 (
__±r
, 
__size
, 
__n
, 
__°ªam
);

381 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #i‡!
deföed
 
_STDIO_H
 && !deföed 
__√ed_FOPEN_MAX
 && !deföed 
__√ed_IOV_MAX


22 #ifde‡
_STDIO_H


23 
	#L_tm≤am
 20

	)

24 
	#TMP_MAX
 238328

	)

25 
	#FILENAME_MAX
 4096

	)

27 #ifde‡
__USE_POSIX


28 
	#L_˘îmid
 9

	)

29 #i‡!
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_GNU


30 
	#L_cu£rid
 9

	)

35 #i‡
deföed
 
__√ed_FOPEN_MAX
 || deföed 
_STDIO_H


36 #unde‡
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

40 #i‡
deföed
 
__√ed_IOV_MAX
 && !deföed 
IOV_MAX


41 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/sys_errlist.h

19 #i‚de‡
_STDIO_H


25 #ifde‡ 
__USE_MISC


26 
sys_√º
;

27 c⁄° *c⁄° 
sys_îæi°
[];

29 #ifde‡ 
__USE_GNU


30 
_sys_√º
;

31 c⁄° *c⁄° 
_sys_îæi°
[];

	@/usr/include/bits/time.h

23 #i‡
deföed
 
__√ed_timevÆ
 || deföed 
__USE_GNU


24 #i‚de‡
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<bôs/ty≥s.h
>

30 
	stimevÆ


32 
__time_t
 
	mtv_£c
;

33 
__su£c⁄ds_t
 
	mtv_u£c
;

38 #i‚de‡
__√ed_timevÆ


39 #i‚de‡
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 ((
˛ock_t
Ë1000000)

	)

50 #i‡(!
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_POSIX
) \

51 && !
deföed
 
	g__USE_XOPEN2K


54 
	~<bôs/ty≥s.h
>

55 
__sysc⁄f
 ();

56 
	#CLK_TCK
 ((
__˛ock_t
Ë
	`__sysc⁄f
 (2)Ë

	)

59 #ifde‡
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

81 
	#CLOCK_TAI
 11

	)

84 
	#TIMER_ABSTIME
 1

	)

87 #ifde‡
__USE_GNU


88 
	~<bôs/timex.h
>

90 
__BEGIN_DECLS


93 
	$˛ock_adjtime
 (
__˛ockid_t
 
__˛ock_id
, 
timex
 *
__utx
Ë
__THROW
;

95 
__END_DECLS


101 #unde‡
__√ed_timevÆ


	@/usr/include/bits/types.h

23 #i‚def 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/w‹dsize.h
>

30 
	t__u_ch¨
;

31 
	t__u_sh‹t
;

32 
	t__u_öt
;

33 
	t__u_l⁄g
;

36 sig√d 
	t__öt8_t
;

37 
	t__uöt8_t
;

38 sig√d 
	t__öt16_t
;

39 
	t__uöt16_t
;

40 sig√d 
	t__öt32_t
;

41 
	t__uöt32_t
;

42 #i‡
__WORDSIZE
 == 64

43 sig√d 
	t__öt64_t
;

44 
	t__uöt64_t
;

46 
__exãnsi⁄__
 sig√d 
	t__öt64_t
;

47 
__exãnsi⁄__
 
	t__uöt64_t
;

51 #i‡
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

55 
__exãnsi⁄__
 
	t__quad_t
;

56 
__exãnsi⁄__
 
	t__u_quad_t
;

89 
	#__S16_TYPE
 

	)

90 
	#__U16_TYPE
 

	)

91 
	#__S32_TYPE
 

	)

92 
	#__U32_TYPE
 

	)

93 
	#__SLONGWORD_TYPE
 

	)

94 
	#__ULONGWORD_TYPE
 

	)

95 #i‡
__WORDSIZE
 == 32

96 
	#__SQUAD_TYPE
 
__quad_t


	)

97 
	#__UQUAD_TYPE
 
__u_quad_t


	)

98 
	#__SWORD_TYPE
 

	)

99 
	#__UWORD_TYPE
 

	)

100 
	#__SLONG32_TYPE
 

	)

101 
	#__ULONG32_TYPE
 

	)

102 
	#__S64_TYPE
 
__quad_t


	)

103 
	#__U64_TYPE
 
__u_quad_t


	)

106 
	#__STD_TYPE
 
__exãnsi⁄__
 

	)

107 #ñi‡
__WORDSIZE
 == 64

108 
	t__SQUAD_TYPE
 

	)

109 
	t__UQUAD_TYPE
 

	)

110 
	t__SWORD_TYPE
 

	)

111 
	t__UWORD_TYPE
 

	)

112 
	t__SLONG32_TYPE
 

	)

113 
	t__ULONG32_TYPE
 

	)

114 
	t__S64_TYPE
 

	)

115 
	t__U64_TYPE
 

	)

117 
	t__STD_TYPE
 

	)

121 
	~<bôs/ty≥sizes.h
>

124 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

125 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

126 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

127 
__STD_TYPE
 
__INO_T_TYPE
 
	g__öo_t
;

128 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__öo64_t
;

129 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

130 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__∆ök_t
;

131 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

132 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

133 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

134 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

135 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__˛ock_t
;

136 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__æim_t
;

137 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__æim64_t
;

138 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

139 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

140 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£c⁄ds_t
;

141 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£c⁄ds_t
;

143 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

144 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

147 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__˛ockid_t
;

150 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__timî_t
;

153 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

158 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blk˙t_t
;

159 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blk˙t64_t
;

162 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblk˙t_t
;

163 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblk˙t64_t
;

166 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfû˙t_t
;

167 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfû˙t64_t
;

170 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fsw‹d_t
;

172 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

175 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysˇŒ_¶⁄g_t
;

177 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysˇŒ_ul⁄g_t
;

181 
__off64_t
 
	t__loff_t
;

182 
__quad_t
 *
	t__qaddr_t
;

183 *
	t__ˇddr_t
;

186 
__STD_TYPE
 
__SWORD_TYPE
 
	g__öçå_t
;

189 
__STD_TYPE
 
__U32_TYPE
 
	g__sockÀn_t
;

192 #unde‡
__STD_TYPE


	@/usr/include/bits/wchar.h

19 #i‚de‡
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifde‡
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #ñi‡
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffff‡+ 
L
'\0')

	)

41 #ifde‡
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #ñi‡
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #i‡
deföed
 
__x86_64__
 && !deföed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifde‡
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/cblas_mangling.h

1 #i‚de‡
F77_HEADER_INCLUDED


2 
	#F77_HEADER_INCLUDED


	)

4 #i‚de‡
F77_GLOBAL


5 #i‡
deföed
(
F77_GLOBAL_PATTERN_LC
Ë|| deföed(
ADD_
)

6 
	#F77_GLOBAL
(
l˙ame
,
UCNAME
Ël˙ame##
_


	)

7 #ñi‡
deföed
(
F77_GLOBAL_PATTERN_UC
Ë|| deföed(
UPPER
)

8 
	#F77_GLOBAL
(
l˙ame
,
UCNAME
Ë
	)
UCNAME

9 #ñi‡
deföed
(
F77_GLOBAL_PATTERN_MC
Ë|| deföed(
NOCHANGE
)

10 
	#F77_GLOBAL
(
l˙ame
,
UCNAME
Ë
	)
lcname

12 
	#F77_GLOBAL
(
l˙ame
,
UCNAME
Ël˙ame##
_


	)

	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_MISC
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #unde‡
__USE_ISOC11


98 #unde‡
__USE_ISOC99


99 #unde‡
__USE_ISOC95


100 #unde‡
__USE_ISOCXX11


101 #unde‡
__USE_POSIX


102 #unde‡
__USE_POSIX2


103 #unde‡
__USE_POSIX199309


104 #unde‡
__USE_POSIX199506


105 #unde‡
__USE_XOPEN


106 #unde‡
__USE_XOPEN_EXTENDED


107 #unde‡
__USE_UNIX98


108 #unde‡
__USE_XOPEN2K


109 #unde‡
__USE_XOPEN2KXSI


110 #unde‡
__USE_XOPEN2K8


111 #unde‡
__USE_XOPEN2K8XSI


112 #unde‡
__USE_LARGEFILE


113 #unde‡
__USE_LARGEFILE64


114 #unde‡
__USE_FILE_OFFSET64


115 #unde‡
__USE_MISC


116 #unde‡
__USE_ATFILE


117 #unde‡
__USE_GNU


118 #unde‡
__USE_REENTRANT


119 #unde‡
__USE_FORTIFY_LEVEL


120 #unde‡
__KERNEL_STRICT_NAMES


124 #i‚de‡
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

137 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

146 #i‡(
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE
) \

147 && !
deföed
 
	g_DEFAULT_SOURCE


152 #unde‡
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifde‡
_GNU_SOURCE


158 #unde‡
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #unde‡
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #unde‡
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #unde‡
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #unde‡
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #unde‡
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #unde‡
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #unde‡
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #unde‡
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #unde‡
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

183 || (!
deföed
 
	g__STRICT_ANSI__
 \

184 && !
deföed
 
	g_ISOC99_SOURCE
 \

185 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

186 && !
deföed
 
	g_XOPEN_SOURCE
))

187 #unde‡
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #i‡(
deföed
 
_ISOC11_SOURCE
 \

193 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

199 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

205 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

214 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifde‡
_DEFAULT_SOURCE


222 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #unde‡
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #unde‡
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #i‡((!
deföed
 
__STRICT_ANSI__
 \

231 || (
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #i‡(
deföed
 
_POSIX_SOURCE
 \

247 || (
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
deföed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #unde‡
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #unde‡
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #i‡
deföed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #unde‡
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #unde‡
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

286 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #unde‡
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #unde‡
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifde‡
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifde‡
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifde‡
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #i‡
deföed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #i‡
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<°dc-¥edef.h
>

353 #unde‡
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

362 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

365 #i‚de‡
__ASSEMBLER__


366 #i‚de‡
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

381 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

382 && 
deföed
 
	g__exã∫_ölöe


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


150 
	t_IO_lock_t
;

156 
	s_IO_m¨kî
 {

157 
_IO_m¨kî
 *
	m_√xt
;

158 
_IO_FILE
 *
	m_sbuf
;

162 
	m_pos
;

164 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

165 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

166 
	mpublic
:

167 
°ªamm¨kî
(
°ªambuf
 *
sb
);

168 ~
°ªamm¨kî
();

169 
ßvög
(Ë{  
	m_•os
 == -2; }

170 
dñè
(
°ªamm¨kî
&);

171 
dñè
();

176 
	e__codecvt_ªsu…


178 
	m__codecvt_ok
,

179 
	m__codecvt_∑πül
,

180 
	m__codecvt_îr‹
,

181 
	m__codecvt_noc⁄v


184 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


187 
	s_IO_codecvt


189 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

190 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

191 
	m__mb°©e_t
 *,

192 c⁄° 
	mwch¨_t
 *,

193 c⁄° 
	mwch¨_t
 *,

194 c⁄° 
	mwch¨_t
 **, *,

196 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

197 
	m__mb°©e_t
 *, *,

199 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

200 
	m__mb°©e_t
 *,

202 c⁄° **, 
	mwch¨_t
 *,

203 
	mwch¨_t
 *, wchar_t **);

204 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

205 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

206 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

207 c⁄° *, c⁄° *, 
	m_IO_size_t
);

208 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

210 
_IO_ic⁄v_t
 
	m__cd_ö
;

211 
_IO_ic⁄v_t
 
	m__cd_out
;

215 
	s_IO_wide_d©a


217 
wch¨_t
 *
	m_IO_ªad_±r
;

218 
wch¨_t
 *
	m_IO_ªad_íd
;

219 
wch¨_t
 *
	m_IO_ªad_ba£
;

220 
wch¨_t
 *
	m_IO_wrôe_ba£
;

221 
wch¨_t
 *
	m_IO_wrôe_±r
;

222 
wch¨_t
 *
	m_IO_wrôe_íd
;

223 
wch¨_t
 *
	m_IO_buf_ba£
;

224 
wch¨_t
 *
	m_IO_buf_íd
;

226 
wch¨_t
 *
	m_IO_ßve_ba£
;

227 
wch¨_t
 *
	m_IO_backup_ba£
;

229 
wch¨_t
 *
	m_IO_ßve_íd
;

231 
__mb°©e_t
 
	m_IO_°©e
;

232 
__mb°©e_t
 
	m_IO_œ°_°©e
;

233 
_IO_codecvt
 
	m_codecvt
;

235 
wch¨_t
 
	m_sh‹tbuf
[1];

237 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

241 
	s_IO_FILE
 {

242 
	m_Êags
;

243 
	#_IO_fûe_Êags
 
_Êags


	)

247 * 
	m_IO_ªad_±r
;

248 * 
	m_IO_ªad_íd
;

249 * 
	m_IO_ªad_ba£
;

250 * 
	m_IO_wrôe_ba£
;

251 * 
	m_IO_wrôe_±r
;

252 * 
	m_IO_wrôe_íd
;

253 * 
	m_IO_buf_ba£
;

254 * 
	m_IO_buf_íd
;

256 *
	m_IO_ßve_ba£
;

257 *
	m_IO_backup_ba£
;

258 *
	m_IO_ßve_íd
;

260 
_IO_m¨kî
 *
	m_m¨kîs
;

262 
_IO_FILE
 *
	m_chaö
;

264 
	m_fûío
;

266 
	m_blksize
;

268 
	m_Êags2
;

270 
_IO_off_t
 
	m_ﬁd_off£t
;

272 
	#__HAVE_COLUMN


	)

274 
	m_cur_cﬁumn
;

275 sig√d 
	m_vèbÀ_off£t
;

276 
	m_sh‹tbuf
[1];

280 
_IO_lock_t
 *
	m_lock
;

281 #ifde‡
_IO_USE_OLD_IO_FILE


284 
	s_IO_FILE_com∂ëe


286 
_IO_FILE
 
	m_fûe
;

288 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

289 
_IO_off64_t
 
	m_off£t
;

290 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


292 
_IO_codecvt
 *
	m_codecvt
;

293 
_IO_wide_d©a
 *
	m_wide_d©a
;

294 
_IO_FILE
 *
	m_‰ìªs_li°
;

295 *
	m_‰ìªs_buf
;

297 *
	m__∑d1
;

298 *
	m__∑d2
;

299 *
	m__∑d3
;

300 *
	m__∑d4
;

302 
size_t
 
	m__∑d5
;

303 
	m_mode
;

305 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

309 #i‚de‡
__˝lu•lus


310 
_IO_FILE
 
	t_IO_FILE
;

313 
	g_IO_FILE_∂us
;

315 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

316 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

317 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

318 #i‚de‡
_LIBC


319 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

320 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

321 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

323 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

324 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

325 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

333 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

341 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

342 
	tsize_t
 
	t__n
);

350 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

353 
	t__io_˛o£_‚
 (*
	t__cookõ
);

356 #ifde‡
_GNU_SOURCE


358 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

359 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

360 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

361 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

366 
__io_ªad_‚
 *
	mªad
;

367 
__io_wrôe_‚
 *
	mwrôe
;

368 
__io_£ek_‚
 *
	m£ek
;

369 
__io_˛o£_‚
 *
	m˛o£
;

370 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

371 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

373 
	g_IO_cookõ_fûe
;

376 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

377 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

381 #ifde‡
__˝lu•lus


385 
__undîÊow
 (
_IO_FILE
 *);

386 
__uÊow
 (
_IO_FILE
 *);

387 
__ovîÊow
 (
_IO_FILE
 *, );

388 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


389 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

390 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

391 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

394 #i‡ 
__GNUC__
 >= 3

395 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

397 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

400 
	#_IO_gëc_u∆ocked
(
_Â
) \

401 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

402 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

403 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

404 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

405 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

406 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

407 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

408 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

409 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

410 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

412 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


413 
	#_IO_gëwc_u∆ocked
(
_Â
) \

414 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

415 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

416 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

417 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

418 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

422 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

423 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

426 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

427 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

429 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

430 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

431 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

432 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

434 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

437 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

438 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

440 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

441 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

442 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

444 #ifde‡
_IO_MTSAFE_IO


445 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

446 
	#_IO_Êockfûe
(
_Â
) \

447 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

448 
	#_IO_fu∆ockfûe
(
_Â
) \

449 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

451 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

452 
	#_IO_Êockfûe
(
_Â
Ë

	)

453 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

454 
	#_IO_·rylockfûe
(
_Â
Ë

	)

455 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

456 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

459 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

460 
_IO_va_li°
, *
__ª°ri˘
);

461 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

462 
_IO_va_li°
);

463 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

464 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

466 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

467 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

469 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

471 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


472 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

473 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

474 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

475 #i‡
__GNUC__
 >= 2

478 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


479 
	~<shlib-com∑t.h
>

480 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

481 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

482 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

483 c⁄° 
_IO_°dö_u£d
;

484 
wók_exã∫
 (
_IO_°dö_u£d
);

487 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


488 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

492 
	#_IO_fwide
(
__Â
, 
__mode
) \

493 ({ 
__ªsu…
 = (
__mode
); \

494 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

496 i‡((
__Â
)->
_mode
 == 0) \

498 (
__Â
)->
_mode
 = -1; \

499 
__ªsu…
 = (
__Â
)->
_mode
; \

501 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

502 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

504 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

505 
__ªsu…
; })

	)

508 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

509 
_IO_va_li°
, *
__ª°ri˘
);

510 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

511 
_IO_va_li°
);

512 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

513 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

516 #ifde‡
__LDBL_COMPAT


517 
	~<bôs/libio-ldbl.h
>

520 #ifde‡
__˝lu•lus


	@/usr/include/sched.h

19 #i‚def 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

27 
	#__√ed_size_t


	)

28 
	~<°ddef.h
>

30 #ifde‡
__USE_XOPEN2K


31 
	#__√ed_time_t


	)

32 
	#__√ed_time•ec


	)

34 
	~<time.h
>

36 #i‚de‡
__pid_t_deföed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_deföed


	)

43 
	~<bôs/sched.h
>

45 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

48 
__BEGIN_DECLS


51 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, c⁄° 
sched_∑øm
 *
__∑øm
)

52 
__THROW
;

55 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

58 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

59 c⁄° 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

62 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

65 
	$sched_yõld
 (Ë
__THROW
;

68 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

71 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

74 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

77 #ifde‡
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

81 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u,  (
˝u_£t_t
), cpu£ç)

	)

82 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (˝u,  (
˝u_£t_t
), \

83 
˝u£ç
)

	)

84 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO_S
 ( (
˝u_£t_t
), cpu£ç)

	)

85 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT_S
 ( (
˝u_£t_t
), cpu£ç)

	)

87 
	#CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_SET_S
 (˝u, sësize, cpu£ç)

	)

88 
	#CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_CLR_S
 (˝u, sësize, cpu£ç)

	)

89 
	#CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
Ë
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
˝u£ç
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_ZERO_S
 (£tsize, cpu£ç)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
˝u£ç
Ë
	`__CPU_COUNT_S
 (£tsize, cpu£ç)

	)

94 
	#CPU_EQUAL
(
˝u£ç1
, 
˝u£ç2
) \

95 
	`__CPU_EQUAL_S
 ( (
˝u_£t_t
), 
˝u£ç1
, 
˝u£ç2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
˝u£ç1
, 
˝u£ç2
)

	)

99 
	#CPU_AND
(
de°£t
, 
§c£t1
, 
§c£t2
) \

100 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

101 
	#CPU_OR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

102 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

103 
	#CPU_XOR
(
de°£t
, 
§c£t1
, 
§c£t2
) \

104 
	`__CPU_OP_S
 ( (
˝u_£t_t
), 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
cou¡
Ë
	`__CPU_ALLOC_SIZE
 (cou¡)

	)

113 
	#CPU_ALLOC
(
cou¡
Ë
	`__CPU_ALLOC
 (cou¡)

	)

114 
	#CPU_FREE
(
˝u£t
Ë
	`__CPU_FREE
 (˝u£t)

	)

118 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

119 c⁄° 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

122 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

123 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

126 
__END_DECLS


	@/usr/include/sys/select.h

21 #i‚de‡
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

30 
	~<bôs/£À˘.h
>

33 
	~<bôs/sig£t.h
>

35 #i‚de‡
__sig£t_t_deföed


36 
	#__sig£t_t_deföed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__√ed_time_t


	)

42 
	#__√ed_time•ec


	)

43 
	~<time.h
>

44 
	#__√ed_timevÆ


	)

45 
	~<bôs/time.h
>

47 #i‚de‡
__su£c⁄ds_t_deföed


48 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

49 
	#__su£c⁄ds_t_deföed


	)

54 
	t__fd_mask
;

57 #unde‡
__NFDBITS


59 
	#__NFDBITS
 (8 * (Ë (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
Ë((
__fd_mask
Ë(1UL << ((dË% 
__NFDBITS
)))

	)

68 #ifde‡
__USE_XOPEN


69 
__fd_mask
 
	mfds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
Ë((£t)->
fds_bôs
)

	)

72 
__fd_mask
 
	m__fds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
Ë((£t)->
__fds_bôs
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifde‡
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£ç
Ë
	`__FD_SET
 (fd, fd£ç)

	)

91 
	#FD_CLR
(
fd
, 
fd£ç
Ë
	`__FD_CLR
 (fd, fd£ç)

	)

92 
	#FD_ISSET
(
fd
, 
fd£ç
Ë
	`__FD_ISSET
 (fd, fd£ç)

	)

93 
	#FD_ZERO
(
fd£ç
Ë
	`__FD_ZERO
 (fd£ç)

	)

96 
__BEGIN_DECLS


106 
£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

107 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

108 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

109 
timevÆ
 *
__ª°ri˘
 
__timeout
);

111 #ifde‡
__USE_XOPEN2K


118 
p£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

119 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

120 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

121 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
,

122 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__sigmask
);

127 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__GNUC__


128 
	~<bôs/£À˘2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

19 #i‚de‡
_SYS_SYSMACROS_H


20 
	#_SYS_SYSMACROS_H
 1

	)

22 
	~<„©uªs.h
>

24 
__BEGIN_DECLS


26 
__exãnsi⁄__


27 
	$gnu_dev_maj‹
 (
__dev
)

28 
__THROW
 
__©åibuã_c⁄°__
;

29 
__exãnsi⁄__


30 
	$gnu_dev_mö‹
 (
__dev
)

31 
__THROW
 
__©åibuã_c⁄°__
;

32 
__exãnsi⁄__


33 
	$gnu_dev_makedev
 (
__maj‹
,

34 
__mö‹
)

35 
__THROW
 
__©åibuã_c⁄°__
;

37 #ifde‡
__USE_EXTERN_INLINES


38 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

39 
	`__NTH
 (
	$gnu_dev_maj‹
 (
__dev
))

41  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

42 
	}
}

44 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

45 
__NTH
 (
	$gnu_dev_mö‹
 (
__dev
))

47  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

48 
	}
}

50 
__exãnsi⁄__
 
__exã∫_ölöe
 
__©åibuã_c⁄°__
 

51 
__NTH
 (
	$gnu_dev_makedev
 (
__maj‹
, 
__mö‹
))

53  ((
__mö‹
 & 0xffË| ((
__maj‹
 & 0xfff) << 8)

54 | (((Ë(
__mö‹
 & ~0xff)) << 12)

55 | (((Ë(
__maj‹
 & ~0xfff)) << 32));

56 
	}
}

58 
	g__END_DECLS


61 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
 (dev)

	)

62 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
 (dev)

	)

63 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
 (maj, mö)

	)

	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifde‡
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifde‡
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_POSIX


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_MISC


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/bits/byteswap.h

19 #i‡!
deföed
 
_BYTESWAP_H
 && !deföed 
_NETINET_IN_H
 && !deföed 
_ENDIAN_H


23 #i‚de‡
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

28 
	~<bôs/w‹dsize.h
>

31 
	#__bsw≠_c⁄°™t_16
(
x
) \

32 ((Ë((((
x
Ë>> 8Ë& 0xffË| (((xË& 0xffË<< 8)))

	)

35 
	~<bôs/byãsw≠-16.h
>

38 
	#__bsw≠_c⁄°™t_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
Ë& 0x0000ff00Ë<< 8Ë| (((xË& 0x000000ffË<< 24))

	)

42 #ifde‡
__GNUC__


43 #i‡
__GNUC_PREREQ
 (4, 3)

44 
__ölöe
 

45 
	$__bsw≠_32
 (
__bsx
)

47  
	`__buûtö_bsw≠32
 (
__bsx
);

48 
	}
}

49 #ñi‡
__GNUC__
 >= 2

50 #i‡
__WORDSIZE
 =64 || (
deföed
 
__i486__
 || deföed 
__≥¡ium__
 \

51 || 
deföed
 
	g__≥¡ium¥o__
 || deföed 
	g__≥¡ium4__
 \

52 || 
deföed
 
	g__k8__
 || deföed 
	g__©hl⁄__
 \

53 || 
deföed
 
	g__k6__
 || deföed 
	g__noc⁄a__
 \

54 || 
deföed
 
	g__c‹e2__
 || deföed 
	g__geode__
 \

55 || 
deföed
 
	g__amdÁm10__
)

58 
	#__bsw≠_32
(
x
) \

59 (
__exãnsi⁄__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

62 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

64 
	`__asm__
 ("bsw≠ %0" : "Ù" (
__v
Ë: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw≠_32
(
x
) \

68 (
__exãnsi⁄__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

71 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "Ù" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw≠_32
(
x
) \

83 (
__exãnsi⁄__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_32
 (__x); }))

	)

87 
__ölöe
 

88 
	$__bsw≠_32
 (
__bsx
)

90  
	`__bsw≠_c⁄°™t_32
 (
__bsx
);

91 
	}
}

95 #i‡
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw≠_c⁄°™t_64
(
x
) \

98 (
	`__exãnsi⁄__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
Ë& 0x00000000000000ffuŒË<< 56)))

	)

107 #i‡
__GNUC_PREREQ
 (4, 3)

108 
__ölöe
 
__uöt64_t


109 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

111  
	`__buûtö_bsw≠64
 (
__bsx
);

112 
	}
}

113 #ñi‡
__WORDSIZE
 == 64

114 
	#__bsw≠_64
(
x
) \

115 (
__exãnsi⁄__
 \

116 ({ 
__uöt64_t
 
__v
, 
__x
 = (
x
); \

117 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

118 
__v
 = 
	`__bsw≠_c⁄°™t_64
 (
__x
); \

120 
	`__asm__
 ("bsw≠ %q0" : "Ù" (
__v
Ë: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw≠_64
(
x
) \

124 (
__exãnsi⁄__
 \

125 ({ uni⁄ { 
__exãnsi⁄__
 
__uöt64_t
 
__Œ
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 i‡(
	`__buûtö_c⁄°™t_p
 (
x
)) \

128 
__r
.
__Œ
 = 
	`__bsw≠_c⁄°™t_64
 (
x
); \

131 
__w
.
__Œ
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw≠_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw≠_32
 (
__w
.__l[0]); \

135 
__r
.
__Œ
; }))

	)

138 
	#__bsw≠_c⁄°™t_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
Ë& 0x00000000000000ffuŒË<< 56))

	)

148 
__ölöe
 
__uöt64_t


149 
	$__bsw≠_64
 (
__uöt64_t
 
__bsx
)

151  
	`__bsw≠_c⁄°™t_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #i‚de‡
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libio-ldbl.h

19 #i‚de‡
_IO_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
_IO_vfsˇnf
)

24 
	`__LDBL_REDIR_DECL
 (
_IO_vÂrötf
)

	@/usr/include/bits/libm-simd-decl-stubs.h

19 #i‚de‡
_MATH_H


33 #i‚de‡
_BITS_LIBM_SIMD_DECL_STUBS_H


34 
	#_BITS_LIBM_SIMD_DECL_STUBS_H
 1

	)

36 
	#__DECL_SIMD_cos


	)

37 
	#__DECL_SIMD_cosf


	)

38 
	#__DECL_SIMD_co¶


	)

40 
	#__DECL_SIMD_sö


	)

41 
	#__DECL_SIMD_söf


	)

42 
	#__DECL_SIMD_söl


	)

44 
	#__DECL_SIMD_söcos


	)

45 
	#__DECL_SIMD_söcosf


	)

46 
	#__DECL_SIMD_söco¶


	)

48 
	#__DECL_SIMD_log


	)

49 
	#__DECL_SIMD_logf


	)

50 
	#__DECL_SIMD_logl


	)

52 
	#__DECL_SIMD_exp


	)

53 
	#__DECL_SIMD_expf


	)

54 
	#__DECL_SIMD_ex∂


	)

56 
	#__DECL_SIMD_pow


	)

57 
	#__DECL_SIMD_powf


	)

58 
	#__DECL_SIMD_powl


	)

	@/usr/include/bits/local_lim.h

24 #i‚de‡
NR_OPEN


25 
	#__undef_NR_OPEN


	)

27 #i‚de‡
LINK_MAX


28 
	#__undef_LINK_MAX


	)

30 #i‚de‡
OPEN_MAX


31 
	#__undef_OPEN_MAX


	)

33 #i‚de‡
ARG_MAX


34 
	#__undef_ARG_MAX


	)

38 
	~<löux/limôs.h
>

41 #ifde‡
__undef_NR_OPEN


42 #unde‡
NR_OPEN


43 #unde‡
__undef_NR_OPEN


46 #ifde‡
__undef_LINK_MAX


47 #unde‡
LINK_MAX


48 #unde‡
__undef_LINK_MAX


51 #ifde‡
__undef_OPEN_MAX


52 #unde‡
OPEN_MAX


53 #unde‡
__undef_OPEN_MAX


56 #ifde‡
__undef_ARG_MAX


57 #unde‡
ARG_MAX


58 #unde‡
__undef_ARG_MAX


62 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

64 
	#PTHREAD_KEYS_MAX
 1024

	)

67 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

69 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

72 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

74 #unde‡
PTHREAD_THREADS_MAX


78 
	#AIO_PRIO_DELTA_MAX
 20

	)

81 
	#PTHREAD_STACK_MIN
 16384

	)

84 
	#DELAYTIMER_MAX
 2147483647

	)

87 
	#TTY_NAME_MAX
 32

	)

90 
	#LOGIN_NAME_MAX
 256

	)

93 
	#HOST_NAME_MAX
 64

	)

96 
	#MQ_PRIO_MAX
 32768

	)

99 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/sched.h

20 #i‚de‡
__√ed_sched∑øm


22 #i‚de‡
_SCHED_H


28 
	#SCHED_OTHER
 0

	)

29 
	#SCHED_FIFO
 1

	)

30 
	#SCHED_RR
 2

	)

31 #ifde‡
__USE_GNU


32 
	#SCHED_BATCH
 3

	)

33 
	#SCHED_IDLE
 5

	)

35 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

38 #ifde‡
__USE_GNU


40 
	#CSIGNAL
 0x000000f‡

	)

41 
	#CLONE_VM
 0x00000100

	)

42 
	#CLONE_FS
 0x00000200

	)

43 
	#CLONE_FILES
 0x00000400

	)

44 
	#CLONE_SIGHAND
 0x00000800

	)

45 
	#CLONE_PTRACE
 0x00002000

	)

46 
	#CLONE_VFORK
 0x00004000

	)

48 
	#CLONE_PARENT
 0x00008000

	)

50 
	#CLONE_THREAD
 0x00010000

	)

51 
	#CLONE_NEWNS
 0x00020000

	)

52 
	#CLONE_SYSVSEM
 0x00040000

	)

53 
	#CLONE_SETTLS
 0x00080000

	)

54 
	#CLONE_PARENT_SETTID
 0x00100000

	)

56 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

58 
	#CLONE_DETACHED
 0x00400000

	)

59 
	#CLONE_UNTRACED
 0x00800000

	)

61 
	#CLONE_CHILD_SETTID
 0x01000000

	)

63 
	#CLONE_NEWUTS
 0x04000000

	)

64 
	#CLONE_NEWIPC
 0x08000000

	)

65 
	#CLONE_NEWUSER
 0x10000000

	)

66 
	#CLONE_NEWPID
 0x20000000

	)

67 
	#CLONE_NEWNET
 0x40000000

	)

68 
	#CLONE_IO
 0x80000000

	)

72 
	ssched_∑øm


74 
	m__sched_¥i‹ôy
;

77 
	g__BEGIN_DECLS


79 #ifde‡
__USE_GNU


81 
	$˛⁄e
 ((*
__‚
Ë(*
__¨g
), *
__chûd_°ack
,

82 
__Êags
, *
__¨g
, ...Ë
__THROW
;

85 
	$unsh¨e
 (
__Êags
Ë
__THROW
;

88 
	$sched_gë˝u
 (Ë
__THROW
;

91 
	$£äs
 (
__fd
, 
__n°y≥
Ë
__THROW
;

95 
__END_DECLS


99 #i‡!
deföed
 
__deföed_sched∑øm
 \

100 && (
deföed
 
__√ed_sched∑øm
 || deföed 
_SCHED_H
)

101 
	#__deföed_sched∑øm
 1

	)

103 
	s__sched_∑øm


105 
__sched_¥i‹ôy
;

107 #unde‡
__√ed_sched∑øm


111 #i‡
deföed
 
_SCHED_H
 && !deföed 
__˝u_£t_t_deföed


112 
	#__˝u_£t_t_deföed


	)

114 
	#__CPU_SETSIZE
 1024

	)

115 
	#__NCPUBITS
 (8 *  (
__˝u_mask
))

	)

118 
__CPU_MASK_TYPE
 
	t__˝u_mask
;

121 
	#__CPUELT
(
˝u
Ë((˝uË/ 
__NCPUBITS
)

	)

122 
	#__CPUMASK
(
˝u
Ë((
__˝u_mask
Ë1 << ((˝uË% 
__NCPUBITS
))

	)

127 
__˝u_mask
 
__bôs
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

128 } 
	t˝u_£t_t
;

131 #i‡
	`__GNUC_PREREQ
 (2, 91)

132 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

133 dÿ
	`__buûtö_mem£t
 (
˝u£ç
, '\0', 
£tsize
); 0)

	)

135 
	#__CPU_ZERO_S
(
£tsize
, 
˝u£ç
) \

137 
size_t
 
__i
; \

138 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

139 
__˝u_mask
 *
__bôs
 = (
˝u£ç
)->__bits; \

140 
__i
 = 0; __ò< 
__imax
; ++__i) \

141 
__bôs
[
__i
] = 0; \

142 
	}
} 0)

	)

144 
	#__CPU_SET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

145 (
__exãnsi⁄__
 \

146 ({ 
size_t
 
__˝u
 = (
˝u
); \

147 
__˝u
 / 8 < (
£tsize
) \

148 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

149 |
	`__CPUMASK
 (
__˝u
)) \

150 : 0; }))

	)

151 
	#__CPU_CLR_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

152 (
__exãnsi⁄__
 \

153 ({ 
size_t
 
__˝u
 = (
˝u
); \

154 
__˝u
 / 8 < (
£tsize
) \

155 ? (((
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

156 &~
	`__CPUMASK
 (
__˝u
)) \

157 : 0; }))

	)

158 
	#__CPU_ISSET_S
(
˝u
, 
£tsize
, 
˝u£ç
) \

159 (
__exãnsi⁄__
 \

160 ({ 
size_t
 
__˝u
 = (
˝u
); \

161 
__˝u
 / 8 < (
£tsize
) \

162 ? ((((c⁄° 
__˝u_mask
 *Ë((
˝u£ç
)->
__bôs
))[
	`__CPUELT
 (
__˝u
)] \

163 & 
	`__CPUMASK
 (
__˝u
))) != 0 \

164 : 0; }))

	)

166 
	#__CPU_COUNT_S
(
£tsize
, 
˝u£ç
) \

167 
	`__sched_˝ucou¡
 (
£tsize
, 
˝u£ç
)

	)

169 #i‡
__GNUC_PREREQ
 (2, 91)

170 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

171 (
	`__buûtö_memcmp
 (
˝u£ç1
, 
˝u£ç2
, 
£tsize
Ë=0)

	)

173 
	#__CPU_EQUAL_S
(
£tsize
, 
˝u£ç1
, 
˝u£ç2
) \

174 (
__exãnsi⁄__
 \

175 ({ c⁄° 
__˝u_mask
 *
__¨r1
 = (
˝u£ç1
)->
__bôs
; \

176 c⁄° 
__˝u_mask
 *
__¨r2
 = (
˝u£ç2
)->
__bôs
; \

177 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

178 
size_t
 
__i
; \

179 
__i
 = 0; __ò< 
__imax
; ++__i) \

180 i‡(
__¨r1
[
__i
] !
__¨r2
[__i]) \

182 
__i
 =
__imax
; }))

	)

185 
	#__CPU_OP_S
(
£tsize
, 
de°£t
, 
§c£t1
, 
§c£t2
, 
›
) \

186 (
__exãnsi⁄__
 \

187 ({ 
˝u_£t_t
 *
__de°
 = (
de°£t
); \

188 c⁄° 
__˝u_mask
 *
__¨r1
 = (
§c£t1
)->
__bôs
; \

189 c⁄° 
__˝u_mask
 *
__¨r2
 = (
§c£t2
)->
__bôs
; \

190 
size_t
 
__imax
 = (
£tsize
Ë/  (
__˝u_mask
); \

191 
size_t
 
__i
; \

192 
__i
 = 0; __ò< 
__imax
; ++__i) \

193 ((
__˝u_mask
 *Ë
__de°
->
__bôs
)[
__i
] = 
__¨r1
[__i] 
›
 
__¨r2
[__i]; \

194 
__de°
; }))

	)

196 
	#__CPU_ALLOC_SIZE
(
cou¡
) \

197 ((((
cou¡
Ë+ 
__NCPUBITS
 - 1Ë/ __NCPUBITSË*  (
__˝u_mask
))

	)

198 
	#__CPU_ALLOC
(
cou¡
Ë
	`__sched_˝uÆloc
 (cou¡)

	)

199 
	#__CPU_FREE
(
˝u£t
Ë
	`__sched_˝u‰ì
 (˝u£t)

	)

201 
__BEGIN_DECLS


203 
	$__sched_˝ucou¡
 (
size_t
 
__£tsize
, c⁄° 
˝u_£t_t
 *
__£ç
)

204 
__THROW
;

205 
˝u_£t_t
 *
	$__sched_˝uÆloc
 (
size_t
 
__cou¡
Ë
__THROW
 
__wur
;

206 
	$__sched_˝u‰ì
 (
˝u_£t_t
 *
__£t
Ë
__THROW
;

208 
__END_DECLS


	@/usr/include/bits/select.h

18 #i‚de‡
_SYS_SELECT_H


22 
	~<bôs/w‹dsize.h
>

25 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

27 #i‡
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "°osq"

	)

30 
	#__FD_ZERO_STOS
 "°o¶"

	)

33 
	#__FD_ZERO
(
fd•
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vﬁ©ûe__
 ("˛d;Ñï; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd•
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¨r
 = (
£t
); \

52 
__i
 = 0; __ò<  (
fd_£t
Ë/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¨r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((Ë(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)Ë!0)

	)

	@/usr/include/bits/select2.h

19 #i‚de‡
_SYS_SELECT_H


24 
__fdñt_chk
 (
__d
);

25 
	$__fdñt_w¨n
 (
__d
)

26 
	`__w¨«âr
 ("bit outside of fd_set selected");

27 #unde‡
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__exãnsi⁄__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__buûtö_c⁄°™t_p
 (
__d
) \

32 ? (0 <
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fdñt_w¨n
 (
__d
)) \

35 : 
	`__fdñt_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

19 #i‚def 
_SIGSET_H_ty≥s


20 
	#_SIGSET_H_ty≥s
 1

	)

22 
	t__sig_©omic_t
;

26 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

29 
	m__vÆ
[
_SIGSET_NWORDS
];

30 } 
	t__sig£t_t
;

41 #i‡!
deföed
 
_SIGSET_H_‚s
 && deföed 
_SIGNAL_H


42 
	#_SIGSET_H_‚s
 1

	)

44 #i‚de‡
_EXTERN_INLINE


45 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

49 
	#__sigmask
(
sig
) \

50 (((Ë1Ë<< (((
sig
Ë- 1Ë% (8 *  ())))

	)

53 
	#__sigw‹d
(
sig
Ë(((sigË- 1Ë/ (8 *  ()))

	)

55 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

56 
	#__sigem±y£t
(
£t
) \

57 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

58 
sig£t_t
 *
__£t
 = (
£t
); \

59 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = 0; \

60 0; }))

	)

61 
	#__sigfûl£t
(
£t
) \

62 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

63 
sig£t_t
 *
__£t
 = (
£t
); \

64 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = ~0UL; \

65 0; }))

	)

67 #ifde‡
__USE_GNU


71 
	#__sigi£m±y£t
(
£t
) \

72 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

73 c⁄° 
sig£t_t
 *
__£t
 = (
£t
); \

74 
__ªt
 = 
__£t
->
__vÆ
[--
__˙t
]; \

75 !
__ªt
 && --
__˙t
 >= 0) \

76 
__ªt
 = 
__£t
->
__vÆ
[
__˙t
]; \

77 
__ªt
 =0; }))

	)

78 
	#__sig™d£t
(
de°
, 
À·
, 
right
) \

79 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

80 
sig£t_t
 *
__de°
 = (
de°
); \

81 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

82 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

83 --
__˙t
 >= 0) \

84 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

85 & 
__right
->
__vÆ
[
__˙t
]); \

86 0; }))

	)

87 
	#__sig‹£t
(
de°
, 
À·
, 
right
) \

88 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

89 
sig£t_t
 *
__de°
 = (
de°
); \

90 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

91 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

92 --
__˙t
 >= 0) \

93 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

94 | 
__right
->
__vÆ
[
__˙t
]); \

95 0; }))

	)

102 
__sigismembî
 (c⁄° 
__sig£t_t
 *, );

103 
__sigadd£t
 (
__sig£t_t
 *, );

104 
__sigdñ£t
 (
__sig£t_t
 *, );

106 #ifde‡
__USE_EXTERN_INLINES


107 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

108 
_EXTERN_INLINE
 \

109 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

111 
__mask
 = 
	`__sigmask
 (
__sig
); \

112 
__w‹d
 = 
	`__sigw‹d
 (
__sig
); \

113  
BODY
; \

114 }

	)

116 
__SIGSETFN
 (
__sigismembî
, (
__£t
->
__vÆ
[
__w‹d
] & 
__mask
) ? 1 : 0, const)

117 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__vÆ
[
__w‹d
] |
__mask
), 0), )

118 
__SIGSETFN
 (
__sigdñ£t
, ((
__£t
->
__vÆ
[
__w‹d
] &~
__mask
), 0), )

120 #unde‡
__SIGSETFN


	@/usr/include/bits/timex.h

18 #i‚def 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<bôs/ty≥s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysˇŒ_¶⁄g_t
 
	moff£t
;

29 
__sysˇŒ_¶⁄g_t
 
	m‰eq
;

30 
__sysˇŒ_¶⁄g_t
 
	mmaxîr‹
;

31 
__sysˇŒ_¶⁄g_t
 
	me°îr‹
;

32 
	m°©us
;

33 
__sysˇŒ_¶⁄g_t
 
	mc⁄°™t
;

34 
__sysˇŒ_¶⁄g_t
 
	m¥ecisi⁄
;

35 
__sysˇŒ_¶⁄g_t
 
	mtﬁî™˚
;

36 
timevÆ
 
	mtime
;

37 
__sysˇŒ_¶⁄g_t
 
	mtick
;

38 
__sysˇŒ_¶⁄g_t
 
	mµs‰eq
;

39 
__sysˇŒ_¶⁄g_t
 
	mjôãr
;

40 
	mshi·
;

41 
__sysˇŒ_¶⁄g_t
 
	m°abû
;

42 
__sysˇŒ_¶⁄g_t
 
	mjô˙t
;

43 
__sysˇŒ_¶⁄g_t
 
	mˇl˙t
;

44 
__sysˇŒ_¶⁄g_t
 
	mîr˙t
;

45 
__sysˇŒ_¶⁄g_t
 
	m°b˙t
;

47 
	mèi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_SETOFFSET
 0x0100

	)

64 
	#ADJ_MICRO
 0x1000

	)

65 
	#ADJ_NANO
 0x2000

	)

66 
	#ADJ_TICK
 0x4000

	)

67 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

68 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

71 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

72 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

73 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

74 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

75 
	#MOD_STATUS
 
ADJ_STATUS


	)

76 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

77 
	#MOD_CLKB
 
ADJ_TICK


	)

78 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

79 
	#MOD_TAI
 
ADJ_TAI


	)

80 
	#MOD_MICRO
 
ADJ_MICRO


	)

81 
	#MOD_NANO
 
ADJ_NANO


	)

85 
	#STA_PLL
 0x0001

	)

86 
	#STA_PPSFREQ
 0x0002

	)

87 
	#STA_PPSTIME
 0x0004

	)

88 
	#STA_FLL
 0x0008

	)

90 
	#STA_INS
 0x0010

	)

91 
	#STA_DEL
 0x0020

	)

92 
	#STA_UNSYNC
 0x0040

	)

93 
	#STA_FREQHOLD
 0x0080

	)

95 
	#STA_PPSSIGNAL
 0x0100

	)

96 
	#STA_PPSJITTER
 0x0200

	)

97 
	#STA_PPSWANDER
 0x0400

	)

98 
	#STA_PPSERROR
 0x0800

	)

100 
	#STA_CLOCKERR
 0x1000

	)

101 
	#STA_NANO
 0x2000

	)

102 
	#STA_MODE
 0x4000

	)

103 
	#STA_CLK
 0x8000

	)

106 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

107 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/typesizes.h

19 #i‚de‡
_BITS_TYPES_H


23 #i‚def 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifde‡
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 såu˘ { 
__vÆ
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

74 
	#__CPU_MASK_TYPE
 
__SYSCALL_ULONG_TYPE


	)

76 #ifde‡
__x86_64__


80 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

83 
	#__INO_T_MATCHES_INO64_T
 1

	)

87 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #ifde‡
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #ifde‡
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/gnu/stubs.h

6 #i‡!
deföed
 
__x86_64__


7 
	~<gnu/°ubs-32.h
>

9 #i‡
deföed
 
__x86_64__
 && deföed 
__LP64__


10 
	~<gnu/°ubs-64.h
>

12 #i‡
deföed
 
__x86_64__
 && deföed 
__ILP32__


13 
	~<gnu/°ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/î∫o.h
>

	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

18 #i‚def 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #i‚de‡
_FEATURES_H


23 
	~<„©uªs.h
>

29 #i‡
deföed
 
__GNUC__
 && !deföed 
__STDC__


34 #unde‡
__P


35 #unde‡
__PMT


37 #ifde‡
__GNUC__


41 #i‡
__GNUC_PREREQ
 (4, 6Ë&& !
deföed
 
_LIBC


42 
	#__LEAF
 , 
__Àaf__


	)

43 
	#__LEAF_ATTR
 
	`__©åibuã__
 ((
__Àaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #i‡!
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©åibuã__
 ((
__nŸhrow__
))

	)

57 
	#__NTH
(
f˘
Ë
	`__©åibuã__
 ((
__nŸhrow__
 
__LEAF
)Ë
	)
fct

59 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

60 
	#__THROW
 
	`throw
 ()

	)

61 
	#__THROWNL
 
	`throw
 ()

	)

62 
	#__NTH
(
f˘
Ë
__LEAF_ATTR
 f˘ 
	`throw
 ()

	)

64 
	#__THROW


	)

65 
	#__THROWNL


	)

66 
	#__NTH
(
f˘
Ë
	)
fct

72 
	#__ölöe


	)

74 
	#__THROW


	)

75 
	#__THROWNL


	)

76 
	#__NTH
(
f˘
Ë
	)
fct

82 
	#__P
(
¨gs
Ë
	)
args

83 
	#__PMT
(
¨gs
Ë
	)
args

88 
	#__CONCAT
(
x
,
y
Ëx ## 
	)
y

89 
	#__STRING
(
x
Ë#x

	)

92 
	#__±r_t
 *

	)

93 
	#__l⁄g_doubÀ_t
 

	)

97 #ifdef 
__˝lu•lus


98 
	#__BEGIN_DECLS
 "C" {

	)

99 
	#__END_DECLS
 }

	)

101 
	#__BEGIN_DECLS


	)

102 
	#__END_DECLS


	)

111 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES


112 
	#__BEGIN_NAMESPACE_STD
 
«me•a˚
 
°d
 {

	)

113 
	#__END_NAMESPACE_STD
 }

	)

114 
	#__USING_NAMESPACE_STD
(
«me
Ë
usög
 
°d
::«me;

	)

115 
	#__BEGIN_NAMESPACE_C99
 
«me•a˚
 
__c99
 {

	)

116 
	#__END_NAMESPACE_C99
 }

	)

117 
	#__USING_NAMESPACE_C99
(
«me
Ë
usög
 
__c99
::«me;

	)

122 
	#__BEGIN_NAMESPACE_STD


	)

123 
	#__END_NAMESPACE_STD


	)

124 
	#__USING_NAMESPACE_STD
(
«me
)

	)

125 
	#__BEGIN_NAMESPACE_C99


	)

126 
	#__END_NAMESPACE_C99


	)

127 
	#__USING_NAMESPACE_C99
(
«me
)

	)

132 
	#__bos
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 0)

	)

135 #i‡
__GNUC_PREREQ
 (4,3)

136 
	#__w¨nde˛
(
«me
, 
msg
) \

137 
	`«me
 (Ë
	`__©åibuã__
((
	`__w¨nög__
 (
msg
)))

	)

138 
	#__w¨«âr
(
msg
Ë
	`__©åibuã__
((
	`__w¨nög__
 (msg)))

	)

139 
	#__îr‹de˛
(
«me
, 
msg
) \

140 
	`«me
 (Ë
	`__©åibuã__
((
	`__îr‹__
 (
msg
)))

	)

142 
	#__w¨nde˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

143 
	#__w¨«âr
(
msg
)

	)

144 
	#__îr‹de˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

148 #i‡
__GNUC_PREREQ
 (2,97)

150 
	#__Êex¨r
 []

	)

152 #ifde‡
__GNUC__


153 
	#__Êex¨r
 [0]

	)

155 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__Êex¨r
 []

	)

159 
	#__Êex¨r
 [1]

	)

175 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

178 #ifde‡
__˝lu•lus


179 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

180 
«me
 
¥Ÿo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

181 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

182 
«me
 
¥Ÿo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

184 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

185 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROW


	)

186 
	#__REDIRECT_NTHNL
(
«me
, 
¥Ÿo
, 
Æüs
) \

187 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROWNL


	)

189 
	#__ASMNAME
(
˙ame
Ë
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, c«me)

	)

190 
	#__ASMNAME2
(
¥efix
, 
˙ame
Ë
	`__STRING
 (¥efixË
	)
cname

203 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

204 
	#__©åibuã__
(
xyz
Ë

	)

210 #i‡
__GNUC_PREREQ
 (2,96)

211 
	#__©åibuã_mÆloc__
 
	`__©åibuã__
 ((
__mÆloc__
))

	)

213 
	#__©åibuã_mÆloc__


	)

218 #i‡
__GNUC_PREREQ
 (4, 3)

219 
	#__©åibuã_Æloc_size__
(
∑øms
) \

220 
	`__©åibuã__
 ((
__Æloc_size__
 
∑øms
))

	)

222 
	#__©åibuã_Æloc_size__
(
∑øms
Ë

	)

228 #i‡
__GNUC_PREREQ
 (2,96)

229 
	#__©åibuã_puª__
 
	`__©åibuã__
 ((
__puª__
))

	)

231 
	#__©åibuã_puª__


	)

235 #i‡
__GNUC_PREREQ
 (2,5)

236 
	#__©åibuã_c⁄°__
 
	`__©åibuã__
 ((
__c⁄°__
))

	)

238 
	#__©åibuã_c⁄°__


	)

244 #i‡
__GNUC_PREREQ
 (3,1)

245 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__u£d__
))

	)

246 
	#__©åibuã_noölöe__
 
	`__©åibuã__
 ((
__noölöe__
))

	)

248 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__unu£d__
))

	)

249 
	#__©åibuã_noölöe__


	)

253 #i‡
__GNUC_PREREQ
 (3,2)

254 
	#__©åibuã_dïªˇãd__
 
	`__©åibuã__
 ((
__dïªˇãd__
))

	)

256 
	#__©åibuã_dïªˇãd__


	)

265 #i‡
__GNUC_PREREQ
 (2,8)

266 
	#__©åibuã_f‹m©_¨g__
(
x
Ë
	`__©åibuã__
 ((
	`__f‹m©_¨g__
 (x)))

	)

268 
	#__©åibuã_f‹m©_¨g__
(
x
Ë

	)

275 #i‡
__GNUC_PREREQ
 (2,97)

276 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
) \

277 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__°rfm⁄__
, 
a
, 
b
)))

	)

279 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
Ë

	)

284 #i‡
__GNUC_PREREQ
 (3,3)

285 
	#__n⁄nuŒ
(
∑øms
Ë
	`__©åibuã__
 ((
__n⁄nuŒ__
Ö¨ams))

	)

287 
	#__n⁄nuŒ
(
∑øms
)

	)

292 #i‡
__GNUC_PREREQ
 (3,4)

293 
	#__©åibuã_w¨n_unu£d_ªsu…__
 \

294 
	`__©åibuã__
 ((
__w¨n_unu£d_ªsu…__
))

	)

295 #i‡
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©åibuã_w¨n_unu£d_ªsu…__


	)

299 
	#__©åibuã_w¨n_unu£d_ªsu…__


	)

301 #i‚de‡
__wur


302 
	#__wur


	)

306 #i‡
__GNUC_PREREQ
 (3,2)

307 
	#__Æways_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__Æways_ölöe__
))

	)

309 
	#__Æways_ölöe
 
__ölöe


	)

314 #i‡
__GNUC_PREREQ
 (4,3)

315 
	#__©åibuã_¨tificül__
 
	`__©åibuã__
 ((
__¨tificül__
))

	)

317 
	#__©åibuã_¨tificül__


	)

329 #i‡(!
deföed
 
__˝lu•lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
deföed
 
__˛™g__
 && (deföed 
__GNUC_STDC_INLINE__
 \

331 || 
deföed
 
__GNUC_GNU_INLINE__
)))

332 #i‡
deföed
 
__GNUC_STDC_INLINE__
 || deföed 
__˝lu•lus


333 
	#__exã∫_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

334 
	#__exã∫_Æways_ölöe
 \

335 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

337 
	#__exã∫_ölöe
 
__ölöe


	)

338 
	#__exã∫_Æways_ölöe
 
__Æways_ölöe


	)

342 #ifde‡
__exã∫_Æways_ölöe


343 
	#__f‹tify_fun˘i⁄
 
__exã∫_Æways_ölöe
 
__©åibuã_¨tificül__


	)

348 #i‡
__GNUC_PREREQ
 (4,3)

349 
	#__va_¨g_∑ck
(Ë
	`__buûtö_va_¨g_∑ck
 ()

	)

350 
	#__va_¨g_∑ck_Àn
(Ë
	`__buûtö_va_¨g_∑ck_Àn
 ()

	)

357 #i‡!
__GNUC_PREREQ
 (2,8)

358 
	#__exãnsi⁄__


	)

362 #i‡!
__GNUC_PREREQ
 (2,92)

363 
	#__ª°ri˘


	)

369 #i‡
__GNUC_PREREQ
 (3,1Ë&& !
deföed
 
__GNUG__


370 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

372 #ifde‡
__GNUC__


373 
	#__ª°ri˘_¨r


	)

375 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__ª°ri˘_¨r
 
ª°ri˘


	)

379 
	#__ª°ri˘_¨r


	)

384 #i‡
__GNUC__
 >= 3

385 
	#__glibc_u∆ikñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
 ((c⁄d), 0)

	)

386 
	#__glibc_likñy
(
c⁄d
Ë
	`__buûtö_ex≥˘
 ((c⁄d), 1)

	)

388 
	#__glibc_u∆ikñy
(
c⁄d
Ë(c⁄d)

	)

389 
	#__glibc_likñy
(
c⁄d
Ë(c⁄d)

	)

392 #i‡(!
deföed
 
_N‹ëu∫
 \

393 && (
deföed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

394 && !
	$__GNUC_PREREQ
 (4,7))

395 #i‡
	`__GNUC_PREREQ
 (2,8)

396 
	#_N‹ëu∫
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

	)

398 
	#_N‹ëu∫


	)

402 #i‡(!
deföed
 
_Sètic_as£π
 && !deföed 
__˝lu•lus
 \

403 && (
deföed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

404 && (!
	`__GNUC_PREREQ
 (4, 6Ë|| 
deföed
 
__STRICT_ANSI__
))

405 
	#_Sètic_as£π
(
ex¥
, 
dügno°ic
) \

406 (*
	`__Sètic_as£π_fun˘i⁄
 ()) \

407 [!! (°ru˘ { 
__îr‹_if_√g©ive
: (
ex¥
Ë? 2 : -1; })]

	)

410 
	~<bôs/w‹dsize.h
>

412 #i‡
deföed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && deföed 
__NO_LONG_DOUBLE_MATH


413 
	#__LDBL_COMPAT
 1

	)

414 #ifde‡
__REDIRECT


415 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

416 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
) \

417 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

418 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT_NTH
 («me,ÖrŸo,álüs)

	)

419 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
) \

420 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

421 
	#__LDBL_REDIR1_DECL
(
«me
, 
Æüs
) \

422 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 (#Æüs));

	)

423 
	#__LDBL_REDIR_DECL
(
«me
) \

424 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 ("__∆dbl_" #«me));

	)

425 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

426 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

427 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

428 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##
Æüs
)

	)

431 #i‡!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT


432 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê
	)
proto

433 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
Ë«mê
	)
proto

434 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
__THROW


	)

435 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
__THROW


	)

436 
	#__LDBL_REDIR_DECL
(
«me
)

	)

437 #ifde‡
__REDIRECT


438 
	#__REDIRECT_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

439 
	#__REDIRECT_NTH_LDBL
(
«me
, 
¥Ÿo
, 
Æüs
) \

440 
	`__REDIRECT_NTH
 (
«me
, 
¥Ÿo
, 
Æüs
)

	)

	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/asm/errno.h

1 
	~<asm-gíîic/î∫o.h
>

	@/usr/include/bits/byteswap-16.h

19 #i‚de‡
_BITS_BYTESWAP_H


23 #ifde‡
__GNUC__


24 #i‡
__GNUC__
 >= 2

25 
	#__bsw≠_16
(
x
) \

26 (
__exãnsi⁄__
 \

27 ({ 
__v
, 
__x
 = (Ë(
x
); \

28 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

29 
__v
 = 
	`__bsw≠_c⁄°™t_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "Ù" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw≠_16
(
x
) \

39 (
__exãnsi⁄__
 \

40 ({ 
__x
 = (Ë(
x
); \

41 
	`__bsw≠_c⁄°™t_16
 (
__x
); }))

	)

44 
__ölöe
 

45 
	$__bsw≠_16
 (
__bsx
)

47  
	`__bsw≠_c⁄°™t_16
 (
__bsx
);

48 
	}
}

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004,

60 
	m__GCONV_TRANSLIT
 = 0x0008

65 
	g__gc⁄v_°ï
;

66 
	g__gc⁄v_°ï_d©a
;

67 
	g__gc⁄v_lﬂded_obje˘
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 
	s__gc⁄v_°ï


86 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

87 c⁄° *
__mod«me
;

89 
__cou¡î
;

91 *
__‰om_«me
;

92 *
__to_«me
;

94 
__gc⁄v_f˘
 
__f˘
;

95 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

96 
__gc⁄v_öô_f˘
 
__öô_f˘
;

97 
__gc⁄v_íd_f˘
 
__íd_f˘
;

101 
__mö_√eded_‰om
;

102 
__max_√eded_‰om
;

103 
__mö_√eded_to
;

104 
__max_√eded_to
;

107 
__°©eful
;

109 *
__d©a
;

114 
	s__gc⁄v_°ï_d©a


116 *
__outbuf
;

117 *
__outbu„nd
;

121 
__Êags
;

125 
__övoˇti⁄_cou¡î
;

129 
__öã∫Æ_u£
;

131 
__mb°©e_t
 *
__°©ï
;

132 
__mb°©e_t
 
__°©e
;

138 
	s__gc⁄v_öfo


140 
size_t
 
__n°ïs
;

141 
__gc⁄v_°ï
 *
__°ïs
;

142 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

143 } *
	t__gc⁄v_t
;

146 
	`__gc⁄v_å™¶ôî©e
 (
__gc⁄v_°ï
 *
°ï
,

147 
__gc⁄v_°ï_d©a
 *
°ï_d©a
,

148 c⁄° *
öbuf°¨t
,

149 c⁄° **
öbuÂ
,

150 c⁄° *
öbu„nd
,

151 **
outbuf°¨t
,

152 
size_t
 *
úªvîsibÀ
);

	@/usr/include/gnu/stubs-32.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub_chÊags


	)

11 
	#__°ub_Áâach


	)

12 
	#__°ub_fchÊags


	)

13 
	#__°ub_fdëach


	)

14 
	#__°ub_gây


	)

15 
	#__°ub_lchmod


	)

16 
	#__°ub_ªvoke


	)

17 
	#__°ub_£éogö


	)

18 
	#__°ub_sigªtu∫


	)

19 
	#__°ub_s°k


	)

20 
	#__°ub_°ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub___com∑t_bdÊush


	)

11 
	#__°ub_chÊags


	)

12 
	#__°ub_Áâach


	)

13 
	#__°ub_fchÊags


	)

14 
	#__°ub_fdëach


	)

15 
	#__°ub_gëmsg


	)

16 
	#__°ub_gây


	)

17 
	#__°ub_lchmod


	)

18 
	#__°ub_putmsg


	)

19 
	#__°ub_ªvoke


	)

20 
	#__°ub_£éogö


	)

21 
	#__°ub_sigªtu∫


	)

22 
	#__°ub_s°k


	)

23 
	#__°ub_°ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub___com∑t_bdÊush


	)

11 
	#__°ub___com∑t_¸óã_moduÀ


	)

12 
	#__°ub___com∑t_gë_kî√l_syms


	)

13 
	#__°ub___com∑t_quîy_moduÀ


	)

14 
	#__°ub___com∑t_u£lib


	)

15 
	#__°ub_chÊags


	)

16 
	#__°ub_Áâach


	)

17 
	#__°ub_fchÊags


	)

18 
	#__°ub_fdëach


	)

19 
	#__°ub_gëmsg


	)

20 
	#__°ub_gây


	)

21 
	#__°ub_lchmod


	)

22 
	#__°ub_nfs£rv˘l


	)

23 
	#__°ub_putmsg


	)

24 
	#__°ub_ªvoke


	)

25 
	#__°ub_£éogö


	)

26 
	#__°ub_sigªtu∫


	)

27 
	#__°ub_s°k


	)

28 
	#__°ub_°ty


	)

	@/usr/include/linux/limits.h

1 #i‚de‡
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

149 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

152 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

154 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

157 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

158 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
)

159 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

161 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

162 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

163 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

166 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

167 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

169 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

170 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

171 
__END_NAMESPACE_STD


173 #ifde‡
__USE_XOPEN2K8


175 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

178 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

179 
size_t
 
__n
Ë
__THROW
;

183 
	~<xloˇÀ.h
>

185 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
__loˇÀ_t
 
__loc
Ë
__THROW
;

188 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

189 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

192 
__BEGIN_NAMESPACE_STD


195 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

199 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

200 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

201 
__END_NAMESPACE_STD


203 #ifde‡
__USE_XOPEN2K8


209 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

210 
__loˇÀ_t
 
__loc
Ë
__THROW
;

215 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

216 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

219 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

222 
__BEGIN_NAMESPACE_STD


224 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


225 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

226 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

230 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

231 
__THROW
 
__©åibuã_puª__
;

234 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


235 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

236 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

240 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

241 
__THROW
 
__©åibuã_puª__
;

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_GNU


248 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

249 
__THROW
 
__©åibuã_puª__
;

252 
__BEGIN_NAMESPACE_STD


255 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

256 
__THROW
 
__©åibuã_puª__
;

259 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

260 
__THROW
 
__©åibuã_puª__
;

262 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


263 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

265 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

266 c⁄° 
wch¨_t
 *
__ac˚±
)

267 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

269 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

270 
__THROW
 
__©åibuã_puª__
;

273 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


274 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

276 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

277 c⁄° 
wch¨_t
 *
__√edÀ
)

278 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

280 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

281 
__THROW
 
__©åibuã_puª__
;

285 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

287 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

290 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

291 
__END_NAMESPACE_STD


293 #ifde‡
__USE_XOPEN


295 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


296 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

298 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

299 c⁄° 
wch¨_t
 *
__√edÀ
)

300 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

302 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

303 
__THROW
 
__©åibuã_puª__
;

307 #ifde‡
__USE_XOPEN2K8


309 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

310 
__THROW
 
__©åibuã_puª__
;

314 
__BEGIN_NAMESPACE_STD


316 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


317 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

319 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

320 
size_t
 
__n
)

321 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

323 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

324 
__THROW
 
__©åibuã_puª__
;

328 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

329 
__THROW
 
__©åibuã_puª__
;

332 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

333 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

337 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

338 
__THROW
;

341 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

342 
__END_NAMESPACE_STD


344 #ifde‡
__USE_GNU


347 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

348 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

349 
__THROW
;

353 
__BEGIN_NAMESPACE_STD


356 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

360 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

364 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

368 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

369 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

370 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

373 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

374 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

377 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

378 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

379 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

380 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

381 
__END_NAMESPACE_STD


383 #ifde‡
__USE_EXTERN_INLINES


389 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

390 
__exã∫_ölöe
 
wöt_t


391 
	`__NTH
 (
	$btowc
 (
__c
))

392 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

393 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

395 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

396 
__exã∫_ölöe
 

397 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

398 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

399 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

401 
__exã∫_ölöe
 
size_t


402 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

403 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

404 {  (
__ps
 !
NULL


405 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

408 
__BEGIN_NAMESPACE_STD


411 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

412 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

413 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

418 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

419 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

420 
__END_NAMESPACE_STD


423 #ifdef 
__USE_XOPEN2K8


426 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

427 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

428 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

432 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

433 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

434 
size_t
 
__nwc
, size_à
__Àn
,

435 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

440 #ifde‡
__USE_XOPEN


442 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

446 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

450 
__BEGIN_NAMESPACE_STD


453 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

454 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

455 
__END_NAMESPACE_STD


457 #ifde‡
__USE_ISOC99


458 
__BEGIN_NAMESPACE_C99


460 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

461 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

462 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

463 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

464 
__END_NAMESPACE_C99


468 
__BEGIN_NAMESPACE_STD


471 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

476 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

477 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

478 
__THROW
;

479 
__END_NAMESPACE_STD


481 #ifde‡
__USE_ISOC99


482 
__BEGIN_NAMESPACE_C99


485 
__exãnsi⁄__


486 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

487 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

488 
__THROW
;

492 
__exãnsi⁄__


493 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

494 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

495 
__ba£
Ë
__THROW
;

496 
__END_NAMESPACE_C99


499 #ifde‡
__USE_GNU


502 
__exãnsi⁄__


503 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

504 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

505 
__THROW
;

509 
__exãnsi⁄__


510 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

511 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

512 
__ba£
Ë
__THROW
;

515 #ifde‡
__USE_GNU


529 
	~<xloˇÀ.h
>

533 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

534 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

535 
__loˇÀ_t
 
__loc
Ë
__THROW
;

537 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

538 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

539 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

541 
__exãnsi⁄__


542 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

543 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

544 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

546 
__exãnsi⁄__


547 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

548 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

549 
__ba£
, 
__loˇÀ_t
 
__loc
)

550 
__THROW
;

552 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

553 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

554 
__THROW
;

556 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

557 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

558 
__THROW
;

560 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

561 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

562 
__loˇÀ_t
 
__loc
Ë
__THROW
;

566 #ifde‡
__USE_XOPEN2K8


569 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

570 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

574 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

575 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

576 
__THROW
;

583 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

586 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


587 
__BEGIN_NAMESPACE_STD


590 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

597 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

598 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

607 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

608 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

609 
__THROW
 ;

615 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

616 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

617 
__gnuc_va_li°
 
__¨g
)

623 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

624 
__gnuc_va_li°
 
__¨g
)

628 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

629 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

630 
__gnuc_va_li°
 
__¨g
)

631 
__THROW
 ;

638 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

639 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

648 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

649 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

650 
__THROW
 ;

652 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

653 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

654 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

655 #ifde‡
__REDIRECT


659 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

660 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_fwsˇnf
)

663 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

664 
__isoc99_wsˇnf
)

666 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

667 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

668 ...), 
__isoc99_swsˇnf
)

671 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

673 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

674 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

675 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

676 
__THROW
;

677 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

678 
	#wsˇnf
 
__isoc99_wsˇnf


	)

679 
	#swsˇnf
 
__isoc99_swsˇnf


	)

683 
__END_NAMESPACE_STD


686 #ifde‡
__USE_ISOC99


687 
__BEGIN_NAMESPACE_C99


692 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

693 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

694 
__gnuc_va_li°
 
__¨g
)

700 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

701 
__gnuc_va_li°
 
__¨g
)

704 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

705 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

706 
__gnuc_va_li°
 
__¨g
)

707 
__THROW
 ;

709 #i‡!
deföed
 
__USE_GNU
 \

710 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

711 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

712 #ifde‡
__REDIRECT


713 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

714 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

717 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

718 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

720 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

721 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

722 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

725 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

726 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

727 
__gnuc_va_li°
 
__¨g
);

728 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
);

730 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

731 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

732 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

733 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

734 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

735 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

739 
__END_NAMESPACE_C99


743 
__BEGIN_NAMESPACE_STD


748 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

749 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

755 
wöt_t
 
	`gëwch¨
 ();

762 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

763 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

769 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

777 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

778 
__FILE
 *
__ª°ri˘
 
__°ªam
);

784 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

785 
__FILE
 *
__ª°ri˘
 
__°ªam
);

792 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

793 
__END_NAMESPACE_STD


796 #ifde‡
__USE_GNU


804 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

805 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

813 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

821 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

830 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

831 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

840 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

841 
__FILE
 *
__ª°ri˘
 
__°ªam
);

849 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

850 
__FILE
 *
__ª°ri˘
 
__°ªam
);

854 
__BEGIN_NAMESPACE_C99


858 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

859 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

860 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

861 
__END_NAMESPACE_C99


863 #ifde‡
__USE_GNU


864 
	~<xloˇÀ.h
>

868 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

869 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

870 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

871 
__loˇÀ_t
 
__loc
Ë
__THROW
;

880 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


881 
	#__√ed_iswxxx


	)

882 
	~<w˘y≥.h
>

886 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


887 
	~<bôs/wch¨2.h
>

890 #ifde‡
__LDBL_COMPAT


891 
	~<bôs/wch¨-ldbl.h
>

894 
__END_DECLS


902 #unde‡
__√ed_mb°©e_t


903 #unde‡
__√ed_wöt_t


	@/usr/include/asm-generic/errno.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

17 
	#ENOSYS
 38

	)

19 
	#ENOTEMPTY
 39

	)

20 
	#ELOOP
 40

	)

21 
	#EWOULDBLOCK
 
EAGAIN


	)

22 
	#ENOMSG
 42

	)

23 
	#EIDRM
 43

	)

24 
	#ECHRNG
 44

	)

25 
	#EL2NSYNC
 45

	)

26 
	#EL3HLT
 46

	)

27 
	#EL3RST
 47

	)

28 
	#ELNRNG
 48

	)

29 
	#EUNATCH
 49

	)

30 
	#ENOCSI
 50

	)

31 
	#EL2HLT
 51

	)

32 
	#EBADE
 52

	)

33 
	#EBADR
 53

	)

34 
	#EXFULL
 54

	)

35 
	#ENOANO
 55

	)

36 
	#EBADRQC
 56

	)

37 
	#EBADSLT
 57

	)

39 
	#EDEADLOCK
 
EDEADLK


	)

41 
	#EBFONT
 59

	)

42 
	#ENOSTR
 60

	)

43 
	#ENODATA
 61

	)

44 
	#ETIME
 62

	)

45 
	#ENOSR
 63

	)

46 
	#ENONET
 64

	)

47 
	#ENOPKG
 65

	)

48 
	#EREMOTE
 66

	)

49 
	#ENOLINK
 67

	)

50 
	#EADV
 68

	)

51 
	#ESRMNT
 69

	)

52 
	#ECOMM
 70

	)

53 
	#EPROTO
 71

	)

54 
	#EMULTIHOP
 72

	)

55 
	#EDOTDOT
 73

	)

56 
	#EBADMSG
 74

	)

57 
	#EOVERFLOW
 75

	)

58 
	#ENOTUNIQ
 76

	)

59 
	#EBADFD
 77

	)

60 
	#EREMCHG
 78

	)

61 
	#ELIBACC
 79

	)

62 
	#ELIBBAD
 80

	)

63 
	#ELIBSCN
 81

	)

64 
	#ELIBMAX
 82

	)

65 
	#ELIBEXEC
 83

	)

66 
	#EILSEQ
 84

	)

67 
	#ERESTART
 85

	)

68 
	#ESTRPIPE
 86

	)

69 
	#EUSERS
 87

	)

70 
	#ENOTSOCK
 88

	)

71 
	#EDESTADDRREQ
 89

	)

72 
	#EMSGSIZE
 90

	)

73 
	#EPROTOTYPE
 91

	)

74 
	#ENOPROTOOPT
 92

	)

75 
	#EPROTONOSUPPORT
 93

	)

76 
	#ESOCKTNOSUPPORT
 94

	)

77 
	#EOPNOTSUPP
 95

	)

78 
	#EPFNOSUPPORT
 96

	)

79 
	#EAFNOSUPPORT
 97

	)

80 
	#EADDRINUSE
 98

	)

81 
	#EADDRNOTAVAIL
 99

	)

82 
	#ENETDOWN
 100

	)

83 
	#ENETUNREACH
 101

	)

84 
	#ENETRESET
 102

	)

85 
	#ECONNABORTED
 103

	)

86 
	#ECONNRESET
 104

	)

87 
	#ENOBUFS
 105

	)

88 
	#EISCONN
 106

	)

89 
	#ENOTCONN
 107

	)

90 
	#ESHUTDOWN
 108

	)

91 
	#ETOOMANYREFS
 109

	)

92 
	#ETIMEDOUT
 110

	)

93 
	#ECONNREFUSED
 111

	)

94 
	#EHOSTDOWN
 112

	)

95 
	#EHOSTUNREACH
 113

	)

96 
	#EALREADY
 114

	)

97 
	#EINPROGRESS
 115

	)

98 
	#ESTALE
 116

	)

99 
	#EUCLEAN
 117

	)

100 
	#ENOTNAM
 118

	)

101 
	#ENAVAIL
 119

	)

102 
	#EISNAM
 120

	)

103 
	#EREMOTEIO
 121

	)

104 
	#EDQUOT
 122

	)

106 
	#ENOMEDIUM
 123

	)

107 
	#EMEDIUMTYPE
 124

	)

108 
	#ECANCELED
 125

	)

109 
	#ENOKEY
 126

	)

110 
	#EKEYEXPIRED
 127

	)

111 
	#EKEYREVOKED
 128

	)

112 
	#EKEYREJECTED
 129

	)

115 
	#EOWNERDEAD
 130

	)

116 
	#ENOTRECOVERABLE
 131

	)

118 
	#ERFKILL
 132

	)

120 
	#EHWPOISON
 133

	)

	@/usr/include/bits/wchar-ldbl.h

19 #i‚de‡
_WCHAR_H


23 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


24 
__BEGIN_NAMESPACE_C99


25 
__LDBL_REDIR_DECL
 (
fw¥ötf
);

26 
__LDBL_REDIR_DECL
 (
w¥ötf
);

27 
__LDBL_REDIR_DECL
 (
sw¥ötf
);

28 
__LDBL_REDIR_DECL
 (
vfw¥ötf
);

29 
__LDBL_REDIR_DECL
 (
vw¥ötf
);

30 
__LDBL_REDIR_DECL
 (
vsw¥ötf
);

31 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

32 && !
deföed
 
	g__REDIRECT
 \

33 && (
deföed
 
	g__STRICT_ANSI__
 || deföed 
	g__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fwsˇnf
, 
__∆dbl___isoc99_fwsˇnf
)

35 
	$__LDBL_REDIR1_DECL
 (
wsˇnf
, 
__∆dbl___isoc99_wsˇnf
)

36 
	$__LDBL_REDIR1_DECL
 (
swsˇnf
, 
__∆dbl___isoc99_swsˇnf
)

38 
	`__LDBL_REDIR_DECL
 (
fwsˇnf
);

39 
	`__LDBL_REDIR_DECL
 (
wsˇnf
);

40 
	`__LDBL_REDIR_DECL
 (
swsˇnf
);

42 
__END_NAMESPACE_C99


45 #ifde‡
__USE_ISOC99


46 
__BEGIN_NAMESPACE_C99


47 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd
, 
wc°od
);

48 #i‡!
deföed
 
__USE_GNU
 && !deföed 
__REDIRECT
 \

49 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

50 
	$__LDBL_REDIR1_DECL
 (
vfwsˇnf
, 
__∆dbl___isoc99_vfwsˇnf
)

51 
	$__LDBL_REDIR1_DECL
 (
vwsˇnf
, 
__∆dbl___isoc99_vwsˇnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vswsˇnf
, 
__∆dbl___isoc99_vswsˇnf
)

54 
	`__LDBL_REDIR_DECL
 (
vfwsˇnf
);

55 
	`__LDBL_REDIR_DECL
 (
vwsˇnf
);

56 
	`__LDBL_REDIR_DECL
 (
vswsˇnf
);

58 
__END_NAMESPACE_C99


61 #ifde‡
__USE_GNU


62 
	`__LDBL_REDIR1_DECL
 (
wc°ﬁd_l
, 
wc°od_l
);

65 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


66 
	$__LDBL_REDIR_DECL
 (
__sw¥ötf_chk
)

67 
	$__LDBL_REDIR_DECL
 (
__vsw¥ötf_chk
)

68 #i‡
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__fw¥ötf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__w¥ötf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vfw¥ötf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vw¥ötf_chk
)

	@/usr/include/bits/wchar2.h

19 #i‚de‡
_WCHAR_H


24 
wch¨_t
 *
	$__wmem˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

25 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

26 
size_t
 
__ns1
Ë
__THROW
;

27 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_Æüs
,

28 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

29 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
),

30 
wmem˝y
);

31 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_chk_w¨n
,

32 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

33 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

34 
size_t
 
__ns1
), 
__wmem˝y_chk
)

35 
	`__w¨«âr
 ("wmemcpy called withÜength biggerÅhan size of destination "

38 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

39 
	`__NTH
 (
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, c⁄° wch¨_à*__ª°ri˘ 
__s2
,

40 
size_t
 
__n
))

42 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

44 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

45  
	`__wmem˝y_chk
 (
__s1
, 
__s2
, 
__n
,

46 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

48 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

49  
	`__wmem˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

50 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

52  
	`__wmem˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

53 
	}
}

56 
wch¨_t
 *
	$__wmemmove_chk
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

57 
size_t
 
__n
, size_à
__ns1
Ë
__THROW
;

58 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_Æüs
, (wch¨_à*
__s1
,

59 c⁄° 
wch¨_t
 *
__s2
,

60 
size_t
 
__n
), 
wmemmove
);

61 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¨n
,

62 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

63 
size_t
 
__n
, size_à
__ns1
), 
__wmemmove_chk
)

64 
	`__w¨«âr
 ("wmemmove called withÜength biggerÅhan size of destination "

67 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

68 
	`__NTH
 (
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
))

70 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

72 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

73  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

74 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

76 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

77  
	`__wmemmove_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

78 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

80  
	`__wmemmove_Æüs
 (
__s1
, 
__s2
, 
__n
);

81 
	}
}

84 #ifde‡
__USE_GNU


85 
wch¨_t
 *
	$__wmemp˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

86 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

87 
size_t
 
__ns1
Ë
__THROW
;

88 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_Æüs
,

89 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

90 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
,

91 
size_t
 
__n
), 
wmemp˝y
);

92 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_chk_w¨n
,

93 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

94 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

95 
size_t
 
__ns1
), 
__wmemp˝y_chk
)

96 
	`__w¨«âr
 ("wmempcpy called withÜength biggerÅhan size of destination "

99 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

100 
	`__NTH
 (
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, c⁄° wch¨_à*__ª°ri˘ 
__s2
,

101 
size_t
 
__n
))

103 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

105 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

106  
	`__wmemp˝y_chk
 (
__s1
, 
__s2
, 
__n
,

107 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

109 i‡(
__n
 > 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
))

110  
	`__wmemp˝y_chk_w¨n
 (
__s1
, 
__s2
, 
__n
,

111 
	`__bos0
 (
__s1
Ë/  (
wch¨_t
));

113  
	`__wmemp˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

114 
	}
}

118 
wch¨_t
 *
	$__wmem£t_chk
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

119 
size_t
 
__ns
Ë
__THROW
;

120 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_Æüs
, (wch¨_à*
__s
, wch¨_à
__c
,

121 
size_t
 
__n
), 
wmem£t
);

122 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¨n
,

123 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

124 
size_t
 
__ns
), 
__wmem£t_chk
)

125 
	`__w¨«âr
 ("wmemset called withÜength biggerÅhan size of destination "

128 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

129 
	`__NTH
 (
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
))

131 i‡(
	`__bos0
 (
__s
Ë!(
size_t
) -1)

133 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

134  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sË/  (
wch¨_t
));

136 i‡(
__n
 > 
	`__bos0
 (
__s
Ë/  (
wch¨_t
))

137  
	`__wmem£t_chk_w¨n
 (
__s
, 
__c
, 
__n
,

138 
	`__bos0
 (
__s
Ë/  (
wch¨_t
));

140  
	`__wmem£t_Æüs
 (
__s
, 
__c
, 
__n
);

141 
	}
}

144 
wch¨_t
 *
	$__wcs˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

145 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

146 
size_t
 
__n
Ë
__THROW
;

147 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcs˝y_Æüs
,

148 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

149 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcs˝y
);

151 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

152 
	`__NTH
 (
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

154 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

155  
	`__wcs˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

156  
	`__wcs˝y_Æüs
 (
__de°
, 
__§c
);

157 
	}
}

160 
wch¨_t
 *
	$__w˝˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

161 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

162 
size_t
 
__de°Àn
Ë
__THROW
;

163 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝˝y_Æüs
,

164 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

165 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
w˝˝y
);

167 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

168 
	`__NTH
 (
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

170 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

171  
	`__w˝˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

172  
	`__w˝˝y_Æüs
 (
__de°
, 
__§c
);

173 
	}
}

176 
wch¨_t
 *
	$__wc¢˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

177 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

178 
size_t
 
__de°Àn
Ë
__THROW
;

179 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_Æüs
,

180 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

181 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

182 
size_t
 
__n
), 
wc¢˝y
);

183 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_chk_w¨n
,

184 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

185 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

186 
size_t
 
__n
, size_à
__de°Àn
), 
__wc¢˝y_chk
)

187 
	`__w¨«âr
 ("wcsncpy called withÜength biggerÅhan size of destination "

190 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

191 
	`__NTH
 (
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

192 
size_t
 
__n
))

194 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

196 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

197  
	`__wc¢˝y_chk
 (
__de°
, 
__§c
, 
__n
,

198 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

199 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

200  
	`__wc¢˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

201 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

203  
	`__wc¢˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

204 
	}
}

207 
wch¨_t
 *
	$__w˝n˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

208 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

209 
size_t
 
__de°Àn
Ë
__THROW
;

210 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_Æüs
,

211 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

212 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

213 
size_t
 
__n
), 
w˝n˝y
);

214 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_chk_w¨n
,

215 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

216 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

217 
size_t
 
__n
, size_à
__de°Àn
), 
__w˝n˝y_chk
)

218 
	`__w¨«âr
 ("wcpncpy called withÜength biggerÅhan size of destination "

221 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

222 
	`__NTH
 (
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

223 
size_t
 
__n
))

225 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

227 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
))

228  
	`__w˝n˝y_chk
 (
__de°
, 
__§c
, 
__n
,

229 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

230 i‡(
__n
 > 
	`__bos
 (
__de°
Ë/  (
wch¨_t
))

231  
	`__w˝n˝y_chk_w¨n
 (
__de°
, 
__§c
, 
__n
,

232 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

234  
	`__w˝n˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

235 
	}
}

238 
wch¨_t
 *
	$__wcsˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

239 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

240 
size_t
 
__de°Àn
Ë
__THROW
;

241 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcsˇt_Æüs
,

242 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

243 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcsˇt
);

245 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

246 
	`__NTH
 (
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
))

248 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

249  
	`__wcsˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

250  
	`__wcsˇt_Æüs
 (
__de°
, 
__§c
);

251 
	}
}

254 
wch¨_t
 *
	$__wc¢ˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

255 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

256 
size_t
 
__n
, size_à
__de°Àn
Ë
__THROW
;

257 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢ˇt_Æüs
,

258 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

259 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
,

260 
size_t
 
__n
), 
wc¢ˇt
);

262 
__f‹tify_fun˘i⁄
 
wch¨_t
 *

263 
	`__NTH
 (
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
, c⁄° wch¨_à*__ª°ri˘ 
__§c
,

264 
size_t
 
__n
))

266 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

267  
	`__wc¢ˇt_chk
 (
__de°
, 
__§c
, 
__n
,

268 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

269  
	`__wc¢ˇt_Æüs
 (
__de°
, 
__§c
, 
__n
);

270 
	}
}

273 
	$__sw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

274 
__Êag
, 
size_t
 
__s_Àn
,

275 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

276 
__THROW
 ;

278 
	`__REDIRECT_NTH_LDBL
 (
__sw¥ötf_Æüs
,

279 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

280 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...),

281 
sw¥ötf
);

283 #ifde‡
__va_¨g_∑ck


284 
__f‹tify_fun˘i⁄
 

285 
	`__NTH
 (
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

286 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...))

288 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

289  
	`__sw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

290 
	`__bos
 (
__s
Ë/  (
wch¨_t
),

291 
__fmt
, 
	`__va_¨g_∑ck
 ());

292  
	`__sw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¨g_∑ck
 ());

293 
	}
}

294 #ñi‡!
deföed
 
__˝lu•lus


296 
	#sw¥ötf
(
s
, 
n
, ...) \

297 (
	`__bos
 (
s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

298 ? 
	`__sw¥ötf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

299 
	`__bos
 (
s
Ë/  (
wch¨_t
), 
__VA_ARGS__
) \

300 : 
	`sw¥ötf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

303 
	$__vsw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

304 
__Êag
, 
size_t
 
__s_Àn
,

305 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

306 
__gnuc_va_li°
 
__¨g
)

307 
__THROW
 ;

309 
	`__REDIRECT_NTH_LDBL
 (
__vsw¥ötf_Æüs
,

310 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

311 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
,

312 
__gnuc_va_li°
 
__≠
), 
vsw¥ötf
);

314 
__f‹tify_fun˘i⁄
 

315 
	`__NTH
 (
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

316 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
))

318 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1)

319  
	`__vsw¥ötf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

320 
	`__bos
 (
__s
Ë/  (
wch¨_t
), 
__fmt
, 
__≠
);

321  
	`__vsw¥ötf_Æüs
 (
__s
, 
__n
, 
__fmt
, 
__≠
);

322 
	}
}

325 #i‡
__USE_FORTIFY_LEVEL
 > 1

327 
__fw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

328 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

329 
__w¥ötf_chk
 (
__Êag
, c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

331 
__vfw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

332 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

333 
__gnuc_va_li°
 
__≠
);

334 
__vw¥ötf_chk
 (
__Êag
, c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

335 
__gnuc_va_li°
 
__≠
);

337 #ifde‡
__va_¨g_∑ck


338 
__f‹tify_fun˘i⁄
 

339 
	$w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, ...)

341  
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¨g_∑ck
 ());

342 
	}
}

344 
__f‹tify_fun˘i⁄
 

345 
	$fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, c⁄° 
wch¨_t
 *__ª°ri˘ 
__fmt
, ...)

347  
	`__fw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

348 
	`__va_¨g_∑ck
 ());

349 
	}
}

350 #ñi‡!
deföed
 
__˝lu•lus


351 
	#w¥ötf
(...) \

352 
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

353 
	#fw¥ötf
(
°ªam
, ...) \

354 
	`__fw¥ötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

357 
__f‹tify_fun˘i⁄
 

358 
	$vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

360  
	`__vw¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

361 
	}
}

363 
__f‹tify_fun˘i⁄
 

364 
	$vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

365 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__fmt
, 
__gnuc_va_li°
 
__≠
)

367  
	`__vfw¥ötf_chk
 (
__°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__≠
);

368 
	}
}

372 
wch¨_t
 *
	$__fgëws_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

373 
__FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

374 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_Æüs
,

375 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

376 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws
Ë
__wur
;

377 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_chk_w¨n
,

378 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

379 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
__fgëws_chk
)

380 
__wur
 
	`__w¨«âr
 ("fgetws called with bigger sizeÅhanÜength "

383 
__f‹tify_fun˘i⁄
 
__wur
 
wch¨_t
 *

384 
	$fgëws
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

386 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

388 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

389  
	`__fgëws_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

390 
__n
, 
__°ªam
);

392 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

393  
	`__fgëws_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

394 
__n
, 
__°ªam
);

396  
	`__fgëws_Æüs
 (
__s
, 
__n
, 
__°ªam
);

397 
	}
}

399 #ifde‡
__USE_GNU


400 
wch¨_t
 *
	$__fgëws_u∆ocked_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
,

401 
__n
, 
__FILE
 *
__ª°ri˘
 
__°ªam
)

402 
__wur
;

403 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_Æüs
,

404 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

405 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws_u∆ocked
)

406 
__wur
;

407 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_chk_w¨n
,

408 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

409 
__FILE
 *
__ª°ri˘
 
__°ªam
),

410 
__fgëws_u∆ocked_chk
)

411 
__wur
 
	`__w¨«âr
 ("fgetws_unlocked called with bigger sizeÅhanÜength "

414 
__f‹tify_fun˘i⁄
 
__wur
 
wch¨_t
 *

415 
	$fgëws_u∆ocked
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

417 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1)

419 i‡(!
	`__buûtö_c⁄°™t_p
 (
__n
) || __n <= 0)

420  
	`__fgëws_u∆ocked_chk
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

421 
__n
, 
__°ªam
);

423 i‡((
size_t
Ë
__n
 > 
	`__bos
 (
__s
Ë/  (
wch¨_t
))

424  
	`__fgëws_u∆ocked_chk_w¨n
 (
__s
, 
	`__bos
 (__sË/  (
wch¨_t
),

425 
__n
, 
__°ªam
);

427  
	`__fgëws_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

428 
	}
}

432 
size_t
 
	$__w¸tomb_chk
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

433 
mb°©e_t
 *
__ª°ri˘
 
__p
,

434 
size_t
 
__buÊí
Ë
__THROW
 
__wur
;

435 
size_t
 
	`__REDIRECT_NTH
 (
__w¸tomb_Æüs
,

436 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

437 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
w¸tomb
Ë
__wur
;

439 
__f‹tify_fun˘i⁄
 
__wur
 
size_t


440 
	`__NTH
 (
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

441 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

446 
	#__WCHAR_MB_LEN_MAX
 16

	)

447 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__WCHAR_MB_LEN_MAX


450 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

451  
	`__w¸tomb_chk
 (
__s
, 
__wch¨
, 
__ps
, 
	`__bos
 (__s));

452  
	`__w¸tomb_Æüs
 (
__s
, 
__wch¨
, 
__ps
);

453 
	}
}

456 
size_t
 
	$__mb§towcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

457 c⁄° **
__ª°ri˘
 
__§c
,

458 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

459 
size_t
 
__d°Àn
Ë
__THROW
;

460 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_Æüs
,

461 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

462 c⁄° **
__ª°ri˘
 
__§c
,

463 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

464 
mb§towcs
);

465 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_chk_w¨n
,

466 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

467 c⁄° **
__ª°ri˘
 
__§c
,

468 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

469 
size_t
 
__d°Àn
), 
__mb§towcs_chk
)

470 
	`__w¨«âr
 ("mbsrtowcs called with dst buffer smallerÅhanÜen "

473 
__f‹tify_fun˘i⁄
 
size_t


474 
	`__NTH
 (
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° **__ª°ri˘ 
__§c
,

475 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

477 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

479 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

480  
	`__mb§towcs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

481 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

483 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

484  
	`__mb§towcs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

485 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

487  
	`__mb§towcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

488 
	}
}

491 
size_t
 
	$__wc§tombs_chk
 (*
__ª°ri˘
 
__d°
,

492 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

493 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

494 
size_t
 
__d°Àn
Ë
__THROW
;

495 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_Æüs
,

496 (*
__ª°ri˘
 
__d°
,

497 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

498 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

499 
wc§tombs
);

500 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_chk_w¨n
,

501 (*
__ª°ri˘
 
__d°
,

502 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

503 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

504 
size_t
 
__d°Àn
), 
__wc§tombs_chk
)

505 
	`__w¨«âr
 ("wcsrtombs called with dst buffer smallerÅhanÜen");

507 
__f‹tify_fun˘i⁄
 
size_t


508 
	`__NTH
 (
	$wc§tombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 **__ª°ri˘ 
__§c
,

509 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

511 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

513 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

514  
	`__wc§tombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

516 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

517  
	`__wc§tombs_chk_w¨n
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

519  
	`__wc§tombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

520 
	}
}

523 #ifde‡
__USE_GNU


524 
size_t
 
	$__mb¢πowcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

525 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

526 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

527 
size_t
 
__d°Àn
Ë
__THROW
;

528 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_Æüs
,

529 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

530 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

531 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

532 
mb¢πowcs
);

533 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_chk_w¨n
,

534 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

535 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

536 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

537 
size_t
 
__d°Àn
), 
__mb¢πowcs_chk
)

538 
	`__w¨«âr
 ("mbsnrtowcs called with dst buffer smallerÅhanÜen "

541 
__f‹tify_fun˘i⁄
 
size_t


542 
	`__NTH
 (
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, c⁄° **__ª°ri˘ 
__§c
,

543 
size_t
 
__nmc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

545 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

547 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

548  
	`__mb¢πowcs_chk
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

549 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

551 i‡(
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
))

552  
	`__mb¢πowcs_chk_w¨n
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

553 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

555  
	`__mb¢πowcs_Æüs
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
);

556 
	}
}

559 
size_t
 
	$__wc¢πombs_chk
 (*
__ª°ri˘
 
__d°
,

560 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

561 
size_t
 
__nwc
, size_à
__Àn
,

562 
mb°©e_t
 *
__ª°ri˘
 
__ps
, 
size_t
 
__d°Àn
)

563 
__THROW
;

564 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_Æüs
,

565 (*
__ª°ri˘
 
__d°
,

566 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

567 
size_t
 
__nwc
, size_à
__Àn
,

568 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
wc¢πombs
);

569 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_chk_w¨n
,

570 (*
__ª°ri˘
 
__d°
,

571 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

572 
size_t
 
__nwc
, size_à
__Àn
,

573 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

574 
size_t
 
__d°Àn
), 
__wc¢πombs_chk
)

575 
	`__w¨«âr
 ("wcsnrtombs called with dst buffer smallerÅhanÜen");

577 
__f‹tify_fun˘i⁄
 
size_t


578 
	`__NTH
 (
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
, c⁄° 
wch¨_t
 **__ª°ri˘ 
__§c
,

579 
size_t
 
__nwc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

581 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1)

583 i‡(!
	`__buûtö_c⁄°™t_p
 (
__Àn
))

584  
	`__wc¢πombs_chk
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

585 
	`__bos
 (
__d°
));

587 i‡(
__Àn
 > 
	`__bos
 (
__d°
))

588  
	`__wc¢πombs_chk_w¨n
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
,

589 
	`__bos
 (
__d°
));

591  
	`__wc¢πombs_Æüs
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
);

592 
	}
}

	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@
1
.
1
/usr/include
213
5429
common/array1.h
common/array2.h
common/array2_utils.h
common/array3.h
common/array3_utils.h
common/bfstream.cpp
common/bfstream.h
common/blas_wrapper.h
common/ccd_defs.h
common/ccd_wrapper.h
common/collisionqueries.cpp
common/collisionqueries.h
common/commonoptions.h
common/cubic_ccd_wrapper.cpp
common/fileio.cpp
common/fileio.h
common/gluvi.cpp
common/gluvi.h
common/grid3.h
common/hashtable.h
common/lapack_wrapper.h
common/levelset.cpp
common/levelset.h
common/makelevelset2.cpp
common/makelevelset2.h
common/makelevelset3.cpp
common/makelevelset3.h
common/marching_tiles_hires.cpp
common/marching_tiles_hires.h
common/marching_triangles.cpp
common/marching_triangles.h
common/mat.h
common/matlapack.h
common/newsparse/bicgstab.h
common/newsparse/dense_matrix.cpp
common/newsparse/dense_matrix.h
common/newsparse/krylov_solvers.cpp
common/newsparse/krylov_solvers.h
common/newsparse/linear_operator.h
common/newsparse/sparse_matrix.cpp
common/newsparse/sparse_matrix.h
common/root_parity_ccd_wrapper.cpp
common/runstats.cpp
common/runstats.h
common/tunicate/expansion.cpp
common/tunicate/expansion.h
common/tunicate/fenv_include.h
common/tunicate/intersection.cpp
common/tunicate/interval.cpp
common/tunicate/interval.h
common/tunicate/intervalbase.h
common/tunicate/neg.cpp
common/tunicate/neg.h
common/tunicate/orientation.cpp
common/tunicate/rootparitycollisiontest.cpp
common/tunicate/rootparitycollisiontest.h
common/tunicate/tunicate.h
common/util.h
common/vec.h
common/wallclocktime.cpp
common/wallclocktime.h
eltopo3d/accelerationgrid.cpp
eltopo3d/accelerationgrid.h
eltopo3d/broadphase.h
eltopo3d/broadphasegrid.cpp
eltopo3d/broadphasegrid.h
eltopo3d/collisionpipeline.cpp
eltopo3d/collisionpipeline.h
eltopo3d/dynamicsurface.cpp
eltopo3d/dynamicsurface.h
eltopo3d/edgecollapser.cpp
eltopo3d/edgecollapser.h
eltopo3d/edgeflipper.cpp
eltopo3d/edgeflipper.h
eltopo3d/edgesplitter.cpp
eltopo3d/edgesplitter.h
eltopo3d/eltopo.cpp
eltopo3d/eltopo.h
eltopo3d/impactzonesolver.cpp
eltopo3d/impactzonesolver.h
eltopo3d/meshmerger.cpp
eltopo3d/meshmerger.h
eltopo3d/meshoperator.h
eltopo3d/meshpincher.cpp
eltopo3d/meshpincher.h
eltopo3d/meshrenderer.cpp
eltopo3d/meshrenderer.h
eltopo3d/meshsmoother.cpp
eltopo3d/meshsmoother.h
eltopo3d/nondestructivetrimesh.cpp
eltopo3d/nondestructivetrimesh.h
eltopo3d/options.h
eltopo3d/subdivisionscheme.cpp
eltopo3d/subdivisionscheme.h
eltopo3d/surftrack.cpp
eltopo3d/surftrack.h
eltopo3d/trianglequality.cpp
eltopo3d/trianglequality.h
mycode/bareinterface.cpp
mycode/eltopo.cpp
mycode/mesh.c
mycode/surftrackexample.cpp
mycode/surftrackexample2.cpp
mycode/surftrackexample3.cpp
mycode/surftrackexample4.cpp
mycode/test.c
mycode/test2.c
talpa/curlnoise/curlnoise.h
talpa/curlnoise/noise.cpp
talpa/curlnoise/noise.h
talpa/drivers/enrightdriver.h
talpa/drivers/faceoff.cpp
talpa/drivers/faceoff.h
talpa/drivers/meancurvature.cpp
talpa/drivers/meancurvature.h
talpa/drivers/meshdriver.h
talpa/drivers/normaldriver.cpp
talpa/drivers/normaldriver.h
talpa/drivers/sisccurlnoisedriver.cpp
talpa/drivers/sisccurlnoisedriver.h
talpa/framestepper.h
talpa/geometryinit.cpp
talpa/geometryinit.h
talpa/highrestimer.h
talpa/iomesh.cpp
talpa/iomesh.h
talpa/lexer.cpp
talpa/lexer.h
talpa/main.cpp
talpa/newparser.cpp
talpa/newparser.h
talpa/scriptinit.cpp
talpa/scriptinit.h
talpa/simulation.h
/usr/include/GL/glut.h
/usr/include/cblas.h
/usr/include/dirent.h
/usr/include/errno.h
/usr/include/fenv.h
/usr/include/math.h
/usr/include/pthread.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/sys/stat.h
/usr/include/sys/time.h
/usr/include/sys/types.h
/usr/include/bits/dirent.h
/usr/include/bits/errno.h
/usr/include/bits/fenv.h
/usr/include/bits/fenvinline.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/math-vector.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/setjmp.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/cblas_mangling.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sched.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/time.h
/usr/include/_G_config.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/libm-simd-decl-stubs.h
/usr/include/bits/local_lim.h
/usr/include/bits/sched.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
/usr/include/bits/timex.h
/usr/include/bits/typesizes.h
/usr/include/ctype.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/xlocale.h
/usr/include/asm/errno.h
/usr/include/bits/byteswap-16.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/linux/limits.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
